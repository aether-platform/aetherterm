const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./AboutView.DWJtUdZF.js","./AboutView.CSIvawM9.css"])))=>i.map(i=>d[i]);
var Yb=Object.defineProperty;var Gb=(e,t,r)=>t in e?Yb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Su=(e,t,r)=>Gb(e,typeof t!="symbol"?t+"":t,r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();/**
* @vue/shared v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Ih(e){const t=Object.create(null);for(const r of e.split(","))t[r]=1;return r=>r in t}const Ft={},Ys=[],Rn=()=>{},Xb=()=>!1,Ec=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Fh=e=>e.startsWith("onUpdate:"),vr=Object.assign,Dh=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},Zb=Object.prototype.hasOwnProperty,xt=(e,t)=>Zb.call(e,t),Qe=Array.isArray,Gs=e=>Ta(e)==="[object Map]",Ac=e=>Ta(e)==="[object Set]",n0=e=>Ta(e)==="[object Date]",nt=e=>typeof e=="function",tr=e=>typeof e=="string",ln=e=>typeof e=="symbol",qt=e=>e!==null&&typeof e=="object",g_=e=>(qt(e)||nt(e))&&nt(e.then)&&nt(e.catch),v_=Object.prototype.toString,Ta=e=>v_.call(e),Qb=e=>Ta(e).slice(8,-1),y_=e=>Ta(e)==="[object Object]",Hh=e=>tr(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Go=Ih(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Rc=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},Jb=/-(\w)/g,Zr=Rc(e=>e.replace(Jb,(t,r)=>r?r.toUpperCase():"")),e2=/\B([A-Z])/g,Mi=Rc(e=>e.replace(e2,"-$1").toLowerCase()),kc=Rc(e=>e.charAt(0).toUpperCase()+e.slice(1)),Cu=Rc(e=>e?`on${kc(e)}`:""),bi=(e,t)=>!Object.is(e,t),Ul=(e,...t)=>{for(let r=0;r<e.length;r++)e[r](...t)},b_=(e,t,r,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:r})},Df=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let i0;const Tc=()=>i0||(i0=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof globalThis<"u"?globalThis:{});function Ph(e){if(Qe(e)){const t={};for(let r=0;r<e.length;r++){const n=e[r],i=tr(n)?i2(n):Ph(n);if(i)for(const s in i)t[s]=i[s]}return t}else if(tr(e)||qt(e))return e}const t2=/;(?![^(]*\))/g,r2=/:([^]+)/,n2=/\/\*[^]*?\*\//g;function i2(e){const t={};return e.replace(n2,"").split(t2).forEach(r=>{if(r){const n=r.split(r2);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function Br(e){let t="";if(tr(e))t=e;else if(Qe(e))for(let r=0;r<e.length;r++){const n=Br(e[r]);n&&(t+=n+" ")}else if(qt(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}const s2="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",o2=Ih(s2);function w_(e){return!!e||e===""}function a2(e,t){if(e.length!==t.length)return!1;let r=!0;for(let n=0;r&&n<e.length;n++)r=Mc(e[n],t[n]);return r}function Mc(e,t){if(e===t)return!0;let r=n0(e),n=n0(t);if(r||n)return r&&n?e.getTime()===t.getTime():!1;if(r=ln(e),n=ln(t),r||n)return e===t;if(r=Qe(e),n=Qe(t),r||n)return r&&n?a2(e,t):!1;if(r=qt(e),n=qt(t),r||n){if(!r||!n)return!1;const i=Object.keys(e).length,s=Object.keys(t).length;if(i!==s)return!1;for(const a in e){const o=e.hasOwnProperty(a),l=t.hasOwnProperty(a);if(o&&!l||!o&&l||!Mc(e[a],t[a]))return!1}}return String(e)===String(t)}function S_(e,t){return e.findIndex(r=>Mc(r,t))}const C_=e=>!!(e&&e.__v_isRef===!0),It=e=>tr(e)?e:e==null?"":Qe(e)||qt(e)&&(e.toString===v_||!nt(e.toString))?C_(e)?It(e.value):JSON.stringify(e,x_,2):String(e),x_=(e,t)=>C_(t)?x_(e,t.value):Gs(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((r,[n,i],s)=>(r[xu(n,s)+" =>"]=i,r),{})}:Ac(t)?{[`Set(${t.size})`]:[...t.values()].map(r=>xu(r))}:ln(t)?xu(t):qt(t)&&!Qe(t)&&!y_(t)?String(t):t,xu=(e,t="")=>{var r;return ln(e)?`Symbol(${(r=e.description)!=null?r:t})`:e};/**
* @vue/reactivity v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let hr,E_=class{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=hr,!t&&hr&&(this.index=(hr.scopes||(hr.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,r;if(this.scopes)for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].pause();for(t=0,r=this.effects.length;t<r;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,r;if(this.scopes)for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].resume();for(t=0,r=this.effects.length;t<r;t++)this.effects[t].resume()}}run(t){if(this._active){const r=hr;try{return hr=this,t()}finally{hr=r}}}on(){++this._on===1&&(this.prevScope=hr,hr=this)}off(){this._on>0&&--this._on===0&&(hr=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(this.effects.length=0,r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.cleanups.length=0,this.scopes){for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}};function A_(e){return new E_(e)}function R_(){return hr}function l2(e,t=!1){hr&&hr.cleanups.push(e)}let Nt;const Eu=new WeakSet;let k_=class{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,hr&&hr.active&&hr.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Eu.has(this)&&(Eu.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||M_(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,s0(this),L_(this);const t=Nt,r=an;Nt=this,an=!0;try{return this.fn()}finally{B_(this),Nt=t,an=r,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Uh(t);this.deps=this.depsTail=void 0,s0(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Eu.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Hf(this)&&this.run()}get dirty(){return Hf(this)}},T_=0,Xo,Zo;function M_(e,t=!1){if(e.flags|=8,t){e.next=Zo,Zo=e;return}e.next=Xo,Xo=e}function jh(){T_++}function Nh(){if(--T_>0)return;if(Zo){let t=Zo;for(Zo=void 0;t;){const r=t.next;t.next=void 0,t.flags&=-9,t=r}}let e;for(;Xo;){let t=Xo;for(Xo=void 0;t;){const r=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=r}}if(e)throw e}function L_(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function B_(e){let t,r=e.depsTail,n=r;for(;n;){const i=n.prevDep;n.version===-1?(n===r&&(r=i),Uh(n),c2(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=i}e.deps=t,e.depsTail=r}function Hf(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(O_(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function O_(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===ua)||(e.globalVersion=ua,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Hf(e))))return;e.flags|=2;const t=e.dep,r=Nt,n=an;Nt=e,an=!0;try{L_(e);const i=e.fn(e._value);(t.version===0||bi(i,e._value))&&(e.flags|=128,e._value=i,t.version++)}catch(i){throw t.version++,i}finally{Nt=r,an=n,B_(e),e.flags&=-3}}function Uh(e,t=!1){const{dep:r,prevSub:n,nextSub:i}=e;if(n&&(n.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=n,e.nextSub=void 0),r.subs===e&&(r.subs=n,!n&&r.computed)){r.computed.flags&=-5;for(let s=r.computed.deps;s;s=s.nextDep)Uh(s,!0)}!t&&!--r.sc&&r.map&&r.map.delete(r.key)}function c2(e){const{prevDep:t,nextDep:r}=e;t&&(t.nextDep=r,e.prevDep=void 0),r&&(r.prevDep=t,e.nextDep=void 0)}let an=!0;const I_=[];function $n(){I_.push(an),an=!1}function Wn(){const e=I_.pop();an=e===void 0?!0:e}function s0(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const r=Nt;Nt=void 0;try{t()}finally{Nt=r}}}let ua=0;class u2{constructor(t,r){this.sub=t,this.dep=r,this.version=r.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class qh{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!Nt||!an||Nt===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==Nt)r=this.activeLink=new u2(Nt,this),Nt.deps?(r.prevDep=Nt.depsTail,Nt.depsTail.nextDep=r,Nt.depsTail=r):Nt.deps=Nt.depsTail=r,F_(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const n=r.nextDep;n.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=n),r.prevDep=Nt.depsTail,r.nextDep=void 0,Nt.depsTail.nextDep=r,Nt.depsTail=r,Nt.deps===r&&(Nt.deps=n)}return r}trigger(t){this.version++,ua++,this.notify(t)}notify(t){jh();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()&&r.sub.dep.notify()}finally{Nh()}}}function F_(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)F_(n)}const r=e.dep.subs;r!==e&&(e.prevSub=r,r&&(r.nextSub=e)),e.dep.subs=e}}const ic=new WeakMap,ls=Symbol(""),Pf=Symbol(""),fa=Symbol("");function pr(e,t,r){if(an&&Nt){let n=ic.get(e);n||ic.set(e,n=new Map);let i=n.get(r);i||(n.set(r,i=new qh),i.map=n,i.key=r),i.track()}}function Un(e,t,r,n,i,s){const a=ic.get(e);if(!a){ua++;return}const o=l=>{l&&l.trigger()};if(jh(),t==="clear")a.forEach(o);else{const l=Qe(e),u=l&&Hh(r);if(l&&r==="length"){const f=Number(n);a.forEach((c,h)=>{(h==="length"||h===fa||!ln(h)&&h>=f)&&o(c)})}else switch((r!==void 0||a.has(void 0))&&o(a.get(r)),u&&o(a.get(fa)),t){case"add":l?u&&o(a.get("length")):(o(a.get(ls)),Gs(e)&&o(a.get(Pf)));break;case"delete":l||(o(a.get(ls)),Gs(e)&&o(a.get(Pf)));break;case"set":Gs(e)&&o(a.get(ls));break}}Nh()}function f2(e,t){const r=ic.get(e);return r&&r.get(t)}function _s(e){const t=bt(e);return t===e?t:(pr(t,"iterate",fa),Yr(e)?t:t.map(ar))}function Lc(e){return pr(e=bt(e),"iterate",fa),e}const h2={__proto__:null,[Symbol.iterator](){return Au(this,Symbol.iterator,ar)},concat(...e){return _s(this).concat(...e.map(t=>Qe(t)?_s(t):t))},entries(){return Au(this,"entries",e=>(e[1]=ar(e[1]),e))},every(e,t){return Dn(this,"every",e,t,void 0,arguments)},filter(e,t){return Dn(this,"filter",e,t,r=>r.map(ar),arguments)},find(e,t){return Dn(this,"find",e,t,ar,arguments)},findIndex(e,t){return Dn(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Dn(this,"findLast",e,t,ar,arguments)},findLastIndex(e,t){return Dn(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Dn(this,"forEach",e,t,void 0,arguments)},includes(...e){return Ru(this,"includes",e)},indexOf(...e){return Ru(this,"indexOf",e)},join(e){return _s(this).join(e)},lastIndexOf(...e){return Ru(this,"lastIndexOf",e)},map(e,t){return Dn(this,"map",e,t,void 0,arguments)},pop(){return Co(this,"pop")},push(...e){return Co(this,"push",e)},reduce(e,...t){return o0(this,"reduce",e,t)},reduceRight(e,...t){return o0(this,"reduceRight",e,t)},shift(){return Co(this,"shift")},some(e,t){return Dn(this,"some",e,t,void 0,arguments)},splice(...e){return Co(this,"splice",e)},toReversed(){return _s(this).toReversed()},toSorted(e){return _s(this).toSorted(e)},toSpliced(...e){return _s(this).toSpliced(...e)},unshift(...e){return Co(this,"unshift",e)},values(){return Au(this,"values",ar)}};function Au(e,t,r){const n=Lc(e),i=n[t]();return n!==e&&!Yr(e)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.value&&(s.value=r(s.value)),s}),i}const d2=Array.prototype;function Dn(e,t,r,n,i,s){const a=Lc(e),o=a!==e&&!Yr(e),l=a[t];if(l!==d2[t]){const c=l.apply(e,s);return o?ar(c):c}let u=r;a!==e&&(o?u=function(c,h){return r.call(this,ar(c),h,e)}:r.length>2&&(u=function(c,h){return r.call(this,c,h,e)}));const f=l.call(a,u,n);return o&&i?i(f):f}function o0(e,t,r,n){const i=Lc(e);let s=r;return i!==e&&(Yr(e)?r.length>3&&(s=function(a,o,l){return r.call(this,a,o,l,e)}):s=function(a,o,l){return r.call(this,a,ar(o),l,e)}),i[t](s,...n)}function Ru(e,t,r){const n=bt(e);pr(n,"iterate",fa);const i=n[t](...r);return(i===-1||i===!1)&&$h(r[0])?(r[0]=bt(r[0]),n[t](...r)):i}function Co(e,t,r=[]){$n(),jh();const n=bt(e)[t].apply(e,r);return Nh(),Wn(),n}const p2=Ih("__proto__,__v_isRef,__isVue"),D_=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(ln));function m2(e){ln(e)||(e=String(e));const t=bt(this);return pr(t,"has",e),t.hasOwnProperty(e)}class H_{constructor(t=!1,r=!1){this._isReadonly=t,this._isShallow=r}get(t,r,n){if(r==="__v_skip")return t.__v_skip;const i=this._isReadonly,s=this._isShallow;if(r==="__v_isReactive")return!i;if(r==="__v_isReadonly")return i;if(r==="__v_isShallow")return s;if(r==="__v_raw")return n===(i?s?E2:U_:s?N_:j_).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const a=Qe(t);if(!i){let l;if(a&&(l=h2[r]))return l;if(r==="hasOwnProperty")return m2}const o=Reflect.get(t,r,Xt(t)?t:n);return(ln(r)?D_.has(r):p2(r))||(i||pr(t,"get",r),s)?o:Xt(o)?a&&Hh(r)?o:o.value:qt(o)?i?z_(o):Ma(o):o}}class P_ extends H_{constructor(t=!1){super(!1,t)}set(t,r,n,i){let s=t[r];if(!this._isShallow){const l=Ri(s);if(!Yr(n)&&!Ri(n)&&(s=bt(s),n=bt(n)),!Qe(t)&&Xt(s)&&!Xt(n))return l?!1:(s.value=n,!0)}const a=Qe(t)&&Hh(r)?Number(r)<t.length:xt(t,r),o=Reflect.set(t,r,n,Xt(t)?t:i);return t===bt(i)&&(a?bi(n,s)&&Un(t,"set",r,n):Un(t,"add",r,n)),o}deleteProperty(t,r){const n=xt(t,r);t[r];const i=Reflect.deleteProperty(t,r);return i&&n&&Un(t,"delete",r,void 0),i}has(t,r){const n=Reflect.has(t,r);return(!ln(r)||!D_.has(r))&&pr(t,"has",r),n}ownKeys(t){return pr(t,"iterate",Qe(t)?"length":ls),Reflect.ownKeys(t)}}class _2 extends H_{constructor(t=!1){super(!0,t)}set(t,r){return!0}deleteProperty(t,r){return!0}}const g2=new P_,v2=new _2,y2=new P_(!0);const jf=e=>e,$a=e=>Reflect.getPrototypeOf(e);function b2(e,t,r){return function(...n){const i=this.__v_raw,s=bt(i),a=Gs(s),o=e==="entries"||e===Symbol.iterator&&a,l=e==="keys"&&a,u=i[e](...n),f=r?jf:t?sc:ar;return!t&&pr(s,"iterate",l?Pf:ls),{next(){const{value:c,done:h}=u.next();return h?{value:c,done:h}:{value:o?[f(c[0]),f(c[1])]:f(c),done:h}},[Symbol.iterator](){return this}}}}function Wa(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function w2(e,t){const r={get(i){const s=this.__v_raw,a=bt(s),o=bt(i);e||(bi(i,o)&&pr(a,"get",i),pr(a,"get",o));const{has:l}=$a(a),u=t?jf:e?sc:ar;if(l.call(a,i))return u(s.get(i));if(l.call(a,o))return u(s.get(o));s!==a&&s.get(i)},get size(){const i=this.__v_raw;return!e&&pr(bt(i),"iterate",ls),Reflect.get(i,"size",i)},has(i){const s=this.__v_raw,a=bt(s),o=bt(i);return e||(bi(i,o)&&pr(a,"has",i),pr(a,"has",o)),i===o?s.has(i):s.has(i)||s.has(o)},forEach(i,s){const a=this,o=a.__v_raw,l=bt(o),u=t?jf:e?sc:ar;return!e&&pr(l,"iterate",ls),o.forEach((f,c)=>i.call(s,u(f),u(c),a))}};return vr(r,e?{add:Wa("add"),set:Wa("set"),delete:Wa("delete"),clear:Wa("clear")}:{add(i){!t&&!Yr(i)&&!Ri(i)&&(i=bt(i));const s=bt(this);return $a(s).has.call(s,i)||(s.add(i),Un(s,"add",i,i)),this},set(i,s){!t&&!Yr(s)&&!Ri(s)&&(s=bt(s));const a=bt(this),{has:o,get:l}=$a(a);let u=o.call(a,i);u||(i=bt(i),u=o.call(a,i));const f=l.call(a,i);return a.set(i,s),u?bi(s,f)&&Un(a,"set",i,s):Un(a,"add",i,s),this},delete(i){const s=bt(this),{has:a,get:o}=$a(s);let l=a.call(s,i);l||(i=bt(i),l=a.call(s,i)),o&&o.call(s,i);const u=s.delete(i);return l&&Un(s,"delete",i,void 0),u},clear(){const i=bt(this),s=i.size!==0,a=i.clear();return s&&Un(i,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(i=>{r[i]=b2(i,e,t)}),r}function zh(e,t){const r=w2(e,t);return(n,i,s)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?n:Reflect.get(xt(r,i)&&i in n?r:n,i,s)}const S2={get:zh(!1,!1)},C2={get:zh(!1,!0)},x2={get:zh(!0,!1)};const j_=new WeakMap,N_=new WeakMap,U_=new WeakMap,E2=new WeakMap;function A2(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function R2(e){return e.__v_skip||!Object.isExtensible(e)?0:A2(Qb(e))}function Ma(e){return Ri(e)?e:Vh(e,!1,g2,S2,j_)}function q_(e){return Vh(e,!1,y2,C2,N_)}function z_(e){return Vh(e,!0,v2,x2,U_)}function Vh(e,t,r,n,i){if(!qt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=R2(e);if(s===0)return e;const a=i.get(e);if(a)return a;const o=new Proxy(e,s===2?n:r);return i.set(e,o),o}function wi(e){return Ri(e)?wi(e.__v_raw):!!(e&&e.__v_isReactive)}function Ri(e){return!!(e&&e.__v_isReadonly)}function Yr(e){return!!(e&&e.__v_isShallow)}function $h(e){return e?!!e.__v_raw:!1}function bt(e){const t=e&&e.__v_raw;return t?bt(t):e}function Wh(e){return!xt(e,"__v_skip")&&Object.isExtensible(e)&&b_(e,"__v_skip",!0),e}const ar=e=>qt(e)?Ma(e):e,sc=e=>qt(e)?z_(e):e;function Xt(e){return e?e.__v_isRef===!0:!1}function lt(e){return V_(e,!1)}function k2(e){return V_(e,!0)}function V_(e,t){return Xt(e)?e:new T2(e,t)}class T2{constructor(t,r){this.dep=new qh,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=r?t:bt(t),this._value=r?t:ar(t),this.__v_isShallow=r}get value(){return this.dep.track(),this._value}set value(t){const r=this._rawValue,n=this.__v_isShallow||Yr(t)||Ri(t);t=n?t:bt(t),bi(t,r)&&(this._rawValue=t,this._value=n?t:ar(t),this.dep.trigger())}}function ht(e){return Xt(e)?e.value:e}const M2={get:(e,t,r)=>t==="__v_raw"?e:ht(Reflect.get(e,t,r)),set:(e,t,r,n)=>{const i=e[t];return Xt(i)&&!Xt(r)?(i.value=r,!0):Reflect.set(e,t,r,n)}};function $_(e){return wi(e)?e:new Proxy(e,M2)}function L2(e){const t=Qe(e)?new Array(e.length):{};for(const r in e)t[r]=O2(e,r);return t}class B2{constructor(t,r,n){this._object=t,this._key=r,this._defaultValue=n,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return f2(bt(this._object),this._key)}}function O2(e,t,r){const n=e[t];return Xt(n)?n:new B2(e,t,r)}let I2=class{constructor(t,r,n){this.fn=t,this.setter=r,this._value=void 0,this.dep=new qh(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ua-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!r,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&Nt!==this)return M_(this,!0),!0}get value(){const t=this.dep.track();return O_(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}};function F2(e,t,r=!1){let n,i;return nt(e)?n=e:(n=e.get,i=e.set),new I2(n,i,r)}const Ka={},oc=new WeakMap;let Qi;function D2(e,t=!1,r=Qi){if(r){let n=oc.get(r);n||oc.set(r,n=[]),n.push(e)}}function H2(e,t,r=Ft){const{immediate:n,deep:i,once:s,scheduler:a,augmentJob:o,call:l}=r,u=L=>i?L:Yr(L)||i===!1||i===0?qn(L,1):qn(L);let f,c,h,d,p=!1,v=!1;if(Xt(e)?(c=()=>e.value,p=Yr(e)):wi(e)?(c=()=>u(e),p=!0):Qe(e)?(v=!0,p=e.some(L=>wi(L)||Yr(L)),c=()=>e.map(L=>{if(Xt(L))return L.value;if(wi(L))return u(L);if(nt(L))return l?l(L,2):L()})):nt(e)?t?c=l?()=>l(e,2):e:c=()=>{if(h){$n();try{h()}finally{Wn()}}const L=Qi;Qi=f;try{return l?l(e,3,[d]):e(d)}finally{Qi=L}}:c=Rn,t&&i){const L=c,y=i===!0?1/0:i;c=()=>qn(L(),y)}const _=R_(),m=()=>{f.stop(),_&&_.active&&Dh(_.effects,f)};if(s&&t){const L=t;t=(...y)=>{L(...y),m()}}let g=v?new Array(e.length).fill(Ka):Ka;const x=L=>{if(!(!(f.flags&1)||!f.dirty&&!L))if(t){const y=f.run();if(i||p||(v?y.some((M,F)=>bi(M,g[F])):bi(y,g))){h&&h();const M=Qi;Qi=f;try{const F=[y,g===Ka?void 0:v&&g[0]===Ka?[]:g,d];g=y,l?l(t,3,F):t(...F)}finally{Qi=M}}}else f.run()};return o&&o(x),f=new k_(c),f.scheduler=a?()=>a(x,!1):x,d=L=>D2(L,!1,f),h=f.onStop=()=>{const L=oc.get(f);if(L){if(l)l(L,4);else for(const y of L)y();oc.delete(f)}},t?n?x(!0):g=f.run():a?a(x.bind(null,!0),!0):f.run(),m.pause=f.pause.bind(f),m.resume=f.resume.bind(f),m.stop=m,m}function qn(e,t=1/0,r){if(t<=0||!qt(e)||e.__v_skip||(r=r||new Set,r.has(e)))return e;if(r.add(e),t--,Xt(e))qn(e.value,t,r);else if(Qe(e))for(let n=0;n<e.length;n++)qn(e[n],t,r);else if(Ac(e)||Gs(e))e.forEach(n=>{qn(n,t,r)});else if(y_(e)){for(const n in e)qn(e[n],t,r);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&qn(e[n],t,r)}return e}/**
* @vue/runtime-core v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function La(e,t,r,n){try{return n?e(...n):e()}catch(i){Bc(i,t,r)}}function Mn(e,t,r,n){if(nt(e)){const i=La(e,t,r,n);return i&&g_(i)&&i.catch(s=>{Bc(s,t,r)}),i}if(Qe(e)){const i=[];for(let s=0;s<e.length;s++)i.push(Mn(e[s],t,r,n));return i}}function Bc(e,t,r,n=!0){const i=t?t.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:a}=t&&t.appContext.config||Ft;if(t){let o=t.parent;const l=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${r}`;for(;o;){const f=o.ec;if(f){for(let c=0;c<f.length;c++)if(f[c](e,l,u)===!1)return}o=o.parent}if(s){$n(),La(s,null,10,[e,l,u]),Wn();return}}P2(e,r,i,n,a)}function P2(e,t,r,n=!0,i=!1){if(i)throw e;console.error(e)}const wr=[];let wn=-1;const Xs=[];let _i=null,qs=0;const W_=Promise.resolve();let ac=null;function Oc(e){const t=ac||W_;return e?t.then(this?e.bind(this):e):t}function j2(e){let t=wn+1,r=wr.length;for(;t<r;){const n=t+r>>>1,i=wr[n],s=ha(i);s<e||s===e&&i.flags&2?t=n+1:r=n}return t}function Kh(e){if(!(e.flags&1)){const t=ha(e),r=wr[wr.length-1];!r||!(e.flags&2)&&t>=ha(r)?wr.push(e):wr.splice(j2(t),0,e),e.flags|=1,K_()}}function K_(){ac||(ac=W_.then(G_))}function N2(e){Qe(e)?Xs.push(...e):_i&&e.id===-1?_i.splice(qs+1,0,e):e.flags&1||(Xs.push(e),e.flags|=1),K_()}function a0(e,t,r=wn+1){for(;r<wr.length;r++){const n=wr[r];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;wr.splice(r,1),r--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function Y_(e){if(Xs.length){const t=[...new Set(Xs)].sort((r,n)=>ha(r)-ha(n));if(Xs.length=0,_i){_i.push(...t);return}for(_i=t,qs=0;qs<_i.length;qs++){const r=_i[qs];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}_i=null,qs=0}}const ha=e=>e.id==null?e.flags&2?-1:1/0:e.id;function G_(e){try{for(wn=0;wn<wr.length;wn++){const t=wr[wn];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),La(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;wn<wr.length;wn++){const t=wr[wn];t&&(t.flags&=-2)}wn=-1,wr.length=0,Y_(),ac=null,(wr.length||Xs.length)&&G_()}}let or=null,X_=null;function lc(e){const t=or;return or=e,X_=e&&e.type.__scopeId||null,t}function fr(e,t=or,r){if(!t||e._n)return e;const n=(...i)=>{n._d&&g0(-1);const s=lc(t);let a;try{a=e(...i)}finally{lc(s),n._d&&g0(1)}return a};return n._n=!0,n._c=!0,n._d=!0,n}function ql(e,t){if(or===null)return e;const r=Hc(or),n=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[s,a,o,l=Ft]=t[i];s&&(nt(s)&&(s={mounted:s,updated:s}),s.deep&&qn(a),n.push({dir:s,instance:r,value:a,oldValue:void 0,arg:o,modifiers:l}))}return e}function Fi(e,t,r,n){const i=e.dirs,s=t&&t.dirs;for(let a=0;a<i.length;a++){const o=i[a];s&&(o.oldValue=s[a].value);let l=o.dir[n];l&&($n(),Mn(l,r,8,[e.el,o,e,t]),Wn())}}const U2=Symbol("_vte"),q2=e=>e.__isTeleport;function Yh(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Yh(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}/*! #__NO_SIDE_EFFECTS__ */function Li(e,t){return nt(e)?vr({name:e.name},t,{setup:e}):e}function Z_(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function cc(e,t,r,n,i=!1){if(Qe(e)){e.forEach((p,v)=>cc(p,t&&(Qe(t)?t[v]:t),r,n,i));return}if(Zs(n)&&!i){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&cc(e,t,r,n.component.subTree);return}const s=n.shapeFlag&4?Hc(n.component):n.el,a=i?null:s,{i:o,r:l}=e,u=t&&t.r,f=o.refs===Ft?o.refs={}:o.refs,c=o.setupState,h=bt(c),d=c===Ft?()=>!1:p=>xt(h,p);if(u!=null&&u!==l&&(tr(u)?(f[u]=null,d(u)&&(c[u]=null)):Xt(u)&&(u.value=null)),nt(l))La(l,o,12,[a,f]);else{const p=tr(l),v=Xt(l);if(p||v){const _=()=>{if(e.f){const m=p?d(l)?c[l]:f[l]:l.value;i?Qe(m)&&Dh(m,s):Qe(m)?m.includes(s)||m.push(s):p?(f[l]=[s],d(l)&&(c[l]=f[l])):(l.value=[s],e.k&&(f[e.k]=l.value))}else p?(f[l]=a,d(l)&&(c[l]=a)):v&&(l.value=a,e.k&&(f[e.k]=a))};a?(_.id=-1,Dr(_,r)):_()}}}Tc().requestIdleCallback;Tc().cancelIdleCallback;const Zs=e=>!!e.type.__asyncLoader,Q_=e=>e.type.__isKeepAlive;function z2(e,t){J_(e,"a",t)}function V2(e,t){J_(e,"da",t)}function J_(e,t,r=lr){const n=e.__wdc||(e.__wdc=()=>{let i=r;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(Ic(t,n,r),r){let i=r.parent;for(;i&&i.parent;)Q_(i.parent.vnode)&&$2(n,t,r,i),i=i.parent}}function $2(e,t,r,n){const i=Ic(t,e,n,!0);Ba(()=>{Dh(n[t],i)},r)}function Ic(e,t,r=lr,n=!1){if(r){const i=r[e]||(r[e]=[]),s=t.__weh||(t.__weh=(...a)=>{$n();const o=Oa(r),l=Mn(t,r,e,a);return o(),Wn(),l});return n?i.unshift(s):i.push(s),s}}const Qn=e=>(t,r=lr)=>{(!ma||e==="sp")&&Ic(e,(...n)=>t(...n),r)},W2=Qn("bm"),Gh=Qn("m"),K2=Qn("bu"),Y2=Qn("u"),G2=Qn("bum"),Ba=Qn("um"),X2=Qn("sp"),Z2=Qn("rtg"),Q2=Qn("rtc");function J2(e,t=lr){Ic("ec",e,t)}const e3="components";function eg(e,t){return r3(e3,e,!0,t)||e}const t3=Symbol.for("v-ndc");function r3(e,t,r=!0,n=!1){const i=or||lr;if(i){const s=i.type;{const o=z3(s,!1);if(o&&(o===t||o===Zr(t)||o===kc(Zr(t))))return s}const a=l0(i[e]||s[e],t)||l0(i.appContext[e],t);return!a&&n?s:a}}function l0(e,t){return e&&(e[t]||e[Zr(t)]||e[kc(Zr(t))])}function Qo(e,t,r,n){let i;const s=r,a=Qe(e);if(a||tr(e)){const o=a&&wi(e);let l=!1,u=!1;o&&(l=!Yr(e),u=Ri(e),e=Lc(e)),i=new Array(e.length);for(let f=0,c=e.length;f<c;f++)i[f]=t(l?u?sc(ar(e[f])):ar(e[f]):e[f],f,void 0,s)}else if(typeof e=="number"){i=new Array(e);for(let o=0;o<e;o++)i[o]=t(o+1,o,void 0,s)}else if(qt(e))if(e[Symbol.iterator])i=Array.from(e,(o,l)=>t(o,l,void 0,s));else{const o=Object.keys(e);i=new Array(o.length);for(let l=0,u=o.length;l<u;l++){const f=o[l];i[l]=t(e[f],f,l,s)}}else i=[];return i}function ku(e,t,r={},n,i){if(or.ce||or.parent&&Zs(or.parent)&&or.parent.ce)return t!=="default"&&(r.name=t),ot(),Vf(ir,null,[Et("slot",r,n)],64);let s=e[t];s&&s._c&&(s._d=!1),ot();const a=s&&tg(s(r)),o=r.key||a&&a.key,l=Vf(ir,{key:(o&&!ln(o)?o:`_${t}`)+""},a||[],a&&e._===1?64:-2);return s&&s._c&&(s._d=!0),l}function tg(e){return e.some(t=>pa(t)?!(t.type===Kn||t.type===ir&&!tg(t.children)):!0)?e:null}const Nf=e=>e?wg(e)?Hc(e):Nf(e.parent):null,Jo=vr(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Nf(e.parent),$root:e=>Nf(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>ng(e),$forceUpdate:e=>e.f||(e.f=()=>{Kh(e.update)}),$nextTick:e=>e.n||(e.n=Oc.bind(e.proxy)),$watch:e=>x3.bind(e)}),Tu=(e,t)=>e!==Ft&&!e.__isScriptSetup&&xt(e,t),n3={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:r,setupState:n,data:i,props:s,accessCache:a,type:o,appContext:l}=e;let u;if(t[0]!=="$"){const d=a[t];if(d!==void 0)switch(d){case 1:return n[t];case 2:return i[t];case 4:return r[t];case 3:return s[t]}else{if(Tu(n,t))return a[t]=1,n[t];if(i!==Ft&&xt(i,t))return a[t]=2,i[t];if((u=e.propsOptions[0])&&xt(u,t))return a[t]=3,s[t];if(r!==Ft&&xt(r,t))return a[t]=4,r[t];Uf&&(a[t]=0)}}const f=Jo[t];let c,h;if(f)return t==="$attrs"&&pr(e.attrs,"get",""),f(e);if((c=o.__cssModules)&&(c=c[t]))return c;if(r!==Ft&&xt(r,t))return a[t]=4,r[t];if(h=l.config.globalProperties,xt(h,t))return h[t]},set({_:e},t,r){const{data:n,setupState:i,ctx:s}=e;return Tu(i,t)?(i[t]=r,!0):n!==Ft&&xt(n,t)?(n[t]=r,!0):xt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:n,appContext:i,propsOptions:s}},a){let o;return!!r[a]||e!==Ft&&xt(e,a)||Tu(t,a)||(o=s[0])&&xt(o,a)||xt(n,a)||xt(Jo,a)||xt(i.config.globalProperties,a)},defineProperty(e,t,r){return r.get!=null?e._.accessCache[t]=0:xt(r,"value")&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}};function c0(e){return Qe(e)?e.reduce((t,r)=>(t[r]=null,t),{}):e}let Uf=!0;function i3(e){const t=ng(e),r=e.proxy,n=e.ctx;Uf=!1,t.beforeCreate&&u0(t.beforeCreate,e,"bc");const{data:i,computed:s,methods:a,watch:o,provide:l,inject:u,created:f,beforeMount:c,mounted:h,beforeUpdate:d,updated:p,activated:v,deactivated:_,beforeDestroy:m,beforeUnmount:g,destroyed:x,unmounted:L,render:y,renderTracked:M,renderTriggered:F,errorCaptured:D,serverPrefetch:H,expose:b,inheritAttrs:R,components:A,directives:k,filters:O}=t;if(u&&s3(u,n,null),a)for(const Q in a){const X=a[Q];nt(X)&&(n[Q]=X.bind(r))}if(i){const Q=i.call(r,r);qt(Q)&&(e.data=Ma(Q))}if(Uf=!0,s)for(const Q in s){const X=s[Q],oe=nt(X)?X.bind(r,r):nt(X.get)?X.get.bind(r,r):Rn,w=!nt(X)&&nt(X.set)?X.set.bind(r):Rn,P=zt({get:oe,set:w});Object.defineProperty(n,Q,{enumerable:!0,configurable:!0,get:()=>P.value,set:ce=>P.value=ce})}if(o)for(const Q in o)rg(o[Q],n,r,Q);if(l){const Q=nt(l)?l.call(r):l;Reflect.ownKeys(Q).forEach(X=>{zl(X,Q[X])})}f&&u0(f,e,"c");function $(Q,X){Qe(X)?X.forEach(oe=>Q(oe.bind(r))):X&&Q(X.bind(r))}if($(W2,c),$(Gh,h),$(K2,d),$(Y2,p),$(z2,v),$(V2,_),$(J2,D),$(Q2,M),$(Z2,F),$(G2,g),$(Ba,L),$(X2,H),Qe(b))if(b.length){const Q=e.exposed||(e.exposed={});b.forEach(X=>{Object.defineProperty(Q,X,{get:()=>r[X],set:oe=>r[X]=oe})})}else e.exposed||(e.exposed={});y&&e.render===Rn&&(e.render=y),R!=null&&(e.inheritAttrs=R),A&&(e.components=A),k&&(e.directives=k),H&&Z_(e)}function s3(e,t,r=Rn){Qe(e)&&(e=qf(e));for(const n in e){const i=e[n];let s;qt(i)?"default"in i?s=kn(i.from||n,i.default,!0):s=kn(i.from||n):s=kn(i),Xt(s)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>s.value,set:a=>s.value=a}):t[n]=s}}function u0(e,t,r){Mn(Qe(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,r)}function rg(e,t,r,n){let i=n.includes(".")?_g(r,n):()=>r[n];if(tr(e)){const s=t[e];nt(s)&&Qs(i,s)}else if(nt(e))Qs(i,e.bind(r));else if(qt(e))if(Qe(e))e.forEach(s=>rg(s,t,r,n));else{const s=nt(e.handler)?e.handler.bind(r):t[e.handler];nt(s)&&Qs(i,s,e)}}function ng(e){const t=e.type,{mixins:r,extends:n}=t,{mixins:i,optionsCache:s,config:{optionMergeStrategies:a}}=e.appContext,o=s.get(t);let l;return o?l=o:!i.length&&!r&&!n?l=t:(l={},i.length&&i.forEach(u=>uc(l,u,a,!0)),uc(l,t,a)),qt(t)&&s.set(t,l),l}function uc(e,t,r,n=!1){const{mixins:i,extends:s}=t;s&&uc(e,s,r,!0),i&&i.forEach(a=>uc(e,a,r,!0));for(const a in t)if(!(n&&a==="expose")){const o=o3[a]||r&&r[a];e[a]=o?o(e[a],t[a]):t[a]}return e}const o3={data:f0,props:h0,emits:h0,methods:Uo,computed:Uo,beforeCreate:yr,created:yr,beforeMount:yr,mounted:yr,beforeUpdate:yr,updated:yr,beforeDestroy:yr,beforeUnmount:yr,destroyed:yr,unmounted:yr,activated:yr,deactivated:yr,errorCaptured:yr,serverPrefetch:yr,components:Uo,directives:Uo,watch:l3,provide:f0,inject:a3};function f0(e,t){return t?e?function(){return vr(nt(e)?e.call(this,this):e,nt(t)?t.call(this,this):t)}:t:e}function a3(e,t){return Uo(qf(e),qf(t))}function qf(e){if(Qe(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function yr(e,t){return e?[...new Set([].concat(e,t))]:t}function Uo(e,t){return e?vr(Object.create(null),e,t):t}function h0(e,t){return e?Qe(e)&&Qe(t)?[...new Set([...e,...t])]:vr(Object.create(null),c0(e),c0(t??{})):t}function l3(e,t){if(!e)return t;if(!t)return e;const r=vr(Object.create(null),e);for(const n in t)r[n]=yr(e[n],t[n]);return r}function ig(){return{app:null,config:{isNativeTag:Xb,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let c3=0;function u3(e,t){return function(n,i=null){nt(n)||(n=vr({},n)),i!=null&&!qt(i)&&(i=null);const s=ig(),a=new WeakSet,o=[];let l=!1;const u=s.app={_uid:c3++,_component:n,_props:i,_container:null,_context:s,_instance:null,version:$3,get config(){return s.config},set config(f){},use(f,...c){return a.has(f)||(f&&nt(f.install)?(a.add(f),f.install(u,...c)):nt(f)&&(a.add(f),f(u,...c))),u},mixin(f){return s.mixins.includes(f)||s.mixins.push(f),u},component(f,c){return c?(s.components[f]=c,u):s.components[f]},directive(f,c){return c?(s.directives[f]=c,u):s.directives[f]},mount(f,c,h){if(!l){const d=u._ceVNode||Et(n,i);return d.appContext=s,h===!0?h="svg":h===!1&&(h=void 0),e(d,f,h),l=!0,u._container=f,f.__vue_app__=u,Hc(d.component)}},onUnmount(f){o.push(f)},unmount(){l&&(Mn(o,u._instance,16),e(null,u._container),delete u._container.__vue_app__)},provide(f,c){return s.provides[f]=c,u},runWithContext(f){const c=cs;cs=u;try{return f()}finally{cs=c}}};return u}}let cs=null;function zl(e,t){if(lr){let r=lr.provides;const n=lr.parent&&lr.parent.provides;n===r&&(r=lr.provides=Object.create(n)),r[e]=t}}function kn(e,t,r=!1){const n=lr||or;if(n||cs){let i=cs?cs._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return r&&nt(t)?t.call(n&&n.proxy):t}}function f3(){return!!(lr||or||cs)}const sg={},og=()=>Object.create(sg),ag=e=>Object.getPrototypeOf(e)===sg;function h3(e,t,r,n=!1){const i={},s=og();e.propsDefaults=Object.create(null),lg(e,t,i,s);for(const a in e.propsOptions[0])a in i||(i[a]=void 0);r?e.props=n?i:q_(i):e.type.props?e.props=i:e.props=s,e.attrs=s}function d3(e,t,r,n){const{props:i,attrs:s,vnode:{patchFlag:a}}=e,o=bt(i),[l]=e.propsOptions;let u=!1;if((n||a>0)&&!(a&16)){if(a&8){const f=e.vnode.dynamicProps;for(let c=0;c<f.length;c++){let h=f[c];if(Fc(e.emitsOptions,h))continue;const d=t[h];if(l)if(xt(s,h))d!==s[h]&&(s[h]=d,u=!0);else{const p=Zr(h);i[p]=zf(l,o,p,d,e,!1)}else d!==s[h]&&(s[h]=d,u=!0)}}}else{lg(e,t,i,s)&&(u=!0);let f;for(const c in o)(!t||!xt(t,c)&&((f=Mi(c))===c||!xt(t,f)))&&(l?r&&(r[c]!==void 0||r[f]!==void 0)&&(i[c]=zf(l,o,c,void 0,e,!0)):delete i[c]);if(s!==o)for(const c in s)(!t||!xt(t,c))&&(delete s[c],u=!0)}u&&Un(e.attrs,"set","")}function lg(e,t,r,n){const[i,s]=e.propsOptions;let a=!1,o;if(t)for(let l in t){if(Go(l))continue;const u=t[l];let f;i&&xt(i,f=Zr(l))?!s||!s.includes(f)?r[f]=u:(o||(o={}))[f]=u:Fc(e.emitsOptions,l)||(!(l in n)||u!==n[l])&&(n[l]=u,a=!0)}if(s){const l=bt(r),u=o||Ft;for(let f=0;f<s.length;f++){const c=s[f];r[c]=zf(i,l,c,u[c],e,!xt(u,c))}}return a}function zf(e,t,r,n,i,s){const a=e[r];if(a!=null){const o=xt(a,"default");if(o&&n===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&nt(l)){const{propsDefaults:u}=i;if(r in u)n=u[r];else{const f=Oa(i);n=u[r]=l.call(null,t),f()}}else n=l;i.ce&&i.ce._setProp(r,n)}a[0]&&(s&&!o?n=!1:a[1]&&(n===""||n===Mi(r))&&(n=!0))}return n}const p3=new WeakMap;function cg(e,t,r=!1){const n=r?p3:t.propsCache,i=n.get(e);if(i)return i;const s=e.props,a={},o=[];let l=!1;if(!nt(e)){const f=c=>{l=!0;const[h,d]=cg(c,t,!0);vr(a,h),d&&o.push(...d)};!r&&t.mixins.length&&t.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}if(!s&&!l)return qt(e)&&n.set(e,Ys),Ys;if(Qe(s))for(let f=0;f<s.length;f++){const c=Zr(s[f]);d0(c)&&(a[c]=Ft)}else if(s)for(const f in s){const c=Zr(f);if(d0(c)){const h=s[f],d=a[c]=Qe(h)||nt(h)?{type:h}:vr({},h),p=d.type;let v=!1,_=!0;if(Qe(p))for(let m=0;m<p.length;++m){const g=p[m],x=nt(g)&&g.name;if(x==="Boolean"){v=!0;break}else x==="String"&&(_=!1)}else v=nt(p)&&p.name==="Boolean";d[0]=v,d[1]=_,(v||xt(d,"default"))&&o.push(c)}}const u=[a,o];return qt(e)&&n.set(e,u),u}function d0(e){return e[0]!=="$"&&!Go(e)}const Xh=e=>e[0]==="_"||e==="$stable",Zh=e=>Qe(e)?e.map(Sn):[Sn(e)],m3=(e,t,r)=>{if(t._n)return t;const n=fr((...i)=>Zh(t(...i)),r);return n._c=!1,n},ug=(e,t,r)=>{const n=e._ctx;for(const i in e){if(Xh(i))continue;const s=e[i];if(nt(s))t[i]=m3(i,s,n);else if(s!=null){const a=Zh(s);t[i]=()=>a}}},fg=(e,t)=>{const r=Zh(t);e.slots.default=()=>r},hg=(e,t,r)=>{for(const n in t)(r||!Xh(n))&&(e[n]=t[n])},_3=(e,t,r)=>{const n=e.slots=og();if(e.vnode.shapeFlag&32){const i=t._;i?(hg(n,t,r),r&&b_(n,"_",i,!0)):ug(t,n)}else t&&fg(e,t)},g3=(e,t,r)=>{const{vnode:n,slots:i}=e;let s=!0,a=Ft;if(n.shapeFlag&32){const o=t._;o?r&&o===1?s=!1:hg(i,t,r):(s=!t.$stable,ug(t,i)),a=t}else t&&(fg(e,t),a={default:1});if(s)for(const o in i)!Xh(o)&&a[o]==null&&delete i[o]},Dr=L3;function v3(e){return y3(e)}function y3(e,t){const r=Tc();r.__VUE__=!0;const{insert:n,remove:i,patchProp:s,createElement:a,createText:o,createComment:l,setText:u,setElementText:f,parentNode:c,nextSibling:h,setScopeId:d=Rn,insertStaticContent:p}=e,v=(S,E,N,W=null,re=null,ne=null,de=void 0,pe=null,me=!!E.dynamicChildren)=>{if(S===E)return;S&&!xo(S,E)&&(W=I(S),ce(S,re,ne,!0),S=null),E.patchFlag===-2&&(me=!1,E.dynamicChildren=null);const{type:fe,ref:ke,shapeFlag:we}=E;switch(fe){case Dc:_(S,E,N,W);break;case Kn:m(S,E,N,W);break;case Lu:S==null&&g(E,N,W,de);break;case ir:A(S,E,N,W,re,ne,de,pe,me);break;default:we&1?y(S,E,N,W,re,ne,de,pe,me):we&6?k(S,E,N,W,re,ne,de,pe,me):(we&64||we&128)&&fe.process(S,E,N,W,re,ne,de,pe,me,ae)}ke!=null&&re&&cc(ke,S&&S.ref,ne,E||S,!E)},_=(S,E,N,W)=>{if(S==null)n(E.el=o(E.children),N,W);else{const re=E.el=S.el;E.children!==S.children&&u(re,E.children)}},m=(S,E,N,W)=>{S==null?n(E.el=l(E.children||""),N,W):E.el=S.el},g=(S,E,N,W)=>{[S.el,S.anchor]=p(S.children,E,N,W,S.el,S.anchor)},x=({el:S,anchor:E},N,W)=>{let re;for(;S&&S!==E;)re=h(S),n(S,N,W),S=re;n(E,N,W)},L=({el:S,anchor:E})=>{let N;for(;S&&S!==E;)N=h(S),i(S),S=N;i(E)},y=(S,E,N,W,re,ne,de,pe,me)=>{E.type==="svg"?de="svg":E.type==="math"&&(de="mathml"),S==null?M(E,N,W,re,ne,de,pe,me):H(S,E,re,ne,de,pe,me)},M=(S,E,N,W,re,ne,de,pe)=>{let me,fe;const{props:ke,shapeFlag:we,transition:Re,dirs:Oe}=S;if(me=S.el=a(S.type,ne,ke&&ke.is,ke),we&8?f(me,S.children):we&16&&D(S.children,me,null,W,re,Mu(S,ne),de,pe),Oe&&Fi(S,null,W,"created"),F(me,S,S.scopeId,de,W),ke){for(const z in ke)z!=="value"&&!Go(z)&&s(me,z,null,ke[z],ne,W);"value"in ke&&s(me,"value",null,ke.value,ne),(fe=ke.onVnodeBeforeMount)&&mn(fe,W,S)}Oe&&Fi(S,null,W,"beforeMount");const Pe=b3(re,Re);Pe&&Re.beforeEnter(me),n(me,E,N),((fe=ke&&ke.onVnodeMounted)||Pe||Oe)&&Dr(()=>{fe&&mn(fe,W,S),Pe&&Re.enter(me),Oe&&Fi(S,null,W,"mounted")},re)},F=(S,E,N,W,re)=>{if(N&&d(S,N),W)for(let ne=0;ne<W.length;ne++)d(S,W[ne]);if(re){let ne=re.subTree;if(E===ne||vg(ne.type)&&(ne.ssContent===E||ne.ssFallback===E)){const de=re.vnode;F(S,de,de.scopeId,de.slotScopeIds,re.parent)}}},D=(S,E,N,W,re,ne,de,pe,me=0)=>{for(let fe=me;fe<S.length;fe++){const ke=S[fe]=pe?gi(S[fe]):Sn(S[fe]);v(null,ke,E,N,W,re,ne,de,pe)}},H=(S,E,N,W,re,ne,de)=>{const pe=E.el=S.el;let{patchFlag:me,dynamicChildren:fe,dirs:ke}=E;me|=S.patchFlag&16;const we=S.props||Ft,Re=E.props||Ft;let Oe;if(N&&Di(N,!1),(Oe=Re.onVnodeBeforeUpdate)&&mn(Oe,N,E,S),ke&&Fi(E,S,N,"beforeUpdate"),N&&Di(N,!0),(we.innerHTML&&Re.innerHTML==null||we.textContent&&Re.textContent==null)&&f(pe,""),fe?b(S.dynamicChildren,fe,pe,N,W,Mu(E,re),ne):de||X(S,E,pe,null,N,W,Mu(E,re),ne,!1),me>0){if(me&16)R(pe,we,Re,N,re);else if(me&2&&we.class!==Re.class&&s(pe,"class",null,Re.class,re),me&4&&s(pe,"style",we.style,Re.style,re),me&8){const Pe=E.dynamicProps;for(let z=0;z<Pe.length;z++){const C=Pe[z],T=we[C],q=Re[C];(q!==T||C==="value")&&s(pe,C,T,q,re,N)}}me&1&&S.children!==E.children&&f(pe,E.children)}else!de&&fe==null&&R(pe,we,Re,N,re);((Oe=Re.onVnodeUpdated)||ke)&&Dr(()=>{Oe&&mn(Oe,N,E,S),ke&&Fi(E,S,N,"updated")},W)},b=(S,E,N,W,re,ne,de)=>{for(let pe=0;pe<E.length;pe++){const me=S[pe],fe=E[pe],ke=me.el&&(me.type===ir||!xo(me,fe)||me.shapeFlag&198)?c(me.el):N;v(me,fe,ke,null,W,re,ne,de,!0)}},R=(S,E,N,W,re)=>{if(E!==N){if(E!==Ft)for(const ne in E)!Go(ne)&&!(ne in N)&&s(S,ne,E[ne],null,re,W);for(const ne in N){if(Go(ne))continue;const de=N[ne],pe=E[ne];de!==pe&&ne!=="value"&&s(S,ne,pe,de,re,W)}"value"in N&&s(S,"value",E.value,N.value,re)}},A=(S,E,N,W,re,ne,de,pe,me)=>{const fe=E.el=S?S.el:o(""),ke=E.anchor=S?S.anchor:o("");let{patchFlag:we,dynamicChildren:Re,slotScopeIds:Oe}=E;Oe&&(pe=pe?pe.concat(Oe):Oe),S==null?(n(fe,N,W),n(ke,N,W),D(E.children||[],N,ke,re,ne,de,pe,me)):we>0&&we&64&&Re&&S.dynamicChildren?(b(S.dynamicChildren,Re,N,re,ne,de,pe),(E.key!=null||re&&E===re.subTree)&&dg(S,E,!0)):X(S,E,N,ke,re,ne,de,pe,me)},k=(S,E,N,W,re,ne,de,pe,me)=>{E.slotScopeIds=pe,S==null?E.shapeFlag&512?re.ctx.activate(E,N,W,de,me):O(E,N,W,re,ne,de,me):B(S,E,me)},O=(S,E,N,W,re,ne,de)=>{const pe=S.component=P3(S,W,re);if(Q_(S)&&(pe.ctx.renderer=ae),j3(pe,!1,de),pe.asyncDep){if(re&&re.registerDep(pe,$,de),!S.el){const me=pe.subTree=Et(Kn);m(null,me,E,N)}}else $(pe,S,E,N,re,ne,de)},B=(S,E,N)=>{const W=E.component=S.component;if(T3(S,E,N))if(W.asyncDep&&!W.asyncResolved){Q(W,E,N);return}else W.next=E,W.update();else E.el=S.el,W.vnode=E},$=(S,E,N,W,re,ne,de)=>{const pe=()=>{if(S.isMounted){let{next:we,bu:Re,u:Oe,parent:Pe,vnode:z}=S;{const j=pg(S);if(j){we&&(we.el=z.el,Q(S,we,de)),j.asyncDep.then(()=>{S.isUnmounted||pe()});return}}let C=we,T;Di(S,!1),we?(we.el=z.el,Q(S,we,de)):we=z,Re&&Ul(Re),(T=we.props&&we.props.onVnodeBeforeUpdate)&&mn(T,Pe,we,z),Di(S,!0);const q=m0(S),ie=S.subTree;S.subTree=q,v(ie,q,c(ie.el),I(ie),S,re,ne),we.el=q.el,C===null&&M3(S,q.el),Oe&&Dr(Oe,re),(T=we.props&&we.props.onVnodeUpdated)&&Dr(()=>mn(T,Pe,we,z),re)}else{let we;const{el:Re,props:Oe}=E,{bm:Pe,m:z,parent:C,root:T,type:q}=S,ie=Zs(E);Di(S,!1),Pe&&Ul(Pe),!ie&&(we=Oe&&Oe.onVnodeBeforeMount)&&mn(we,C,E),Di(S,!0);{T.ce&&T.ce._injectChildStyle(q);const j=S.subTree=m0(S);v(null,j,N,W,S,re,ne),E.el=j.el}if(z&&Dr(z,re),!ie&&(we=Oe&&Oe.onVnodeMounted)){const j=E;Dr(()=>mn(we,C,j),re)}(E.shapeFlag&256||C&&Zs(C.vnode)&&C.vnode.shapeFlag&256)&&S.a&&Dr(S.a,re),S.isMounted=!0,E=N=W=null}};S.scope.on();const me=S.effect=new k_(pe);S.scope.off();const fe=S.update=me.run.bind(me),ke=S.job=me.runIfDirty.bind(me);ke.i=S,ke.id=S.uid,me.scheduler=()=>Kh(ke),Di(S,!0),fe()},Q=(S,E,N)=>{E.component=S;const W=S.vnode.props;S.vnode=E,S.next=null,d3(S,E.props,W,N),g3(S,E.children,N),$n(),a0(S),Wn()},X=(S,E,N,W,re,ne,de,pe,me=!1)=>{const fe=S&&S.children,ke=S?S.shapeFlag:0,we=E.children,{patchFlag:Re,shapeFlag:Oe}=E;if(Re>0){if(Re&128){w(fe,we,N,W,re,ne,de,pe,me);return}else if(Re&256){oe(fe,we,N,W,re,ne,de,pe,me);return}}Oe&8?(ke&16&&Z(fe,re,ne),we!==fe&&f(N,we)):ke&16?Oe&16?w(fe,we,N,W,re,ne,de,pe,me):Z(fe,re,ne,!0):(ke&8&&f(N,""),Oe&16&&D(we,N,W,re,ne,de,pe,me))},oe=(S,E,N,W,re,ne,de,pe,me)=>{S=S||Ys,E=E||Ys;const fe=S.length,ke=E.length,we=Math.min(fe,ke);let Re;for(Re=0;Re<we;Re++){const Oe=E[Re]=me?gi(E[Re]):Sn(E[Re]);v(S[Re],Oe,N,null,re,ne,de,pe,me)}fe>ke?Z(S,re,ne,!0,!1,we):D(E,N,W,re,ne,de,pe,me,we)},w=(S,E,N,W,re,ne,de,pe,me)=>{let fe=0;const ke=E.length;let we=S.length-1,Re=ke-1;for(;fe<=we&&fe<=Re;){const Oe=S[fe],Pe=E[fe]=me?gi(E[fe]):Sn(E[fe]);if(xo(Oe,Pe))v(Oe,Pe,N,null,re,ne,de,pe,me);else break;fe++}for(;fe<=we&&fe<=Re;){const Oe=S[we],Pe=E[Re]=me?gi(E[Re]):Sn(E[Re]);if(xo(Oe,Pe))v(Oe,Pe,N,null,re,ne,de,pe,me);else break;we--,Re--}if(fe>we){if(fe<=Re){const Oe=Re+1,Pe=Oe<ke?E[Oe].el:W;for(;fe<=Re;)v(null,E[fe]=me?gi(E[fe]):Sn(E[fe]),N,Pe,re,ne,de,pe,me),fe++}}else if(fe>Re)for(;fe<=we;)ce(S[fe],re,ne,!0),fe++;else{const Oe=fe,Pe=fe,z=new Map;for(fe=Pe;fe<=Re;fe++){const se=E[fe]=me?gi(E[fe]):Sn(E[fe]);se.key!=null&&z.set(se.key,fe)}let C,T=0;const q=Re-Pe+1;let ie=!1,j=0;const U=new Array(q);for(fe=0;fe<q;fe++)U[fe]=0;for(fe=Oe;fe<=we;fe++){const se=S[fe];if(T>=q){ce(se,re,ne,!0);continue}let ue;if(se.key!=null)ue=z.get(se.key);else for(C=Pe;C<=Re;C++)if(U[C-Pe]===0&&xo(se,E[C])){ue=C;break}ue===void 0?ce(se,re,ne,!0):(U[ue-Pe]=fe+1,ue>=j?j=ue:ie=!0,v(se,E[ue],N,null,re,ne,de,pe,me),T++)}const te=ie?w3(U):Ys;for(C=te.length-1,fe=q-1;fe>=0;fe--){const se=Pe+fe,ue=E[se],J=se+1<ke?E[se+1].el:W;U[fe]===0?v(null,ue,N,J,re,ne,de,pe,me):ie&&(C<0||fe!==te[C]?P(ue,N,J,2):C--)}}},P=(S,E,N,W,re=null)=>{const{el:ne,type:de,transition:pe,children:me,shapeFlag:fe}=S;if(fe&6){P(S.component.subTree,E,N,W);return}if(fe&128){S.suspense.move(E,N,W);return}if(fe&64){de.move(S,E,N,ae);return}if(de===ir){n(ne,E,N);for(let we=0;we<me.length;we++)P(me[we],E,N,W);n(S.anchor,E,N);return}if(de===Lu){x(S,E,N);return}if(W!==2&&fe&1&&pe)if(W===0)pe.beforeEnter(ne),n(ne,E,N),Dr(()=>pe.enter(ne),re);else{const{leave:we,delayLeave:Re,afterLeave:Oe}=pe,Pe=()=>{S.ctx.isUnmounted?i(ne):n(ne,E,N)},z=()=>{we(ne,()=>{Pe(),Oe&&Oe()})};Re?Re(ne,Pe,z):z()}else n(ne,E,N)},ce=(S,E,N,W=!1,re=!1)=>{const{type:ne,props:de,ref:pe,children:me,dynamicChildren:fe,shapeFlag:ke,patchFlag:we,dirs:Re,cacheIndex:Oe}=S;if(we===-2&&(re=!1),pe!=null&&($n(),cc(pe,null,N,S,!0),Wn()),Oe!=null&&(E.renderCache[Oe]=void 0),ke&256){E.ctx.deactivate(S);return}const Pe=ke&1&&Re,z=!Zs(S);let C;if(z&&(C=de&&de.onVnodeBeforeUnmount)&&mn(C,E,S),ke&6)Y(S.component,N,W);else{if(ke&128){S.suspense.unmount(N,W);return}Pe&&Fi(S,null,E,"beforeUnmount"),ke&64?S.type.remove(S,E,N,ae,W):fe&&!fe.hasOnce&&(ne!==ir||we>0&&we&64)?Z(fe,E,N,!1,!0):(ne===ir&&we&384||!re&&ke&16)&&Z(me,E,N),W&&V(S)}(z&&(C=de&&de.onVnodeUnmounted)||Pe)&&Dr(()=>{C&&mn(C,E,S),Pe&&Fi(S,null,E,"unmounted")},N)},V=S=>{const{type:E,el:N,anchor:W,transition:re}=S;if(E===ir){le(N,W);return}if(E===Lu){L(S);return}const ne=()=>{i(N),re&&!re.persisted&&re.afterLeave&&re.afterLeave()};if(S.shapeFlag&1&&re&&!re.persisted){const{leave:de,delayLeave:pe}=re,me=()=>de(N,ne);pe?pe(S.el,ne,me):me()}else ne()},le=(S,E)=>{let N;for(;S!==E;)N=h(S),i(S),S=N;i(E)},Y=(S,E,N)=>{const{bum:W,scope:re,job:ne,subTree:de,um:pe,m:me,a:fe,parent:ke,slots:{__:we}}=S;p0(me),p0(fe),W&&Ul(W),ke&&Qe(we)&&we.forEach(Re=>{ke.renderCache[Re]=void 0}),re.stop(),ne&&(ne.flags|=8,ce(de,S,E,N)),pe&&Dr(pe,E),Dr(()=>{S.isUnmounted=!0},E),E&&E.pendingBranch&&!E.isUnmounted&&S.asyncDep&&!S.asyncResolved&&S.suspenseId===E.pendingId&&(E.deps--,E.deps===0&&E.resolve())},Z=(S,E,N,W=!1,re=!1,ne=0)=>{for(let de=ne;de<S.length;de++)ce(S[de],E,N,W,re)},I=S=>{if(S.shapeFlag&6)return I(S.component.subTree);if(S.shapeFlag&128)return S.suspense.next();const E=h(S.anchor||S.el),N=E&&E[U2];return N?h(N):E};let K=!1;const ee=(S,E,N)=>{S==null?E._vnode&&ce(E._vnode,null,null,!0):v(E._vnode||null,S,E,null,null,null,N),E._vnode=S,K||(K=!0,a0(),Y_(),K=!1)},ae={p:v,um:ce,m:P,r:V,mt:O,mc:D,pc:X,pbc:b,n:I,o:e};return{render:ee,hydrate:void 0,createApp:u3(ee)}}function Mu({type:e,props:t},r){return r==="svg"&&e==="foreignObject"||r==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:r}function Di({effect:e,job:t},r){r?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function b3(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function dg(e,t,r=!1){const n=e.children,i=t.children;if(Qe(n)&&Qe(i))for(let s=0;s<n.length;s++){const a=n[s];let o=i[s];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=i[s]=gi(i[s]),o.el=a.el),!r&&o.patchFlag!==-2&&dg(a,o)),o.type===Dc&&(o.el=a.el),o.type===Kn&&!o.el&&(o.el=a.el)}}function w3(e){const t=e.slice(),r=[0];let n,i,s,a,o;const l=e.length;for(n=0;n<l;n++){const u=e[n];if(u!==0){if(i=r[r.length-1],e[i]<u){t[n]=i,r.push(n);continue}for(s=0,a=r.length-1;s<a;)o=s+a>>1,e[r[o]]<u?s=o+1:a=o;u<e[r[s]]&&(s>0&&(t[n]=r[s-1]),r[s]=n)}}for(s=r.length,a=r[s-1];s-- >0;)r[s]=a,a=t[a];return r}function pg(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:pg(t)}function p0(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const S3=Symbol.for("v-scx"),C3=()=>kn(S3);function Qs(e,t,r){return mg(e,t,r)}function mg(e,t,r=Ft){const{immediate:n,deep:i,flush:s,once:a}=r,o=vr({},r),l=t&&n||!t&&s!=="post";let u;if(ma){if(s==="sync"){const d=C3();u=d.__watcherHandles||(d.__watcherHandles=[])}else if(!l){const d=()=>{};return d.stop=Rn,d.resume=Rn,d.pause=Rn,d}}const f=lr;o.call=(d,p,v)=>Mn(d,f,p,v);let c=!1;s==="post"?o.scheduler=d=>{Dr(d,f&&f.suspense)}:s!=="sync"&&(c=!0,o.scheduler=(d,p)=>{p?d():Kh(d)}),o.augmentJob=d=>{t&&(d.flags|=4),c&&(d.flags|=2,f&&(d.id=f.uid,d.i=f))};const h=H2(e,t,o);return ma&&(u?u.push(h):l&&h()),h}function x3(e,t,r){const n=this.proxy,i=tr(e)?e.includes(".")?_g(n,e):()=>n[e]:e.bind(n,n);let s;nt(t)?s=t:(s=t.handler,r=t);const a=Oa(this),o=mg(i,s.bind(n),r);return a(),o}function _g(e,t){const r=t.split(".");return()=>{let n=e;for(let i=0;i<r.length&&n;i++)n=n[r[i]];return n}}const E3=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Zr(t)}Modifiers`]||e[`${Mi(t)}Modifiers`];function A3(e,t,...r){if(e.isUnmounted)return;const n=e.vnode.props||Ft;let i=r;const s=t.startsWith("update:"),a=s&&E3(n,t.slice(7));a&&(a.trim&&(i=r.map(f=>tr(f)?f.trim():f)),a.number&&(i=r.map(Df)));let o,l=n[o=Cu(t)]||n[o=Cu(Zr(t))];!l&&s&&(l=n[o=Cu(Mi(t))]),l&&Mn(l,e,6,i);const u=n[o+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[o])return;e.emitted[o]=!0,Mn(u,e,6,i)}}function gg(e,t,r=!1){const n=t.emitsCache,i=n.get(e);if(i!==void 0)return i;const s=e.emits;let a={},o=!1;if(!nt(e)){const l=u=>{const f=gg(u,t,!0);f&&(o=!0,vr(a,f))};!r&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!s&&!o?(qt(e)&&n.set(e,null),null):(Qe(s)?s.forEach(l=>a[l]=null):vr(a,s),qt(e)&&n.set(e,a),a)}function Fc(e,t){return!e||!Ec(t)?!1:(t=t.slice(2).replace(/Once$/,""),xt(e,t[0].toLowerCase()+t.slice(1))||xt(e,Mi(t))||xt(e,t))}function m0(e){const{type:t,vnode:r,proxy:n,withProxy:i,propsOptions:[s],slots:a,attrs:o,emit:l,render:u,renderCache:f,props:c,data:h,setupState:d,ctx:p,inheritAttrs:v}=e,_=lc(e);let m,g;try{if(r.shapeFlag&4){const L=i||n,y=L;m=Sn(u.call(y,L,f,c,d,h,p)),g=o}else{const L=t;m=Sn(L.length>1?L(c,{attrs:o,slots:a,emit:l}):L(c,null)),g=t.props?o:R3(o)}}catch(L){ea.length=0,Bc(L,e,1),m=Et(Kn)}let x=m;if(g&&v!==!1){const L=Object.keys(g),{shapeFlag:y}=x;L.length&&y&7&&(s&&L.some(Fh)&&(g=k3(g,s)),x=io(x,g,!1,!0))}return r.dirs&&(x=io(x,null,!1,!0),x.dirs=x.dirs?x.dirs.concat(r.dirs):r.dirs),r.transition&&Yh(x,r.transition),m=x,lc(_),m}const R3=e=>{let t;for(const r in e)(r==="class"||r==="style"||Ec(r))&&((t||(t={}))[r]=e[r]);return t},k3=(e,t)=>{const r={};for(const n in e)(!Fh(n)||!(n.slice(9)in t))&&(r[n]=e[n]);return r};function T3(e,t,r){const{props:n,children:i,component:s}=e,{props:a,children:o,patchFlag:l}=t,u=s.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return n?_0(n,a,u):!!a;if(l&8){const f=t.dynamicProps;for(let c=0;c<f.length;c++){const h=f[c];if(a[h]!==n[h]&&!Fc(u,h))return!0}}}else return(i||o)&&(!o||!o.$stable)?!0:n===a?!1:n?a?_0(n,a,u):!0:!!a;return!1}function _0(e,t,r){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let i=0;i<n.length;i++){const s=n[i];if(t[s]!==e[s]&&!Fc(r,s))return!0}return!1}function M3({vnode:e,parent:t},r){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=r,t=t.parent;else break}}const vg=e=>e.__isSuspense;function L3(e,t){t&&t.pendingBranch?Qe(e)?t.effects.push(...e):t.effects.push(e):N2(e)}const ir=Symbol.for("v-fgt"),Dc=Symbol.for("v-txt"),Kn=Symbol.for("v-cmt"),Lu=Symbol.for("v-stc"),ea=[];let jr=null;function ot(e=!1){ea.push(jr=e?null:[])}function B3(){ea.pop(),jr=ea[ea.length-1]||null}let da=1;function g0(e,t=!1){da+=e,e<0&&jr&&t&&(jr.hasOnce=!0)}function yg(e){return e.dynamicChildren=da>0?jr||Ys:null,B3(),da>0&&jr&&jr.push(e),e}function ct(e,t,r,n,i,s){return yg(Le(e,t,r,n,i,s,!0))}function Vf(e,t,r,n,i){return yg(Et(e,t,r,n,i,!0))}function pa(e){return e?e.__v_isVNode===!0:!1}function xo(e,t){return e.type===t.type&&e.key===t.key}const bg=({key:e})=>e??null,Vl=({ref:e,ref_key:t,ref_for:r})=>(typeof e=="number"&&(e=""+e),e!=null?tr(e)||Xt(e)||nt(e)?{i:or,r:e,k:t,f:!!r}:e:null);function Le(e,t=null,r=null,n=0,i=null,s=e===ir?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&bg(t),ref:t&&Vl(t),scopeId:X_,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:or};return o?(Qh(l,r),s&128&&e.normalize(l)):r&&(l.shapeFlag|=tr(r)?8:16),da>0&&!a&&jr&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&jr.push(l),l}const Et=O3;function O3(e,t=null,r=null,n=0,i=null,s=!1){if((!e||e===t3)&&(e=Kn),pa(e)){const o=io(e,t,!0);return r&&Qh(o,r),da>0&&!s&&jr&&(o.shapeFlag&6?jr[jr.indexOf(e)]=o:jr.push(o)),o.patchFlag=-2,o}if(V3(e)&&(e=e.__vccOpts),t){t=I3(t);let{class:o,style:l}=t;o&&!tr(o)&&(t.class=Br(o)),qt(l)&&($h(l)&&!Qe(l)&&(l=vr({},l)),t.style=Ph(l))}const a=tr(e)?1:vg(e)?128:q2(e)?64:qt(e)?4:nt(e)?2:0;return Le(e,t,r,n,i,a,s,!0)}function I3(e){return e?$h(e)||ag(e)?vr({},e):e:null}function io(e,t,r=!1,n=!1){const{props:i,ref:s,patchFlag:a,children:o,transition:l}=e,u=t?F3(i||{},t):i,f={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&bg(u),ref:t&&t.ref?r&&s?Qe(s)?s.concat(Vl(t)):[s,Vl(t)]:Vl(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==ir?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&io(e.ssContent),ssFallback:e.ssFallback&&io(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&n&&Yh(f,l.clone(f)),f}function _t(e=" ",t=0){return Et(Dc,null,e,t)}function Hr(e="",t=!1){return t?(ot(),Vf(Kn,null,e)):Et(Kn,null,e)}function Sn(e){return e==null||typeof e=="boolean"?Et(Kn):Qe(e)?Et(ir,null,e.slice()):pa(e)?gi(e):Et(Dc,null,String(e))}function gi(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:io(e)}function Qh(e,t){let r=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(Qe(t))r=16;else if(typeof t=="object")if(n&65){const i=t.default;i&&(i._c&&(i._d=!1),Qh(e,i()),i._c&&(i._d=!0));return}else{r=32;const i=t._;!i&&!ag(t)?t._ctx=or:i===3&&or&&(or.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else nt(t)?(t={default:t,_ctx:or},r=32):(t=String(t),n&64?(r=16,t=[_t(t)]):r=8);e.children=t,e.shapeFlag|=r}function F3(...e){const t={};for(let r=0;r<e.length;r++){const n=e[r];for(const i in n)if(i==="class")t.class!==n.class&&(t.class=Br([t.class,n.class]));else if(i==="style")t.style=Ph([t.style,n.style]);else if(Ec(i)){const s=t[i],a=n[i];a&&s!==a&&!(Qe(s)&&s.includes(a))&&(t[i]=s?[].concat(s,a):a)}else i!==""&&(t[i]=n[i])}return t}function mn(e,t,r,n=null){Mn(e,t,7,[r,n])}const D3=ig();let H3=0;function P3(e,t,r){const n=e.type,i=(t?t.appContext:e.appContext)||D3,s={uid:H3++,vnode:e,type:n,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new E_(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:cg(n,i),emitsOptions:gg(n,i),emit:null,emitted:null,propsDefaults:Ft,inheritAttrs:n.inheritAttrs,ctx:Ft,data:Ft,props:Ft,attrs:Ft,slots:Ft,refs:Ft,setupState:Ft,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=A3.bind(null,s),e.ce&&e.ce(s),s}let lr=null,fc,$f;{const e=Tc(),t=(r,n)=>{let i;return(i=e[r])||(i=e[r]=[]),i.push(n),s=>{i.length>1?i.forEach(a=>a(s)):i[0](s)}};fc=t("__VUE_INSTANCE_SETTERS__",r=>lr=r),$f=t("__VUE_SSR_SETTERS__",r=>ma=r)}const Oa=e=>{const t=lr;return fc(e),e.scope.on(),()=>{e.scope.off(),fc(t)}},v0=()=>{lr&&lr.scope.off(),fc(null)};function wg(e){return e.vnode.shapeFlag&4}let ma=!1;function j3(e,t=!1,r=!1){t&&$f(t);const{props:n,children:i}=e.vnode,s=wg(e);h3(e,n,s,t),_3(e,i,r||t);const a=s?N3(e,t):void 0;return t&&$f(!1),a}function N3(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,n3);const{setup:n}=r;if(n){$n();const i=e.setupContext=n.length>1?q3(e):null,s=Oa(e),a=La(n,e,0,[e.props,i]),o=g_(a);if(Wn(),s(),(o||e.sp)&&!Zs(e)&&Z_(e),o){if(a.then(v0,v0),t)return a.then(l=>{y0(e,l)}).catch(l=>{Bc(l,e,0)});e.asyncDep=a}else y0(e,a)}else Sg(e)}function y0(e,t,r){nt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:qt(t)&&(e.setupState=$_(t)),Sg(e)}function Sg(e,t,r){const n=e.type;e.render||(e.render=n.render||Rn);{const i=Oa(e);$n();try{i3(e)}finally{Wn(),i()}}}const U3={get(e,t){return pr(e,"get",""),e[t]}};function q3(e){const t=r=>{e.exposed=r||{}};return{attrs:new Proxy(e.attrs,U3),slots:e.slots,emit:e.emit,expose:t}}function Hc(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy($_(Wh(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in Jo)return Jo[r](e)},has(t,r){return r in t||r in Jo}})):e.proxy}function z3(e,t=!0){return nt(e)?e.displayName||e.name:e.name||t&&e.__name}function V3(e){return nt(e)&&"__vccOpts"in e}const zt=(e,t)=>F2(e,t,ma);function Cg(e,t,r){const n=arguments.length;return n===2?qt(t)&&!Qe(t)?pa(t)?Et(e,null,[t]):Et(e,t):Et(e,null,t):(n>3?r=Array.prototype.slice.call(arguments,2):n===3&&pa(r)&&(r=[r]),Et(e,t,r))}const $3="3.5.16";/**
* @vue/runtime-dom v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Wf;const b0=typeof window<"u"&&window.trustedTypes;if(b0)try{Wf=b0.createPolicy("vue",{createHTML:e=>e})}catch{}const xg=Wf?e=>Wf.createHTML(e):e=>e,W3="http://www.w3.org/2000/svg",K3="http://www.w3.org/1998/Math/MathML",Nn=typeof document<"u"?document:null,w0=Nn&&Nn.createElement("template"),Y3={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,n)=>{const i=t==="svg"?Nn.createElementNS(W3,e):t==="mathml"?Nn.createElementNS(K3,e):r?Nn.createElement(e,{is:r}):Nn.createElement(e);return e==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:e=>Nn.createTextNode(e),createComment:e=>Nn.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Nn.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,r,n,i,s){const a=r?r.previousSibling:t.lastChild;if(i&&(i===s||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),r),!(i===s||!(i=i.nextSibling)););else{w0.innerHTML=xg(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const o=w0.content;if(n==="svg"||n==="mathml"){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}t.insertBefore(o,r)}return[a?a.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}},G3=Symbol("_vtc");function X3(e,t,r){const n=e[G3];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}const S0=Symbol("_vod"),Z3=Symbol("_vsh"),Q3=Symbol(""),J3=/(^|;)\s*display\s*:/;function e4(e,t,r){const n=e.style,i=tr(r);let s=!1;if(r&&!i){if(t)if(tr(t))for(const a of t.split(";")){const o=a.slice(0,a.indexOf(":")).trim();r[o]==null&&$l(n,o,"")}else for(const a in t)r[a]==null&&$l(n,a,"");for(const a in r)a==="display"&&(s=!0),$l(n,a,r[a])}else if(i){if(t!==r){const a=n[Q3];a&&(r+=";"+a),n.cssText=r,s=J3.test(r)}}else t&&e.removeAttribute("style");S0 in e&&(e[S0]=s?n.display:"",e[Z3]&&(n.display="none"))}const C0=/\s*!important$/;function $l(e,t,r){if(Qe(r))r.forEach(n=>$l(e,t,n));else if(r==null&&(r=""),t.startsWith("--"))e.setProperty(t,r);else{const n=t4(e,t);C0.test(r)?e.setProperty(Mi(n),r.replace(C0,""),"important"):e[n]=r}}const x0=["Webkit","Moz","ms"],Bu={};function t4(e,t){const r=Bu[t];if(r)return r;let n=Zr(t);if(n!=="filter"&&n in e)return Bu[t]=n;n=kc(n);for(let i=0;i<x0.length;i++){const s=x0[i]+n;if(s in e)return Bu[t]=s}return t}const E0="http://www.w3.org/1999/xlink";function A0(e,t,r,n,i,s=o2(t)){n&&t.startsWith("xlink:")?r==null?e.removeAttributeNS(E0,t.slice(6,t.length)):e.setAttributeNS(E0,t,r):r==null||s&&!w_(r)?e.removeAttribute(t):e.setAttribute(t,s?"":ln(r)?String(r):r)}function R0(e,t,r,n,i){if(t==="innerHTML"||t==="textContent"){r!=null&&(e[t]=t==="innerHTML"?xg(r):r);return}const s=e.tagName;if(t==="value"&&s!=="PROGRESS"&&!s.includes("-")){const o=s==="OPTION"?e.getAttribute("value")||"":e.value,l=r==null?e.type==="checkbox"?"on":"":String(r);(o!==l||!("_value"in e))&&(e.value=l),r==null&&e.removeAttribute(t),e._value=r;return}let a=!1;if(r===""||r==null){const o=typeof e[t];o==="boolean"?r=w_(r):r==null&&o==="string"?(r="",a=!0):o==="number"&&(r=0,a=!0)}try{e[t]=r}catch{}a&&e.removeAttribute(i||t)}function ts(e,t,r,n){e.addEventListener(t,r,n)}function r4(e,t,r,n){e.removeEventListener(t,r,n)}const k0=Symbol("_vei");function n4(e,t,r,n,i=null){const s=e[k0]||(e[k0]={}),a=s[t];if(n&&a)a.value=n;else{const[o,l]=i4(t);if(n){const u=s[t]=a4(n,i);ts(e,o,u,l)}else a&&(r4(e,o,a,l),s[t]=void 0)}}const T0=/(?:Once|Passive|Capture)$/;function i4(e){let t;if(T0.test(e)){t={};let n;for(;n=e.match(T0);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Mi(e.slice(2)),t]}let Ou=0;const s4=Promise.resolve(),o4=()=>Ou||(s4.then(()=>Ou=0),Ou=Date.now());function a4(e,t){const r=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=r.attached)return;Mn(l4(n,r.value),t,5,[n])};return r.value=e,r.attached=o4(),r}function l4(e,t){if(Qe(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(n=>i=>!i._stopped&&n&&n(i))}else return t}const M0=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,c4=(e,t,r,n,i,s)=>{const a=i==="svg";t==="class"?X3(e,n,a):t==="style"?e4(e,r,n):Ec(t)?Fh(t)||n4(e,t,r,n,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):u4(e,t,n,a))?(R0(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&A0(e,t,n,a,s,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!tr(n))?R0(e,Zr(t),n,s,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),A0(e,t,n,a))};function u4(e,t,r,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&M0(t)&&nt(r));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return M0(t)&&tr(r)?!1:t in e}const hc=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Qe(t)?r=>Ul(t,r):t};function f4(e){e.target.composing=!0}function L0(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Js=Symbol("_assign"),Kf={created(e,{modifiers:{lazy:t,trim:r,number:n}},i){e[Js]=hc(i);const s=n||i.props&&i.props.type==="number";ts(e,t?"change":"input",a=>{if(a.target.composing)return;let o=e.value;r&&(o=o.trim()),s&&(o=Df(o)),e[Js](o)}),r&&ts(e,"change",()=>{e.value=e.value.trim()}),t||(ts(e,"compositionstart",f4),ts(e,"compositionend",L0),ts(e,"change",L0))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:r,modifiers:{lazy:n,trim:i,number:s}},a){if(e[Js]=hc(a),e.composing)return;const o=(s||e.type==="number")&&!/^0\d/.test(e.value)?Df(e.value):e.value,l=t??"";o!==l&&(document.activeElement===e&&e.type!=="range"&&(n&&t===r||i&&e.value.trim()===l)||(e.value=l))}},h4={deep:!0,created(e,t,r){e[Js]=hc(r),ts(e,"change",()=>{const n=e._modelValue,i=d4(e),s=e.checked,a=e[Js];if(Qe(n)){const o=S_(n,i),l=o!==-1;if(s&&!l)a(n.concat(i));else if(!s&&l){const u=[...n];u.splice(o,1),a(u)}}else if(Ac(n)){const o=new Set(n);s?o.add(i):o.delete(i),a(o)}else a(Eg(e,s))})},mounted:B0,beforeUpdate(e,t,r){e[Js]=hc(r),B0(e,t,r)}};function B0(e,{value:t,oldValue:r},n){e._modelValue=t;let i;if(Qe(t))i=S_(t,n.props.value)>-1;else if(Ac(t))i=t.has(n.props.value);else{if(t===r)return;i=Mc(t,Eg(e,!0))}e.checked!==i&&(e.checked=i)}function d4(e){return"_value"in e?e._value:e.value}function Eg(e,t){const r=t?"_trueValue":"_falseValue";return r in e?e[r]:t}const p4=["ctrl","shift","alt","meta"],m4={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>p4.some(r=>e[`${r}Key`]&&!t.includes(r))},_4=(e,t)=>{const r=e._withMods||(e._withMods={}),n=t.join(".");return r[n]||(r[n]=(i,...s)=>{for(let a=0;a<t.length;a++){const o=m4[t[a]];if(o&&o(i,t))return}return e(i,...s)})},g4={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Ag=(e,t)=>{const r=e._withKeys||(e._withKeys={}),n=t.join(".");return r[n]||(r[n]=i=>{if(!("key"in i))return;const s=Mi(i.key);if(t.some(a=>a===s||g4[a]===s))return e(i)})},v4=vr({patchProp:c4},Y3);let O0;function y4(){return O0||(O0=v3(v4))}const b4=(...e)=>{const t=y4().createApp(...e),{mount:r}=t;return t.mount=n=>{const i=S4(n);if(!i)return;const s=t._component;!nt(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const a=r(i,!1,w4(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},t};function w4(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function S4(e){return tr(e)?document.querySelector(e):e}/*!
 * pinia v3.0.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Rg;const Pc=e=>Rg=e,kg=Symbol();function Yf(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var ta;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(ta||(ta={}));function C4(){const e=A_(!0),t=e.run(()=>lt({}));let r=[],n=[];const i=Wh({install(s){Pc(i),i._a=s,s.provide(kg,i),s.config.globalProperties.$pinia=i,n.forEach(a=>r.push(a)),n=[]},use(s){return this._a?r.push(s):n.push(s),this},_p:r,_a:null,_e:e,_s:new Map,state:t});return i}const Tg=()=>{};function I0(e,t,r,n=Tg){e.push(t);const i=()=>{const s=e.indexOf(t);s>-1&&(e.splice(s,1),n())};return!r&&R_()&&l2(i),i}function gs(e,...t){e.slice().forEach(r=>{r(...t)})}const x4=e=>e(),F0=Symbol(),Iu=Symbol();function Gf(e,t){e instanceof Map&&t instanceof Map?t.forEach((r,n)=>e.set(n,r)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const r in t){if(!t.hasOwnProperty(r))continue;const n=t[r],i=e[r];Yf(i)&&Yf(n)&&e.hasOwnProperty(r)&&!Xt(n)&&!wi(n)?e[r]=Gf(i,n):e[r]=n}return e}const E4=Symbol();function A4(e){return!Yf(e)||!Object.prototype.hasOwnProperty.call(e,E4)}const{assign:di}=Object;function R4(e){return!!(Xt(e)&&e.effect)}function k4(e,t,r,n){const{state:i,actions:s,getters:a}=t,o=r.state.value[e];let l;function u(){o||(r.state.value[e]=i?i():{});const f=L2(r.state.value[e]);return di(f,s,Object.keys(a||{}).reduce((c,h)=>(c[h]=Wh(zt(()=>{Pc(r);const d=r._s.get(e);return a[h].call(d,d)})),c),{}))}return l=Mg(e,u,t,r,n,!0),l}function Mg(e,t,r={},n,i,s){let a;const o=di({actions:{}},r),l={deep:!0};let u,f,c=[],h=[],d;const p=n.state.value[e];!s&&!p&&(n.state.value[e]={}),lt({});let v;function _(D){let H;u=f=!1,typeof D=="function"?(D(n.state.value[e]),H={type:ta.patchFunction,storeId:e,events:d}):(Gf(n.state.value[e],D),H={type:ta.patchObject,payload:D,storeId:e,events:d});const b=v=Symbol();Oc().then(()=>{v===b&&(u=!0)}),f=!0,gs(c,H,n.state.value[e])}const m=s?function(){const{state:H}=r,b=H?H():{};this.$patch(R=>{di(R,b)})}:Tg;function g(){a.stop(),c=[],h=[],n._s.delete(e)}const x=(D,H="")=>{if(F0 in D)return D[Iu]=H,D;const b=function(){Pc(n);const R=Array.from(arguments),A=[],k=[];function O(Q){A.push(Q)}function B(Q){k.push(Q)}gs(h,{args:R,name:b[Iu],store:y,after:O,onError:B});let $;try{$=D.apply(this&&this.$id===e?this:y,R)}catch(Q){throw gs(k,Q),Q}return $ instanceof Promise?$.then(Q=>(gs(A,Q),Q)).catch(Q=>(gs(k,Q),Promise.reject(Q))):(gs(A,$),$)};return b[F0]=!0,b[Iu]=H,b},L={_p:n,$id:e,$onAction:I0.bind(null,h),$patch:_,$reset:m,$subscribe(D,H={}){const b=I0(c,D,H.detached,()=>R()),R=a.run(()=>Qs(()=>n.state.value[e],A=>{(H.flush==="sync"?f:u)&&D({storeId:e,type:ta.direct,events:d},A)},di({},l,H)));return b},$dispose:g},y=Ma(L);n._s.set(e,y);const F=(n._a&&n._a.runWithContext||x4)(()=>n._e.run(()=>(a=A_()).run(()=>t({action:x}))));for(const D in F){const H=F[D];if(Xt(H)&&!R4(H)||wi(H))s||(p&&A4(H)&&(Xt(H)?H.value=p[D]:Gf(H,p[D])),n.state.value[e][D]=H);else if(typeof H=="function"){const b=x(H,D);F[D]=b,o.actions[D]=H}}return di(y,F),di(bt(y),F),Object.defineProperty(y,"$state",{get:()=>n.state.value[e],set:D=>{_(H=>{di(H,D)})}}),n._p.forEach(D=>{di(y,a.run(()=>D({store:y,app:n._a,pinia:n,options:o})))}),p&&s&&r.hydrate&&r.hydrate(y.$state,p),u=!0,f=!0,y}/*! #__NO_SIDE_EFFECTS__ */function Lg(e,t,r){let n;const i=typeof t=="function";n=i?r:t;function s(a,o){const l=f3();return a=a||(l?kn(kg,null):null),a&&Pc(a),a=Rg,a._s.has(e)||(i?Mg(e,t,n,a):k4(e,n,a)),a._s.get(e)}return s.$id=e,s}function T4(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function M4(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var Wl={exports:{}},Ya={},vs={},Ga={},Fu={},Xa={},Za={},D0;function Jn(){if(D0)return Za;D0=1,Object.defineProperty(Za,"__esModule",{value:!0});var e=function(){function t(){this._listeners=[]}return Object.defineProperty(t.prototype,"event",{get:function(){var r=this;return this._event||(this._event=function(n){r._listeners.push(n);var i={dispose:function(){for(var s=0;s<r._listeners.length;s++)if(r._listeners[s]===n){r._listeners.splice(s,1);return}}};return i}),this._event},enumerable:!0,configurable:!0}),t.prototype.fire=function(r){for(var n=[],i=0;i<this._listeners.length;i++)n.push(this._listeners[i]);for(var i=0;i<n.length;i++)n[i].call(void 0,r)},t}();return Za.EventEmitter2=e,Za}var H0;function L4(){if(H0)return Xa;H0=1,Object.defineProperty(Xa,"__esModule",{value:!0});var e=Jn(),t=function(){function r(n){this._maxLength=n,this.onDeleteEmitter=new e.EventEmitter2,this.onInsertEmitter=new e.EventEmitter2,this.onTrimEmitter=new e.EventEmitter2,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}return Object.defineProperty(r.prototype,"onDelete",{get:function(){return this.onDeleteEmitter.event},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"onInsert",{get:function(){return this.onInsertEmitter.event},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"onTrim",{get:function(){return this.onTrimEmitter.event},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"maxLength",{get:function(){return this._maxLength},set:function(n){if(this._maxLength!==n){for(var i=new Array(n),s=0;s<Math.min(n,this.length);s++)i[s]=this._array[this._getCyclicIndex(s)];this._array=i,this._maxLength=n,this._startIndex=0}},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"length",{get:function(){return this._length},set:function(n){if(n>this._length)for(var i=this._length;i<n;i++)this._array[i]=void 0;this._length=n},enumerable:!0,configurable:!0}),r.prototype.get=function(n){return this._array[this._getCyclicIndex(n)]},r.prototype.set=function(n,i){this._array[this._getCyclicIndex(n)]=i},r.prototype.push=function(n){this._array[this._getCyclicIndex(this._length)]=n,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++},r.prototype.recycle=function(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]},Object.defineProperty(r.prototype,"isFull",{get:function(){return this._length===this._maxLength},enumerable:!0,configurable:!0}),r.prototype.pop=function(){return this._array[this._getCyclicIndex(this._length---1)]},r.prototype.splice=function(n,i){for(var s=[],a=2;a<arguments.length;a++)s[a-2]=arguments[a];if(i){for(var o=n;o<this._length-i;o++)this._array[this._getCyclicIndex(o)]=this._array[this._getCyclicIndex(o+i)];this._length-=i}for(var o=this._length-1;o>=n;o--)this._array[this._getCyclicIndex(o+s.length)]=this._array[this._getCyclicIndex(o)];for(var o=0;o<s.length;o++)this._array[this._getCyclicIndex(n+o)]=s[o];if(this._length+s.length>this._maxLength){var l=this._length+s.length-this._maxLength;this._startIndex+=l,this._length=this._maxLength,this.onTrimEmitter.fire(l)}else this._length+=s.length},r.prototype.trimStart=function(n){n>this._length&&(n=this._length),this._startIndex+=n,this._length-=n,this.onTrimEmitter.fire(n)},r.prototype.shiftElements=function(n,i,s){if(!(i<=0)){if(n<0||n>=this._length)throw new Error("start argument out of range");if(n+s<0)throw new Error("Cannot shift elements in list beyond index 0");if(s>0){for(var a=i-1;a>=0;a--)this.set(n+a+s,this.get(n+a));var o=n+i+s-this._length;if(o>0)for(this._length+=o;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(var a=0;a<i;a++)this.set(n+a+s,this.get(n+a))}},r.prototype._getCyclicIndex=function(n){return(this._startIndex+n)%this._maxLength},r}();return Xa.CircularList=t,Xa}var Eo={},Hi={},P0;function Jh(){if(P0)return Hi;P0=1,Object.defineProperty(Hi,"__esModule",{value:!0});function e(i){return i>65535?(i-=65536,String.fromCharCode((i>>10)+55296)+String.fromCharCode(i%1024+56320)):String.fromCharCode(i)}Hi.stringFromCodePoint=e;function t(i,s,a){s===void 0&&(s=0),a===void 0&&(a=i.length);for(var o="",l=s;l<a;++l){var u=i[l];u>65535?(u-=65536,o+=String.fromCharCode((u>>10)+55296)+String.fromCharCode(u%1024+56320)):o+=String.fromCharCode(u)}return o}Hi.utf32ToString=t;var r=function(){function i(){this._interim=0}return i.prototype.clear=function(){this._interim=0},i.prototype.decode=function(s,a){var o=s.length;if(!o)return 0;var l=0,u=0;if(this._interim){var f=s.charCodeAt(u++);56320<=f&&f<=57343?a[l++]=(this._interim-55296)*1024+f-56320+65536:(a[l++]=this._interim,a[l++]=f),this._interim=0}for(var c=u;c<o;++c){var h=s.charCodeAt(c);if(55296<=h&&h<=56319){if(++c>=o)return this._interim=h,l;var f=s.charCodeAt(c);56320<=f&&f<=57343?a[l++]=(h-55296)*1024+f-56320+65536:(a[l++]=h,a[l++]=f);continue}a[l++]=h}return l},i}();Hi.StringToUtf32=r;var n=function(){function i(){this.interim=new Uint8Array(3)}return i.prototype.clear=function(){this.interim.fill(0)},i.prototype.decode=function(s,a){var o=s.length;if(!o)return 0;var l=0,u,f,c,h,d=0,p=0;if(this.interim[0]){var v=!1,_=this.interim[0];_&=(_&224)===192?31:(_&240)===224?15:7;for(var m=0,g=void 0;(g=this.interim[++m]&63)&&m<4;)_<<=6,_|=g;for(var x=(this.interim[0]&224)===192?2:(this.interim[0]&240)===224?3:4,L=x-m;p<L;){if(p>=o)return 0;if(g=s[p++],(g&192)!==128){p--,v=!0;break}else this.interim[m++]=g,_<<=6,_|=g&63}v||(x===2?_<128?p--:a[l++]=_:x===3?_<2048||_>=55296&&_<=57343||(a[l++]=_):d<65536||d>1114111||(a[l++]=_)),this.interim.fill(0)}for(var y=o-4,M=p;M<o;){for(;M<y&&!((u=s[M])&128)&&!((f=s[M+1])&128)&&!((c=s[M+2])&128)&&!((h=s[M+3])&128);)a[l++]=u,a[l++]=f,a[l++]=c,a[l++]=h,M+=4;if(u=s[M++],u<128)a[l++]=u;else if((u&224)===192){if(M>=o)return this.interim[0]=u,l;if(f=s[M++],(f&192)!==128){M--;continue}if(d=(u&31)<<6|f&63,d<128){M--;continue}a[l++]=d}else if((u&240)===224){if(M>=o)return this.interim[0]=u,l;if(f=s[M++],(f&192)!==128){M--;continue}if(M>=o)return this.interim[0]=u,this.interim[1]=f,l;if(c=s[M++],(c&192)!==128){M--;continue}if(d=(u&15)<<12|(f&63)<<6|c&63,d<2048||d>=55296&&d<=57343)continue;a[l++]=d}else if((u&248)===240){if(M>=o)return this.interim[0]=u,l;if(f=s[M++],(f&192)!==128){M--;continue}if(M>=o)return this.interim[0]=u,this.interim[1]=f,l;if(c=s[M++],(c&192)!==128){M--;continue}if(M>=o)return this.interim[0]=u,this.interim[1]=f,this.interim[2]=c,l;if(h=s[M++],(h&192)!==128){M--;continue}if(d=(u&7)<<18|(f&63)<<12|(c&63)<<6|h&63,d<65536||d>1114111)continue;a[l++]=d}}return l},i}();return Hi.Utf8ToUtf32=n,Hi}var Qa={},j0;function jc(){return j0||(j0=1,Object.defineProperty(Qa,"__esModule",{value:!0}),Qa.DEFAULT_COLOR=256),Qa}var N0;function In(){return N0||(N0=1,function(e){var t=Eo&&Eo.__extends||function(){var l=function(u,f){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,h){c.__proto__=h}||function(c,h){for(var d in h)h.hasOwnProperty(d)&&(c[d]=h[d])},l(u,f)};return function(u,f){l(u,f);function c(){this.constructor=u}u.prototype=f===null?Object.create(f):(c.prototype=f.prototype,new c)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=Jh(),n=jc();e.DEFAULT_ATTR=0|n.DEFAULT_COLOR<<9|256,e.CHAR_DATA_ATTR_INDEX=0,e.CHAR_DATA_CHAR_INDEX=1,e.CHAR_DATA_WIDTH_INDEX=2,e.CHAR_DATA_CODE_INDEX=3,e.NULL_CELL_CHAR="",e.NULL_CELL_WIDTH=1,e.NULL_CELL_CODE=0,e.WHITESPACE_CELL_CHAR=" ",e.WHITESPACE_CELL_WIDTH=1,e.WHITESPACE_CELL_CODE=32;var i=3,s=function(){function l(){this.fg=0,this.bg=0}return l.toColorRGB=function(u){return[u>>>16&255,u>>>8&255,u&255]},l.fromColorRGB=function(u){return(u[0]&255)<<16|(u[1]&255)<<8|u[2]&255},l.prototype.clone=function(){var u=new l;return u.fg=this.fg,u.bg=this.bg,u},l.prototype.isInverse=function(){return this.fg&67108864},l.prototype.isBold=function(){return this.fg&134217728},l.prototype.isUnderline=function(){return this.fg&268435456},l.prototype.isBlink=function(){return this.fg&536870912},l.prototype.isInvisible=function(){return this.fg&1073741824},l.prototype.isItalic=function(){return this.bg&67108864},l.prototype.isDim=function(){return this.bg&134217728},l.prototype.getFgColorMode=function(){return this.fg&50331648},l.prototype.getBgColorMode=function(){return this.bg&50331648},l.prototype.isFgRGB=function(){return(this.fg&50331648)===50331648},l.prototype.isBgRGB=function(){return(this.bg&50331648)===50331648},l.prototype.isFgPalette=function(){return(this.fg&50331648)===16777216||(this.fg&50331648)===33554432},l.prototype.isBgPalette=function(){return(this.bg&50331648)===16777216||(this.bg&50331648)===33554432},l.prototype.isFgDefault=function(){return(this.fg&50331648)===0},l.prototype.isBgDefault=function(){return(this.bg&50331648)===0},l.prototype.getFgColor=function(){switch(this.fg&50331648){case 16777216:case 33554432:return this.fg&255;case 50331648:return this.fg&16777215;default:return-1}},l.prototype.getBgColor=function(){switch(this.bg&50331648){case 16777216:case 33554432:return this.bg&255;case 50331648:return this.bg&16777215;default:return-1}},l}();e.AttributeData=s,e.DEFAULT_ATTR_DATA=Object.freeze(new s);var a=function(l){t(u,l);function u(){var f=l!==null&&l.apply(this,arguments)||this;return f.content=0,f.fg=0,f.bg=0,f.combinedData="",f}return u.fromCharData=function(f){var c=new u;return c.setFromCharData(f),c},u.prototype.isCombined=function(){return this.content&2097152},u.prototype.getWidth=function(){return this.content>>22},u.prototype.getChars=function(){return this.content&2097152?this.combinedData:this.content&2097151?r.stringFromCodePoint(this.content&2097151):""},u.prototype.getCode=function(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):this.content&2097151},u.prototype.setFromCharData=function(f){this.fg=f[e.CHAR_DATA_ATTR_INDEX],this.bg=0;var c=!1;if(f[e.CHAR_DATA_CHAR_INDEX].length>2)c=!0;else if(f[e.CHAR_DATA_CHAR_INDEX].length===2){var h=f[e.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=h&&h<=56319){var d=f[e.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=d&&d<=57343?this.content=(h-55296)*1024+d-56320+65536|f[e.CHAR_DATA_WIDTH_INDEX]<<22:c=!0}else c=!0}else this.content=f[e.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|f[e.CHAR_DATA_WIDTH_INDEX]<<22;c&&(this.combinedData=f[e.CHAR_DATA_CHAR_INDEX],this.content=2097152|f[e.CHAR_DATA_WIDTH_INDEX]<<22)},u.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},u}(s);e.CellData=a;var o=function(){function l(u,f,c){c===void 0&&(c=!1),this.isWrapped=c,this._combined={},this._data=new Uint32Array(u*i);for(var h=f||a.fromCharData([0,e.NULL_CELL_CHAR,e.NULL_CELL_WIDTH,e.NULL_CELL_CODE]),d=0;d<u;++d)this.setCell(d,h);this.length=u}return l.prototype.get=function(u){var f=this._data[u*i+0],c=f&2097151;return[this._data[u*i+1],f&2097152?this._combined[u]:c?r.stringFromCodePoint(c):"",f>>22,f&2097152?this._combined[u].charCodeAt(this._combined[u].length-1):c]},l.prototype.set=function(u,f){this._data[u*i+1]=f[e.CHAR_DATA_ATTR_INDEX],f[e.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[u]=f[1],this._data[u*i+0]=u|2097152|f[e.CHAR_DATA_WIDTH_INDEX]<<22):this._data[u*i+0]=f[e.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|f[e.CHAR_DATA_WIDTH_INDEX]<<22},l.prototype.getWidth=function(u){return this._data[u*i+0]>>22},l.prototype.hasWidth=function(u){return this._data[u*i+0]&12582912},l.prototype.getFg=function(u){return this._data[u*i+1]},l.prototype.getBg=function(u){return this._data[u*i+2]},l.prototype.hasContent=function(u){return this._data[u*i+0]&4194303},l.prototype.getCodePoint=function(u){var f=this._data[u*i+0];return f&2097152?this._combined[u].charCodeAt(this._combined[u].length-1):f&2097151},l.prototype.isCombined=function(u){return this._data[u*i+0]&2097152},l.prototype.getString=function(u){var f=this._data[u*i+0];return f&2097152?this._combined[u]:f&2097151?r.stringFromCodePoint(f&2097151):""},l.prototype.loadCell=function(u,f){var c=u*i;return f.content=this._data[c+0],f.fg=this._data[c+1],f.bg=this._data[c+2],f.content&2097152&&(f.combinedData=this._combined[u]),f},l.prototype.setCell=function(u,f){f.content&2097152&&(this._combined[u]=f.combinedData),this._data[u*i+0]=f.content,this._data[u*i+1]=f.fg,this._data[u*i+2]=f.bg},l.prototype.setCellFromCodePoint=function(u,f,c,h,d){this._data[u*i+0]=f|c<<22,this._data[u*i+1]=h,this._data[u*i+2]=d},l.prototype.addCodepointToCell=function(u,f){var c=this._data[u*i+0];c&2097152?this._combined[u]+=r.stringFromCodePoint(f):(c&2097151?(this._combined[u]=r.stringFromCodePoint(c&2097151)+r.stringFromCodePoint(f),c&=-2097152,c|=2097152):c=f|1<<22,this._data[u*i+0]=c)},l.prototype.insertCells=function(u,f,c){if(u%=this.length,f<this.length-u){for(var h=new a,d=this.length-u-f-1;d>=0;--d)this.setCell(u+f+d,this.loadCell(u+d,h));for(var d=0;d<f;++d)this.setCell(u+d,c)}else for(var d=u;d<this.length;++d)this.setCell(d,c)},l.prototype.deleteCells=function(u,f,c){if(u%=this.length,f<this.length-u){for(var h=new a,d=0;d<this.length-u-f;++d)this.setCell(u+d,this.loadCell(u+f+d,h));for(var d=this.length-f;d<this.length;++d)this.setCell(d,c)}else for(var d=u;d<this.length;++d)this.setCell(d,c)},l.prototype.replaceCells=function(u,f,c){for(;u<f&&u<this.length;)this.setCell(u++,c)},l.prototype.resize=function(u,f){if(u!==this.length){if(u>this.length){var c=new Uint32Array(u*i);this.length&&(u*i<this._data.length?c.set(this._data.subarray(0,u*i)):c.set(this._data)),this._data=c;for(var h=this.length;h<u;++h)this.setCell(h,f)}else if(u){var c=new Uint32Array(u*i);c.set(this._data.subarray(0,u*i)),this._data=c;for(var d=Object.keys(this._combined),h=0;h<d.length;h++){var p=parseInt(d[h],10);p>=u&&delete this._combined[p]}}else this._data=new Uint32Array(0),this._combined={};this.length=u}},l.prototype.fill=function(u){this._combined={};for(var f=0;f<this.length;++f)this.setCell(f,u)},l.prototype.copyFrom=function(u){this.length!==u.length?this._data=new Uint32Array(u._data):this._data.set(u._data),this.length=u.length,this._combined={};for(var f in u._combined)this._combined[f]=u._combined[f];this.isWrapped=u.isWrapped},l.prototype.clone=function(){var u=new l(0);u._data=new Uint32Array(this._data),u.length=this.length;for(var f in this._combined)u._combined[f]=this._combined[f];return u.isWrapped=this.isWrapped,u},l.prototype.getTrimmedLength=function(){for(var u=this.length-1;u>=0;--u)if(this._data[u*i+0]&4194303)return u+(this._data[u*i+0]>>22);return 0},l.prototype.copyCellsFrom=function(u,f,c,h,d){var p=u._data;if(d)for(var v=h-1;v>=0;v--)for(var _=0;_<i;_++)this._data[(c+v)*i+_]=p[(f+v)*i+_];else for(var v=0;v<h;v++)for(var _=0;_<i;_++)this._data[(c+v)*i+_]=p[(f+v)*i+_];for(var m=Object.keys(u._combined),_=0;_<m.length;_++){var g=parseInt(m[_],10);g>=f&&(this._combined[g-f+c]=u._combined[g])}},l.prototype.translateToString=function(u,f,c){u===void 0&&(u=!1),f===void 0&&(f=0),c===void 0&&(c=this.length),u&&(c=Math.min(c,this.getTrimmedLength()));for(var h="";f<c;){var d=this._data[f*i+0],p=d&2097151;h+=d&2097152?this._combined[f]:p?r.stringFromCodePoint(p):e.WHITESPACE_CELL_CHAR,f+=d>>22||1}return h},l}();e.BufferLine=o}(Eo)),Eo}var ii={},U0;function B4(){if(U0)return ii;U0=1,Object.defineProperty(ii,"__esModule",{value:!0});function e(s,a,o,l,u){for(var f=[],c=0;c<s.length-1;c++){var h=c,d=s.get(++h);if(d.isWrapped){for(var p=[s.get(c)];h<s.length&&d.isWrapped;)p.push(d),d=s.get(++h);if(l>=c&&l<h){c+=p.length-1;continue}for(var v=0,_=i(p,v,a),m=1,g=0;m<p.length;){var x=i(p,m,a),L=x-g,y=o-_,M=Math.min(L,y);p[v].copyCellsFrom(p[m],g,_,M,!1),_+=M,_===o&&(v++,_=0),g+=M,g===x&&(m++,g=0),_===0&&v!==0&&p[v-1].getWidth(o-1)===2&&(p[v].copyCellsFrom(p[v-1],o-1,_++,1,!1),p[v-1].setCell(o-1,u))}p[v].replaceCells(_,o,u);for(var F=0,D=p.length-1;D>0&&(D>v||p[D].getTrimmedLength()===0);D--)F++;F>0&&(f.push(c+p.length-F),f.push(F)),c+=p.length-1}}return f}ii.reflowLargerGetLinesToRemove=e;function t(s,a){for(var o=[],l=0,u=a[l],f=0,c=0;c<s.length;c++)if(u===c){var h=a[++l];s.onDeleteEmitter.fire({index:c-f,amount:h}),c+=h-1,f+=h,u=a[++l]}else o.push(c);return{layout:o,countRemoved:f}}ii.reflowLargerCreateNewLayout=t;function r(s,a){for(var o=[],l=0;l<a.length;l++)o.push(s.get(a[l]));for(var l=0;l<o.length;l++)s.set(l,o[l]);s.length=a.length}ii.reflowLargerApplyNewLayout=r;function n(s,a,o){for(var l=[],u=s.map(function(_,m){return i(s,m,a)}).reduce(function(_,m){return _+m}),f=0,c=0,h=0;h<u;){if(u-h<o){l.push(u-h);break}f+=o;var d=i(s,c,a);f>d&&(f-=d,c++);var p=s[c].getWidth(f-1)===2;p&&f--;var v=p?o-1:o;l.push(v),h+=v}return l}ii.reflowSmallerGetNewLineLengths=n;function i(s,a,o){if(a===s.length-1)return s[a].getTrimmedLength();var l=!s[a].hasContent(o-1)&&s[a].getWidth(o-1)===1,u=s[a+1].getWidth(0)===2;return l&&u?o-1:o}return ii.getWrappedLineTrimmedLength=i,ii}var ys={},Ja={},q0;function dn(){if(q0)return Ja;q0=1,Object.defineProperty(Ja,"__esModule",{value:!0});var e=function(){function t(){this._disposables=[],this._isDisposed=!1}return t.prototype.dispose=function(){this._isDisposed=!0,this._disposables.forEach(function(r){return r.dispose()}),this._disposables.length=0},t.prototype.register=function(r){this._disposables.push(r)},t.prototype.unregister=function(r){var n=this._disposables.indexOf(r);n!==-1&&this._disposables.splice(n,1)},t}();return Ja.Disposable=e,Ja}var z0;function O4(){if(z0)return ys;z0=1;var e=ys&&ys.__extends||function(){var i=function(s,a){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var u in l)l.hasOwnProperty(u)&&(o[u]=l[u])},i(s,a)};return function(s,a){i(s,a);function o(){this.constructor=s}s.prototype=a===null?Object.create(a):(o.prototype=a.prototype,new o)}}();Object.defineProperty(ys,"__esModule",{value:!0});var t=Jn(),r=dn(),n=function(i){e(s,i);function s(a){var o=i.call(this)||this;return o.line=a,o._id=s._nextId++,o.isDisposed=!1,o._onDispose=new t.EventEmitter2,o}return Object.defineProperty(s.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"onDispose",{get:function(){return this._onDispose.event},enumerable:!0,configurable:!0}),s.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._onDispose.fire())},s._nextId=1,s}(r.Disposable);return ys.Marker=n,ys}var V0;function Bg(){return V0||(V0=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=L4(),r=In(),n=B4(),i=O4();e.MAX_BUFFER_SIZE=4294967295;var s=function(){function o(l,u){this._terminal=l,this._hasScrollback=u,this.savedCurAttrData=r.DEFAULT_ATTR_DATA.clone(),this.markers=[],this._nullCell=r.CellData.fromCharData([0,r.NULL_CELL_CHAR,r.NULL_CELL_WIDTH,r.NULL_CELL_CODE]),this._whitespaceCell=r.CellData.fromCharData([0,r.WHITESPACE_CELL_CHAR,r.WHITESPACE_CELL_WIDTH,r.WHITESPACE_CELL_CODE]),this._cols=this._terminal.cols,this._rows=this._terminal.rows,this.clear()}return o.prototype.getNullCell=function(l){return l?(this._nullCell.fg=l.fg,this._nullCell.bg=l.bg):(this._nullCell.fg=0,this._nullCell.bg=0),this._nullCell},o.prototype.getWhitespaceCell=function(l){return l?(this._whitespaceCell.fg=l.fg,this._whitespaceCell.bg=l.bg):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0),this._whitespaceCell},o.prototype.getBlankLine=function(l,u){return new r.BufferLine(this._terminal.cols,this.getNullCell(l),u)},Object.defineProperty(o.prototype,"hasScrollback",{get:function(){return this._hasScrollback&&this.lines.maxLength>this._rows},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"isCursorInViewport",{get:function(){var l=this.ybase+this.y,u=l-this.ydisp;return u>=0&&u<this._rows},enumerable:!0,configurable:!0}),o.prototype._getCorrectBufferLength=function(l){if(!this._hasScrollback)return l;var u=l+this._terminal.options.scrollback;return u>e.MAX_BUFFER_SIZE?e.MAX_BUFFER_SIZE:u},o.prototype.fillViewportRows=function(l){if(this.lines.length===0){l===void 0&&(l=r.DEFAULT_ATTR_DATA);for(var u=this._rows;u--;)this.lines.push(this.getBlankLine(l))}},o.prototype.clear=function(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new t.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()},o.prototype.resize=function(l,u){var f=this.getNullCell(r.DEFAULT_ATTR_DATA),c=this._getCorrectBufferLength(u);if(c>this.lines.maxLength&&(this.lines.maxLength=c),this.lines.length>0){if(this._cols<l)for(var h=0;h<this.lines.length;h++)this.lines.get(h).resize(l,f);var d=0;if(this._rows<u)for(var p=this._rows;p<u;p++)this.lines.length<u+this.ybase&&(this.ybase>0&&this.lines.length<=this.ybase+this.y+d+1?(this.ybase--,d++,this.ydisp>0&&this.ydisp--):this.lines.push(new r.BufferLine(l,f)));else for(var p=this._rows;p>u;p--)this.lines.length>u+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(c<this.lines.maxLength){var v=this.lines.length-c;v>0&&(this.lines.trimStart(v),this.ybase=Math.max(this.ybase-v,0),this.ydisp=Math.max(this.ydisp-v,0)),this.lines.maxLength=c}this.x=Math.min(this.x,l-1),this.y=Math.min(this.y,u-1),d&&(this.y+=d),this.savedY=Math.min(this.savedY,u-1),this.savedX=Math.min(this.savedX,l-1),this.scrollTop=0}if(this.scrollBottom=u-1,this._isReflowEnabled&&(this._reflow(l,u),this._cols>l))for(var h=0;h<this.lines.length;h++)this.lines.get(h).resize(l,f);this._cols=l,this._rows=u},Object.defineProperty(o.prototype,"_isReflowEnabled",{get:function(){return this._hasScrollback&&!this._terminal.options.windowsMode},enumerable:!0,configurable:!0}),o.prototype._reflow=function(l,u){this._cols!==l&&(l>this._cols?this._reflowLarger(l,u):this._reflowSmaller(l,u))},o.prototype._reflowLarger=function(l,u){var f=n.reflowLargerGetLinesToRemove(this.lines,this._cols,l,this.ybase+this.y,this.getNullCell(r.DEFAULT_ATTR_DATA));if(f.length>0){var c=n.reflowLargerCreateNewLayout(this.lines,f);n.reflowLargerApplyNewLayout(this.lines,c.layout),this._reflowLargerAdjustViewport(l,u,c.countRemoved)}},o.prototype._reflowLargerAdjustViewport=function(l,u,f){for(var c=this.getNullCell(r.DEFAULT_ATTR_DATA),h=f;h-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<u&&this.lines.push(new r.BufferLine(l,c))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--)},o.prototype._reflowSmaller=function(l,u){for(var f=this.getNullCell(r.DEFAULT_ATTR_DATA),c=[],h=0,d=this.lines.length-1;d>=0;d--){var p=this.lines.get(d);if(!(!p||!p.isWrapped&&p.getTrimmedLength()<=l)){for(var v=[p];p.isWrapped&&d>0;)p=this.lines.get(--d),v.unshift(p);var _=this.ybase+this.y;if(!(_>=d&&_<d+v.length)){var m=v[v.length-1].getTrimmedLength(),g=n.reflowSmallerGetNewLineLengths(v,this._cols,l),x=g.length-v.length,L=void 0;this.ybase===0&&this.y!==this.lines.length-1?L=Math.max(0,this.y-this.lines.maxLength+x):L=Math.max(0,this.lines.length-this.lines.maxLength+x);for(var y=[],M=0;M<x;M++){var F=this.getBlankLine(r.DEFAULT_ATTR_DATA,!0);y.push(F)}y.length>0&&(c.push({start:d+v.length+h,newLines:y}),h+=y.length),v.push.apply(v,y);var D=g.length-1,H=g[D];H===0&&(D--,H=g[D]);for(var b=v.length-x-1,R=m;b>=0;){var A=Math.min(R,H);if(v[D].copyCellsFrom(v[b],R-A,H-A,A,!0),H-=A,H===0&&(D--,H=g[D]),R-=A,R===0){b--;var k=Math.max(b,0);R=n.getWrappedLineTrimmedLength(v,k,this._cols)}}for(var M=0;M<v.length;M++)g[M]<l&&v[M].setCell(g[M],f);for(var O=x-L;O-- >0;)this.ybase===0?this.y<u-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+h)-u&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++)}}}if(c.length>0){for(var B=[],$=[],M=0;M<this.lines.length;M++)$.push(this.lines.get(M));var Q=this.lines.length,X=Q-1,oe=0,w=c[oe];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+h);for(var P=0,M=Math.min(this.lines.maxLength-1,Q+h-1);M>=0;M--)if(w&&w.start>X+P){for(var ce=w.newLines.length-1;ce>=0;ce--)this.lines.set(M--,w.newLines[ce]);M++,B.push({index:X+1,amount:w.newLines.length}),P+=w.newLines.length,w=c[++oe]}else this.lines.set(M,$[X--]);for(var V=0,M=B.length-1;M>=0;M--)B[M].index+=V,this.lines.onInsertEmitter.fire(B[M]),V+=B[M].amount;var le=Math.max(0,Q+h-this.lines.maxLength);le>0&&this.lines.onTrimEmitter.fire(le)}},o.prototype.stringIndexToBufferIndex=function(l,u,f){for(f===void 0&&(f=!1);u;){var c=this.lines.get(l);if(!c)return[-1,-1];for(var h=f?c.getTrimmedLength():c.length,d=0;d<h;++d)if(c.get(d)[r.CHAR_DATA_WIDTH_INDEX]&&(u-=c.get(d)[r.CHAR_DATA_CHAR_INDEX].length||1),u<0)return[l,d];l++}return[l,0]},o.prototype.translateBufferLineToString=function(l,u,f,c){f===void 0&&(f=0);var h=this.lines.get(l);return h?h.translateToString(u,f,c):""},o.prototype.getWrappedRangeForLine=function(l){for(var u=l,f=l;u>0&&this.lines.get(u).isWrapped;)u--;for(;f+1<this.lines.length&&this.lines.get(f+1).isWrapped;)f++;return{first:u,last:f}},o.prototype.setupTabStops=function(l){for(l!=null?this.tabs[l]||(l=this.prevStop(l)):(this.tabs={},l=0);l<this._cols;l+=this._terminal.options.tabStopWidth)this.tabs[l]=!0},o.prototype.prevStop=function(l){for(l==null&&(l=this.x);!this.tabs[--l]&&l>0;);return l>=this._cols?this._cols-1:l<0?0:l},o.prototype.nextStop=function(l){for(l==null&&(l=this.x);!this.tabs[++l]&&l<this._cols;);return l>=this._cols?this._cols-1:l<0?0:l},o.prototype.addMarker=function(l){var u=this,f=new i.Marker(l);return this.markers.push(f),f.register(this.lines.onTrim(function(c){f.line-=c,f.line<0&&f.dispose()})),f.register(this.lines.onInsert(function(c){f.line>=c.index&&(f.line+=c.amount)})),f.register(this.lines.onDelete(function(c){f.line>=c.index&&f.line<c.index+c.amount&&f.dispose(),f.line>c.index&&(f.line-=c.amount)})),f.register(f.onDispose(function(){return u._removeMarker(f)})),f},o.prototype._removeMarker=function(l){this.markers.splice(this.markers.indexOf(l),1)},o.prototype.iterator=function(l,u,f,c,h){return new a(this,l,u,f,c,h)},o}();e.Buffer=s;var a=function(){function o(l,u,f,c,h,d){f===void 0&&(f=0),c===void 0&&(c=l.lines.length),h===void 0&&(h=0),d===void 0&&(d=0),this._buffer=l,this._trimRight=u,this._startIndex=f,this._endIndex=c,this._startOverscan=h,this._endOverscan=d,this._startIndex<0&&(this._startIndex=0),this._endIndex>this._buffer.lines.length&&(this._endIndex=this._buffer.lines.length),this._current=this._startIndex}return o.prototype.hasNext=function(){return this._current<this._endIndex},o.prototype.next=function(){var l=this._buffer.getWrappedRangeForLine(this._current);l.first<this._startIndex-this._startOverscan&&(l.first=this._startIndex-this._startOverscan),l.last>this._endIndex+this._endOverscan&&(l.last=this._endIndex+this._endOverscan),l.first=Math.max(l.first,0),l.last=Math.min(l.last,this._buffer.lines.length);for(var u="",f=l.first;f<=l.last;++f)u+=this._buffer.translateBufferLineToString(f,this._trimRight);return this._current=l.last+1,{range:l,content:u}},o}();e.BufferStringIterator=a}(Fu)),Fu}var $0;function I4(){if($0)return Ga;$0=1,Object.defineProperty(Ga,"__esModule",{value:!0});var e=Bg(),t=Jn(),r=function(){function n(i){this._terminal=i,this._onBufferActivate=new t.EventEmitter2,this._normal=new e.Buffer(this._terminal,!0),this._normal.fillViewportRows(),this._alt=new e.Buffer(this._terminal,!1),this._activeBuffer=this._normal,this.setupTabStops()}return Object.defineProperty(n.prototype,"onBufferActivate",{get:function(){return this._onBufferActivate.event},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"alt",{get:function(){return this._alt},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"active",{get:function(){return this._activeBuffer},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"normal",{get:function(){return this._normal},enumerable:!0,configurable:!0}),n.prototype.activateNormalBuffer=function(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))},n.prototype.activateAltBuffer=function(i){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(i),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))},n.prototype.resize=function(i,s){this._normal.resize(i,s),this._alt.resize(i,s)},n.prototype.setupTabStops=function(i){this._normal.setupTabStops(i),this._alt.setupTabStops(i)},n}();return Ga.BufferSet=r,Ga}var el={},W0;function F4(){if(W0)return el;W0=1,Object.defineProperty(el,"__esModule",{value:!0});var e=function(){function t(r,n,i){this._textarea=r,this._compositionView=n,this._terminal=i,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:null,end:null}}return t.prototype.compositionstart=function(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._compositionView.classList.add("active")},t.prototype.compositionupdate=function(r){var n=this;this._compositionView.textContent=r.data,this.updateCompositionElements(),setTimeout(function(){n._compositionPosition.end=n._textarea.value.length},0)},t.prototype.compositionend=function(){this._finalizeComposition(!0)},t.prototype.keydown=function(r){if(this._isComposing||this._isSendingComposition){if(r.keyCode===229)return!1;if(r.keyCode===16||r.keyCode===17||r.keyCode===18)return!1;this._finalizeComposition(!1)}return r.keyCode===229?(this._handleAnyTextareaChanges(),!1):!0},t.prototype._finalizeComposition=function(r){var n=this;if(this._compositionView.classList.remove("active"),this._isComposing=!1,this._clearTextareaPosition(),r){var s={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(function(){if(n._isSendingComposition){n._isSendingComposition=!1;var a=void 0;n._isComposing?a=n._textarea.value.substring(s.start,s.end):a=n._textarea.value.substring(s.start),n._terminal.handler(a)}},0)}else{this._isSendingComposition=!1;var i=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._terminal.handler(i)}},t.prototype._handleAnyTextareaChanges=function(){var r=this,n=this._textarea.value;setTimeout(function(){if(!r._isComposing){var i=r._textarea.value,s=i.replace(n,"");s.length>0&&r._terminal.handler(s)}},0)},t.prototype.updateCompositionElements=function(r){var n=this;if(this._isComposing){if(this._terminal.buffer.isCursorInViewport){var i=Math.ceil(this._terminal.charMeasure.height*this._terminal.options.lineHeight),s=this._terminal.buffer.y*i,a=this._terminal.buffer.x*this._terminal.charMeasure.width;this._compositionView.style.left=a+"px",this._compositionView.style.top=s+"px",this._compositionView.style.height=i+"px",this._compositionView.style.lineHeight=i+"px",this._compositionView.style.fontFamily=this._terminal.options.fontFamily,this._compositionView.style.fontSize=this._terminal.options.fontSize+"px";var o=this._compositionView.getBoundingClientRect();this._textarea.style.left=a+"px",this._textarea.style.top=s+"px",this._textarea.style.width=o.width+"px",this._textarea.style.height=o.height+"px",this._textarea.style.lineHeight=o.height+"px"}r||setTimeout(function(){return n.updateCompositionElements(!0)},0)}},t.prototype._clearTextareaPosition=function(){this._textarea.style.left="",this._textarea.style.top=""},t}();return el.CompositionHelper=e,el}var bs={},K0;function D4(){if(K0)return bs;K0=1;var e=bs&&bs.__extends||function(){var n=function(i,s){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var l in o)o.hasOwnProperty(l)&&(a[l]=o[l])},n(i,s)};return function(i,s){n(i,s);function a(){this.constructor=i}i.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)}}();Object.defineProperty(bs,"__esModule",{value:!0});var t=dn(),r=function(n){e(i,n);function i(){var s=n.call(this)||this;return s._events=s._events||{},s}return i.prototype.on=function(s,a){this._events[s]=this._events[s]||[],this._events[s].push(a)},i.prototype.addDisposableListener=function(s,a){var o=this;this.on(s,a);var l=!1;return{dispose:function(){l||(o.off(s,a),l=!0)}}},i.prototype.off=function(s,a){if(this._events[s]){for(var o=this._events[s],l=o.length;l--;)if(o[l]===a){o.splice(l,1);return}}},i.prototype.removeAllListeners=function(s){this._events[s]&&delete this._events[s]},i.prototype.emit=function(s){for(var a=[],o=1;o<arguments.length;o++)a[o-1]=arguments[o];if(this._events[s])for(var l=this._events[s],u=0;u<l.length;u++)l[u].apply(this,a)},i.prototype.emitMayRemoveListeners=function(s){for(var a=[],o=1;o<arguments.length;o++)a[o-1]=arguments[o];if(this._events[s])for(var l=this._events[s],u=l.length,f=0;f<l.length;f++)l[f].apply(this,a),f-=u-l.length,u=l.length},i.prototype.listeners=function(s){return this._events[s]||[]},i.prototype.dispose=function(){n.prototype.dispose.call(this),this._events={}},i}(t.Disposable);return bs.EventEmitter=r,bs}var ws={},tl={},Y0;function Ia(){if(Y0)return tl;Y0=1,Object.defineProperty(tl,"__esModule",{value:!0});function e(t,r,n,i){return t.addEventListener(r,n,i),{dispose:function(){n&&t.removeEventListener(r,n,i)}}}return tl.addDisposableDomListener=e,tl}var G0;function H4(){if(G0)return ws;G0=1;var e=ws&&ws.__extends||function(){var s=function(a,o){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,u){l.__proto__=u}||function(l,u){for(var f in u)u.hasOwnProperty(f)&&(l[f]=u[f])},s(a,o)};return function(a,o){s(a,o);function l(){this.constructor=a}a.prototype=o===null?Object.create(o):(l.prototype=o.prototype,new l)}}();Object.defineProperty(ws,"__esModule",{value:!0});var t=dn(),r=Ia(),n=15,i=function(s){e(a,s);function a(o,l,u,f,c){var h=s.call(this)||this;return h._terminal=o,h._viewportElement=l,h._scrollArea=u,h._charMeasure=f,h._dimensions=c,h.scrollBarWidth=0,h._currentRowHeight=0,h._lastRecordedBufferLength=0,h._lastRecordedViewportHeight=0,h._lastRecordedBufferHeight=0,h._lastScrollTop=0,h._wheelPartialScroll=0,h._refreshAnimationFrame=null,h._ignoreNextScrollEvent=!1,h.scrollBarWidth=h._viewportElement.offsetWidth-h._scrollArea.offsetWidth||n,h.register(r.addDisposableDomListener(h._viewportElement,"scroll",h._onScroll.bind(h))),setTimeout(function(){return h.syncScrollArea()},0),h}return a.prototype.onDimensionsChance=function(o){this._dimensions=o},a.prototype.onThemeChange=function(o){this._viewportElement.style.backgroundColor=o.background.css},a.prototype._refresh=function(){var o=this;this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=requestAnimationFrame(function(){return o._innerRefresh()}))},a.prototype._innerRefresh=function(){if(this._charMeasure.height>0){this._currentRowHeight=this._dimensions.scaledCellHeight/window.devicePixelRatio,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;var o=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._dimensions.canvasHeight);this._lastRecordedBufferHeight!==o&&(this._lastRecordedBufferHeight=o,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}var l=this._terminal.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==l&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=l),this._refreshAnimationFrame=null},a.prototype.syncScrollArea=function(){if(this._lastRecordedBufferLength!==this._terminal.buffer.lines.length){this._lastRecordedBufferLength=this._terminal.buffer.lines.length,this._refresh();return}if(this._lastRecordedViewportHeight!==this._dimensions.canvasHeight){this._refresh();return}var o=this._terminal.buffer.ydisp*this._currentRowHeight;if(this._lastScrollTop!==o){this._refresh();return}if(this._lastScrollTop!==this._viewportElement.scrollTop){this._refresh();return}if(this._dimensions.scaledCellHeight/window.devicePixelRatio!==this._currentRowHeight){this._refresh();return}},a.prototype._onScroll=function(o){if(this._lastScrollTop=this._viewportElement.scrollTop,!!this._viewportElement.offsetParent){if(this._ignoreNextScrollEvent){this._ignoreNextScrollEvent=!1;return}var l=Math.round(this._lastScrollTop/this._currentRowHeight),u=l-this._terminal.buffer.ydisp;this._terminal.scrollLines(u,!0)}},a.prototype.onWheel=function(o){var l=this._getPixelsScrolled(o);l!==0&&(this._viewportElement.scrollTop+=l,o.preventDefault())},a.prototype._getPixelsScrolled=function(o){if(o.deltaY===0)return 0;var l=o.deltaY;return o.deltaMode===WheelEvent.DOM_DELTA_LINE?l*=this._currentRowHeight:o.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(l*=this._currentRowHeight*this._terminal.rows),l},a.prototype.getLinesScrolled=function(o){if(o.deltaY===0)return 0;var l=o.deltaY;return o.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(l/=this._currentRowHeight+0,this._wheelPartialScroll+=l,l=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):o.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(l*=this._terminal.rows),l},a.prototype.onTouchStart=function(o){this._lastTouchY=o.touches[0].pageY},a.prototype.onTouchMove=function(o){var l=this._lastTouchY-o.touches[0].pageY;this._lastTouchY=o.touches[0].pageY,l!==0&&(this._viewportElement.scrollTop+=l,o.preventDefault())},a}(t.Disposable);return ws.Viewport=i,ws}var Hn={},X0;function P4(){if(X0)return Hn;X0=1,Object.defineProperty(Hn,"__esModule",{value:!0});function e(a){return a.replace(/\r?\n/g,"\r")}Hn.prepareTextForTerminal=e;function t(a,o){return o?"\x1B[200~"+a+"\x1B[201~":a}Hn.bracketTextForPaste=t;function r(a,o,l){o.browser.isMSIE?window.clipboardData.setData("Text",l.selectionText):a.clipboardData.setData("text/plain",l.selectionText),a.preventDefault()}Hn.copyHandler=r;function n(a,o){a.stopPropagation();var l,u=function(f){f=e(f),f=t(f,o.bracketedPasteMode),o.handler(f),o.textarea.value="",o.emit("paste",f),o.cancel(a)};o.browser.isMSIE?window.clipboardData&&(l=window.clipboardData.getData("Text"),u(l)):a.clipboardData&&(l=a.clipboardData.getData("text/plain"),u(l))}Hn.pasteHandler=n;function i(a,o){var l=o.screenElement.getBoundingClientRect(),u=a.clientX-l.left-10,f=a.clientY-l.top-10;o.textarea.style.position="absolute",o.textarea.style.width="20px",o.textarea.style.height="20px",o.textarea.style.left=u+"px",o.textarea.style.top=f+"px",o.textarea.style.zIndex="1000",o.textarea.focus(),setTimeout(function(){o.textarea.style.position=null,o.textarea.style.width=null,o.textarea.style.height=null,o.textarea.style.left=null,o.textarea.style.top=null,o.textarea.style.zIndex=null},200)}Hn.moveTextAreaUnderMouseCursor=i;function s(a,o,l,u){i(a,o),u&&!l.isClickInSelection(a)&&l.selectWordAtCursor(a),o.textarea.value=l.selectionText,o.textarea.select()}return Hn.rightClickHandler=s,Hn}var Du={},Z0;function Nc(){return Z0||(Z0=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.NUL="\0",t.SOH="",t.STX="",t.ETX="",t.EOT="",t.ENQ="",t.ACK="",t.BEL="\x07",t.BS="\b",t.HT="	",t.LF=`
`,t.VT="\v",t.FF="\f",t.CR="\r",t.SO="",t.SI="",t.DLE="",t.DC1="",t.DC2="",t.DC3="",t.DC4="",t.NAK="",t.SYN="",t.ETB="",t.CAN="",t.EM="",t.SUB="",t.ESC="\x1B",t.FS="",t.GS="",t.RS="",t.US="",t.SP=" ",t.DEL=""}(e.C0||(e.C0={})),function(t){t.PAD="",t.HOP="",t.BPH="",t.NBH="",t.IND="",t.NEL="",t.SSA="",t.ESA="",t.HTS="",t.HTJ="",t.VTS="",t.PLD="",t.PLU="",t.RI="",t.SS2="",t.SS3="",t.DCS="",t.PU1="",t.PU2="",t.STS="",t.CCH="",t.MW="",t.SPA="",t.EPA="",t.SOS="",t.SGCI="",t.SCI="",t.CSI="",t.ST="",t.OSC="",t.PM="",t.APC=""}(e.C1||(e.C1={}))}(Du)),Du}var Ss={},Hu={},Q0;function j4(){return Q0||(Q0=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CHARSETS={},e.DEFAULT_CHARSET=e.CHARSETS.B,e.CHARSETS[0]={"`":"◆",a:"▒",b:"	",c:"\f",d:"\r",e:`
`,f:"°",g:"±",h:"␤",i:"\v",j:"┘",k:"┐",l:"┌",m:"└",n:"┼",o:"⎺",p:"⎻",q:"─",r:"⎼",s:"⎽",t:"├",u:"┤",v:"┴",w:"┬",x:"│",y:"≤",z:"≥","{":"π","|":"≠","}":"£","~":"·"},e.CHARSETS.A={"#":"£"},e.CHARSETS.B=null,e.CHARSETS[4]={"#":"£","@":"¾","[":"ij","\\":"½","]":"|","{":"¨","|":"f","}":"¼","~":"´"},e.CHARSETS.C=e.CHARSETS[5]={"[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},e.CHARSETS.R={"#":"£","@":"à","[":"°","\\":"ç","]":"§","{":"é","|":"ù","}":"è","~":"¨"},e.CHARSETS.Q={"@":"à","[":"â","\\":"ç","]":"ê","^":"î","`":"ô","{":"é","|":"ù","}":"è","~":"û"},e.CHARSETS.K={"@":"§","[":"Ä","\\":"Ö","]":"Ü","{":"ä","|":"ö","}":"ü","~":"ß"},e.CHARSETS.Y={"#":"£","@":"§","[":"°","\\":"ç","]":"é","`":"ù","{":"à","|":"ò","}":"è","~":"ì"},e.CHARSETS.E=e.CHARSETS[6]={"@":"Ä","[":"Æ","\\":"Ø","]":"Å","^":"Ü","`":"ä","{":"æ","|":"ø","}":"å","~":"ü"},e.CHARSETS.Z={"#":"£","@":"§","[":"¡","\\":"Ñ","]":"¿","{":"°","|":"ñ","}":"ç"},e.CHARSETS.H=e.CHARSETS[7]={"@":"É","[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},e.CHARSETS["="]={"#":"ù","@":"à","[":"é","\\":"ç","]":"ê","^":"î",_:"è","`":"ô","{":"ä","|":"ö","}":"ü","~":"û"}}(Hu)),Hu}var Pu={},Cs={},J0;function Og(){if(J0)return Cs;J0=1,Object.defineProperty(Cs,"__esModule",{value:!0});function e(n,i,s,a){return n.fill?n.fill(i,s,a):t(n,i,s,a)}Cs.fill=e;function t(n,i,s,a){if(s===void 0&&(s=0),a===void 0&&(a=n.length),s>=n.length)return n;s=(n.length+s)%n.length,a>=n.length?a=n.length:a=(n.length+a)%n.length;for(var o=s;o<a;++o)n[o]=i;return n}Cs.fillFallback=t;function r(n,i){var s=new n.constructor(n.length+i.length);return s.set(n),s.set(i,n.length),s}return Cs.concat=r,Cs}var e1;function Ig(){return e1||(e1=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Og();e.wcwidth=function(n){var i=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],s=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];function a(c,h){var d=0,p=h.length-1,v;if(c<h[0][0]||c>h[p][1])return!1;for(;p>=d;)if(v=d+p>>1,c>h[v][1])d=v+1;else if(c<h[v][0])p=v-1;else return!0;return!1}function o(c){return a(c,s)?0:c>=131072&&c<=196605||c>=196608&&c<=262141?2:1}var l=n.control|0,u=new Uint8Array(65536);t.fill(u,1),u[0]=n.nul,t.fill(u,n.control,1,32),t.fill(u,n.control,127,160),t.fill(u,2,4352,4448),u[9001]=2,u[9002]=2,t.fill(u,2,11904,42192),u[12351]=1,t.fill(u,2,44032,55204),t.fill(u,2,63744,64256),t.fill(u,2,65040,65050),t.fill(u,2,65072,65136),t.fill(u,2,65280,65377),t.fill(u,2,65504,65511);for(var f=0;f<i.length;++f)t.fill(u,0,i[f][0],i[f][1]+1);return function(c){return c<32?l|0:c<127?1:c<65536?u[c]:o(c)}}({nul:0,control:0});function r(n){for(var i=0,s=n.length,a=0;a<s;++a){var o=n.charCodeAt(a);if(55296<=o&&o<=56319){if(++a>=s)return i+e.wcwidth(o);var l=n.charCodeAt(a);56320<=l&&l<=57343?o=(o-55296)*1024+l-56320+65536:i+=e.wcwidth(l)}i+=e.wcwidth(o)}return i}e.getStringCellWidth=r}(Pu)),Pu}var Ao={},t1;function N4(){return t1||(t1=1,function(e){var t=Ao&&Ao.__extends||function(){var c=function(h,d){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,v){p.__proto__=v}||function(p,v){for(var _ in v)v.hasOwnProperty(_)&&(p[_]=v[_])},c(h,d)};return function(h,d){c(h,d);function p(){this.constructor=h}h.prototype=d===null?Object.create(d):(p.prototype=d.prototype,new p)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=dn(),n=Jh();function i(c,h){for(var d=h-c,p=new Array(d);d--;)p[d]=--h;return p}var s=function(){function c(h){this.table=typeof Uint8Array>"u"?new Array(h):new Uint8Array(h)}return c.prototype.add=function(h,d,p,v){this.table[d<<8|h]=(p|0)<<4|(v===void 0?d:v)},c.prototype.addMany=function(h,d,p,v){for(var _=0;_<h.length;_++)this.add(h[_],d,p,v)},c}();e.TransitionTable=s;var a=i(32,127),o=i(0,24);o.push(25),o.push.apply(o,i(28,32));var l=160;e.VT500_TRANSITION_TABLE=function(){var c=new s(4095),h=i(0,14),d;for(d in h)for(var p=0;p<=l;++p)c.add(p,d,1,0);c.addMany(a,0,2,0);for(d in h)c.addMany([24,26,153,154],d,3,0),c.addMany(i(128,144),d,3,0),c.addMany(i(144,152),d,3,0),c.add(156,d,0,0),c.add(27,d,11,1),c.add(157,d,4,8),c.addMany([152,158,159],d,0,7),c.add(155,d,11,3),c.add(144,d,11,9);return c.addMany(o,0,3,0),c.addMany(o,1,3,1),c.add(127,1,0,1),c.addMany(o,8,0,8),c.addMany(o,3,3,3),c.add(127,3,0,3),c.addMany(o,4,3,4),c.add(127,4,0,4),c.addMany(o,6,3,6),c.addMany(o,5,3,5),c.add(127,5,0,5),c.addMany(o,2,3,2),c.add(127,2,0,2),c.add(93,1,4,8),c.addMany(a,8,5,8),c.add(127,8,5,8),c.addMany([156,27,24,26,7],8,6,0),c.addMany(i(28,32),8,0,8),c.addMany([88,94,95],1,0,7),c.addMany(a,7,0,7),c.addMany(o,7,0,7),c.add(156,7,0,0),c.add(127,7,0,7),c.add(91,1,11,3),c.addMany(i(64,127),3,7,0),c.addMany(i(48,58),3,8,4),c.add(59,3,8,4),c.addMany([60,61,62,63],3,9,4),c.addMany(i(48,58),4,8,4),c.add(59,4,8,4),c.addMany(i(64,127),4,7,0),c.addMany([58,60,61,62,63],4,0,6),c.addMany(i(32,64),6,0,6),c.add(127,6,0,6),c.addMany(i(64,127),6,0,0),c.add(58,3,0,6),c.addMany(i(32,48),3,9,5),c.addMany(i(32,48),5,9,5),c.addMany(i(48,64),5,0,6),c.addMany(i(64,127),5,7,0),c.addMany(i(32,48),4,9,5),c.addMany(i(32,48),1,9,2),c.addMany(i(32,48),2,9,2),c.addMany(i(48,127),2,10,0),c.addMany(i(48,80),1,10,0),c.addMany(i(81,88),1,10,0),c.addMany([89,90,92],1,10,0),c.addMany(i(96,127),1,10,0),c.add(80,1,11,9),c.addMany(o,9,0,9),c.add(127,9,0,9),c.addMany(i(28,32),9,0,9),c.addMany(i(32,48),9,9,12),c.add(58,9,0,11),c.addMany(i(48,58),9,8,10),c.add(59,9,8,10),c.addMany([60,61,62,63],9,9,10),c.addMany(o,11,0,11),c.addMany(i(32,128),11,0,11),c.addMany(i(28,32),11,0,11),c.addMany(o,10,0,10),c.add(127,10,0,10),c.addMany(i(28,32),10,0,10),c.addMany(i(48,58),10,8,10),c.add(59,10,8,10),c.addMany([58,60,61,62,63],10,0,11),c.addMany(i(32,48),10,9,12),c.addMany(o,12,0,12),c.add(127,12,0,12),c.addMany(i(28,32),12,0,12),c.addMany(i(32,48),12,9,12),c.addMany(i(48,64),12,0,11),c.addMany(i(64,127),12,12,13),c.addMany(i(64,127),10,12,13),c.addMany(i(64,127),9,12,13),c.addMany(o,13,13,13),c.addMany(a,13,13,13),c.add(127,13,0,13),c.addMany([27,156],13,14,0),c.add(l,8,5,8),c}();var u=function(){function c(){}return c.prototype.hook=function(h,d,p){},c.prototype.put=function(h,d,p){},c.prototype.unhook=function(){},c}(),f=function(c){t(h,c);function h(d){d===void 0&&(d=e.VT500_TRANSITION_TABLE);var p=c.call(this)||this;return p.TRANSITIONS=d,p.initialState=0,p.currentState=p.initialState,p._osc="",p._params=[0],p._collect="",p._printHandlerFb=function(v,_,m){},p._executeHandlerFb=function(v){},p._csiHandlerFb=function(v,_,m){},p._escHandlerFb=function(v,_){},p._oscHandlerFb=function(v,_){},p._dcsHandlerFb=new u,p._errorHandlerFb=function(v){return v},p._printHandler=p._printHandlerFb,p._executeHandlers=Object.create(null),p._csiHandlers=Object.create(null),p._escHandlers=Object.create(null),p._oscHandlers=Object.create(null),p._dcsHandlers=Object.create(null),p._activeDcsHandler=null,p._errorHandler=p._errorHandlerFb,p.setEscHandler("\\",function(){}),p}return h.prototype.dispose=function(){this._printHandlerFb=null,this._executeHandlerFb=null,this._csiHandlerFb=null,this._escHandlerFb=null,this._oscHandlerFb=null,this._dcsHandlerFb=null,this._errorHandlerFb=null,this._printHandler=null,this._executeHandlers=null,this._escHandlers=null,this._csiHandlers=null,this._oscHandlers=null,this._dcsHandlers=null,this._activeDcsHandler=null,this._errorHandler=null},h.prototype.setPrintHandler=function(d){this._printHandler=d},h.prototype.clearPrintHandler=function(){this._printHandler=this._printHandlerFb},h.prototype.setExecuteHandler=function(d,p){this._executeHandlers[d.charCodeAt(0)]=p},h.prototype.clearExecuteHandler=function(d){this._executeHandlers[d.charCodeAt(0)]&&delete this._executeHandlers[d.charCodeAt(0)]},h.prototype.setExecuteHandlerFallback=function(d){this._executeHandlerFb=d},h.prototype.addCsiHandler=function(d,p){var v=d.charCodeAt(0);this._csiHandlers[v]===void 0&&(this._csiHandlers[v]=[]);var _=this._csiHandlers[v];return _.push(p),{dispose:function(){var m=_.indexOf(p);m!==-1&&_.splice(m,1)}}},h.prototype.setCsiHandler=function(d,p){this._csiHandlers[d.charCodeAt(0)]=[p]},h.prototype.clearCsiHandler=function(d){this._csiHandlers[d.charCodeAt(0)]&&delete this._csiHandlers[d.charCodeAt(0)]},h.prototype.setCsiHandlerFallback=function(d){this._csiHandlerFb=d},h.prototype.setEscHandler=function(d,p){this._escHandlers[d]=p},h.prototype.clearEscHandler=function(d){this._escHandlers[d]&&delete this._escHandlers[d]},h.prototype.setEscHandlerFallback=function(d){this._escHandlerFb=d},h.prototype.addOscHandler=function(d,p){this._oscHandlers[d]===void 0&&(this._oscHandlers[d]=[]);var v=this._oscHandlers[d];return v.push(p),{dispose:function(){var _=v.indexOf(p);_!==-1&&v.splice(_,1)}}},h.prototype.setOscHandler=function(d,p){this._oscHandlers[d]=[p]},h.prototype.clearOscHandler=function(d){this._oscHandlers[d]&&delete this._oscHandlers[d]},h.prototype.setOscHandlerFallback=function(d){this._oscHandlerFb=d},h.prototype.setDcsHandler=function(d,p){this._dcsHandlers[d]=p},h.prototype.clearDcsHandler=function(d){this._dcsHandlers[d]&&delete this._dcsHandlers[d]},h.prototype.setDcsHandlerFallback=function(d){this._dcsHandlerFb=d},h.prototype.setErrorHandler=function(d){this._errorHandler=d},h.prototype.clearErrorHandler=function(){this._errorHandler=this._errorHandlerFb},h.prototype.reset=function(){this.currentState=this.initialState,this._osc="",this._params=[0],this._collect="",this._activeDcsHandler=null},h.prototype.parse=function(d,p){for(var v=0,_=0,m=!1,g=this.currentState,x=-1,L=-1,y=this._osc,M=this._collect,F=this._params,D=this.TRANSITIONS.table,H=this._activeDcsHandler,b=null,R=0;R<p;++R){if(v=d[R],g===0&&v>31&&v<128){x=~x?x:R;do R++;while(R<p&&d[R]>31&&d[R]<128);R--;continue}if(g===4&&v>47&&v<57){F[F.length-1]=F[F.length-1]*10+v-48;continue}switch(_=D[g<<8|(v<160?v:l)],_>>4){case 2:x=~x?x:R;break;case 3:~x&&(this._printHandler(d,x,R),x=-1),b=this._executeHandlers[v],b?b():this._executeHandlerFb(v);break;case 0:~x?(this._printHandler(d,x,R),x=-1):~L&&(H.put(d,L,R),L=-1);break;case 1:if(v>159)switch(g){case 0:x=~x?x:R;break;case 6:_|=6;break;case 11:_|=11;break;case 13:L=~L?L:R,_|=13;break;default:m=!0}else m=!0;if(m){var A=this._errorHandler({position:R,code:v,currentState:g,print:x,dcs:L,osc:y,collect:M,params:F,abort:!1});if(A.abort)return;m=!1}break;case 7:for(var k=this._csiHandlers[v],O=k?k.length-1:-1;O>=0&&k[O](F,M)===!1;O--);O<0&&this._csiHandlerFb(M,F,v);break;case 8:v===59?F.push(0):F[F.length-1]=F[F.length-1]*10+v-48;break;case 9:M+=String.fromCharCode(v);break;case 10:b=this._escHandlers[M+String.fromCharCode(v)],b?b(M,v):this._escHandlerFb(M,v);break;case 11:~x&&(this._printHandler(d,x,R),x=-1),y="",F=[0],M="",L=-1;break;case 12:H=this._dcsHandlers[M+String.fromCharCode(v)],H||(H=this._dcsHandlerFb),H.hook(M,F,v);break;case 13:L=~L?L:R;break;case 14:H&&(~L&&H.put(d,L,R),H.unhook(),H=null),v===27&&(_|=1),y="",F=[0],M="",L=-1;break;case 4:~x&&(this._printHandler(d,x,R),x=-1),y="";break;case 5:for(var B=R+1;;B++)if(B>=p||(v=d[B])<32||v>127&&v<=159){y+=n.utf32ToString(d,R,B),R=B-1;break}break;case 6:if(y&&v!==24&&v!==26){var $=y.indexOf(";");if($===-1)this._oscHandlerFb(-1,y);else{for(var Q=parseInt(y.substring(0,$)),X=y.substring($+1),oe=this._oscHandlers[Q],w=oe?oe.length-1:-1;w>=0&&oe[w](X)===!1;w--);w<0&&this._oscHandlerFb(Q,X)}}v===27&&(_|=1),y="",F=[0],M="",L=-1;break}g=_&15}g===0&&~x?this._printHandler(d,x,p):g===13&&~L&&H&&H.put(d,L,p),this._osc=y,this._collect=M,this._params=F,this._activeDcsHandler=H,this.currentState=g},h}(r.Disposable);e.EscapeSequenceParser=f}(Ao)),Ao}var r1;function U4(){if(r1)return Ss;r1=1;var e=Ss&&Ss.__extends||function(){var d=function(p,v){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,m){_.__proto__=m}||function(_,m){for(var g in m)m.hasOwnProperty(g)&&(_[g]=m[g])},d(p,v)};return function(p,v){d(p,v);function _(){this.constructor=p}p.prototype=v===null?Object.create(v):(_.prototype=v.prototype,new _)}}();Object.defineProperty(Ss,"__esModule",{value:!0});var t=Nc(),r=j4(),n=Ig(),i=N4(),s=dn(),a=Og(),o=Jh(),l=In(),u=Jn(),f={"(":0,")":1,"*":2,"+":3,"-":1,".":2},c=function(){function d(p){this._terminal=p,this._data=new Uint32Array(0)}return d.prototype.hook=function(p,v,_){this._data=new Uint32Array(0)},d.prototype.put=function(p,v,_){this._data=a.concat(this._data,p.subarray(v,_))},d.prototype.unhook=function(){var p=o.utf32ToString(this._data);switch(this._data=new Uint32Array(0),p){case'"q':return this._terminal.handler(t.C0.ESC+'P1$r0"q'+t.C0.ESC+"\\");case'"p':return this._terminal.handler(t.C0.ESC+'P1$r61"p'+t.C0.ESC+"\\");case"r":var v=""+(this._terminal.buffer.scrollTop+1)+";"+(this._terminal.buffer.scrollBottom+1)+"r";return this._terminal.handler(t.C0.ESC+"P1$r"+v+t.C0.ESC+"\\");case"m":return this._terminal.handler(t.C0.ESC+"P1$r0m"+t.C0.ESC+"\\");case" q":var _={block:2,underline:4,bar:6},m=_[this._terminal.getOption("cursorStyle")];return m-=this._terminal.getOption("cursorBlink"),this._terminal.handler(t.C0.ESC+"P1$r"+m+" q"+t.C0.ESC+"\\");default:this._terminal.error("Unknown DCS $q %s",p),this._terminal.handler(t.C0.ESC+"P0$r"+t.C0.ESC+"\\")}},d}(),h=function(d){e(p,d);function p(v,_){_===void 0&&(_=new i.EscapeSequenceParser);var m=d.call(this)||this;m._terminal=v,m._parser=_,m._parseBuffer=new Uint32Array(4096),m._stringDecoder=new o.StringToUtf32,m._utf8Decoder=new o.Utf8ToUtf32,m._workCell=new l.CellData,m._onCursorMove=new u.EventEmitter2,m._onData=new u.EventEmitter2,m._onLineFeed=new u.EventEmitter2,m._onScroll=new u.EventEmitter2,m.register(m._parser),m._parser.setCsiHandlerFallback(function(y,M,F){m._terminal.error("Unknown CSI code: ",{collect:y,params:M,flag:String.fromCharCode(F)})}),m._parser.setEscHandlerFallback(function(y,M){m._terminal.error("Unknown ESC code: ",{collect:y,flag:String.fromCharCode(M)})}),m._parser.setExecuteHandlerFallback(function(y){m._terminal.error("Unknown EXECUTE code: ",{code:y})}),m._parser.setOscHandlerFallback(function(y,M){m._terminal.error("Unknown OSC code: ",{identifier:y,data:M})}),m._parser.setPrintHandler(function(y,M,F){return m.print(y,M,F)}),m._parser.setCsiHandler("@",function(y,M){return m.insertChars(y)}),m._parser.setCsiHandler("A",function(y,M){return m.cursorUp(y)}),m._parser.setCsiHandler("B",function(y,M){return m.cursorDown(y)}),m._parser.setCsiHandler("C",function(y,M){return m.cursorForward(y)}),m._parser.setCsiHandler("D",function(y,M){return m.cursorBackward(y)}),m._parser.setCsiHandler("E",function(y,M){return m.cursorNextLine(y)}),m._parser.setCsiHandler("F",function(y,M){return m.cursorPrecedingLine(y)}),m._parser.setCsiHandler("G",function(y,M){return m.cursorCharAbsolute(y)}),m._parser.setCsiHandler("H",function(y,M){return m.cursorPosition(y)}),m._parser.setCsiHandler("I",function(y,M){return m.cursorForwardTab(y)}),m._parser.setCsiHandler("J",function(y,M){return m.eraseInDisplay(y)}),m._parser.setCsiHandler("K",function(y,M){return m.eraseInLine(y)}),m._parser.setCsiHandler("L",function(y,M){return m.insertLines(y)}),m._parser.setCsiHandler("M",function(y,M){return m.deleteLines(y)}),m._parser.setCsiHandler("P",function(y,M){return m.deleteChars(y)}),m._parser.setCsiHandler("S",function(y,M){return m.scrollUp(y)}),m._parser.setCsiHandler("T",function(y,M){return m.scrollDown(y,M)}),m._parser.setCsiHandler("X",function(y,M){return m.eraseChars(y)}),m._parser.setCsiHandler("Z",function(y,M){return m.cursorBackwardTab(y)}),m._parser.setCsiHandler("`",function(y,M){return m.charPosAbsolute(y)}),m._parser.setCsiHandler("a",function(y,M){return m.hPositionRelative(y)}),m._parser.setCsiHandler("b",function(y,M){return m.repeatPrecedingCharacter(y)}),m._parser.setCsiHandler("c",function(y,M){return m.sendDeviceAttributes(y,M)}),m._parser.setCsiHandler("d",function(y,M){return m.linePosAbsolute(y)}),m._parser.setCsiHandler("e",function(y,M){return m.vPositionRelative(y)}),m._parser.setCsiHandler("f",function(y,M){return m.hVPosition(y)}),m._parser.setCsiHandler("g",function(y,M){return m.tabClear(y)}),m._parser.setCsiHandler("h",function(y,M){return m.setMode(y,M)}),m._parser.setCsiHandler("l",function(y,M){return m.resetMode(y,M)}),m._parser.setCsiHandler("m",function(y,M){return m.charAttributes(y)}),m._parser.setCsiHandler("n",function(y,M){return m.deviceStatus(y,M)}),m._parser.setCsiHandler("p",function(y,M){return m.softReset(y,M)}),m._parser.setCsiHandler("q",function(y,M){return m.setCursorStyle(y,M)}),m._parser.setCsiHandler("r",function(y,M){return m.setScrollRegion(y,M)}),m._parser.setCsiHandler("s",function(y,M){return m.saveCursor(y)}),m._parser.setCsiHandler("u",function(y,M){return m.restoreCursor(y)}),m._parser.setExecuteHandler(t.C0.BEL,function(){return m.bell()}),m._parser.setExecuteHandler(t.C0.LF,function(){return m.lineFeed()}),m._parser.setExecuteHandler(t.C0.VT,function(){return m.lineFeed()}),m._parser.setExecuteHandler(t.C0.FF,function(){return m.lineFeed()}),m._parser.setExecuteHandler(t.C0.CR,function(){return m.carriageReturn()}),m._parser.setExecuteHandler(t.C0.BS,function(){return m.backspace()}),m._parser.setExecuteHandler(t.C0.HT,function(){return m.tab()}),m._parser.setExecuteHandler(t.C0.SO,function(){return m.shiftOut()}),m._parser.setExecuteHandler(t.C0.SI,function(){return m.shiftIn()}),m._parser.setExecuteHandler(t.C1.IND,function(){return m.index()}),m._parser.setExecuteHandler(t.C1.NEL,function(){return m.nextLine()}),m._parser.setExecuteHandler(t.C1.HTS,function(){return m.tabSet()}),m._parser.setOscHandler(0,function(y){return m.setTitle(y)}),m._parser.setOscHandler(2,function(y){return m.setTitle(y)}),m._parser.setEscHandler("7",function(){return m.saveCursor([])}),m._parser.setEscHandler("8",function(){return m.restoreCursor([])}),m._parser.setEscHandler("D",function(){return m.index()}),m._parser.setEscHandler("E",function(){return m.nextLine()}),m._parser.setEscHandler("H",function(){return m.tabSet()}),m._parser.setEscHandler("M",function(){return m.reverseIndex()}),m._parser.setEscHandler("=",function(){return m.keypadApplicationMode()}),m._parser.setEscHandler(">",function(){return m.keypadNumericMode()}),m._parser.setEscHandler("c",function(){return m.reset()}),m._parser.setEscHandler("n",function(){return m.setgLevel(2)}),m._parser.setEscHandler("o",function(){return m.setgLevel(3)}),m._parser.setEscHandler("|",function(){return m.setgLevel(3)}),m._parser.setEscHandler("}",function(){return m.setgLevel(2)}),m._parser.setEscHandler("~",function(){return m.setgLevel(1)}),m._parser.setEscHandler("%@",function(){return m.selectDefaultCharset()}),m._parser.setEscHandler("%G",function(){return m.selectDefaultCharset()});var g=function(y){x._parser.setEscHandler("("+y,function(){return m.selectCharset("("+y)}),x._parser.setEscHandler(")"+y,function(){return m.selectCharset(")"+y)}),x._parser.setEscHandler("*"+y,function(){return m.selectCharset("*"+y)}),x._parser.setEscHandler("+"+y,function(){return m.selectCharset("+"+y)}),x._parser.setEscHandler("-"+y,function(){return m.selectCharset("-"+y)}),x._parser.setEscHandler("."+y,function(){return m.selectCharset("."+y)}),x._parser.setEscHandler("/"+y,function(){return m.selectCharset("/"+y)})},x=this;for(var L in r.CHARSETS)g(L);return m._parser.setErrorHandler(function(y){return m._terminal.error("Parsing error: ",y),y}),m._parser.setDcsHandler("$q",new c(m._terminal)),m}return Object.defineProperty(p.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"onData",{get:function(){return this._onData.event},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!0,configurable:!0}),p.prototype.dispose=function(){d.prototype.dispose.call(this),this._terminal=null},p.prototype.parse=function(v){if(this._terminal){var _=this._terminal.buffer,m=_.x,g=_.y;this._terminal.debug&&this._terminal.log("data: "+v),this._parseBuffer.length<v.length&&(this._parseBuffer=new Uint32Array(v.length)),this._parser.parse(this._parseBuffer,this._stringDecoder.decode(v,this._parseBuffer)),_=this._terminal.buffer,(_.x!==m||_.y!==g)&&this._onCursorMove.fire()}},p.prototype.parseUtf8=function(v){if(this._terminal){var _=this._terminal.buffer,m=_.x,g=_.y;this._terminal.debug&&this._terminal.log("data: "+v),this._parseBuffer.length<v.length&&(this._parseBuffer=new Uint32Array(v.length)),this._parser.parse(this._parseBuffer,this._utf8Decoder.decode(v,this._parseBuffer)),_=this._terminal.buffer,(_.x!==m||_.y!==g)&&this._terminal.emit("cursormove")}},p.prototype.print=function(v,_,m){var g,x,L=this._terminal.buffer,y=this._terminal.charset,M=this._terminal.options.screenReaderMode,F=this._terminal.cols,D=this._terminal.wraparoundMode,H=this._terminal.insertMode,b=this._terminal.curAttrData,R=L.lines.get(L.y+L.ybase);this._terminal.updateRange(L.y);for(var A=_;A<m;++A){if(g=v[A],x=n.wcwidth(g),g<127&&y){var k=y[String.fromCharCode(g)];k&&(g=k.charCodeAt(0))}if(M&&this._terminal.emit("a11y.char",o.stringFromCodePoint(g)),!x&&L.x){R.getWidth(L.x-1)?R.addCodepointToCell(L.x-1,g):R.addCodepointToCell(L.x-2,g);continue}if(L.x+x-1>=F){if(D)L.x=0,L.y++,L.y>L.scrollBottom?(L.y--,this._terminal.scroll(!0)):L.lines.get(L.y).isWrapped=!0,R=L.lines.get(L.y+L.ybase);else if(x===2)continue}if(H&&(R.insertCells(L.x,x,L.getNullCell(b)),R.getWidth(F-1)===2&&R.setCellFromCodePoint(F-1,l.NULL_CELL_CODE,l.NULL_CELL_WIDTH,b.fg,b.bg)),R.setCellFromCodePoint(L.x++,g,x,b.fg,b.bg),x>0)for(;--x;)R.setCellFromCodePoint(L.x++,0,0,b.fg,b.bg)}this._terminal.updateRange(L.y)},p.prototype.addCsiHandler=function(v,_){return this._parser.addCsiHandler(v,_)},p.prototype.addOscHandler=function(v,_){return this._parser.addOscHandler(v,_)},p.prototype.bell=function(){this._terminal.bell()},p.prototype.lineFeed=function(){var v=this._terminal.buffer;this._terminal.options.convertEol&&(v.x=0),v.y++,v.y>v.scrollBottom&&(v.y--,this._terminal.scroll()),v.x>=this._terminal.cols&&v.x--,this._onLineFeed.fire()},p.prototype.carriageReturn=function(){this._terminal.buffer.x=0},p.prototype.backspace=function(){this._terminal.buffer.x>0&&this._terminal.buffer.x--},p.prototype.tab=function(){var v=this._terminal.buffer.x;this._terminal.buffer.x=this._terminal.buffer.nextStop(),this._terminal.options.screenReaderMode&&this._terminal.emit("a11y.tab",this._terminal.buffer.x-v)},p.prototype.shiftOut=function(){this._terminal.setgLevel(1)},p.prototype.shiftIn=function(){this._terminal.setgLevel(0)},p.prototype.insertChars=function(v){this._terminal.buffer.lines.get(this._terminal.buffer.y+this._terminal.buffer.ybase).insertCells(this._terminal.buffer.x,v[0]||1,this._terminal.buffer.getNullCell(this._terminal.eraseAttrData())),this._terminal.updateRange(this._terminal.buffer.y)},p.prototype.cursorUp=function(v){var _=v[0];_<1&&(_=1),this._terminal.buffer.y-=_,this._terminal.buffer.y<0&&(this._terminal.buffer.y=0)},p.prototype.cursorDown=function(v){var _=v[0];_<1&&(_=1),this._terminal.buffer.y+=_,this._terminal.buffer.y>=this._terminal.rows&&(this._terminal.buffer.y=this._terminal.rows-1),this._terminal.buffer.x>=this._terminal.cols&&this._terminal.buffer.x--},p.prototype.cursorForward=function(v){var _=v[0];_<1&&(_=1),this._terminal.buffer.x+=_,this._terminal.buffer.x>=this._terminal.cols&&(this._terminal.buffer.x=this._terminal.cols-1)},p.prototype.cursorBackward=function(v){var _=v[0];_<1&&(_=1),this._terminal.buffer.x>=this._terminal.cols&&this._terminal.buffer.x--,this._terminal.buffer.x-=_,this._terminal.buffer.x<0&&(this._terminal.buffer.x=0)},p.prototype.cursorNextLine=function(v){var _=v[0];_<1&&(_=1),this._terminal.buffer.y+=_,this._terminal.buffer.y>=this._terminal.rows&&(this._terminal.buffer.y=this._terminal.rows-1),this._terminal.buffer.x=0},p.prototype.cursorPrecedingLine=function(v){var _=v[0];_<1&&(_=1),this._terminal.buffer.y-=_,this._terminal.buffer.y<0&&(this._terminal.buffer.y=0),this._terminal.buffer.x=0},p.prototype.cursorCharAbsolute=function(v){var _=v[0];_<1&&(_=1),this._terminal.buffer.x=_-1},p.prototype.cursorPosition=function(v){var _,m=v[0]-1;v.length>=2?_=v[1]-1:_=0,m<0?m=0:m>=this._terminal.rows&&(m=this._terminal.rows-1),_<0?_=0:_>=this._terminal.cols&&(_=this._terminal.cols-1),this._terminal.buffer.x=_,this._terminal.buffer.y=m},p.prototype.cursorForwardTab=function(v){for(var _=v[0]||1;_--;)this._terminal.buffer.x=this._terminal.buffer.nextStop()},p.prototype._eraseInBufferLine=function(v,_,m,g){g===void 0&&(g=!1);var x=this._terminal.buffer.lines.get(this._terminal.buffer.ybase+v);x.replaceCells(_,m,this._terminal.buffer.getNullCell(this._terminal.eraseAttrData())),g&&(x.isWrapped=!1)},p.prototype._resetBufferLine=function(v){this._eraseInBufferLine(v,0,this._terminal.cols,!0)},p.prototype.eraseInDisplay=function(v){var _;switch(v[0]){case 0:for(_=this._terminal.buffer.y,this._terminal.updateRange(_),this._eraseInBufferLine(_++,this._terminal.buffer.x,this._terminal.cols,this._terminal.buffer.x===0);_<this._terminal.rows;_++)this._resetBufferLine(_);this._terminal.updateRange(_);break;case 1:for(_=this._terminal.buffer.y,this._terminal.updateRange(_),this._eraseInBufferLine(_,0,this._terminal.buffer.x+1,!0),this._terminal.buffer.x+1>=this._terminal.cols&&(this._terminal.buffer.lines.get(_+1).isWrapped=!1);_--;)this._resetBufferLine(_);this._terminal.updateRange(0);break;case 2:for(_=this._terminal.rows,this._terminal.updateRange(_-1);_--;)this._resetBufferLine(_);this._terminal.updateRange(0);break;case 3:var m=this._terminal.buffer.lines.length-this._terminal.rows;m>0&&(this._terminal.buffer.lines.trimStart(m),this._terminal.buffer.ybase=Math.max(this._terminal.buffer.ybase-m,0),this._terminal.buffer.ydisp=Math.max(this._terminal.buffer.ydisp-m,0),this._onScroll.fire(0));break}},p.prototype.eraseInLine=function(v){switch(v[0]){case 0:this._eraseInBufferLine(this._terminal.buffer.y,this._terminal.buffer.x,this._terminal.cols);break;case 1:this._eraseInBufferLine(this._terminal.buffer.y,0,this._terminal.buffer.x+1);break;case 2:this._eraseInBufferLine(this._terminal.buffer.y,0,this._terminal.cols);break}this._terminal.updateRange(this._terminal.buffer.y)},p.prototype.insertLines=function(v){var _=v[0];_<1&&(_=1);for(var m=this._terminal.buffer,g=m.y+m.ybase,x=this._terminal.rows-1-m.scrollBottom,L=this._terminal.rows-1+m.ybase-x+1;_--;)m.lines.splice(L-1,1),m.lines.splice(g,0,m.getBlankLine(this._terminal.eraseAttrData()));this._terminal.updateRange(m.y),this._terminal.updateRange(m.scrollBottom)},p.prototype.deleteLines=function(v){var _=v[0];_<1&&(_=1);var m=this._terminal.buffer,g=m.y+m.ybase,x;for(x=this._terminal.rows-1-m.scrollBottom,x=this._terminal.rows-1+m.ybase-x;_--;)m.lines.splice(g,1),m.lines.splice(x,0,m.getBlankLine(this._terminal.eraseAttrData()));this._terminal.updateRange(m.y),this._terminal.updateRange(m.scrollBottom)},p.prototype.deleteChars=function(v){this._terminal.buffer.lines.get(this._terminal.buffer.y+this._terminal.buffer.ybase).deleteCells(this._terminal.buffer.x,v[0]||1,this._terminal.buffer.getNullCell(this._terminal.eraseAttrData())),this._terminal.updateRange(this._terminal.buffer.y)},p.prototype.scrollUp=function(v){for(var _=v[0]||1,m=this._terminal.buffer;_--;)m.lines.splice(m.ybase+m.scrollTop,1),m.lines.splice(m.ybase+m.scrollBottom,0,m.getBlankLine(l.DEFAULT_ATTR_DATA));this._terminal.updateRange(m.scrollTop),this._terminal.updateRange(m.scrollBottom)},p.prototype.scrollDown=function(v,_){if(v.length<2&&!_){for(var m=v[0]||1,g=this._terminal.buffer;m--;)g.lines.splice(g.ybase+g.scrollBottom,1),g.lines.splice(g.ybase+g.scrollTop,0,g.getBlankLine(l.DEFAULT_ATTR_DATA));this._terminal.updateRange(g.scrollTop),this._terminal.updateRange(g.scrollBottom)}},p.prototype.eraseChars=function(v){this._terminal.buffer.lines.get(this._terminal.buffer.y+this._terminal.buffer.ybase).replaceCells(this._terminal.buffer.x,this._terminal.buffer.x+(v[0]||1),this._terminal.buffer.getNullCell(this._terminal.eraseAttrData()))},p.prototype.cursorBackwardTab=function(v){for(var _=v[0]||1,m=this._terminal.buffer;_--;)m.x=m.prevStop()},p.prototype.charPosAbsolute=function(v){var _=v[0];_<1&&(_=1),this._terminal.buffer.x=_-1,this._terminal.buffer.x>=this._terminal.cols&&(this._terminal.buffer.x=this._terminal.cols-1)},p.prototype.hPositionRelative=function(v){var _=v[0];_<1&&(_=1),this._terminal.buffer.x+=_,this._terminal.buffer.x>=this._terminal.cols&&(this._terminal.buffer.x=this._terminal.cols-1)},p.prototype.repeatPrecedingCharacter=function(v){var _=this._terminal.buffer,m=_.lines.get(_.ybase+_.y);m.loadCell(_.x-1,this._workCell),m.replaceCells(_.x,_.x+(v[0]||1),this._workCell.content!==void 0?this._workCell:_.getNullCell(l.DEFAULT_ATTR_DATA))},p.prototype.sendDeviceAttributes=function(v,_){v[0]>0||(_?_===">"&&(this._terminal.is("xterm")?this._terminal.handler(t.C0.ESC+"[>0;276;0c"):this._terminal.is("rxvt-unicode")?this._terminal.handler(t.C0.ESC+"[>85;95;0c"):this._terminal.is("linux")?this._terminal.handler(v[0]+"c"):this._terminal.is("screen")&&this._terminal.handler(t.C0.ESC+"[>83;40003;0c")):this._terminal.is("xterm")||this._terminal.is("rxvt-unicode")||this._terminal.is("screen")?this._terminal.handler(t.C0.ESC+"[?1;2c"):this._terminal.is("linux")&&this._terminal.handler(t.C0.ESC+"[?6c"))},p.prototype.linePosAbsolute=function(v){var _=v[0];_<1&&(_=1),this._terminal.buffer.y=_-1,this._terminal.buffer.y>=this._terminal.rows&&(this._terminal.buffer.y=this._terminal.rows-1)},p.prototype.vPositionRelative=function(v){var _=v[0];_<1&&(_=1),this._terminal.buffer.y+=_,this._terminal.buffer.y>=this._terminal.rows&&(this._terminal.buffer.y=this._terminal.rows-1),this._terminal.buffer.x>=this._terminal.cols&&this._terminal.buffer.x--},p.prototype.hVPosition=function(v){v[0]<1&&(v[0]=1),v[1]<1&&(v[1]=1),this._terminal.buffer.y=v[0]-1,this._terminal.buffer.y>=this._terminal.rows&&(this._terminal.buffer.y=this._terminal.rows-1),this._terminal.buffer.x=v[1]-1,this._terminal.buffer.x>=this._terminal.cols&&(this._terminal.buffer.x=this._terminal.cols-1)},p.prototype.tabClear=function(v){var _=v[0];_<=0?delete this._terminal.buffer.tabs[this._terminal.buffer.x]:_===3&&(this._terminal.buffer.tabs={})},p.prototype.setMode=function(v,_){if(v.length>1){for(var m=0;m<v.length;m++)this.setMode([v[m]]);return}if(_){if(_==="?")switch(v[0]){case 1:this._terminal.applicationCursor=!0;break;case 2:this._terminal.setgCharset(0,r.DEFAULT_CHARSET),this._terminal.setgCharset(1,r.DEFAULT_CHARSET),this._terminal.setgCharset(2,r.DEFAULT_CHARSET),this._terminal.setgCharset(3,r.DEFAULT_CHARSET);break;case 3:this._terminal.savedCols=this._terminal.cols,this._terminal.resize(132,this._terminal.rows);break;case 6:this._terminal.originMode=!0;break;case 7:this._terminal.wraparoundMode=!0;break;case 12:break;case 66:this._terminal.log("Serial port requested application keypad."),this._terminal.applicationKeypad=!0,this._terminal.viewport&&this._terminal.viewport.syncScrollArea();break;case 9:case 1e3:case 1002:case 1003:this._terminal.x10Mouse=v[0]===9,this._terminal.vt200Mouse=v[0]===1e3,this._terminal.normalMouse=v[0]>1e3,this._terminal.mouseEvents=!0,this._terminal.element&&this._terminal.element.classList.add("enable-mouse-events"),this._terminal.selectionManager&&this._terminal.selectionManager.disable(),this._terminal.log("Binding to mouse events.");break;case 1004:this._terminal.sendFocus=!0;break;case 1005:this._terminal.utfMouse=!0;break;case 1006:this._terminal.sgrMouse=!0;break;case 1015:this._terminal.urxvtMouse=!0;break;case 25:this._terminal.cursorHidden=!1;break;case 1048:this.saveCursor(v);break;case 1049:this.saveCursor(v);case 47:case 1047:this._terminal.buffers.activateAltBuffer(this._terminal.eraseAttrData()),this._terminal.refresh(0,this._terminal.rows-1),this._terminal.viewport&&this._terminal.viewport.syncScrollArea(),this._terminal.showCursor();break;case 2004:this._terminal.bracketedPasteMode=!0;break}}else switch(v[0]){case 4:this._terminal.insertMode=!0;break}},p.prototype.resetMode=function(v,_){if(v.length>1){for(var m=0;m<v.length;m++)this.resetMode([v[m]]);return}if(_){if(_==="?")switch(v[0]){case 1:this._terminal.applicationCursor=!1;break;case 3:this._terminal.cols===132&&this._terminal.savedCols&&this._terminal.resize(this._terminal.savedCols,this._terminal.rows),delete this._terminal.savedCols;break;case 6:this._terminal.originMode=!1;break;case 7:this._terminal.wraparoundMode=!1;break;case 12:break;case 66:this._terminal.log("Switching back to normal keypad."),this._terminal.applicationKeypad=!1,this._terminal.viewport&&this._terminal.viewport.syncScrollArea();break;case 9:case 1e3:case 1002:case 1003:this._terminal.x10Mouse=!1,this._terminal.vt200Mouse=!1,this._terminal.normalMouse=!1,this._terminal.mouseEvents=!1,this._terminal.element&&this._terminal.element.classList.remove("enable-mouse-events"),this._terminal.selectionManager&&this._terminal.selectionManager.enable();break;case 1004:this._terminal.sendFocus=!1;break;case 1005:this._terminal.utfMouse=!1;break;case 1006:this._terminal.sgrMouse=!1;break;case 1015:this._terminal.urxvtMouse=!1;break;case 25:this._terminal.cursorHidden=!0;break;case 1048:this.restoreCursor(v);break;case 1049:case 47:case 1047:this._terminal.buffers.activateNormalBuffer(),v[0]===1049&&this.restoreCursor(v),this._terminal.refresh(0,this._terminal.rows-1),this._terminal.viewport&&this._terminal.viewport.syncScrollArea(),this._terminal.showCursor();break;case 2004:this._terminal.bracketedPasteMode=!1;break}}else switch(v[0]){case 4:this._terminal.insertMode=!1;break}},p.prototype.charAttributes=function(v){if(v.length===1&&v[0]===0){this._terminal.curAttrData.fg=l.DEFAULT_ATTR_DATA.fg,this._terminal.curAttrData.bg=l.DEFAULT_ATTR_DATA.bg;return}for(var _=v.length,m,g=this._terminal.curAttrData,x=0;x<_;x++)m=v[x],m>=30&&m<=37?(g.fg&=-50331904,g.fg|=16777216|m-30):m>=40&&m<=47?(g.bg&=-50331904,g.bg|=16777216|m-40):m>=90&&m<=97?(g.fg&=-50331904,g.fg|=16777216|m-90|8):m>=100&&m<=107?(g.bg&=-50331904,g.bg|=16777216|m-100|8):m===0?(g.fg=l.DEFAULT_ATTR_DATA.fg,g.bg=l.DEFAULT_ATTR_DATA.bg):m===1?g.fg|=134217728:m===3?g.bg|=67108864:m===4?g.fg|=268435456:m===5?g.fg|=536870912:m===7?g.fg|=67108864:m===8?g.fg|=1073741824:m===2?g.bg|=134217728:m===22?(g.fg&=-134217729,g.bg&=-134217729):m===23?g.bg&=-67108865:m===24?g.fg&=-268435457:m===25?g.fg&=-536870913:m===27?g.fg&=-67108865:m===28?g.fg&=-1073741825:m===39?(g.fg&=-67108864,g.fg|=l.DEFAULT_ATTR_DATA.fg&16777215):m===49?(g.bg&=-67108864,g.bg|=l.DEFAULT_ATTR_DATA.bg&16777215):m===38?v[x+1]===2?(x+=2,g.fg|=50331648,g.fg&=-16777216,g.fg|=l.AttributeData.fromColorRGB([v[x],v[x+1],v[x+2]]),x+=2):v[x+1]===5&&(x+=2,m=v[x]&255,g.fg&=-50331904,g.fg|=33554432|m):m===48?v[x+1]===2?(x+=2,g.bg|=50331648,g.bg&=-16777216,g.bg|=l.AttributeData.fromColorRGB([v[x],v[x+1],v[x+2]]),x+=2):v[x+1]===5&&(x+=2,m=v[x]&255,g.bg&=-50331904,g.bg|=33554432|m):m===100?(g.fg&=-67108864,g.fg|=l.DEFAULT_ATTR_DATA.fg&16777215,g.bg&=-67108864,g.bg|=l.DEFAULT_ATTR_DATA.bg&16777215):this._terminal.error("Unknown SGR attribute: %d.",m)},p.prototype.deviceStatus=function(v,_){if(_){if(_==="?")switch(v[0]){case 6:var m=this._terminal.buffer.y+1,g=this._terminal.buffer.x+1;this._onData.fire(t.C0.ESC+"[?"+m+";"+g+"R");break}}else switch(v[0]){case 5:this._onData.fire(t.C0.ESC+"[0n");break;case 6:var m=this._terminal.buffer.y+1,g=this._terminal.buffer.x+1;this._onData.fire(t.C0.ESC+"["+m+";"+g+"R");break}},p.prototype.softReset=function(v,_){_==="!"&&(this._terminal.cursorHidden=!1,this._terminal.insertMode=!1,this._terminal.originMode=!1,this._terminal.wraparoundMode=!0,this._terminal.applicationKeypad=!1,this._terminal.viewport&&this._terminal.viewport.syncScrollArea(),this._terminal.applicationCursor=!1,this._terminal.buffer.scrollTop=0,this._terminal.buffer.scrollBottom=this._terminal.rows-1,this._terminal.curAttrData=l.DEFAULT_ATTR_DATA.clone(),this._terminal.buffer.x=this._terminal.buffer.y=0,this._terminal.charset=null,this._terminal.glevel=0,this._terminal.charsets=[null])},p.prototype.setCursorStyle=function(v,_){if(_===" "){var m=v[0]<1?1:v[0];switch(m){case 1:case 2:this._terminal.setOption("cursorStyle","block");break;case 3:case 4:this._terminal.setOption("cursorStyle","underline");break;case 5:case 6:this._terminal.setOption("cursorStyle","bar");break}var g=m%2===1;this._terminal.setOption("cursorBlink",g)}},p.prototype.setScrollRegion=function(v,_){_||(this._terminal.buffer.scrollTop=(v[0]||1)-1,this._terminal.buffer.scrollBottom=(v[1]&&v[1]<=this._terminal.rows?v[1]:this._terminal.rows)-1,this._terminal.buffer.x=0,this._terminal.buffer.y=0)},p.prototype.saveCursor=function(v){this._terminal.buffer.savedX=this._terminal.buffer.x,this._terminal.buffer.savedY=this._terminal.buffer.y,this._terminal.buffer.savedCurAttrData.fg=this._terminal.curAttrData.fg,this._terminal.buffer.savedCurAttrData.bg=this._terminal.curAttrData.bg},p.prototype.restoreCursor=function(v){this._terminal.buffer.x=this._terminal.buffer.savedX||0,this._terminal.buffer.y=this._terminal.buffer.savedY||0,this._terminal.curAttrData.fg=this._terminal.buffer.savedCurAttrData.fg,this._terminal.curAttrData.bg=this._terminal.buffer.savedCurAttrData.bg},p.prototype.setTitle=function(v){this._terminal.handleTitle(v)},p.prototype.nextLine=function(){this._terminal.buffer.x=0,this.index()},p.prototype.keypadApplicationMode=function(){this._terminal.log("Serial port requested application keypad."),this._terminal.applicationKeypad=!0,this._terminal.viewport&&this._terminal.viewport.syncScrollArea()},p.prototype.keypadNumericMode=function(){this._terminal.log("Switching back to normal keypad."),this._terminal.applicationKeypad=!1,this._terminal.viewport&&this._terminal.viewport.syncScrollArea()},p.prototype.selectDefaultCharset=function(){this._terminal.setgLevel(0),this._terminal.setgCharset(0,r.DEFAULT_CHARSET)},p.prototype.selectCharset=function(v){if(v.length!==2){this.selectDefaultCharset();return}v[0]!=="/"&&this._terminal.setgCharset(f[v[0]],r.CHARSETS[v[1]]||r.DEFAULT_CHARSET)},p.prototype.index=function(){this._terminal.index()},p.prototype.tabSet=function(){this._terminal.tabSet()},p.prototype.reverseIndex=function(){this._terminal.reverseIndex()},p.prototype.reset=function(){this._parser.reset(),this._terminal.reset()},p.prototype.setgLevel=function(v){this._terminal.setgLevel(v)},p}(s.Disposable);return Ss.InputHandler=h,Ss}var xs={},Es={},rl={},n1;function q4(){if(n1)return rl;n1=1,Object.defineProperty(rl,"__esModule",{value:!0});var e=function(){function t(){this.cache=[]}return t.prototype.resize=function(r,n){for(var i=0;i<r;i++){this.cache.length<=i&&this.cache.push([]);for(var s=this.cache[i].length;s<n;s++)this.cache[i].push(null);this.cache[i].length=n}this.cache.length=r},t.prototype.clear=function(){for(var r=0;r<this.cache.length;r++)for(var n=0;n<this.cache[r].length;n++)this.cache[r][n]=null},t}();return rl.GridCache=e,rl}var nl={},As={},i1;function ds(){return i1||(i1=1,Object.defineProperty(As,"__esModule",{value:!0}),As.INVERTED_DEFAULT_COLOR=257,As.DIM_OPACITY=.5,As.CHAR_ATLAS_CELL_SPACING=1),As}var Ro={},Rs={},s1;function ed(){if(s1)return Rs;s1=1,Object.defineProperty(Rs,"__esModule",{value:!0});var e=jc();function t(i,s,a,o){var l={foreground:o.foreground,background:o.background,cursor:null,cursorAccent:null,selection:null,ansi:o.ansi.slice(0,16)};return{type:a.options.experimentalCharAtlas,devicePixelRatio:window.devicePixelRatio,scaledCharWidth:i,scaledCharHeight:s,fontFamily:a.options.fontFamily,fontSize:a.options.fontSize,fontWeight:a.options.fontWeight,fontWeightBold:a.options.fontWeightBold,allowTransparency:a.options.allowTransparency,colors:l}}Rs.generateConfig=t;function r(i,s){for(var a=0;a<i.colors.ansi.length;a++)if(i.colors.ansi[a].rgba!==s.colors.ansi[a].rgba)return!1;return i.type===s.type&&i.devicePixelRatio===s.devicePixelRatio&&i.fontFamily===s.fontFamily&&i.fontSize===s.fontSize&&i.fontWeight===s.fontWeight&&i.fontWeightBold===s.fontWeightBold&&i.allowTransparency===s.allowTransparency&&i.scaledCharWidth===s.scaledCharWidth&&i.scaledCharHeight===s.scaledCharHeight&&i.colors.foreground===s.colors.foreground&&i.colors.background===s.colors.background}Rs.configEquals=r;function n(i){return i<e.DEFAULT_COLOR}return Rs.is256Color=n,Rs}var Pi={},il={},o1;function td(){if(o1)return il;o1=1,Object.defineProperty(il,"__esModule",{value:!0});var e=function(){function t(){this._didWarmUp=!1}return t.prototype.dispose=function(){},t.prototype.warmUp=function(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)},t.prototype._doWarmUp=function(){},t.prototype.beginFrame=function(){},t}();return il.default=e,il}var ju={},a1;function Fg(){return a1||(a1=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=a("#ffffff"),r=a("#000000"),n=a("#ffffff"),i=a("#000000"),s={css:"rgba(255, 255, 255, 0.3)",rgba:4294967159};e.DEFAULT_ANSI_COLORS=function(){for(var u=[a("#2e3436"),a("#cc0000"),a("#4e9a06"),a("#c4a000"),a("#3465a4"),a("#75507b"),a("#06989a"),a("#d3d7cf"),a("#555753"),a("#ef2929"),a("#8ae234"),a("#fce94f"),a("#729fcf"),a("#ad7fa8"),a("#34e2e2"),a("#eeeeec")],f=[0,95,135,175,215,255],c=0;c<216;c++){var h=f[c/36%6|0],d=f[c/6%6|0],p=f[c%6];u.push({css:"#"+o(h)+o(d)+o(p),rgba:(h<<24|d<<16|p<<8|255)>>>0})}for(var c=0;c<24;c++){var v=8+c*10,_=o(v);u.push({css:"#"+_+_+_,rgba:(v<<24|v<<16|v<<8|255)>>>0})}return u}();function a(u){return{css:u,rgba:parseInt(u.slice(1),16)<<8|255}}function o(u){var f=u.toString(16);return f.length<2?"0"+f:f}var l=function(){function u(f,c){this.allowTransparency=c;var h=f.createElement("canvas");h.width=1,h.height=1;var d=h.getContext("2d");if(!d)throw new Error("Could not get rendering context");this._ctx=d,this._ctx.globalCompositeOperation="copy",this._litmusColor=this._ctx.createLinearGradient(0,0,1,1),this.colors={foreground:t,background:r,cursor:n,cursorAccent:i,selection:s,ansi:e.DEFAULT_ANSI_COLORS.slice()}}return u.prototype.setTheme=function(f){f===void 0&&(f={}),this.colors.foreground=this._parseColor(f.foreground,t),this.colors.background=this._parseColor(f.background,r),this.colors.cursor=this._parseColor(f.cursor,n,!0),this.colors.cursorAccent=this._parseColor(f.cursorAccent,i,!0),this.colors.selection=this._parseColor(f.selection,s,!0),this.colors.ansi[0]=this._parseColor(f.black,e.DEFAULT_ANSI_COLORS[0]),this.colors.ansi[1]=this._parseColor(f.red,e.DEFAULT_ANSI_COLORS[1]),this.colors.ansi[2]=this._parseColor(f.green,e.DEFAULT_ANSI_COLORS[2]),this.colors.ansi[3]=this._parseColor(f.yellow,e.DEFAULT_ANSI_COLORS[3]),this.colors.ansi[4]=this._parseColor(f.blue,e.DEFAULT_ANSI_COLORS[4]),this.colors.ansi[5]=this._parseColor(f.magenta,e.DEFAULT_ANSI_COLORS[5]),this.colors.ansi[6]=this._parseColor(f.cyan,e.DEFAULT_ANSI_COLORS[6]),this.colors.ansi[7]=this._parseColor(f.white,e.DEFAULT_ANSI_COLORS[7]),this.colors.ansi[8]=this._parseColor(f.brightBlack,e.DEFAULT_ANSI_COLORS[8]),this.colors.ansi[9]=this._parseColor(f.brightRed,e.DEFAULT_ANSI_COLORS[9]),this.colors.ansi[10]=this._parseColor(f.brightGreen,e.DEFAULT_ANSI_COLORS[10]),this.colors.ansi[11]=this._parseColor(f.brightYellow,e.DEFAULT_ANSI_COLORS[11]),this.colors.ansi[12]=this._parseColor(f.brightBlue,e.DEFAULT_ANSI_COLORS[12]),this.colors.ansi[13]=this._parseColor(f.brightMagenta,e.DEFAULT_ANSI_COLORS[13]),this.colors.ansi[14]=this._parseColor(f.brightCyan,e.DEFAULT_ANSI_COLORS[14]),this.colors.ansi[15]=this._parseColor(f.brightWhite,e.DEFAULT_ANSI_COLORS[15])},u.prototype._parseColor=function(f,c,h){if(h===void 0&&(h=this.allowTransparency),f===void 0)return c;if(this._ctx.fillStyle=this._litmusColor,this._ctx.fillStyle=f,typeof this._ctx.fillStyle!="string")return console.warn("Color: "+f+" is invalid using fallback "+c.css),c;this._ctx.fillRect(0,0,1,1);var d=this._ctx.getImageData(0,0,1,1).data;return!h&&d[3]!==255?(console.warn("Color: "+f+" is using transparency, but allowTransparency is false. "+("Using fallback "+c.css+".")),c):{css:f,rgba:(d[0]<<24|d[1]<<16|d[2]<<8|d[3])>>>0}},u}();e.ColorManager=l}(ju)),ju}var ko={},en={},l1;function Fa(){if(l1)return en;l1=1,Object.defineProperty(en,"__esModule",{value:!0});var e=typeof navigator>"u",t=e?"node":navigator.userAgent,r=e?"node":navigator.platform;en.isFirefox=!!~t.indexOf("Firefox"),en.isSafari=/^((?!chrome|android).)*safari/i.test(t),en.isMSIE=!!~t.indexOf("MSIE")||!!~t.indexOf("Trident"),en.isMac=n(["Macintosh","MacIntel","MacPPC","Mac68K"],r),en.isIpad=r==="iPad",en.isIphone=r==="iPhone",en.isMSWindows=n(["Windows","Win16","Win32","WinCE"],r),en.isLinux=r.indexOf("Linux")>=0;function n(i,s){return i.indexOf(s)>=0}return en}var c1;function Dg(){if(c1)return ko;c1=1,Object.defineProperty(ko,"__esModule",{value:!0});var e=Fa(),t=ds();function r(s,a,o){var l=o.scaledCharWidth+t.CHAR_ATLAS_CELL_SPACING,u=o.scaledCharHeight+t.CHAR_ATLAS_CELL_SPACING,f=a(255*l,34*u),c=f.getContext("2d",{alpha:o.allowTransparency});c.fillStyle=o.colors.background.css,c.fillRect(0,0,f.width,f.height),c.save(),c.fillStyle=o.colors.foreground.css,c.font=i(o.fontWeight,o),c.textBaseline="middle";for(var h=0;h<256;h++)c.save(),c.beginPath(),c.rect(h*l,0,l,u),c.clip(),c.fillText(String.fromCharCode(h),h*l,u/2),c.restore();c.save(),c.font=i(o.fontWeightBold,o);for(var h=0;h<256;h++)c.save(),c.beginPath(),c.rect(h*l,u,l,u),c.clip(),c.fillText(String.fromCharCode(h),h*l,u*1.5),c.restore();c.restore(),c.font=i(o.fontWeight,o);for(var d=0;d<16;d++)for(var p=(d+2)*u,h=0;h<256;h++)c.save(),c.beginPath(),c.rect(h*l,p,l,u),c.clip(),c.fillStyle=o.colors.ansi[d].css,c.fillText(String.fromCharCode(h),h*l,p+u/2),c.restore();c.font=i(o.fontWeightBold,o);for(var d=0;d<16;d++)for(var p=(d+2+16)*u,h=0;h<256;h++)c.save(),c.beginPath(),c.rect(h*l,p,l,u),c.clip(),c.fillStyle=o.colors.ansi[d].css,c.fillText(String.fromCharCode(h),h*l,p+u/2),c.restore();if(c.restore(),!("createImageBitmap"in s)||e.isFirefox||e.isSafari)return f;var v=c.getImageData(0,0,f.width,f.height);return n(v,o.colors.background),s.createImageBitmap(v)}ko.generateStaticCharAtlasTexture=r;function n(s,a){for(var o=!0,l=a.rgba>>>24,u=a.rgba>>>16&255,f=a.rgba>>>8&255,c=0;c<s.data.length;c+=4)s.data[c]===l&&s.data[c+1]===u&&s.data[c+2]===f?s.data[c+3]=0:o=!1;return o}ko.clearColor=n;function i(s,a){return s+" "+a.fontSize*a.devicePixelRatio+"px "+a.fontFamily}return ko}var sl={},u1;function z4(){if(u1)return sl;u1=1,Object.defineProperty(sl,"__esModule",{value:!0});var e=function(){function t(r){this.capacity=r,this._map={},this._head=null,this._tail=null,this._nodePool=[],this.size=0}return t.prototype._unlinkNode=function(r){var n=r.prev,i=r.next;r===this._head&&(this._head=i),r===this._tail&&(this._tail=n),n!==null&&(n.next=i),i!==null&&(i.prev=n)},t.prototype._appendNode=function(r){var n=this._tail;n!==null&&(n.next=r),r.prev=n,r.next=null,this._tail=r,this._head===null&&(this._head=r)},t.prototype.prealloc=function(r){for(var n=this._nodePool,i=0;i<r;i++)n.push({prev:null,next:null,key:null,value:null})},t.prototype.get=function(r){var n=this._map[r];return n!==void 0?(this._unlinkNode(n),this._appendNode(n),n.value):null},t.prototype.peekValue=function(r){var n=this._map[r];return n!==void 0?n.value:null},t.prototype.peek=function(){var r=this._head;return r===null?null:r.value},t.prototype.set=function(r,n){var i=this._map[r];if(i!==void 0)i=this._map[r],this._unlinkNode(i),i.value=n;else if(this.size>=this.capacity)i=this._head,this._unlinkNode(i),delete this._map[i.key],i.key=r,i.value=n,this._map[r]=i;else{var s=this._nodePool;s.length>0?(i=s.pop(),i.key=r,i.value=n):i={prev:null,next:null,key:r,value:n},this._map[r]=i,this.size++}this._appendNode(i)},t}();return sl.default=e,sl}var f1;function V4(){if(f1)return Pi;f1=1;var e=Pi&&Pi.__extends||function(){var p=function(v,_){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,g){m.__proto__=g}||function(m,g){for(var x in g)g.hasOwnProperty(x)&&(m[x]=g[x])},p(v,_)};return function(v,_){p(v,_);function m(){this.constructor=v}v.prototype=_===null?Object.create(_):(m.prototype=_.prototype,new m)}}();Object.defineProperty(Pi,"__esModule",{value:!0});var t=ds(),r=td(),n=Fg(),i=Dg(),s=z4(),a=Fa(),o=1024,l=1024,u={css:"rgba(0, 0, 0, 0)",rgba:0},f=100,c=100;function h(p){return p.code<<21|p.bg<<12|p.fg<<3|(p.bold?0:4)+(p.dim?0:2)+(p.italic?0:1)}Pi.getGlyphCacheKey=h;var d=function(p){e(v,p);function v(_,m){var g=p.call(this)||this;g._config=m,g._drawToCacheCount=0,g._glyphsWaitingOnBitmap=[],g._bitmapCommitTimeout=null,g._bitmap=null,g._cacheCanvas=_.createElement("canvas"),g._cacheCanvas.width=o,g._cacheCanvas.height=l,g._cacheCtx=g._cacheCanvas.getContext("2d",{alpha:!0});var x=_.createElement("canvas");x.width=g._config.scaledCharWidth,x.height=g._config.scaledCharHeight,g._tmpCtx=x.getContext("2d",{alpha:g._config.allowTransparency}),g._width=Math.floor(o/g._config.scaledCharWidth),g._height=Math.floor(l/g._config.scaledCharHeight);var L=g._width*g._height;return g._cacheMap=new s.default(L),g._cacheMap.prealloc(L),g}return v.prototype.dispose=function(){this._bitmapCommitTimeout!==null&&(window.clearTimeout(this._bitmapCommitTimeout),this._bitmapCommitTimeout=null)},v.prototype.beginFrame=function(){this._drawToCacheCount=0},v.prototype.draw=function(_,m,g,x){if(m.code===32)return!0;if(!this._canCache(m))return!1;var L=h(m),y=this._cacheMap.get(L);if(y!=null)return this._drawFromCache(_,y,g,x),!0;if(this._drawToCacheCount<f){var M=void 0;this._cacheMap.size<this._cacheMap.capacity?M=this._cacheMap.size:M=this._cacheMap.peek().index;var F=this._drawToCache(m,M);return this._cacheMap.set(L,F),this._drawFromCache(_,F,g,x),!0}return!1},v.prototype._canCache=function(_){return _.code<256},v.prototype._toCoordinateX=function(_){return _%this._width*this._config.scaledCharWidth},v.prototype._toCoordinateY=function(_){return Math.floor(_/this._width)*this._config.scaledCharHeight},v.prototype._drawFromCache=function(_,m,g,x){if(!m.isEmpty){var L=this._toCoordinateX(m.index),y=this._toCoordinateY(m.index);_.drawImage(m.inBitmap?this._bitmap:this._cacheCanvas,L,y,this._config.scaledCharWidth,this._config.scaledCharHeight,g,x,this._config.scaledCharWidth,this._config.scaledCharHeight)}},v.prototype._getColorFromAnsiIndex=function(_){return _<this._config.colors.ansi.length?this._config.colors.ansi[_]:n.DEFAULT_ANSI_COLORS[_]},v.prototype._getBackgroundColor=function(_){return this._config.allowTransparency?u:_.bg===t.INVERTED_DEFAULT_COLOR?this._config.colors.foreground:_.bg<256?this._getColorFromAnsiIndex(_.bg):this._config.colors.background},v.prototype._getForegroundColor=function(_){return _.fg===t.INVERTED_DEFAULT_COLOR?this._config.colors.background:_.fg<256?this._getColorFromAnsiIndex(_.fg):this._config.colors.foreground},v.prototype._drawToCache=function(_,m){this._drawToCacheCount++,this._tmpCtx.save();var g=this._getBackgroundColor(_);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=g.css,this._tmpCtx.fillRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),this._tmpCtx.globalCompositeOperation="source-over";var x=_.bold?this._config.fontWeightBold:this._config.fontWeight,L=_.italic?"italic":"";this._tmpCtx.font=L+" "+x+" "+this._config.fontSize*this._config.devicePixelRatio+"px "+this._config.fontFamily,this._tmpCtx.textBaseline="middle",this._tmpCtx.fillStyle=this._getForegroundColor(_).css,_.dim&&(this._tmpCtx.globalAlpha=t.DIM_OPACITY),this._tmpCtx.fillText(_.chars,0,this._config.scaledCharHeight/2),this._tmpCtx.restore();var y=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),M=!1;this._config.allowTransparency||(M=i.clearColor(y,g));var F=this._toCoordinateX(m),D=this._toCoordinateY(m);this._cacheCtx.putImageData(y,F,D);var H={index:m,isEmpty:M,inBitmap:!1};return this._addGlyphToBitmap(H),H},v.prototype._addGlyphToBitmap=function(_){var m=this;!("createImageBitmap"in window)||a.isFirefox||a.isSafari||(this._glyphsWaitingOnBitmap.push(_),this._bitmapCommitTimeout===null&&(this._bitmapCommitTimeout=window.setTimeout(function(){return m._generateBitmap()},c)))},v.prototype._generateBitmap=function(){var _=this,m=this._glyphsWaitingOnBitmap;this._glyphsWaitingOnBitmap=[],window.createImageBitmap(this._cacheCanvas).then(function(g){_._bitmap=g;for(var x=0;x<m.length;x++){var L=m[x];L.inBitmap=!0}}),this._bitmapCommitTimeout=null},v}(r.default);return Pi.default=d,Pi}var ks={},h1;function $4(){if(h1)return ks;h1=1;var e=ks&&ks.__extends||function(){var n=function(i,s){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var l in o)o.hasOwnProperty(l)&&(a[l]=o[l])},n(i,s)};return function(i,s){n(i,s);function a(){this.constructor=i}i.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)}}();Object.defineProperty(ks,"__esModule",{value:!0});var t=td(),r=function(n){e(i,n);function i(s,a){return n.call(this)||this}return i.prototype.draw=function(s,a,o,l){return!1},i}(t.default);return ks.default=r,ks}var Ts={},d1;function W4(){if(d1)return Ts;d1=1;var e=Ts&&Ts.__extends||function(){var o=function(l,u){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,c){f.__proto__=c}||function(f,c){for(var h in c)c.hasOwnProperty(h)&&(f[h]=c[h])},o(l,u)};return function(l,u){o(l,u);function f(){this.constructor=l}l.prototype=u===null?Object.create(u):(f.prototype=u.prototype,new f)}}();Object.defineProperty(Ts,"__esModule",{value:!0});var t=ds(),r=Dg(),n=td(),i=ed(),s=jc(),a=function(o){e(l,o);function l(u,f){var c=o.call(this)||this;return c._document=u,c._config=f,c._canvasFactory=function(h,d){var p=c._document.createElement("canvas");return p.width=h,p.height=d,p},c}return l.prototype._doWarmUp=function(){var u=this,f=r.generateStaticCharAtlasTexture(window,this._canvasFactory,this._config);f instanceof HTMLCanvasElement?this._texture=f:f.then(function(c){u._texture=c})},l.prototype._isCached=function(u,f){var c=u.code<256,h=u.fg<16,d=u.fg===s.DEFAULT_COLOR,p=u.bg===s.DEFAULT_COLOR;return c&&(h||d)&&p&&!u.italic},l.prototype.draw=function(u,f,c,h){if(this._texture===null||this._texture===void 0)return!1;var d=0;if(i.is256Color(f.fg)?d=2+f.fg+(f.bold?16:0):f.fg===s.DEFAULT_COLOR&&f.bold&&(d=1),!this._isCached(f,d))return!1;u.save();var p=this._config.scaledCharWidth+t.CHAR_ATLAS_CELL_SPACING,v=this._config.scaledCharHeight+t.CHAR_ATLAS_CELL_SPACING;return f.dim&&(u.globalAlpha=t.DIM_OPACITY),u.drawImage(this._texture,f.code*p,d*v,p,this._config.scaledCharHeight,c,h,p,this._config.scaledCharHeight),u.restore(),!0},l}(n.default);return Ts.default=a,Ts}var p1;function Hg(){if(p1)return Ro;p1=1,Object.defineProperty(Ro,"__esModule",{value:!0});var e=ed(),t=V4(),r=$4(),n=W4(),i={none:r.default,static:n.default,dynamic:t.default},s=[];function a(l,u,f,c){for(var h=e.generateConfig(f,c,l,u),d=0;d<s.length;d++){var p=s[d],v=p.ownedBy.indexOf(l);if(v>=0){if(e.configEquals(p.config,h))return p.atlas;p.ownedBy.length===1?(p.atlas.dispose(),s.splice(d,1)):p.ownedBy.splice(v,1);break}}for(var d=0;d<s.length;d++){var p=s[d];if(e.configEquals(p.config,h))return p.ownedBy.push(l),p.atlas}var _={atlas:new i[l.options.experimentalCharAtlas](document,h),config:h,ownedBy:[l]};return s.push(_),_.atlas}Ro.acquireCharAtlas=a;function o(l){for(var u=0;u<s.length;u++){var f=s[u].ownedBy.indexOf(l);if(f!==-1){s[u].ownedBy.length===1?(s[u].atlas.dispose(),s.splice(u,1)):s[u].ownedBy.splice(f,1);break}}}return Ro.removeTerminalFromCache=o,Ro}var m1;function Uc(){if(m1)return nl;m1=1,Object.defineProperty(nl,"__esModule",{value:!0});var e=jc(),t=ds(),r=Hg(),n=In(),i=function(){function s(a,o,l,u,f){this._container=a,this._alpha=u,this._colors=f,this._scaledCharWidth=0,this._scaledCharHeight=0,this._scaledCellWidth=0,this._scaledCellHeight=0,this._scaledCharLeft=0,this._scaledCharTop=0,this._currentGlyphIdentifier={chars:"",code:0,bg:0,fg:0,bold:!1,dim:!1,italic:!1},this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-"+o+"-layer"),this._canvas.style.zIndex=l.toString(),this._initCanvas(),this._container.appendChild(this._canvas)}return s.prototype.dispose=function(){this._container.removeChild(this._canvas),this._charAtlas&&this._charAtlas.dispose()},s.prototype._initCanvas=function(){this._ctx=this._canvas.getContext("2d",{alpha:this._alpha}),this._alpha||this.clearAll()},s.prototype.onOptionsChanged=function(a){},s.prototype.onBlur=function(a){},s.prototype.onFocus=function(a){},s.prototype.onCursorMove=function(a){},s.prototype.onGridChanged=function(a,o,l){},s.prototype.onSelectionChanged=function(a,o,l,u){},s.prototype.setColors=function(a,o){this._refreshCharAtlas(a,o)},s.prototype.setTransparency=function(a,o){if(o!==this._alpha){var l=this._canvas;this._alpha=o,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,l),this._refreshCharAtlas(a,this._colors),this.onGridChanged(a,0,a.rows-1)}},s.prototype._refreshCharAtlas=function(a,o){this._scaledCharWidth<=0&&this._scaledCharHeight<=0||(this._charAtlas=r.acquireCharAtlas(a,o,this._scaledCharWidth,this._scaledCharHeight),this._charAtlas.warmUp())},s.prototype.resize=function(a,o){this._scaledCellWidth=o.scaledCellWidth,this._scaledCellHeight=o.scaledCellHeight,this._scaledCharWidth=o.scaledCharWidth,this._scaledCharHeight=o.scaledCharHeight,this._scaledCharLeft=o.scaledCharLeft,this._scaledCharTop=o.scaledCharTop,this._canvas.width=o.scaledCanvasWidth,this._canvas.height=o.scaledCanvasHeight,this._canvas.style.width=o.canvasWidth+"px",this._canvas.style.height=o.canvasHeight+"px",this._alpha||this.clearAll(),this._refreshCharAtlas(a,this._colors)},s.prototype.fillCells=function(a,o,l,u){this._ctx.fillRect(a*this._scaledCellWidth,o*this._scaledCellHeight,l*this._scaledCellWidth,u*this._scaledCellHeight)},s.prototype.fillBottomLineAtCells=function(a,o,l){l===void 0&&(l=1),this._ctx.fillRect(a*this._scaledCellWidth,(o+1)*this._scaledCellHeight-window.devicePixelRatio-1,l*this._scaledCellWidth,window.devicePixelRatio)},s.prototype.fillLeftLineAtCell=function(a,o){this._ctx.fillRect(a*this._scaledCellWidth,o*this._scaledCellHeight,window.devicePixelRatio,this._scaledCellHeight)},s.prototype.strokeRectAtCell=function(a,o,l,u){this._ctx.lineWidth=window.devicePixelRatio,this._ctx.strokeRect(a*this._scaledCellWidth+window.devicePixelRatio/2,o*this._scaledCellHeight+window.devicePixelRatio/2,l*this._scaledCellWidth-window.devicePixelRatio,u*this._scaledCellHeight-window.devicePixelRatio)},s.prototype.clearAll=function(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))},s.prototype.clearCells=function(a,o,l,u){this._alpha?this._ctx.clearRect(a*this._scaledCellWidth,o*this._scaledCellHeight,l*this._scaledCellWidth,u*this._scaledCellHeight):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(a*this._scaledCellWidth,o*this._scaledCellHeight,l*this._scaledCellWidth,u*this._scaledCellHeight))},s.prototype.fillCharTrueColor=function(a,o,l,u){this._ctx.font=this._getFont(a,!1,!1),this._ctx.textBaseline="middle",this._clipRow(a,u),this._ctx.fillText(o.getChars(),l*this._scaledCellWidth+this._scaledCharLeft,u*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight/2)},s.prototype.drawChars=function(a,o,l,u){if(o.isFgRGB()||o.isBgRGB()){this._drawUncachedChars(a,o,l,u);return}var f,c;o.isInverse()?(f=o.isBgDefault()?t.INVERTED_DEFAULT_COLOR:o.getBgColor(),c=o.isFgDefault()?t.INVERTED_DEFAULT_COLOR:o.getFgColor()):(c=o.isBgDefault()?e.DEFAULT_COLOR:o.getBgColor(),f=o.isFgDefault()?e.DEFAULT_COLOR:o.getFgColor());var h=a.options.drawBoldTextInBrightColors&&o.isBold()&&f<8&&f!==t.INVERTED_DEFAULT_COLOR;f+=h?8:0,this._currentGlyphIdentifier.chars=o.getChars()||n.WHITESPACE_CELL_CHAR,this._currentGlyphIdentifier.code=o.getCode()||n.WHITESPACE_CELL_CODE,this._currentGlyphIdentifier.bg=c,this._currentGlyphIdentifier.fg=f,this._currentGlyphIdentifier.bold=o.isBold()&&a.options.enableBold,this._currentGlyphIdentifier.dim=!!o.isDim(),this._currentGlyphIdentifier.italic=!!o.isItalic();var d=this._charAtlas&&this._charAtlas.draw(this._ctx,this._currentGlyphIdentifier,l*this._scaledCellWidth+this._scaledCharLeft,u*this._scaledCellHeight+this._scaledCharTop);d||this._drawUncachedChars(a,o,l,u)},s.prototype._drawUncachedChars=function(a,o,l,u){if(this._ctx.save(),this._ctx.font=this._getFont(a,o.isBold()&&a.options.enableBold,!!o.isItalic()),this._ctx.textBaseline="middle",o.isInverse())o.isBgDefault()?this._ctx.fillStyle=this._colors.background.css:o.isBgRGB()?this._ctx.fillStyle="rgb("+n.AttributeData.toColorRGB(o.getBgColor()).join(",")+")":this._ctx.fillStyle=this._colors.ansi[o.getBgColor()].css;else if(o.isFgDefault())this._ctx.fillStyle=this._colors.foreground.css;else if(o.isFgRGB())this._ctx.fillStyle="rgb("+n.AttributeData.toColorRGB(o.getFgColor()).join(",")+")";else{var f=o.getFgColor();a.options.drawBoldTextInBrightColors&&o.isBold()&&f<8&&(f+=8),this._ctx.fillStyle=this._colors.ansi[f].css}this._clipRow(a,u),o.isDim()&&(this._ctx.globalAlpha=t.DIM_OPACITY),this._ctx.fillText(o.getChars(),l*this._scaledCellWidth+this._scaledCharLeft,u*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight/2),this._ctx.restore()},s.prototype._clipRow=function(a,o){this._ctx.beginPath(),this._ctx.rect(0,o*this._scaledCellHeight,a.cols*this._scaledCellWidth,this._scaledCellHeight),this._ctx.clip()},s.prototype._getFont=function(a,o,l){var u=o?a.options.fontWeightBold:a.options.fontWeight,f=l?"italic":"";return f+" "+u+" "+a.options.fontSize*window.devicePixelRatio+"px "+a.options.fontFamily},s}();return nl.BaseRenderLayer=i,nl}var ji={},_1;function Pg(){if(_1)return ji;_1=1;var e=ji&&ji.__extends||function(){var i=function(s,a){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var u in l)l.hasOwnProperty(u)&&(o[u]=l[u])},i(s,a)};return function(s,a){i(s,a);function o(){this.constructor=s}s.prototype=a===null?Object.create(a):(o.prototype=a.prototype,new o)}}();Object.defineProperty(ji,"__esModule",{value:!0});var t=In(),r=function(i){e(s,i);function s(a,o,l){var u=i.call(this)||this;return u.content=0,u.combinedData="",u.fg=a.fg,u.bg=a.bg,u.combinedData=o,u._width=l,u}return s.prototype.isCombined=function(){return 2097152},s.prototype.getWidth=function(){return this._width},s.prototype.getChars=function(){return this.combinedData},s.prototype.getCode=function(){return 2097151},s.prototype.setFromCharData=function(a){throw new Error("not implemented")},s.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},s}(t.AttributeData);ji.JoinedCellData=r;var n=function(){function i(s){this._terminal=s,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new t.CellData}return i.prototype.registerCharacterJoiner=function(s){var a={id:this._nextCharacterJoinerId++,handler:s};return this._characterJoiners.push(a),a.id},i.prototype.deregisterCharacterJoiner=function(s){for(var a=0;a<this._characterJoiners.length;a++)if(this._characterJoiners[a].id===s)return this._characterJoiners.splice(a,1),!0;return!1},i.prototype.getJoinedCharacters=function(s){if(this._characterJoiners.length===0)return[];var a=this._terminal.buffer.lines.get(s);if(a.length===0)return[];for(var o=[],l=a.translateToString(!0),u=0,f=0,c=0,h=a.getFg(0),d=a.getBg(0),p=0;p<a.getTrimmedLength();p++)if(a.loadCell(p,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==h||this._workCell.bg!==d){if(p-u>1)for(var v=this._getJoinedRanges(l,c,f,a,u),_=0;_<v.length;_++)o.push(v[_]);u=p,c=f,h=this._workCell.fg,d=this._workCell.bg}f+=this._workCell.getChars().length||t.WHITESPACE_CELL_CHAR.length}if(this._terminal.cols-u>1)for(var v=this._getJoinedRanges(l,c,f,a,u),_=0;_<v.length;_++)o.push(v[_]);return o},i.prototype._getJoinedRanges=function(s,a,o,l,u){for(var f=s.substring(a,o),c=this._characterJoiners[0].handler(f),h=1;h<this._characterJoiners.length;h++)for(var d=this._characterJoiners[h].handler(f),p=0;p<d.length;p++)i._mergeRanges(c,d[p]);return this._stringRangesToCellRanges(c,l,u),c},i.prototype._stringRangesToCellRanges=function(s,a,o){var l=0,u=!1,f=0,c=s[l];if(c){for(var h=o;h<this._terminal.cols;h++){var d=a.getWidth(h),p=a.getString(h).length||t.WHITESPACE_CELL_CHAR.length;if(d!==0){if(!u&&c[0]<=f&&(c[0]=h,u=!0),c[1]<=f){if(c[1]=h,c=s[++l],!c)break;c[0]<=f?(c[0]=h,u=!0):u=!1}f+=p}}c&&(c[1]=this._terminal.cols)}},i._mergeRanges=function(s,a){for(var o=!1,l=0;l<s.length;l++){var u=s[l];if(o){if(a[1]<=u[0])return s[l-1][1]=a[1],s;if(a[1]<=u[1])return s[l-1][1]=Math.max(a[1],u[1]),s.splice(l,1),o=!1,s;s.splice(l,1),l--}else{if(a[1]<=u[0])return s.splice(l,0,a),s;if(a[1]<=u[1])return u[0]=Math.min(a[0],u[0]),s;a[0]<u[1]&&(u[0]=Math.min(a[0],u[0]),o=!0);continue}}return o?s[s.length-1][1]=a[1]:s.push(a),s},i}();return ji.CharacterJoinerRegistry=n,ji}var g1;function K4(){if(g1)return Es;g1=1;var e=Es&&Es.__extends||function(){var a=function(o,l){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var c in f)f.hasOwnProperty(c)&&(u[c]=f[c])},a(o,l)};return function(o,l){a(o,l);function u(){this.constructor=o}o.prototype=l===null?Object.create(l):(u.prototype=l.prototype,new u)}}();Object.defineProperty(Es,"__esModule",{value:!0});var t=q4(),r=Uc(),n=In(),i=Pg(),s=function(a){e(o,a);function o(l,u,f,c,h){var d=a.call(this,l,"text",u,h,f)||this;return d._characterOverlapCache={},d._workCell=new n.CellData,d._state=new t.GridCache,d._characterJoinerRegistry=c,d}return o.prototype.resize=function(l,u){a.prototype.resize.call(this,l,u);var f=this._getFont(l,!1,!1);(this._characterWidth!==u.scaledCharWidth||this._characterFont!==f)&&(this._characterWidth=u.scaledCharWidth,this._characterFont=f,this._characterOverlapCache={}),this._state.clear(),this._state.resize(l.cols,l.rows)},o.prototype.reset=function(l){this._state.clear(),this.clearAll()},o.prototype._forEachCell=function(l,u,f,c,h){for(var d=u;d<=f;d++)for(var p=d+l.buffer.ydisp,v=l.buffer.lines.get(p),_=c?c.getJoinedCharacters(p):[],m=0;m<l.cols;m++){v.loadCell(m,this._workCell);var g=this._workCell,x=!1,L=m;if(g.getWidth()!==0){if(_.length>0&&m===_[0][0]){x=!0;var y=_.shift();g=new i.JoinedCellData(this._workCell,v.translateToString(!0,y[0],y[1]),y[1]-y[0]),L=y[1]-1}!x&&this._isOverlapping(g)&&L<v.length-1&&v.getCodePoint(L+1)===n.NULL_CELL_CODE&&(g.content&=-12582913,g.content|=2<<22),h(g,m,d),m=L}}},o.prototype._drawBackground=function(l,u,f){var c=this,h=this._ctx,d=l.cols,p=0,v=0,_=null;h.save(),this._forEachCell(l,u,f,null,function(m,g,x){var L=null;m.isInverse()?m.isFgDefault()?L=c._colors.foreground.css:m.isFgRGB()?L="rgb("+n.AttributeData.toColorRGB(m.getFgColor()).join(",")+")":L=c._colors.ansi[m.getFgColor()].css:m.isBgRGB()?L="rgb("+n.AttributeData.toColorRGB(m.getBgColor()).join(",")+")":m.isBgPalette()&&(L=c._colors.ansi[m.getBgColor()].css),_===null&&(p=g,v=x),x!==v?(h.fillStyle=_,c.fillCells(p,v,d-p,1),p=g,v=x):_!==L&&(h.fillStyle=_,c.fillCells(p,v,g-p,1),p=g,v=x),_=L}),_!==null&&(h.fillStyle=_,this.fillCells(p,v,d-p,1)),h.restore()},o.prototype._drawForeground=function(l,u,f){var c=this;this._forEachCell(l,u,f,this._characterJoinerRegistry,function(h,d,p){if(!h.isInvisible()&&(c.drawChars(l,h,d,p),h.isUnderline())){if(c._ctx.save(),h.isInverse())h.isBgDefault()?c._ctx.fillStyle=c._colors.background.css:h.isBgRGB()?c._ctx.fillStyle="rgb("+n.AttributeData.toColorRGB(h.getBgColor()).join(",")+")":c._ctx.fillStyle=c._colors.ansi[h.getBgColor()].css;else if(h.isFgDefault())c._ctx.fillStyle=c._colors.foreground.css;else if(h.isFgRGB())c._ctx.fillStyle="rgb("+n.AttributeData.toColorRGB(h.getFgColor()).join(",")+")";else{var v=h.getFgColor();l.options.drawBoldTextInBrightColors&&h.isBold()&&v<8&&(v+=8),c._ctx.fillStyle=c._colors.ansi[v].css}c.fillBottomLineAtCells(d,p,h.getWidth()),c._ctx.restore()}})},o.prototype.onGridChanged=function(l,u,f){this._state.cache.length!==0&&(this._charAtlas&&this._charAtlas.beginFrame(),this.clearCells(0,u,l.cols,f-u+1),this._drawBackground(l,u,f),this._drawForeground(l,u,f))},o.prototype.onOptionsChanged=function(l){this.setTransparency(l,l.options.allowTransparency)},o.prototype._isOverlapping=function(l){if(l.getWidth()!==1||l.getCode()<256)return!1;var u=l.getChars();if(this._characterOverlapCache.hasOwnProperty(u))return this._characterOverlapCache[u];this._ctx.save(),this._ctx.font=this._characterFont;var f=Math.floor(this._ctx.measureText(u).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[u]=f,f},o}(r.BaseRenderLayer);return Es.TextRenderLayer=s,Es}var Ms={},v1;function Y4(){if(v1)return Ms;v1=1;var e=Ms&&Ms.__extends||function(){var n=function(i,s){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var l in o)o.hasOwnProperty(l)&&(a[l]=o[l])},n(i,s)};return function(i,s){n(i,s);function a(){this.constructor=i}i.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)}}();Object.defineProperty(Ms,"__esModule",{value:!0});var t=Uc(),r=function(n){e(i,n);function i(s,a,o){var l=n.call(this,s,"selection",a,!0,o)||this;return l._clearState(),l}return i.prototype._clearState=function(){this._state={start:null,end:null,columnSelectMode:null,ydisp:null}},i.prototype.resize=function(s,a){n.prototype.resize.call(this,s,a),this._clearState()},i.prototype.reset=function(s){this._state.start&&this._state.end&&(this._clearState(),this.clearAll())},i.prototype.onSelectionChanged=function(s,a,o,l){if(this._didStateChange(a,o,l,s.buffer.ydisp)){if(this.clearAll(),!a||!o){this._clearState();return}var u=a[1]-s.buffer.ydisp,f=o[1]-s.buffer.ydisp,c=Math.max(u,0),h=Math.min(f,s.rows-1);if(!(c>=s.rows||h<0)){if(this._ctx.fillStyle=this._colors.selection.css,l){var d=a[0],p=o[0]-d,v=h-c+1;this.fillCells(d,c,p,v)}else{var d=u===c?a[0]:0,_=c===h?o[0]:s.cols;this.fillCells(d,c,_-d,1);var m=Math.max(h-c-1,0);if(this.fillCells(0,c+1,s.cols,m),c!==h){var g=f===h?o[0]:s.cols;this.fillCells(0,h,g,1)}}this._state.start=[a[0],a[1]],this._state.end=[o[0],o[1]],this._state.columnSelectMode=l,this._state.ydisp=s.buffer.ydisp}}},i.prototype._didStateChange=function(s,a,o,l){return!this._areCoordinatesEqual(s,this._state.start)||!this._areCoordinatesEqual(a,this._state.end)||o!==this._state.columnSelectMode||l!==this._state.ydisp},i.prototype._areCoordinatesEqual=function(s,a){return!s||!a?!1:s[0]===a[0]&&s[1]===a[1]},i}(t.BaseRenderLayer);return Ms.SelectionRenderLayer=r,Ms}var Ls={},y1;function G4(){if(y1)return Ls;y1=1;var e=Ls&&Ls.__extends||function(){var a=function(o,l){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var c in f)f.hasOwnProperty(c)&&(u[c]=f[c])},a(o,l)};return function(o,l){a(o,l);function u(){this.constructor=o}o.prototype=l===null?Object.create(l):(u.prototype=l.prototype,new u)}}();Object.defineProperty(Ls,"__esModule",{value:!0});var t=Uc(),r=In(),n=600,i=function(a){e(o,a);function o(l,u,f){var c=a.call(this,l,"cursor",u,!0,f)||this;return c._cell=new r.CellData,c._state={x:null,y:null,isFocused:null,style:null,width:null},c._cursorRenderers={bar:c._renderBarCursor.bind(c),block:c._renderBlockCursor.bind(c),underline:c._renderUnderlineCursor.bind(c)},c}return o.prototype.resize=function(l,u){a.prototype.resize.call(this,l,u),this._state={x:null,y:null,isFocused:null,style:null,width:null}},o.prototype.reset=function(l){this._clearCursor(),this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=null,this.onOptionsChanged(l))},o.prototype.onBlur=function(l){this._cursorBlinkStateManager&&this._cursorBlinkStateManager.pause(),l.refresh(l.buffer.y,l.buffer.y)},o.prototype.onFocus=function(l){this._cursorBlinkStateManager?this._cursorBlinkStateManager.resume(l):l.refresh(l.buffer.y,l.buffer.y)},o.prototype.onOptionsChanged=function(l){var u=this;l.options.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new s(l,function(){u._render(l,!0)})):(this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=null),l.refresh(l.buffer.y,l.buffer.y))},o.prototype.onCursorMove=function(l){this._cursorBlinkStateManager&&this._cursorBlinkStateManager.restartBlinkAnimation(l)},o.prototype.onGridChanged=function(l,u,f){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(l,!1):this._cursorBlinkStateManager.restartBlinkAnimation(l)},o.prototype._render=function(l,u){if(!l.cursorState||l.cursorHidden){this._clearCursor();return}var f=l.buffer.ybase+l.buffer.y,c=f-l.buffer.ydisp;if(c<0||c>=l.rows){this._clearCursor();return}if(l.buffer.lines.get(f).loadCell(l.buffer.x,this._cell),this._cell.content!==void 0){if(!l.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._renderBlurCursor(l,l.buffer.x,c,this._cell),this._ctx.restore(),this._state.x=l.buffer.x,this._state.y=c,this._state.isFocused=!1,this._state.style=l.options.cursorStyle,this._state.width=this._cell.getWidth();return}if(this._cursorBlinkStateManager&&!this._cursorBlinkStateManager.isCursorVisible){this._clearCursor();return}if(this._state){if(this._state.x===l.buffer.x&&this._state.y===c&&this._state.isFocused===l.isFocused&&this._state.style===l.options.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[l.options.cursorStyle||"block"](l,l.buffer.x,c,this._cell),this._ctx.restore(),this._state.x=l.buffer.x,this._state.y=c,this._state.isFocused=!1,this._state.style=l.options.cursorStyle,this._state.width=this._cell.getWidth()}},o.prototype._clearCursor=function(){this._state&&(this.clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:null,y:null,isFocused:null,style:null,width:null})},o.prototype._renderBarCursor=function(l,u,f,c){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this.fillLeftLineAtCell(u,f),this._ctx.restore()},o.prototype._renderBlockCursor=function(l,u,f,c){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this.fillCells(u,f,c.getWidth(),1),this._ctx.fillStyle=this._colors.cursorAccent.css,this.fillCharTrueColor(l,c,u,f),this._ctx.restore()},o.prototype._renderUnderlineCursor=function(l,u,f,c){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this.fillBottomLineAtCells(u,f),this._ctx.restore()},o.prototype._renderBlurCursor=function(l,u,f,c){this._ctx.save(),this._ctx.strokeStyle=this._colors.cursor.css,this.strokeRectAtCell(u,f,c.getWidth(),1),this._ctx.restore()},o}(t.BaseRenderLayer);Ls.CursorRenderLayer=i;var s=function(){function a(o,l){this._renderCallback=l,this.isCursorVisible=!0,o.isFocused&&this._restartInterval()}return Object.defineProperty(a.prototype,"isPaused",{get:function(){return!(this._blinkStartTimeout||this._blinkInterval)},enumerable:!0,configurable:!0}),a.prototype.dispose=function(){this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=null),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=null),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=null)},a.prototype.restartBlinkAnimation=function(o){var l=this;this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){l._renderCallback(),l._animationFrame=null})))},a.prototype._restartInterval=function(o){var l=this;o===void 0&&(o=n),this._blinkInterval&&window.clearInterval(this._blinkInterval),this._blinkStartTimeout=setTimeout(function(){if(l._animationTimeRestarted){var u=n-(Date.now()-l._animationTimeRestarted);if(l._animationTimeRestarted=null,u>0){l._restartInterval(u);return}}l.isCursorVisible=!1,l._animationFrame=window.requestAnimationFrame(function(){l._renderCallback(),l._animationFrame=null}),l._blinkInterval=setInterval(function(){if(l._animationTimeRestarted){var f=n-(Date.now()-l._animationTimeRestarted);l._animationTimeRestarted=null,l._restartInterval(f);return}l.isCursorVisible=!l.isCursorVisible,l._animationFrame=window.requestAnimationFrame(function(){l._renderCallback(),l._animationFrame=null})},n)},o)},a.prototype.pause=function(){this.isCursorVisible=!0,this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=null),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=null),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=null)},a.prototype.resume=function(o){this._animationTimeRestarted=null,this._restartInterval(),this.restartBlinkAnimation(o)},a}();return Ls}var Bs={},b1;function X4(){if(b1)return Bs;b1=1;var e=Bs&&Bs.__extends||function(){var s=function(a,o){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,u){l.__proto__=u}||function(l,u){for(var f in u)u.hasOwnProperty(f)&&(l[f]=u[f])},s(a,o)};return function(a,o){s(a,o);function l(){this.constructor=a}a.prototype=o===null?Object.create(o):(l.prototype=o.prototype,new l)}}();Object.defineProperty(Bs,"__esModule",{value:!0});var t=Uc(),r=ds(),n=ed(),i=function(s){e(a,s);function a(o,l,u,f){var c=s.call(this,o,"link",l,!0,u)||this;return c._state=null,f.linkifier.onLinkHover(function(h){return c._onLinkHover(h)}),f.linkifier.onLinkLeave(function(h){return c._onLinkLeave(h)}),c}return a.prototype.resize=function(o,l){s.prototype.resize.call(this,o,l),this._state=null},a.prototype.reset=function(o){this._clearCurrentLink()},a.prototype._clearCurrentLink=function(){if(this._state){this.clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);var o=this._state.y2-this._state.y1-1;o>0&&this.clearCells(0,this._state.y1+1,this._state.cols,o),this.clearCells(0,this._state.y2,this._state.x2,1),this._state=null}},a.prototype._onLinkHover=function(o){if(o.fg===r.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._colors.background.css:n.is256Color(o.fg)?this._ctx.fillStyle=this._colors.ansi[o.fg].css:this._ctx.fillStyle=this._colors.foreground.css,o.y1===o.y2)this.fillBottomLineAtCells(o.x1,o.y1,o.x2-o.x1);else{this.fillBottomLineAtCells(o.x1,o.y1,o.cols-o.x1);for(var l=o.y1+1;l<o.y2;l++)this.fillBottomLineAtCells(0,l,o.cols);this.fillBottomLineAtCells(0,o.y2,o.x2)}this._state=o},a.prototype._onLinkLeave=function(o){this._clearCurrentLink()},a}(t.BaseRenderLayer);return Bs.LinkRenderLayer=i,Bs}var w1;function Z4(){if(w1)return xs;w1=1;var e=xs&&xs.__extends||function(){var l=function(u,f){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,h){c.__proto__=h}||function(c,h){for(var d in h)h.hasOwnProperty(d)&&(c[d]=h[d])},l(u,f)};return function(u,f){l(u,f);function c(){this.constructor=u}u.prototype=f===null?Object.create(f):(c.prototype=f.prototype,new c)}}();Object.defineProperty(xs,"__esModule",{value:!0});var t=K4(),r=Y4(),n=G4(),i=X4(),s=Pg(),a=dn(),o=function(l){e(u,l);function u(f,c){var h=l.call(this)||this;h._terminal=f,h._colors=c;var d=h._terminal.options.allowTransparency;return h._characterJoinerRegistry=new s.CharacterJoinerRegistry(f),h._renderLayers=[new t.TextRenderLayer(h._terminal.screenElement,0,h._colors,h._characterJoinerRegistry,d),new r.SelectionRenderLayer(h._terminal.screenElement,1,h._colors),new i.LinkRenderLayer(h._terminal.screenElement,2,h._colors,h._terminal),new n.CursorRenderLayer(h._terminal.screenElement,3,h._colors)],h.dimensions={scaledCharWidth:null,scaledCharHeight:null,scaledCellWidth:null,scaledCellHeight:null,scaledCharLeft:null,scaledCharTop:null,scaledCanvasWidth:null,scaledCanvasHeight:null,canvasWidth:null,canvasHeight:null,actualCellWidth:null,actualCellHeight:null},h._devicePixelRatio=window.devicePixelRatio,h._updateDimensions(),h.onOptionsChanged(),h}return u.prototype.dispose=function(){l.prototype.dispose.call(this),this._renderLayers.forEach(function(f){return f.dispose()})},u.prototype.onDevicePixelRatioChange=function(){this._devicePixelRatio!==window.devicePixelRatio&&(this._devicePixelRatio=window.devicePixelRatio,this.onResize(this._terminal.cols,this._terminal.rows))},u.prototype.setColors=function(f){var c=this;this._colors=f,this._renderLayers.forEach(function(h){h.setColors(c._terminal,c._colors),h.reset(c._terminal)})},u.prototype.onResize=function(f,c){var h=this;this._updateDimensions(),this._renderLayers.forEach(function(d){return d.resize(h._terminal,h.dimensions)}),this._terminal.screenElement.style.width=this.dimensions.canvasWidth+"px",this._terminal.screenElement.style.height=this.dimensions.canvasHeight+"px"},u.prototype.onCharSizeChanged=function(){this.onResize(this._terminal.cols,this._terminal.rows)},u.prototype.onBlur=function(){var f=this;this._runOperation(function(c){return c.onBlur(f._terminal)})},u.prototype.onFocus=function(){var f=this;this._runOperation(function(c){return c.onFocus(f._terminal)})},u.prototype.onSelectionChanged=function(f,c,h){var d=this;h===void 0&&(h=!1),this._runOperation(function(p){return p.onSelectionChanged(d._terminal,f,c,h)})},u.prototype.onCursorMove=function(){var f=this;this._runOperation(function(c){return c.onCursorMove(f._terminal)})},u.prototype.onOptionsChanged=function(){var f=this;this._runOperation(function(c){return c.onOptionsChanged(f._terminal)})},u.prototype.clear=function(){var f=this;this._runOperation(function(c){return c.reset(f._terminal)})},u.prototype._runOperation=function(f){this._renderLayers.forEach(function(c){return f(c)})},u.prototype.renderRows=function(f,c){var h=this;this._renderLayers.forEach(function(d){return d.onGridChanged(h._terminal,f,c)})},u.prototype._updateDimensions=function(){!this._terminal.charMeasure.width||!this._terminal.charMeasure.height||(this.dimensions.scaledCharWidth=Math.floor(this._terminal.charMeasure.width*window.devicePixelRatio),this.dimensions.scaledCharHeight=Math.ceil(this._terminal.charMeasure.height*window.devicePixelRatio),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._terminal.options.lineHeight),this.dimensions.scaledCharTop=this._terminal.options.lineHeight===1?0:Math.round((this.dimensions.scaledCellHeight-this.dimensions.scaledCharHeight)/2),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._terminal.options.letterSpacing),this.dimensions.scaledCharLeft=Math.floor(this._terminal.options.letterSpacing/2),this.dimensions.scaledCanvasHeight=this._terminal.rows*this.dimensions.scaledCellHeight,this.dimensions.scaledCanvasWidth=this._terminal.cols*this.dimensions.scaledCellWidth,this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._terminal.rows,this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._terminal.cols)},u.prototype.registerCharacterJoiner=function(f){return this._characterJoinerRegistry.registerCharacterJoiner(f)},u.prototype.deregisterCharacterJoiner=function(f){return this._characterJoinerRegistry.deregisterCharacterJoiner(f)},u}(a.Disposable);return xs.Renderer=o,xs}var ol={},Ni={},S1;function jg(){if(S1)return Ni;S1=1;var e=Ni&&Ni.__extends||function(){var a=function(o,l){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var c in f)f.hasOwnProperty(c)&&(u[c]=f[c])},a(o,l)};return function(o,l){a(o,l);function u(){this.constructor=o}o.prototype=l===null?Object.create(l):(u.prototype=l.prototype,new u)}}();Object.defineProperty(Ni,"__esModule",{value:!0});var t=dn(),r=Ia(),n=500,i=function(a){e(o,a);function o(l){var u=a.call(this)||this;return u._terminal=l,u._zones=[],u._areZonesActive=!1,u._tooltipTimeout=null,u._currentZone=null,u._lastHoverCoords=[null,null],u.register(r.addDisposableDomListener(u._terminal.element,"mousedown",function(f){return u._onMouseDown(f)})),u._mouseMoveListener=function(f){return u._onMouseMove(f)},u._mouseLeaveListener=function(f){return u._onMouseLeave(f)},u._clickListener=function(f){return u._onClick(f)},u}return o.prototype.dispose=function(){a.prototype.dispose.call(this),this._deactivate()},o.prototype.add=function(l){this._zones.push(l),this._zones.length===1&&this._activate()},o.prototype.clearAll=function(l,u){if(this._zones.length!==0){u||(l=0,u=this._terminal.rows-1);for(var f=0;f<this._zones.length;f++){var c=this._zones[f];(c.y1>l&&c.y1<=u+1||c.y2>l&&c.y2<=u+1||c.y1<l&&c.y2>u+1)&&(this._currentZone&&this._currentZone===c&&(this._currentZone.leaveCallback(),this._currentZone=null),this._zones.splice(f--,1))}this._zones.length===0&&this._deactivate()}},o.prototype._activate=function(){this._areZonesActive||(this._areZonesActive=!0,this._terminal.element.addEventListener("mousemove",this._mouseMoveListener),this._terminal.element.addEventListener("mouseleave",this._mouseLeaveListener),this._terminal.element.addEventListener("click",this._clickListener))},o.prototype._deactivate=function(){this._areZonesActive&&(this._areZonesActive=!1,this._terminal.element.removeEventListener("mousemove",this._mouseMoveListener),this._terminal.element.removeEventListener("mouseleave",this._mouseLeaveListener),this._terminal.element.removeEventListener("click",this._clickListener))},o.prototype._onMouseMove=function(l){(this._lastHoverCoords[0]!==l.pageX||this._lastHoverCoords[1]!==l.pageY)&&(this._onHover(l),this._lastHoverCoords=[l.pageX,l.pageY])},o.prototype._onHover=function(l){var u=this,f=this._findZoneEventAt(l);f!==this._currentZone&&(this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=null,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout)),f&&(this._currentZone=f,f.hoverCallback&&f.hoverCallback(l),this._tooltipTimeout=setTimeout(function(){return u._onTooltip(l)},n)))},o.prototype._onTooltip=function(l){this._tooltipTimeout=null;var u=this._findZoneEventAt(l);u&&u.tooltipCallback&&u.tooltipCallback(l)},o.prototype._onMouseDown=function(l){if(this._initialSelectionLength=this._terminal.getSelection().length,!!this._areZonesActive){var u=this._findZoneEventAt(l);u&&u.willLinkActivate(l)&&(l.preventDefault(),l.stopImmediatePropagation())}},o.prototype._onMouseLeave=function(l){this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=null,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout))},o.prototype._onClick=function(l){var u=this._findZoneEventAt(l),f=this._terminal.getSelection().length;u&&f===this._initialSelectionLength&&(u.clickCallback(l),l.preventDefault(),l.stopImmediatePropagation())},o.prototype._findZoneEventAt=function(l){var u=this._terminal.mouseHelper.getCoords(l,this._terminal.screenElement,this._terminal.charMeasure,this._terminal.cols,this._terminal.rows);if(!u)return null;for(var f=u[0],c=u[1],h=0;h<this._zones.length;h++){var d=this._zones[h];if(d.y1===d.y2){if(c===d.y1&&f>=d.x1&&f<d.x2)return d}else if(c===d.y1&&f>=d.x1||c===d.y2&&f<d.x2||c>d.y1&&c<d.y2)return d}return null},o}(t.Disposable);Ni.MouseZoneManager=i;var s=function(){function a(o,l,u,f,c,h,d,p,v){this.x1=o,this.y1=l,this.x2=u,this.y2=f,this.clickCallback=c,this.hoverCallback=h,this.tooltipCallback=d,this.leaveCallback=p,this.willLinkActivate=v}return a}();return Ni.MouseZone=s,Ni}var C1;function Q4(){if(C1)return ol;C1=1,Object.defineProperty(ol,"__esModule",{value:!0});var e=jg(),t=Ig(),r=Jn(),n=function(){function i(s){this._terminal=s,this._linkMatchers=[],this._nextLinkMatcherId=0,this._onLinkHover=new r.EventEmitter2,this._onLinkLeave=new r.EventEmitter2,this._onLinkTooltip=new r.EventEmitter2,this._rowsToLinkify={start:null,end:null}}return Object.defineProperty(i.prototype,"onLinkHover",{get:function(){return this._onLinkHover.event},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"onLinkLeave",{get:function(){return this._onLinkLeave.event},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"onLinkTooltip",{get:function(){return this._onLinkTooltip.event},enumerable:!0,configurable:!0}),i.prototype.attachToDom=function(s){this._mouseZoneManager=s},i.prototype.linkifyRows=function(s,a){var o=this;this._mouseZoneManager&&(this._rowsToLinkify.start===null?(this._rowsToLinkify.start=s,this._rowsToLinkify.end=a):(this._rowsToLinkify.start=Math.min(this._rowsToLinkify.start,s),this._rowsToLinkify.end=Math.max(this._rowsToLinkify.end,a)),this._mouseZoneManager.clearAll(s,a),this._rowsTimeoutId&&clearTimeout(this._rowsTimeoutId),this._rowsTimeoutId=setTimeout(function(){return o._linkifyRows()},i.TIME_BEFORE_LINKIFY))},i.prototype._linkifyRows=function(){this._rowsTimeoutId=null;var s=this._terminal.buffer,a=s.ydisp+this._rowsToLinkify.start;if(!(a>=s.lines.length)){for(var o=s.ydisp+Math.min(this._rowsToLinkify.end,this._terminal.rows)+1,l=Math.ceil(i.OVERSCAN_CHAR_LIMIT/this._terminal.cols),u=this._terminal.buffer.iterator(!1,a,o,l,l);u.hasNext();)for(var f=u.next(),c=0;c<this._linkMatchers.length;c++)this._doLinkifyRow(f.range.first,f.content,this._linkMatchers[c]);this._rowsToLinkify.start=null,this._rowsToLinkify.end=null}},i.prototype.registerLinkMatcher=function(s,a,o){if(o===void 0&&(o={}),!a)throw new Error("handler must be defined");var l={id:this._nextLinkMatcherId++,regex:s,handler:a,matchIndex:o.matchIndex,validationCallback:o.validationCallback,hoverTooltipCallback:o.tooltipCallback,hoverLeaveCallback:o.leaveCallback,willLinkActivate:o.willLinkActivate,priority:o.priority||0};return this._addLinkMatcherToList(l),l.id},i.prototype._addLinkMatcherToList=function(s){if(this._linkMatchers.length===0){this._linkMatchers.push(s);return}for(var a=this._linkMatchers.length-1;a>=0;a--)if(s.priority<=this._linkMatchers[a].priority){this._linkMatchers.splice(a+1,0,s);return}this._linkMatchers.splice(0,0,s)},i.prototype.deregisterLinkMatcher=function(s){for(var a=0;a<this._linkMatchers.length;a++)if(this._linkMatchers[a].id===s)return this._linkMatchers.splice(a,1),!0;return!1},i.prototype._doLinkifyRow=function(s,a,o){for(var l=this,u=new RegExp(o.regex.source,o.regex.flags+"g"),f,c=-1,h=function(){var v=f[typeof o.matchIndex!="number"?0:o.matchIndex];if(!v){if(d._terminal.debug)throw console.log({match:f,matcher:o}),new Error("match found without corresponding matchIndex");return"break"}if(c=a.indexOf(v,c+1),u.lastIndex=c+v.length,c<0)return"break";var _=d._terminal.buffer.stringIndexToBufferIndex(s,c);if(_[0]<0)return"break";var m=d._terminal.buffer.lines.get(_[0]),g=m.getFg(_[1]),x;g&&(x=g>>9&511),o.validationCallback?o.validationCallback(v,function(L){l._rowsTimeoutId||L&&l._addLink(_[1],_[0]-l._terminal.buffer.ydisp,v,o,x)}):d._addLink(_[1],_[0]-d._terminal.buffer.ydisp,v,o,x)},d=this;(f=u.exec(a))!==null;){var p=h();if(p==="break")break}},i.prototype._addLink=function(s,a,o,l,u){var f=this,c=t.getStringCellWidth(o),h=s%this._terminal.cols,d=a+Math.floor(s/this._terminal.cols),p=(h+c)%this._terminal.cols,v=d+Math.floor((h+c)/this._terminal.cols);p===0&&(p=this._terminal.cols,v--),this._mouseZoneManager.add(new e.MouseZone(h+1,d+1,p+1,v+1,function(_){if(l.handler)return l.handler(_,o);window.open(o,"_blank")},function(){f._onLinkHover.fire(f._createLinkHoverEvent(h,d,p,v,u)),f._terminal.element.classList.add("xterm-cursor-pointer")},function(_){f._onLinkTooltip.fire(f._createLinkHoverEvent(h,d,p,v,u)),l.hoverTooltipCallback&&l.hoverTooltipCallback(_,o)},function(){f._onLinkLeave.fire(f._createLinkHoverEvent(h,d,p,v,u)),f._terminal.element.classList.remove("xterm-cursor-pointer"),l.hoverLeaveCallback&&l.hoverLeaveCallback()},function(_){return l.willLinkActivate?l.willLinkActivate(_,o):!0}))},i.prototype._createLinkHoverEvent=function(s,a,o,l,u){return{x1:s,y1:a,x2:o,y2:l,cols:this._terminal.cols,fg:u}},i.TIME_BEFORE_LINKIFY=200,i.OVERSCAN_CHAR_LIMIT=2e3,i}();return ol.Linkifier=n,ol}var al={},ll={},x1;function Ng(){if(x1)return ll;x1=1,Object.defineProperty(ll,"__esModule",{value:!0});var e=function(){function t(r){this._renderCoordinator=r}return t.getCoordsRelativeToElement=function(r,n){var i=n.getBoundingClientRect();return[r.clientX-i.left,r.clientY-i.top]},t.prototype.getCoords=function(r,n,i,s,a,o){if(!i.width||!i.height)return null;var l=t.getCoordsRelativeToElement(r,n);return l?(l[0]=Math.ceil((l[0]+(o?this._renderCoordinator.dimensions.actualCellWidth/2:0))/this._renderCoordinator.dimensions.actualCellWidth),l[1]=Math.ceil(l[1]/this._renderCoordinator.dimensions.actualCellHeight),l[0]=Math.min(Math.max(l[0],1),s+(o?1:0)),l[1]=Math.min(Math.max(l[1],1),a),l):null},t.prototype.getRawByteCoords=function(r,n,i,s,a){var o=this.getCoords(r,n,i,s,a),l=o[0],u=o[1];return l+=32,u+=32,{x:l,y:u}},t}();return ll.MouseHelper=e,ll}var cl={},E1;function J4(){if(E1)return cl;E1=1,Object.defineProperty(cl,"__esModule",{value:!0});var e=function(){function t(r){this._terminal=r,this.clearSelection()}return t.prototype.clearSelection=function(){this.selectionStart=null,this.selectionEnd=null,this.isSelectAllActive=!1,this.selectionStartLength=0},Object.defineProperty(t.prototype,"finalSelectionStart",{get:function(){return this.isSelectAllActive?[0,0]:!this.selectionEnd||!this.selectionStart?this.selectionStart:this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"finalSelectionEnd",{get:function(){if(this.isSelectAllActive)return[this._terminal.cols,this._terminal.buffer.ybase+this._terminal.rows-1];if(!this.selectionStart)return null;if(!this.selectionEnd||this.areSelectionValuesReversed()){var r=this.selectionStart[0]+this.selectionStartLength;return r>this._terminal.cols?[r%this._terminal.cols,this.selectionStart[1]+Math.floor(r/this._terminal.cols)]:[r,this.selectionStart[1]]}return this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]?[Math.max(this.selectionStart[0]+this.selectionStartLength,this.selectionEnd[0]),this.selectionEnd[1]]:this.selectionEnd},enumerable:!0,configurable:!0}),t.prototype.areSelectionValuesReversed=function(){var r=this.selectionStart,n=this.selectionEnd;return!r||!n?!1:r[1]>n[1]||r[1]===n[1]&&r[0]>n[0]},t.prototype.onTrim=function(r){return this.selectionStart&&(this.selectionStart[1]-=r),this.selectionEnd&&(this.selectionEnd[1]-=r),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)},t}();return cl.SelectionModel=e,cl}var ul={},A1;function ew(){if(A1)return ul;A1=1,Object.defineProperty(ul,"__esModule",{value:!0});var e=Nc(),t=function(){function n(i,s){var a;this._mouseEvent=i,this._terminal=s,this._lines=this._terminal.buffer.lines,this._startCol=this._terminal.buffer.x,this._startRow=this._terminal.buffer.y;var o=this._terminal.mouseHelper.getCoords(this._mouseEvent,this._terminal.element,this._terminal.charMeasure,this._terminal.cols,this._terminal.rows,!1);o&&(a=o.map(function(l){return l-1}),this._endCol=a[0],this._endRow=a[1])}return n.prototype.move=function(){this._mouseEvent.altKey&&this._endCol!==void 0&&this._endRow!==void 0&&this._terminal.handler(this._arrowSequences())},n.prototype._arrowSequences=function(){return this._terminal.buffer.hasScrollback?this._moveHorizontallyOnly():this._resetStartingRow()+this._moveToRequestedRow()+this._moveToRequestedCol()},n.prototype._resetStartingRow=function(){return this._moveToRequestedRow().length===0?"":r(this._bufferLine(this._startCol,this._startRow,this._startCol,this._startRow-this._wrappedRowsForRow(this._startRow),!1).length,this._sequence("D"))},n.prototype._moveToRequestedRow=function(){var i=this._startRow-this._wrappedRowsForRow(this._startRow),s=this._endRow-this._wrappedRowsForRow(this._endRow),a=Math.abs(i-s)-this._wrappedRowsCount();return r(a,this._sequence(this._verticalDirection()))},n.prototype._moveToRequestedCol=function(){var i;this._moveToRequestedRow().length>0?i=this._endRow-this._wrappedRowsForRow(this._endRow):i=this._startRow;var s=this._endRow,a=this._horizontalDirection();return r(this._bufferLine(this._startCol,i,this._endCol,s,a==="C").length,this._sequence(a))},n.prototype._moveHorizontallyOnly=function(){var i=this._horizontalDirection();return r(Math.abs(this._startCol-this._endCol),this._sequence(i))},n.prototype._wrappedRowsCount=function(){for(var i=0,s=this._startRow-this._wrappedRowsForRow(this._startRow),a=this._endRow-this._wrappedRowsForRow(this._endRow),o=0;o<Math.abs(s-a);o++){var l=this._verticalDirection()==="A"?-1:1;this._lines.get(s+l*o).isWrapped&&i++}return i},n.prototype._wrappedRowsForRow=function(i){for(var s=0,a=this._lines.get(i).isWrapped;a&&i>=0&&i<this._terminal.rows;)s++,i--,a=this._lines.get(i).isWrapped;return s},n.prototype._horizontalDirection=function(){var i;return this._moveToRequestedRow().length>0?i=this._endRow-this._wrappedRowsForRow(this._endRow):i=this._startRow,this._startCol<this._endCol&&i<=this._endRow||this._startCol>=this._endCol&&i<this._endRow?"C":"D"},n.prototype._verticalDirection=function(){return this._startRow>this._endRow?"A":"B"},n.prototype._bufferLine=function(i,s,a,o,l){for(var u=i,f=s,c="";u!==a||f!==o;)u+=l?1:-1,l&&u>this._terminal.cols-1?(c+=this._terminal.buffer.translateBufferLineToString(f,!1,i,u),u=0,i=0,f++):!l&&u<0&&(c+=this._terminal.buffer.translateBufferLineToString(f,!1,0,i+1),u=this._terminal.cols-1,i=u,f--);return c+this._terminal.buffer.translateBufferLineToString(f,!1,i,u)},n.prototype._sequence=function(i){var s=this._terminal.applicationCursor?"O":"[";return e.C0.ESC+s+i},n}();ul.AltClickHandler=t;function r(n,i){n=Math.floor(n);for(var s="",a=0;a<n;a++)s+=i;return s}return ul}var R1;function tw(){if(R1)return al;R1=1,Object.defineProperty(al,"__esModule",{value:!0});var e=Ng(),t=Fa(),r=J4(),n=ew(),i=In(),s=Jn(),a=50,o=15,l=50,u=500,f=` ()[]{}'"`,c=" ",h=new RegExp(c,"g"),d=function(){function p(v,_){this._terminal=v,this._charMeasure=_,this._enabled=!0,this._workCell=new i.CellData,this._onLinuxMouseSelection=new s.EventEmitter2,this._onRedrawRequest=new s.EventEmitter2,this._onSelectionChange=new s.EventEmitter2,this._initListeners(),this.enable(),this._model=new r.SelectionModel(v),this._activeSelectionMode=0}return Object.defineProperty(p.prototype,"onLinuxMouseSelection",{get:function(){return this._onLinuxMouseSelection.event},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"onRedrawRequest",{get:function(){return this._onRedrawRequest.event},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!0,configurable:!0}),p.prototype.dispose=function(){this._removeMouseDownListeners()},Object.defineProperty(p.prototype,"_buffer",{get:function(){return this._terminal.buffers.active},enumerable:!0,configurable:!0}),p.prototype._initListeners=function(){var v=this;this._mouseMoveListener=function(_){return v._onMouseMove(_)},this._mouseUpListener=function(_){return v._onMouseUp(_)},this.initBuffersListeners()},p.prototype.initBuffersListeners=function(){var v=this;this._trimListener=this._terminal.buffer.lines.onTrim(function(_){return v._onTrim(_)}),this._terminal.buffers.onBufferActivate(function(_){return v._onBufferActivate(_)})},p.prototype.disable=function(){this.clearSelection(),this._enabled=!1},p.prototype.enable=function(){this._enabled=!0},Object.defineProperty(p.prototype,"selectionStart",{get:function(){return this._model.finalSelectionStart},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"selectionEnd",{get:function(){return this._model.finalSelectionEnd},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"hasSelection",{get:function(){var v=this._model.finalSelectionStart,_=this._model.finalSelectionEnd;return!v||!_?!1:v[0]!==_[0]||v[1]!==_[1]},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"selectionText",{get:function(){var v=this._model.finalSelectionStart,_=this._model.finalSelectionEnd;if(!v||!_)return"";var m=[];if(this._activeSelectionMode===3){if(v[0]===_[0])return"";for(var g=v[1];g<=_[1];g++){var x=this._buffer.translateBufferLineToString(g,!0,v[0],_[0]);m.push(x)}}else{var L=v[1]===_[1]?_[0]:void 0;m.push(this._buffer.translateBufferLineToString(v[1],!0,v[0],L));for(var g=v[1]+1;g<=_[1]-1;g++){var y=this._buffer.lines.get(g),x=this._buffer.translateBufferLineToString(g,!0);y.isWrapped?m[m.length-1]+=x:m.push(x)}if(v[1]!==_[1]){var y=this._buffer.lines.get(_[1]),x=this._buffer.translateBufferLineToString(_[1],!0,0,_[0]);y.isWrapped?m[m.length-1]+=x:m.push(x)}}var M=m.map(function(F){return F.replace(h," ")}).join(t.isMSWindows?`\r
`:`
`);return M},enumerable:!0,configurable:!0}),p.prototype.clearSelection=function(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()},p.prototype.refresh=function(v){var _=this;if(this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame(function(){return _._refresh()})),t.isLinux&&v){var m=this.selectionText;m.length&&this._onLinuxMouseSelection.fire(this.selectionText)}},p.prototype._refresh=function(){this._refreshAnimationFrame=null,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})},p.prototype.isClickInSelection=function(v){var _=this._getMouseBufferCoords(v),m=this._model.finalSelectionStart,g=this._model.finalSelectionEnd;return!m||!g?!1:this._areCoordsInSelection(_,m,g)},p.prototype._areCoordsInSelection=function(v,_,m){return v[1]>_[1]&&v[1]<m[1]||_[1]===m[1]&&v[1]===_[1]&&v[0]>=_[0]&&v[0]<m[0]||_[1]<m[1]&&v[1]===m[1]&&v[0]<m[0]||_[1]<m[1]&&v[1]===_[1]&&v[0]>=_[0]},p.prototype.selectWordAtCursor=function(v){var _=this._getMouseBufferCoords(v);_&&(this._selectWordAt(_,!1),this._model.selectionEnd=null,this.refresh(!0))},p.prototype.selectAll=function(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()},p.prototype.selectLines=function(v,_){this._model.clearSelection(),v=Math.max(v,0),_=Math.min(_,this._terminal.buffer.lines.length-1),this._model.selectionStart=[0,v],this._model.selectionEnd=[this._terminal.cols,_],this.refresh(),this._onSelectionChange.fire()},p.prototype._onTrim=function(v){var _=this._model.onTrim(v);_&&this.refresh()},p.prototype._getMouseBufferCoords=function(v){var _=this._terminal.mouseHelper.getCoords(v,this._terminal.screenElement,this._charMeasure,this._terminal.cols,this._terminal.rows,!0);return _?(_[0]--,_[1]--,_[1]+=this._terminal.buffer.ydisp,_):null},p.prototype._getMouseEventScrollAmount=function(v){var _=e.MouseHelper.getCoordsRelativeToElement(v,this._terminal.screenElement)[1],m=this._terminal.rows*Math.ceil(this._charMeasure.height*this._terminal.options.lineHeight);return _>=0&&_<=m?0:(_>m&&(_-=m),_=Math.min(Math.max(_,-a),a),_/=a,_/Math.abs(_)+Math.round(_*(o-1)))},p.prototype.shouldForceSelection=function(v){return t.isMac?v.altKey&&this._terminal.options.macOptionClickForcesSelection:v.shiftKey},p.prototype.onMouseDown=function(v){if(this._mouseDownTimeStamp=v.timeStamp,!(v.button===2&&this.hasSelection)&&v.button===0){if(!this._enabled){if(!this.shouldForceSelection(v))return;v.stopPropagation()}v.preventDefault(),this._dragScrollAmount=0,this._enabled&&v.shiftKey?this._onIncrementalClick(v):v.detail===1?this._onSingleClick(v):v.detail===2?this._onDoubleClick(v):v.detail===3&&this._onTripleClick(v),this._addMouseDownListeners(),this.refresh(!0)}},p.prototype._addMouseDownListeners=function(){var v=this;this._terminal.element.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._terminal.element.ownerDocument.addEventListener("mouseup",this._mouseUpListener),this._dragScrollIntervalTimer=setInterval(function(){return v._dragScroll()},l)},p.prototype._removeMouseDownListeners=function(){this._terminal.element.ownerDocument&&(this._terminal.element.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._terminal.element.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=null},p.prototype._onIncrementalClick=function(v){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(v))},p.prototype._onSingleClick=function(v){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(v)?3:0,this._model.selectionStart=this._getMouseBufferCoords(v),!!this._model.selectionStart){this._model.selectionEnd=null;var _=this._buffer.lines.get(this._model.selectionStart[1]);_&&(_.length>=this._model.selectionStart[0]||_.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++)}},p.prototype._onDoubleClick=function(v){var _=this._getMouseBufferCoords(v);_&&(this._activeSelectionMode=1,this._selectWordAt(_,!0))},p.prototype._onTripleClick=function(v){var _=this._getMouseBufferCoords(v);_&&(this._activeSelectionMode=2,this._selectLineAt(_[1]))},p.prototype.shouldColumnSelect=function(v){return v.altKey&&!(t.isMac&&this._terminal.options.macOptionClickForcesSelection)},p.prototype._onMouseMove=function(v){v.stopImmediatePropagation();var _=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(v),!this._model.selectionEnd){this.refresh(!0);return}this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._terminal.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(v),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._terminal.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0)),this._model.selectionEnd[1]<this._buffer.lines.length&&this._buffer.lines.get(this._model.selectionEnd[1]).hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++,(!_||_[0]!==this._model.selectionEnd[0]||_[1]!==this._model.selectionEnd[1])&&this.refresh(!0)},p.prototype._dragScroll=function(){this._dragScrollAmount&&(this._terminal.scrollLines(this._dragScrollAmount,!1),this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._terminal.cols),this._model.selectionEnd[1]=Math.min(this._terminal.buffer.ydisp+this._terminal.rows,this._terminal.buffer.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=this._terminal.buffer.ydisp),this.refresh())},p.prototype._onMouseUp=function(v){var _=v.timeStamp-this._mouseDownTimeStamp;this._removeMouseDownListeners(),this.selectionText.length<=1&&_<u?new n.AltClickHandler(v,this._terminal).move():this.hasSelection&&this._onSelectionChange.fire()},p.prototype._onBufferActivate=function(v){var _=this;this.clearSelection(),this._trimListener&&this._trimListener.dispose(),this._trimListener=v.activeBuffer.lines.onTrim(function(m){return _._onTrim(m)})},p.prototype._convertViewportColToCharacterIndex=function(v,_){for(var m=_[0],g=0;_[0]>=g;g++){var x=v.loadCell(g,this._workCell).getChars().length;this._workCell.getWidth()===0?m--:x>1&&_[0]!==g&&(m+=x-1)}return m},p.prototype.setSelection=function(v,_,m){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[v,_],this._model.selectionStartLength=m,this.refresh()},p.prototype._getWordAt=function(v,_,m,g){if(m===void 0&&(m=!0),g===void 0&&(g=!0),v[0]>=this._terminal.cols)return null;var x=this._buffer.lines.get(v[1]);if(!x)return null;var L=this._buffer.translateBufferLineToString(v[1],!1),y=this._convertViewportColToCharacterIndex(x,v),M=y,F=v[0]-y,D=0,H=0,b=0,R=0;if(L.charAt(y)===" "){for(;y>0&&L.charAt(y-1)===" ";)y--;for(;M<L.length&&L.charAt(M+1)===" ";)M++}else{var A=v[0],k=v[0];x.getWidth(A)===0&&(D++,A--),x.getWidth(k)===2&&(H++,k++);var O=x.getString(k).length;for(O>1&&(R+=O-1,M+=O-1);A>0&&y>0&&!this._isCharWordSeparator(x.loadCell(A-1,this._workCell));){x.loadCell(A-1,this._workCell);var B=this._workCell.getChars().length;this._workCell.getWidth()===0?(D++,A--):B>1&&(b+=B-1,y-=B-1),y--,A--}for(;k<x.length&&M+1<L.length&&!this._isCharWordSeparator(x.loadCell(k+1,this._workCell));){x.loadCell(k+1,this._workCell);var $=this._workCell.getChars().length;this._workCell.getWidth()===2?(H++,k++):$>1&&(R+=$-1,M+=$-1),M++,k++}}M++;var Q=y+F-D+b,X=Math.min(this._terminal.cols,M-y+D+H-b-R);if(!_&&L.slice(y,M).trim()==="")return null;if(m&&Q===0&&x.getCodePoint(0)!==32){var oe=this._buffer.lines.get(v[1]-1);if(oe&&x.isWrapped&&oe.getCodePoint(this._terminal.cols-1)!==32){var w=this._getWordAt([this._terminal.cols-1,v[1]-1],!1,!0,!1);if(w){var P=this._terminal.cols-w.start;Q-=P,X+=P}}}if(g&&Q+X===this._terminal.cols&&x.getCodePoint(this._terminal.cols-1)!==32){var ce=this._buffer.lines.get(v[1]+1);if(ce&&ce.isWrapped&&ce.getCodePoint(0)!==32){var V=this._getWordAt([0,v[1]+1],!1,!1,!0);V&&(X+=V.length)}}return{start:Q,length:X}},p.prototype._selectWordAt=function(v,_){var m=this._getWordAt(v,_);if(m){for(;m.start<0;)m.start+=this._terminal.cols,v[1]--;this._model.selectionStart=[m.start,v[1]],this._model.selectionStartLength=m.length}},p.prototype._selectToWordAt=function(v){var _=this._getWordAt(v,!0);if(_){for(var m=v[1];_.start<0;)_.start+=this._terminal.cols,m--;if(!this._model.areSelectionValuesReversed())for(;_.start+_.length>this._terminal.cols;)_.length-=this._terminal.cols,m++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?_.start:_.start+_.length,m]}},p.prototype._isCharWordSeparator=function(v){return v.getWidth()===0?!1:f.indexOf(v.getChars())>=0},p.prototype._selectLineAt=function(v){var _=this._buffer.getWrappedRangeForLine(v);this._model.selectionStart=[0,_.first],this._model.selectionEnd=[this._terminal.cols,_.last],this._model.selectionStartLength=0},p}();return al.SelectionManager=d,al}var fl={},k1;function rw(){if(k1)return fl;k1=1,Object.defineProperty(fl,"__esModule",{value:!0});var e=Jn(),t=function(){function r(n,i){this._onCharSizeChanged=new e.EventEmitter2,this._document=n,this._parentElement=i,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W",this._measureElement.setAttribute("aria-hidden","true"),this._parentElement.appendChild(this._measureElement)}return Object.defineProperty(r.prototype,"onCharSizeChanged",{get:function(){return this._onCharSizeChanged.event},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),r.prototype.measure=function(n){this._measureElement.style.fontFamily=n.fontFamily,this._measureElement.style.fontSize=n.fontSize+"px";var i=this._measureElement.getBoundingClientRect();if(!(i.width===0||i.height===0)){var s=Math.ceil(i.height);(this._width!==i.width||this._height!==s)&&(this._width=i.width,this._height=s,this._onCharSizeChanged.fire())}},r}();return fl.CharMeasure=t,fl}var Os={},T1;function rd(){return T1||(T1=1,Object.defineProperty(Os,"__esModule",{value:!0}),Os.blankLine="Blank line",Os.promptLabel="Terminal input",Os.tooMuchOutput="Too much output to announce, navigate to rows manually to read"),Os}var To={},M1;function nw(){if(M1)return To;M1=1,Object.defineProperty(To,"__esModule",{value:!0}),To.DEFAULT_BELL_SOUND="data:audio/wav;base64,UklGRigBAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQQBAADpAFgCwAMlBZoG/wdmCcoKRAypDQ8PbRDBEQQTOxRtFYcWlBePGIUZXhoiG88bcBz7HHIdzh0WHlMeZx51HmkeUx4WHs8dah0AHXwc3hs9G4saxRnyGBIYGBcQFv8U4RPAEoYRQBACD70NWwwHC6gJOwjWBloF7gOBAhABkf8b/qv8R/ve+Xf4Ife79W/0JfPZ8Z/wde9N7ijtE+wU6xvqM+lb6H7nw+YX5mrlxuQz5Mzje+Ma49fioeKD4nXiYeJy4pHitOL04j/jn+MN5IPkFOWs5U3mDefM55/ogOl36m7rdOyE7abuyu8D8Unyj/Pg9D/2qfcb+Yn6/vuK/Qj/lAAlAg==";var e=function(){function t(r){this._terminal=r}return Object.defineProperty(t,"audioContext",{get:function(){if(!t._audioContext){var r=window.AudioContext||window.webkitAudioContext;if(!r)return console.warn("Web Audio API is not supported by this browser. Consider upgrading to the latest version"),null;t._audioContext=new r}return t._audioContext},enumerable:!0,configurable:!0}),t.prototype.playBellSound=function(){var r=t.audioContext;if(r){var n=r.createBufferSource();r.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._terminal.options.bellSound)),function(i){n.buffer=i,n.connect(r.destination),n.start(0)})}},t.prototype._base64ToArrayBuffer=function(r){for(var n=window.atob(r),i=n.length,s=new Uint8Array(i),a=0;a<i;a++)s[a]=n.charCodeAt(a);return s.buffer},t.prototype._removeMimeType=function(r){var n=r.split(",");return n[1]},t}();return To.SoundManager=e,To}var Is={},hl={},L1;function Ug(){if(L1)return hl;L1=1,Object.defineProperty(hl,"__esModule",{value:!0});var e=function(){function t(r){this._renderCallback=r}return t.prototype.dispose=function(){this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},t.prototype.refresh=function(r,n,i){var s=this;this._rowCount=i,r=r!==void 0?r:0,n=n!==void 0?n:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,r):r,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,n):n,!this._animationFrame&&(this._animationFrame=window.requestAnimationFrame(function(){return s._innerRefresh()}))},t.prototype._innerRefresh=function(){this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0||(this._rowStart=Math.max(this._rowStart,0),this._rowEnd=Math.min(this._rowEnd,this._rowCount-1),this._renderCallback(this._rowStart,this._rowEnd),this._rowStart=void 0,this._rowEnd=void 0,this._animationFrame=void 0)},t}();return hl.RenderDebouncer=e,hl}var Fs={},B1;function qg(){if(B1)return Fs;B1=1;var e=Fs&&Fs.__extends||function(){var n=function(i,s){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var l in o)o.hasOwnProperty(l)&&(a[l]=o[l])},n(i,s)};return function(i,s){n(i,s);function a(){this.constructor=i}i.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)}}();Object.defineProperty(Fs,"__esModule",{value:!0});var t=dn(),r=function(n){e(i,n);function i(){var s=n!==null&&n.apply(this,arguments)||this;return s._currentDevicePixelRatio=window.devicePixelRatio,s}return i.prototype.setListener=function(s){var a=this;this._listener&&this.clearListener(),this._listener=s,this._outerListener=function(){a._listener&&(a._listener(window.devicePixelRatio,a._currentDevicePixelRatio),a._updateDpr())},this._updateDpr()},i.prototype.dispose=function(){n.prototype.dispose.call(this),this.clearListener()},i.prototype._updateDpr=function(){!this._resolutionMediaMatchList||!this._outerListener||(this._resolutionMediaMatchList.removeListener(this._outerListener),this._currentDevicePixelRatio=window.devicePixelRatio,this._resolutionMediaMatchList=window.matchMedia("screen and (resolution: "+window.devicePixelRatio+"dppx)"),this._resolutionMediaMatchList.addListener(this._outerListener))},i.prototype.clearListener=function(){!this._resolutionMediaMatchList||!this._listener||!this._outerListener||(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)},i}(t.Disposable);return Fs.ScreenDprMonitor=r,Fs}var O1;function iw(){if(O1)return Is;O1=1;var e=Is&&Is.__extends||function(){var u=function(f,c){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var p in d)d.hasOwnProperty(p)&&(h[p]=d[p])},u(f,c)};return function(f,c){u(f,c);function h(){this.constructor=f}f.prototype=c===null?Object.create(c):(h.prototype=c.prototype,new h)}}();Object.defineProperty(Is,"__esModule",{value:!0});var t=rd(),r=Fa(),n=Ug(),i=Ia(),s=dn(),a=qg(),o=20,l=function(u){e(f,u);function f(c,h){var d=u.call(this)||this;d._terminal=c,d._dimensions=h,d._liveRegionLineCount=0,d._charsToConsume=[],d._charsToAnnounce="",d._accessibilityTreeRoot=document.createElement("div"),d._accessibilityTreeRoot.classList.add("xterm-accessibility"),d._rowContainer=document.createElement("div"),d._rowContainer.classList.add("xterm-accessibility-tree"),d._rowElements=[];for(var p=0;p<d._terminal.rows;p++)d._rowElements[p]=d._createAccessibilityTreeNode(),d._rowContainer.appendChild(d._rowElements[p]);return d._topBoundaryFocusListener=function(v){return d._onBoundaryFocus(v,0)},d._bottomBoundaryFocusListener=function(v){return d._onBoundaryFocus(v,1)},d._rowElements[0].addEventListener("focus",d._topBoundaryFocusListener),d._rowElements[d._rowElements.length-1].addEventListener("focus",d._bottomBoundaryFocusListener),d._refreshRowsDimensions(),d._accessibilityTreeRoot.appendChild(d._rowContainer),d._renderRowsDebouncer=new n.RenderDebouncer(d._renderRows.bind(d)),d._refreshRows(),d._liveRegion=document.createElement("div"),d._liveRegion.classList.add("live-region"),d._liveRegion.setAttribute("aria-live","assertive"),d._accessibilityTreeRoot.appendChild(d._liveRegion),d._terminal.element.insertAdjacentElement("afterbegin",d._accessibilityTreeRoot),d.register(d._renderRowsDebouncer),d.register(d._terminal.onResize(function(v){return d._onResize(v.rows)})),d.register(d._terminal.onRender(function(v){return d._refreshRows(v.start,v.end)})),d.register(d._terminal.onScroll(function(){return d._refreshRows()})),d.register(d._terminal.addDisposableListener("a11y.char",function(v){return d._onChar(v)})),d.register(d._terminal.onLineFeed(function(){return d._onChar(`
`)})),d.register(d._terminal.addDisposableListener("a11y.tab",function(v){return d._onTab(v)})),d.register(d._terminal.onKey(function(v){return d._onKey(v.key)})),d.register(d._terminal.addDisposableListener("blur",function(){return d._clearLiveRegion()})),d._screenDprMonitor=new a.ScreenDprMonitor,d.register(d._screenDprMonitor),d._screenDprMonitor.setListener(function(){return d._refreshRowsDimensions()}),d.register(i.addDisposableDomListener(window,"resize",function(){return d._refreshRowsDimensions()})),d}return f.prototype.dispose=function(){u.prototype.dispose.call(this),this._terminal.element.removeChild(this._accessibilityTreeRoot),this._rowElements.length=0},f.prototype._onBoundaryFocus=function(c,h){var d=c.target,p=this._rowElements[h===0?1:this._rowElements.length-2],v=d.getAttribute("aria-posinset"),_=h===0?"1":""+this._terminal.buffer.lines.length;if(v!==_&&c.relatedTarget===p){var m,g;if(h===0?(m=d,g=this._rowElements.pop(),this._rowContainer.removeChild(g)):(m=this._rowElements.shift(),g=d,this._rowContainer.removeChild(m)),m.removeEventListener("focus",this._topBoundaryFocusListener),g.removeEventListener("focus",this._bottomBoundaryFocusListener),h===0){var x=this._createAccessibilityTreeNode();this._rowElements.unshift(x),this._rowContainer.insertAdjacentElement("afterbegin",x)}else{var x=this._createAccessibilityTreeNode();this._rowElements.push(x),this._rowContainer.appendChild(x)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(h===0?-1:1),this._rowElements[h===0?1:this._rowElements.length-2].focus(),c.preventDefault(),c.stopImmediatePropagation()}},f.prototype._onResize=function(c){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(var h=this._rowContainer.children.length;h<this._terminal.rows;h++)this._rowElements[h]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[h]);for(;this._rowElements.length>c;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()},f.prototype._createAccessibilityTreeNode=function(){var c=document.createElement("div");return c.setAttribute("role","listitem"),c.tabIndex=-1,this._refreshRowDimensions(c),c},f.prototype._onTab=function(c){for(var h=0;h<c;h++)this._onChar(" ")},f.prototype._onChar=function(c){var h=this;if(this._liveRegionLineCount<o+1){if(this._charsToConsume.length>0){var d=this._charsToConsume.shift();d!==c&&(this._charsToAnnounce+=c)}else this._charsToAnnounce+=c;c===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===o+1&&(this._liveRegion.textContent+=t.tooMuchOutput)),r.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(function(){h._accessibilityTreeRoot.appendChild(h._liveRegion)},0)}},f.prototype._clearLiveRegion=function(){this._liveRegion.textContent="",this._liveRegionLineCount=0,r.isMac&&this._liveRegion.parentNode&&this._accessibilityTreeRoot.removeChild(this._liveRegion)},f.prototype._onKey=function(c){this._clearLiveRegion(),this._charsToConsume.push(c)},f.prototype._refreshRows=function(c,h){this._renderRowsDebouncer.refresh(c,h,this._terminal.rows)},f.prototype._renderRows=function(c,h){for(var d=this._terminal.buffer,p=d.lines.length.toString(),v=c;v<=h;v++){var _=d.translateBufferLineToString(d.ydisp+v,!0),m=(d.ydisp+v+1).toString(),g=this._rowElements[v];g&&(g.textContent=_.length===0?t.blankLine:_,g.setAttribute("aria-posinset",m),g.setAttribute("aria-setsize",p))}this._announceCharacters()},f.prototype._refreshRowsDimensions=function(){if(this._dimensions.actualCellHeight){this._rowElements.length!==this._terminal.rows&&this._onResize(this._terminal.rows);for(var c=0;c<this._terminal.rows;c++)this._refreshRowDimensions(this._rowElements[c])}},f.prototype.setDimensions=function(c){this._dimensions=c,this._refreshRowsDimensions()},f.prototype._refreshRowDimensions=function(c){c.style.height=this._dimensions.actualCellHeight+"px"},f.prototype._announceCharacters=function(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")},f}(s.Disposable);return Is.AccessibilityManager=l,Is}var Ds={},Nu={},I1;function sw(){return I1||(I1=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=ds(),r=In();e.BOLD_CLASS="xterm-bold",e.DIM_CLASS="xterm-dim",e.ITALIC_CLASS="xterm-italic",e.UNDERLINE_CLASS="xterm-underline",e.CURSOR_CLASS="xterm-cursor",e.CURSOR_BLINK_CLASS="xterm-cursor-blink",e.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block",e.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar",e.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline";var n=function(){function i(s,a){this._terminalOptions=s,this._document=a,this._workCell=new r.CellData}return i.prototype.createRow=function(s,a,o,l,u,f,c){for(var h=this._document.createDocumentFragment(),d=0,p=Math.min(s.length,c)-1;p>=0;p--)if(s.loadCell(p,this._workCell).getCode()!==r.NULL_CELL_CODE||a&&p===l){d=p+1;break}for(var p=0;p<d;p++){s.loadCell(p,this._workCell);var v=this._workCell.getWidth();if(v!==0){var _=this._document.createElement("span");if(v>1&&(_.style.width=f*v+"px"),a&&p===l)switch(_.classList.add(e.CURSOR_CLASS),u&&_.classList.add(e.CURSOR_BLINK_CLASS),o){case"bar":_.classList.add(e.CURSOR_STYLE_BAR_CLASS);break;case"underline":_.classList.add(e.CURSOR_STYLE_UNDERLINE_CLASS);break;default:_.classList.add(e.CURSOR_STYLE_BLOCK_CLASS);break}this._workCell.isBold()&&this._terminalOptions.enableBold&&_.classList.add(e.BOLD_CLASS),this._workCell.isItalic()&&_.classList.add(e.ITALIC_CLASS),this._workCell.isDim()&&_.classList.add(e.DIM_CLASS),this._workCell.isUnderline()&&_.classList.add(e.UNDERLINE_CLASS),_.textContent=this._workCell.getChars()||r.WHITESPACE_CELL_CHAR;var m=this._workCell.isInverse();if(this._workCell.isFgRGB()){var g=_.getAttribute("style")||"";g+=(m?"background-":"")+"color:rgb("+r.AttributeData.toColorRGB(this._workCell.getFgColor()).join(",")+");",_.setAttribute("style",g)}else if(this._workCell.isFgPalette()){var x=this._workCell.getFgColor();this._workCell.isBold()&&x<8&&!m&&this._terminalOptions.enableBold&&this._terminalOptions.drawBoldTextInBrightColors&&(x+=8),_.classList.add("xterm-"+(m?"b":"f")+"g-"+x)}else m&&_.classList.add("xterm-bg-"+t.INVERTED_DEFAULT_COLOR);if(this._workCell.isBgRGB()){var g=_.getAttribute("style")||"";g+=(m?"":"background-")+"color:rgb("+r.AttributeData.toColorRGB(this._workCell.getBgColor()).join(",")+");",_.setAttribute("style",g)}else this._workCell.isBgPalette()?_.classList.add("xterm-"+(m?"f":"b")+"g-"+this._workCell.getBgColor()):m&&_.classList.add("xterm-fg-"+t.INVERTED_DEFAULT_COLOR);h.appendChild(_)}}return h},i}();e.DomRendererRowFactory=n}(Nu)),Nu}var F1;function ow(){if(F1)return Ds;F1=1;var e=Ds&&Ds.__extends||function(){var h=function(d,p){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var m in _)_.hasOwnProperty(m)&&(v[m]=_[m])},h(d,p)};return function(d,p){h(d,p);function v(){this.constructor=d}d.prototype=p===null?Object.create(p):(v.prototype=p.prototype,new v)}}();Object.defineProperty(Ds,"__esModule",{value:!0});var t=sw(),r=ds(),n=dn(),i="xterm-dom-renderer-owner-",s="xterm-rows",a="xterm-fg-",o="xterm-bg-",l="xterm-focus",u="xterm-selection",f=1,c=function(h){e(d,h);function d(p,v){var _=h.call(this)||this;return _._terminal=p,_._colors=v,_._terminalClass=f++,_._rowElements=[],_._rowContainer=document.createElement("div"),_._rowContainer.classList.add(s),_._rowContainer.style.lineHeight="normal",_._rowContainer.setAttribute("aria-hidden","true"),_._refreshRowElements(_._terminal.cols,_._terminal.rows),_._selectionContainer=document.createElement("div"),_._selectionContainer.classList.add(u),_._selectionContainer.setAttribute("aria-hidden","true"),_.dimensions={scaledCharWidth:null,scaledCharHeight:null,scaledCellWidth:null,scaledCellHeight:null,scaledCharLeft:null,scaledCharTop:null,scaledCanvasWidth:null,scaledCanvasHeight:null,canvasWidth:null,canvasHeight:null,actualCellWidth:null,actualCellHeight:null},_._updateDimensions(),_._injectCss(),_._rowFactory=new t.DomRendererRowFactory(p.options,document),_._terminal.element.classList.add(i+_._terminalClass),_._terminal.screenElement.appendChild(_._rowContainer),_._terminal.screenElement.appendChild(_._selectionContainer),_._terminal.linkifier.onLinkHover(function(m){return _._onLinkHover(m)}),_._terminal.linkifier.onLinkLeave(function(m){return _._onLinkLeave(m)}),_}return d.prototype.dispose=function(){this._terminal.element.classList.remove(i+this._terminalClass),this._terminal.screenElement.removeChild(this._rowContainer),this._terminal.screenElement.removeChild(this._selectionContainer),this._terminal.screenElement.removeChild(this._themeStyleElement),this._terminal.screenElement.removeChild(this._dimensionsStyleElement),h.prototype.dispose.call(this)},d.prototype._updateDimensions=function(){var p=this;this.dimensions.scaledCharWidth=this._terminal.charMeasure.width*window.devicePixelRatio,this.dimensions.scaledCharHeight=Math.ceil(this._terminal.charMeasure.height*window.devicePixelRatio),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._terminal.options.letterSpacing),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._terminal.options.lineHeight),this.dimensions.scaledCharLeft=0,this.dimensions.scaledCharTop=0,this.dimensions.scaledCanvasWidth=this.dimensions.scaledCellWidth*this._terminal.cols,this.dimensions.scaledCanvasHeight=this.dimensions.scaledCellHeight*this._terminal.rows,this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._terminal.cols,this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._terminal.rows,this._rowElements.forEach(function(_){_.style.width=p.dimensions.canvasWidth+"px",_.style.height=p.dimensions.actualCellHeight+"px",_.style.lineHeight=p.dimensions.actualCellHeight+"px",_.style.overflow="hidden"}),this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._terminal.screenElement.appendChild(this._dimensionsStyleElement));var v=this._terminalSelector+" ."+s+" span { display: inline-block; height: 100%; vertical-align: top;"+(" width: "+this.dimensions.actualCellWidth+"px")+"}";this._dimensionsStyleElement.innerHTML=v,this._selectionContainer.style.height=this._terminal._viewportElement.style.height,this._terminal.screenElement.style.width=this.dimensions.canvasWidth+"px",this._terminal.screenElement.style.height=this.dimensions.canvasHeight+"px"},d.prototype.setColors=function(p){this._colors=p,this._injectCss()},d.prototype._injectCss=function(){var p=this;this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._terminal.screenElement.appendChild(this._themeStyleElement));var v=this._terminalSelector+" ."+s+" {"+(" color: "+this._colors.foreground.css+";")+(" background-color: "+this._colors.background.css+";")+(" font-family: "+this._terminal.options.fontFamily+";")+(" font-size: "+this._terminal.options.fontSize+"px;")+"}";v+=this._terminalSelector+" span:not(."+t.BOLD_CLASS+") {"+(" font-weight: "+this._terminal.options.fontWeight+";")+"}"+(this._terminalSelector+" span."+t.BOLD_CLASS+" {")+(" font-weight: "+this._terminal.options.fontWeightBold+";")+"}"+(this._terminalSelector+" span."+t.ITALIC_CLASS+" {")+" font-style: italic;}",v+="@keyframes blink { 0% { opacity: 1.0; } 50% { opacity: 0.0; } 100% { opacity: 1.0; }}",v+=this._terminalSelector+" ."+s+":not(."+l+") ."+t.CURSOR_CLASS+" {"+(" outline: 1px solid "+this._colors.cursor.css+";")+" outline-offset: -1px;}"+(this._terminalSelector+" ."+s+"."+l+" ."+t.CURSOR_CLASS+"."+t.CURSOR_BLINK_CLASS+" {")+" animation: blink 1s step-end infinite;}"+(this._terminalSelector+" ."+s+"."+l+" ."+t.CURSOR_CLASS+"."+t.CURSOR_STYLE_BLOCK_CLASS+" {")+(" background-color: "+this._colors.cursor.css+";")+(" color: "+this._colors.cursorAccent.css+";")+"}"+(this._terminalSelector+" ."+s+"."+l+" ."+t.CURSOR_CLASS+"."+t.CURSOR_STYLE_BAR_CLASS+" {")+(" box-shadow: 1px 0 0 "+this._colors.cursor.css+" inset;")+"}"+(this._terminalSelector+" ."+s+"."+l+" ."+t.CURSOR_CLASS+"."+t.CURSOR_STYLE_UNDERLINE_CLASS+" {")+(" box-shadow: 0 -1px 0 "+this._colors.cursor.css+" inset;")+"}",v+=this._terminalSelector+" ."+u+" { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}"+(this._terminalSelector+" ."+u+" div {")+" position: absolute;"+(" background-color: "+this._colors.selection.css+";")+"}",this._colors.ansi.forEach(function(_,m){v+=p._terminalSelector+" ."+a+m+" { color: "+_.css+"; }"+(p._terminalSelector+" ."+o+m+" { background-color: "+_.css+"; }")}),v+=this._terminalSelector+" ."+a+r.INVERTED_DEFAULT_COLOR+" { color: "+this._colors.background.css+"; }"+(this._terminalSelector+" ."+o+r.INVERTED_DEFAULT_COLOR+" { background-color: "+this._colors.foreground.css+"; }"),this._themeStyleElement.innerHTML=v},d.prototype.onDevicePixelRatioChange=function(){this._updateDimensions()},d.prototype._refreshRowElements=function(p,v){for(var _=this._rowElements.length;_<=v;_++){var m=document.createElement("div");this._rowContainer.appendChild(m),this._rowElements.push(m)}for(;this._rowElements.length>v;)this._rowContainer.removeChild(this._rowElements.pop())},d.prototype.onResize=function(p,v){this._refreshRowElements(p,v),this._updateDimensions()},d.prototype.onCharSizeChanged=function(){this._updateDimensions()},d.prototype.onBlur=function(){this._rowContainer.classList.remove(l)},d.prototype.onFocus=function(){this._rowContainer.classList.add(l)},d.prototype.onSelectionChanged=function(p,v,_){for(;this._selectionContainer.children.length;)this._selectionContainer.removeChild(this._selectionContainer.children[0]);if(!(!p||!v)){var m=p[1]-this._terminal.buffer.ydisp,g=v[1]-this._terminal.buffer.ydisp,x=Math.max(m,0),L=Math.min(g,this._terminal.rows-1);if(!(x>=this._terminal.rows||L<0)){var y=document.createDocumentFragment();if(_)y.appendChild(this._createSelectionElement(x,p[0],v[0],L-x+1));else{var M=m===x?p[0]:0,F=x===L?v[0]:this._terminal.cols;y.appendChild(this._createSelectionElement(x,M,F));var D=L-x-1;if(y.appendChild(this._createSelectionElement(x+1,0,this._terminal.cols,D)),x!==L){var H=g===L?v[0]:this._terminal.cols;y.appendChild(this._createSelectionElement(L,0,H))}}this._selectionContainer.appendChild(y)}}},d.prototype._createSelectionElement=function(p,v,_,m){m===void 0&&(m=1);var g=document.createElement("div");return g.style.height=m*this.dimensions.actualCellHeight+"px",g.style.top=p*this.dimensions.actualCellHeight+"px",g.style.left=v*this.dimensions.actualCellWidth+"px",g.style.width=this.dimensions.actualCellWidth*(_-v)+"px",g},d.prototype.onCursorMove=function(){},d.prototype.onOptionsChanged=function(){this._updateDimensions(),this._injectCss(),this._terminal.refresh(0,this._terminal.rows-1)},d.prototype.clear=function(){this._rowElements.forEach(function(p){return p.innerHTML=""})},d.prototype.renderRows=function(p,v){for(var _=this._terminal,m=_.buffer.ybase+_.buffer.y,g=this._terminal.buffer.x,x=this._terminal.options.cursorBlink,L=p;L<=v;L++){var y=this._rowElements[L];y.innerHTML="";var M=L+_.buffer.ydisp,F=_.buffer.lines.get(M),D=_.options.cursorStyle;y.appendChild(this._rowFactory.createRow(F,M===m,D,g,x,this.dimensions.actualCellWidth,_.cols))}},Object.defineProperty(d.prototype,"_terminalSelector",{get:function(){return"."+i+this._terminalClass},enumerable:!0,configurable:!0}),d.prototype.registerCharacterJoiner=function(p){return-1},d.prototype.deregisterCharacterJoiner=function(p){return!1},d.prototype._onLinkHover=function(p){this._setCellUnderline(p.x1,p.x2,p.y1,p.y2,p.cols,!0)},d.prototype._onLinkLeave=function(p){this._setCellUnderline(p.x1,p.x2,p.y1,p.y2,p.cols,!1)},d.prototype._setCellUnderline=function(p,v,_,m,g,x){for(;p!==v||_!==m;){var L=this._rowElements[_];if(!L)return;var y=L.children[p];y&&(y.style.textDecoration=x?"underline":"none"),++p>=g&&(p=0,_++)}},d}(n.Disposable);return Ds.DomRenderer=c,Ds}var dl={},D1;function aw(){if(D1)return dl;D1=1,Object.defineProperty(dl,"__esModule",{value:!0});var e=Nc(),t={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};function r(n,i,s,a){var o={type:0,cancel:!1,key:void 0},l=(n.shiftKey?1:0)|(n.altKey?2:0)|(n.ctrlKey?4:0)|(n.metaKey?8:0);switch(n.keyCode){case 0:n.key==="UIKeyInputUpArrow"?i?o.key=e.C0.ESC+"OA":o.key=e.C0.ESC+"[A":n.key==="UIKeyInputLeftArrow"?i?o.key=e.C0.ESC+"OD":o.key=e.C0.ESC+"[D":n.key==="UIKeyInputRightArrow"?i?o.key=e.C0.ESC+"OC":o.key=e.C0.ESC+"[C":n.key==="UIKeyInputDownArrow"&&(i?o.key=e.C0.ESC+"OB":o.key=e.C0.ESC+"[B");break;case 8:if(n.shiftKey){o.key=e.C0.BS;break}else if(n.altKey){o.key=e.C0.ESC+e.C0.DEL;break}o.key=e.C0.DEL;break;case 9:if(n.shiftKey){o.key=e.C0.ESC+"[Z";break}o.key=e.C0.HT,o.cancel=!0;break;case 13:o.key=e.C0.CR,o.cancel=!0;break;case 27:o.key=e.C0.ESC,o.cancel=!0;break;case 37:l?(o.key=e.C0.ESC+"[1;"+(l+1)+"D",o.key===e.C0.ESC+"[1;3D"&&(o.key=s?e.C0.ESC+"b":e.C0.ESC+"[1;5D")):i?o.key=e.C0.ESC+"OD":o.key=e.C0.ESC+"[D";break;case 39:l?(o.key=e.C0.ESC+"[1;"+(l+1)+"C",o.key===e.C0.ESC+"[1;3C"&&(o.key=s?e.C0.ESC+"f":e.C0.ESC+"[1;5C")):i?o.key=e.C0.ESC+"OC":o.key=e.C0.ESC+"[C";break;case 38:l?(o.key=e.C0.ESC+"[1;"+(l+1)+"A",o.key===e.C0.ESC+"[1;3A"&&(o.key=e.C0.ESC+"[1;5A")):i?o.key=e.C0.ESC+"OA":o.key=e.C0.ESC+"[A";break;case 40:l?(o.key=e.C0.ESC+"[1;"+(l+1)+"B",o.key===e.C0.ESC+"[1;3B"&&(o.key=e.C0.ESC+"[1;5B")):i?o.key=e.C0.ESC+"OB":o.key=e.C0.ESC+"[B";break;case 45:!n.shiftKey&&!n.ctrlKey&&(o.key=e.C0.ESC+"[2~");break;case 46:l?o.key=e.C0.ESC+"[3;"+(l+1)+"~":o.key=e.C0.ESC+"[3~";break;case 36:l?o.key=e.C0.ESC+"[1;"+(l+1)+"H":i?o.key=e.C0.ESC+"OH":o.key=e.C0.ESC+"[H";break;case 35:l?o.key=e.C0.ESC+"[1;"+(l+1)+"F":i?o.key=e.C0.ESC+"OF":o.key=e.C0.ESC+"[F";break;case 33:n.shiftKey?o.type=2:o.key=e.C0.ESC+"[5~";break;case 34:n.shiftKey?o.type=3:o.key=e.C0.ESC+"[6~";break;case 112:l?o.key=e.C0.ESC+"[1;"+(l+1)+"P":o.key=e.C0.ESC+"OP";break;case 113:l?o.key=e.C0.ESC+"[1;"+(l+1)+"Q":o.key=e.C0.ESC+"OQ";break;case 114:l?o.key=e.C0.ESC+"[1;"+(l+1)+"R":o.key=e.C0.ESC+"OR";break;case 115:l?o.key=e.C0.ESC+"[1;"+(l+1)+"S":o.key=e.C0.ESC+"OS";break;case 116:l?o.key=e.C0.ESC+"[15;"+(l+1)+"~":o.key=e.C0.ESC+"[15~";break;case 117:l?o.key=e.C0.ESC+"[17;"+(l+1)+"~":o.key=e.C0.ESC+"[17~";break;case 118:l?o.key=e.C0.ESC+"[18;"+(l+1)+"~":o.key=e.C0.ESC+"[18~";break;case 119:l?o.key=e.C0.ESC+"[19;"+(l+1)+"~":o.key=e.C0.ESC+"[19~";break;case 120:l?o.key=e.C0.ESC+"[20;"+(l+1)+"~":o.key=e.C0.ESC+"[20~";break;case 121:l?o.key=e.C0.ESC+"[21;"+(l+1)+"~":o.key=e.C0.ESC+"[21~";break;case 122:l?o.key=e.C0.ESC+"[23;"+(l+1)+"~":o.key=e.C0.ESC+"[23~";break;case 123:l?o.key=e.C0.ESC+"[24;"+(l+1)+"~":o.key=e.C0.ESC+"[24~";break;default:if(n.ctrlKey&&!n.shiftKey&&!n.altKey&&!n.metaKey)n.keyCode>=65&&n.keyCode<=90?o.key=String.fromCharCode(n.keyCode-64):n.keyCode===32?o.key="\0":n.keyCode>=51&&n.keyCode<=55?o.key=String.fromCharCode(n.keyCode-51+27):n.keyCode===56?o.key="":n.keyCode===219?o.key="\x1B":n.keyCode===220?o.key="":n.keyCode===221&&(o.key="");else if((!s||a)&&n.altKey&&!n.metaKey){var u=t[n.keyCode],f=u&&u[n.shiftKey?1:0];if(f)o.key=e.C0.ESC+f;else if(n.keyCode>=65&&n.keyCode<=90){var c=n.ctrlKey?n.keyCode-64:n.keyCode+32;o.key=e.C0.ESC+String.fromCharCode(c)}}else s&&!n.altKey&&!n.ctrlKey&&n.metaKey?n.keyCode===65&&(o.type=1):n.key&&!n.ctrlKey&&!n.altKey&&!n.metaKey&&n.keyCode>=48&&n.key.length===1?o.key=n.key:n.key&&n.ctrlKey&&n.key==="_"&&(o.key=e.C0.US);break}return o}return dl.evaluateKeyboardEvent=r,dl}var pl={},H1;function lw(){if(H1)return pl;H1=1,Object.defineProperty(pl,"__esModule",{value:!0});function e(t,r){if(r===void 0&&(r=5),typeof t!="object")return t;if(t===null)return null;var n=Array.isArray(t)?[]:{};for(var i in t)n[i]=r<=1?t[i]:e(t[i],r-1);return n}return pl.clone=e,pl}var ml={},P1;function cw(){if(P1)return ml;P1=1,Object.defineProperty(ml,"__esModule",{value:!0});var e=In();function t(r){return r.onLineFeed(function(){var n=r.buffer.lines.get(r.buffer.ybase+r.buffer.y-1),i=n.get(r.cols-1),s=r.buffer.lines.get(r.buffer.ybase+r.buffer.y);s.isWrapped=i[e.CHAR_DATA_CODE_INDEX]!==e.NULL_CELL_CODE&&i[e.CHAR_DATA_CODE_INDEX]!==e.WHITESPACE_CELL_CODE})}return ml.applyWindowsMode=t,ml}var Hs={},j1;function uw(){if(j1)return Hs;j1=1;var e=Hs&&Hs.__extends||function(){var o=function(l,u){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,c){f.__proto__=c}||function(f,c){for(var h in c)c.hasOwnProperty(h)&&(f[h]=c[h])},o(l,u)};return function(l,u){o(l,u);function f(){this.constructor=l}l.prototype=u===null?Object.create(u):(f.prototype=u.prototype,new f)}}();Object.defineProperty(Hs,"__esModule",{value:!0});var t=Ug(),r=Jn(),n=dn(),i=qg(),s=Ia(),a=function(o){e(l,o);function l(u,f,c){var h=o.call(this)||this;if(h._renderer=u,h._rowCount=f,h._isPaused=!1,h._needsFullRefresh=!1,h._canvasWidth=0,h._canvasHeight=0,h._onDimensionsChange=new r.EventEmitter2,h._onRender=new r.EventEmitter2,h._onRefreshRequest=new r.EventEmitter2,h._renderDebouncer=new t.RenderDebouncer(function(p,v){return h._renderRows(p,v)}),h.register(h._renderDebouncer),h._screenDprMonitor=new i.ScreenDprMonitor,h._screenDprMonitor.setListener(function(){return h._renderer.onDevicePixelRatioChange()}),h.register(h._screenDprMonitor),h.register(s.addDisposableDomListener(window,"resize",function(){return h._renderer.onDevicePixelRatioChange()})),"IntersectionObserver"in window){var d=new IntersectionObserver(function(p){return h._onIntersectionChange(p[p.length-1])},{threshold:0});d.observe(c),h.register({dispose:function(){return d.disconnect()}})}return h}return Object.defineProperty(l.prototype,"onDimensionsChange",{get:function(){return this._onDimensionsChange.event},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"onRefreshRequest",{get:function(){return this._onRefreshRequest.event},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"dimensions",{get:function(){return this._renderer.dimensions},enumerable:!0,configurable:!0}),l.prototype._onIntersectionChange=function(u){this._isPaused=u.intersectionRatio===0,!this._isPaused&&this._needsFullRefresh&&(this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)},l.prototype.refreshRows=function(u,f){if(this._isPaused){this._needsFullRefresh=!0;return}this._renderDebouncer.refresh(u,f,this._rowCount)},l.prototype._renderRows=function(u,f){this._renderer.renderRows(u,f),this._onRender.fire({start:u,end:f})},l.prototype.resize=function(u,f){this._rowCount=f,this._fireOnCanvasResize()},l.prototype.changeOptions=function(){this._renderer.onOptionsChanged(),this._fireOnCanvasResize()},l.prototype._fireOnCanvasResize=function(){this._renderer.dimensions.canvasWidth===this._canvasWidth&&this._renderer.dimensions.canvasHeight===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.dimensions)},l.prototype.setRenderer=function(u){this._renderer.dispose(),this._renderer=u},l.prototype._fullRefresh=function(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount)},l.prototype.setColors=function(u){this._renderer.setColors(u),this._fullRefresh()},l.prototype.onDevicePixelRatioChange=function(){this._renderer.onDevicePixelRatioChange()},l.prototype.onResize=function(u,f){this._renderer.onResize(u,f),this._fullRefresh()},l.prototype.onCharSizeChanged=function(){this._renderer.onCharSizeChanged()},l.prototype.onBlur=function(){this._renderer.onBlur()},l.prototype.onFocus=function(){this._renderer.onFocus()},l.prototype.onSelectionChanged=function(u,f,c){this._renderer.onSelectionChanged(u,f,c)},l.prototype.onCursorMove=function(){this._renderer.onCursorMove()},l.prototype.onOptionsChanged=function(){this._renderer.onOptionsChanged()},l.prototype.clear=function(){this._renderer.clear()},l.prototype.registerCharacterJoiner=function(u){return this._renderer.registerCharacterJoiner(u)},l.prototype.deregisterCharacterJoiner=function(u){return this._renderer.deregisterCharacterJoiner(u)},l}(n.Disposable);return Hs.RenderCoordinator=a,Hs}var N1;function fw(){if(N1)return vs;N1=1;var e=vs&&vs.__extends||function(){var V=function(le,Y){return V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Z,I){Z.__proto__=I}||function(Z,I){for(var K in I)I.hasOwnProperty(K)&&(Z[K]=I[K])},V(le,Y)};return function(le,Y){V(le,Y);function Z(){this.constructor=le}le.prototype=Y===null?Object.create(Y):(Z.prototype=Y.prototype,new Z)}}();Object.defineProperty(vs,"__esModule",{value:!0});var t=I4(),r=Bg(),n=F4(),i=D4(),s=H4(),a=P4(),o=Nc(),l=U4(),u=Z4(),f=Q4(),c=tw(),h=rw(),d=Fa(),p=Ia(),v=rd(),_=Ng(),m=nw(),g=jg(),x=iw(),L=Hg(),y=ow(),M=aw(),F=lw(),D=Jn(),H=In(),b=cw(),R=Fg(),A=uw(),k=typeof window<"u"?window.document:null,O=5,B=12,$=50,Q=2,X=1,oe=["cols","rows"],w={cols:80,rows:24,convertEol:!1,termName:"xterm",cursorBlink:!1,cursorStyle:"block",bellSound:m.DEFAULT_BELL_SOUND,bellStyle:"none",drawBoldTextInBrightColors:!0,enableBold:!0,experimentalCharAtlas:"static",fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,letterSpacing:0,scrollback:1e3,screenKeys:!1,screenReaderMode:!1,debug:!1,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,cancelEvents:!1,disableStdin:!1,useFlowControl:!1,allowTransparency:!1,tabStopWidth:8,theme:void 0,rightClickSelectsWord:d.isMac,rendererType:"canvas",windowsMode:!1},P=function(V){e(le,V);function le(Y){Y===void 0&&(Y={});var Z=V.call(this)||this;return Z.browser=d,Z._blankLine=null,Z._onCursorMove=new D.EventEmitter2,Z._onData=new D.EventEmitter2,Z._onKey=new D.EventEmitter2,Z._onLineFeed=new D.EventEmitter2,Z._onRender=new D.EventEmitter2,Z._onResize=new D.EventEmitter2,Z._onScroll=new D.EventEmitter2,Z._onSelectionChange=new D.EventEmitter2,Z._onTitleChange=new D.EventEmitter2,Z.options=F.clone(Y),Z._setup(),Z.onCursorMove(function(){return Z.emit("cursormove")}),Z.onData(function(I){return Z.emit("data",I)}),Z.onKey(function(I){return Z.emit("key",I.key,I.domEvent)}),Z.onLineFeed(function(){return Z.emit("linefeed")}),Z.onRender(function(I){return Z.emit("refresh",I)}),Z.onResize(function(I){return Z.emit("resize",I)}),Z.onSelectionChange(function(){return Z.emit("selection")}),Z.onScroll(function(I){return Z.emit("scroll",I)}),Z.onTitleChange(function(I){return Z.emit("title",I)}),Z}return Object.defineProperty(le.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!0,configurable:!0}),Object.defineProperty(le.prototype,"onData",{get:function(){return this._onData.event},enumerable:!0,configurable:!0}),Object.defineProperty(le.prototype,"onKey",{get:function(){return this._onKey.event},enumerable:!0,configurable:!0}),Object.defineProperty(le.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!0,configurable:!0}),Object.defineProperty(le.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!0,configurable:!0}),Object.defineProperty(le.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!0,configurable:!0}),Object.defineProperty(le.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!0,configurable:!0}),Object.defineProperty(le.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!0,configurable:!0}),Object.defineProperty(le.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!0,configurable:!0}),le.prototype.dispose=function(){V.prototype.dispose.call(this),this._windowsMode&&(this._windowsMode.dispose(),this._windowsMode=void 0),this._customKeyEventHandler=null,L.removeTerminalFromCache(this),this.handler=function(){},this.write=function(){},this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)},le.prototype.destroy=function(){this.dispose()},le.prototype._setup=function(){var Y=this;Object.keys(w).forEach(function(Z){(Y.options[Z]===null||Y.options[Z]===void 0)&&(Y.options[Z]=w[Z])}),this._parent=k?k.body:null,this.cols=Math.max(this.options.cols,Q),this.rows=Math.max(this.options.rows,X),this.options.handler&&this.onData(this.options.handler),this.cursorState=0,this.cursorHidden=!1,this._customKeyEventHandler=null,this.applicationKeypad=!1,this.applicationCursor=!1,this.originMode=!1,this.insertMode=!1,this.wraparoundMode=!0,this.bracketedPasteMode=!1,this.charset=null,this.gcharset=null,this.glevel=0,this.charsets=[null],this.curAttrData=H.DEFAULT_ATTR_DATA.clone(),this._eraseAttrData=H.DEFAULT_ATTR_DATA.clone(),this.params=[],this.currentParam=0,this.writeBuffer=[],this.writeBufferUtf8=[],this._writeInProgress=!1,this._xoffSentToCatchUp=!1,this._userScrolling=!1,this._inputHandler=new l.InputHandler(this),this._inputHandler.onCursorMove(function(){return Y._onCursorMove.fire()}),this._inputHandler.onLineFeed(function(){return Y._onLineFeed.fire()}),this._inputHandler.onData(function(Z){return Y._onData.fire(Z)}),this.register(this._inputHandler),this.selectionManager=this.selectionManager||null,this.linkifier=this.linkifier||new f.Linkifier(this),this._mouseZoneManager=this._mouseZoneManager||null,this.soundManager=this.soundManager||new m.SoundManager(this),this.buffers=new t.BufferSet(this),this.selectionManager&&(this.selectionManager.clearSelection(),this.selectionManager.initBuffersListeners()),this.options.windowsMode&&(this._windowsMode=b.applyWindowsMode(this))},Object.defineProperty(le.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!0,configurable:!0}),le.prototype.eraseAttrData=function(){return this._eraseAttrData.bg&=-67108864,this._eraseAttrData.bg|=this.curAttrData.bg&67108863,this._eraseAttrData},le.prototype.focus=function(){this.textarea&&this.textarea.focus({preventScroll:!0})},Object.defineProperty(le.prototype,"isFocused",{get:function(){return k.activeElement===this.textarea&&k.hasFocus()},enumerable:!0,configurable:!0}),le.prototype.getOption=function(Y){if(!(Y in w))throw new Error('No option with key "'+Y+'"');return this.options[Y]},le.prototype.setOption=function(Y,Z){if(!(Y in w))throw new Error('No option with key "'+Y+'"');if(oe.indexOf(Y)!==-1&&console.error('Option "'+Y+'" can only be set in the constructor'),this.options[Y]!==Z){switch(Y){case"bellStyle":Z||(Z="none");break;case"cursorStyle":Z||(Z="block");break;case"fontWeight":Z||(Z="normal");break;case"fontWeightBold":Z||(Z="bold");break;case"lineHeight":if(Z<1){console.warn(Y+" cannot be less than 1, value: "+Z);return}case"rendererType":Z||(Z="canvas");break;case"tabStopWidth":if(Z<1){console.warn(Y+" cannot be less than 1, value: "+Z);return}break;case"theme":this._setTheme(Z);break;case"scrollback":if(Z=Math.min(Z,r.MAX_BUFFER_SIZE),Z<0){console.warn(Y+" cannot be less than 0, value: "+Z);return}if(this.options[Y]!==Z){var I=this.rows+Z;if(this.buffer.lines.length>I){var K=this.buffer.lines.length-I,ee=this.buffer.ydisp-K<0;this.buffer.lines.trimStart(K),this.buffer.ybase=Math.max(this.buffer.ybase-K,0),this.buffer.ydisp=Math.max(this.buffer.ydisp-K,0),ee&&this.refresh(0,this.rows-1)}}break}switch(this.options[Y]=Z,Y){case"fontFamily":case"fontSize":this._renderCoordinator&&(this._renderCoordinator.clear(),this.charMeasure.measure(this.options));break;case"drawBoldTextInBrightColors":case"experimentalCharAtlas":case"enableBold":case"letterSpacing":case"lineHeight":case"fontWeight":case"fontWeightBold":this._renderCoordinator&&(this._renderCoordinator.clear(),this._renderCoordinator.onResize(this.cols,this.rows),this.refresh(0,this.rows-1));break;case"rendererType":this._renderCoordinator&&this._renderCoordinator.setRenderer(this._createRenderer());break;case"scrollback":this.buffers.resize(this.cols,this.rows),this.viewport&&this.viewport.syncScrollArea();break;case"screenReaderMode":Z?!this._accessibilityManager&&this._renderCoordinator&&(this._accessibilityManager=new x.AccessibilityManager(this,this._renderCoordinator.dimensions)):this._accessibilityManager&&(this._accessibilityManager.dispose(),this._accessibilityManager=null);break;case"tabStopWidth":this.buffers.setupTabStops();break;case"windowsMode":Z?this._windowsMode||(this._windowsMode=b.applyWindowsMode(this)):this._windowsMode&&(this._windowsMode.dispose(),this._windowsMode=void 0);break}this._renderCoordinator&&this._renderCoordinator.onOptionsChanged()}},le.prototype._onTextAreaFocus=function(Y){this.sendFocus&&this.handler(o.C0.ESC+"[I"),this.updateCursorStyle(Y),this.element.classList.add("focus"),this.showCursor(),this.emit("focus")},le.prototype.blur=function(){return this.textarea.blur()},le.prototype._onTextAreaBlur=function(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.sendFocus&&this.handler(o.C0.ESC+"[O"),this.element.classList.remove("focus"),this.emit("blur")},le.prototype._initGlobal=function(){var Y=this;this._bindKeys(),this.register(p.addDisposableDomListener(this.element,"copy",function(I){Y.hasSelection()&&a.copyHandler(I,Y,Y.selectionManager)}));var Z=function(I){return a.pasteHandler(I,Y)};this.register(p.addDisposableDomListener(this.textarea,"paste",Z)),this.register(p.addDisposableDomListener(this.element,"paste",Z)),d.isFirefox?this.register(p.addDisposableDomListener(this.element,"mousedown",function(I){I.button===2&&a.rightClickHandler(I,Y,Y.selectionManager,Y.options.rightClickSelectsWord)})):this.register(p.addDisposableDomListener(this.element,"contextmenu",function(I){a.rightClickHandler(I,Y,Y.selectionManager,Y.options.rightClickSelectsWord)})),d.isLinux&&this.register(p.addDisposableDomListener(this.element,"auxclick",function(I){I.button===1&&a.moveTextAreaUnderMouseCursor(I,Y)}))},le.prototype._bindKeys=function(){var Y=this,Z=this;this.register(p.addDisposableDomListener(this.element,"keydown",function(I){k.activeElement===this&&Z._keyDown(I)},!0)),this.register(p.addDisposableDomListener(this.element,"keypress",function(I){k.activeElement===this&&Z._keyPress(I)},!0)),this.register(p.addDisposableDomListener(this.element,"keyup",function(I){ce(I)||Y.focus(),Z._keyUp(I)},!0)),this.register(p.addDisposableDomListener(this.textarea,"keydown",function(I){return Y._keyDown(I)},!0)),this.register(p.addDisposableDomListener(this.textarea,"keypress",function(I){return Y._keyPress(I)},!0)),this.register(p.addDisposableDomListener(this.textarea,"compositionstart",function(){return Y._compositionHelper.compositionstart()})),this.register(p.addDisposableDomListener(this.textarea,"compositionupdate",function(I){return Y._compositionHelper.compositionupdate(I)})),this.register(p.addDisposableDomListener(this.textarea,"compositionend",function(){return Y._compositionHelper.compositionend()})),this.register(this.onRender(function(){return Y._compositionHelper.updateCompositionElements()})),this.register(this.onRender(function(I){return Y._queueLinkification(I.start,I.end)}))},le.prototype.open=function(Y){var Z=this;if(this._parent=Y||this._parent,!this._parent)throw new Error("Terminal requires a parent element.");this._context=this._parent.ownerDocument.defaultView,this._document=this._parent.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),this.element.setAttribute("tabindex","0"),this._parent.appendChild(this.element);var I=k.createDocumentFragment();this._viewportElement=k.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),I.appendChild(this._viewportElement),this._viewportScrollArea=k.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=k.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=k.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),I.appendChild(this.screenElement),this._mouseZoneManager=new g.MouseZoneManager(this),this.register(this._mouseZoneManager),this.register(this.onScroll(function(){return Z._mouseZoneManager.clearAll()})),this.linkifier.attachToDom(this._mouseZoneManager),this.textarea=k.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",v.promptLabel),this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this.register(p.addDisposableDomListener(this.textarea,"focus",function(ee){return Z._onTextAreaFocus(ee)})),this.register(p.addDisposableDomListener(this.textarea,"blur",function(){return Z._onTextAreaBlur()})),this._helperContainer.appendChild(this.textarea),this._compositionView=k.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=new n.CompositionHelper(this.textarea,this._compositionView,this),this._helperContainer.appendChild(this._compositionView),this.charMeasure=new h.CharMeasure(k,this._helperContainer),this.element.appendChild(I),this._theme=this.options.theme,this._colorManager=new R.ColorManager(k,this.options.allowTransparency),this._colorManager.setTheme(this._theme);var K=this._createRenderer();this._renderCoordinator=new A.RenderCoordinator(K,this.rows,this.screenElement),this._renderCoordinator.onRender(function(ee){return Z._onRender.fire(ee)}),this.onResize(function(ee){return Z._renderCoordinator.resize(ee.cols,ee.rows)}),this.viewport=new s.Viewport(this,this._viewportElement,this._viewportScrollArea,this.charMeasure,this._renderCoordinator.dimensions),this.viewport.onThemeChange(this._colorManager.colors),this.register(this.viewport),this.register(this.onCursorMove(function(){return Z._renderCoordinator.onCursorMove()})),this.register(this.onResize(function(){return Z._renderCoordinator.onResize(Z.cols,Z.rows)})),this.register(this.addDisposableListener("blur",function(){return Z._renderCoordinator.onBlur()})),this.register(this.addDisposableListener("focus",function(){return Z._renderCoordinator.onFocus()})),this.register(this.charMeasure.onCharSizeChanged(function(){return Z._renderCoordinator.onCharSizeChanged()})),this.register(this._renderCoordinator.onDimensionsChange(function(){return Z.viewport.syncScrollArea()})),this.selectionManager=new c.SelectionManager(this,this.charMeasure),this.register(this.selectionManager.onSelectionChange(function(){return Z._onSelectionChange.fire()})),this.register(p.addDisposableDomListener(this.element,"mousedown",function(ee){return Z.selectionManager.onMouseDown(ee)})),this.register(this.selectionManager.onRedrawRequest(function(ee){return Z._renderCoordinator.onSelectionChanged(ee.start,ee.end,ee.columnSelectMode)})),this.register(this.selectionManager.onLinuxMouseSelection(function(ee){Z.textarea.value=ee,Z.textarea.focus(),Z.textarea.select()})),this.register(this.onScroll(function(){Z.viewport.syncScrollArea(),Z.selectionManager.refresh()})),this.register(p.addDisposableDomListener(this._viewportElement,"scroll",function(){return Z.selectionManager.refresh()})),this.mouseHelper=new _.MouseHelper(this._renderCoordinator),this.element.classList.toggle("enable-mouse-events",this.mouseEvents),this.mouseEvents?this.selectionManager.disable():this.selectionManager.enable(),this.options.screenReaderMode&&(this._accessibilityManager=new x.AccessibilityManager(this,this._renderCoordinator.dimensions),this._accessibilityManager.register(this._renderCoordinator.onDimensionsChange(function(ee){return Z._accessibilityManager.setDimensions(ee)}))),this.charMeasure.measure(this.options),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()},le.prototype._createRenderer=function(){switch(this.options.rendererType){case"canvas":return new u.Renderer(this,this._colorManager.colors);case"dom":return new y.DomRenderer(this,this._colorManager.colors);default:throw new Error('Unrecognized rendererType "'+this.options.rendererType+'"')}},le.prototype._setTheme=function(Y){this._theme=Y,this._colorManager&&this._colorManager.setTheme(Y),this._renderCoordinator&&this._renderCoordinator.setColors(this._colorManager.colors),this.viewport&&this.viewport.onThemeChange(this._colorManager.colors)},le.prototype.bindMouse=function(){var Y=this,Z=this.element,I=this,K=32;function ee(N){var W,re;if(W=E(N),re=I.mouseHelper.getRawByteCoords(N,I.screenElement,I.charMeasure,I.cols,I.rows),!!re)switch(S(W,re),N.overrideType||N.type){case"mousedown":K=W;break;case"mouseup":K=32;break}}function ae(N){var W=K,re=I.mouseHelper.getRawByteCoords(N,I.screenElement,I.charMeasure,I.cols,I.rows);re&&(W+=32,S(W,re))}function Me(N,W){if(I.utfMouse){if(W>2047){N.push(2047);return}N.push(W)}else{if(W===255){N.push(0);return}W>127&&(W=127),N.push(W)}}function S(N,W){if(I._vt300Mouse){N&=3,W.x-=32,W.y-=32;var re=o.C0.ESC+"[24";if(N===0)re+="1";else if(N===1)re+="3";else if(N===2)re+="5";else{if(N===3)return;re+="0"}re+="~["+W.x+","+W.y+"]\r",I.handler(re);return}if(I._decLocator){N&=3,W.x-=32,W.y-=32,N===0?N=2:N===1?N=4:N===2?N=6:N===3&&(N=3),I.handler(o.C0.ESC+"["+N+";"+(N===3?4:0)+";"+W.y+";"+W.x+";"+W.page||"0&w");return}if(I.urxvtMouse){W.x-=32,W.y-=32,W.x++,W.y++,I.handler(o.C0.ESC+"["+N+";"+W.x+";"+W.y+"M");return}if(I.sgrMouse){W.x-=32,W.y-=32,I.handler(o.C0.ESC+"[<"+(((N&3)===3?N&-4:N)-32)+";"+W.x+";"+W.y+((N&3)===3?"m":"M"));return}var ne=[];Me(ne,N),Me(ne,W.x),Me(ne,W.y),I.handler(o.C0.ESC+"[M"+String.fromCharCode.apply(String,ne))}function E(N){var W,re,ne,de,pe;switch(N.overrideType||N.type){case"mousedown":W=N.button!==null&&N.button!==void 0?+N.button:N.which!==null&&N.which!==void 0?N.which-1:null,d.isMSIE&&(W=W===1?0:W===4?1:W);break;case"mouseup":W=3;break;case"DOMMouseScroll":W=N.detail<0?64:65;break;case"wheel":W=N.deltaY<0?64:65;break}return re=N.shiftKey?4:0,ne=N.metaKey?8:0,de=N.ctrlKey?16:0,pe=re|ne|de,I.vt200Mouse?pe&=de:I.normalMouse||(pe=0),W=32+(pe<<2)+W,W}this.register(p.addDisposableDomListener(Z,"mousedown",function(N){if(N.preventDefault(),Y.focus(),!(!Y.mouseEvents||Y.selectionManager.shouldForceSelection(N))){if(ee(N),Y.vt200Mouse)return N.overrideType="mouseup",ee(N),Y.cancel(N);var W;Y.normalMouse&&(W=function(ne){Y.normalMouse&&ae(ne)},Y._document.addEventListener("mousemove",W));var re=function(ne){return Y.normalMouse&&!Y.x10Mouse&&ee(ne),W&&(Y._document.removeEventListener("mousemove",W),W=null),Y._document.removeEventListener("mouseup",re),Y.cancel(ne)};return Y._document.addEventListener("mouseup",re),Y.cancel(N)}})),this.register(p.addDisposableDomListener(Z,"wheel",function(N){if(!Y.mouseEvents){if(!Y.buffer.hasScrollback){var W=Y.viewport.getLinesScrolled(N);if(W===0)return;for(var re=o.C0.ESC+(Y.applicationCursor?"O":"[")+(N.deltaY<0?"A":"B"),ne="",de=0;de<Math.abs(W);de++)ne+=re;Y.handler(ne)}return}Y.x10Mouse||Y._vt300Mouse||Y._decLocator||(ee(N),N.preventDefault())})),this.register(p.addDisposableDomListener(Z,"wheel",function(N){if(!Y.mouseEvents)return Y.viewport.onWheel(N),Y.cancel(N)})),this.register(p.addDisposableDomListener(Z,"touchstart",function(N){if(!Y.mouseEvents)return Y.viewport.onTouchStart(N),Y.cancel(N)})),this.register(p.addDisposableDomListener(Z,"touchmove",function(N){if(!Y.mouseEvents)return Y.viewport.onTouchMove(N),Y.cancel(N)}))},le.prototype.refresh=function(Y,Z){this._renderCoordinator&&this._renderCoordinator.refreshRows(Y,Z)},le.prototype._queueLinkification=function(Y,Z){this.linkifier&&this.linkifier.linkifyRows(Y,Z)},le.prototype.updateCursorStyle=function(Y){this.selectionManager&&this.selectionManager.shouldColumnSelect(Y)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")},le.prototype.showCursor=function(){this.cursorState||(this.cursorState=1,this.refresh(this.buffer.y,this.buffer.y))},le.prototype.scroll=function(Y){Y===void 0&&(Y=!1);var Z;Z=this._blankLine;var I=this.eraseAttrData();(!Z||Z.length!==this.cols||Z.getFg(0)!==I.fg||Z.getBg(0)!==I.bg)&&(Z=this.buffer.getBlankLine(I,Y),this._blankLine=Z),Z.isWrapped=Y;var K=this.buffer.ybase+this.buffer.scrollTop,ee=this.buffer.ybase+this.buffer.scrollBottom;if(this.buffer.scrollTop===0){var ae=this.buffer.lines.isFull;ee===this.buffer.lines.length-1?ae?this.buffer.lines.recycle().copyFrom(Z):this.buffer.lines.push(Z.clone()):this.buffer.lines.splice(ee+1,0,Z.clone()),ae?this._userScrolling&&(this.buffer.ydisp=Math.max(this.buffer.ydisp-1,0)):(this.buffer.ybase++,this._userScrolling||this.buffer.ydisp++)}else{var Me=ee-K+1;this.buffer.lines.shiftElements(K+1,Me-1,-1),this.buffer.lines.set(ee,Z.clone())}this._userScrolling||(this.buffer.ydisp=this.buffer.ybase),this.updateRange(this.buffer.scrollTop),this.updateRange(this.buffer.scrollBottom),this._onScroll.fire(this.buffer.ydisp)},le.prototype.scrollLines=function(Y,Z){if(Y<0){if(this.buffer.ydisp===0)return;this._userScrolling=!0}else Y+this.buffer.ydisp>=this.buffer.ybase&&(this._userScrolling=!1);var I=this.buffer.ydisp;this.buffer.ydisp=Math.max(Math.min(this.buffer.ydisp+Y,this.buffer.ybase),0),I!==this.buffer.ydisp&&(Z||this._onScroll.fire(this.buffer.ydisp),this.refresh(0,this.rows-1))},le.prototype.scrollPages=function(Y){this.scrollLines(Y*(this.rows-1))},le.prototype.scrollToTop=function(){this.scrollLines(-this.buffer.ydisp)},le.prototype.scrollToBottom=function(){this.scrollLines(this.buffer.ybase-this.buffer.ydisp)},le.prototype.scrollToLine=function(Y){var Z=Y-this.buffer.ydisp;Z!==0&&this.scrollLines(Z)},le.prototype.writeUtf8=function(Y){var Z=this;this._isDisposed||Y&&(this.writeBufferUtf8.push(Y),this.options.useFlowControl&&!this._xoffSentToCatchUp&&this.writeBufferUtf8.length>=O&&(this.handler(o.C0.DC3),this._xoffSentToCatchUp=!0),!this._writeInProgress&&this.writeBufferUtf8.length>0&&(this._writeInProgress=!0,setTimeout(function(){Z._innerWriteUtf8()})))},le.prototype._innerWriteUtf8=function(Y){var Z=this;Y===void 0&&(Y=0),this._isDisposed&&(this.writeBufferUtf8=[]);for(var I=Date.now();this.writeBufferUtf8.length>Y;){var K=this.writeBufferUtf8[Y];if(Y++,this._xoffSentToCatchUp&&this.writeBufferUtf8.length===Y&&(this.handler(o.C0.DC1),this._xoffSentToCatchUp=!1),this._refreshStart=this.buffer.y,this._refreshEnd=this.buffer.y,this._inputHandler.parseUtf8(K),this.updateRange(this.buffer.y),this.refresh(this._refreshStart,this._refreshEnd),Date.now()-I>=B)break}this.writeBufferUtf8.length>Y?(Y>$&&(this.writeBufferUtf8=this.writeBufferUtf8.slice(Y),Y=0),setTimeout(function(){return Z._innerWriteUtf8(Y)},0)):(this._writeInProgress=!1,this.writeBufferUtf8=[])},le.prototype.write=function(Y){var Z=this;this._isDisposed||Y&&(this.writeBuffer.push(Y),this.options.useFlowControl&&!this._xoffSentToCatchUp&&this.writeBuffer.length>=O&&(this.handler(o.C0.DC3),this._xoffSentToCatchUp=!0),!this._writeInProgress&&this.writeBuffer.length>0&&(this._writeInProgress=!0,setTimeout(function(){Z._innerWrite()})))},le.prototype._innerWrite=function(Y){var Z=this;Y===void 0&&(Y=0),this._isDisposed&&(this.writeBuffer=[]);for(var I=Date.now();this.writeBuffer.length>Y;){var K=this.writeBuffer[Y];if(Y++,this._xoffSentToCatchUp&&this.writeBuffer.length===Y&&(this.handler(o.C0.DC1),this._xoffSentToCatchUp=!1),this._refreshStart=this.buffer.y,this._refreshEnd=this.buffer.y,this._inputHandler.parse(K),this.updateRange(this.buffer.y),this.refresh(this._refreshStart,this._refreshEnd),Date.now()-I>=B)break}this.writeBuffer.length>Y?(Y>$&&(this.writeBuffer=this.writeBuffer.slice(Y),Y=0),setTimeout(function(){return Z._innerWrite(Y)},0)):(this._writeInProgress=!1,this.writeBuffer=[])},le.prototype.writeln=function(Y){this.write(Y+`\r
`)},le.prototype.attachCustomKeyEventHandler=function(Y){this._customKeyEventHandler=Y},le.prototype.addCsiHandler=function(Y,Z){return this._inputHandler.addCsiHandler(Y,Z)},le.prototype.addOscHandler=function(Y,Z){return this._inputHandler.addOscHandler(Y,Z)},le.prototype.registerLinkMatcher=function(Y,Z,I){var K=this.linkifier.registerLinkMatcher(Y,Z,I);return this.refresh(0,this.rows-1),K},le.prototype.deregisterLinkMatcher=function(Y){this.linkifier.deregisterLinkMatcher(Y)&&this.refresh(0,this.rows-1)},le.prototype.registerCharacterJoiner=function(Y){var Z=this._renderCoordinator.registerCharacterJoiner(Y);return this.refresh(0,this.rows-1),Z},le.prototype.deregisterCharacterJoiner=function(Y){this._renderCoordinator.deregisterCharacterJoiner(Y)&&this.refresh(0,this.rows-1)},Object.defineProperty(le.prototype,"markers",{get:function(){return this.buffer.markers},enumerable:!0,configurable:!0}),le.prototype.addMarker=function(Y){if(this.buffer===this.buffers.normal)return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+Y)},le.prototype.hasSelection=function(){return this.selectionManager?this.selectionManager.hasSelection:!1},le.prototype.select=function(Y,Z,I){this.selectionManager.setSelection(Y,Z,I)},le.prototype.getSelection=function(){return this.selectionManager?this.selectionManager.selectionText:""},le.prototype.getSelectionPosition=function(){if(this.selectionManager.hasSelection)return{startColumn:this.selectionManager.selectionStart[0],startRow:this.selectionManager.selectionStart[1],endColumn:this.selectionManager.selectionEnd[0],endRow:this.selectionManager.selectionEnd[1]}},le.prototype.clearSelection=function(){this.selectionManager&&this.selectionManager.clearSelection()},le.prototype.selectAll=function(){this.selectionManager&&this.selectionManager.selectAll()},le.prototype.selectLines=function(Y,Z){this.selectionManager&&this.selectionManager.selectLines(Y,Z)},le.prototype._keyDown=function(Y){if(this._customKeyEventHandler&&this._customKeyEventHandler(Y)===!1)return!1;if(!this._compositionHelper.keydown(Y))return this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;var Z=M.evaluateKeyboardEvent(Y,this.applicationCursor,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(Y),Z.type===3||Z.type===2){var I=this.rows-1;return this.scrollLines(Z.type===2?-I:I),this.cancel(Y,!0)}return Z.type===1&&this.selectAll(),this._isThirdLevelShift(this.browser,Y)||(Z.cancel&&this.cancel(Y,!0),!Z.key)?!0:(this.emit("keydown",Y),this._onKey.fire({key:Z.key,domEvent:Y}),this.showCursor(),this.handler(Z.key),this.cancel(Y,!0))},le.prototype._isThirdLevelShift=function(Y,Z){var I=Y.isMac&&!this.options.macOptionIsMeta&&Z.altKey&&!Z.ctrlKey&&!Z.metaKey||Y.isMSWindows&&Z.altKey&&Z.ctrlKey&&!Z.metaKey;return Z.type==="keypress"?I:I&&(!Z.keyCode||Z.keyCode>47)},le.prototype.setgLevel=function(Y){this.glevel=Y,this.charset=this.charsets[Y]},le.prototype.setgCharset=function(Y,Z){this.charsets[Y]=Z,this.glevel===Y&&(this.charset=Z)},le.prototype._keyUp=function(Y){this.updateCursorStyle(Y)},le.prototype._keyPress=function(Y){var Z;if(this._customKeyEventHandler&&this._customKeyEventHandler(Y)===!1)return!1;if(this.cancel(Y),Y.charCode)Z=Y.charCode;else if(Y.which===null||Y.which===void 0)Z=Y.keyCode;else if(Y.which!==0&&Y.charCode!==0)Z=Y.which;else return!1;return!Z||(Y.altKey||Y.ctrlKey||Y.metaKey)&&!this._isThirdLevelShift(this.browser,Y)?!1:(Z=String.fromCharCode(Z),this.emit("keypress",Z,Y),this._onKey.fire({key:Z,domEvent:Y}),this.showCursor(),this.handler(Z),!0)},le.prototype.bell=function(){var Y=this;this.emit("bell"),this._soundBell()&&this.soundManager.playBellSound(),this._visualBell()&&(this.element.classList.add("visual-bell-active"),clearTimeout(this._visualBellTimer),this._visualBellTimer=window.setTimeout(function(){Y.element.classList.remove("visual-bell-active")},200))},le.prototype.log=function(Y,Z){this.options.debug&&(!this._context.console||!this._context.console.log||this._context.console.log(Y,Z))},le.prototype.error=function(Y,Z){this.options.debug&&(!this._context.console||!this._context.console.error||this._context.console.error(Y,Z))},le.prototype.resize=function(Y,Z){if(!(isNaN(Y)||isNaN(Z))){if(Y===this.cols&&Z===this.rows){this.charMeasure&&(!this.charMeasure.width||!this.charMeasure.height)&&this.charMeasure.measure(this.options);return}Y<Q&&(Y=Q),Z<X&&(Z=X),this.buffers.resize(Y,Z),this.cols=Y,this.rows=Z,this.buffers.setupTabStops(this.cols),this.charMeasure&&this.charMeasure.measure(this.options),this.refresh(0,this.rows-1),this._onResize.fire({cols:Y,rows:Z})}},le.prototype.updateRange=function(Y){Y<this._refreshStart&&(this._refreshStart=Y),Y>this._refreshEnd&&(this._refreshEnd=Y)},le.prototype.maxRange=function(){this._refreshStart=0,this._refreshEnd=this.rows-1},le.prototype.clear=function(){if(!(this.buffer.ybase===0&&this.buffer.y===0)){this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(var Y=1;Y<this.rows;Y++)this.buffer.lines.push(this.buffer.getBlankLine(H.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1),this._onScroll.fire(this.buffer.ydisp)}},le.prototype.is=function(Y){return(this.options.termName+"").indexOf(Y)===0},le.prototype.handler=function(Y){this.options.disableStdin||(this.selectionManager&&this.selectionManager.hasSelection&&this.selectionManager.clearSelection(),this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),this._onData.fire(Y))},le.prototype.handleTitle=function(Y){this._onTitleChange.fire(Y)},le.prototype.index=function(){this.buffer.y++,this.buffer.y>this.buffer.scrollBottom&&(this.buffer.y--,this.scroll()),this.buffer.x>=this.cols&&this.buffer.x--},le.prototype.reverseIndex=function(){if(this.buffer.y===this.buffer.scrollTop){var Y=this.buffer.scrollBottom-this.buffer.scrollTop;this.buffer.lines.shiftElements(this.buffer.y+this.buffer.ybase,Y,1),this.buffer.lines.set(this.buffer.y+this.buffer.ybase,this.buffer.getBlankLine(this.eraseAttrData())),this.updateRange(this.buffer.scrollTop),this.updateRange(this.buffer.scrollBottom)}else this.buffer.y--},le.prototype.reset=function(){this.options.rows=this.rows,this.options.cols=this.cols;var Y=this._customKeyEventHandler,Z=this._inputHandler,I=this.cursorState,K=this.writeBuffer,ee=this.writeBufferUtf8,ae=this._writeInProgress,Me=this._xoffSentToCatchUp,S=this._userScrolling;this._setup(),this._customKeyEventHandler=Y,this._inputHandler=Z,this.cursorState=I,this.writeBuffer=K,this.writeBufferUtf8=ee,this._writeInProgress=ae,this._xoffSentToCatchUp=Me,this._userScrolling=S,this.refresh(0,this.rows-1),this.viewport&&this.viewport.syncScrollArea()},le.prototype.tabSet=function(){this.buffer.tabs[this.buffer.x]=!0},le.prototype.cancel=function(Y,Z){if(!(!this.options.cancelEvents&&!Z))return Y.preventDefault(),Y.stopPropagation(),!1},le.prototype._visualBell=function(){return!1},le.prototype._soundBell=function(){return this.options.bellStyle==="sound"},le}(i.EventEmitter);vs.Terminal=P;function ce(V){return V.keyCode===16||V.keyCode===17||V.keyCode===18}return vs}var _l={},U1;function hw(){if(U1)return _l;U1=1,Object.defineProperty(_l,"__esModule",{value:!0});var e=function(){function t(){this._addons=[]}return t.prototype.dispose=function(){for(var r=this._addons.length-1;r>=0;r--)this._addons[r].instance.dispose()},t.prototype.loadAddon=function(r,n){var i=this,s={instance:n,dispose:n.dispose,isDisposed:!1};this._addons.push(s),n.dispose=function(){return i._wrappedAddonDispose(s)},n.activate(r)},t.prototype._wrappedAddonDispose=function(r){if(!r.isDisposed){for(var n=-1,i=0;i<this._addons.length;i++)if(this._addons[i]===r){n=i;break}if(n===-1)throw new Error("Could not dispose an addon that has not been loaded");r.isDisposed=!0,r.dispose.apply(r.instance),this._addons.splice(n,1)}},t}();return _l.AddonManager=e,_l}var q1;function dw(){if(q1)return Ya;q1=1,Object.defineProperty(Ya,"__esModule",{value:!0});var e=fw(),t=rd(),r=hw(),n=function(){function o(l){this._core=new e.Terminal(l),this._addonManager=new r.AddonManager}return Object.defineProperty(o.prototype,"onCursorMove",{get:function(){return this._core.onCursorMove},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"onLineFeed",{get:function(){return this._core.onLineFeed},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"onSelectionChange",{get:function(){return this._core.onSelectionChange},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"onData",{get:function(){return this._core.onData},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"onTitleChange",{get:function(){return this._core.onTitleChange},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"onScroll",{get:function(){return this._core.onScroll},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"onKey",{get:function(){return this._core.onKey},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"onRender",{get:function(){return this._core.onRender},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"onResize",{get:function(){return this._core.onResize},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"element",{get:function(){return this._core.element},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"textarea",{get:function(){return this._core.textarea},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rows",{get:function(){return this._core.rows},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"cols",{get:function(){return this._core.cols},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"buffer",{get:function(){return new i(this._core.buffer)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"markers",{get:function(){return this._core.markers},enumerable:!0,configurable:!0}),o.prototype.blur=function(){this._core.blur()},o.prototype.focus=function(){this._core.focus()},o.prototype.on=function(l,u){this._core.on(l,u)},o.prototype.off=function(l,u){this._core.off(l,u)},o.prototype.emit=function(l,u){this._core.emit(l,u)},o.prototype.addDisposableListener=function(l,u){return this._core.addDisposableListener(l,u)},o.prototype.resize=function(l,u){this._core.resize(l,u)},o.prototype.writeln=function(l){this._core.writeln(l)},o.prototype.open=function(l){this._core.open(l)},o.prototype.attachCustomKeyEventHandler=function(l){this._core.attachCustomKeyEventHandler(l)},o.prototype.addCsiHandler=function(l,u){return this._core.addCsiHandler(l,u)},o.prototype.addOscHandler=function(l,u){return this._core.addOscHandler(l,u)},o.prototype.registerLinkMatcher=function(l,u,f){return this._core.registerLinkMatcher(l,u,f)},o.prototype.deregisterLinkMatcher=function(l){this._core.deregisterLinkMatcher(l)},o.prototype.registerCharacterJoiner=function(l){return this._core.registerCharacterJoiner(l)},o.prototype.deregisterCharacterJoiner=function(l){this._core.deregisterCharacterJoiner(l)},o.prototype.addMarker=function(l){return this._core.addMarker(l)},o.prototype.hasSelection=function(){return this._core.hasSelection()},o.prototype.select=function(l,u,f){this._core.select(l,u,f)},o.prototype.getSelection=function(){return this._core.getSelection()},o.prototype.getSelectionPosition=function(){return this._core.getSelectionPosition()},o.prototype.clearSelection=function(){this._core.clearSelection()},o.prototype.selectAll=function(){this._core.selectAll()},o.prototype.selectLines=function(l,u){this._core.selectLines(l,u)},o.prototype.dispose=function(){this._addonManager.dispose(),this._core.dispose()},o.prototype.destroy=function(){this._core.destroy()},o.prototype.scrollLines=function(l){this._core.scrollLines(l)},o.prototype.scrollPages=function(l){this._core.scrollPages(l)},o.prototype.scrollToTop=function(){this._core.scrollToTop()},o.prototype.scrollToBottom=function(){this._core.scrollToBottom()},o.prototype.scrollToLine=function(l){this._core.scrollToLine(l)},o.prototype.clear=function(){this._core.clear()},o.prototype.write=function(l){this._core.write(l)},o.prototype.writeUtf8=function(l){this._core.writeUtf8(l)},o.prototype.getOption=function(l){return this._core.getOption(l)},o.prototype.setOption=function(l,u){this._core.setOption(l,u)},o.prototype.refresh=function(l,u){this._core.refresh(l,u)},o.prototype.reset=function(){this._core.reset()},o.applyAddon=function(l){l.apply(o)},o.prototype.loadAddon=function(l){return this._addonManager.loadAddon(this,l)},Object.defineProperty(o,"strings",{get:function(){return t},enumerable:!0,configurable:!0}),o}();Ya.Terminal=n;var i=function(){function o(l){this._buffer=l}return Object.defineProperty(o.prototype,"cursorY",{get:function(){return this._buffer.y},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"cursorX",{get:function(){return this._buffer.x},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"viewportY",{get:function(){return this._buffer.ydisp},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"baseY",{get:function(){return this._buffer.ybase},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"length",{get:function(){return this._buffer.lines.length},enumerable:!0,configurable:!0}),o.prototype.getLine=function(l){var u=this._buffer.lines.get(l);if(u)return new s(u)},o}(),s=function(){function o(l){this._line=l}return Object.defineProperty(o.prototype,"isWrapped",{get:function(){return this._line.isWrapped},enumerable:!0,configurable:!0}),o.prototype.getCell=function(l){if(!(l<0||l>=this._line.length))return new a(this._line,l)},o.prototype.translateToString=function(l,u,f){return this._line.translateToString(l,u,f)},o}(),a=function(){function o(l,u){this._line=l,this._x=u}return Object.defineProperty(o.prototype,"char",{get:function(){return this._line.getString(this._x)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"width",{get:function(){return this._line.getWidth(this._x)},enumerable:!0,configurable:!0}),o}();return Ya}const pw={},mw=Object.freeze(Object.defineProperty({__proto__:null,default:pw},Symbol.toStringTag,{value:"Module"})),_a=M4(mw);var gl={exports:{}},z1;function ho(){return z1||(z1=1,typeof Object.create=="function"?gl.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:gl.exports=function(t,r){if(r){t.super_=r;var n=function(){};n.prototype=r.prototype,t.prototype=new n,t.prototype.constructor=t}}),gl.exports}var Uu,V1;function zg(){return V1||(V1=1,Uu=_a.EventEmitter),Uu}var qu={},Mo={},$1;function _w(){if($1)return Mo;$1=1,Mo.byteLength=o,Mo.toByteArray=u,Mo.fromByteArray=h;for(var e=[],t=[],r=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,s=n.length;i<s;++i)e[i]=n[i],t[n.charCodeAt(i)]=i;t[45]=62,t[95]=63;function a(d){var p=d.length;if(p%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var v=d.indexOf("=");v===-1&&(v=p);var _=v===p?0:4-v%4;return[v,_]}function o(d){var p=a(d),v=p[0],_=p[1];return(v+_)*3/4-_}function l(d,p,v){return(p+v)*3/4-v}function u(d){var p,v=a(d),_=v[0],m=v[1],g=new r(l(d,_,m)),x=0,L=m>0?_-4:_,y;for(y=0;y<L;y+=4)p=t[d.charCodeAt(y)]<<18|t[d.charCodeAt(y+1)]<<12|t[d.charCodeAt(y+2)]<<6|t[d.charCodeAt(y+3)],g[x++]=p>>16&255,g[x++]=p>>8&255,g[x++]=p&255;return m===2&&(p=t[d.charCodeAt(y)]<<2|t[d.charCodeAt(y+1)]>>4,g[x++]=p&255),m===1&&(p=t[d.charCodeAt(y)]<<10|t[d.charCodeAt(y+1)]<<4|t[d.charCodeAt(y+2)]>>2,g[x++]=p>>8&255,g[x++]=p&255),g}function f(d){return e[d>>18&63]+e[d>>12&63]+e[d>>6&63]+e[d&63]}function c(d,p,v){for(var _,m=[],g=p;g<v;g+=3)_=(d[g]<<16&16711680)+(d[g+1]<<8&65280)+(d[g+2]&255),m.push(f(_));return m.join("")}function h(d){for(var p,v=d.length,_=v%3,m=[],g=16383,x=0,L=v-_;x<L;x+=g)m.push(c(d,x,x+g>L?L:x+g));return _===1?(p=d[v-1],m.push(e[p>>2]+e[p<<4&63]+"==")):_===2&&(p=(d[v-2]<<8)+d[v-1],m.push(e[p>>10]+e[p>>4&63]+e[p<<2&63]+"=")),m.join("")}return Mo}var vl={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var W1;function gw(){return W1||(W1=1,vl.read=function(e,t,r,n,i){var s,a,o=i*8-n-1,l=(1<<o)-1,u=l>>1,f=-7,c=r?i-1:0,h=r?-1:1,d=e[t+c];for(c+=h,s=d&(1<<-f)-1,d>>=-f,f+=o;f>0;s=s*256+e[t+c],c+=h,f-=8);for(a=s&(1<<-f)-1,s>>=-f,f+=n;f>0;a=a*256+e[t+c],c+=h,f-=8);if(s===0)s=1-u;else{if(s===l)return a?NaN:(d?-1:1)*(1/0);a=a+Math.pow(2,n),s=s-u}return(d?-1:1)*a*Math.pow(2,s-n)},vl.write=function(e,t,r,n,i,s){var a,o,l,u=s*8-i-1,f=(1<<u)-1,c=f>>1,h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:s-1,p=n?1:-1,v=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,a=f):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),a+c>=1?t+=h/l:t+=h*Math.pow(2,1-c),t*l>=2&&(a++,l/=2),a+c>=f?(o=0,a=f):a+c>=1?(o=(t*l-1)*Math.pow(2,i),a=a+c):(o=t*Math.pow(2,c-1)*Math.pow(2,i),a=0));i>=8;e[r+d]=o&255,d+=p,o/=256,i-=8);for(a=a<<i|o,u+=i;u>0;e[r+d]=a&255,d+=p,a/=256,u-=8);e[r+d-p]|=v*128}),vl}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var K1;function qc(){return K1||(K1=1,function(e){const t=_w(),r=gw(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=o,e.SlowBuffer=g,e.INSPECT_MAX_BYTES=50;const i=2147483647;e.kMaxLength=i,o.TYPED_ARRAY_SUPPORT=s(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const z=new Uint8Array(1),C={foo:function(){return 42}};return Object.setPrototypeOf(C,Uint8Array.prototype),Object.setPrototypeOf(z,C),z.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function a(z){if(z>i)throw new RangeError('The value "'+z+'" is invalid for option "size"');const C=new Uint8Array(z);return Object.setPrototypeOf(C,o.prototype),C}function o(z,C,T){if(typeof z=="number"){if(typeof C=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return c(z)}return l(z,C,T)}o.poolSize=8192;function l(z,C,T){if(typeof z=="string")return h(z,C);if(ArrayBuffer.isView(z))return p(z);if(z==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof z);if(ke(z,ArrayBuffer)||z&&ke(z.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ke(z,SharedArrayBuffer)||z&&ke(z.buffer,SharedArrayBuffer)))return v(z,C,T);if(typeof z=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const q=z.valueOf&&z.valueOf();if(q!=null&&q!==z)return o.from(q,C,T);const ie=_(z);if(ie)return ie;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof z[Symbol.toPrimitive]=="function")return o.from(z[Symbol.toPrimitive]("string"),C,T);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof z)}o.from=function(z,C,T){return l(z,C,T)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function u(z){if(typeof z!="number")throw new TypeError('"size" argument must be of type number');if(z<0)throw new RangeError('The value "'+z+'" is invalid for option "size"')}function f(z,C,T){return u(z),z<=0?a(z):C!==void 0?typeof T=="string"?a(z).fill(C,T):a(z).fill(C):a(z)}o.alloc=function(z,C,T){return f(z,C,T)};function c(z){return u(z),a(z<0?0:m(z)|0)}o.allocUnsafe=function(z){return c(z)},o.allocUnsafeSlow=function(z){return c(z)};function h(z,C){if((typeof C!="string"||C==="")&&(C="utf8"),!o.isEncoding(C))throw new TypeError("Unknown encoding: "+C);const T=x(z,C)|0;let q=a(T);const ie=q.write(z,C);return ie!==T&&(q=q.slice(0,ie)),q}function d(z){const C=z.length<0?0:m(z.length)|0,T=a(C);for(let q=0;q<C;q+=1)T[q]=z[q]&255;return T}function p(z){if(ke(z,Uint8Array)){const C=new Uint8Array(z);return v(C.buffer,C.byteOffset,C.byteLength)}return d(z)}function v(z,C,T){if(C<0||z.byteLength<C)throw new RangeError('"offset" is outside of buffer bounds');if(z.byteLength<C+(T||0))throw new RangeError('"length" is outside of buffer bounds');let q;return C===void 0&&T===void 0?q=new Uint8Array(z):T===void 0?q=new Uint8Array(z,C):q=new Uint8Array(z,C,T),Object.setPrototypeOf(q,o.prototype),q}function _(z){if(o.isBuffer(z)){const C=m(z.length)|0,T=a(C);return T.length===0||z.copy(T,0,0,C),T}if(z.length!==void 0)return typeof z.length!="number"||we(z.length)?a(0):d(z);if(z.type==="Buffer"&&Array.isArray(z.data))return d(z.data)}function m(z){if(z>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return z|0}function g(z){return+z!=z&&(z=0),o.alloc(+z)}o.isBuffer=function(C){return C!=null&&C._isBuffer===!0&&C!==o.prototype},o.compare=function(C,T){if(ke(C,Uint8Array)&&(C=o.from(C,C.offset,C.byteLength)),ke(T,Uint8Array)&&(T=o.from(T,T.offset,T.byteLength)),!o.isBuffer(C)||!o.isBuffer(T))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(C===T)return 0;let q=C.length,ie=T.length;for(let j=0,U=Math.min(q,ie);j<U;++j)if(C[j]!==T[j]){q=C[j],ie=T[j];break}return q<ie?-1:ie<q?1:0},o.isEncoding=function(C){switch(String(C).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(C,T){if(!Array.isArray(C))throw new TypeError('"list" argument must be an Array of Buffers');if(C.length===0)return o.alloc(0);let q;if(T===void 0)for(T=0,q=0;q<C.length;++q)T+=C[q].length;const ie=o.allocUnsafe(T);let j=0;for(q=0;q<C.length;++q){let U=C[q];if(ke(U,Uint8Array))j+U.length>ie.length?(o.isBuffer(U)||(U=o.from(U)),U.copy(ie,j)):Uint8Array.prototype.set.call(ie,U,j);else if(o.isBuffer(U))U.copy(ie,j);else throw new TypeError('"list" argument must be an Array of Buffers');j+=U.length}return ie};function x(z,C){if(o.isBuffer(z))return z.length;if(ArrayBuffer.isView(z)||ke(z,ArrayBuffer))return z.byteLength;if(typeof z!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof z);const T=z.length,q=arguments.length>2&&arguments[2]===!0;if(!q&&T===0)return 0;let ie=!1;for(;;)switch(C){case"ascii":case"latin1":case"binary":return T;case"utf8":case"utf-8":return ne(z).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T*2;case"hex":return T>>>1;case"base64":return me(z).length;default:if(ie)return q?-1:ne(z).length;C=(""+C).toLowerCase(),ie=!0}}o.byteLength=x;function L(z,C,T){let q=!1;if((C===void 0||C<0)&&(C=0),C>this.length||((T===void 0||T>this.length)&&(T=this.length),T<=0)||(T>>>=0,C>>>=0,T<=C))return"";for(z||(z="utf8");;)switch(z){case"hex":return oe(this,C,T);case"utf8":case"utf-8":return O(this,C,T);case"ascii":return Q(this,C,T);case"latin1":case"binary":return X(this,C,T);case"base64":return k(this,C,T);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,C,T);default:if(q)throw new TypeError("Unknown encoding: "+z);z=(z+"").toLowerCase(),q=!0}}o.prototype._isBuffer=!0;function y(z,C,T){const q=z[C];z[C]=z[T],z[T]=q}o.prototype.swap16=function(){const C=this.length;if(C%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let T=0;T<C;T+=2)y(this,T,T+1);return this},o.prototype.swap32=function(){const C=this.length;if(C%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let T=0;T<C;T+=4)y(this,T,T+3),y(this,T+1,T+2);return this},o.prototype.swap64=function(){const C=this.length;if(C%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let T=0;T<C;T+=8)y(this,T,T+7),y(this,T+1,T+6),y(this,T+2,T+5),y(this,T+3,T+4);return this},o.prototype.toString=function(){const C=this.length;return C===0?"":arguments.length===0?O(this,0,C):L.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(C){if(!o.isBuffer(C))throw new TypeError("Argument must be a Buffer");return this===C?!0:o.compare(this,C)===0},o.prototype.inspect=function(){let C="";const T=e.INSPECT_MAX_BYTES;return C=this.toString("hex",0,T).replace(/(.{2})/g,"$1 ").trim(),this.length>T&&(C+=" ... "),"<Buffer "+C+">"},n&&(o.prototype[n]=o.prototype.inspect),o.prototype.compare=function(C,T,q,ie,j){if(ke(C,Uint8Array)&&(C=o.from(C,C.offset,C.byteLength)),!o.isBuffer(C))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof C);if(T===void 0&&(T=0),q===void 0&&(q=C?C.length:0),ie===void 0&&(ie=0),j===void 0&&(j=this.length),T<0||q>C.length||ie<0||j>this.length)throw new RangeError("out of range index");if(ie>=j&&T>=q)return 0;if(ie>=j)return-1;if(T>=q)return 1;if(T>>>=0,q>>>=0,ie>>>=0,j>>>=0,this===C)return 0;let U=j-ie,te=q-T;const se=Math.min(U,te),ue=this.slice(ie,j),J=C.slice(T,q);for(let he=0;he<se;++he)if(ue[he]!==J[he]){U=ue[he],te=J[he];break}return U<te?-1:te<U?1:0};function M(z,C,T,q,ie){if(z.length===0)return-1;if(typeof T=="string"?(q=T,T=0):T>2147483647?T=2147483647:T<-2147483648&&(T=-2147483648),T=+T,we(T)&&(T=ie?0:z.length-1),T<0&&(T=z.length+T),T>=z.length){if(ie)return-1;T=z.length-1}else if(T<0)if(ie)T=0;else return-1;if(typeof C=="string"&&(C=o.from(C,q)),o.isBuffer(C))return C.length===0?-1:F(z,C,T,q,ie);if(typeof C=="number")return C=C&255,typeof Uint8Array.prototype.indexOf=="function"?ie?Uint8Array.prototype.indexOf.call(z,C,T):Uint8Array.prototype.lastIndexOf.call(z,C,T):F(z,[C],T,q,ie);throw new TypeError("val must be string, number or Buffer")}function F(z,C,T,q,ie){let j=1,U=z.length,te=C.length;if(q!==void 0&&(q=String(q).toLowerCase(),q==="ucs2"||q==="ucs-2"||q==="utf16le"||q==="utf-16le")){if(z.length<2||C.length<2)return-1;j=2,U/=2,te/=2,T/=2}function se(J,he){return j===1?J[he]:J.readUInt16BE(he*j)}let ue;if(ie){let J=-1;for(ue=T;ue<U;ue++)if(se(z,ue)===se(C,J===-1?0:ue-J)){if(J===-1&&(J=ue),ue-J+1===te)return J*j}else J!==-1&&(ue-=ue-J),J=-1}else for(T+te>U&&(T=U-te),ue=T;ue>=0;ue--){let J=!0;for(let he=0;he<te;he++)if(se(z,ue+he)!==se(C,he)){J=!1;break}if(J)return ue}return-1}o.prototype.includes=function(C,T,q){return this.indexOf(C,T,q)!==-1},o.prototype.indexOf=function(C,T,q){return M(this,C,T,q,!0)},o.prototype.lastIndexOf=function(C,T,q){return M(this,C,T,q,!1)};function D(z,C,T,q){T=Number(T)||0;const ie=z.length-T;q?(q=Number(q),q>ie&&(q=ie)):q=ie;const j=C.length;q>j/2&&(q=j/2);let U;for(U=0;U<q;++U){const te=parseInt(C.substr(U*2,2),16);if(we(te))return U;z[T+U]=te}return U}function H(z,C,T,q){return fe(ne(C,z.length-T),z,T,q)}function b(z,C,T,q){return fe(de(C),z,T,q)}function R(z,C,T,q){return fe(me(C),z,T,q)}function A(z,C,T,q){return fe(pe(C,z.length-T),z,T,q)}o.prototype.write=function(C,T,q,ie){if(T===void 0)ie="utf8",q=this.length,T=0;else if(q===void 0&&typeof T=="string")ie=T,q=this.length,T=0;else if(isFinite(T))T=T>>>0,isFinite(q)?(q=q>>>0,ie===void 0&&(ie="utf8")):(ie=q,q=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const j=this.length-T;if((q===void 0||q>j)&&(q=j),C.length>0&&(q<0||T<0)||T>this.length)throw new RangeError("Attempt to write outside buffer bounds");ie||(ie="utf8");let U=!1;for(;;)switch(ie){case"hex":return D(this,C,T,q);case"utf8":case"utf-8":return H(this,C,T,q);case"ascii":case"latin1":case"binary":return b(this,C,T,q);case"base64":return R(this,C,T,q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,C,T,q);default:if(U)throw new TypeError("Unknown encoding: "+ie);ie=(""+ie).toLowerCase(),U=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function k(z,C,T){return C===0&&T===z.length?t.fromByteArray(z):t.fromByteArray(z.slice(C,T))}function O(z,C,T){T=Math.min(z.length,T);const q=[];let ie=C;for(;ie<T;){const j=z[ie];let U=null,te=j>239?4:j>223?3:j>191?2:1;if(ie+te<=T){let se,ue,J,he;switch(te){case 1:j<128&&(U=j);break;case 2:se=z[ie+1],(se&192)===128&&(he=(j&31)<<6|se&63,he>127&&(U=he));break;case 3:se=z[ie+1],ue=z[ie+2],(se&192)===128&&(ue&192)===128&&(he=(j&15)<<12|(se&63)<<6|ue&63,he>2047&&(he<55296||he>57343)&&(U=he));break;case 4:se=z[ie+1],ue=z[ie+2],J=z[ie+3],(se&192)===128&&(ue&192)===128&&(J&192)===128&&(he=(j&15)<<18|(se&63)<<12|(ue&63)<<6|J&63,he>65535&&he<1114112&&(U=he))}}U===null?(U=65533,te=1):U>65535&&(U-=65536,q.push(U>>>10&1023|55296),U=56320|U&1023),q.push(U),ie+=te}return $(q)}const B=4096;function $(z){const C=z.length;if(C<=B)return String.fromCharCode.apply(String,z);let T="",q=0;for(;q<C;)T+=String.fromCharCode.apply(String,z.slice(q,q+=B));return T}function Q(z,C,T){let q="";T=Math.min(z.length,T);for(let ie=C;ie<T;++ie)q+=String.fromCharCode(z[ie]&127);return q}function X(z,C,T){let q="";T=Math.min(z.length,T);for(let ie=C;ie<T;++ie)q+=String.fromCharCode(z[ie]);return q}function oe(z,C,T){const q=z.length;(!C||C<0)&&(C=0),(!T||T<0||T>q)&&(T=q);let ie="";for(let j=C;j<T;++j)ie+=Re[z[j]];return ie}function w(z,C,T){const q=z.slice(C,T);let ie="";for(let j=0;j<q.length-1;j+=2)ie+=String.fromCharCode(q[j]+q[j+1]*256);return ie}o.prototype.slice=function(C,T){const q=this.length;C=~~C,T=T===void 0?q:~~T,C<0?(C+=q,C<0&&(C=0)):C>q&&(C=q),T<0?(T+=q,T<0&&(T=0)):T>q&&(T=q),T<C&&(T=C);const ie=this.subarray(C,T);return Object.setPrototypeOf(ie,o.prototype),ie};function P(z,C,T){if(z%1!==0||z<0)throw new RangeError("offset is not uint");if(z+C>T)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(C,T,q){C=C>>>0,T=T>>>0,q||P(C,T,this.length);let ie=this[C],j=1,U=0;for(;++U<T&&(j*=256);)ie+=this[C+U]*j;return ie},o.prototype.readUintBE=o.prototype.readUIntBE=function(C,T,q){C=C>>>0,T=T>>>0,q||P(C,T,this.length);let ie=this[C+--T],j=1;for(;T>0&&(j*=256);)ie+=this[C+--T]*j;return ie},o.prototype.readUint8=o.prototype.readUInt8=function(C,T){return C=C>>>0,T||P(C,1,this.length),this[C]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(C,T){return C=C>>>0,T||P(C,2,this.length),this[C]|this[C+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(C,T){return C=C>>>0,T||P(C,2,this.length),this[C]<<8|this[C+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(C,T){return C=C>>>0,T||P(C,4,this.length),(this[C]|this[C+1]<<8|this[C+2]<<16)+this[C+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(C,T){return C=C>>>0,T||P(C,4,this.length),this[C]*16777216+(this[C+1]<<16|this[C+2]<<8|this[C+3])},o.prototype.readBigUInt64LE=Oe(function(C){C=C>>>0,E(C,"offset");const T=this[C],q=this[C+7];(T===void 0||q===void 0)&&N(C,this.length-8);const ie=T+this[++C]*2**8+this[++C]*2**16+this[++C]*2**24,j=this[++C]+this[++C]*2**8+this[++C]*2**16+q*2**24;return BigInt(ie)+(BigInt(j)<<BigInt(32))}),o.prototype.readBigUInt64BE=Oe(function(C){C=C>>>0,E(C,"offset");const T=this[C],q=this[C+7];(T===void 0||q===void 0)&&N(C,this.length-8);const ie=T*2**24+this[++C]*2**16+this[++C]*2**8+this[++C],j=this[++C]*2**24+this[++C]*2**16+this[++C]*2**8+q;return(BigInt(ie)<<BigInt(32))+BigInt(j)}),o.prototype.readIntLE=function(C,T,q){C=C>>>0,T=T>>>0,q||P(C,T,this.length);let ie=this[C],j=1,U=0;for(;++U<T&&(j*=256);)ie+=this[C+U]*j;return j*=128,ie>=j&&(ie-=Math.pow(2,8*T)),ie},o.prototype.readIntBE=function(C,T,q){C=C>>>0,T=T>>>0,q||P(C,T,this.length);let ie=T,j=1,U=this[C+--ie];for(;ie>0&&(j*=256);)U+=this[C+--ie]*j;return j*=128,U>=j&&(U-=Math.pow(2,8*T)),U},o.prototype.readInt8=function(C,T){return C=C>>>0,T||P(C,1,this.length),this[C]&128?(255-this[C]+1)*-1:this[C]},o.prototype.readInt16LE=function(C,T){C=C>>>0,T||P(C,2,this.length);const q=this[C]|this[C+1]<<8;return q&32768?q|4294901760:q},o.prototype.readInt16BE=function(C,T){C=C>>>0,T||P(C,2,this.length);const q=this[C+1]|this[C]<<8;return q&32768?q|4294901760:q},o.prototype.readInt32LE=function(C,T){return C=C>>>0,T||P(C,4,this.length),this[C]|this[C+1]<<8|this[C+2]<<16|this[C+3]<<24},o.prototype.readInt32BE=function(C,T){return C=C>>>0,T||P(C,4,this.length),this[C]<<24|this[C+1]<<16|this[C+2]<<8|this[C+3]},o.prototype.readBigInt64LE=Oe(function(C){C=C>>>0,E(C,"offset");const T=this[C],q=this[C+7];(T===void 0||q===void 0)&&N(C,this.length-8);const ie=this[C+4]+this[C+5]*2**8+this[C+6]*2**16+(q<<24);return(BigInt(ie)<<BigInt(32))+BigInt(T+this[++C]*2**8+this[++C]*2**16+this[++C]*2**24)}),o.prototype.readBigInt64BE=Oe(function(C){C=C>>>0,E(C,"offset");const T=this[C],q=this[C+7];(T===void 0||q===void 0)&&N(C,this.length-8);const ie=(T<<24)+this[++C]*2**16+this[++C]*2**8+this[++C];return(BigInt(ie)<<BigInt(32))+BigInt(this[++C]*2**24+this[++C]*2**16+this[++C]*2**8+q)}),o.prototype.readFloatLE=function(C,T){return C=C>>>0,T||P(C,4,this.length),r.read(this,C,!0,23,4)},o.prototype.readFloatBE=function(C,T){return C=C>>>0,T||P(C,4,this.length),r.read(this,C,!1,23,4)},o.prototype.readDoubleLE=function(C,T){return C=C>>>0,T||P(C,8,this.length),r.read(this,C,!0,52,8)},o.prototype.readDoubleBE=function(C,T){return C=C>>>0,T||P(C,8,this.length),r.read(this,C,!1,52,8)};function ce(z,C,T,q,ie,j){if(!o.isBuffer(z))throw new TypeError('"buffer" argument must be a Buffer instance');if(C>ie||C<j)throw new RangeError('"value" argument is out of bounds');if(T+q>z.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(C,T,q,ie){if(C=+C,T=T>>>0,q=q>>>0,!ie){const te=Math.pow(2,8*q)-1;ce(this,C,T,q,te,0)}let j=1,U=0;for(this[T]=C&255;++U<q&&(j*=256);)this[T+U]=C/j&255;return T+q},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(C,T,q,ie){if(C=+C,T=T>>>0,q=q>>>0,!ie){const te=Math.pow(2,8*q)-1;ce(this,C,T,q,te,0)}let j=q-1,U=1;for(this[T+j]=C&255;--j>=0&&(U*=256);)this[T+j]=C/U&255;return T+q},o.prototype.writeUint8=o.prototype.writeUInt8=function(C,T,q){return C=+C,T=T>>>0,q||ce(this,C,T,1,255,0),this[T]=C&255,T+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(C,T,q){return C=+C,T=T>>>0,q||ce(this,C,T,2,65535,0),this[T]=C&255,this[T+1]=C>>>8,T+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(C,T,q){return C=+C,T=T>>>0,q||ce(this,C,T,2,65535,0),this[T]=C>>>8,this[T+1]=C&255,T+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(C,T,q){return C=+C,T=T>>>0,q||ce(this,C,T,4,4294967295,0),this[T+3]=C>>>24,this[T+2]=C>>>16,this[T+1]=C>>>8,this[T]=C&255,T+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(C,T,q){return C=+C,T=T>>>0,q||ce(this,C,T,4,4294967295,0),this[T]=C>>>24,this[T+1]=C>>>16,this[T+2]=C>>>8,this[T+3]=C&255,T+4};function V(z,C,T,q,ie){S(C,q,ie,z,T,7);let j=Number(C&BigInt(4294967295));z[T++]=j,j=j>>8,z[T++]=j,j=j>>8,z[T++]=j,j=j>>8,z[T++]=j;let U=Number(C>>BigInt(32)&BigInt(4294967295));return z[T++]=U,U=U>>8,z[T++]=U,U=U>>8,z[T++]=U,U=U>>8,z[T++]=U,T}function le(z,C,T,q,ie){S(C,q,ie,z,T,7);let j=Number(C&BigInt(4294967295));z[T+7]=j,j=j>>8,z[T+6]=j,j=j>>8,z[T+5]=j,j=j>>8,z[T+4]=j;let U=Number(C>>BigInt(32)&BigInt(4294967295));return z[T+3]=U,U=U>>8,z[T+2]=U,U=U>>8,z[T+1]=U,U=U>>8,z[T]=U,T+8}o.prototype.writeBigUInt64LE=Oe(function(C,T=0){return V(this,C,T,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeBigUInt64BE=Oe(function(C,T=0){return le(this,C,T,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeIntLE=function(C,T,q,ie){if(C=+C,T=T>>>0,!ie){const se=Math.pow(2,8*q-1);ce(this,C,T,q,se-1,-se)}let j=0,U=1,te=0;for(this[T]=C&255;++j<q&&(U*=256);)C<0&&te===0&&this[T+j-1]!==0&&(te=1),this[T+j]=(C/U>>0)-te&255;return T+q},o.prototype.writeIntBE=function(C,T,q,ie){if(C=+C,T=T>>>0,!ie){const se=Math.pow(2,8*q-1);ce(this,C,T,q,se-1,-se)}let j=q-1,U=1,te=0;for(this[T+j]=C&255;--j>=0&&(U*=256);)C<0&&te===0&&this[T+j+1]!==0&&(te=1),this[T+j]=(C/U>>0)-te&255;return T+q},o.prototype.writeInt8=function(C,T,q){return C=+C,T=T>>>0,q||ce(this,C,T,1,127,-128),C<0&&(C=255+C+1),this[T]=C&255,T+1},o.prototype.writeInt16LE=function(C,T,q){return C=+C,T=T>>>0,q||ce(this,C,T,2,32767,-32768),this[T]=C&255,this[T+1]=C>>>8,T+2},o.prototype.writeInt16BE=function(C,T,q){return C=+C,T=T>>>0,q||ce(this,C,T,2,32767,-32768),this[T]=C>>>8,this[T+1]=C&255,T+2},o.prototype.writeInt32LE=function(C,T,q){return C=+C,T=T>>>0,q||ce(this,C,T,4,2147483647,-2147483648),this[T]=C&255,this[T+1]=C>>>8,this[T+2]=C>>>16,this[T+3]=C>>>24,T+4},o.prototype.writeInt32BE=function(C,T,q){return C=+C,T=T>>>0,q||ce(this,C,T,4,2147483647,-2147483648),C<0&&(C=4294967295+C+1),this[T]=C>>>24,this[T+1]=C>>>16,this[T+2]=C>>>8,this[T+3]=C&255,T+4},o.prototype.writeBigInt64LE=Oe(function(C,T=0){return V(this,C,T,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeBigInt64BE=Oe(function(C,T=0){return le(this,C,T,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Y(z,C,T,q,ie,j){if(T+q>z.length)throw new RangeError("Index out of range");if(T<0)throw new RangeError("Index out of range")}function Z(z,C,T,q,ie){return C=+C,T=T>>>0,ie||Y(z,C,T,4),r.write(z,C,T,q,23,4),T+4}o.prototype.writeFloatLE=function(C,T,q){return Z(this,C,T,!0,q)},o.prototype.writeFloatBE=function(C,T,q){return Z(this,C,T,!1,q)};function I(z,C,T,q,ie){return C=+C,T=T>>>0,ie||Y(z,C,T,8),r.write(z,C,T,q,52,8),T+8}o.prototype.writeDoubleLE=function(C,T,q){return I(this,C,T,!0,q)},o.prototype.writeDoubleBE=function(C,T,q){return I(this,C,T,!1,q)},o.prototype.copy=function(C,T,q,ie){if(!o.isBuffer(C))throw new TypeError("argument should be a Buffer");if(q||(q=0),!ie&&ie!==0&&(ie=this.length),T>=C.length&&(T=C.length),T||(T=0),ie>0&&ie<q&&(ie=q),ie===q||C.length===0||this.length===0)return 0;if(T<0)throw new RangeError("targetStart out of bounds");if(q<0||q>=this.length)throw new RangeError("Index out of range");if(ie<0)throw new RangeError("sourceEnd out of bounds");ie>this.length&&(ie=this.length),C.length-T<ie-q&&(ie=C.length-T+q);const j=ie-q;return this===C&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(T,q,ie):Uint8Array.prototype.set.call(C,this.subarray(q,ie),T),j},o.prototype.fill=function(C,T,q,ie){if(typeof C=="string"){if(typeof T=="string"?(ie=T,T=0,q=this.length):typeof q=="string"&&(ie=q,q=this.length),ie!==void 0&&typeof ie!="string")throw new TypeError("encoding must be a string");if(typeof ie=="string"&&!o.isEncoding(ie))throw new TypeError("Unknown encoding: "+ie);if(C.length===1){const U=C.charCodeAt(0);(ie==="utf8"&&U<128||ie==="latin1")&&(C=U)}}else typeof C=="number"?C=C&255:typeof C=="boolean"&&(C=Number(C));if(T<0||this.length<T||this.length<q)throw new RangeError("Out of range index");if(q<=T)return this;T=T>>>0,q=q===void 0?this.length:q>>>0,C||(C=0);let j;if(typeof C=="number")for(j=T;j<q;++j)this[j]=C;else{const U=o.isBuffer(C)?C:o.from(C,ie),te=U.length;if(te===0)throw new TypeError('The value "'+C+'" is invalid for argument "value"');for(j=0;j<q-T;++j)this[j+T]=U[j%te]}return this};const K={};function ee(z,C,T){K[z]=class extends T{constructor(){super(),Object.defineProperty(this,"message",{value:C.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${z}]`,this.stack,delete this.name}get code(){return z}set code(ie){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ie,writable:!0})}toString(){return`${this.name} [${z}]: ${this.message}`}}}ee("ERR_BUFFER_OUT_OF_BOUNDS",function(z){return z?`${z} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ee("ERR_INVALID_ARG_TYPE",function(z,C){return`The "${z}" argument must be of type number. Received type ${typeof C}`},TypeError),ee("ERR_OUT_OF_RANGE",function(z,C,T){let q=`The value of "${z}" is out of range.`,ie=T;return Number.isInteger(T)&&Math.abs(T)>2**32?ie=ae(String(T)):typeof T=="bigint"&&(ie=String(T),(T>BigInt(2)**BigInt(32)||T<-(BigInt(2)**BigInt(32)))&&(ie=ae(ie)),ie+="n"),q+=` It must be ${C}. Received ${ie}`,q},RangeError);function ae(z){let C="",T=z.length;const q=z[0]==="-"?1:0;for(;T>=q+4;T-=3)C=`_${z.slice(T-3,T)}${C}`;return`${z.slice(0,T)}${C}`}function Me(z,C,T){E(C,"offset"),(z[C]===void 0||z[C+T]===void 0)&&N(C,z.length-(T+1))}function S(z,C,T,q,ie,j){if(z>T||z<C){const U=typeof C=="bigint"?"n":"";let te;throw C===0||C===BigInt(0)?te=`>= 0${U} and < 2${U} ** ${(j+1)*8}${U}`:te=`>= -(2${U} ** ${(j+1)*8-1}${U}) and < 2 ** ${(j+1)*8-1}${U}`,new K.ERR_OUT_OF_RANGE("value",te,z)}Me(q,ie,j)}function E(z,C){if(typeof z!="number")throw new K.ERR_INVALID_ARG_TYPE(C,"number",z)}function N(z,C,T){throw Math.floor(z)!==z?(E(z,T),new K.ERR_OUT_OF_RANGE("offset","an integer",z)):C<0?new K.ERR_BUFFER_OUT_OF_BOUNDS:new K.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${C}`,z)}const W=/[^+/0-9A-Za-z-_]/g;function re(z){if(z=z.split("=")[0],z=z.trim().replace(W,""),z.length<2)return"";for(;z.length%4!==0;)z=z+"=";return z}function ne(z,C){C=C||1/0;let T;const q=z.length;let ie=null;const j=[];for(let U=0;U<q;++U){if(T=z.charCodeAt(U),T>55295&&T<57344){if(!ie){if(T>56319){(C-=3)>-1&&j.push(239,191,189);continue}else if(U+1===q){(C-=3)>-1&&j.push(239,191,189);continue}ie=T;continue}if(T<56320){(C-=3)>-1&&j.push(239,191,189),ie=T;continue}T=(ie-55296<<10|T-56320)+65536}else ie&&(C-=3)>-1&&j.push(239,191,189);if(ie=null,T<128){if((C-=1)<0)break;j.push(T)}else if(T<2048){if((C-=2)<0)break;j.push(T>>6|192,T&63|128)}else if(T<65536){if((C-=3)<0)break;j.push(T>>12|224,T>>6&63|128,T&63|128)}else if(T<1114112){if((C-=4)<0)break;j.push(T>>18|240,T>>12&63|128,T>>6&63|128,T&63|128)}else throw new Error("Invalid code point")}return j}function de(z){const C=[];for(let T=0;T<z.length;++T)C.push(z.charCodeAt(T)&255);return C}function pe(z,C){let T,q,ie;const j=[];for(let U=0;U<z.length&&!((C-=2)<0);++U)T=z.charCodeAt(U),q=T>>8,ie=T%256,j.push(ie),j.push(q);return j}function me(z){return t.toByteArray(re(z))}function fe(z,C,T,q){let ie;for(ie=0;ie<q&&!(ie+T>=C.length||ie>=z.length);++ie)C[ie+T]=z[ie];return ie}function ke(z,C){return z instanceof C||z!=null&&z.constructor!=null&&z.constructor.name!=null&&z.constructor.name===C.name}function we(z){return z!==z}const Re=function(){const z="0123456789abcdef",C=new Array(256);for(let T=0;T<16;++T){const q=T*16;for(let ie=0;ie<16;++ie)C[q+ie]=z[T]+z[ie]}return C}();function Oe(z){return typeof BigInt>"u"?Pe:z}function Pe(){throw new Error("BigInt not supported")}}(qu)),qu}var zu,Y1;function vw(){if(Y1)return zu;Y1=1;function e(p,v){var _=Object.keys(p);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(p);v&&(m=m.filter(function(g){return Object.getOwnPropertyDescriptor(p,g).enumerable})),_.push.apply(_,m)}return _}function t(p){for(var v=1;v<arguments.length;v++){var _=arguments[v]!=null?arguments[v]:{};v%2?e(Object(_),!0).forEach(function(m){r(p,m,_[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(_)):e(Object(_)).forEach(function(m){Object.defineProperty(p,m,Object.getOwnPropertyDescriptor(_,m))})}return p}function r(p,v,_){return v=a(v),v in p?Object.defineProperty(p,v,{value:_,enumerable:!0,configurable:!0,writable:!0}):p[v]=_,p}function n(p,v){if(!(p instanceof v))throw new TypeError("Cannot call a class as a function")}function i(p,v){for(var _=0;_<v.length;_++){var m=v[_];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(p,a(m.key),m)}}function s(p,v,_){return v&&i(p.prototype,v),Object.defineProperty(p,"prototype",{writable:!1}),p}function a(p){var v=o(p,"string");return typeof v=="symbol"?v:String(v)}function o(p,v){if(typeof p!="object"||p===null)return p;var _=p[Symbol.toPrimitive];if(_!==void 0){var m=_.call(p,v);if(typeof m!="object")return m;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(p)}var l=qc(),u=l.Buffer,f=_a,c=f.inspect,h=c&&c.custom||"inspect";function d(p,v,_){u.prototype.copy.call(p,v,_)}return zu=function(){function p(){n(this,p),this.head=null,this.tail=null,this.length=0}return s(p,[{key:"push",value:function(_){var m={data:_,next:null};this.length>0?this.tail.next=m:this.head=m,this.tail=m,++this.length}},{key:"unshift",value:function(_){var m={data:_,next:this.head};this.length===0&&(this.tail=m),this.head=m,++this.length}},{key:"shift",value:function(){if(this.length!==0){var _=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,_}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(_){if(this.length===0)return"";for(var m=this.head,g=""+m.data;m=m.next;)g+=_+m.data;return g}},{key:"concat",value:function(_){if(this.length===0)return u.alloc(0);for(var m=u.allocUnsafe(_>>>0),g=this.head,x=0;g;)d(g.data,m,x),x+=g.data.length,g=g.next;return m}},{key:"consume",value:function(_,m){var g;return _<this.head.data.length?(g=this.head.data.slice(0,_),this.head.data=this.head.data.slice(_)):_===this.head.data.length?g=this.shift():g=m?this._getString(_):this._getBuffer(_),g}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(_){var m=this.head,g=1,x=m.data;for(_-=x.length;m=m.next;){var L=m.data,y=_>L.length?L.length:_;if(y===L.length?x+=L:x+=L.slice(0,_),_-=y,_===0){y===L.length?(++g,m.next?this.head=m.next:this.head=this.tail=null):(this.head=m,m.data=L.slice(y));break}++g}return this.length-=g,x}},{key:"_getBuffer",value:function(_){var m=u.allocUnsafe(_),g=this.head,x=1;for(g.data.copy(m),_-=g.data.length;g=g.next;){var L=g.data,y=_>L.length?L.length:_;if(L.copy(m,m.length-_,0,y),_-=y,_===0){y===L.length?(++x,g.next?this.head=g.next:this.head=this.tail=null):(this.head=g,g.data=L.slice(y));break}++x}return this.length-=x,m}},{key:h,value:function(_,m){return c(this,t(t({},m),{},{depth:0,customInspect:!1}))}}]),p}(),zu}var Vu,G1;function Vg(){if(G1)return Vu;G1=1;var e={env:{}};function t(o,l){var u=this,f=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return f||c?(l?l(o):o&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(s,this,o)):e.nextTick(s,this,o)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(o||null,function(h){!l&&h?u._writableState?u._writableState.errorEmitted?e.nextTick(n,u):(u._writableState.errorEmitted=!0,e.nextTick(r,u,h)):e.nextTick(r,u,h):l?(e.nextTick(n,u),l(h)):e.nextTick(n,u)}),this)}function r(o,l){s(o,l),n(o)}function n(o){o._writableState&&!o._writableState.emitClose||o._readableState&&!o._readableState.emitClose||o.emit("close")}function i(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function s(o,l){o.emit("error",l)}function a(o,l){var u=o._readableState,f=o._writableState;u&&u.autoDestroy||f&&f.autoDestroy?o.destroy(l):o.emit("error",l)}return Vu={destroy:t,undestroy:i,errorOrDestroy:a},Vu}var $u={},X1;function po(){if(X1)return $u;X1=1;function e(o,l){o.prototype=Object.create(l.prototype),o.prototype.constructor=o,o.__proto__=l}var t={};function r(o,l,u){u||(u=Error);function f(h,d,p){return typeof l=="string"?l:l(h,d,p)}var c=function(h){e(d,h);function d(p,v,_){return h.call(this,f(p,v,_))||this}return d}(u);c.prototype.name=u.name,c.prototype.code=o,t[o]=c}function n(o,l){if(Array.isArray(o)){var u=o.length;return o=o.map(function(f){return String(f)}),u>2?"one of ".concat(l," ").concat(o.slice(0,u-1).join(", "),", or ")+o[u-1]:u===2?"one of ".concat(l," ").concat(o[0]," or ").concat(o[1]):"of ".concat(l," ").concat(o[0])}else return"of ".concat(l," ").concat(String(o))}function i(o,l,u){return o.substr(0,l.length)===l}function s(o,l,u){return(u===void 0||u>o.length)&&(u=o.length),o.substring(u-l.length,u)===l}function a(o,l,u){return typeof u!="number"&&(u=0),u+l.length>o.length?!1:o.indexOf(l,u)!==-1}return r("ERR_INVALID_OPT_VALUE",function(o,l){return'The value "'+l+'" is invalid for option "'+o+'"'},TypeError),r("ERR_INVALID_ARG_TYPE",function(o,l,u){var f;typeof l=="string"&&i(l,"not ")?(f="must not be",l=l.replace(/^not /,"")):f="must be";var c;if(s(o," argument"))c="The ".concat(o," ").concat(f," ").concat(n(l,"type"));else{var h=a(o,".")?"property":"argument";c='The "'.concat(o,'" ').concat(h," ").concat(f," ").concat(n(l,"type"))}return c+=". Received type ".concat(typeof u),c},TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",function(o){return"The "+o+" method is not implemented"}),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",function(o){return"Cannot call "+o+" after a stream was destroyed"}),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",function(o){return"Unknown encoding: "+o},TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),$u.codes=t,$u}var Wu,Z1;function $g(){if(Z1)return Wu;Z1=1;var e=po().codes.ERR_INVALID_OPT_VALUE;function t(n,i,s){return n.highWaterMark!=null?n.highWaterMark:i?n[s]:null}function r(n,i,s,a){var o=t(i,a,s);if(o!=null){if(!(isFinite(o)&&Math.floor(o)===o)||o<0){var l=a?s:"highWaterMark";throw new e(l,o)}return Math.floor(o)}return n.objectMode?16:16*1024}return Wu={getHighWaterMark:r},Wu}var Ku,Q1;function yw(){if(Q1)return Ku;Q1=1,Ku=e;function e(r,n){if(t("noDeprecation"))return r;var i=!1;function s(){if(!i){if(t("throwDeprecation"))throw new Error(n);t("traceDeprecation")?console.trace(n):console.warn(n),i=!0}return r.apply(this,arguments)}return s}function t(r){try{if(!globalThis.localStorage)return!1}catch{return!1}var n=globalThis.localStorage[r];return n==null?!1:String(n).toLowerCase()==="true"}return Ku}var Yu,J1;function Wg(){if(J1)return Yu;J1=1;var e={env:{}};Yu=H;function t(I){var K=this;this.next=null,this.entry=null,this.finish=function(){Z(K,I)}}var r;H.WritableState=F;var n={deprecate:yw()},i=zg(),s=qc().Buffer,a=(typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function o(I){return s.from(I)}function l(I){return s.isBuffer(I)||I instanceof a}var u=Vg(),f=$g(),c=f.getHighWaterMark,h=po().codes,d=h.ERR_INVALID_ARG_TYPE,p=h.ERR_METHOD_NOT_IMPLEMENTED,v=h.ERR_MULTIPLE_CALLBACK,_=h.ERR_STREAM_CANNOT_PIPE,m=h.ERR_STREAM_DESTROYED,g=h.ERR_STREAM_NULL_VALUES,x=h.ERR_STREAM_WRITE_AFTER_END,L=h.ERR_UNKNOWN_ENCODING,y=u.errorOrDestroy;ho()(H,i);function M(){}function F(I,K,ee){r=r||so(),I=I||{},typeof ee!="boolean"&&(ee=K instanceof r),this.objectMode=!!I.objectMode,ee&&(this.objectMode=this.objectMode||!!I.writableObjectMode),this.highWaterMark=c(this,I,"writableHighWaterMark",ee),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var ae=I.decodeStrings===!1;this.decodeStrings=!ae,this.defaultEncoding=I.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Me){Q(K,Me)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=I.emitClose!==!1,this.autoDestroy=!!I.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new t(this)}F.prototype.getBuffer=function(){for(var K=this.bufferedRequest,ee=[];K;)ee.push(K),K=K.next;return ee},function(){try{Object.defineProperty(F.prototype,"buffer",{get:n.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var D;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(D=Function.prototype[Symbol.hasInstance],Object.defineProperty(H,Symbol.hasInstance,{value:function(K){return D.call(this,K)?!0:this!==H?!1:K&&K._writableState instanceof F}})):D=function(K){return K instanceof this};function H(I){r=r||so();var K=this instanceof r;if(!K&&!D.call(H,this))return new H(I);this._writableState=new F(I,this,K),this.writable=!0,I&&(typeof I.write=="function"&&(this._write=I.write),typeof I.writev=="function"&&(this._writev=I.writev),typeof I.destroy=="function"&&(this._destroy=I.destroy),typeof I.final=="function"&&(this._final=I.final)),i.call(this)}H.prototype.pipe=function(){y(this,new _)};function b(I,K){var ee=new x;y(I,ee),e.nextTick(K,ee)}function R(I,K,ee,ae){var Me;return ee===null?Me=new g:typeof ee!="string"&&!K.objectMode&&(Me=new d("chunk",["string","Buffer"],ee)),Me?(y(I,Me),e.nextTick(ae,Me),!1):!0}H.prototype.write=function(I,K,ee){var ae=this._writableState,Me=!1,S=!ae.objectMode&&l(I);return S&&!s.isBuffer(I)&&(I=o(I)),typeof K=="function"&&(ee=K,K=null),S?K="buffer":K||(K=ae.defaultEncoding),typeof ee!="function"&&(ee=M),ae.ending?b(this,ee):(S||R(this,ae,I,ee))&&(ae.pendingcb++,Me=k(this,ae,S,I,K,ee)),Me},H.prototype.cork=function(){this._writableState.corked++},H.prototype.uncork=function(){var I=this._writableState;I.corked&&(I.corked--,!I.writing&&!I.corked&&!I.bufferProcessing&&I.bufferedRequest&&w(this,I))},H.prototype.setDefaultEncoding=function(K){if(typeof K=="string"&&(K=K.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((K+"").toLowerCase())>-1))throw new L(K);return this._writableState.defaultEncoding=K,this},Object.defineProperty(H.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function A(I,K,ee){return!I.objectMode&&I.decodeStrings!==!1&&typeof K=="string"&&(K=s.from(K,ee)),K}Object.defineProperty(H.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function k(I,K,ee,ae,Me,S){if(!ee){var E=A(K,ae,Me);ae!==E&&(ee=!0,Me="buffer",ae=E)}var N=K.objectMode?1:ae.length;K.length+=N;var W=K.length<K.highWaterMark;if(W||(K.needDrain=!0),K.writing||K.corked){var re=K.lastBufferedRequest;K.lastBufferedRequest={chunk:ae,encoding:Me,isBuf:ee,callback:S,next:null},re?re.next=K.lastBufferedRequest:K.bufferedRequest=K.lastBufferedRequest,K.bufferedRequestCount+=1}else O(I,K,!1,N,ae,Me,S);return W}function O(I,K,ee,ae,Me,S,E){K.writelen=ae,K.writecb=E,K.writing=!0,K.sync=!0,K.destroyed?K.onwrite(new m("write")):ee?I._writev(Me,K.onwrite):I._write(Me,S,K.onwrite),K.sync=!1}function B(I,K,ee,ae,Me){--K.pendingcb,ee?(e.nextTick(Me,ae),e.nextTick(le,I,K),I._writableState.errorEmitted=!0,y(I,ae)):(Me(ae),I._writableState.errorEmitted=!0,y(I,ae),le(I,K))}function $(I){I.writing=!1,I.writecb=null,I.length-=I.writelen,I.writelen=0}function Q(I,K){var ee=I._writableState,ae=ee.sync,Me=ee.writecb;if(typeof Me!="function")throw new v;if($(ee),K)B(I,ee,ae,K,Me);else{var S=P(ee)||I.destroyed;!S&&!ee.corked&&!ee.bufferProcessing&&ee.bufferedRequest&&w(I,ee),ae?e.nextTick(X,I,ee,S,Me):X(I,ee,S,Me)}}function X(I,K,ee,ae){ee||oe(I,K),K.pendingcb--,ae(),le(I,K)}function oe(I,K){K.length===0&&K.needDrain&&(K.needDrain=!1,I.emit("drain"))}function w(I,K){K.bufferProcessing=!0;var ee=K.bufferedRequest;if(I._writev&&ee&&ee.next){var ae=K.bufferedRequestCount,Me=new Array(ae),S=K.corkedRequestsFree;S.entry=ee;for(var E=0,N=!0;ee;)Me[E]=ee,ee.isBuf||(N=!1),ee=ee.next,E+=1;Me.allBuffers=N,O(I,K,!0,K.length,Me,"",S.finish),K.pendingcb++,K.lastBufferedRequest=null,S.next?(K.corkedRequestsFree=S.next,S.next=null):K.corkedRequestsFree=new t(K),K.bufferedRequestCount=0}else{for(;ee;){var W=ee.chunk,re=ee.encoding,ne=ee.callback,de=K.objectMode?1:W.length;if(O(I,K,!1,de,W,re,ne),ee=ee.next,K.bufferedRequestCount--,K.writing)break}ee===null&&(K.lastBufferedRequest=null)}K.bufferedRequest=ee,K.bufferProcessing=!1}H.prototype._write=function(I,K,ee){ee(new p("_write()"))},H.prototype._writev=null,H.prototype.end=function(I,K,ee){var ae=this._writableState;return typeof I=="function"?(ee=I,I=null,K=null):typeof K=="function"&&(ee=K,K=null),I!=null&&this.write(I,K),ae.corked&&(ae.corked=1,this.uncork()),ae.ending||Y(this,ae,ee),this},Object.defineProperty(H.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function P(I){return I.ending&&I.length===0&&I.bufferedRequest===null&&!I.finished&&!I.writing}function ce(I,K){I._final(function(ee){K.pendingcb--,ee&&y(I,ee),K.prefinished=!0,I.emit("prefinish"),le(I,K)})}function V(I,K){!K.prefinished&&!K.finalCalled&&(typeof I._final=="function"&&!K.destroyed?(K.pendingcb++,K.finalCalled=!0,e.nextTick(ce,I,K)):(K.prefinished=!0,I.emit("prefinish")))}function le(I,K){var ee=P(K);if(ee&&(V(I,K),K.pendingcb===0&&(K.finished=!0,I.emit("finish"),K.autoDestroy))){var ae=I._readableState;(!ae||ae.autoDestroy&&ae.endEmitted)&&I.destroy()}return ee}function Y(I,K,ee){K.ending=!0,le(I,K),ee&&(K.finished?e.nextTick(ee):I.once("finish",ee)),K.ended=!0,I.writable=!1}function Z(I,K,ee){var ae=I.entry;for(I.entry=null;ae;){var Me=ae.callback;K.pendingcb--,Me(ee),ae=ae.next}K.corkedRequestsFree.next=I}return Object.defineProperty(H.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(K){this._writableState&&(this._writableState.destroyed=K)}}),H.prototype.destroy=u.destroy,H.prototype._undestroy=u.undestroy,H.prototype._destroy=function(I,K){K(I)},Yu}var Gu,ep;function so(){if(ep)return Gu;ep=1;var e={env:{}},t=Object.keys||function(f){var c=[];for(var h in f)c.push(h);return c};Gu=o;var r=Kg(),n=Wg();ho()(o,r);for(var i=t(n.prototype),s=0;s<i.length;s++){var a=i[s];o.prototype[a]||(o.prototype[a]=n.prototype[a])}function o(f){if(!(this instanceof o))return new o(f);r.call(this,f),n.call(this,f),this.allowHalfOpen=!0,f&&(f.readable===!1&&(this.readable=!1),f.writable===!1&&(this.writable=!1),f.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",l)))}Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(o.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(o.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function l(){this._writableState.ended||e.nextTick(u,this)}function u(f){f.end()}return Object.defineProperty(o.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(c){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=c,this._writableState.destroyed=c)}}),Gu}var Xu={},yl={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var tp;function bw(){return tp||(tp=1,function(e,t){var r=qc(),n=r.Buffer;function i(a,o){for(var l in a)o[l]=a[l]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=r:(i(r,t),t.Buffer=s);function s(a,o,l){return n(a,o,l)}s.prototype=Object.create(n.prototype),i(n,s),s.from=function(a,o,l){if(typeof a=="number")throw new TypeError("Argument must not be a number");return n(a,o,l)},s.alloc=function(a,o,l){if(typeof a!="number")throw new TypeError("Argument must be a number");var u=n(a);return o!==void 0?typeof l=="string"?u.fill(o,l):u.fill(o):u.fill(0),u},s.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return n(a)},s.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(a)}}(yl,yl.exports)),yl.exports}var rp;function np(){if(rp)return Xu;rp=1;var e=bw().Buffer,t=e.isEncoding||function(m){switch(m=""+m,m&&m.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(m){if(!m)return"utf8";for(var g;;)switch(m){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return m;default:if(g)return;m=(""+m).toLowerCase(),g=!0}}function n(m){var g=r(m);if(typeof g!="string"&&(e.isEncoding===t||!t(m)))throw new Error("Unknown encoding: "+m);return g||m}Xu.StringDecoder=i;function i(m){this.encoding=n(m);var g;switch(this.encoding){case"utf16le":this.text=c,this.end=h,g=4;break;case"utf8":this.fillLast=l,g=4;break;case"base64":this.text=d,this.end=p,g=3;break;default:this.write=v,this.end=_;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(g)}i.prototype.write=function(m){if(m.length===0)return"";var g,x;if(this.lastNeed){if(g=this.fillLast(m),g===void 0)return"";x=this.lastNeed,this.lastNeed=0}else x=0;return x<m.length?g?g+this.text(m,x):this.text(m,x):g||""},i.prototype.end=f,i.prototype.text=u,i.prototype.fillLast=function(m){if(this.lastNeed<=m.length)return m.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);m.copy(this.lastChar,this.lastTotal-this.lastNeed,0,m.length),this.lastNeed-=m.length};function s(m){return m<=127?0:m>>5===6?2:m>>4===14?3:m>>3===30?4:m>>6===2?-1:-2}function a(m,g,x){var L=g.length-1;if(L<x)return 0;var y=s(g[L]);return y>=0?(y>0&&(m.lastNeed=y-1),y):--L<x||y===-2?0:(y=s(g[L]),y>=0?(y>0&&(m.lastNeed=y-2),y):--L<x||y===-2?0:(y=s(g[L]),y>=0?(y>0&&(y===2?y=0:m.lastNeed=y-3),y):0))}function o(m,g,x){if((g[0]&192)!==128)return m.lastNeed=0,"�";if(m.lastNeed>1&&g.length>1){if((g[1]&192)!==128)return m.lastNeed=1,"�";if(m.lastNeed>2&&g.length>2&&(g[2]&192)!==128)return m.lastNeed=2,"�"}}function l(m){var g=this.lastTotal-this.lastNeed,x=o(this,m);if(x!==void 0)return x;if(this.lastNeed<=m.length)return m.copy(this.lastChar,g,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);m.copy(this.lastChar,g,0,m.length),this.lastNeed-=m.length}function u(m,g){var x=a(this,m,g);if(!this.lastNeed)return m.toString("utf8",g);this.lastTotal=x;var L=m.length-(x-this.lastNeed);return m.copy(this.lastChar,0,L),m.toString("utf8",g,L)}function f(m){var g=m&&m.length?this.write(m):"";return this.lastNeed?g+"�":g}function c(m,g){if((m.length-g)%2===0){var x=m.toString("utf16le",g);if(x){var L=x.charCodeAt(x.length-1);if(L>=55296&&L<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=m[m.length-2],this.lastChar[1]=m[m.length-1],x.slice(0,-1)}return x}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=m[m.length-1],m.toString("utf16le",g,m.length-1)}function h(m){var g=m&&m.length?this.write(m):"";if(this.lastNeed){var x=this.lastTotal-this.lastNeed;return g+this.lastChar.toString("utf16le",0,x)}return g}function d(m,g){var x=(m.length-g)%3;return x===0?m.toString("base64",g):(this.lastNeed=3-x,this.lastTotal=3,x===1?this.lastChar[0]=m[m.length-1]:(this.lastChar[0]=m[m.length-2],this.lastChar[1]=m[m.length-1]),m.toString("base64",g,m.length-x))}function p(m){var g=m&&m.length?this.write(m):"";return this.lastNeed?g+this.lastChar.toString("base64",0,3-this.lastNeed):g}function v(m){return m.toString(this.encoding)}function _(m){return m&&m.length?this.write(m):""}return Xu}var Zu,ip;function nd(){if(ip)return Zu;ip=1;var e=po().codes.ERR_STREAM_PREMATURE_CLOSE;function t(s){var a=!1;return function(){if(!a){a=!0;for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];s.apply(this,l)}}}function r(){}function n(s){return s.setHeader&&typeof s.abort=="function"}function i(s,a,o){if(typeof a=="function")return i(s,null,a);a||(a={}),o=t(o||r);var l=a.readable||a.readable!==!1&&s.readable,u=a.writable||a.writable!==!1&&s.writable,f=function(){s.writable||h()},c=s._writableState&&s._writableState.finished,h=function(){u=!1,c=!0,l||o.call(s)},d=s._readableState&&s._readableState.endEmitted,p=function(){l=!1,d=!0,u||o.call(s)},v=function(x){o.call(s,x)},_=function(){var x;if(l&&!d)return(!s._readableState||!s._readableState.ended)&&(x=new e),o.call(s,x);if(u&&!c)return(!s._writableState||!s._writableState.ended)&&(x=new e),o.call(s,x)},m=function(){s.req.on("finish",h)};return n(s)?(s.on("complete",h),s.on("abort",_),s.req?m():s.on("request",m)):u&&!s._writableState&&(s.on("end",f),s.on("close",f)),s.on("end",p),s.on("finish",h),a.error!==!1&&s.on("error",v),s.on("close",_),function(){s.removeListener("complete",h),s.removeListener("abort",_),s.removeListener("request",m),s.req&&s.req.removeListener("finish",h),s.removeListener("end",f),s.removeListener("close",f),s.removeListener("finish",h),s.removeListener("end",p),s.removeListener("error",v),s.removeListener("close",_)}}return Zu=i,Zu}var Qu,sp;function ww(){if(sp)return Qu;sp=1;var e={env:{}},t;function r(L,y,M){return y=n(y),y in L?Object.defineProperty(L,y,{value:M,enumerable:!0,configurable:!0,writable:!0}):L[y]=M,L}function n(L){var y=i(L,"string");return typeof y=="symbol"?y:String(y)}function i(L,y){if(typeof L!="object"||L===null)return L;var M=L[Symbol.toPrimitive];if(M!==void 0){var F=M.call(L,y);if(typeof F!="object")return F;throw new TypeError("@@toPrimitive must return a primitive value.")}return(y==="string"?String:Number)(L)}var s=nd(),a=Symbol("lastResolve"),o=Symbol("lastReject"),l=Symbol("error"),u=Symbol("ended"),f=Symbol("lastPromise"),c=Symbol("handlePromise"),h=Symbol("stream");function d(L,y){return{value:L,done:y}}function p(L){var y=L[a];if(y!==null){var M=L[h].read();M!==null&&(L[f]=null,L[a]=null,L[o]=null,y(d(M,!1)))}}function v(L){e.nextTick(p,L)}function _(L,y){return function(M,F){L.then(function(){if(y[u]){M(d(void 0,!0));return}y[c](M,F)},F)}}var m=Object.getPrototypeOf(function(){}),g=Object.setPrototypeOf((t={get stream(){return this[h]},next:function(){var y=this,M=this[l];if(M!==null)return Promise.reject(M);if(this[u])return Promise.resolve(d(void 0,!0));if(this[h].destroyed)return new Promise(function(b,R){e.nextTick(function(){y[l]?R(y[l]):b(d(void 0,!0))})});var F=this[f],D;if(F)D=new Promise(_(F,this));else{var H=this[h].read();if(H!==null)return Promise.resolve(d(H,!1));D=new Promise(this[c])}return this[f]=D,D}},r(t,Symbol.asyncIterator,function(){return this}),r(t,"return",function(){var y=this;return new Promise(function(M,F){y[h].destroy(null,function(D){if(D){F(D);return}M(d(void 0,!0))})})}),t),m),x=function(y){var M,F=Object.create(g,(M={},r(M,h,{value:y,writable:!0}),r(M,a,{value:null,writable:!0}),r(M,o,{value:null,writable:!0}),r(M,l,{value:null,writable:!0}),r(M,u,{value:y._readableState.endEmitted,writable:!0}),r(M,c,{value:function(H,b){var R=F[h].read();R?(F[f]=null,F[a]=null,F[o]=null,H(d(R,!1))):(F[a]=H,F[o]=b)},writable:!0}),M));return F[f]=null,s(y,function(D){if(D&&D.code!=="ERR_STREAM_PREMATURE_CLOSE"){var H=F[o];H!==null&&(F[f]=null,F[a]=null,F[o]=null,H(D)),F[l]=D;return}var b=F[a];b!==null&&(F[f]=null,F[a]=null,F[o]=null,b(d(void 0,!0))),F[u]=!0}),y.on("readable",v.bind(null,F)),F};return Qu=x,Qu}var Ju,op;function Sw(){return op||(op=1,Ju=function(){throw new Error("Readable.from is not available in the browser")}),Ju}var ef,ap;function Kg(){if(ap)return ef;ap=1;var e={env:{}};ef=b;var t;b.ReadableState=H,_a.EventEmitter;var r=function(E,N){return E.listeners(N).length},n=zg(),i=qc().Buffer,s=(typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function a(S){return i.from(S)}function o(S){return i.isBuffer(S)||S instanceof s}var l=_a,u;l&&l.debuglog?u=l.debuglog("stream"):u=function(){};var f=vw(),c=Vg(),h=$g(),d=h.getHighWaterMark,p=po().codes,v=p.ERR_INVALID_ARG_TYPE,_=p.ERR_STREAM_PUSH_AFTER_EOF,m=p.ERR_METHOD_NOT_IMPLEMENTED,g=p.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,x,L,y;ho()(b,n);var M=c.errorOrDestroy,F=["error","close","destroy","pause","resume"];function D(S,E,N){if(typeof S.prependListener=="function")return S.prependListener(E,N);!S._events||!S._events[E]?S.on(E,N):Array.isArray(S._events[E])?S._events[E].unshift(N):S._events[E]=[N,S._events[E]]}function H(S,E,N){t=t||so(),S=S||{},typeof N!="boolean"&&(N=E instanceof t),this.objectMode=!!S.objectMode,N&&(this.objectMode=this.objectMode||!!S.readableObjectMode),this.highWaterMark=d(this,S,"readableHighWaterMark",N),this.buffer=new f,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=S.emitClose!==!1,this.autoDestroy=!!S.autoDestroy,this.destroyed=!1,this.defaultEncoding=S.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,S.encoding&&(x||(x=np().StringDecoder),this.decoder=new x(S.encoding),this.encoding=S.encoding)}function b(S){if(t=t||so(),!(this instanceof b))return new b(S);var E=this instanceof t;this._readableState=new H(S,this,E),this.readable=!0,S&&(typeof S.read=="function"&&(this._read=S.read),typeof S.destroy=="function"&&(this._destroy=S.destroy)),n.call(this)}Object.defineProperty(b.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(E){this._readableState&&(this._readableState.destroyed=E)}}),b.prototype.destroy=c.destroy,b.prototype._undestroy=c.undestroy,b.prototype._destroy=function(S,E){E(S)},b.prototype.push=function(S,E){var N=this._readableState,W;return N.objectMode?W=!0:typeof S=="string"&&(E=E||N.defaultEncoding,E!==N.encoding&&(S=i.from(S,E),E=""),W=!0),R(this,S,E,!1,W)},b.prototype.unshift=function(S){return R(this,S,null,!0,!1)};function R(S,E,N,W,re){u("readableAddChunk",E);var ne=S._readableState;if(E===null)ne.reading=!1,Q(S,ne);else{var de;if(re||(de=k(ne,E)),de)M(S,de);else if(ne.objectMode||E&&E.length>0)if(typeof E!="string"&&!ne.objectMode&&Object.getPrototypeOf(E)!==i.prototype&&(E=a(E)),W)ne.endEmitted?M(S,new g):A(S,ne,E,!0);else if(ne.ended)M(S,new _);else{if(ne.destroyed)return!1;ne.reading=!1,ne.decoder&&!N?(E=ne.decoder.write(E),ne.objectMode||E.length!==0?A(S,ne,E,!1):w(S,ne)):A(S,ne,E,!1)}else W||(ne.reading=!1,w(S,ne))}return!ne.ended&&(ne.length<ne.highWaterMark||ne.length===0)}function A(S,E,N,W){E.flowing&&E.length===0&&!E.sync?(E.awaitDrain=0,S.emit("data",N)):(E.length+=E.objectMode?1:N.length,W?E.buffer.unshift(N):E.buffer.push(N),E.needReadable&&X(S)),w(S,E)}function k(S,E){var N;return!o(E)&&typeof E!="string"&&E!==void 0&&!S.objectMode&&(N=new v("chunk",["string","Buffer","Uint8Array"],E)),N}b.prototype.isPaused=function(){return this._readableState.flowing===!1},b.prototype.setEncoding=function(S){x||(x=np().StringDecoder);var E=new x(S);this._readableState.decoder=E,this._readableState.encoding=this._readableState.decoder.encoding;for(var N=this._readableState.buffer.head,W="";N!==null;)W+=E.write(N.data),N=N.next;return this._readableState.buffer.clear(),W!==""&&this._readableState.buffer.push(W),this._readableState.length=W.length,this};var O=1073741824;function B(S){return S>=O?S=O:(S--,S|=S>>>1,S|=S>>>2,S|=S>>>4,S|=S>>>8,S|=S>>>16,S++),S}function $(S,E){return S<=0||E.length===0&&E.ended?0:E.objectMode?1:S!==S?E.flowing&&E.length?E.buffer.head.data.length:E.length:(S>E.highWaterMark&&(E.highWaterMark=B(S)),S<=E.length?S:E.ended?E.length:(E.needReadable=!0,0))}b.prototype.read=function(S){u("read",S),S=parseInt(S,10);var E=this._readableState,N=S;if(S!==0&&(E.emittedReadable=!1),S===0&&E.needReadable&&((E.highWaterMark!==0?E.length>=E.highWaterMark:E.length>0)||E.ended))return u("read: emitReadable",E.length,E.ended),E.length===0&&E.ended?ee(this):X(this),null;if(S=$(S,E),S===0&&E.ended)return E.length===0&&ee(this),null;var W=E.needReadable;u("need readable",W),(E.length===0||E.length-S<E.highWaterMark)&&(W=!0,u("length less than watermark",W)),E.ended||E.reading?(W=!1,u("reading or ended",W)):W&&(u("do read"),E.reading=!0,E.sync=!0,E.length===0&&(E.needReadable=!0),this._read(E.highWaterMark),E.sync=!1,E.reading||(S=$(N,E)));var re;return S>0?re=K(S,E):re=null,re===null?(E.needReadable=E.length<=E.highWaterMark,S=0):(E.length-=S,E.awaitDrain=0),E.length===0&&(E.ended||(E.needReadable=!0),N!==S&&E.ended&&ee(this)),re!==null&&this.emit("data",re),re};function Q(S,E){if(u("onEofChunk"),!E.ended){if(E.decoder){var N=E.decoder.end();N&&N.length&&(E.buffer.push(N),E.length+=E.objectMode?1:N.length)}E.ended=!0,E.sync?X(S):(E.needReadable=!1,E.emittedReadable||(E.emittedReadable=!0,oe(S)))}}function X(S){var E=S._readableState;u("emitReadable",E.needReadable,E.emittedReadable),E.needReadable=!1,E.emittedReadable||(u("emitReadable",E.flowing),E.emittedReadable=!0,e.nextTick(oe,S))}function oe(S){var E=S._readableState;u("emitReadable_",E.destroyed,E.length,E.ended),!E.destroyed&&(E.length||E.ended)&&(S.emit("readable"),E.emittedReadable=!1),E.needReadable=!E.flowing&&!E.ended&&E.length<=E.highWaterMark,I(S)}function w(S,E){E.readingMore||(E.readingMore=!0,e.nextTick(P,S,E))}function P(S,E){for(;!E.reading&&!E.ended&&(E.length<E.highWaterMark||E.flowing&&E.length===0);){var N=E.length;if(u("maybeReadMore read 0"),S.read(0),N===E.length)break}E.readingMore=!1}b.prototype._read=function(S){M(this,new m("_read()"))},b.prototype.pipe=function(S,E){var N=this,W=this._readableState;switch(W.pipesCount){case 0:W.pipes=S;break;case 1:W.pipes=[W.pipes,S];break;default:W.pipes.push(S);break}W.pipesCount+=1,u("pipe count=%d opts=%j",W.pipesCount,E);var re=(!E||E.end!==!1)&&S!==e.stdout&&S!==e.stderr,ne=re?pe:z;W.endEmitted?e.nextTick(ne):N.once("end",ne),S.on("unpipe",de);function de(C,T){u("onunpipe"),C===N&&T&&T.hasUnpiped===!1&&(T.hasUnpiped=!0,ke())}function pe(){u("onend"),S.end()}var me=ce(N);S.on("drain",me);var fe=!1;function ke(){u("cleanup"),S.removeListener("close",Oe),S.removeListener("finish",Pe),S.removeListener("drain",me),S.removeListener("error",Re),S.removeListener("unpipe",de),N.removeListener("end",pe),N.removeListener("end",z),N.removeListener("data",we),fe=!0,W.awaitDrain&&(!S._writableState||S._writableState.needDrain)&&me()}N.on("data",we);function we(C){u("ondata");var T=S.write(C);u("dest.write",T),T===!1&&((W.pipesCount===1&&W.pipes===S||W.pipesCount>1&&Me(W.pipes,S)!==-1)&&!fe&&(u("false write response, pause",W.awaitDrain),W.awaitDrain++),N.pause())}function Re(C){u("onerror",C),z(),S.removeListener("error",Re),r(S,"error")===0&&M(S,C)}D(S,"error",Re);function Oe(){S.removeListener("finish",Pe),z()}S.once("close",Oe);function Pe(){u("onfinish"),S.removeListener("close",Oe),z()}S.once("finish",Pe);function z(){u("unpipe"),N.unpipe(S)}return S.emit("pipe",N),W.flowing||(u("pipe resume"),N.resume()),S};function ce(S){return function(){var N=S._readableState;u("pipeOnDrain",N.awaitDrain),N.awaitDrain&&N.awaitDrain--,N.awaitDrain===0&&r(S,"data")&&(N.flowing=!0,I(S))}}b.prototype.unpipe=function(S){var E=this._readableState,N={hasUnpiped:!1};if(E.pipesCount===0)return this;if(E.pipesCount===1)return S&&S!==E.pipes?this:(S||(S=E.pipes),E.pipes=null,E.pipesCount=0,E.flowing=!1,S&&S.emit("unpipe",this,N),this);if(!S){var W=E.pipes,re=E.pipesCount;E.pipes=null,E.pipesCount=0,E.flowing=!1;for(var ne=0;ne<re;ne++)W[ne].emit("unpipe",this,{hasUnpiped:!1});return this}var de=Me(E.pipes,S);return de===-1?this:(E.pipes.splice(de,1),E.pipesCount-=1,E.pipesCount===1&&(E.pipes=E.pipes[0]),S.emit("unpipe",this,N),this)},b.prototype.on=function(S,E){var N=n.prototype.on.call(this,S,E),W=this._readableState;return S==="data"?(W.readableListening=this.listenerCount("readable")>0,W.flowing!==!1&&this.resume()):S==="readable"&&!W.endEmitted&&!W.readableListening&&(W.readableListening=W.needReadable=!0,W.flowing=!1,W.emittedReadable=!1,u("on readable",W.length,W.reading),W.length?X(this):W.reading||e.nextTick(le,this)),N},b.prototype.addListener=b.prototype.on,b.prototype.removeListener=function(S,E){var N=n.prototype.removeListener.call(this,S,E);return S==="readable"&&e.nextTick(V,this),N},b.prototype.removeAllListeners=function(S){var E=n.prototype.removeAllListeners.apply(this,arguments);return(S==="readable"||S===void 0)&&e.nextTick(V,this),E};function V(S){var E=S._readableState;E.readableListening=S.listenerCount("readable")>0,E.resumeScheduled&&!E.paused?E.flowing=!0:S.listenerCount("data")>0&&S.resume()}function le(S){u("readable nexttick read 0"),S.read(0)}b.prototype.resume=function(){var S=this._readableState;return S.flowing||(u("resume"),S.flowing=!S.readableListening,Y(this,S)),S.paused=!1,this};function Y(S,E){E.resumeScheduled||(E.resumeScheduled=!0,e.nextTick(Z,S,E))}function Z(S,E){u("resume",E.reading),E.reading||S.read(0),E.resumeScheduled=!1,S.emit("resume"),I(S),E.flowing&&!E.reading&&S.read(0)}b.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function I(S){var E=S._readableState;for(u("flow",E.flowing);E.flowing&&S.read()!==null;);}b.prototype.wrap=function(S){var E=this,N=this._readableState,W=!1;S.on("end",function(){if(u("wrapped end"),N.decoder&&!N.ended){var de=N.decoder.end();de&&de.length&&E.push(de)}E.push(null)}),S.on("data",function(de){if(u("wrapped data"),N.decoder&&(de=N.decoder.write(de)),!(N.objectMode&&de==null)&&!(!N.objectMode&&(!de||!de.length))){var pe=E.push(de);pe||(W=!0,S.pause())}});for(var re in S)this[re]===void 0&&typeof S[re]=="function"&&(this[re]=function(pe){return function(){return S[pe].apply(S,arguments)}}(re));for(var ne=0;ne<F.length;ne++)S.on(F[ne],this.emit.bind(this,F[ne]));return this._read=function(de){u("wrapped _read",de),W&&(W=!1,S.resume())},this},typeof Symbol=="function"&&(b.prototype[Symbol.asyncIterator]=function(){return L===void 0&&(L=ww()),L(this)}),Object.defineProperty(b.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(b.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(b.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(E){this._readableState&&(this._readableState.flowing=E)}}),b._fromList=K,Object.defineProperty(b.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function K(S,E){if(E.length===0)return null;var N;return E.objectMode?N=E.buffer.shift():!S||S>=E.length?(E.decoder?N=E.buffer.join(""):E.buffer.length===1?N=E.buffer.first():N=E.buffer.concat(E.length),E.buffer.clear()):N=E.buffer.consume(S,E.decoder),N}function ee(S){var E=S._readableState;u("endReadable",E.endEmitted),E.endEmitted||(E.ended=!0,e.nextTick(ae,E,S))}function ae(S,E){if(u("endReadableNT",S.endEmitted,S.length),!S.endEmitted&&S.length===0&&(S.endEmitted=!0,E.readable=!1,E.emit("end"),S.autoDestroy)){var N=E._writableState;(!N||N.autoDestroy&&N.finished)&&E.destroy()}}typeof Symbol=="function"&&(b.from=function(S,E){return y===void 0&&(y=Sw()),y(b,S,E)});function Me(S,E){for(var N=0,W=S.length;N<W;N++)if(S[N]===E)return N;return-1}return ef}var tf,lp;function Yg(){if(lp)return tf;lp=1,tf=o;var e=po().codes,t=e.ERR_METHOD_NOT_IMPLEMENTED,r=e.ERR_MULTIPLE_CALLBACK,n=e.ERR_TRANSFORM_ALREADY_TRANSFORMING,i=e.ERR_TRANSFORM_WITH_LENGTH_0,s=so();ho()(o,s);function a(f,c){var h=this._transformState;h.transforming=!1;var d=h.writecb;if(d===null)return this.emit("error",new r);h.writechunk=null,h.writecb=null,c!=null&&this.push(c),d(f);var p=this._readableState;p.reading=!1,(p.needReadable||p.length<p.highWaterMark)&&this._read(p.highWaterMark)}function o(f){if(!(this instanceof o))return new o(f);s.call(this,f),this._transformState={afterTransform:a.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,f&&(typeof f.transform=="function"&&(this._transform=f.transform),typeof f.flush=="function"&&(this._flush=f.flush)),this.on("prefinish",l)}function l(){var f=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(c,h){u(f,c,h)}):u(this,null,null)}o.prototype.push=function(f,c){return this._transformState.needTransform=!1,s.prototype.push.call(this,f,c)},o.prototype._transform=function(f,c,h){h(new t("_transform()"))},o.prototype._write=function(f,c,h){var d=this._transformState;if(d.writecb=h,d.writechunk=f,d.writeencoding=c,!d.transforming){var p=this._readableState;(d.needTransform||p.needReadable||p.length<p.highWaterMark)&&this._read(p.highWaterMark)}},o.prototype._read=function(f){var c=this._transformState;c.writechunk!==null&&!c.transforming?(c.transforming=!0,this._transform(c.writechunk,c.writeencoding,c.afterTransform)):c.needTransform=!0},o.prototype._destroy=function(f,c){s.prototype._destroy.call(this,f,function(h){c(h)})};function u(f,c,h){if(c)return f.emit("error",c);if(h!=null&&f.push(h),f._writableState.length)throw new i;if(f._transformState.transforming)throw new n;return f.push(null)}return tf}var rf,cp;function Cw(){if(cp)return rf;cp=1,rf=t;var e=Yg();ho()(t,e);function t(r){if(!(this instanceof t))return new t(r);e.call(this,r)}return t.prototype._transform=function(r,n,i){i(null,r)},rf}var nf,up;function xw(){if(up)return nf;up=1;var e;function t(h){var d=!1;return function(){d||(d=!0,h.apply(void 0,arguments))}}var r=po().codes,n=r.ERR_MISSING_ARGS,i=r.ERR_STREAM_DESTROYED;function s(h){if(h)throw h}function a(h){return h.setHeader&&typeof h.abort=="function"}function o(h,d,p,v){v=t(v);var _=!1;h.on("close",function(){_=!0}),e===void 0&&(e=nd()),e(h,{readable:d,writable:p},function(g){if(g)return v(g);_=!0,v()});var m=!1;return function(g){if(!_&&!m){if(m=!0,a(h))return h.abort();if(typeof h.destroy=="function")return h.destroy();v(g||new i("pipe"))}}}function l(h){h()}function u(h,d){return h.pipe(d)}function f(h){return!h.length||typeof h[h.length-1]!="function"?s:h.pop()}function c(){for(var h=arguments.length,d=new Array(h),p=0;p<h;p++)d[p]=arguments[p];var v=f(d);if(Array.isArray(d[0])&&(d=d[0]),d.length<2)throw new n("streams");var _,m=d.map(function(g,x){var L=x<d.length-1,y=x>0;return o(g,L,y,function(M){_||(_=M),M&&m.forEach(l),!L&&(m.forEach(l),v(_))})});return d.reduce(u)}return nf=c,nf}var sf,fp;function Ew(){if(fp)return sf;fp=1,sf=r;var e=_a.EventEmitter,t=ho();t(r,e),r.Readable=Kg(),r.Writable=Wg(),r.Duplex=so(),r.Transform=Yg(),r.PassThrough=Cw(),r.finished=nd(),r.pipeline=xw(),r.Stream=r;function r(){e.call(this)}return r.prototype.pipe=function(n,i){var s=this;function a(d){n.writable&&n.write(d)===!1&&s.pause&&s.pause()}s.on("data",a);function o(){s.readable&&s.resume&&s.resume()}n.on("drain",o),!n._isStdio&&(!i||i.end!==!1)&&(s.on("end",u),s.on("close",f));var l=!1;function u(){l||(l=!0,n.end())}function f(){l||(l=!0,typeof n.destroy=="function"&&n.destroy())}function c(d){if(h(),e.listenerCount(this,"error")===0)throw d}s.on("error",c),n.on("error",c);function h(){s.removeListener("data",a),n.removeListener("drain",o),s.removeListener("end",u),s.removeListener("close",f),s.removeListener("error",c),n.removeListener("error",c),s.removeListener("end",h),s.removeListener("close",h),n.removeListener("close",h)}return s.on("end",h),s.on("close",h),n.on("close",h),n.emit("pipe",s),n},sf}var Aw=Wl.exports,hp;function Rw(){return hp||(hp=1,function(e,t){(function(r,n){e.exports=n(dw())})(typeof self<"u"?self:Aw,function(r){return function(n){function i(a){if(s[a])return s[a].exports;var o=s[a]={i:a,l:!1,exports:{}};return n[a].call(o.exports,o,o.exports,i),o.l=!0,o.exports}var s={};return i.m=n,i.c=s,i.d=function(a,o,l){i.o(a,o)||Object.defineProperty(a,o,{configurable:!1,enumerable:!0,get:l})},i.n=function(a){var o=a&&a.__esModule?function(){return a.default}:function(){return a};return i.d(o,"a",o),o},i.o=function(a,o){return Object.prototype.hasOwnProperty.call(a,o)},i.p="",i(i.s=0)}([function(n,i,s){var a=function(o){return o&&o.__esModule?o:{default:o}}(s(1));n.exports={install:function(o,l){o.component("vue-term",a.default)}}},function(n,i,s){function a(d){return d&&d.__esModule?d:{default:d}}Object.defineProperty(i,"__esModule",{value:!0});var o={};i.default=void 0;var l=a(s(2));Object.keys(l).forEach(function(d){d!=="default"&&d!=="__esModule"&&(Object.prototype.hasOwnProperty.call(o,d)||Object.defineProperty(i,d,{enumerable:!0,get:function(){return l[d]}}))});var u=a(s(13)),f=s(14),c=f(l.default,u.default,!1,null,null,"540f00d3");c.options.__file="src/VueTerm.vue";var h=c.exports;i.default=h},function(n,i,s){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,s(3);var a=s(8),o=function(c){if(c&&c.__esModule)return c;var h={};if(c!=null){for(var d in c)if(Object.prototype.hasOwnProperty.call(c,d)){var p=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(c,d):{};p.get||p.set?Object.defineProperty(h,d,p):h[d]=c[d]}}return h.default=c,h}(s(9)),l=function(c){return c&&c.__esModule?c:{default:c}}(s(10)),u=s(11);a.Terminal.applyAddon(o);var f={props:Object.assign({buffer:String,title:String},l.default),data:function(){return{options:{}}},watch:{cols:function(c){this.$terminal.resize(c,this.rows)},rows:function(c){this.$terminal.resize(this.cols,c)},options:{handler:function(c){var h=this;Object.keys(c).forEach(function(d){h[d]!==c[d]&&h.$emit("update:"+d,c[d])})},deep:!0}},mounted:function(){var c=this;Object.keys(l.default).forEach(function(d){return c.$set(c.options,d,c[d])});var h=new a.Terminal(this.options);h.linkifier.setHypertextLinkHandler(function(d,p){c.$emit("link",p)}),h.open(this.$el,!0),this.buffer&&h.write(this.buffer.replace(/\n/g,`\r
`)+`\r
`),h.on("blur",function(){return c.$emit("blur")}),h.on("focus",function(){return c.$emit("focus")}),h.on("resize",function(d){d.cols!==c.cols&&c.$emit("update:cols",d.cols),d.rows!==c.rows&&c.$emit("update:rows",d.rows)}),h.on("title",function(d){return c.$emit("update:title",d)}),this.$terminal=h,this.$stream=new u.TerminalStream(this),Object.keys(l.default).forEach(function(d){return c.$watch(d,function(p){return c.options[d]=p})})},beforeDestroy:function(){this.$terminal.selectAll(),this.$emit("update:buffer",this.$terminal.getSelection().trim()),this.$terminal.destroy()},methods:{fit:function(){var c=this,h=this.$el.parentNode,d=this.$terminal;d.element.style.display="none",setTimeout(function(){c.$el.style.width=h.offsetWidth-c.$el.offsetLeft+h.offsetLeft+"px",c.$el.style.height=h.offsetHeight-c.$el.offsetTop+h.offsetTop+"px",d.fit(),d.element.style.display="",d.refresh(0,d.rows-1)},0)},focus:function(){this.$terminal.focus()},blur:function(){this.$terminal.blur()}}};i.default=f},function(n,i,s){var a=s(4);typeof a=="string"&&(a=[[n.i,a,""]]);var o={hmr:!0};o.transform=void 0,o.insertInto=void 0,s(6)(a,o),a.locals&&(n.exports=a.locals)},function(n,i,s){i=n.exports=s(5)(!1),i.push([n.i,`/**
 * Copyright (c) 2014 The xterm.js authors. All rights reserved.
 * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)
 * https://github.com/chjj/term.js
 * @license MIT
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 * Originally forked from (with the author's permission):
 *   Fabrice Bellard's javascript vt100 for jslinux:
 *   http://bellard.org/jslinux/
 *   Copyright (c) 2011 Fabrice Bellard
 *   The original design remains. The terminal itself
 *   has been extended to include xterm CSI codes, among
 *   other features.
 */

/**
 *  Default styles for xterm.js
 */

.xterm {
    font-family: courier-new, courier, monospace;
    font-feature-settings: "liga" 0;
    position: relative;
    user-select: none;
    -ms-user-select: none;
    -webkit-user-select: none;
}

.xterm.focus,
.xterm:focus {
    outline: none;
}

.xterm .xterm-helpers {
    position: absolute;
    top: 0;
    /**
     * The z-index of the helpers must be higher than the canvases in order for
     * IMEs to appear on top.
     */
    z-index: 10;
}

.xterm .xterm-helper-textarea {
    /*
     * HACK: to fix IE's blinking cursor
     * Move textarea out of the screen to the far left, so that the cursor is not visible.
     */
    position: absolute;
    opacity: 0;
    left: -9999em;
    top: 0;
    width: 0;
    height: 0;
    z-index: -10;
    /** Prevent wrapping so the IME appears against the textarea at the correct position */
    white-space: nowrap;
    overflow: hidden;
    resize: none;
}

.xterm .composition-view {
    /* TODO: Composition position got messed up somewhere */
    background: #000;
    color: #FFF;
    display: none;
    position: absolute;
    white-space: nowrap;
    z-index: 1;
}

.xterm .composition-view.active {
    display: block;
}

.xterm .xterm-viewport {
    /* On OS X this is required in order for the scroll bar to appear fully opaque */
    background-color: #000;
    overflow-y: scroll;
}

.xterm canvas {
    position: absolute;
    left: 0;
    top: 0;
}

.xterm .xterm-scroll-area {
    visibility: hidden;
}

.xterm .xterm-char-measure-element {
    display: inline-block;
    visibility: hidden;
    position: absolute;
    left: -9999em;
}

.xterm.enable-mouse-events {
    /* When mouse events are enabled (eg. tmux), revert to the standard pointer cursor */
    cursor: default;
}

.xterm:not(.enable-mouse-events) {
    cursor: text;
}
`,""])},function(n,i){function s(o,l){var u=o[1]||"",f=o[3];if(!f)return u;if(l&&typeof btoa=="function"){var c=a(f);return[u].concat(f.sources.map(function(h){return"/*# sourceURL="+f.sourceRoot+h+" */"})).concat([c]).join(`
`)}return[u].join(`
`)}function a(o){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"}n.exports=function(o){var l=[];return l.toString=function(){return this.map(function(u){var f=s(u,o);return u[2]?"@media "+u[2]+"{"+f+"}":f}).join("")},l.i=function(u,f){typeof u=="string"&&(u=[[null,u,""]]);for(var c={},h=0;h<this.length;h++){var d=this[h][0];typeof d=="number"&&(c[d]=!0)}for(h=0;h<u.length;h++){var p=u[h];typeof p[0]=="number"&&c[p[0]]||(f&&!p[2]?p[2]=f:f&&(p[2]="("+p[2]+") and ("+f+")"),l.push(p))}},l}},function(n,i,s){function a(b,R){for(var A=0;A<b.length;A++){var k=b[A],O=m[k.id];if(O){O.refs++;for(var B=0;B<O.parts.length;B++)O.parts[B](k.parts[B]);for(;B<k.parts.length;B++)O.parts.push(d(k.parts[B],R))}else{for(var $=[],B=0;B<k.parts.length;B++)$.push(d(k.parts[B],R));m[k.id]={id:k.id,refs:1,parts:$}}}}function o(b,R){for(var A=[],k={},O=0;O<b.length;O++){var B=b[O],$=R.base?B[0]+R.base:B[0],Q=B[1],X=B[2],oe=B[3],w={css:Q,media:X,sourceMap:oe};k[$]?k[$].parts.push(w):A.push(k[$]={id:$,parts:[w]})}return A}function l(b,R){var A=L(b.insertInto);if(!A)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var k=F[F.length-1];if(b.insertAt==="top")k?k.nextSibling?A.insertBefore(R,k.nextSibling):A.appendChild(R):A.insertBefore(R,A.firstChild),F.push(R);else if(b.insertAt==="bottom")A.appendChild(R);else{if(typeof b.insertAt!="object"||!b.insertAt.before)throw new Error(`[Style Loader]

 Invalid value for parameter 'insertAt' ('options.insertAt') found.
 Must be 'top', 'bottom', or Object.
 (https://github.com/webpack-contrib/style-loader#insertat)
`);var O=L(b.insertInto+" "+b.insertAt.before);A.insertBefore(R,O)}}function u(b){if(b.parentNode===null)return!1;b.parentNode.removeChild(b);var R=F.indexOf(b);R>=0&&F.splice(R,1)}function f(b){var R=document.createElement("style");return b.attrs.type="text/css",h(R,b.attrs),l(b,R),R}function c(b){var R=document.createElement("link");return b.attrs.type="text/css",b.attrs.rel="stylesheet",h(R,b.attrs),l(b,R),R}function h(b,R){Object.keys(R).forEach(function(A){b.setAttribute(A,R[A])})}function d(b,R){var A,k,O,B;if(R.transform&&b.css){if(!(B=R.transform(b.css)))return function(){};b.css=B}if(R.singleton){var $=M++;A=y||(y=f(R)),k=p.bind(null,A,$,!1),O=p.bind(null,A,$,!0)}else b.sourceMap&&typeof URL=="function"&&typeof URL.createObjectURL=="function"&&typeof URL.revokeObjectURL=="function"&&typeof Blob=="function"&&typeof btoa=="function"?(A=c(R),k=_.bind(null,A,R),O=function(){u(A),A.href&&URL.revokeObjectURL(A.href)}):(A=f(R),k=v.bind(null,A),O=function(){u(A)});return k(b),function(Q){if(Q){if(Q.css===b.css&&Q.media===b.media&&Q.sourceMap===b.sourceMap)return;k(b=Q)}else O()}}function p(b,R,A,k){var O=A?"":k.css;if(b.styleSheet)b.styleSheet.cssText=H(R,O);else{var B=document.createTextNode(O),$=b.childNodes;$[R]&&b.removeChild($[R]),$.length?b.insertBefore(B,$[R]):b.appendChild(B)}}function v(b,R){var A=R.css,k=R.media;if(k&&b.setAttribute("media",k),b.styleSheet)b.styleSheet.cssText=A;else{for(;b.firstChild;)b.removeChild(b.firstChild);b.appendChild(document.createTextNode(A))}}function _(b,R,A){var k=A.css,O=A.sourceMap,B=R.convertToAbsoluteUrls===void 0&&O;(R.convertToAbsoluteUrls||B)&&(k=D(k)),O&&(k+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(O))))+" */");var $=new Blob([k],{type:"text/css"}),Q=b.href;b.href=URL.createObjectURL($),Q&&URL.revokeObjectURL(Q)}var m={},g=function(b){var R;return function(){return R===void 0&&(R=b.apply(this,arguments)),R}}(function(){return window&&document&&document.all&&!window.atob}),x=function(b){return document.querySelector(b)},L=function(b){var R={};return function(A){if(typeof A=="function")return A();if(R[A]===void 0){var k=x.call(this,A);if(window.HTMLIFrameElement&&k instanceof window.HTMLIFrameElement)try{k=k.contentDocument.head}catch{k=null}R[A]=k}return R[A]}}(),y=null,M=0,F=[],D=s(7);n.exports=function(b,R){if(typeof DEBUG<"u"&&DEBUG&&typeof document!="object")throw new Error("The style-loader cannot be used in a non-browser environment");R=R||{},R.attrs=typeof R.attrs=="object"?R.attrs:{},R.singleton||typeof R.singleton=="boolean"||(R.singleton=g()),R.insertInto||(R.insertInto="head"),R.insertAt||(R.insertAt="bottom");var A=o(b,R);return a(A,R),function(k){for(var O=[],B=0;B<A.length;B++){var $=A[B],Q=m[$.id];Q.refs--,O.push(Q)}k&&a(o(k,R),R);for(var B=0;B<O.length;B++){var Q=O[B];if(Q.refs===0){for(var X=0;X<Q.parts.length;X++)Q.parts[X]();delete m[Q.id]}}}};var H=function(){var b=[];return function(R,A){return b[R]=A,b.filter(Boolean).join(`
`)}}()},function(n,i){n.exports=function(s){var a=typeof window<"u"&&window.location;if(!a)throw new Error("fixUrls requires window.location");if(!s||typeof s!="string")return s;var o=a.protocol+"//"+a.host,l=o+a.pathname.replace(/\/[^\/]*$/,"/");return s.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(u,f){var c=f.trim().replace(/^"(.*)"$/,function(d,p){return p}).replace(/^'(.*)'$/,function(d,p){return p});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(c))return u;var h;return h=c.indexOf("//")===0?c:c.indexOf("/")===0?o+c:l+c.replace(/^\.\//,""),"url("+JSON.stringify(h)+")"})}},function(n,i){n.exports=r},function(n,i,s){var a,a;(function(o){n.exports=o()})(function(){return function o(l,u,f){function c(p,v){if(!u[p]){if(!l[p]){var _=typeof a=="function"&&a;if(!v&&_)return a(p,!0);if(h)return h(p,!0);var m=new Error("Cannot find module '"+p+"'");throw m.code="MODULE_NOT_FOUND",m}var g=u[p]={exports:{}};l[p][0].call(g.exports,function(x){var L=l[p][1][x];return c(L||x)},g,g.exports,o,l,u,f)}return u[p].exports}for(var h=typeof a=="function"&&a,d=0;d<f.length;d++)c(f[d]);return c}({1:[function(o,l,u){function f(d){if(!d.element.parentElement)return null;var p=window.getComputedStyle(d.element.parentElement),v=parseInt(p.getPropertyValue("height")),_=Math.max(0,parseInt(p.getPropertyValue("width"))-17),m=window.getComputedStyle(d.element),g=parseInt(m.getPropertyValue("padding-top"))+parseInt(m.getPropertyValue("padding-bottom")),x=parseInt(m.getPropertyValue("padding-right"))+parseInt(m.getPropertyValue("padding-left")),L=v-g,y=_-x;return{cols:Math.floor(y/d.renderer.dimensions.actualCellWidth),rows:Math.floor(L/d.renderer.dimensions.actualCellHeight)}}function c(d){var p=f(d);p&&(d.rows===p.rows&&d.cols===p.cols||(d.renderer.clear(),d.resize(p.cols,p.rows)))}function h(d){d.prototype.proposeGeometry=function(){return f(this)},d.prototype.fit=function(){return c(this)}}Object.defineProperty(u,"__esModule",{value:!0}),u.proposeGeometry=f,u.fit=c,u.apply=h},{}]},{},[1])(1)})},function(n,i,s){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a={cols:Number,rows:Number,convertEol:Boolean,termName:String,cursorBlink:Boolean,cursorStyle:String,bellSound:String,bellStyle:String,enableBold:Boolean,fontFamily:String,fontSize:Number,fontWeight:String,fontWeightBold:String,lineHeight:Number,letterSpacing:Number,scrollback:Number,screenKeys:Boolean,debug:Boolean,macoptionsIsMeta:Boolean,cancelEvents:Boolean,disableStdin:Boolean,useFlowControl:Boolean,allowTransparency:Boolean,tabStopWidth:Number,theme:Object};i.default=a},function(n,i,s){function a(p){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(p)}function o(p,v){if(!(p instanceof v))throw new TypeError("Cannot call a class as a function")}function l(p,v){for(var _=0;_<v.length;_++){var m=v[_];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(p,m.key,m)}}function u(p,v,_){return v&&l(p.prototype,v),p}function f(p,v){if(v&&(a(v)==="object"||typeof v=="function"))return v;if(p===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p}function c(p,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(v&&v.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(p,v):p.__proto__=v)}Object.defineProperty(i,"__esModule",{value:!0}),i.TerminalStream=void 0;var h=s(12),d=function(p){function v(_){var m;if(o(this,v),m=f(this,(v.__proto__||Object.getPrototypeOf(v)).call(this)),m.$terminal=_.$terminal,m.$vm=_,m.encoding=_.encoding||"utf-8",!m.$terminal)throw new TypeError("VueTerm instance only");return m.$terminal.on("data",function(g){return m.push(Buffer.from(g,m.encoding))}),m}return c(v,p),u(v,[{key:"_write",value:function(_,m,g){_ instanceof Buffer&&(_=_.toString(this.encoding)),this.$terminal.write(_),g&&g()}},{key:"_final",value:function(_){this.$vm.$emit("final"),_&&_()}},{key:"_read",value:function(_){}}]),v}(h.Duplex);i.TerminalStream=d},function(n,i){n.exports=Ew()},function(n,i,s){Object.defineProperty(i,"__esModule",{value:!0});var a=function(){var u=this,f=u.$createElement;return(u._self._c||f)("div",{staticClass:"xterm"},[])},o=[];a._withStripped=!0;var l={render:a,staticRenderFns:o};i.default=l},function(n,i){n.exports=function(s,a,o,l,u,f){var c,h=s=s||{},d=typeof s.default;d!=="object"&&d!=="function"||(c=s,h=s.default);var p=typeof h=="function"?h.options:h;a&&(p.render=a.render,p.staticRenderFns=a.staticRenderFns,p._compiled=!0),o&&(p.functional=!0),u&&(p._scopeId=u);var v;if(f?(v=function(g){g=g||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,g||typeof __VUE_SSR_CONTEXT__>"u"||(g=__VUE_SSR_CONTEXT__),l&&l.call(this,g),g&&g._registeredComponents&&g._registeredComponents.add(f)},p._ssrRegister=v):l&&(v=l),v){var _=p.functional,m=_?p.render:p.beforeCreate;_?(p._injectStyles=v,p.render=function(g,x){return v.call(x),m(g,x)}):p.beforeCreate=m?[].concat(m,v):[v]}return{esModule:c,exports:h,options:p}}}])})}(Wl)),Wl.exports}var kw=Rw();const Tw=T4(kw);function Mw(e,t){const r=Object.create(null),n=e.split(",");for(let i=0;i<n.length;i++)r[n[i]]=!0;return i=>!!r[i]}const Lw=()=>{},Bw=Object.assign,Ow=Object.prototype.hasOwnProperty,zc=(e,t)=>Ow.call(e,t),Si=Array.isArray,Kl=e=>Gg(e)==="[object Map]",Iw=e=>typeof e=="function",Fw=e=>typeof e=="string",id=e=>typeof e=="symbol",Vc=e=>e!==null&&typeof e=="object",Dw=Object.prototype.toString,Gg=e=>Dw.call(e),Hw=e=>Gg(e).slice(8,-1),sd=e=>Fw(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Xg=(e,t)=>!Object.is(e,t),Pw=(e,t,r)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:r})};let yn;class jw{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&yn&&(this.parent=yn,this.index=(yn.scopes||(yn.scopes=[])).push(this)-1)}run(t){if(this.active){const r=yn;try{return yn=this,t()}finally{yn=r}}}on(){yn=this}off(){yn=this.parent}stop(t){if(this.active){let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.scopes)for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);if(this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.active=!1}}}function Nw(e,t=yn){t&&t.active&&t.effects.push(e)}const od=e=>{const t=new Set(e);return t.w=0,t.n=0,t},Zg=e=>(e.w&ki)>0,Qg=e=>(e.n&ki)>0,Uw=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=ki},qw=e=>{const{deps:t}=e;if(t.length){let r=0;for(let n=0;n<t.length;n++){const i=t[n];Zg(i)&&!Qg(i)?i.delete(e):t[r++]=i,i.w&=~ki,i.n&=~ki}t.length=r}},Xf=new WeakMap;let qo=0,ki=1;const Zf=30;let sn;const us=Symbol(""),Qf=Symbol("");class ad{constructor(t,r=null,n){this.fn=t,this.scheduler=r,this.active=!0,this.deps=[],this.parent=void 0,Nw(this,n)}run(){if(!this.active)return this.fn();let t=sn,r=Ci;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=sn,sn=this,Ci=!0,ki=1<<++qo,qo<=Zf?Uw(this):dp(this),this.fn()}finally{qo<=Zf&&qw(this),ki=1<<--qo,sn=this.parent,Ci=r,this.parent=void 0,this.deferStop&&this.stop()}}stop(){sn===this?this.deferStop=!0:this.active&&(dp(this),this.onStop&&this.onStop(),this.active=!1)}}function dp(e){const{deps:t}=e;if(t.length){for(let r=0;r<t.length;r++)t[r].delete(e);t.length=0}}let Ci=!0;const Jg=[];function mo(){Jg.push(Ci),Ci=!1}function _o(){const e=Jg.pop();Ci=e===void 0?!0:e}function Ur(e,t,r){if(Ci&&sn){let n=Xf.get(e);n||Xf.set(e,n=new Map);let i=n.get(r);i||n.set(r,i=od()),ev(i)}}function ev(e,t){let r=!1;qo<=Zf?Qg(e)||(e.n|=ki,r=!Zg(e)):r=!e.has(sn),r&&(e.add(sn),sn.deps.push(e))}function Yn(e,t,r,n,i,s){const a=Xf.get(e);if(!a)return;let o=[];if(t==="clear")o=[...a.values()];else if(r==="length"&&Si(e))a.forEach((l,u)=>{(u==="length"||u>=n)&&o.push(l)});else switch(r!==void 0&&o.push(a.get(r)),t){case"add":Si(e)?sd(r)&&o.push(a.get("length")):(o.push(a.get(us)),Kl(e)&&o.push(a.get(Qf)));break;case"delete":Si(e)||(o.push(a.get(us)),Kl(e)&&o.push(a.get(Qf)));break;case"set":Kl(e)&&o.push(a.get(us));break}if(o.length===1)o[0]&&Jf(o[0]);else{const l=[];for(const u of o)u&&l.push(...u);Jf(od(l))}}function Jf(e,t){const r=Si(e)?e:[...e];for(const n of r)n.computed&&pp(n);for(const n of r)n.computed||pp(n)}function pp(e,t){(e!==sn||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const zw=Mw("__proto__,__v_isRef,__isVue"),tv=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(id)),Vw=ld(),$w=ld(!1,!0),Ww=ld(!0),mp=Kw();function Kw(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...r){const n=At(this);for(let s=0,a=this.length;s<a;s++)Ur(n,"get",s+"");const i=n[t](...r);return i===-1||i===!1?n[t](...r.map(At)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...r){mo();const n=At(this)[t].apply(this,r);return _o(),n}}),e}function ld(e=!1,t=!1){return function(n,i,s){if(i==="__v_isReactive")return!e;if(i==="__v_isReadonly")return e;if(i==="__v_isShallow")return t;if(i==="__v_raw"&&s===(e?t?c5:ov:t?sv:iv).get(n))return n;const a=Si(n);if(!e&&a&&zc(mp,i))return Reflect.get(mp,i,s);const o=Reflect.get(n,i,s);return(id(i)?tv.has(i):zw(i))||(e||Ur(n,"get",i),t)?o:Cr(o)?a&&sd(i)?o:o.value:Vc(o)?e?av(o):fd(o):o}}const Yw=rv(),Gw=rv(!0);function rv(e=!1){return function(r,n,i,s){let a=r[n];if(ga(a)&&Cr(a)&&!Cr(i))return!1;if(!e&&!ga(i)&&(eh(i)||(i=At(i),a=At(a)),!Si(r)&&Cr(a)&&!Cr(i)))return a.value=i,!0;const o=Si(r)&&sd(n)?Number(n)<r.length:zc(r,n),l=Reflect.set(r,n,i,s);return r===At(s)&&(o?Xg(i,a)&&Yn(r,"set",n,i):Yn(r,"add",n,i)),l}}function Xw(e,t){const r=zc(e,t);e[t];const n=Reflect.deleteProperty(e,t);return n&&r&&Yn(e,"delete",t,void 0),n}function Zw(e,t){const r=Reflect.has(e,t);return(!id(t)||!tv.has(t))&&Ur(e,"has",t),r}function Qw(e){return Ur(e,"iterate",Si(e)?"length":us),Reflect.ownKeys(e)}const nv={get:Vw,set:Yw,deleteProperty:Xw,has:Zw,ownKeys:Qw},Jw={get:Ww,set(e,t){return!0},deleteProperty(e,t){return!0}},e5=Bw({},nv,{get:$w,set:Gw}),cd=e=>e,$c=e=>Reflect.getPrototypeOf(e);function bl(e,t,r=!1,n=!1){e=e.__v_raw;const i=At(e),s=At(t);r||(t!==s&&Ur(i,"get",t),Ur(i,"get",s));const{has:a}=$c(i),o=n?cd:r?pd:dd;if(a.call(i,t))return o(e.get(t));if(a.call(i,s))return o(e.get(s));e!==i&&e.get(t)}function wl(e,t=!1){const r=this.__v_raw,n=At(r),i=At(e);return t||(e!==i&&Ur(n,"has",e),Ur(n,"has",i)),e===i?r.has(e):r.has(e)||r.has(i)}function Sl(e,t=!1){return e=e.__v_raw,!t&&Ur(At(e),"iterate",us),Reflect.get(e,"size",e)}function _p(e){e=At(e);const t=At(this);return $c(t).has.call(t,e)||(t.add(e),Yn(t,"add",e,e)),this}function gp(e,t){t=At(t);const r=At(this),{has:n,get:i}=$c(r);let s=n.call(r,e);s||(e=At(e),s=n.call(r,e));const a=i.call(r,e);return r.set(e,t),s?Xg(t,a)&&Yn(r,"set",e,t):Yn(r,"add",e,t),this}function vp(e){const t=At(this),{has:r,get:n}=$c(t);let i=r.call(t,e);i||(e=At(e),i=r.call(t,e)),n&&n.call(t,e);const s=t.delete(e);return i&&Yn(t,"delete",e,void 0),s}function yp(){const e=At(this),t=e.size!==0,r=e.clear();return t&&Yn(e,"clear",void 0,void 0),r}function Cl(e,t){return function(n,i){const s=this,a=s.__v_raw,o=At(a),l=t?cd:e?pd:dd;return!e&&Ur(o,"iterate",us),a.forEach((u,f)=>n.call(i,l(u),l(f),s))}}function xl(e,t,r){return function(...n){const i=this.__v_raw,s=At(i),a=Kl(s),o=e==="entries"||e===Symbol.iterator&&a,l=e==="keys"&&a,u=i[e](...n),f=r?cd:t?pd:dd;return!t&&Ur(s,"iterate",l?Qf:us),{next(){const{value:c,done:h}=u.next();return h?{value:c,done:h}:{value:o?[f(c[0]),f(c[1])]:f(c),done:h}},[Symbol.iterator](){return this}}}}function si(e){return function(...t){return e==="delete"?!1:this}}function t5(){const e={get(s){return bl(this,s)},get size(){return Sl(this)},has:wl,add:_p,set:gp,delete:vp,clear:yp,forEach:Cl(!1,!1)},t={get(s){return bl(this,s,!1,!0)},get size(){return Sl(this)},has:wl,add:_p,set:gp,delete:vp,clear:yp,forEach:Cl(!1,!0)},r={get(s){return bl(this,s,!0)},get size(){return Sl(this,!0)},has(s){return wl.call(this,s,!0)},add:si("add"),set:si("set"),delete:si("delete"),clear:si("clear"),forEach:Cl(!0,!1)},n={get(s){return bl(this,s,!0,!0)},get size(){return Sl(this,!0)},has(s){return wl.call(this,s,!0)},add:si("add"),set:si("set"),delete:si("delete"),clear:si("clear"),forEach:Cl(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{e[s]=xl(s,!1,!1),r[s]=xl(s,!0,!1),t[s]=xl(s,!1,!0),n[s]=xl(s,!0,!0)}),[e,r,t,n]}const[r5,n5,i5,s5]=t5();function ud(e,t){const r=t?e?s5:i5:e?n5:r5;return(n,i,s)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?n:Reflect.get(zc(r,i)&&i in n?r:n,i,s)}const o5={get:ud(!1,!1)},a5={get:ud(!1,!0)},l5={get:ud(!0,!1)},iv=new WeakMap,sv=new WeakMap,ov=new WeakMap,c5=new WeakMap;function u5(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function f5(e){return e.__v_skip||!Object.isExtensible(e)?0:u5(Hw(e))}function fd(e){return ga(e)?e:hd(e,!1,nv,o5,iv)}function h5(e){return hd(e,!1,e5,a5,sv)}function av(e){return hd(e,!0,Jw,l5,ov)}function hd(e,t,r,n,i){if(!Vc(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=i.get(e);if(s)return s;const a=f5(e);if(a===0)return e;const o=new Proxy(e,a===2?n:r);return i.set(e,o),o}function eo(e){return ga(e)?eo(e.__v_raw):!!(e&&e.__v_isReactive)}function ga(e){return!!(e&&e.__v_isReadonly)}function eh(e){return!!(e&&e.__v_isShallow)}function lv(e){return eo(e)||ga(e)}function At(e){const t=e&&e.__v_raw;return t?At(t):e}function cv(e){return Pw(e,"__v_skip",!0),e}const dd=e=>Vc(e)?fd(e):e,pd=e=>Vc(e)?av(e):e;function d5(e){Ci&&sn&&(e=At(e),ev(e.dep||(e.dep=od())))}function p5(e,t){e=At(e),e.dep&&Jf(e.dep)}function Cr(e){return!!(e&&e.__v_isRef===!0)}function m5(e){return Cr(e)?e.value:e}const _5={get:(e,t,r)=>m5(Reflect.get(e,t,r)),set:(e,t,r,n)=>{const i=e[t];return Cr(i)&&!Cr(r)?(i.value=r,!0):Reflect.set(e,t,r,n)}};function uv(e){return eo(e)?e:new Proxy(e,_5)}class g5{constructor(t,r,n,i){this._setter=r,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new ad(t,()=>{this._dirty||(this._dirty=!0,p5(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=n}get value(){const t=At(this);return d5(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function v5(e,t,r=!1){let n,i;const s=Iw(e);return s?(n=e,i=Lw):(n=e.get,i=e.set),new g5(n,i,s||!i,r)}function y5(e,t){const r=Object.create(null),n=e.split(",");for(let i=0;i<n.length;i++)r[n[i]]=!0;return i=>!!r[i]}function Ut(e){if(vt(e)){const t={};for(let r=0;r<e.length;r++){const n=e[r],i=xr(n)?S5(n):Ut(n);if(i)for(const s in i)t[s]=i[s]}return t}else{if(xr(e))return e;if(Er(e))return e}}const b5=/;(?![^(]*\))/g,w5=/:(.+)/;function S5(e){const t={};return e.split(b5).forEach(r=>{if(r){const n=r.split(w5);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function at(e){let t="";if(xr(e))t=e;else if(vt(e))for(let r=0;r<e.length;r++){const n=at(e[r]);n&&(t+=n+" ")}else if(Er(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}function Mt(e){if(!e)return null;let{class:t,style:r}=e;return t&&!xr(t)&&(e.class=at(t)),r&&(e.style=Ut(r)),e}const tt=e=>xr(e)?e:e==null?"":vt(e)||Er(e)&&(e.toString===_v||!ut(e.toString))?JSON.stringify(e,fv,2):String(e),fv=(e,t)=>t&&t.__v_isRef?fv(e,t.value):dv(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((r,[n,i])=>(r[`${n} =>`]=i,r),{})}:pv(t)?{[`Set(${t.size})`]:[...t.values()]}:Er(t)&&!vt(t)&&!gv(t)?String(t):t,Dt={},to=[],Vn=()=>{},C5=()=>!1,x5=/^on[^a-z]/,md=e=>x5.test(e),hv=e=>e.startsWith("onUpdate:"),cn=Object.assign,_d=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},E5=Object.prototype.hasOwnProperty,Ct=(e,t)=>E5.call(e,t),vt=Array.isArray,dv=e=>gd(e)==="[object Map]",pv=e=>gd(e)==="[object Set]",ut=e=>typeof e=="function",xr=e=>typeof e=="string",Er=e=>e!==null&&typeof e=="object",mv=e=>Er(e)&&ut(e.then)&&ut(e.catch),_v=Object.prototype.toString,gd=e=>_v.call(e),gv=e=>gd(e)==="[object Object]",Yl=y5(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Wc=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},A5=/-(\w)/g,Ln=Wc(e=>e.replace(A5,(t,r)=>r?r.toUpperCase():"")),R5=/\B([A-Z])/g,Kc=Wc(e=>e.replace(R5,"-$1").toLowerCase()),vd=Wc(e=>e.charAt(0).toUpperCase()+e.slice(1)),of=Wc(e=>e?`on${vd(e)}`:""),bp=(e,t)=>!Object.is(e,t),af=(e,t)=>{for(let r=0;r<e.length;r++)e[r](t)},th=(e,t,r)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:r})},k5=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let wp;const T5=()=>wp||(wp=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof globalThis<"u"?globalThis:{});function xi(e,t,r,n){let i;try{i=n?e(...n):e()}catch(s){Yc(s,t,r)}return i}function Gr(e,t,r,n){if(ut(e)){const s=xi(e,t,r,n);return s&&mv(s)&&s.catch(a=>{Yc(a,t,r)}),s}const i=[];for(let s=0;s<e.length;s++)i.push(Gr(e[s],t,r,n));return i}function Yc(e,t,r,n=!0){const i=t?t.vnode:null;if(t){let s=t.parent;const a=t.proxy,o=r;for(;s;){const u=s.ec;if(u){for(let f=0;f<u.length;f++)if(u[f](e,a,o)===!1)return}s=s.parent}const l=t.appContext.config.errorHandler;if(l){xi(l,null,10,[e,a,o]);return}}M5(e,r,i,n)}function M5(e,t,r,n=!0){console.error(e)}let dc=!1,rh=!1;const Pr=[];let zn=0;const ra=[];let zo=null,zs=0;const na=[];let pi=null,Vs=0;const vv=Promise.resolve();let yd=null,nh=null;function yv(e){const t=yd||vv;return e?t.then(this?e.bind(this):e):t}function L5(e){let t=zn+1,r=Pr.length;for(;t<r;){const n=t+r>>>1;va(Pr[n])<e?t=n+1:r=n}return t}function bv(e){(!Pr.length||!Pr.includes(e,dc&&e.allowRecurse?zn+1:zn))&&e!==nh&&(e.id==null?Pr.push(e):Pr.splice(L5(e.id),0,e),wv())}function wv(){!dc&&!rh&&(rh=!0,yd=vv.then(xv))}function B5(e){const t=Pr.indexOf(e);t>zn&&Pr.splice(t,1)}function Sv(e,t,r,n){vt(e)?r.push(...e):(!t||!t.includes(e,e.allowRecurse?n+1:n))&&r.push(e),wv()}function O5(e){Sv(e,zo,ra,zs)}function I5(e){Sv(e,pi,na,Vs)}function Gc(e,t=null){if(ra.length){for(nh=t,zo=[...new Set(ra)],ra.length=0,zs=0;zs<zo.length;zs++)zo[zs]();zo=null,zs=0,nh=null,Gc(e,t)}}function Cv(e){if(Gc(),na.length){const t=[...new Set(na)];if(na.length=0,pi){pi.push(...t);return}for(pi=t,pi.sort((r,n)=>va(r)-va(n)),Vs=0;Vs<pi.length;Vs++)pi[Vs]();pi=null,Vs=0}}const va=e=>e.id==null?1/0:e.id;function xv(e){rh=!1,dc=!0,Gc(e),Pr.sort((t,r)=>va(t)-va(r));try{for(zn=0;zn<Pr.length;zn++){const t=Pr[zn];t&&t.active!==!1&&xi(t,null,14)}}finally{zn=0,Pr.length=0,Cv(),dc=!1,yd=null,(Pr.length||ra.length||na.length)&&xv(e)}}function F5(e,t,...r){if(e.isUnmounted)return;const n=e.vnode.props||Dt;let i=r;const s=t.startsWith("update:"),a=s&&t.slice(7);if(a&&a in n){const f=`${a==="modelValue"?"model":a}Modifiers`,{number:c,trim:h}=n[f]||Dt;h&&(i=r.map(d=>d.trim())),c&&(i=r.map(k5))}let o,l=n[o=of(t)]||n[o=of(Ln(t))];!l&&s&&(l=n[o=of(Kc(t))]),l&&Gr(l,e,6,i);const u=n[o+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[o])return;e.emitted[o]=!0,Gr(u,e,6,i)}}function Ev(e,t,r=!1){const n=t.emitsCache,i=n.get(e);if(i!==void 0)return i;const s=e.emits;let a={},o=!1;if(!ut(e)){const l=u=>{const f=Ev(u,t,!0);f&&(o=!0,cn(a,f))};!r&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!s&&!o?(n.set(e,null),null):(vt(s)?s.forEach(l=>a[l]=null):cn(a,s),n.set(e,a),a)}function Xc(e,t){return!e||!md(t)?!1:(t=t.slice(2).replace(/Once$/,""),Ct(e,t[0].toLowerCase()+t.slice(1))||Ct(e,Kc(t))||Ct(e,t))}let _r=null,Av=null;function pc(e){const t=_r;return _r=e,Av=e&&e.type.__scopeId||null,t}function Xe(e,t=_r,r){if(!t||e._n)return e;const n=(...i)=>{n._d&&Op(-1);const s=pc(t),a=e(...i);return pc(s),n._d&&Op(1),a};return n._n=!0,n._c=!0,n._d=!0,n}function Sp(e){const{type:t,vnode:r,proxy:n,withProxy:i,props:s,propsOptions:[a],slots:o,attrs:l,emit:u,render:f,renderCache:c,data:h,setupState:d,ctx:p,inheritAttrs:v}=e;let _,m;const g=pc(e);try{if(r.shapeFlag&4){const L=i||n;_=Cn(f.call(L,L,c,s,d,h,p)),m=l}else{const L=t;_=Cn(L.length>1?L(s,{attrs:l,slots:o,emit:u}):L(s,null)),m=t.props?l:D5(l)}}catch(L){sa.length=0,Yc(L,e,1),_=Ve(Xr)}let x=_;if(m&&v!==!1){const L=Object.keys(m),{shapeFlag:y}=x;L.length&&y&7&&(a&&L.some(hv)&&(m=H5(m,a)),x=Ti(x,m))}return r.dirs&&(x=Ti(x),x.dirs=x.dirs?x.dirs.concat(r.dirs):r.dirs),r.transition&&(x.transition=r.transition),_=x,pc(g),_}const D5=e=>{let t;for(const r in e)(r==="class"||r==="style"||md(r))&&((t||(t={}))[r]=e[r]);return t},H5=(e,t)=>{const r={};for(const n in e)(!hv(n)||!(n.slice(9)in t))&&(r[n]=e[n]);return r};function P5(e,t,r){const{props:n,children:i,component:s}=e,{props:a,children:o,patchFlag:l}=t,u=s.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return n?Cp(n,a,u):!!a;if(l&8){const f=t.dynamicProps;for(let c=0;c<f.length;c++){const h=f[c];if(a[h]!==n[h]&&!Xc(u,h))return!0}}}else return(i||o)&&(!o||!o.$stable)?!0:n===a?!1:n?a?Cp(n,a,u):!0:!!a;return!1}function Cp(e,t,r){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let i=0;i<n.length;i++){const s=n[i];if(t[s]!==e[s]&&!Xc(r,s))return!0}return!1}function j5({vnode:e,parent:t},r){for(;t&&t.subTree===e;)(e=t.vnode).el=r,t=t.parent}const N5=e=>e.__isSuspense;function U5(e,t){t&&t.pendingBranch?vt(e)?t.effects.push(...e):t.effects.push(e):I5(e)}function q5(e,t){if(sr){let r=sr.provides;const n=sr.parent&&sr.parent.provides;n===r&&(r=sr.provides=Object.create(n)),r[e]=t}}function lf(e,t,r=!1){const n=sr||_r;if(n){const i=n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides;if(i&&e in i)return i[e];if(arguments.length>1)return r&&ut(t)?t.call(n.proxy):t}}const xp={};function cf(e,t,r){return Rv(e,t,r)}function Rv(e,t,{immediate:r,deep:n,flush:i,onTrack:s,onTrigger:a}=Dt){const o=sr;let l,u=!1,f=!1;if(Cr(e)?(l=()=>e.value,u=eh(e)):eo(e)?(l=()=>e,n=!0):vt(e)?(f=!0,u=e.some(m=>eo(m)||eh(m)),l=()=>e.map(m=>{if(Cr(m))return m.value;if(eo(m))return os(m);if(ut(m))return xi(m,o,2)})):ut(e)?t?l=()=>xi(e,o,2):l=()=>{if(!(o&&o.isUnmounted))return c&&c(),Gr(e,o,3,[h])}:l=Vn,t&&n){const m=l;l=()=>os(m())}let c,h=m=>{c=_.onStop=()=>{xi(m,o,4)}};if(Sa)return h=Vn,t?r&&Gr(t,o,3,[l(),f?[]:void 0,h]):l(),Vn;let d=f?[]:xp;const p=()=>{if(_.active)if(t){const m=_.run();(n||u||(f?m.some((g,x)=>bp(g,d[x])):bp(m,d)))&&(c&&c(),Gr(t,o,3,[m,d===xp?void 0:d,h]),d=m)}else _.run()};p.allowRecurse=!!t;let v;i==="sync"?v=p:i==="post"?v=()=>Lr(p,o&&o.suspense):v=()=>O5(p);const _=new ad(l,v);return t?r?p():d=_.run():i==="post"?Lr(_.run.bind(_),o&&o.suspense):_.run(),()=>{_.stop(),o&&o.scope&&_d(o.scope.effects,_)}}function z5(e,t,r){const n=this.proxy,i=xr(e)?e.includes(".")?kv(n,e):()=>n[e]:e.bind(n,n);let s;ut(t)?s=t:(s=t.handler,r=t);const a=sr;oo(this);const o=Rv(i,s.bind(n),r);return a?oo(a):fs(),o}function kv(e,t){const r=t.split(".");return()=>{let n=e;for(let i=0;i<r.length&&n;i++)n=n[r[i]];return n}}function os(e,t){if(!Er(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),Cr(e))os(e.value,t);else if(vt(e))for(let r=0;r<e.length;r++)os(e[r],t);else if(pv(e)||dv(e))e.forEach(r=>{os(r,t)});else if(gv(e))for(const r in e)os(e[r],t);return e}function Tv(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ov(()=>{e.isMounted=!0}),Fv(()=>{e.isUnmounting=!0}),e}const zr=[Function,Array],V5={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:zr,onEnter:zr,onAfterEnter:zr,onEnterCancelled:zr,onBeforeLeave:zr,onLeave:zr,onAfterLeave:zr,onLeaveCancelled:zr,onBeforeAppear:zr,onAppear:zr,onAfterAppear:zr,onAppearCancelled:zr},setup(e,{slots:t}){const r=Xv(),n=Tv();let i;return()=>{const s=t.default&&bd(t.default(),!0);if(!s||!s.length)return;let a=s[0];if(s.length>1){for(const v of s)if(v.type!==Xr){a=v;break}}const o=At(e),{mode:l}=o;if(n.isLeaving)return uf(a);const u=Ep(a);if(!u)return uf(a);const f=ya(u,o,n,r);ba(u,f);const c=r.subTree,h=c&&Ep(c);let d=!1;const{getTransitionKey:p}=u.type;if(p){const v=p();i===void 0?i=v:v!==i&&(i=v,d=!0)}if(h&&h.type!==Xr&&(!rs(u,h)||d)){const v=ya(h,o,n,r);if(ba(h,v),l==="out-in")return n.isLeaving=!0,v.afterLeave=()=>{n.isLeaving=!1,r.update()},uf(a);l==="in-out"&&u.type!==Xr&&(v.delayLeave=(_,m,g)=>{const x=Lv(n,h);x[String(h.key)]=h,_._leaveCb=()=>{m(),_._leaveCb=void 0,delete f.delayedLeave},f.delayedLeave=g})}return a}}},Mv=V5;function Lv(e,t){const{leavingVNodes:r}=e;let n=r.get(t.type);return n||(n=Object.create(null),r.set(t.type,n)),n}function ya(e,t,r,n){const{appear:i,mode:s,persisted:a=!1,onBeforeEnter:o,onEnter:l,onAfterEnter:u,onEnterCancelled:f,onBeforeLeave:c,onLeave:h,onAfterLeave:d,onLeaveCancelled:p,onBeforeAppear:v,onAppear:_,onAfterAppear:m,onAppearCancelled:g}=t,x=String(e.key),L=Lv(r,e),y=(D,H)=>{D&&Gr(D,n,9,H)},M=(D,H)=>{const b=H[1];y(D,H),vt(D)?D.every(R=>R.length<=1)&&b():D.length<=1&&b()},F={mode:s,persisted:a,beforeEnter(D){let H=o;if(!r.isMounted)if(i)H=v||o;else return;D._leaveCb&&D._leaveCb(!0);const b=L[x];b&&rs(e,b)&&b.el._leaveCb&&b.el._leaveCb(),y(H,[D])},enter(D){let H=l,b=u,R=f;if(!r.isMounted)if(i)H=_||l,b=m||u,R=g||f;else return;let A=!1;const k=D._enterCb=O=>{A||(A=!0,O?y(R,[D]):y(b,[D]),F.delayedLeave&&F.delayedLeave(),D._enterCb=void 0)};H?M(H,[D,k]):k()},leave(D,H){const b=String(e.key);if(D._enterCb&&D._enterCb(!0),r.isUnmounting)return H();y(c,[D]);let R=!1;const A=D._leaveCb=k=>{R||(R=!0,H(),k?y(p,[D]):y(d,[D]),D._leaveCb=void 0,L[b]===e&&delete L[b])};L[b]=e,h?M(h,[D,A]):A()},clone(D){return ya(D,t,r,n)}};return F}function uf(e){if(Zc(e))return e=Ti(e),e.children=null,e}function Ep(e){return Zc(e)?e.children?e.children[0]:void 0:e}function ba(e,t){e.shapeFlag&6&&e.component?ba(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function bd(e,t=!1,r){let n=[],i=0;for(let s=0;s<e.length;s++){let a=e[s];const o=r==null?a.key:String(r)+String(a.key!=null?a.key:s);a.type===pt?(a.patchFlag&128&&i++,n=n.concat(bd(a.children,t,o))):(t||a.type!==Xr)&&n.push(o!=null?Ti(a,{key:o}):a)}if(i>1)for(let s=0;s<n.length;s++)n[s].patchFlag=-2;return n}function $5(e){return ut(e)?{setup:e,name:e.name}:e}const ia=e=>!!e.type.__asyncLoader,Zc=e=>e.type.__isKeepAlive;function W5(e,t){Bv(e,"a",t)}function K5(e,t){Bv(e,"da",t)}function Bv(e,t,r=sr){const n=e.__wdc||(e.__wdc=()=>{let i=r;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(Qc(t,n,r),r){let i=r.parent;for(;i&&i.parent;)Zc(i.parent.vnode)&&Y5(n,t,r,i),i=i.parent}}function Y5(e,t,r,n){const i=Qc(t,e,n,!0);Dv(()=>{_d(n[t],i)},r)}function Qc(e,t,r=sr,n=!1){if(r){const i=r[e]||(r[e]=[]),s=t.__weh||(t.__weh=(...a)=>{if(r.isUnmounted)return;mo(),oo(r);const o=Gr(t,r,e,a);return fs(),_o(),o});return n?i.unshift(s):i.push(s),s}}const ei=e=>(t,r=sr)=>(!Sa||e==="sp")&&Qc(e,t,r),G5=ei("bm"),Ov=ei("m"),X5=ei("bu"),Iv=ei("u"),Fv=ei("bum"),Dv=ei("um"),Z5=ei("sp"),Q5=ei("rtg"),J5=ei("rtc");function e8(e,t=sr){Qc("ec",e,t)}function Gn(e,t){const r=_r;if(r===null)return e;const n=tu(r)||r.proxy,i=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[a,o,l,u=Dt]=t[s];ut(a)&&(a={mounted:a,updated:a}),a.deep&&os(o),i.push({dir:a,instance:n,value:o,oldValue:void 0,arg:l,modifiers:u})}return e}function Ui(e,t,r,n){const i=e.dirs,s=t&&t.dirs;for(let a=0;a<i.length;a++){const o=i[a];s&&(o.oldValue=s[a].value);let l=o.dir[n];l&&(mo(),Gr(l,r,8,[e.el,o,e,t]),_o())}}const wd="components",t8="directives";function Ge(e,t){return Sd(wd,e,!0,t)||e}const Hv=Symbol();function r8(e){return xr(e)?Sd(wd,e,!1)||e:e||Hv}function Jc(e){return Sd(t8,e)}function Sd(e,t,r=!0,n=!1){const i=_r||sr;if(i){const s=i.type;if(e===wd){const o=T8(s,!1);if(o&&(o===t||o===Ln(t)||o===vd(Ln(t))))return s}const a=Ap(i[e]||s[e],t)||Ap(i.appContext[e],t);return!a&&n?s:a}}function Ap(e,t){return e&&(e[t]||e[Ln(t)]||e[vd(Ln(t))])}function st(e,t,r,n){let i;const s=r;if(vt(e)||xr(e)){i=new Array(e.length);for(let a=0,o=e.length;a<o;a++)i[a]=t(e[a],a,void 0,s)}else if(typeof e=="number"){i=new Array(e);for(let a=0;a<e;a++)i[a]=t(a+1,a,void 0,s)}else if(Er(e))if(e[Symbol.iterator])i=Array.from(e,(a,o)=>t(a,o,void 0,s));else{const a=Object.keys(e);i=new Array(a.length);for(let o=0,l=a.length;o<l;o++){const u=a[o];i[o]=t(e[u],u,o,s)}}else i=[];return i}function Lt(e,t){for(let r=0;r<t.length;r++){const n=t[r];if(vt(n))for(let i=0;i<n.length;i++)e[n[i].name]=n[i].fn;else n&&(e[n.name]=n.fn)}return e}function Ue(e,t,r={},n,i){if(_r.isCE||_r.parent&&ia(_r.parent)&&_r.parent.isCE)return Ve("slot",t==="default"?null:{name:t},n&&n());let s=e[t];s&&s._c&&(s._d=!1),ye();const a=s&&Pv(s(r)),o=Rt(pt,{key:r.key||`_${t}`},a||(n?n():[]),a&&e._===1?64:-2);return o.scopeId&&(o.slotScopeIds=[o.scopeId+"-s"]),s&&s._c&&(s._d=!0),o}function Pv(e){return e.some(t=>gc(t)?!(t.type===Xr||t.type===pt&&!Pv(t.children)):!0)?e:null}const ih=e=>e?Zv(e)?tu(e)||e.proxy:ih(e.parent):null,mc=cn(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>ih(e.parent),$root:e=>ih(e.root),$emit:e=>e.emit,$options:e=>Nv(e),$forceUpdate:e=>e.f||(e.f=()=>bv(e.update)),$nextTick:e=>e.n||(e.n=yv.bind(e.proxy)),$watch:e=>z5.bind(e)}),n8={get({_:e},t){const{ctx:r,setupState:n,data:i,props:s,accessCache:a,type:o,appContext:l}=e;let u;if(t[0]!=="$"){const d=a[t];if(d!==void 0)switch(d){case 1:return n[t];case 2:return i[t];case 4:return r[t];case 3:return s[t]}else{if(n!==Dt&&Ct(n,t))return a[t]=1,n[t];if(i!==Dt&&Ct(i,t))return a[t]=2,i[t];if((u=e.propsOptions[0])&&Ct(u,t))return a[t]=3,s[t];if(r!==Dt&&Ct(r,t))return a[t]=4,r[t];sh&&(a[t]=0)}}const f=mc[t];let c,h;if(f)return t==="$attrs"&&Ur(e,"get",t),f(e);if((c=o.__cssModules)&&(c=c[t]))return c;if(r!==Dt&&Ct(r,t))return a[t]=4,r[t];if(h=l.config.globalProperties,Ct(h,t))return h[t]},set({_:e},t,r){const{data:n,setupState:i,ctx:s}=e;return i!==Dt&&Ct(i,t)?(i[t]=r,!0):n!==Dt&&Ct(n,t)?(n[t]=r,!0):Ct(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:n,appContext:i,propsOptions:s}},a){let o;return!!r[a]||e!==Dt&&Ct(e,a)||t!==Dt&&Ct(t,a)||(o=s[0])&&Ct(o,a)||Ct(n,a)||Ct(mc,a)||Ct(i.config.globalProperties,a)},defineProperty(e,t,r){return r.get!=null?e._.accessCache[t]=0:Ct(r,"value")&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}};let sh=!0;function i8(e){const t=Nv(e),r=e.proxy,n=e.ctx;sh=!1,t.beforeCreate&&Rp(t.beforeCreate,e,"bc");const{data:i,computed:s,methods:a,watch:o,provide:l,inject:u,created:f,beforeMount:c,mounted:h,beforeUpdate:d,updated:p,activated:v,deactivated:_,beforeDestroy:m,beforeUnmount:g,destroyed:x,unmounted:L,render:y,renderTracked:M,renderTriggered:F,errorCaptured:D,serverPrefetch:H,expose:b,inheritAttrs:R,components:A,directives:k,filters:O}=t;if(u&&s8(u,n,null,e.appContext.config.unwrapInjectedRef),a)for(const Q in a){const X=a[Q];ut(X)&&(n[Q]=X.bind(r))}if(i){const Q=i.call(r,r);Er(Q)&&(e.data=fd(Q))}if(sh=!0,s)for(const Q in s){const X=s[Q],oe=ut(X)?X.bind(r,r):ut(X.get)?X.get.bind(r,r):Vn,w=!ut(X)&&ut(X.set)?X.set.bind(r):Vn,P=L8({get:oe,set:w});Object.defineProperty(n,Q,{enumerable:!0,configurable:!0,get:()=>P.value,set:ce=>P.value=ce})}if(o)for(const Q in o)jv(o[Q],n,r,Q);if(l){const Q=ut(l)?l.call(r):l;Reflect.ownKeys(Q).forEach(X=>{q5(X,Q[X])})}f&&Rp(f,e,"c");function $(Q,X){vt(X)?X.forEach(oe=>Q(oe.bind(r))):X&&Q(X.bind(r))}if($(G5,c),$(Ov,h),$(X5,d),$(Iv,p),$(W5,v),$(K5,_),$(e8,D),$(J5,M),$(Q5,F),$(Fv,g),$(Dv,L),$(Z5,H),vt(b))if(b.length){const Q=e.exposed||(e.exposed={});b.forEach(X=>{Object.defineProperty(Q,X,{get:()=>r[X],set:oe=>r[X]=oe})})}else e.exposed||(e.exposed={});y&&e.render===Vn&&(e.render=y),R!=null&&(e.inheritAttrs=R),A&&(e.components=A),k&&(e.directives=k)}function s8(e,t,r=Vn,n=!1){vt(e)&&(e=oh(e));for(const i in e){const s=e[i];let a;Er(s)?"default"in s?a=lf(s.from||i,s.default,!0):a=lf(s.from||i):a=lf(s),Cr(a)&&n?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>a.value,set:o=>a.value=o}):t[i]=a}}function Rp(e,t,r){Gr(vt(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,r)}function jv(e,t,r,n){const i=n.includes(".")?kv(r,n):()=>r[n];if(xr(e)){const s=t[e];ut(s)&&cf(i,s)}else if(ut(e))cf(i,e.bind(r));else if(Er(e))if(vt(e))e.forEach(s=>jv(s,t,r,n));else{const s=ut(e.handler)?e.handler.bind(r):t[e.handler];ut(s)&&cf(i,s,e)}}function Nv(e){const t=e.type,{mixins:r,extends:n}=t,{mixins:i,optionsCache:s,config:{optionMergeStrategies:a}}=e.appContext,o=s.get(t);let l;return o?l=o:!i.length&&!r&&!n?l=t:(l={},i.length&&i.forEach(u=>_c(l,u,a,!0)),_c(l,t,a)),s.set(t,l),l}function _c(e,t,r,n=!1){const{mixins:i,extends:s}=t;s&&_c(e,s,r,!0),i&&i.forEach(a=>_c(e,a,r,!0));for(const a in t)if(!(n&&a==="expose")){const o=o8[a]||r&&r[a];e[a]=o?o(e[a],t[a]):t[a]}return e}const o8={data:kp,props:Ji,emits:Ji,methods:Ji,computed:Ji,beforeCreate:br,created:br,beforeMount:br,mounted:br,beforeUpdate:br,updated:br,beforeDestroy:br,beforeUnmount:br,destroyed:br,unmounted:br,activated:br,deactivated:br,errorCaptured:br,serverPrefetch:br,components:Ji,directives:Ji,watch:l8,provide:kp,inject:a8};function kp(e,t){return t?e?function(){return cn(ut(e)?e.call(this,this):e,ut(t)?t.call(this,this):t)}:t:e}function a8(e,t){return Ji(oh(e),oh(t))}function oh(e){if(vt(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function br(e,t){return e?[...new Set([].concat(e,t))]:t}function Ji(e,t){return e?cn(cn(Object.create(null),e),t):t}function l8(e,t){if(!e)return t;if(!t)return e;const r=cn(Object.create(null),e);for(const n in t)r[n]=br(e[n],t[n]);return r}function c8(e,t,r,n=!1){const i={},s={};th(s,eu,1),e.propsDefaults=Object.create(null),Uv(e,t,i,s);for(const a in e.propsOptions[0])a in i||(i[a]=void 0);r?e.props=n?i:h5(i):e.type.props?e.props=i:e.props=s,e.attrs=s}function u8(e,t,r,n){const{props:i,attrs:s,vnode:{patchFlag:a}}=e,o=At(i),[l]=e.propsOptions;let u=!1;if((n||a>0)&&!(a&16)){if(a&8){const f=e.vnode.dynamicProps;for(let c=0;c<f.length;c++){let h=f[c];if(Xc(e.emitsOptions,h))continue;const d=t[h];if(l)if(Ct(s,h))d!==s[h]&&(s[h]=d,u=!0);else{const p=Ln(h);i[p]=ah(l,o,p,d,e,!1)}else d!==s[h]&&(s[h]=d,u=!0)}}}else{Uv(e,t,i,s)&&(u=!0);let f;for(const c in o)(!t||!Ct(t,c)&&((f=Kc(c))===c||!Ct(t,f)))&&(l?r&&(r[c]!==void 0||r[f]!==void 0)&&(i[c]=ah(l,o,c,void 0,e,!0)):delete i[c]);if(s!==o)for(const c in s)(!t||!Ct(t,c))&&(delete s[c],u=!0)}u&&Yn(e,"set","$attrs")}function Uv(e,t,r,n){const[i,s]=e.propsOptions;let a=!1,o;if(t)for(let l in t){if(Yl(l))continue;const u=t[l];let f;i&&Ct(i,f=Ln(l))?!s||!s.includes(f)?r[f]=u:(o||(o={}))[f]=u:Xc(e.emitsOptions,l)||(!(l in n)||u!==n[l])&&(n[l]=u,a=!0)}if(s){const l=At(r),u=o||Dt;for(let f=0;f<s.length;f++){const c=s[f];r[c]=ah(i,l,c,u[c],e,!Ct(u,c))}}return a}function ah(e,t,r,n,i,s){const a=e[r];if(a!=null){const o=Ct(a,"default");if(o&&n===void 0){const l=a.default;if(a.type!==Function&&ut(l)){const{propsDefaults:u}=i;r in u?n=u[r]:(oo(i),n=u[r]=l.call(null,t),fs())}else n=l}a[0]&&(s&&!o?n=!1:a[1]&&(n===""||n===Kc(r))&&(n=!0))}return n}function qv(e,t,r=!1){const n=t.propsCache,i=n.get(e);if(i)return i;const s=e.props,a={},o=[];let l=!1;if(!ut(e)){const f=c=>{l=!0;const[h,d]=qv(c,t,!0);cn(a,h),d&&o.push(...d)};!r&&t.mixins.length&&t.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}if(!s&&!l)return n.set(e,to),to;if(vt(s))for(let f=0;f<s.length;f++){const c=Ln(s[f]);Tp(c)&&(a[c]=Dt)}else if(s)for(const f in s){const c=Ln(f);if(Tp(c)){const h=s[f],d=a[c]=vt(h)||ut(h)?{type:h}:h;if(d){const p=Bp(Boolean,d.type),v=Bp(String,d.type);d[0]=p>-1,d[1]=v<0||p<v,(p>-1||Ct(d,"default"))&&o.push(c)}}}const u=[a,o];return n.set(e,u),u}function Tp(e){return e[0]!=="$"}function Mp(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function Lp(e,t){return Mp(e)===Mp(t)}function Bp(e,t){return vt(t)?t.findIndex(r=>Lp(r,e)):ut(t)&&Lp(t,e)?0:-1}const zv=e=>e[0]==="_"||e==="$stable",Cd=e=>vt(e)?e.map(Cn):[Cn(e)],f8=(e,t,r)=>{if(t._n)return t;const n=Xe((...i)=>Cd(t(...i)),r);return n._c=!1,n},Vv=(e,t,r)=>{const n=e._ctx;for(const i in e){if(zv(i))continue;const s=e[i];if(ut(s))t[i]=f8(i,s,n);else if(s!=null){const a=Cd(s);t[i]=()=>a}}},$v=(e,t)=>{const r=Cd(t);e.slots.default=()=>r},h8=(e,t)=>{if(e.vnode.shapeFlag&32){const r=t._;r?(e.slots=At(t),th(t,"_",r)):Vv(t,e.slots={})}else e.slots={},t&&$v(e,t);th(e.slots,eu,1)},d8=(e,t,r)=>{const{vnode:n,slots:i}=e;let s=!0,a=Dt;if(n.shapeFlag&32){const o=t._;o?r&&o===1?s=!1:(cn(i,t),!r&&o===1&&delete i._):(s=!t.$stable,Vv(t,i)),a=t}else t&&($v(e,t),a={default:1});if(s)for(const o in i)!zv(o)&&!(o in a)&&delete i[o]};function Wv(){return{app:null,config:{isNativeTag:C5,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let p8=0;function m8(e,t){return function(n,i=null){ut(n)||(n=Object.assign({},n)),i!=null&&!Er(i)&&(i=null);const s=Wv(),a=new Set;let o=!1;const l=s.app={_uid:p8++,_component:n,_props:i,_container:null,_context:s,_instance:null,version:O8,get config(){return s.config},set config(u){},use(u,...f){return a.has(u)||(u&&ut(u.install)?(a.add(u),u.install(l,...f)):ut(u)&&(a.add(u),u(l,...f))),l},mixin(u){return s.mixins.includes(u)||s.mixins.push(u),l},component(u,f){return f?(s.components[u]=f,l):s.components[u]},directive(u,f){return f?(s.directives[u]=f,l):s.directives[u]},mount(u,f,c){if(!o){const h=Ve(n,i);return h.appContext=s,e(h,u,c),o=!0,l._container=u,u.__vue_app__=l,tu(h.component)||h.component.proxy}},unmount(){o&&(e(null,l._container),delete l._container.__vue_app__)},provide(u,f){return s.provides[u]=f,l}};return l}}function lh(e,t,r,n,i=!1){if(vt(e)){e.forEach((h,d)=>lh(h,t&&(vt(t)?t[d]:t),r,n,i));return}if(ia(n)&&!i)return;const s=n.shapeFlag&4?tu(n.component)||n.component.proxy:n.el,a=i?null:s,{i:o,r:l}=e,u=t&&t.r,f=o.refs===Dt?o.refs={}:o.refs,c=o.setupState;if(u!=null&&u!==l&&(xr(u)?(f[u]=null,Ct(c,u)&&(c[u]=null)):Cr(u)&&(u.value=null)),ut(l))xi(l,o,12,[a,f]);else{const h=xr(l),d=Cr(l);if(h||d){const p=()=>{if(e.f){const v=h?f[l]:l.value;i?vt(v)&&_d(v,s):vt(v)?v.includes(s)||v.push(s):h?(f[l]=[s],Ct(c,l)&&(c[l]=f[l])):(l.value=[s],e.k&&(f[e.k]=l.value))}else h?(f[l]=a,Ct(c,l)&&(c[l]=a)):d&&(l.value=a,e.k&&(f[e.k]=a))};a?(p.id=-1,Lr(p,r)):p()}}}const Lr=U5;function _8(e){return g8(e)}function g8(e,t){const r=T5();r.__VUE__=!0;const{insert:n,remove:i,patchProp:s,createElement:a,createText:o,createComment:l,setText:u,setElementText:f,parentNode:c,nextSibling:h,setScopeId:d=Vn,cloneNode:p,insertStaticContent:v}=e,_=(S,E,N,W=null,re=null,ne=null,de=!1,pe=null,me=!!E.dynamicChildren)=>{if(S===E)return;S&&!rs(S,E)&&(W=K(S),V(S,re,ne,!0),S=null),E.patchFlag===-2&&(me=!1,E.dynamicChildren=null);const{type:fe,ref:ke,shapeFlag:we}=E;switch(fe){case xd:m(S,E,N,W);break;case Xr:g(S,E,N,W);break;case ff:S==null&&x(E,N,W,de);break;case pt:k(S,E,N,W,re,ne,de,pe,me);break;default:we&1?M(S,E,N,W,re,ne,de,pe,me):we&6?O(S,E,N,W,re,ne,de,pe,me):(we&64||we&128)&&fe.process(S,E,N,W,re,ne,de,pe,me,ae)}ke!=null&&re&&lh(ke,S&&S.ref,ne,E||S,!E)},m=(S,E,N,W)=>{if(S==null)n(E.el=o(E.children),N,W);else{const re=E.el=S.el;E.children!==S.children&&u(re,E.children)}},g=(S,E,N,W)=>{S==null?n(E.el=l(E.children||""),N,W):E.el=S.el},x=(S,E,N,W)=>{[S.el,S.anchor]=v(S.children,E,N,W,S.el,S.anchor)},L=({el:S,anchor:E},N,W)=>{let re;for(;S&&S!==E;)re=h(S),n(S,N,W),S=re;n(E,N,W)},y=({el:S,anchor:E})=>{let N;for(;S&&S!==E;)N=h(S),i(S),S=N;i(E)},M=(S,E,N,W,re,ne,de,pe,me)=>{de=de||E.type==="svg",S==null?F(E,N,W,re,ne,de,pe,me):b(S,E,re,ne,de,pe,me)},F=(S,E,N,W,re,ne,de,pe)=>{let me,fe;const{type:ke,props:we,shapeFlag:Re,transition:Oe,patchFlag:Pe,dirs:z}=S;if(S.el&&p!==void 0&&Pe===-1)me=S.el=p(S.el);else{if(me=S.el=a(S.type,ne,we&&we.is,we),Re&8?f(me,S.children):Re&16&&H(S.children,me,null,W,re,ne&&ke!=="foreignObject",de,pe),z&&Ui(S,null,W,"created"),we){for(const T in we)T!=="value"&&!Yl(T)&&s(me,T,null,we[T],ne,S.children,W,re,I);"value"in we&&s(me,"value",null,we.value),(fe=we.onVnodeBeforeMount)&&_n(fe,W,S)}D(me,S,S.scopeId,de,W)}z&&Ui(S,null,W,"beforeMount");const C=(!re||re&&!re.pendingBranch)&&Oe&&!Oe.persisted;C&&Oe.beforeEnter(me),n(me,E,N),((fe=we&&we.onVnodeMounted)||C||z)&&Lr(()=>{fe&&_n(fe,W,S),C&&Oe.enter(me),z&&Ui(S,null,W,"mounted")},re)},D=(S,E,N,W,re)=>{if(N&&d(S,N),W)for(let ne=0;ne<W.length;ne++)d(S,W[ne]);if(re){let ne=re.subTree;if(E===ne){const de=re.vnode;D(S,de,de.scopeId,de.slotScopeIds,re.parent)}}},H=(S,E,N,W,re,ne,de,pe,me=0)=>{for(let fe=me;fe<S.length;fe++){const ke=S[fe]=pe?vi(S[fe]):Cn(S[fe]);_(null,ke,E,N,W,re,ne,de,pe)}},b=(S,E,N,W,re,ne,de)=>{const pe=E.el=S.el;let{patchFlag:me,dynamicChildren:fe,dirs:ke}=E;me|=S.patchFlag&16;const we=S.props||Dt,Re=E.props||Dt;let Oe;N&&qi(N,!1),(Oe=Re.onVnodeBeforeUpdate)&&_n(Oe,N,E,S),ke&&Ui(E,S,N,"beforeUpdate"),N&&qi(N,!0);const Pe=re&&E.type!=="foreignObject";if(fe?R(S.dynamicChildren,fe,pe,N,W,Pe,ne):de||oe(S,E,pe,null,N,W,Pe,ne,!1),me>0){if(me&16)A(pe,E,we,Re,N,W,re);else if(me&2&&we.class!==Re.class&&s(pe,"class",null,Re.class,re),me&4&&s(pe,"style",we.style,Re.style,re),me&8){const z=E.dynamicProps;for(let C=0;C<z.length;C++){const T=z[C],q=we[T],ie=Re[T];(ie!==q||T==="value")&&s(pe,T,q,ie,re,S.children,N,W,I)}}me&1&&S.children!==E.children&&f(pe,E.children)}else!de&&fe==null&&A(pe,E,we,Re,N,W,re);((Oe=Re.onVnodeUpdated)||ke)&&Lr(()=>{Oe&&_n(Oe,N,E,S),ke&&Ui(E,S,N,"updated")},W)},R=(S,E,N,W,re,ne,de)=>{for(let pe=0;pe<E.length;pe++){const me=S[pe],fe=E[pe],ke=me.el&&(me.type===pt||!rs(me,fe)||me.shapeFlag&70)?c(me.el):N;_(me,fe,ke,null,W,re,ne,de,!0)}},A=(S,E,N,W,re,ne,de)=>{if(N!==W){for(const pe in W){if(Yl(pe))continue;const me=W[pe],fe=N[pe];me!==fe&&pe!=="value"&&s(S,pe,fe,me,de,E.children,re,ne,I)}if(N!==Dt)for(const pe in N)!Yl(pe)&&!(pe in W)&&s(S,pe,N[pe],null,de,E.children,re,ne,I);"value"in W&&s(S,"value",N.value,W.value)}},k=(S,E,N,W,re,ne,de,pe,me)=>{const fe=E.el=S?S.el:o(""),ke=E.anchor=S?S.anchor:o("");let{patchFlag:we,dynamicChildren:Re,slotScopeIds:Oe}=E;Oe&&(pe=pe?pe.concat(Oe):Oe),S==null?(n(fe,N,W),n(ke,N,W),H(E.children,N,ke,re,ne,de,pe,me)):we>0&&we&64&&Re&&S.dynamicChildren?(R(S.dynamicChildren,Re,N,re,ne,de,pe),(E.key!=null||re&&E===re.subTree)&&Kv(S,E,!0)):oe(S,E,N,ke,re,ne,de,pe,me)},O=(S,E,N,W,re,ne,de,pe,me)=>{E.slotScopeIds=pe,S==null?E.shapeFlag&512?re.ctx.activate(E,N,W,de,me):B(E,N,W,re,ne,de,me):$(S,E,me)},B=(S,E,N,W,re,ne,de)=>{const pe=S.component=x8(S,W,re);if(Zc(S)&&(pe.ctx.renderer=ae),E8(pe),pe.asyncDep){if(re&&re.registerDep(pe,Q),!S.el){const me=pe.subTree=Ve(Xr);g(null,me,E,N)}return}Q(pe,S,E,N,re,ne,de)},$=(S,E,N)=>{const W=E.component=S.component;if(P5(S,E,N))if(W.asyncDep&&!W.asyncResolved){X(W,E,N);return}else W.next=E,B5(W.update),W.update();else E.el=S.el,W.vnode=E},Q=(S,E,N,W,re,ne,de)=>{const pe=()=>{if(S.isMounted){let{next:ke,bu:we,u:Re,parent:Oe,vnode:Pe}=S,z=ke,C;qi(S,!1),ke?(ke.el=Pe.el,X(S,ke,de)):ke=Pe,we&&af(we),(C=ke.props&&ke.props.onVnodeBeforeUpdate)&&_n(C,Oe,ke,Pe),qi(S,!0);const T=Sp(S),q=S.subTree;S.subTree=T,_(q,T,c(q.el),K(q),S,re,ne),ke.el=T.el,z===null&&j5(S,T.el),Re&&Lr(Re,re),(C=ke.props&&ke.props.onVnodeUpdated)&&Lr(()=>_n(C,Oe,ke,Pe),re)}else{let ke;const{el:we,props:Re}=E,{bm:Oe,m:Pe,parent:z}=S,C=ia(E);qi(S,!1),Oe&&af(Oe),!C&&(ke=Re&&Re.onVnodeBeforeMount)&&_n(ke,z,E),qi(S,!0);{const T=S.subTree=Sp(S);_(null,T,N,W,S,re,ne),E.el=T.el}if(Pe&&Lr(Pe,re),!C&&(ke=Re&&Re.onVnodeMounted)){const T=E;Lr(()=>_n(ke,z,T),re)}(E.shapeFlag&256||z&&ia(z.vnode)&&z.vnode.shapeFlag&256)&&S.a&&Lr(S.a,re),S.isMounted=!0,E=N=W=null}},me=S.effect=new ad(pe,()=>bv(fe),S.scope),fe=S.update=()=>me.run();fe.id=S.uid,qi(S,!0),fe()},X=(S,E,N)=>{E.component=S;const W=S.vnode.props;S.vnode=E,S.next=null,u8(S,E.props,W,N),d8(S,E.children,N),mo(),Gc(void 0,S.update),_o()},oe=(S,E,N,W,re,ne,de,pe,me=!1)=>{const fe=S&&S.children,ke=S?S.shapeFlag:0,we=E.children,{patchFlag:Re,shapeFlag:Oe}=E;if(Re>0){if(Re&128){P(fe,we,N,W,re,ne,de,pe,me);return}else if(Re&256){w(fe,we,N,W,re,ne,de,pe,me);return}}Oe&8?(ke&16&&I(fe,re,ne),we!==fe&&f(N,we)):ke&16?Oe&16?P(fe,we,N,W,re,ne,de,pe,me):I(fe,re,ne,!0):(ke&8&&f(N,""),Oe&16&&H(we,N,W,re,ne,de,pe,me))},w=(S,E,N,W,re,ne,de,pe,me)=>{S=S||to,E=E||to;const fe=S.length,ke=E.length,we=Math.min(fe,ke);let Re;for(Re=0;Re<we;Re++){const Oe=E[Re]=me?vi(E[Re]):Cn(E[Re]);_(S[Re],Oe,N,null,re,ne,de,pe,me)}fe>ke?I(S,re,ne,!0,!1,we):H(E,N,W,re,ne,de,pe,me,we)},P=(S,E,N,W,re,ne,de,pe,me)=>{let fe=0;const ke=E.length;let we=S.length-1,Re=ke-1;for(;fe<=we&&fe<=Re;){const Oe=S[fe],Pe=E[fe]=me?vi(E[fe]):Cn(E[fe]);if(rs(Oe,Pe))_(Oe,Pe,N,null,re,ne,de,pe,me);else break;fe++}for(;fe<=we&&fe<=Re;){const Oe=S[we],Pe=E[Re]=me?vi(E[Re]):Cn(E[Re]);if(rs(Oe,Pe))_(Oe,Pe,N,null,re,ne,de,pe,me);else break;we--,Re--}if(fe>we){if(fe<=Re){const Oe=Re+1,Pe=Oe<ke?E[Oe].el:W;for(;fe<=Re;)_(null,E[fe]=me?vi(E[fe]):Cn(E[fe]),N,Pe,re,ne,de,pe,me),fe++}}else if(fe>Re)for(;fe<=we;)V(S[fe],re,ne,!0),fe++;else{const Oe=fe,Pe=fe,z=new Map;for(fe=Pe;fe<=Re;fe++){const se=E[fe]=me?vi(E[fe]):Cn(E[fe]);se.key!=null&&z.set(se.key,fe)}let C,T=0;const q=Re-Pe+1;let ie=!1,j=0;const U=new Array(q);for(fe=0;fe<q;fe++)U[fe]=0;for(fe=Oe;fe<=we;fe++){const se=S[fe];if(T>=q){V(se,re,ne,!0);continue}let ue;if(se.key!=null)ue=z.get(se.key);else for(C=Pe;C<=Re;C++)if(U[C-Pe]===0&&rs(se,E[C])){ue=C;break}ue===void 0?V(se,re,ne,!0):(U[ue-Pe]=fe+1,ue>=j?j=ue:ie=!0,_(se,E[ue],N,null,re,ne,de,pe,me),T++)}const te=ie?v8(U):to;for(C=te.length-1,fe=q-1;fe>=0;fe--){const se=Pe+fe,ue=E[se],J=se+1<ke?E[se+1].el:W;U[fe]===0?_(null,ue,N,J,re,ne,de,pe,me):ie&&(C<0||fe!==te[C]?ce(ue,N,J,2):C--)}}},ce=(S,E,N,W,re=null)=>{const{el:ne,type:de,transition:pe,children:me,shapeFlag:fe}=S;if(fe&6){ce(S.component.subTree,E,N,W);return}if(fe&128){S.suspense.move(E,N,W);return}if(fe&64){de.move(S,E,N,ae);return}if(de===pt){n(ne,E,N);for(let we=0;we<me.length;we++)ce(me[we],E,N,W);n(S.anchor,E,N);return}if(de===ff){L(S,E,N);return}if(W!==2&&fe&1&&pe)if(W===0)pe.beforeEnter(ne),n(ne,E,N),Lr(()=>pe.enter(ne),re);else{const{leave:we,delayLeave:Re,afterLeave:Oe}=pe,Pe=()=>n(ne,E,N),z=()=>{we(ne,()=>{Pe(),Oe&&Oe()})};Re?Re(ne,Pe,z):z()}else n(ne,E,N)},V=(S,E,N,W=!1,re=!1)=>{const{type:ne,props:de,ref:pe,children:me,dynamicChildren:fe,shapeFlag:ke,patchFlag:we,dirs:Re}=S;if(pe!=null&&lh(pe,null,N,S,!0),ke&256){E.ctx.deactivate(S);return}const Oe=ke&1&&Re,Pe=!ia(S);let z;if(Pe&&(z=de&&de.onVnodeBeforeUnmount)&&_n(z,E,S),ke&6)Z(S.component,N,W);else{if(ke&128){S.suspense.unmount(N,W);return}Oe&&Ui(S,null,E,"beforeUnmount"),ke&64?S.type.remove(S,E,N,re,ae,W):fe&&(ne!==pt||we>0&&we&64)?I(fe,E,N,!1,!0):(ne===pt&&we&384||!re&&ke&16)&&I(me,E,N),W&&le(S)}(Pe&&(z=de&&de.onVnodeUnmounted)||Oe)&&Lr(()=>{z&&_n(z,E,S),Oe&&Ui(S,null,E,"unmounted")},N)},le=S=>{const{type:E,el:N,anchor:W,transition:re}=S;if(E===pt){Y(N,W);return}if(E===ff){y(S);return}const ne=()=>{i(N),re&&!re.persisted&&re.afterLeave&&re.afterLeave()};if(S.shapeFlag&1&&re&&!re.persisted){const{leave:de,delayLeave:pe}=re,me=()=>de(N,ne);pe?pe(S.el,ne,me):me()}else ne()},Y=(S,E)=>{let N;for(;S!==E;)N=h(S),i(S),S=N;i(E)},Z=(S,E,N)=>{const{bum:W,scope:re,update:ne,subTree:de,um:pe}=S;W&&af(W),re.stop(),ne&&(ne.active=!1,V(de,S,E,N)),pe&&Lr(pe,E),Lr(()=>{S.isUnmounted=!0},E),E&&E.pendingBranch&&!E.isUnmounted&&S.asyncDep&&!S.asyncResolved&&S.suspenseId===E.pendingId&&(E.deps--,E.deps===0&&E.resolve())},I=(S,E,N,W=!1,re=!1,ne=0)=>{for(let de=ne;de<S.length;de++)V(S[de],E,N,W,re)},K=S=>S.shapeFlag&6?K(S.component.subTree):S.shapeFlag&128?S.suspense.next():h(S.anchor||S.el),ee=(S,E,N)=>{S==null?E._vnode&&V(E._vnode,null,null,!0):_(E._vnode||null,S,E,null,null,null,N),Cv(),E._vnode=S},ae={p:_,um:V,m:ce,r:le,mt:B,mc:H,pc:oe,pbc:R,n:K,o:e};return{render:ee,hydrate:void 0,createApp:m8(ee)}}function qi({effect:e,update:t},r){e.allowRecurse=t.allowRecurse=r}function Kv(e,t,r=!1){const n=e.children,i=t.children;if(vt(n)&&vt(i))for(let s=0;s<n.length;s++){const a=n[s];let o=i[s];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=i[s]=vi(i[s]),o.el=a.el),r||Kv(a,o))}}function v8(e){const t=e.slice(),r=[0];let n,i,s,a,o;const l=e.length;for(n=0;n<l;n++){const u=e[n];if(u!==0){if(i=r[r.length-1],e[i]<u){t[n]=i,r.push(n);continue}for(s=0,a=r.length-1;s<a;)o=s+a>>1,e[r[o]]<u?s=o+1:a=o;u<e[r[s]]&&(s>0&&(t[n]=r[s-1]),r[s]=n)}}for(s=r.length,a=r[s-1];s-- >0;)r[s]=a,a=t[a];return r}const y8=e=>e.__isTeleport,pt=Symbol(void 0),xd=Symbol(void 0),Xr=Symbol(void 0),ff=Symbol(void 0),sa=[];let on=null;function ye(e=!1){sa.push(on=e?null:[])}function b8(){sa.pop(),on=sa[sa.length-1]||null}let wa=1;function Op(e){wa+=e}function Yv(e){return e.dynamicChildren=wa>0?on||to:null,b8(),wa>0&&on&&on.push(e),e}function Te(e,t,r,n,i,s){return Yv(He(e,t,r,n,i,s,!0))}function Rt(e,t,r,n,i){return Yv(Ve(e,t,r,n,i,!0))}function gc(e){return e?e.__v_isVNode===!0:!1}function rs(e,t){return e.type===t.type&&e.key===t.key}const eu="__vInternal",Gv=({key:e})=>e??null,Gl=({ref:e,ref_key:t,ref_for:r})=>e!=null?xr(e)||Cr(e)||ut(e)?{i:_r,r:e,k:t,f:!!r}:e:null;function He(e,t=null,r=null,n=0,i=null,s=e===pt?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Gv(t),ref:t&&Gl(t),scopeId:Av,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null};return o?(Ed(l,r),s&128&&e.normalize(l)):r&&(l.shapeFlag|=xr(r)?8:16),wa>0&&!a&&on&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&on.push(l),l}const Ve=w8;function w8(e,t=null,r=null,n=0,i=null,s=!1){if((!e||e===Hv)&&(e=Xr),gc(e)){const o=Ti(e,t,!0);return r&&Ed(o,r),wa>0&&!s&&on&&(o.shapeFlag&6?on[on.indexOf(e)]=o:on.push(o)),o.patchFlag|=-2,o}if(M8(e)&&(e=e.__vccOpts),t){t=kt(t);let{class:o,style:l}=t;o&&!xr(o)&&(t.class=at(o)),Er(l)&&(lv(l)&&!vt(l)&&(l=cn({},l)),t.style=Ut(l))}const a=xr(e)?1:N5(e)?128:y8(e)?64:Er(e)?4:ut(e)?2:0;return He(e,t,r,n,i,a,s,!0)}function kt(e){return e?lv(e)||eu in e?cn({},e):e:null}function Ti(e,t,r=!1){const{props:n,ref:i,patchFlag:s,children:a}=e,o=t?Ad(n||{},t):n;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:o,key:o&&Gv(o),ref:t&&t.ref?r&&i?vt(i)?i.concat(Gl(t)):[i,Gl(t)]:Gl(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==pt?s===-1?16:s|16:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Ti(e.ssContent),ssFallback:e.ssFallback&&Ti(e.ssFallback),el:e.el,anchor:e.anchor}}function Xn(e=" ",t=0){return Ve(xd,null,e,t)}function Ne(e="",t=!1){return t?(ye(),Rt(Xr,null,e)):Ve(Xr,null,e)}function Cn(e){return e==null||typeof e=="boolean"?Ve(Xr):vt(e)?Ve(pt,null,e.slice()):typeof e=="object"?vi(e):Ve(xd,null,String(e))}function vi(e){return e.el===null||e.memo?e:Ti(e)}function Ed(e,t){let r=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(vt(t))r=16;else if(typeof t=="object")if(n&65){const i=t.default;i&&(i._c&&(i._d=!1),Ed(e,i()),i._c&&(i._d=!0));return}else{r=32;const i=t._;!i&&!(eu in t)?t._ctx=_r:i===3&&_r&&(_r.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ut(t)?(t={default:t,_ctx:_r},r=32):(t=String(t),n&64?(r=16,t=[Xn(t)]):r=8);e.children=t,e.shapeFlag|=r}function Ad(...e){const t={};for(let r=0;r<e.length;r++){const n=e[r];for(const i in n)if(i==="class")t.class!==n.class&&(t.class=at([t.class,n.class]));else if(i==="style")t.style=Ut([t.style,n.style]);else if(md(i)){const s=t[i],a=n[i];a&&s!==a&&!(vt(s)&&s.includes(a))&&(t[i]=s?[].concat(s,a):a)}else i!==""&&(t[i]=n[i])}return t}function _n(e,t,r,n=null){Gr(e,t,7,[r,n])}const S8=Wv();let C8=0;function x8(e,t,r){const n=e.type,i=(t?t.appContext:e.appContext)||S8,s={uid:C8++,vnode:e,type:n,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new jw(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:qv(n,i),emitsOptions:Ev(n,i),emit:null,emitted:null,propsDefaults:Dt,inheritAttrs:n.inheritAttrs,ctx:Dt,data:Dt,props:Dt,attrs:Dt,slots:Dt,refs:Dt,setupState:Dt,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=F5.bind(null,s),e.ce&&e.ce(s),s}let sr=null;const Xv=()=>sr||_r,oo=e=>{sr=e,e.scope.on()},fs=()=>{sr&&sr.scope.off(),sr=null};function Zv(e){return e.vnode.shapeFlag&4}let Sa=!1;function E8(e,t=!1){Sa=t;const{props:r,children:n}=e.vnode,i=Zv(e);c8(e,r,i,t),h8(e,n);const s=i?A8(e,t):void 0;return Sa=!1,s}function A8(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=cv(new Proxy(e.ctx,n8));const{setup:n}=r;if(n){const i=e.setupContext=n.length>1?k8(e):null;oo(e),mo();const s=xi(n,e,0,[e.props,i]);if(_o(),fs(),mv(s)){if(s.then(fs,fs),t)return s.then(a=>{Ip(e,a)}).catch(a=>{Yc(a,e,0)});e.asyncDep=s}else Ip(e,s)}else Qv(e)}function Ip(e,t,r){ut(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Er(t)&&(e.setupState=uv(t)),Qv(e)}function Qv(e,t,r){const n=e.type;e.render||(e.render=n.render||Vn),oo(e),mo(),i8(e),_o(),fs()}function R8(e){return new Proxy(e.attrs,{get(t,r){return Ur(e,"get","$attrs"),t[r]}})}function k8(e){const t=n=>{e.exposed=n||{}};let r;return{get attrs(){return r||(r=R8(e))},slots:e.slots,emit:e.emit,expose:t}}function tu(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(uv(cv(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in mc)return mc[r](e)}}))}function T8(e,t=!0){return ut(e)?e.displayName||e.name:e.name||t&&e.__name}function M8(e){return ut(e)&&"__vccOpts"in e}const L8=(e,t)=>v5(e,t,Sa);function B8(e,t,r){const n=arguments.length;return n===2?Er(t)&&!vt(t)?gc(t)?Ve(e,null,[t]):Ve(e,t):Ve(e,null,t):(n>3?r=Array.prototype.slice.call(arguments,2):n===3&&gc(r)&&(r=[r]),Ve(e,t,r))}const O8="3.2.37";function I8(e,t){const r=Object.create(null),n=e.split(",");for(let i=0;i<n.length;i++)r[n[i]]=!0;return i=>!!r[i]}const F8="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",D8=I8(F8);function Jv(e){return!!e||e===""}const H8=/^on[^a-z]/,P8=e=>H8.test(e),j8=e=>e.startsWith("onUpdate:"),Da=Object.assign,Ha=Array.isArray,N8=e=>typeof e=="function",ch=e=>typeof e=="string",U8=e=>e!==null&&typeof e=="object",Rd=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},q8=/-(\w)/g,Fp=Rd(e=>e.replace(q8,(t,r)=>r?r.toUpperCase():"")),z8=/\B([A-Z])/g,ro=Rd(e=>e.replace(z8,"-$1").toLowerCase()),V8=Rd(e=>e.charAt(0).toUpperCase()+e.slice(1)),uh=e=>{const t=parseFloat(e);return isNaN(t)?e:t},$8="http://www.w3.org/2000/svg",ns=typeof document<"u"?document:null,Dp=ns&&ns.createElement("template"),W8={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,n)=>{const i=t?ns.createElementNS($8,e):ns.createElement(e,r?{is:r}:void 0);return e==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:e=>ns.createTextNode(e),createComment:e=>ns.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>ns.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,r,n,i,s){const a=r?r.previousSibling:t.lastChild;if(i&&(i===s||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),r),!(i===s||!(i=i.nextSibling)););else{Dp.innerHTML=n?`<svg>${e}</svg>`:e;const o=Dp.content;if(n){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}t.insertBefore(o,r)}return[a?a.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}};function K8(e,t,r){const n=e._vtc;n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}function Y8(e,t,r){const n=e.style,i=ch(r);if(r&&!i){for(const s in r)fh(n,s,r[s]);if(t&&!ch(t))for(const s in t)r[s]==null&&fh(n,s,"")}else{const s=n.display;i?t!==r&&(n.cssText=r):t&&e.removeAttribute("style"),"_vod"in e&&(n.display=s)}}const Hp=/\s*!important$/;function fh(e,t,r){if(Ha(r))r.forEach(n=>fh(e,t,n));else if(r==null&&(r=""),t.startsWith("--"))e.setProperty(t,r);else{const n=G8(e,t);Hp.test(r)?e.setProperty(ro(n),r.replace(Hp,""),"important"):e[n]=r}}const Pp=["Webkit","Moz","ms"],hf={};function G8(e,t){const r=hf[t];if(r)return r;let n=Ln(t);if(n!=="filter"&&n in e)return hf[t]=n;n=V8(n);for(let i=0;i<Pp.length;i++){const s=Pp[i]+n;if(s in e)return hf[t]=s}return t}const jp="http://www.w3.org/1999/xlink";function X8(e,t,r,n,i){if(n&&t.startsWith("xlink:"))r==null?e.removeAttributeNS(jp,t.slice(6,t.length)):e.setAttributeNS(jp,t,r);else{const s=D8(t);r==null||s&&!Jv(r)?e.removeAttribute(t):e.setAttribute(t,s?"":r)}}function Z8(e,t,r,n,i,s,a){if(t==="innerHTML"||t==="textContent"){n&&a(n,i,s),e[t]=r??"";return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=r;const l=r??"";(e.value!==l||e.tagName==="OPTION")&&(e.value=l),r==null&&e.removeAttribute(t);return}let o=!1;if(r===""||r==null){const l=typeof e[t];l==="boolean"?r=Jv(r):r==null&&l==="string"?(r="",o=!0):l==="number"&&(r=0,o=!0)}try{e[t]=r}catch{}o&&e.removeAttribute(t)}const[ey,Q8]=(()=>{let e=Date.now,t=!1;if(typeof window<"u"){Date.now()>document.createEvent("Event").timeStamp&&(e=performance.now.bind(performance));const r=navigator.userAgent.match(/firefox\/(\d+)/i);t=!!(r&&Number(r[1])<=53)}return[e,t]})();let hh=0;const J8=Promise.resolve(),e9=()=>{hh=0},t9=()=>hh||(J8.then(e9),hh=ey());function r9(e,t,r,n){e.addEventListener(t,r,n)}function n9(e,t,r,n){e.removeEventListener(t,r,n)}function i9(e,t,r,n,i=null){const s=e._vei||(e._vei={}),a=s[t];if(n&&a)a.value=n;else{const[o,l]=s9(t);if(n){const u=s[t]=o9(n,i);r9(e,o,u,l)}else a&&(n9(e,o,a,l),s[t]=void 0)}}const Np=/(?:Once|Passive|Capture)$/;function s9(e){let t;if(Np.test(e)){t={};let r;for(;r=e.match(Np);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[ro(e.slice(2)),t]}function o9(e,t){const r=n=>{const i=n.timeStamp||ey();(Q8||i>=r.attached-1)&&Gr(a9(n,r.value),t,5,[n])};return r.value=e,r.attached=t9(),r}function a9(e,t){if(Ha(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(n=>i=>!i._stopped&&n&&n(i))}else return t}const Up=/^on[a-z]/,l9=(e,t,r,n,i=!1,s,a,o,l)=>{t==="class"?K8(e,n,i):t==="style"?Y8(e,r,n):P8(t)?j8(t)||i9(e,t,r,n,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):c9(e,t,n,i))?Z8(e,t,n,s,a,o,l):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),X8(e,t,n,i))};function c9(e,t,r,n){return n?!!(t==="innerHTML"||t==="textContent"||t in e&&Up.test(t)&&N8(r)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||Up.test(t)&&ch(r)?!1:t in e}function u9(e,t){const r=$5(e);class n extends kd{constructor(s){super(r,s,t)}}return n.def=r,n}const f9=typeof HTMLElement<"u"?HTMLElement:class{};class kd extends f9{constructor(t,r={},n){super(),this._def=t,this._props=r,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this.shadowRoot&&n?n(this._createVNode(),this.shadowRoot):this.attachShadow({mode:"open"})}connectedCallback(){this._connected=!0,this._instance||this._resolveDef()}disconnectedCallback(){this._connected=!1,yv(()=>{this._connected||(Yp(null,this.shadowRoot),this._instance=null)})}_resolveDef(){if(this._resolved)return;this._resolved=!0;for(let n=0;n<this.attributes.length;n++)this._setAttr(this.attributes[n].name);new MutationObserver(n=>{for(const i of n)this._setAttr(i.attributeName)}).observe(this,{attributes:!0});const t=n=>{const{props:i,styles:s}=n,a=!Ha(i),o=i?a?Object.keys(i):i:[];let l;if(a)for(const u in this._props){const f=i[u];(f===Number||f&&f.type===Number)&&(this._props[u]=uh(this._props[u]),(l||(l=Object.create(null)))[u]=!0)}this._numberProps=l;for(const u of Object.keys(this))u[0]!=="_"&&this._setProp(u,this[u],!0,!1);for(const u of o.map(Fp))Object.defineProperty(this,u,{get(){return this._getProp(u)},set(f){this._setProp(u,f)}});this._applyStyles(s),this._update()},r=this._def.__asyncLoader;r?r().then(t):t(this._def)}_setAttr(t){let r=this.getAttribute(t);this._numberProps&&this._numberProps[t]&&(r=uh(r)),this._setProp(Fp(t),r,!1)}_getProp(t){return this._props[t]}_setProp(t,r,n=!0,i=!0){r!==this._props[t]&&(this._props[t]=r,i&&this._instance&&this._update(),n&&(r===!0?this.setAttribute(ro(t),""):typeof r=="string"||typeof r=="number"?this.setAttribute(ro(t),r+""):r||this.removeAttribute(ro(t))))}_update(){Yp(this._createVNode(),this.shadowRoot)}_createVNode(){const t=Ve(this._def,Da({},this._props));return this._instance||(t.ce=r=>{this._instance=r,r.isCE=!0,r.emit=(i,...s)=>{this.dispatchEvent(new CustomEvent(i,{detail:s}))};let n=this;for(;n=n&&(n.parentNode||n.host);)if(n instanceof kd){r.parent=n._instance;break}}),t}_applyStyles(t){t&&t.forEach(r=>{const n=document.createElement("style");n.textContent=r,this.shadowRoot.appendChild(n)})}}const oi="transition",Lo="animation",Zt=(e,{slots:t})=>B8(Mv,ry(e),t);Zt.displayName="Transition";const ty={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},h9=Zt.props=Da({},Mv.props,ty),zi=(e,t=[])=>{Ha(e)?e.forEach(r=>r(...t)):e&&e(...t)},qp=e=>e?Ha(e)?e.some(t=>t.length>1):e.length>1:!1;function ry(e){const t={};for(const A in e)A in ty||(t[A]=e[A]);if(e.css===!1)return t;const{name:r="v",type:n,duration:i,enterFromClass:s=`${r}-enter-from`,enterActiveClass:a=`${r}-enter-active`,enterToClass:o=`${r}-enter-to`,appearFromClass:l=s,appearActiveClass:u=a,appearToClass:f=o,leaveFromClass:c=`${r}-leave-from`,leaveActiveClass:h=`${r}-leave-active`,leaveToClass:d=`${r}-leave-to`}=e,p=d9(i),v=p&&p[0],_=p&&p[1],{onBeforeEnter:m,onEnter:g,onEnterCancelled:x,onLeave:L,onLeaveCancelled:y,onBeforeAppear:M=m,onAppear:F=g,onAppearCancelled:D=x}=t,H=(A,k,O)=>{mi(A,k?f:o),mi(A,k?u:a),O&&O()},b=(A,k)=>{A._isLeaving=!1,mi(A,c),mi(A,d),mi(A,h),k&&k()},R=A=>(k,O)=>{const B=A?F:g,$=()=>H(k,A,O);zi(B,[k,$]),zp(()=>{mi(k,A?l:s),jn(k,A?f:o),qp(B)||Vp(k,n,v,$)})};return Da(t,{onBeforeEnter(A){zi(m,[A]),jn(A,s),jn(A,a)},onBeforeAppear(A){zi(M,[A]),jn(A,l),jn(A,u)},onEnter:R(!1),onAppear:R(!0),onLeave(A,k){A._isLeaving=!0;const O=()=>b(A,k);jn(A,c),iy(),jn(A,h),zp(()=>{A._isLeaving&&(mi(A,c),jn(A,d),qp(L)||Vp(A,n,_,O))}),zi(L,[A,O])},onEnterCancelled(A){H(A,!1),zi(x,[A])},onAppearCancelled(A){H(A,!0),zi(D,[A])},onLeaveCancelled(A){b(A),zi(y,[A])}})}function d9(e){if(e==null)return null;if(U8(e))return[df(e.enter),df(e.leave)];{const t=df(e);return[t,t]}}function df(e){return uh(e)}function jn(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.add(r)),(e._vtc||(e._vtc=new Set)).add(t)}function mi(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.remove(n));const{_vtc:r}=e;r&&(r.delete(t),r.size||(e._vtc=void 0))}function zp(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let p9=0;function Vp(e,t,r,n){const i=e._endId=++p9,s=()=>{i===e._endId&&n()};if(r)return setTimeout(s,r);const{type:a,timeout:o,propCount:l}=ny(e,t);if(!a)return n();const u=a+"end";let f=0;const c=()=>{e.removeEventListener(u,h),s()},h=d=>{d.target===e&&++f>=l&&c()};setTimeout(()=>{f<l&&c()},o+1),e.addEventListener(u,h)}function ny(e,t){const r=window.getComputedStyle(e),n=p=>(r[p]||"").split(", "),i=n(oi+"Delay"),s=n(oi+"Duration"),a=$p(i,s),o=n(Lo+"Delay"),l=n(Lo+"Duration"),u=$p(o,l);let f=null,c=0,h=0;t===oi?a>0&&(f=oi,c=a,h=s.length):t===Lo?u>0&&(f=Lo,c=u,h=l.length):(c=Math.max(a,u),f=c>0?a>u?oi:Lo:null,h=f?f===oi?s.length:l.length:0);const d=f===oi&&/\b(transform|all)(,|$)/.test(r[oi+"Property"]);return{type:f,timeout:c,propCount:h,hasTransform:d}}function $p(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((r,n)=>Wp(r)+Wp(e[n])))}function Wp(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function iy(){return document.body.offsetHeight}const sy=new WeakMap,oy=new WeakMap,m9={name:"TransitionGroup",props:Da({},h9,{tag:String,moveClass:String}),setup(e,{slots:t}){const r=Xv(),n=Tv();let i,s;return Iv(()=>{if(!i.length)return;const a=e.moveClass||`${e.name||"v"}-move`;if(!y9(i[0].el,r.vnode.el,a))return;i.forEach(_9),i.forEach(g9);const o=i.filter(v9);iy(),o.forEach(l=>{const u=l.el,f=u.style;jn(u,a),f.transform=f.webkitTransform=f.transitionDuration="";const c=u._moveCb=h=>{h&&h.target!==u||(!h||/transform$/.test(h.propertyName))&&(u.removeEventListener("transitionend",c),u._moveCb=null,mi(u,a))};u.addEventListener("transitionend",c)})}),()=>{const a=At(e),o=ry(a);let l=a.tag||pt;i=s,s=t.default?bd(t.default()):[];for(let u=0;u<s.length;u++){const f=s[u];f.key!=null&&ba(f,ya(f,o,n,r))}if(i)for(let u=0;u<i.length;u++){const f=i[u];ba(f,ya(f,o,n,r)),sy.set(f,f.el.getBoundingClientRect())}return Ve(l,null,s)}}},Td=m9;function _9(e){const t=e.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function g9(e){oy.set(e,e.el.getBoundingClientRect())}function v9(e){const t=sy.get(e),r=oy.get(e),n=t.left-r.left,i=t.top-r.top;if(n||i){const s=e.el.style;return s.transform=s.webkitTransform=`translate(${n}px,${i}px)`,s.transitionDuration="0s",e}}function y9(e,t,r){const n=e.cloneNode();e._vtc&&e._vtc.forEach(a=>{a.split(/\s+/).forEach(o=>o&&n.classList.remove(o))}),r.split(/\s+/).forEach(a=>a&&n.classList.add(a)),n.style.display="none";const i=t.nodeType===1?t:t.parentNode;i.appendChild(n);const{hasTransform:s}=ny(n);return i.removeChild(n),s}const b9=["ctrl","shift","alt","meta"],w9={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>b9.some(r=>e[`${r}Key`]&&!t.includes(r))},An=(e,t)=>(r,...n)=>{for(let i=0;i<t.length;i++){const s=w9[t[i]];if(s&&s(r,t))return}return e(r,...n)},S9={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},es=(e,t)=>r=>{if(!("key"in r))return;const n=ro(r.key);if(t.some(i=>i===n||S9[i]===n))return e(r)},ru={beforeMount(e,{value:t},{transition:r}){e._vod=e.style.display==="none"?"":e.style.display,r&&t?r.beforeEnter(e):Bo(e,t)},mounted(e,{value:t},{transition:r}){r&&t&&r.enter(e)},updated(e,{value:t,oldValue:r},{transition:n}){!t!=!r&&(n?t?(n.beforeEnter(e),Bo(e,!0),n.enter(e)):n.leave(e,()=>{Bo(e,!1)}):Bo(e,t))},beforeUnmount(e,{value:t}){Bo(e,t)}};function Bo(e,t){e.style.display=t?e._vod:"none"}const C9=Da({patchProp:l9},W8);let Kp;function x9(){return Kp||(Kp=_8(C9))}const Yp=(...e)=>{x9().render(...e)};var Pt=(e,t)=>{const r=e.__vccOpts||e;for(const[n,i]of t)r[n]=i;return r};const E9={name:"AppLoader",props:{show:{type:Boolean,default:!1},infinite:{type:Boolean,default:!1},type:{type:String,required:!0},messageId:{type:String,default:""}}},A9=He("div",{id:"vac-circle"},null,-1),R9=He("div",{id:"vac-circle"},null,-1),k9=He("div",{id:"vac-circle"},null,-1),T9=He("div",{id:"vac-circle"},null,-1),M9=He("div",{id:"vac-circle"},null,-1),L9=He("div",{id:"vac-circle"},null,-1);function B9(e,t,r,n,i,s){return ye(),Rt(Zt,{name:"vac-fade-spinner",appear:""},{default:Xe(()=>[r.show?(ye(),Te("div",{key:0,class:at(["vac-loader-wrapper",{"vac-container-center":!r.infinite,"vac-container-top":r.infinite}])},[r.type==="rooms"?Ue(e.$slots,"spinner-icon-rooms",{key:0},()=>[A9]):Ne("",!0),r.type==="infinite-rooms"?Ue(e.$slots,"spinner-icon-infinite-rooms",{key:1},()=>[R9]):Ne("",!0),r.type==="message-file"?Ue(e.$slots,"spinner-icon-message-file_"+r.messageId,{key:2},()=>[k9]):Ne("",!0),r.type==="room-file"?Ue(e.$slots,"spinner-icon-room-file",{key:3},()=>[T9]):Ne("",!0),r.type==="messages"?Ue(e.$slots,"spinner-icon-messages",{key:4},()=>[M9]):Ne("",!0),r.type==="infinite-messages"?Ue(e.$slots,"spinner-icon-infinite-messages",{key:5},()=>[L9]):Ne("",!0)],2)):Ne("",!0)]),_:3})}var nu=Pt(E9,[["render",B9]]);const O9={name:"SvgIcon",props:{name:{type:String,default:null},param:{type:String,default:null}},data(){return{svgItem:{search:{path:"M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"},add:{path:"M17,13H13V17H11V13H7V11H11V7H13V11H17M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"},toggle:{path:"M5,13L9,17L7.6,18.42L1.18,12L7.6,5.58L9,7L5,11H21V13H5M21,6V8H11V6H21M21,16V18H11V16H21Z"},menu:{path:"M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z"},close:{path:"M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z"},file:{path:"M14,17H7V15H14M17,13H7V11H17M17,9H7V7H17M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z"},paperclip:{path:"M16.5,6V17.5A4,4 0 0,1 12.5,21.5A4,4 0 0,1 8.5,17.5V5A2.5,2.5 0 0,1 11,2.5A2.5,2.5 0 0,1 13.5,5V15.5A1,1 0 0,1 12.5,16.5A1,1 0 0,1 11.5,15.5V6H10V15.5A2.5,2.5 0 0,0 12.5,18A2.5,2.5 0 0,0 15,15.5V5A4,4 0 0,0 11,1A4,4 0 0,0 7,5V17.5A5.5,5.5 0 0,0 12.5,23A5.5,5.5 0 0,0 18,17.5V6H16.5Z"},"close-outline":{path:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"},send:{path:"M2,21L23,12L2,3V10L17,12L2,14V21Z"},emoji:{path:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"},document:{path:"M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z"},pencil:{path:"M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z"},checkmark:{path:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"},"double-checkmark":{path:"M18 7l-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41L6 19l1.41-1.41L1.83 12 .41 13.41z"},eye:{path:"M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z"},dropdown:{path:"M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"},deleted:{path:"M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12C4,13.85 4.63,15.55 5.68,16.91L16.91,5.68C15.55,4.63 13.85,4 12,4M12,20A8,8 0 0,0 20,12C20,10.15 19.37,8.45 18.32,7.09L7.09,18.32C8.45,19.37 10.15,20 12,20Z"},microphone:{size:"large",path:"M432.8,216.4v39.2c0,45.2-15.3,84.3-45.2,118.4c-29.8,33.2-67.3,52.8-111.6,57.9v40.9h78.4c5.1,0,10.2,1.7,13.6,6c4.3,4.3,6,8.5,6,13.6c0,5.1-1.7,10.2-6,13.6c-4.3,4.3-8.5,6-13.6,6H157.6c-5.1,0-10.2-1.7-13.6-6c-4.3-4.3-6-8.5-6-13.6c0-5.1,1.7-10.2,6-13.6c4.3-4.3,8.5-6,13.6-6H236v-40.9c-44.3-5.1-81.8-23.9-111.6-57.9s-45.2-73.3-45.2-118.4v-39.2c0-5.1,1.7-10.2,6-13.6c4.3-4.3,8.5-6,13.6-6s10.2,1.7,13.6,6c4.3,4.3,6,8.5,6,13.6v39.2c0,37.5,13.6,70.7,40,97.1s59.6,40,97.1,40s70.7-13.6,97.1-40c26.4-26.4,40-59.6,40-97.1v-39.2c0-5.1,1.7-10.2,6-13.6c4.3-4.3,8.5-6,13.6-6c5.1,0,10.2,1.7,13.6,6C430.2,206.2,432.8,211.3,432.8,216.4z M353.5,98v157.6c0,27.3-9.4,50.3-29,69c-19.6,19.6-42.6,29-69,29s-50.3-9.4-69-29c-19.6-19.6-29-42.6-29-69V98c0-27.3,9.4-50.3,29-69c19.6-19.6,42.6-29,69-29s50.3,9.4,69,29C344.2,47.7,353.5,71.6,353.5,98z"},"audio-play":{size:"medium",path:"M43.331,21.237L7.233,0.397c-0.917-0.529-2.044-0.529-2.96,0c-0.916,0.528-1.48,1.505-1.48,2.563v41.684   c0,1.058,0.564,2.035,1.48,2.563c0.458,0.268,0.969,0.397,1.48,0.397c0.511,0,1.022-0.133,1.48-0.397l36.098-20.84   c0.918-0.529,1.479-1.506,1.479-2.564S44.247,21.767,43.331,21.237z"},"audio-pause":{size:"medium",path:"M17.991,40.976c0,3.662-2.969,6.631-6.631,6.631l0,0c-3.662,0-6.631-2.969-6.631-6.631V6.631C4.729,2.969,7.698,0,11.36,0l0,0c3.662,0,6.631,2.969,6.631,6.631V40.976z",path2:"M42.877,40.976c0,3.662-2.969,6.631-6.631,6.631l0,0c-3.662,0-6.631-2.969-6.631-6.631V6.631C29.616,2.969,32.585,0,36.246,0l0,0c3.662,0,6.631,2.969,6.631,6.631V40.976z"}}}},computed:{svgId(){const e=this.param?"-"+this.param:"";return`vac-icon-${this.name}${e}`},size(){const e=this.svgItem[this.name];return e.size==="large"?512:e.size==="medium"?48:24}}},I9=["viewBox"],F9=["id","d"],D9=["id","d"];function H9(e,t,r,n,i,s){return ye(),Te("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",width:"24",height:"24",viewBox:`0 0 ${s.size} ${s.size}`},[He("path",{id:s.svgId,d:i.svgItem[r.name].path},null,8,F9),i.svgItem[r.name].path2?(ye(),Te("path",{key:0,id:s.svgId,d:i.svgItem[r.name].path2},null,8,D9)):Ne("",!0)],8,I9)}var cr=Pt(O9,[["render",H9]]);const P9={name:"RoomsSearch",components:{SvgIcon:cr},props:{textMessages:{type:Object,required:!0},showSearch:{type:Boolean,required:!0},showAddRoom:{type:Boolean,required:!0},rooms:{type:Array,required:!0},loadingRooms:{type:Boolean,required:!0}},emits:["search-room","add-room"],computed:{showSearchBar(){return this.showSearch||this.showAddRoom}}},j9={key:0,class:"vac-icon-search"},N9=["placeholder"];function U9(e,t,r,n,i,s){const a=Ge("svg-icon");return ye(),Te("div",{class:at({"vac-box-search":s.showSearchBar,"vac-box-empty":!s.showSearchBar})},[r.showSearch?(ye(),Te(pt,{key:0},[!r.loadingRooms&&r.rooms.length?(ye(),Te("div",j9,[Ue(e.$slots,"search-icon",{},()=>[Ve(a,{name:"search"})])])):Ne("",!0),!r.loadingRooms&&r.rooms.length?(ye(),Te("input",{key:1,type:"search",placeholder:r.textMessages.SEARCH,autocomplete:"off",class:"vac-input",onInput:t[0]||(t[0]=o=>e.$emit("search-room",o))},null,40,N9)):Ne("",!0)],64)):Ne("",!0),r.showAddRoom?(ye(),Te("div",{key:1,class:"vac-svg-button vac-add-icon",onClick:t[1]||(t[1]=o=>e.$emit("add-room"))},[Ue(e.$slots,"add-icon",{},()=>[Ve(a,{name:"add"})])])):Ne("",!0)],2)}var q9=Pt(P9,[["render",U9]]);const Gp=document.createElement("i");function ay(e){const t="&"+e+";";Gp.innerHTML=t;const r=Gp.textContent;return r.charCodeAt(r.length-1)===59&&e!=="semi"||r===t?!1:r}function Nr(e,t,r,n){const i=e.length;let s=0,a;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,r=r>0?r:0,n.length<1e4)a=Array.from(n),a.unshift(t,r),e.splice(...a);else for(r&&e.splice(t,r);s<n.length;)a=n.slice(s,s+1e4),a.unshift(t,0),e.splice(...a),s+=1e4,t+=1e4}function mr(e,t){return e.length>0?(Nr(e,e.length,0,t),e):t}const dh={}.hasOwnProperty;function ly(e){const t={};let r=-1;for(;++r<e.length;)z9(t,e[r]);return t}function z9(e,t){let r;for(r in t){const i=(dh.call(e,r)?e[r]:void 0)||(e[r]={}),s=t[r];let a;if(s)for(a in s){dh.call(i,a)||(i[a]=[]);const o=s[a];V9(i[a],Array.isArray(o)?o:o?[o]:[])}}}function V9(e,t){let r=-1;const n=[];for(;++r<t.length;)(t[r].add==="after"?e:n).push(t[r]);Nr(e,0,0,n)}function cy(e){const t={};let r=-1;for(;++r<e.length;)$9(t,e[r]);return t}function $9(e,t){let r;for(r in t){const i=(dh.call(e,r)?e[r]:void 0)||(e[r]={}),s=t[r];let a;if(s)for(a in s)i[a]=s[a]}}function W9(e,t){const r=Number.parseInt(e,t);return r<9||r===11||r>13&&r<32||r>126&&r<160||r>55295&&r<57344||r>64975&&r<65008||(r&65535)===65535||(r&65535)===65534||r>1114111?"�":String.fromCharCode(r)}const K9={'"':"quot","&":"amp","<":"lt",">":"gt"};function uy(e){return e.replace(/["&<>]/g,t);function t(r){return"&"+K9[r]+";"}}function Bn(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Y9=/[!-\/:-@\[-`\{-~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,Sr=Bi(/[A-Za-z]/),gr=Bi(/[\dA-Za-z]/),G9=Bi(/[#-'*+\--9=?A-Z^-~]/);function vc(e){return e!==null&&(e<32||e===127)}const ph=Bi(/\d/),X9=Bi(/[\dA-Fa-f]/),Z9=Bi(/[!-/:-@[-`{-~]/);function Ze(e){return e!==null&&e<-2}function Ht(e){return e!==null&&(e<0||e===32)}function ft(e){return e===-2||e===-1||e===32}const Md=Bi(Y9),ao=Bi(/\s/);function Bi(e){return t;function t(r){return r!==null&&e.test(String.fromCharCode(r))}}function as(e,t){const r=uy(Q9(e||""));if(!t)return r;const n=r.indexOf(":"),i=r.indexOf("?"),s=r.indexOf("#"),a=r.indexOf("/");return n<0||a>-1&&n>a||i>-1&&n>i||s>-1&&n>s||t.test(r.slice(0,n))?r:""}function Q9(e){const t=[];let r=-1,n=0,i=0;for(;++r<e.length;){const s=e.charCodeAt(r);let a="";if(s===37&&gr(e.charCodeAt(r+1))&&gr(e.charCodeAt(r+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(a=String.fromCharCode(s));else if(s>55295&&s<57344){const o=e.charCodeAt(r+1);s<56320&&o>56319&&o<57344?(a=String.fromCharCode(s,o),i=1):a="�"}else a=String.fromCharCode(s);a&&(t.push(e.slice(n,r),encodeURIComponent(a)),n=r+i+1,a=""),i&&(r+=i,i=0)}return t.join("")+e.slice(n)}const Xp={}.hasOwnProperty,Zp=/^(https?|ircs?|mailto|xmpp)$/i,J9=/^https?$/i;function eS(e){const t=e||{};let r=!0;const n={},i=[[]],s=[],a=[],l=cy([{enter:{blockQuote:O,codeFenced:X,codeFencedFenceInfo:_,codeFencedFenceMeta:_,codeIndented:P,codeText:se,content:pe,definition:E,definitionDestinationString:W,definitionLabelString:_,definitionTitleString:_,emphasis:U,htmlFlow:q,htmlText:j,image:V,label:_,link:le,listItemMarker:b,listItemValue:H,listOrdered:F,listUnordered:D,paragraph:$,reference:_,resource:K,resourceDestinationString:ee,resourceTitleString:_,setextHeading:fe,strong:te},exit:{atxHeading:we,atxHeadingSequence:me,autolinkEmail:Ae,autolinkProtocol:be,blockQuote:B,characterEscapeValue:Pe,characterReferenceMarkerHexadecimal:_e,characterReferenceMarkerNumeric:_e,characterReferenceValue:Ee,codeFenced:ce,codeFencedFence:w,codeFencedFenceInfo:oe,codeFencedFenceMeta:m,codeFlowValue:C,codeIndented:ce,codeText:ue,codeTextData:Pe,data:Pe,definition:de,definitionDestinationString:re,definitionLabelString:N,definitionTitleString:ne,emphasis:J,hardBreakEscape:T,hardBreakTrailing:T,htmlFlow:ie,htmlFlowData:Pe,htmlText:ie,htmlTextData:Pe,image:S,label:Z,labelText:Y,lineEnding:z,link:S,listOrdered:R,listUnordered:A,paragraph:Q,reference:m,referenceString:I,resource:m,resourceDestinationString:ae,resourceTitleString:Me,setextHeading:Oe,setextHeadingLineSequence:Re,setextHeadingText:ke,strong:he,thematicBreak:ve}}].concat(t.htmlExtensions||[])),u={tightStack:a,definitions:n},f={lineEndingIfNeeded:y,options:t,encode:M,raw:x,tag:g,buffer:_,resume:m,setData:p,getData:v};let c=t.defaultLineEnding;return h;function h(ge){let Ie=-1,Be=0;const We=[];let Se=[],qe=[];for(;++Ie<ge.length;)!c&&(ge[Ie][1].type==="lineEnding"||ge[Ie][1].type==="lineEndingBlank")&&(c=ge[Ie][2].sliceSerialize(ge[Ie][1])),(ge[Ie][1].type==="listOrdered"||ge[Ie][1].type==="listUnordered")&&(ge[Ie][0]==="enter"?We.push(Ie):d(ge.slice(We.pop(),Ie))),ge[Ie][1].type==="definition"&&(ge[Ie][0]==="enter"?(qe=mr(qe,ge.slice(Be,Ie)),Be=Ie):(Se=mr(Se,ge.slice(Be,Ie+1)),Be=Ie+1));Se=mr(Se,qe),Se=mr(Se,ge.slice(Be)),Ie=-1;const Ye=Se;for(l.enter.null&&l.enter.null.call(f);++Ie<ge.length;){const Fe=l[Ye[Ie][0]],$e=Ye[Ie][1].type,De=Fe[$e];Xp.call(Fe,$e)&&De&&De.call(Object.assign({sliceSerialize:Ye[Ie][2].sliceSerialize},f),Ye[Ie][1])}return l.exit.null&&l.exit.null.call(f),i[0].join("")}function d(ge){const Ie=ge.length;let Be=0,We=0,Se=!1,qe;for(;++Be<Ie;){const Ye=ge[Be];if(Ye[1]._container)qe=void 0,Ye[0]==="enter"?We++:We--;else switch(Ye[1].type){case"listItemPrefix":{Ye[0]==="exit"&&(qe=!0);break}case"linePrefix":break;case"lineEndingBlank":{Ye[0]==="enter"&&!We&&(qe?qe=void 0:Se=!0);break}default:qe=void 0}}ge[0][1]._loose=Se}function p(ge,Ie){u[ge]=Ie}function v(ge){return u[ge]}function _(){i.push([])}function m(){return i.pop().join("")}function g(ge){r&&(p("lastWasTag",!0),i[i.length-1].push(ge))}function x(ge){p("lastWasTag"),i[i.length-1].push(ge)}function L(){x(c||`
`)}function y(){const ge=i[i.length-1],Ie=ge[ge.length-1],Be=Ie?Ie.charCodeAt(Ie.length-1):null;Be===10||Be===13||Be===null||L()}function M(ge){return v("ignoreEncode")?ge:uy(ge)}function F(ge){a.push(!ge._loose),y(),g("<ol"),p("expectFirstItem",!0)}function D(ge){a.push(!ge._loose),y(),g("<ul"),p("expectFirstItem",!0)}function H(ge){if(v("expectFirstItem")){const Ie=Number.parseInt(this.sliceSerialize(ge),10);Ie!==1&&g(' start="'+M(String(Ie))+'"')}}function b(){v("expectFirstItem")?g(">"):k(),y(),g("<li>"),p("expectFirstItem"),p("lastWasTag")}function R(){k(),a.pop(),L(),g("</ol>")}function A(){k(),a.pop(),L(),g("</ul>")}function k(){v("lastWasTag")&&!v("slurpAllLineEndings")&&y(),g("</li>"),p("slurpAllLineEndings")}function O(){a.push(!1),y(),g("<blockquote>")}function B(){a.pop(),y(),g("</blockquote>"),p("slurpAllLineEndings")}function $(){a[a.length-1]||(y(),g("<p>")),p("slurpAllLineEndings")}function Q(){a[a.length-1]?p("slurpAllLineEndings",!0):g("</p>")}function X(){y(),g("<pre><code"),p("fencesCount",0)}function oe(){const ge=m();g(' class="language-'+ge+'"')}function w(){const ge=v("fencesCount")||0;ge||(g(">"),p("slurpOneLineEnding",!0)),p("fencesCount",ge+1)}function P(){y(),g("<pre><code>")}function ce(){const ge=v("fencesCount");ge!==void 0&&ge<2&&u.tightStack.length>0&&!v("lastWasTag")&&L(),v("flowCodeSeenData")&&y(),g("</code></pre>"),ge!==void 0&&ge<2&&y(),p("flowCodeSeenData"),p("fencesCount"),p("slurpOneLineEnding")}function V(){s.push({image:!0}),r=void 0}function le(){s.push({})}function Y(ge){s[s.length-1].labelId=this.sliceSerialize(ge)}function Z(){s[s.length-1].label=m()}function I(ge){s[s.length-1].referenceId=this.sliceSerialize(ge)}function K(){_(),s[s.length-1].destination=""}function ee(){_(),p("ignoreEncode",!0)}function ae(){s[s.length-1].destination=m(),p("ignoreEncode")}function Me(){s[s.length-1].title=m()}function S(){let ge=s.length-1;const Ie=s[ge],Be=Ie.referenceId||Ie.labelId,We=Ie.destination===void 0?n[Bn(Be)]:Ie;for(r=!0;ge--;)if(s[ge].image){r=void 0;break}Ie.image?(g('<img src="'+as(We.destination,t.allowDangerousProtocol?void 0:J9)+'" alt="'),x(Ie.label),g('"')):g('<a href="'+as(We.destination,t.allowDangerousProtocol?void 0:Zp)+'"'),g(We.title?' title="'+We.title+'"':""),Ie.image?g(" />"):(g(">"),x(Ie.label),g("</a>")),s.pop()}function E(){_(),s.push({})}function N(ge){m(),s[s.length-1].labelId=this.sliceSerialize(ge)}function W(){_(),p("ignoreEncode",!0)}function re(){s[s.length-1].destination=m(),p("ignoreEncode")}function ne(){s[s.length-1].title=m()}function de(){const ge=s[s.length-1],Ie=Bn(ge.labelId);m(),Xp.call(n,Ie)||(n[Ie]=s[s.length-1]),s.pop()}function pe(){p("slurpAllLineEndings",!0)}function me(ge){v("headingRank")||(p("headingRank",this.sliceSerialize(ge).length),y(),g("<h"+v("headingRank")+">"))}function fe(){_(),p("slurpAllLineEndings")}function ke(){p("slurpAllLineEndings",!0)}function we(){g("</h"+v("headingRank")+">"),p("headingRank")}function Re(ge){p("headingRank",this.sliceSerialize(ge).charCodeAt(0)===61?1:2)}function Oe(){const ge=m();y(),g("<h"+v("headingRank")+">"),x(ge),g("</h"+v("headingRank")+">"),p("slurpAllLineEndings"),p("headingRank")}function Pe(ge){x(M(this.sliceSerialize(ge)))}function z(ge){if(!v("slurpAllLineEndings")){if(v("slurpOneLineEnding")){p("slurpOneLineEnding");return}if(v("inCodeText")){x(" ");return}x(M(this.sliceSerialize(ge)))}}function C(ge){x(M(this.sliceSerialize(ge))),p("flowCodeSeenData",!0)}function T(){g("<br />")}function q(){y(),j()}function ie(){p("ignoreEncode")}function j(){t.allowDangerousHtml&&p("ignoreEncode",!0)}function U(){g("<em>")}function te(){g("<strong>")}function se(){p("inCodeText",!0),g("<code>")}function ue(){p("inCodeText"),g("</code>")}function J(){g("</em>")}function he(){g("</strong>")}function ve(){y(),g("<hr />")}function _e(ge){p("characterReferenceType",ge.type)}function Ee(ge){let Ie=this.sliceSerialize(ge);Ie=v("characterReferenceType")?W9(Ie,v("characterReferenceType")==="characterReferenceMarkerNumeric"?10:16):ay(Ie),x(M(Ie)),p("characterReferenceType")}function be(ge){const Ie=this.sliceSerialize(ge);g('<a href="'+as(Ie,t.allowDangerousProtocol?void 0:Zp)+'">'),x(M(Ie)),g("</a>")}function Ae(ge){const Ie=this.sliceSerialize(ge);g('<a href="'+as("mailto:"+Ie)+'">'),x(M(Ie)),g("</a>")}}function gt(e,t,r,n){const i=n?n-1:Number.POSITIVE_INFINITY;let s=0;return a;function a(l){return ft(l)?(e.enter(r),o(l)):t(l)}function o(l){return ft(l)&&s++<i?(e.consume(l),o):(e.exit(r),t(l))}}const tS={tokenize:rS};function rS(e){const t=e.attempt(this.parser.constructs.contentInitial,n,i);let r;return t;function n(o){if(o===null){e.consume(o);return}return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),gt(e,t,"linePrefix")}function i(o){return e.enter("paragraph"),s(o)}function s(o){const l=e.enter("chunkText",{contentType:"text",previous:r});return r&&(r.next=l),r=l,a(o)}function a(o){if(o===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(o);return}return Ze(o)?(e.consume(o),e.exit("chunkText"),s):(e.consume(o),a)}}const nS={tokenize:iS},Qp={tokenize:sS};function iS(e){const t=this,r=[];let n=0,i,s,a;return o;function o(x){if(n<r.length){const L=r[n];return t.containerState=L[1],e.attempt(L[0].continuation,l,u)(x)}return u(x)}function l(x){if(n++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&g();const L=t.events.length;let y=L,M;for(;y--;)if(t.events[y][0]==="exit"&&t.events[y][1].type==="chunkFlow"){M=t.events[y][1].end;break}m(n);let F=L;for(;F<t.events.length;)t.events[F][1].end=Object.assign({},M),F++;return Nr(t.events,y+1,0,t.events.slice(L)),t.events.length=F,u(x)}return o(x)}function u(x){if(n===r.length){if(!i)return h(x);if(i.currentConstruct&&i.currentConstruct.concrete)return p(x);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Qp,f,c)(x)}function f(x){return i&&g(),m(n),h(x)}function c(x){return t.parser.lazy[t.now().line]=n!==r.length,a=t.now().offset,p(x)}function h(x){return t.containerState={},e.attempt(Qp,d,p)(x)}function d(x){return n++,r.push([t.currentConstruct,t.containerState]),h(x)}function p(x){if(x===null){i&&g(),m(0),e.consume(x);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),v(x)}function v(x){if(x===null){_(e.exit("chunkFlow"),!0),m(0),e.consume(x);return}return Ze(x)?(e.consume(x),_(e.exit("chunkFlow")),n=0,t.interrupt=void 0,o):(e.consume(x),v)}function _(x,L){const y=t.sliceStream(x);if(L&&y.push(null),x.previous=s,s&&(s.next=x),s=x,i.defineSkip(x.start),i.write(y),t.parser.lazy[x.start.line]){let M=i.events.length;for(;M--;)if(i.events[M][1].start.offset<a&&(!i.events[M][1].end||i.events[M][1].end.offset>a))return;const F=t.events.length;let D=F,H,b;for(;D--;)if(t.events[D][0]==="exit"&&t.events[D][1].type==="chunkFlow"){if(H){b=t.events[D][1].end;break}H=!0}for(m(n),M=F;M<t.events.length;)t.events[M][1].end=Object.assign({},b),M++;Nr(t.events,D+1,0,t.events.slice(F)),t.events.length=M}}function m(x){let L=r.length;for(;L-- >x;){const y=r[L];t.containerState=y[1],y[0].exit.call(t,e)}r.length=x}function g(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function sS(e,t,r){return gt(e,e.attempt(this.parser.constructs.document,t,r),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function yc(e){if(e===null||Ht(e)||ao(e))return 1;if(Md(e))return 2}function iu(e,t,r){const n=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!n.includes(s)&&(t=s(t,r),n.push(s))}return t}const mh={name:"attention",tokenize:aS,resolveAll:oS};function oS(e,t){let r=-1,n,i,s,a,o,l,u,f;for(;++r<e.length;)if(e[r][0]==="enter"&&e[r][1].type==="attentionSequence"&&e[r][1]._close){for(n=r;n--;)if(e[n][0]==="exit"&&e[n][1].type==="attentionSequence"&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[r][1]).charCodeAt(0)){if((e[n][1]._close||e[r][1]._open)&&(e[r][1].end.offset-e[r][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[r][1].end.offset-e[r][1].start.offset)%3))continue;l=e[n][1].end.offset-e[n][1].start.offset>1&&e[r][1].end.offset-e[r][1].start.offset>1?2:1;const c=Object.assign({},e[n][1].end),h=Object.assign({},e[r][1].start);Jp(c,-l),Jp(h,l),a={type:l>1?"strongSequence":"emphasisSequence",start:c,end:Object.assign({},e[n][1].end)},o={type:l>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[r][1].start),end:h},s={type:l>1?"strongText":"emphasisText",start:Object.assign({},e[n][1].end),end:Object.assign({},e[r][1].start)},i={type:l>1?"strong":"emphasis",start:Object.assign({},a.start),end:Object.assign({},o.end)},e[n][1].end=Object.assign({},a.start),e[r][1].start=Object.assign({},o.end),u=[],e[n][1].end.offset-e[n][1].start.offset&&(u=mr(u,[["enter",e[n][1],t],["exit",e[n][1],t]])),u=mr(u,[["enter",i,t],["enter",a,t],["exit",a,t],["enter",s,t]]),u=mr(u,iu(t.parser.constructs.insideSpan.null,e.slice(n+1,r),t)),u=mr(u,[["exit",s,t],["enter",o,t],["exit",o,t],["exit",i,t]]),e[r][1].end.offset-e[r][1].start.offset?(f=2,u=mr(u,[["enter",e[r][1],t],["exit",e[r][1],t]])):f=0,Nr(e,n-1,r-n+3,u),r=n+u.length-f-2;break}}for(r=-1;++r<e.length;)e[r][1].type==="attentionSequence"&&(e[r][1].type="data");return e}function aS(e,t){const r=this.parser.constructs.attentionMarkers.null,n=this.previous,i=yc(n);let s;return a;function a(l){return s=l,e.enter("attentionSequence"),o(l)}function o(l){if(l===s)return e.consume(l),o;const u=e.exit("attentionSequence"),f=yc(l),c=!f||f===2&&i||r.includes(l),h=!i||i===2&&f||r.includes(n);return u._open=!!(s===42?c:c&&(i||!h)),u._close=!!(s===42?h:h&&(f||!c)),t(l)}}function Jp(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const lS={name:"autolink",tokenize:cS};function cS(e,t,r){let n=0;return i;function i(d){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(d),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(d){return Sr(d)?(e.consume(d),a):u(d)}function a(d){return d===43||d===45||d===46||gr(d)?(n=1,o(d)):u(d)}function o(d){return d===58?(e.consume(d),n=0,l):(d===43||d===45||d===46||gr(d))&&n++<32?(e.consume(d),o):(n=0,u(d))}function l(d){return d===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(d),e.exit("autolinkMarker"),e.exit("autolink"),t):d===null||d===32||d===60||vc(d)?r(d):(e.consume(d),l)}function u(d){return d===64?(e.consume(d),f):G9(d)?(e.consume(d),u):r(d)}function f(d){return gr(d)?c(d):r(d)}function c(d){return d===46?(e.consume(d),n=0,f):d===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(d),e.exit("autolinkMarker"),e.exit("autolink"),t):h(d)}function h(d){if((d===45||gr(d))&&n++<63){const p=d===45?h:c;return e.consume(d),p}return r(d)}}const Pa={tokenize:uS,partial:!0};function uS(e,t,r){return n;function n(s){return ft(s)?gt(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||Ze(s)?t(s):r(s)}}const fy={name:"blockQuote",tokenize:fS,continuation:{tokenize:hS},exit:dS};function fS(e,t,r){const n=this;return i;function i(a){if(a===62){const o=n.containerState;return o.open||(e.enter("blockQuote",{_container:!0}),o.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(a),e.exit("blockQuoteMarker"),s}return r(a)}function s(a){return ft(a)?(e.enter("blockQuotePrefixWhitespace"),e.consume(a),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(a))}}function hS(e,t,r){const n=this;return i;function i(a){return ft(a)?gt(e,s,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):s(a)}function s(a){return e.attempt(fy,t,r)(a)}}function dS(e){e.exit("blockQuote")}const hy={name:"characterEscape",tokenize:pS};function pS(e,t,r){return n;function n(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return Z9(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):r(s)}}const dy={name:"characterReference",tokenize:mS};function mS(e,t,r){const n=this;let i=0,s,a;return o;function o(c){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(c),e.exit("characterReferenceMarker"),l}function l(c){return c===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(c),e.exit("characterReferenceMarkerNumeric"),u):(e.enter("characterReferenceValue"),s=31,a=gr,f(c))}function u(c){return c===88||c===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(c),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,a=X9,f):(e.enter("characterReferenceValue"),s=7,a=ph,f(c))}function f(c){if(c===59&&i){const h=e.exit("characterReferenceValue");return a===gr&&!ay(n.sliceSerialize(h))?r(c):(e.enter("characterReferenceMarker"),e.consume(c),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return a(c)&&i++<s?(e.consume(c),f):r(c)}}const em={tokenize:gS,partial:!0},tm={name:"codeFenced",tokenize:_S,concrete:!0};function _S(e,t,r){const n=this,i={tokenize:y,partial:!0};let s=0,a=0,o;return l;function l(M){return u(M)}function u(M){const F=n.events[n.events.length-1];return s=F&&F[1].type==="linePrefix"?F[2].sliceSerialize(F[1],!0).length:0,o=M,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),f(M)}function f(M){return M===o?(a++,e.consume(M),f):a<3?r(M):(e.exit("codeFencedFenceSequence"),ft(M)?gt(e,c,"whitespace")(M):c(M))}function c(M){return M===null||Ze(M)?(e.exit("codeFencedFence"),n.interrupt?t(M):e.check(em,v,L)(M)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),h(M))}function h(M){return M===null||Ze(M)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),c(M)):ft(M)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),gt(e,d,"whitespace")(M)):M===96&&M===o?r(M):(e.consume(M),h)}function d(M){return M===null||Ze(M)?c(M):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(M))}function p(M){return M===null||Ze(M)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),c(M)):M===96&&M===o?r(M):(e.consume(M),p)}function v(M){return e.attempt(i,L,_)(M)}function _(M){return e.enter("lineEnding"),e.consume(M),e.exit("lineEnding"),m}function m(M){return s>0&&ft(M)?gt(e,g,"linePrefix",s+1)(M):g(M)}function g(M){return M===null||Ze(M)?e.check(em,v,L)(M):(e.enter("codeFlowValue"),x(M))}function x(M){return M===null||Ze(M)?(e.exit("codeFlowValue"),g(M)):(e.consume(M),x)}function L(M){return e.exit("codeFenced"),t(M)}function y(M,F,D){let H=0;return b;function b(B){return M.enter("lineEnding"),M.consume(B),M.exit("lineEnding"),R}function R(B){return M.enter("codeFencedFence"),ft(B)?gt(M,A,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(B):A(B)}function A(B){return B===o?(M.enter("codeFencedFenceSequence"),k(B)):D(B)}function k(B){return B===o?(H++,M.consume(B),k):H>=a?(M.exit("codeFencedFenceSequence"),ft(B)?gt(M,O,"whitespace")(B):O(B)):D(B)}function O(B){return B===null||Ze(B)?(M.exit("codeFencedFence"),F(B)):D(B)}}}function gS(e,t,r){const n=this;return i;function i(a){return a===null?r(a):(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),s)}function s(a){return n.parser.lazy[n.now().line]?r(a):t(a)}}const pf={name:"codeIndented",tokenize:yS},vS={tokenize:bS,partial:!0};function yS(e,t,r){const n=this;return i;function i(u){return e.enter("codeIndented"),gt(e,s,"linePrefix",5)(u)}function s(u){const f=n.events[n.events.length-1];return f&&f[1].type==="linePrefix"&&f[2].sliceSerialize(f[1],!0).length>=4?a(u):r(u)}function a(u){return u===null?l(u):Ze(u)?e.attempt(vS,a,l)(u):(e.enter("codeFlowValue"),o(u))}function o(u){return u===null||Ze(u)?(e.exit("codeFlowValue"),a(u)):(e.consume(u),o)}function l(u){return e.exit("codeIndented"),t(u)}}function bS(e,t,r){const n=this;return i;function i(a){return n.parser.lazy[n.now().line]?r(a):Ze(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),i):gt(e,s,"linePrefix",5)(a)}function s(a){const o=n.events[n.events.length-1];return o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?t(a):Ze(a)?i(a):r(a)}}const wS={name:"codeText",tokenize:xS,resolve:SS,previous:CS};function SS(e){let t=e.length-4,r=3,n,i;if((e[r][1].type==="lineEnding"||e[r][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(n=r;++n<t;)if(e[n][1].type==="codeTextData"){e[r][1].type="codeTextPadding",e[t][1].type="codeTextPadding",r+=2,t-=2;break}}for(n=r-1,t++;++n<=t;)i===void 0?n!==t&&e[n][1].type!=="lineEnding"&&(i=n):(n===t||e[n][1].type==="lineEnding")&&(e[i][1].type="codeTextData",n!==i+2&&(e[i][1].end=e[n-1][1].end,e.splice(i+2,n-i-2),t-=n-i-2,n=i+2),i=void 0);return e}function CS(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function xS(e,t,r){let n=0,i,s;return a;function a(c){return e.enter("codeText"),e.enter("codeTextSequence"),o(c)}function o(c){return c===96?(e.consume(c),n++,o):(e.exit("codeTextSequence"),l(c))}function l(c){return c===null?r(c):c===32?(e.enter("space"),e.consume(c),e.exit("space"),l):c===96?(s=e.enter("codeTextSequence"),i=0,f(c)):Ze(c)?(e.enter("lineEnding"),e.consume(c),e.exit("lineEnding"),l):(e.enter("codeTextData"),u(c))}function u(c){return c===null||c===32||c===96||Ze(c)?(e.exit("codeTextData"),l(c)):(e.consume(c),u)}function f(c){return c===96?(e.consume(c),i++,f):i===n?(e.exit("codeTextSequence"),e.exit("codeText"),t(c)):(s.type="codeTextData",u(c))}}function py(e){const t={};let r=-1,n,i,s,a,o,l,u;for(;++r<e.length;){for(;r in t;)r=t[r];if(n=e[r],r&&n[1].type==="chunkFlow"&&e[r-1][1].type==="listItemPrefix"&&(l=n[1]._tokenizer.events,s=0,s<l.length&&l[s][1].type==="lineEndingBlank"&&(s+=2),s<l.length&&l[s][1].type==="content"))for(;++s<l.length&&l[s][1].type!=="content";)l[s][1].type==="chunkText"&&(l[s][1]._isInFirstContentOfListItem=!0,s++);if(n[0]==="enter")n[1].contentType&&(Object.assign(t,ES(e,r)),r=t[r],u=!0);else if(n[1]._container){for(s=r,i=void 0;s--&&(a=e[s],a[1].type==="lineEnding"||a[1].type==="lineEndingBlank");)a[0]==="enter"&&(i&&(e[i][1].type="lineEndingBlank"),a[1].type="lineEnding",i=s);i&&(n[1].end=Object.assign({},e[i][1].start),o=e.slice(i,r),o.unshift(n),Nr(e,i,r-i+1,o))}}return!u}function ES(e,t){const r=e[t][1],n=e[t][2];let i=t-1;const s=[],a=r._tokenizer||n.parser[r.contentType](r.start),o=a.events,l=[],u={};let f,c,h=-1,d=r,p=0,v=0;const _=[v];for(;d;){for(;e[++i][1]!==d;);s.push(i),d._tokenizer||(f=n.sliceStream(d),d.next||f.push(null),c&&a.defineSkip(d.start),d._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(f),d._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),c=d,d=d.next}for(d=r;++h<o.length;)o[h][0]==="exit"&&o[h-1][0]==="enter"&&o[h][1].type===o[h-1][1].type&&o[h][1].start.line!==o[h][1].end.line&&(v=h+1,_.push(v),d._tokenizer=void 0,d.previous=void 0,d=d.next);for(a.events=[],d?(d._tokenizer=void 0,d.previous=void 0):_.pop(),h=_.length;h--;){const m=o.slice(_[h],_[h+1]),g=s.pop();l.unshift([g,g+m.length-1]),Nr(e,g,2,m)}for(h=-1;++h<l.length;)u[p+l[h][0]]=p+l[h][1],p+=l[h][1]-l[h][0]-1;return u}const AS={tokenize:TS,resolve:kS},RS={tokenize:MS,partial:!0};function kS(e){return py(e),e}function TS(e,t){let r;return n;function n(o){return e.enter("content"),r=e.enter("chunkContent",{contentType:"content"}),i(o)}function i(o){return o===null?s(o):Ze(o)?e.check(RS,a,s)(o):(e.consume(o),i)}function s(o){return e.exit("chunkContent"),e.exit("content"),t(o)}function a(o){return e.consume(o),e.exit("chunkContent"),r.next=e.enter("chunkContent",{contentType:"content",previous:r}),r=r.next,i}}function MS(e,t,r){const n=this;return i;function i(a){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),gt(e,s,"linePrefix")}function s(a){if(a===null||Ze(a))return r(a);const o=n.events[n.events.length-1];return!n.parser.constructs.disable.null.includes("codeIndented")&&o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?t(a):e.interrupt(n.parser.constructs.flow,r,t)(a)}}function my(e,t,r,n,i,s,a,o,l){const u=l||Number.POSITIVE_INFINITY;let f=0;return c;function c(m){return m===60?(e.enter(n),e.enter(i),e.enter(s),e.consume(m),e.exit(s),h):m===null||m===32||m===41||vc(m)?r(m):(e.enter(n),e.enter(a),e.enter(o),e.enter("chunkString",{contentType:"string"}),v(m))}function h(m){return m===62?(e.enter(s),e.consume(m),e.exit(s),e.exit(i),e.exit(n),t):(e.enter(o),e.enter("chunkString",{contentType:"string"}),d(m))}function d(m){return m===62?(e.exit("chunkString"),e.exit(o),h(m)):m===null||m===60||Ze(m)?r(m):(e.consume(m),m===92?p:d)}function p(m){return m===60||m===62||m===92?(e.consume(m),d):d(m)}function v(m){return!f&&(m===null||m===41||Ht(m))?(e.exit("chunkString"),e.exit(o),e.exit(a),e.exit(n),t(m)):f<u&&m===40?(e.consume(m),f++,v):m===41?(e.consume(m),f--,v):m===null||m===32||m===40||vc(m)?r(m):(e.consume(m),m===92?_:v)}function _(m){return m===40||m===41||m===92?(e.consume(m),v):v(m)}}function _y(e,t,r,n,i,s){const a=this;let o=0,l;return u;function u(d){return e.enter(n),e.enter(i),e.consume(d),e.exit(i),e.enter(s),f}function f(d){return o>999||d===null||d===91||d===93&&!l||d===94&&!o&&"_hiddenFootnoteSupport"in a.parser.constructs?r(d):d===93?(e.exit(s),e.enter(i),e.consume(d),e.exit(i),e.exit(n),t):Ze(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),f):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===null||d===91||d===93||Ze(d)||o++>999?(e.exit("chunkString"),f(d)):(e.consume(d),l||(l=!ft(d)),d===92?h:c)}function h(d){return d===91||d===92||d===93?(e.consume(d),o++,c):c(d)}}function gy(e,t,r,n,i,s){let a;return o;function o(h){return h===34||h===39||h===40?(e.enter(n),e.enter(i),e.consume(h),e.exit(i),a=h===40?41:h,l):r(h)}function l(h){return h===a?(e.enter(i),e.consume(h),e.exit(i),e.exit(n),t):(e.enter(s),u(h))}function u(h){return h===a?(e.exit(s),l(a)):h===null?r(h):Ze(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),gt(e,u,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===a||h===null||Ze(h)?(e.exit("chunkString"),u(h)):(e.consume(h),h===92?c:f)}function c(h){return h===a||h===92?(e.consume(h),f):f(h)}}function oa(e,t){let r;return n;function n(i){return Ze(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),r=!0,n):ft(i)?gt(e,n,r?"linePrefix":"lineSuffix")(i):t(i)}}const LS={name:"definition",tokenize:OS},BS={tokenize:IS,partial:!0};function OS(e,t,r){const n=this;let i;return s;function s(d){return e.enter("definition"),a(d)}function a(d){return _y.call(n,e,o,r,"definitionLabel","definitionLabelMarker","definitionLabelString")(d)}function o(d){return i=Bn(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)),d===58?(e.enter("definitionMarker"),e.consume(d),e.exit("definitionMarker"),l):r(d)}function l(d){return Ht(d)?oa(e,u)(d):u(d)}function u(d){return my(e,f,r,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(d)}function f(d){return e.attempt(BS,c,c)(d)}function c(d){return ft(d)?gt(e,h,"whitespace")(d):h(d)}function h(d){return d===null||Ze(d)?(e.exit("definition"),n.parser.defined.push(i),t(d)):r(d)}}function IS(e,t,r){return n;function n(o){return Ht(o)?oa(e,i)(o):r(o)}function i(o){return gy(e,s,r,"definitionTitle","definitionTitleMarker","definitionTitleString")(o)}function s(o){return ft(o)?gt(e,a,"whitespace")(o):a(o)}function a(o){return o===null||Ze(o)?t(o):r(o)}}const FS={name:"hardBreakEscape",tokenize:DS};function DS(e,t,r){return n;function n(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return Ze(s)?(e.exit("hardBreakEscape"),t(s)):r(s)}}const HS={name:"headingAtx",tokenize:jS,resolve:PS};function PS(e,t){let r=e.length-2,n=3,i,s;return e[n][1].type==="whitespace"&&(n+=2),r-2>n&&e[r][1].type==="whitespace"&&(r-=2),e[r][1].type==="atxHeadingSequence"&&(n===r-1||r-4>n&&e[r-2][1].type==="whitespace")&&(r-=n+1===r?2:4),r>n&&(i={type:"atxHeadingText",start:e[n][1].start,end:e[r][1].end},s={type:"chunkText",start:e[n][1].start,end:e[r][1].end,contentType:"text"},Nr(e,n,r-n+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function jS(e,t,r){let n=0;return i;function i(f){return e.enter("atxHeading"),s(f)}function s(f){return e.enter("atxHeadingSequence"),a(f)}function a(f){return f===35&&n++<6?(e.consume(f),a):f===null||Ht(f)?(e.exit("atxHeadingSequence"),o(f)):r(f)}function o(f){return f===35?(e.enter("atxHeadingSequence"),l(f)):f===null||Ze(f)?(e.exit("atxHeading"),t(f)):ft(f)?gt(e,o,"whitespace")(f):(e.enter("atxHeadingText"),u(f))}function l(f){return f===35?(e.consume(f),l):(e.exit("atxHeadingSequence"),o(f))}function u(f){return f===null||f===35||Ht(f)?(e.exit("atxHeadingText"),o(f)):(e.consume(f),u)}}const NS=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],rm=["pre","script","style","textarea"],US={name:"htmlFlow",tokenize:$S,resolveTo:VS,concrete:!0},qS={tokenize:KS,partial:!0},zS={tokenize:WS,partial:!0};function VS(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function $S(e,t,r){const n=this;let i,s,a,o,l;return u;function u(V){return f(V)}function f(V){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(V),c}function c(V){return V===33?(e.consume(V),h):V===47?(e.consume(V),s=!0,v):V===63?(e.consume(V),i=3,n.interrupt?t:w):Sr(V)?(e.consume(V),a=String.fromCharCode(V),_):r(V)}function h(V){return V===45?(e.consume(V),i=2,d):V===91?(e.consume(V),i=5,o=0,p):Sr(V)?(e.consume(V),i=4,n.interrupt?t:w):r(V)}function d(V){return V===45?(e.consume(V),n.interrupt?t:w):r(V)}function p(V){const le="CDATA[";return V===le.charCodeAt(o++)?(e.consume(V),o===le.length?n.interrupt?t:A:p):r(V)}function v(V){return Sr(V)?(e.consume(V),a=String.fromCharCode(V),_):r(V)}function _(V){if(V===null||V===47||V===62||Ht(V)){const le=V===47,Y=a.toLowerCase();return!le&&!s&&rm.includes(Y)?(i=1,n.interrupt?t(V):A(V)):NS.includes(a.toLowerCase())?(i=6,le?(e.consume(V),m):n.interrupt?t(V):A(V)):(i=7,n.interrupt&&!n.parser.lazy[n.now().line]?r(V):s?g(V):x(V))}return V===45||gr(V)?(e.consume(V),a+=String.fromCharCode(V),_):r(V)}function m(V){return V===62?(e.consume(V),n.interrupt?t:A):r(V)}function g(V){return ft(V)?(e.consume(V),g):b(V)}function x(V){return V===47?(e.consume(V),b):V===58||V===95||Sr(V)?(e.consume(V),L):ft(V)?(e.consume(V),x):b(V)}function L(V){return V===45||V===46||V===58||V===95||gr(V)?(e.consume(V),L):y(V)}function y(V){return V===61?(e.consume(V),M):ft(V)?(e.consume(V),y):x(V)}function M(V){return V===null||V===60||V===61||V===62||V===96?r(V):V===34||V===39?(e.consume(V),l=V,F):ft(V)?(e.consume(V),M):D(V)}function F(V){return V===l?(e.consume(V),l=null,H):V===null||Ze(V)?r(V):(e.consume(V),F)}function D(V){return V===null||V===34||V===39||V===47||V===60||V===61||V===62||V===96||Ht(V)?y(V):(e.consume(V),D)}function H(V){return V===47||V===62||ft(V)?x(V):r(V)}function b(V){return V===62?(e.consume(V),R):r(V)}function R(V){return V===null||Ze(V)?A(V):ft(V)?(e.consume(V),R):r(V)}function A(V){return V===45&&i===2?(e.consume(V),$):V===60&&i===1?(e.consume(V),Q):V===62&&i===4?(e.consume(V),P):V===63&&i===3?(e.consume(V),w):V===93&&i===5?(e.consume(V),oe):Ze(V)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(qS,ce,k)(V)):V===null||Ze(V)?(e.exit("htmlFlowData"),k(V)):(e.consume(V),A)}function k(V){return e.check(zS,O,ce)(V)}function O(V){return e.enter("lineEnding"),e.consume(V),e.exit("lineEnding"),B}function B(V){return V===null||Ze(V)?k(V):(e.enter("htmlFlowData"),A(V))}function $(V){return V===45?(e.consume(V),w):A(V)}function Q(V){return V===47?(e.consume(V),a="",X):A(V)}function X(V){if(V===62){const le=a.toLowerCase();return rm.includes(le)?(e.consume(V),P):A(V)}return Sr(V)&&a.length<8?(e.consume(V),a+=String.fromCharCode(V),X):A(V)}function oe(V){return V===93?(e.consume(V),w):A(V)}function w(V){return V===62?(e.consume(V),P):V===45&&i===2?(e.consume(V),w):A(V)}function P(V){return V===null||Ze(V)?(e.exit("htmlFlowData"),ce(V)):(e.consume(V),P)}function ce(V){return e.exit("htmlFlow"),t(V)}}function WS(e,t,r){const n=this;return i;function i(a){return Ze(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),s):r(a)}function s(a){return n.parser.lazy[n.now().line]?r(a):t(a)}}function KS(e,t,r){return n;function n(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(Pa,t,r)}}const YS={name:"htmlText",tokenize:GS};function GS(e,t,r){const n=this;let i,s,a;return o;function o(w){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(w),l}function l(w){return w===33?(e.consume(w),u):w===47?(e.consume(w),y):w===63?(e.consume(w),x):Sr(w)?(e.consume(w),D):r(w)}function u(w){return w===45?(e.consume(w),f):w===91?(e.consume(w),s=0,p):Sr(w)?(e.consume(w),g):r(w)}function f(w){return w===45?(e.consume(w),d):r(w)}function c(w){return w===null?r(w):w===45?(e.consume(w),h):Ze(w)?(a=c,Q(w)):(e.consume(w),c)}function h(w){return w===45?(e.consume(w),d):c(w)}function d(w){return w===62?$(w):w===45?h(w):c(w)}function p(w){const P="CDATA[";return w===P.charCodeAt(s++)?(e.consume(w),s===P.length?v:p):r(w)}function v(w){return w===null?r(w):w===93?(e.consume(w),_):Ze(w)?(a=v,Q(w)):(e.consume(w),v)}function _(w){return w===93?(e.consume(w),m):v(w)}function m(w){return w===62?$(w):w===93?(e.consume(w),m):v(w)}function g(w){return w===null||w===62?$(w):Ze(w)?(a=g,Q(w)):(e.consume(w),g)}function x(w){return w===null?r(w):w===63?(e.consume(w),L):Ze(w)?(a=x,Q(w)):(e.consume(w),x)}function L(w){return w===62?$(w):x(w)}function y(w){return Sr(w)?(e.consume(w),M):r(w)}function M(w){return w===45||gr(w)?(e.consume(w),M):F(w)}function F(w){return Ze(w)?(a=F,Q(w)):ft(w)?(e.consume(w),F):$(w)}function D(w){return w===45||gr(w)?(e.consume(w),D):w===47||w===62||Ht(w)?H(w):r(w)}function H(w){return w===47?(e.consume(w),$):w===58||w===95||Sr(w)?(e.consume(w),b):Ze(w)?(a=H,Q(w)):ft(w)?(e.consume(w),H):$(w)}function b(w){return w===45||w===46||w===58||w===95||gr(w)?(e.consume(w),b):R(w)}function R(w){return w===61?(e.consume(w),A):Ze(w)?(a=R,Q(w)):ft(w)?(e.consume(w),R):H(w)}function A(w){return w===null||w===60||w===61||w===62||w===96?r(w):w===34||w===39?(e.consume(w),i=w,k):Ze(w)?(a=A,Q(w)):ft(w)?(e.consume(w),A):(e.consume(w),O)}function k(w){return w===i?(e.consume(w),i=void 0,B):w===null?r(w):Ze(w)?(a=k,Q(w)):(e.consume(w),k)}function O(w){return w===null||w===34||w===39||w===60||w===61||w===96?r(w):w===47||w===62||Ht(w)?H(w):(e.consume(w),O)}function B(w){return w===47||w===62||Ht(w)?H(w):r(w)}function $(w){return w===62?(e.consume(w),e.exit("htmlTextData"),e.exit("htmlText"),t):r(w)}function Q(w){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(w),e.exit("lineEnding"),X}function X(w){return ft(w)?gt(e,oe,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(w):oe(w)}function oe(w){return e.enter("htmlTextData"),a(w)}}const Ld={name:"labelEnd",tokenize:tC,resolveTo:eC,resolveAll:JS},XS={tokenize:rC},ZS={tokenize:nC},QS={tokenize:iC};function JS(e){let t=-1;for(;++t<e.length;){const r=e[t][1];(r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd")&&(e.splice(t+1,r.type==="labelImage"?4:2),r.type="data",t++)}return e}function eC(e,t){let r=e.length,n=0,i,s,a,o;for(;r--;)if(i=e[r][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[r][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(a){if(e[r][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=r,i.type!=="labelLink")){n=2;break}}else i.type==="labelEnd"&&(a=r);const l={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},u={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[a][1].end)},f={type:"labelText",start:Object.assign({},e[s+n+2][1].end),end:Object.assign({},e[a-2][1].start)};return o=[["enter",l,t],["enter",u,t]],o=mr(o,e.slice(s+1,s+n+3)),o=mr(o,[["enter",f,t]]),o=mr(o,iu(t.parser.constructs.insideSpan.null,e.slice(s+n+4,a-3),t)),o=mr(o,[["exit",f,t],e[a-2],e[a-1],["exit",u,t]]),o=mr(o,e.slice(a+1)),o=mr(o,[["exit",l,t]]),Nr(e,s,e.length,o),e}function tC(e,t,r){const n=this;let i=n.events.length,s,a;for(;i--;)if((n.events[i][1].type==="labelImage"||n.events[i][1].type==="labelLink")&&!n.events[i][1]._balanced){s=n.events[i][1];break}return o;function o(h){return s?s._inactive?c(h):(a=n.parser.defined.includes(Bn(n.sliceSerialize({start:s.end,end:n.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(h),e.exit("labelMarker"),e.exit("labelEnd"),l):r(h)}function l(h){return h===40?e.attempt(XS,f,a?f:c)(h):h===91?e.attempt(ZS,f,a?u:c)(h):a?f(h):c(h)}function u(h){return e.attempt(QS,f,c)(h)}function f(h){return t(h)}function c(h){return s._balanced=!0,r(h)}}function rC(e,t,r){return n;function n(c){return e.enter("resource"),e.enter("resourceMarker"),e.consume(c),e.exit("resourceMarker"),i}function i(c){return Ht(c)?oa(e,s)(c):s(c)}function s(c){return c===41?f(c):my(e,a,o,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(c)}function a(c){return Ht(c)?oa(e,l)(c):f(c)}function o(c){return r(c)}function l(c){return c===34||c===39||c===40?gy(e,u,r,"resourceTitle","resourceTitleMarker","resourceTitleString")(c):f(c)}function u(c){return Ht(c)?oa(e,f)(c):f(c)}function f(c){return c===41?(e.enter("resourceMarker"),e.consume(c),e.exit("resourceMarker"),e.exit("resource"),t):r(c)}}function nC(e,t,r){const n=this;return i;function i(o){return _y.call(n,e,s,a,"reference","referenceMarker","referenceString")(o)}function s(o){return n.parser.defined.includes(Bn(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)))?t(o):r(o)}function a(o){return r(o)}}function iC(e,t,r){return n;function n(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):r(s)}}const sC={name:"labelStartImage",tokenize:oC,resolveAll:Ld.resolveAll};function oC(e,t,r){const n=this;return i;function i(o){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(o),e.exit("labelImageMarker"),s}function s(o){return o===91?(e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelImage"),a):r(o)}function a(o){return o===94&&"_hiddenFootnoteSupport"in n.parser.constructs?r(o):t(o)}}const aC={name:"labelStartLink",tokenize:lC,resolveAll:Ld.resolveAll};function lC(e,t,r){const n=this;return i;function i(a){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelLink"),s}function s(a){return a===94&&"_hiddenFootnoteSupport"in n.parser.constructs?r(a):t(a)}}const mf={name:"lineEnding",tokenize:cC};function cC(e,t){return r;function r(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),gt(e,t,"linePrefix")}}const Xl={name:"thematicBreak",tokenize:uC};function uC(e,t,r){let n=0,i;return s;function s(u){return e.enter("thematicBreak"),a(u)}function a(u){return i=u,o(u)}function o(u){return u===i?(e.enter("thematicBreakSequence"),l(u)):n>=3&&(u===null||Ze(u))?(e.exit("thematicBreak"),t(u)):r(u)}function l(u){return u===i?(e.consume(u),n++,l):(e.exit("thematicBreakSequence"),ft(u)?gt(e,o,"whitespace")(u):o(u))}}const Mr={name:"list",tokenize:dC,continuation:{tokenize:pC},exit:_C},fC={tokenize:gC,partial:!0},hC={tokenize:mC,partial:!0};function dC(e,t,r){const n=this,i=n.events[n.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,a=0;return o;function o(d){const p=n.containerState.type||(d===42||d===43||d===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!n.containerState.marker||d===n.containerState.marker:ph(d)){if(n.containerState.type||(n.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),d===42||d===45?e.check(Xl,r,u)(d):u(d);if(!n.interrupt||d===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),l(d)}return r(d)}function l(d){return ph(d)&&++a<10?(e.consume(d),l):(!n.interrupt||a<2)&&(n.containerState.marker?d===n.containerState.marker:d===41||d===46)?(e.exit("listItemValue"),u(d)):r(d)}function u(d){return e.enter("listItemMarker"),e.consume(d),e.exit("listItemMarker"),n.containerState.marker=n.containerState.marker||d,e.check(Pa,n.interrupt?r:f,e.attempt(fC,h,c))}function f(d){return n.containerState.initialBlankLine=!0,s++,h(d)}function c(d){return ft(d)?(e.enter("listItemPrefixWhitespace"),e.consume(d),e.exit("listItemPrefixWhitespace"),h):r(d)}function h(d){return n.containerState.size=s+n.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(d)}}function pC(e,t,r){const n=this;return n.containerState._closeFlow=void 0,e.check(Pa,i,s);function i(o){return n.containerState.furtherBlankLines=n.containerState.furtherBlankLines||n.containerState.initialBlankLine,gt(e,t,"listItemIndent",n.containerState.size+1)(o)}function s(o){return n.containerState.furtherBlankLines||!ft(o)?(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,a(o)):(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,e.attempt(hC,t,a)(o))}function a(o){return n.containerState._closeFlow=!0,n.interrupt=void 0,gt(e,e.attempt(Mr,t,r),"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o)}}function mC(e,t,r){const n=this;return gt(e,i,"listItemIndent",n.containerState.size+1);function i(s){const a=n.events[n.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===n.containerState.size?t(s):r(s)}}function _C(e){e.exit(this.containerState.type)}function gC(e,t,r){const n=this;return gt(e,i,"listItemPrefixWhitespace",n.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const a=n.events[n.events.length-1];return!ft(s)&&a&&a[1].type==="listItemPrefixWhitespace"?t(s):r(s)}}const nm={name:"setextUnderline",tokenize:yC,resolveTo:vC};function vC(e,t){let r=e.length,n,i,s;for(;r--;)if(e[r][0]==="enter"){if(e[r][1].type==="content"){n=r;break}e[r][1].type==="paragraph"&&(i=r)}else e[r][1].type==="content"&&e.splice(r,1),!s&&e[r][1].type==="definition"&&(s=r);const a={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",a,t]),e.splice(s+1,0,["exit",e[n][1],t]),e[n][1].end=Object.assign({},e[s][1].end)):e[n][1]=a,e.push(["exit",a,t]),e}function yC(e,t,r){const n=this;let i;return s;function s(u){let f=n.events.length,c;for(;f--;)if(n.events[f][1].type!=="lineEnding"&&n.events[f][1].type!=="linePrefix"&&n.events[f][1].type!=="content"){c=n.events[f][1].type==="paragraph";break}return!n.parser.lazy[n.now().line]&&(n.interrupt||c)?(e.enter("setextHeadingLine"),i=u,a(u)):r(u)}function a(u){return e.enter("setextHeadingLineSequence"),o(u)}function o(u){return u===i?(e.consume(u),o):(e.exit("setextHeadingLineSequence"),ft(u)?gt(e,l,"lineSuffix")(u):l(u))}function l(u){return u===null||Ze(u)?(e.exit("setextHeadingLine"),t(u)):r(u)}}const bC={tokenize:wC};function wC(e){const t=this,r=e.attempt(Pa,n,e.attempt(this.parser.constructs.flowInitial,i,gt(e,e.attempt(this.parser.constructs.flow,i,e.attempt(AS,i)),"linePrefix")));return r;function n(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,r}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,r}}const SC={resolveAll:yy()},CC=vy("string"),xC=vy("text");function vy(e){return{tokenize:t,resolveAll:yy(e==="text"?EC:void 0)};function t(r){const n=this,i=this.parser.constructs[e],s=r.attempt(i,a,o);return a;function a(f){return u(f)?s(f):o(f)}function o(f){if(f===null){r.consume(f);return}return r.enter("data"),r.consume(f),l}function l(f){return u(f)?(r.exit("data"),s(f)):(r.consume(f),l)}function u(f){if(f===null)return!0;const c=i[f];let h=-1;if(c)for(;++h<c.length;){const d=c[h];if(!d.previous||d.previous.call(n,n.previous))return!0}return!1}}}function yy(e){return t;function t(r,n){let i=-1,s;for(;++i<=r.length;)s===void 0?r[i]&&r[i][1].type==="data"&&(s=i,i++):(!r[i]||r[i][1].type!=="data")&&(i!==s+2&&(r[s][1].end=r[i-1][1].end,r.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(r,n):r}}function EC(e,t){let r=0;for(;++r<=e.length;)if((r===e.length||e[r][1].type==="lineEnding")&&e[r-1][1].type==="data"){const n=e[r-1][1],i=t.sliceStream(n);let s=i.length,a=-1,o=0,l;for(;s--;){const u=i[s];if(typeof u=="string"){for(a=u.length;u.charCodeAt(a-1)===32;)o++,a--;if(a)break;a=-1}else if(u===-2)l=!0,o++;else if(u!==-1){s++;break}}if(o){const u={type:r===e.length||l||o<2?"lineSuffix":"hardBreakTrailing",start:{line:n.end.line,column:n.end.column-o,offset:n.end.offset-o,_index:n.start._index+s,_bufferIndex:s?a:n.start._bufferIndex+a},end:Object.assign({},n.end)};n.end=Object.assign({},u.start),n.start.offset===n.end.offset?Object.assign(n,u):(e.splice(r,0,["enter",u,t],["exit",u,t]),r+=2)}r++}return e}function AC(e,t,r){let n=Object.assign(r?Object.assign({},r):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let a=[],o=[];const l={consume:g,enter:x,exit:L,attempt:F(y),check:F(M),interrupt:F(M,{interrupt:!0})},u={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:d,sliceSerialize:h,now:p,defineSkip:v,write:c};let f=t.tokenize.call(u,l);return t.resolveAll&&s.push(t),u;function c(R){return a=mr(a,R),_(),a[a.length-1]!==null?[]:(D(t,0),u.events=iu(s,u.events,u),u.events)}function h(R,A){return kC(d(R),A)}function d(R){return RC(a,R)}function p(){const{line:R,column:A,offset:k,_index:O,_bufferIndex:B}=n;return{line:R,column:A,offset:k,_index:O,_bufferIndex:B}}function v(R){i[R.line]=R.column,b()}function _(){let R;for(;n._index<a.length;){const A=a[n._index];if(typeof A=="string")for(R=n._index,n._bufferIndex<0&&(n._bufferIndex=0);n._index===R&&n._bufferIndex<A.length;)m(A.charCodeAt(n._bufferIndex));else m(A)}}function m(R){f=f(R)}function g(R){Ze(R)?(n.line++,n.column=1,n.offset+=R===-3?2:1,b()):R!==-1&&(n.column++,n.offset++),n._bufferIndex<0?n._index++:(n._bufferIndex++,n._bufferIndex===a[n._index].length&&(n._bufferIndex=-1,n._index++)),u.previous=R}function x(R,A){const k=A||{};return k.type=R,k.start=p(),u.events.push(["enter",k,u]),o.push(k),k}function L(R){const A=o.pop();return A.end=p(),u.events.push(["exit",A,u]),A}function y(R,A){D(R,A.from)}function M(R,A){A.restore()}function F(R,A){return k;function k(O,B,$){let Q,X,oe,w;return Array.isArray(O)?ce(O):"tokenize"in O?ce([O]):P(O);function P(Z){return I;function I(K){const ee=K!==null&&Z[K],ae=K!==null&&Z.null,Me=[...Array.isArray(ee)?ee:ee?[ee]:[],...Array.isArray(ae)?ae:ae?[ae]:[]];return ce(Me)(K)}}function ce(Z){return Q=Z,X=0,Z.length===0?$:V(Z[X])}function V(Z){return I;function I(K){return w=H(),oe=Z,Z.partial||(u.currentConstruct=Z),Z.name&&u.parser.constructs.disable.null.includes(Z.name)?Y():Z.tokenize.call(A?Object.assign(Object.create(u),A):u,l,le,Y)(K)}}function le(Z){return R(oe,w),B}function Y(Z){return w.restore(),++X<Q.length?V(Q[X]):$}}}function D(R,A){R.resolveAll&&!s.includes(R)&&s.push(R),R.resolve&&Nr(u.events,A,u.events.length-A,R.resolve(u.events.slice(A),u)),R.resolveTo&&(u.events=R.resolveTo(u.events,u))}function H(){const R=p(),A=u.previous,k=u.currentConstruct,O=u.events.length,B=Array.from(o);return{restore:$,from:O};function $(){n=R,u.previous=A,u.currentConstruct=k,u.events.length=O,o=B,b()}}function b(){n.line in i&&n.column<2&&(n.column=i[n.line],n.offset+=i[n.line]-1)}}function RC(e,t){const r=t.start._index,n=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let a;if(r===i)a=[e[r].slice(n,s)];else{if(a=e.slice(r,i),n>-1){const o=a[0];typeof o=="string"?a[0]=o.slice(n):a.shift()}s>0&&a.push(e[i].slice(0,s))}return a}function kC(e,t){let r=-1;const n=[];let i;for(;++r<e.length;){const s=e[r];let a;if(typeof s=="string")a=s;else switch(s){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=t?" ":"	";break}case-1:{if(!t&&i)continue;a=" ";break}default:a=String.fromCharCode(s)}i=s===-2,n.push(a)}return n.join("")}const TC={42:Mr,43:Mr,45:Mr,48:Mr,49:Mr,50:Mr,51:Mr,52:Mr,53:Mr,54:Mr,55:Mr,56:Mr,57:Mr,62:fy},MC={91:LS},LC={[-2]:pf,[-1]:pf,32:pf},BC={35:HS,42:Xl,45:[nm,Xl],60:US,61:nm,95:Xl,96:tm,126:tm},OC={38:dy,92:hy},IC={[-5]:mf,[-4]:mf,[-3]:mf,33:sC,38:dy,42:mh,60:[lS,YS],91:aC,92:[FS,hy],93:Ld,95:mh,96:wS},FC={null:[mh,SC]},DC={null:[42,95]},HC={null:[]};var PC=Object.freeze(Object.defineProperty({__proto__:null,document:TC,contentInitial:MC,flowInitial:LC,flow:BC,string:OC,text:IC,insideSpan:FC,attentionMarkers:DC,disable:HC},Symbol.toStringTag,{value:"Module"}));function jC(e){const r=ly([PC,...(e||{}).extensions||[]]),n={defined:[],lazy:{},constructs:r,content:i(tS),document:i(nS),flow:i(bC),string:i(CC),text:i(xC)};return n;function i(s){return a;function a(o){return AC(n,s,o)}}}function NC(e){for(;!py(e););return e}const im=/[\0\t\n\r]/g;function UC(){let e=1,t="",r=!0,n;return i;function i(s,a,o){const l=[];let u,f,c,h,d;for(s=t+s.toString(a),c=0,t="",r&&(s.charCodeAt(0)===65279&&c++,r=void 0);c<s.length;){if(im.lastIndex=c,u=im.exec(s),h=u&&u.index!==void 0?u.index:s.length,d=s.charCodeAt(h),!u){t=s.slice(c);break}if(d===10&&c===h&&n)l.push(-3),n=void 0;else switch(n&&(l.push(-5),n=void 0),c<h&&(l.push(s.slice(c,h)),e+=h-c),d){case 0:{l.push(65533),e++;break}case 9:{for(f=Math.ceil(e/4)*4,l.push(-2);e++<f;)l.push(-1);break}case 10:{l.push(-4),e=1;break}default:n=!0,e=1}c=h+1}return o&&(n&&l.push(-5),t&&l.push(t),l.push(null)),l}}function qC(e,t,r){return typeof t!="string"&&(r=t,t=void 0),eS(r)(NC(jC(r).document().write(UC()(e,t,!0))))}const zC={tokenize:GC,partial:!0},by={tokenize:XC,partial:!0},wy={tokenize:ZC,partial:!0},Sy={tokenize:QC,partial:!0},VC={tokenize:JC,partial:!0},Cy={tokenize:KC,previous:Ey},xy={tokenize:YC,previous:Ay},ti={tokenize:WC,previous:Ry},Fn={},$C={text:Fn};let Vi=48;for(;Vi<123;)Fn[Vi]=ti,Vi++,Vi===58?Vi=65:Vi===91&&(Vi=97);Fn[43]=ti;Fn[45]=ti;Fn[46]=ti;Fn[95]=ti;Fn[72]=[ti,xy];Fn[104]=[ti,xy];Fn[87]=[ti,Cy];Fn[119]=[ti,Cy];function WC(e,t,r){const n=this;let i,s;return a;function a(c){return!_h(c)||!Ry.call(n,n.previous)||Bd(n.events)?r(c):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),o(c))}function o(c){return _h(c)?(e.consume(c),o):c===64?(e.consume(c),l):r(c)}function l(c){return c===46?e.check(VC,f,u)(c):c===45||c===95||gr(c)?(s=!0,e.consume(c),l):f(c)}function u(c){return e.consume(c),i=!0,l}function f(c){return s&&i&&Sr(n.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(c)):r(c)}}function KC(e,t,r){const n=this;return i;function i(a){return a!==87&&a!==119||!Ey.call(n,n.previous)||Bd(n.events)?r(a):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(zC,e.attempt(by,e.attempt(wy,s),r),r)(a))}function s(a){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(a)}}function YC(e,t,r){const n=this;let i="",s=!1;return a;function a(c){return(c===72||c===104)&&Ay.call(n,n.previous)&&!Bd(n.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),i+=String.fromCodePoint(c),e.consume(c),o):r(c)}function o(c){if(Sr(c)&&i.length<5)return i+=String.fromCodePoint(c),e.consume(c),o;if(c===58){const h=i.toLowerCase();if(h==="http"||h==="https")return e.consume(c),l}return r(c)}function l(c){return c===47?(e.consume(c),s?u:(s=!0,l)):r(c)}function u(c){return c===null||vc(c)||Ht(c)||ao(c)||Md(c)?r(c):e.attempt(by,e.attempt(wy,f),r)(c)}function f(c){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(c)}}function GC(e,t,r){let n=0;return i;function i(a){return(a===87||a===119)&&n<3?(n++,e.consume(a),i):a===46&&n===3?(e.consume(a),s):r(a)}function s(a){return a===null?r(a):t(a)}}function XC(e,t,r){let n,i,s;return a;function a(u){return u===46||u===95?e.check(Sy,l,o)(u):u===null||Ht(u)||ao(u)||u!==45&&Md(u)?l(u):(s=!0,e.consume(u),a)}function o(u){return u===95?n=!0:(i=n,n=void 0),e.consume(u),a}function l(u){return i||n||!s?r(u):t(u)}}function ZC(e,t){let r=0,n=0;return i;function i(a){return a===40?(r++,e.consume(a),i):a===41&&n<r?s(a):a===33||a===34||a===38||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===60||a===63||a===93||a===95||a===126?e.check(Sy,t,s)(a):a===null||Ht(a)||ao(a)?t(a):(e.consume(a),i)}function s(a){return a===41&&n++,e.consume(a),i}}function QC(e,t,r){return n;function n(o){return o===33||o===34||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===63||o===95||o===126?(e.consume(o),n):o===38?(e.consume(o),s):o===93?(e.consume(o),i):o===60||o===null||Ht(o)||ao(o)?t(o):r(o)}function i(o){return o===null||o===40||o===91||Ht(o)||ao(o)?t(o):n(o)}function s(o){return Sr(o)?a(o):r(o)}function a(o){return o===59?(e.consume(o),n):Sr(o)?(e.consume(o),a):r(o)}}function JC(e,t,r){return n;function n(s){return e.consume(s),i}function i(s){return gr(s)?r(s):t(s)}}function Ey(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||Ht(e)}function Ay(e){return!Sr(e)}function Ry(e){return!(e===47||_h(e))}function _h(e){return e===43||e===45||e===46||e===95||gr(e)}function Bd(e){let t=e.length,r=!1;for(;t--;){const n=e[t][1];if((n.type==="labelLink"||n.type==="labelImage")&&!n._balanced){r=!0;break}if(n._gfmAutolinkLiteralWalkedInto){r=!1;break}}return e.length>0&&!r&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),r}const ex={exit:{literalAutolinkEmail:rx,literalAutolinkHttp:nx,literalAutolinkWww:tx}};function tx(e){Od.call(this,e,"http://")}function rx(e){Od.call(this,e,"mailto:")}function nx(e){Od.call(this,e)}function Od(e,t){const r=this.sliceSerialize(e);this.tag('<a href="'+as((t||"")+r)+'">'),this.raw(this.encode(r)),this.tag("</a>")}const ix={tokenize:hx,partial:!0};function sx(){return{document:{91:{tokenize:cx,continuation:{tokenize:ux},exit:fx}},text:{91:{tokenize:lx},93:{add:"after",tokenize:ox,resolveTo:ax}}}}function ox(e,t,r){const n=this;let i=n.events.length;const s=n.parser.gfmFootnotes||(n.parser.gfmFootnotes=[]);let a;for(;i--;){const l=n.events[i][1];if(l.type==="labelImage"){a=l;break}if(l.type==="gfmFootnoteCall"||l.type==="labelLink"||l.type==="label"||l.type==="image"||l.type==="link")break}return o;function o(l){if(!a||!a._balanced)return r(l);const u=Bn(n.sliceSerialize({start:a.end,end:n.now()}));return u.codePointAt(0)!==94||!s.includes(u.slice(1))?r(l):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(l),e.exit("gfmFootnoteCallLabelMarker"),t(l))}}function ax(e,t){let r=e.length;for(;r--;)if(e[r][1].type==="labelImage"&&e[r][0]==="enter"){e[r][1];break}e[r+1][1].type="data",e[r+3][1].type="gfmFootnoteCallLabelMarker";const n={type:"gfmFootnoteCall",start:Object.assign({},e[r+3][1].start),end:Object.assign({},e[e.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},e[r+3][1].end),end:Object.assign({},e[r+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},e[e.length-1][1].start)},a={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},o=[e[r+1],e[r+2],["enter",n,t],e[r+3],e[r+4],["enter",i,t],["exit",i,t],["enter",s,t],["enter",a,t],["exit",a,t],["exit",s,t],e[e.length-2],e[e.length-1],["exit",n,t]];return e.splice(r,e.length-r+1,...o),e}function lx(e,t,r){const n=this,i=n.parser.gfmFootnotes||(n.parser.gfmFootnotes=[]);let s=0,a;return o;function o(c){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(c),e.exit("gfmFootnoteCallLabelMarker"),l}function l(c){return c!==94?r(c):(e.enter("gfmFootnoteCallMarker"),e.consume(c),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",u)}function u(c){if(s>999||c===93&&!a||c===null||c===91||Ht(c))return r(c);if(c===93){e.exit("chunkString");const h=e.exit("gfmFootnoteCallString");return i.includes(Bn(n.sliceSerialize(h)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(c),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):r(c)}return Ht(c)||(a=!0),s++,e.consume(c),c===92?f:u}function f(c){return c===91||c===92||c===93?(e.consume(c),s++,u):u(c)}}function cx(e,t,r){const n=this,i=n.parser.gfmFootnotes||(n.parser.gfmFootnotes=[]);let s,a=0,o;return l;function l(p){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(p),e.exit("gfmFootnoteDefinitionLabelMarker"),u}function u(p){return p===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(p),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",f):r(p)}function f(p){if(a>999||p===93&&!o||p===null||p===91||Ht(p))return r(p);if(p===93){e.exit("chunkString");const v=e.exit("gfmFootnoteDefinitionLabelString");return s=Bn(n.sliceSerialize(v)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(p),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),h}return Ht(p)||(o=!0),a++,e.consume(p),p===92?c:f}function c(p){return p===91||p===92||p===93?(e.consume(p),a++,f):f(p)}function h(p){return p===58?(e.enter("definitionMarker"),e.consume(p),e.exit("definitionMarker"),i.includes(s)||i.push(s),gt(e,d,"gfmFootnoteDefinitionWhitespace")):r(p)}function d(p){return t(p)}}function ux(e,t,r){return e.check(Pa,t,e.attempt(ix,t,r))}function fx(e){e.exit("gfmFootnoteDefinition")}function hx(e,t,r){const n=this;return gt(e,i,"gfmFootnoteDefinitionIndent",5);function i(s){const a=n.events[n.events.length-1];return a&&a[1].type==="gfmFootnoteDefinitionIndent"&&a[2].sliceSerialize(a[1],!0).length===4?t(s):r(s)}}const dx={}.hasOwnProperty,px={};function mx(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function _x(e){const t=px,r=t.label||"Footnotes",n=t.labelTagName||"h2",i=t.labelAttributes===null||t.labelAttributes===void 0?'class="sr-only"':t.labelAttributes,s=t.backLabel||mx,a=t.clobberPrefix===null||t.clobberPrefix===void 0?"user-content-":t.clobberPrefix;return{enter:{gfmFootnoteDefinition(){this.getData("tightStack").push(!1)},gfmFootnoteDefinitionLabelString(){this.buffer()},gfmFootnoteCallString(){this.buffer()}},exit:{gfmFootnoteDefinition(){let o=this.getData("gfmFootnoteDefinitions");const l=this.getData("gfmFootnoteDefinitionStack"),u=this.getData("tightStack"),f=l.pop(),c=this.resume();o||this.setData("gfmFootnoteDefinitions",o={}),dx.call(o,f)||(o[f]=c),u.pop(),this.setData("slurpOneLineEnding",!0),this.setData("lastWasTag")},gfmFootnoteDefinitionLabelString(o){let l=this.getData("gfmFootnoteDefinitionStack");l||this.setData("gfmFootnoteDefinitionStack",l=[]),l.push(Bn(this.sliceSerialize(o))),this.resume(),this.buffer()},gfmFootnoteCallString(o){let l=this.getData("gfmFootnoteCallOrder"),u=this.getData("gfmFootnoteCallCounts");const f=Bn(this.sliceSerialize(o));let c;this.resume(),l||this.setData("gfmFootnoteCallOrder",l=[]),u||this.setData("gfmFootnoteCallCounts",u={});const h=l.indexOf(f),d=as(f.toLowerCase());h===-1?(l.push(f),u[f]=1,c=l.length):(u[f]++,c=h+1);const p=u[f];this.tag('<sup><a href="#'+a+"fn-"+d+'" id="'+a+"fnref-"+d+(p>1?"-"+p:"")+'" data-footnote-ref="" aria-describedby="footnote-label">'+String(c)+"</a></sup>")},null(){const o=this.getData("gfmFootnoteCallOrder")||[],l=this.getData("gfmFootnoteCallCounts")||{},u=this.getData("gfmFootnoteDefinitions")||{};let f=-1;for(o.length>0&&(this.lineEndingIfNeeded(),this.tag('<section data-footnotes="" class="footnotes"><'+n+' id="footnote-label"'+(i?" "+i:"")+">"),this.raw(this.encode(r)),this.tag("</"+n+">"),this.lineEndingIfNeeded(),this.tag("<ol>"));++f<o.length;){const c=o[f],h=as(c.toLowerCase());let d=0;const p=[];for(;++d<=l[c];)p.push('<a href="#'+a+"fnref-"+h+(d>1?"-"+d:"")+'" data-footnote-backref="" aria-label="'+this.encode(typeof s=="string"?s:s(f,d))+'" class="data-footnote-backref">↩'+(d>1?"<sup>"+d+"</sup>":"")+"</a>");const v=p.join(" ");let _=!1;this.lineEndingIfNeeded(),this.tag('<li id="'+a+"fn-"+h+'">'),this.lineEndingIfNeeded(),this.tag(u[c].replace(/<\/p>(?:\r?\n|\r)?$/,m=>(_=!0," "+v+m))),_||(this.lineEndingIfNeeded(),this.tag(v)),this.lineEndingIfNeeded(),this.tag("</li>")}o.length>0&&(this.lineEndingIfNeeded(),this.tag("</ol>"),this.lineEndingIfNeeded(),this.tag("</section>"))}}}}const gx={enter:{strikethrough(){this.tag("<del>")}},exit:{strikethrough(){this.tag("</del>")}}};function vx(e){let r={}.singleTilde;const n={tokenize:s,resolveAll:i};return r==null&&(r=!0),{text:{126:n},insideSpan:{null:[n]},attentionMarkers:{null:[126]}};function i(a,o){let l=-1;for(;++l<a.length;)if(a[l][0]==="enter"&&a[l][1].type==="strikethroughSequenceTemporary"&&a[l][1]._close){let u=l;for(;u--;)if(a[u][0]==="exit"&&a[u][1].type==="strikethroughSequenceTemporary"&&a[u][1]._open&&a[l][1].end.offset-a[l][1].start.offset===a[u][1].end.offset-a[u][1].start.offset){a[l][1].type="strikethroughSequence",a[u][1].type="strikethroughSequence";const f={type:"strikethrough",start:Object.assign({},a[u][1].start),end:Object.assign({},a[l][1].end)},c={type:"strikethroughText",start:Object.assign({},a[u][1].end),end:Object.assign({},a[l][1].start)},h=[["enter",f,o],["enter",a[u][1],o],["exit",a[u][1],o],["enter",c,o]],d=o.parser.constructs.insideSpan.null;d&&Nr(h,h.length,0,iu(d,a.slice(u+1,l),o)),Nr(h,h.length,0,[["exit",c,o],["enter",a[l][1],o],["exit",a[l][1],o],["exit",f,o]]),Nr(a,u-1,l-u+3,h),l=u+h.length-2;break}}for(l=-1;++l<a.length;)a[l][1].type==="strikethroughSequenceTemporary"&&(a[l][1].type="data");return a}function s(a,o,l){const u=this.previous,f=this.events;let c=0;return h;function h(p){return u===126&&f[f.length-1][1].type!=="characterEscape"?l(p):(a.enter("strikethroughSequenceTemporary"),d(p))}function d(p){const v=yc(u);if(p===126)return c>1?l(p):(a.consume(p),c++,d);if(c<2&&!r)return l(p);const _=a.exit("strikethroughSequenceTemporary"),m=yc(p);return _._open=!m||m===2&&!!v,_._close=!v||v===2&&!!m,o(p)}}}const _f={none:"",left:' align="left"',right:' align="right"',center:' align="center"'},yx={enter:{table(e){const t=e._align;this.lineEndingIfNeeded(),this.tag("<table>"),this.setData("tableAlign",t)},tableBody(){this.tag("<tbody>")},tableData(){const e=this.getData("tableAlign"),t=this.getData("tableColumn"),r=_f[e[t]];r===void 0?this.buffer():(this.lineEndingIfNeeded(),this.tag("<td"+r+">"))},tableHead(){this.lineEndingIfNeeded(),this.tag("<thead>")},tableHeader(){const e=this.getData("tableAlign"),t=this.getData("tableColumn"),r=_f[e[t]];this.lineEndingIfNeeded(),this.tag("<th"+r+">")},tableRow(){this.setData("tableColumn",0),this.lineEndingIfNeeded(),this.tag("<tr>")}},exit:{codeTextData(e){let t=this.sliceSerialize(e);this.getData("tableAlign")&&(t=t.replace(/\\([\\|])/g,bx)),this.raw(this.encode(t))},table(){this.setData("tableAlign"),this.setData("slurpAllLineEndings"),this.lineEndingIfNeeded(),this.tag("</table>")},tableBody(){this.lineEndingIfNeeded(),this.tag("</tbody>")},tableData(){const e=this.getData("tableAlign"),t=this.getData("tableColumn");t in e?(this.tag("</td>"),this.setData("tableColumn",t+1)):this.resume()},tableHead(){this.lineEndingIfNeeded(),this.tag("</thead>")},tableHeader(){const e=this.getData("tableColumn");this.tag("</th>"),this.setData("tableColumn",e+1)},tableRow(){const e=this.getData("tableAlign");let t=this.getData("tableColumn");for(;t<e.length;)this.lineEndingIfNeeded(),this.tag("<td"+_f[e[t]]+"></td>"),t++;this.setData("tableColumn",t),this.lineEndingIfNeeded(),this.tag("</tr>")}}};function bx(e,t){return t==="|"?t:e}class wx{constructor(){this.map=[]}add(t,r,n){Sx(this,t,r,n)}consume(t){if(this.map.sort((s,a)=>s[0]-a[0]),this.map.length===0)return;let r=this.map.length;const n=[];for(;r>0;)r-=1,n.push(t.slice(this.map[r][0]+this.map[r][1])),n.push(this.map[r][2]),t.length=this.map[r][0];n.push([...t]),t.length=0;let i=n.pop();for(;i;)t.push(...i),i=n.pop();this.map.length=0}}function Sx(e,t,r,n){let i=0;if(!(r===0&&n.length===0)){for(;i<e.map.length;){if(e.map[i][0]===t){e.map[i][1]+=r,e.map[i][2].push(...n);return}i+=1}e.map.push([t,r,n])}}function Cx(e,t){let r=!1;const n=[];for(;t<e.length;){const i=e[t];if(r){if(i[0]==="enter")i[1].type==="tableContent"&&n.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const s=n.length-1;n[s]=n[s]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(r=!0);t+=1}return n}const xx={flow:{null:{tokenize:Ex,resolveAll:Ax}}};function Ex(e,t,r){const n=this;let i=0,s=0,a;return o;function o(b){let R=n.events.length-1;for(;R>-1;){const O=n.events[R][1].type;if(O==="lineEnding"||O==="linePrefix")R--;else break}const A=R>-1?n.events[R][1].type:null,k=A==="tableHead"||A==="tableRow"?M:l;return k===M&&n.parser.lazy[n.now().line]?r(b):k(b)}function l(b){return e.enter("tableHead"),e.enter("tableRow"),u(b)}function u(b){return b===124||(a=!0,s+=1),f(b)}function f(b){return b===null?r(b):Ze(b)?s>1?(s=0,n.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(b),e.exit("lineEnding"),d):r(b):ft(b)?gt(e,f,"whitespace")(b):(s+=1,a&&(a=!1,i+=1),b===124?(e.enter("tableCellDivider"),e.consume(b),e.exit("tableCellDivider"),a=!0,f):(e.enter("data"),c(b)))}function c(b){return b===null||b===124||Ht(b)?(e.exit("data"),f(b)):(e.consume(b),b===92?h:c)}function h(b){return b===92||b===124?(e.consume(b),c):c(b)}function d(b){return n.interrupt=!1,n.parser.lazy[n.now().line]?r(b):(e.enter("tableDelimiterRow"),a=!1,ft(b)?gt(e,p,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(b):p(b))}function p(b){return b===45||b===58?_(b):b===124?(a=!0,e.enter("tableCellDivider"),e.consume(b),e.exit("tableCellDivider"),v):y(b)}function v(b){return ft(b)?gt(e,_,"whitespace")(b):_(b)}function _(b){return b===58?(s+=1,a=!0,e.enter("tableDelimiterMarker"),e.consume(b),e.exit("tableDelimiterMarker"),m):b===45?(s+=1,m(b)):b===null||Ze(b)?L(b):y(b)}function m(b){return b===45?(e.enter("tableDelimiterFiller"),g(b)):y(b)}function g(b){return b===45?(e.consume(b),g):b===58?(a=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(b),e.exit("tableDelimiterMarker"),x):(e.exit("tableDelimiterFiller"),x(b))}function x(b){return ft(b)?gt(e,L,"whitespace")(b):L(b)}function L(b){return b===124?p(b):b===null||Ze(b)?!a||i!==s?y(b):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(b)):y(b)}function y(b){return r(b)}function M(b){return e.enter("tableRow"),F(b)}function F(b){return b===124?(e.enter("tableCellDivider"),e.consume(b),e.exit("tableCellDivider"),F):b===null||Ze(b)?(e.exit("tableRow"),t(b)):ft(b)?gt(e,F,"whitespace")(b):(e.enter("data"),D(b))}function D(b){return b===null||b===124||Ht(b)?(e.exit("data"),F(b)):(e.consume(b),b===92?H:D)}function H(b){return b===92||b===124?(e.consume(b),D):D(b)}}function Ax(e,t){let r=-1,n=!0,i=0,s=[0,0,0,0],a=[0,0,0,0],o=!1,l=0,u,f,c;const h=new wx;for(;++r<e.length;){const d=e[r],p=d[1];d[0]==="enter"?p.type==="tableHead"?(o=!1,l!==0&&(sm(h,t,l,u,f),f=void 0,l=0),u={type:"table",start:Object.assign({},p.start),end:Object.assign({},p.end)},h.add(r,0,[["enter",u,t]])):p.type==="tableRow"||p.type==="tableDelimiterRow"?(n=!0,c=void 0,s=[0,0,0,0],a=[0,r+1,0,0],o&&(o=!1,f={type:"tableBody",start:Object.assign({},p.start),end:Object.assign({},p.end)},h.add(r,0,[["enter",f,t]])),i=p.type==="tableDelimiterRow"?2:f?3:1):i&&(p.type==="data"||p.type==="tableDelimiterMarker"||p.type==="tableDelimiterFiller")?(n=!1,a[2]===0&&(s[1]!==0&&(a[0]=a[1],c=El(h,t,s,i,void 0,c),s=[0,0,0,0]),a[2]=r)):p.type==="tableCellDivider"&&(n?n=!1:(s[1]!==0&&(a[0]=a[1],c=El(h,t,s,i,void 0,c)),s=a,a=[s[1],r,0,0])):p.type==="tableHead"?(o=!0,l=r):p.type==="tableRow"||p.type==="tableDelimiterRow"?(l=r,s[1]!==0?(a[0]=a[1],c=El(h,t,s,i,r,c)):a[1]!==0&&(c=El(h,t,a,i,r,c)),i=0):i&&(p.type==="data"||p.type==="tableDelimiterMarker"||p.type==="tableDelimiterFiller")&&(a[3]=r)}for(l!==0&&sm(h,t,l,u,f),h.consume(t.events),r=-1;++r<t.events.length;){const d=t.events[r];d[0]==="enter"&&d[1].type==="table"&&(d[1]._align=Cx(t.events,r))}return e}function El(e,t,r,n,i,s){const a=n===1?"tableHeader":n===2?"tableDelimiter":"tableData",o="tableContent";r[0]!==0&&(s.end=Object.assign({},$s(t.events,r[0])),e.add(r[0],0,[["exit",s,t]]));const l=$s(t.events,r[1]);if(s={type:a,start:Object.assign({},l),end:Object.assign({},l)},e.add(r[1],0,[["enter",s,t]]),r[2]!==0){const u=$s(t.events,r[2]),f=$s(t.events,r[3]),c={type:o,start:Object.assign({},u),end:Object.assign({},f)};if(e.add(r[2],0,[["enter",c,t]]),n!==2){const h=t.events[r[2]],d=t.events[r[3]];if(h[1].end=Object.assign({},d[1].end),h[1].type="chunkText",h[1].contentType="text",r[3]>r[2]+1){const p=r[2]+1,v=r[3]-r[2]-1;e.add(p,v,[])}}e.add(r[3]+1,0,[["exit",c,t]])}return i!==void 0&&(s.end=Object.assign({},$s(t.events,i)),e.add(i,0,[["exit",s,t]]),s=void 0),s}function sm(e,t,r,n,i){const s=[],a=$s(t.events,r);i&&(i.end=Object.assign({},a),s.push(["exit",i,t])),n.end=Object.assign({},a),s.push(["exit",n,t]),e.add(r+1,0,s)}function $s(e,t){const r=e[t],n=r[0]==="enter"?"start":"end";return r[1][n]}const ky=/<(\/?)(iframe|noembed|noframes|plaintext|script|style|title|textarea|xmp)(?=[\t\n\f\r />])/gi,Rx=new RegExp("^"+ky.source,"i"),kx={exit:{htmlFlowData(e){om.call(this,e,ky)},htmlTextData(e){om.call(this,e,Rx)}}};function om(e,t){let r=this.sliceSerialize(e);this.options.allowDangerousHtml&&(r=r.replace(t,"&lt;$1$2")),this.raw(this.encode(r))}const Tx={enter:{taskListCheck(){this.tag('<input type="checkbox" disabled="" ')}},exit:{taskListCheck(){this.tag("/>")},taskListCheckValueChecked(){this.tag('checked="" ')}}},Mx={tokenize:Bx},Lx={text:{91:Mx}};function Bx(e,t,r){const n=this;return i;function i(l){return n.previous!==null||!n._gfmTasklistFirstContentOfListItem?r(l):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(l),e.exit("taskListCheckMarker"),s)}function s(l){return Ht(l)?(e.enter("taskListCheckValueUnchecked"),e.consume(l),e.exit("taskListCheckValueUnchecked"),a):l===88||l===120?(e.enter("taskListCheckValueChecked"),e.consume(l),e.exit("taskListCheckValueChecked"),a):r(l)}function a(l){return l===93?(e.enter("taskListCheckMarker"),e.consume(l),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),o):r(l)}function o(l){return Ze(l)?t(l):ft(l)?e.check({tokenize:Ox},t,r)(l):r(l)}}function Ox(e,t,r){return gt(e,n,"whitespace");function n(i){return i===null?r(i):t(i)}}function Ix(e){return ly([$C,sx(),vx(),xx,Lx])}function Fx(e){return cy([ex,_x(),gx,yx,kx,Tx])}const nr={carriageReturn:-5,lineFeed:-4,carriageReturnLineFeed:-3,eof:null,greaterThan:62,atSign:64,backslash:92,degree:176},Dx=(e,t,r)=>{const n=a=>a===nr.carriageReturn||a===nr.lineFeed||a===nr.carriageReturnLineFeed||a===nr.eof?r(a):a===nr.backslash?(e.consume(a),i):a===nr.degree?(e.exit("underlineContent"),e.enter("underlineMarker"),e.consume(a),e.exit("underlineMarker"),e.exit("underline"),t):(e.consume(a),n),i=a=>a===nr.backslash||a===nr.degree?(e.consume(a),n):n(a),s=a=>a===nr.degree?r(a):n(a);return a=>(e.enter("underline"),e.enter("underlineMarker"),e.consume(a),e.exit("underlineMarker"),e.enter("underlineContent",{contentType:"string"}),s)},Hx={name:"underline",tokenize:Dx},Px={text:{176:Hx}},jx={enter:{underline(){this.tag("<u>")}},exit:{underline(){this.tag("</u>")}}},Nx=(e,t,r)=>{const n=a=>a===nr.carriageReturn||a===nr.lineFeed||a===nr.carriageReturnLineFeed||a===nr.eof?r(a):a===nr.backslash?(e.consume(a),i):a===nr.greaterThan?(e.exit("usertagContent"),e.enter("usertagMarker"),e.consume(a),e.exit("usertagMarker"),e.exit("usertag"),t):(e.consume(a),n),i=a=>a===nr.backslash||a===nr.greaterThan?(e.consume(a),n):n(a),s=a=>a===nr.atSign?(e.consume(a),e.exit("usertagMarker"),e.enter("usertagContent"),n):r(a);return a=>(e.enter("usertag"),e.enter("usertagMarker"),e.consume(a),s)},Ux={name:"usertag",tokenize:Nx},qx={text:{60:Ux}},zx=e=>({exit:{usertagContent(t){const r=this.sliceSerialize(t);this.tag(`<span class="vac-text-tag" data-user-id="${r}">`);const n=e.find(i=>i._id===r);this.raw(`@${this.encode(n?n.username:r)}`),this.tag("</span>")}}});var Vx=(e,{textFormatting:t})=>{if(t){let r=[];t.linkify||(r=["literalAutolink","literalAutolinkEmail"]);const n=qC(e.replaceAll("<usertag>","<@").replaceAll("</usertag>",">"),{extensions:[{...Ix(),disable:{null:r}},Px,qx],htmlExtensions:[Fx(),jx,zx(t.users)]});if(t.singleLine){const i=document.createElement("div");return i.innerHTML=n,[{types:[],value:i.innerText}]}return[{types:["markdown"],value:n}]}return[{types:[],value:e}]};const Id=["png","jpg","jpeg","webp","svg","gif"],Ty=["mp4","video/ogg","webm","quicktime"],$x=["mp3","audio/ogg","wav","mpeg"],Wx={name:"FormatMessage",components:{SvgIcon:cr},props:{messageId:{type:String,default:""},roomId:{type:String,default:""},roomList:{type:Boolean,default:!1},content:{type:[String,Number],required:!0},deleted:{type:Boolean,default:!1},users:{type:Array,default:()=>[]},linkify:{type:Boolean,default:!0},singleLine:{type:Boolean,default:!1},reply:{type:Boolean,default:!1},textFormatting:{type:Object,required:!0},textMessages:{type:Object,default:()=>{}},linkOptions:{type:Object,required:!0}},emits:["open-user-tag"],computed:{parsedMessage(){if(this.deleted)return[{value:this.textMessages.MESSAGE_DELETED}];let e;this.textFormatting.disabled?e={}:e={textFormatting:{linkify:this.linkify,linkOptions:this.linkOptions,singleLine:this.singleLine,reply:this.reply,users:this.users,...this.textFormatting}};const t=Vx(this.content,e);return t.forEach(r=>{r.markdown=this.checkType(r,"markdown"),r.tag=this.checkType(r,"tag"),r.image=this.checkImageType(r)}),t}},methods:{checkType(e,t){return e.types&&e.types.indexOf(t)!==-1},checkImageType(e){let t=e.value.lastIndexOf(".");e.value.lastIndexOf("/")>t&&(t=-1);const n=e.value.substring(t+1,e.value.length),i=t>0&&Id.some(s=>n.toLowerCase().includes(s));return i&&this.setImageSize(e),i},setImageSize(e){const t=new Image;t.src=e.value,t.addEventListener("load",r);function r(n){const i=n.path[0].width/150;e.height=Math.round(n.path[0].height/i)+"px",t.removeEventListener("load",r)}},openTag(e){const t=e.target.getAttribute("data-user-id");if(!this.singleLine&&t){const r=this.users.find(n=>String(n._id)===t);this.$emit("open-user-tag",r)}}}},Kx=["innerHTML"],Yx={class:"vac-image-link-container"},Gx={class:"vac-image-link-message"};function Xx(e,t,r,n,i,s){const a=Ge("svg-icon");return ye(),Te("div",{class:at(["vac-format-message-wrapper",{"vac-text-ellipsis":r.singleLine}])},[(ye(!0),Te(pt,null,st(s.parsedMessage,(o,l)=>(ye(),Te(pt,{key:l},[o.markdown?(ye(),Te("div",{key:0,class:"markdown",onClick:t[0]||(t[0]=(...u)=>s.openTag&&s.openTag(...u)),innerHTML:o.value},null,8,Kx)):(ye(),Te("div",{key:1,class:at(["vac-format-container",{"vac-text-ellipsis":r.singleLine}])},[(ye(),Rt(r8(o.url?"a":"span"),{class:at({"vac-text-ellipsis":r.singleLine,"vac-text-tag":!r.singleLine&&!r.reply&&o.tag}),href:o.href,target:o.href?r.linkOptions.target:null,rel:o.href?r.linkOptions.rel:null},{default:Xe(()=>[r.deleted?(ye(),Te(pt,{key:0},[Ue(e.$slots,r.roomList?"deleted-icon-room_"+r.roomId:"deleted-icon_"+r.messageId,{},()=>[Ve(a,{name:"deleted",class:at(["vac-icon-deleted",{"vac-icon-deleted-room":r.roomList}])},null,8,["class"])]),Xn(" "+tt(r.textMessages.MESSAGE_DELETED),1)],64)):o.url&&o.image?(ye(),Te(pt,{key:1},[He("div",Yx,[He("div",{class:"vac-image-link",style:Ut({"background-image":`url('${o.value}')`,height:o.height})},null,4)]),He("div",Gx,tt(o.value),1)],64)):(ye(),Te(pt,{key:2},[Xn(tt(o.value),1)],64))]),_:2},1032,["class","href","target","rel"]))],2))],64))),128))],2)}var ja=Pt(Wx,[["render",Xx]]);const is="__v-click-outside",My=typeof window<"u",Zx=typeof navigator<"u",Qx=My&&("ontouchstart"in window||Zx&&navigator.msMaxTouchPoints>0),Jx=Qx?["touchstart"]:["click"],e6=e=>{const t=typeof e=="function";if(!t&&typeof e!="object")throw new Error("v-click-outside: Binding value must be a function or an object");return{handler:t?e:e.handler,middleware:e.middleware||(r=>r),events:e.events||Jx,isActive:e.isActive!==!1,detectIframe:e.detectIframe!==!1,capture:!!e.capture}},Ly=({event:e,handler:t,middleware:r})=>{r(e)&&t(e)},t6=({el:e,event:t,handler:r,middleware:n})=>{setTimeout(()=>{const{activeElement:i}=document;i&&i.tagName==="IFRAME"&&!e.contains(i)&&Ly({event:t,handler:r,middleware:n})},0)},r6=({el:e,event:t,handler:r,middleware:n})=>{const i=t.path||t.composedPath&&t.composedPath();(i?i.indexOf(e)<0:!e.contains(t.target))&&Ly({event:t,handler:r,middleware:n})},By=(e,{value:t})=>{const{events:r,handler:n,middleware:i,isActive:s,detectIframe:a,capture:o}=e6(t);if(s){if(e[is]=r.map(l=>({event:l,srcTarget:document.documentElement,handler:u=>r6({el:e,event:u,handler:n,middleware:i}),capture:o})),a){const l={event:"blur",srcTarget:window,handler:u=>t6({el:e,event:u,handler:n,middleware:i}),capture:o};e[is]=[...e[is],l]}e[is].forEach(({event:l,srcTarget:u,handler:f})=>setTimeout(()=>{e[is]&&u.addEventListener(l,f,o)},0))}},Oy=e=>{(e[is]||[]).forEach(({event:r,srcTarget:n,handler:i,capture:s})=>n.removeEventListener(r,i,s)),delete e[is]},n6=(e,{value:t,oldValue:r})=>{JSON.stringify(t)!==JSON.stringify(r)&&(Oy(e),By(e,{value:t}))},i6={beforeMount:By,updated:n6,unmounted:Oy};var su=My?i6:{},Iy=(e,t,r)=>{if(e.typingUsers&&e.typingUsers.length){const n=e.users.filter(i=>{if(i._id!==t&&e.typingUsers.indexOf(i._id)!==-1&&!(i.status&&i.status.state==="offline"))return!0});return n.length?e.users.length===2?r.IS_TYPING:n.map(i=>i.username).join(", ")+" "+r.IS_TYPING:void 0}};function Ca(e,t){if(!(!t||!t.type))return e.some(r=>t.type.toLowerCase().includes(r))}function lo(e){return Ca(Id,e)}function Na(e){return Ca(Ty,e)}function am(e){return Ca(Id,e)||Ca(Ty,e)}function ou(e){return Ca($x,e)}const s6={name:"RoomsContent",components:{SvgIcon:cr,FormatMessage:ja},directives:{clickOutside:su},props:{currentUserId:{type:[String,Number],required:!0},room:{type:Object,required:!0},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},textMessages:{type:Object,required:!0},roomActions:{type:Array,required:!0}},emits:["room-action-handler"],data(){return{roomMenuOpened:null}},computed:{getLastMessage(){const e=this.typingUsers;if(e)return e;const t=this.room.lastMessage.content;if(this.room.users.length<=2)return t;const r=this.room.users.find(n=>n._id===this.room.lastMessage.senderId);return this.room.lastMessage.username?`${this.room.lastMessage.username} - ${t}`:!r||r._id===this.currentUserId?t:`${r.username} - ${t}`},userStatus(){if(!this.room.users||this.room.users.length!==2)return;const e=this.room.users.find(t=>t._id!==this.currentUserId);return e&&e.status?e.status.state:null},typingUsers(){return Iy(this.room,this.currentUserId,this.textMessages)},isMessageCheckmarkVisible(){return!this.typingUsers&&this.room.lastMessage&&!this.room.lastMessage.deleted&&this.room.lastMessage.senderId===this.currentUserId&&(this.room.lastMessage.saved||this.room.lastMessage.distributed||this.room.lastMessage.seen)},formattedDuration(){var e,t;const r=(t=(e=this.room.lastMessage)==null?void 0:e.files)==null?void 0:t[0];if(r){if(!r.duration)return`${r.name}.${r.extension}`;let n=Math.floor(r.duration);return(n-(n%=60))/60+(n>9?":":":0")+n}return""},isAudio(){return this.room.lastMessage.files?ou(this.room.lastMessage.files[0]):!1}},methods:{roomActionHandler(e){this.closeRoomMenu(),this.$emit("room-action-handler",{action:e,roomId:this.room.roomId})},closeRoomMenu(){this.roomMenuOpened=null}}},o6={class:"vac-room-container"},a6={class:"vac-name-container vac-text-ellipsis"},l6={class:"vac-title-container"},c6={class:"vac-room-name vac-text-ellipsis"},u6={key:1,class:"vac-text-date"},f6={key:0},h6={key:1,class:"vac-text-ellipsis"},d6={key:3,class:"vac-text-ellipsis"},p6={class:"vac-room-options-container"},m6={key:0,class:"vac-badge-counter vac-room-badge"},_6={key:0,class:"vac-menu-options"},g6={class:"vac-menu-list"},v6=["onClick"];function y6(e,t,r,n,i,s){const a=Ge("svg-icon"),o=Ge("format-message"),l=Jc("click-outside");return ye(),Te("div",o6,[Ue(e.$slots,"room-list-item_"+r.room.roomId,{},()=>[Ue(e.$slots,"room-list-avatar_"+r.room.roomId,{},()=>[r.room.avatar?(ye(),Te("div",{key:0,class:"vac-avatar",style:Ut({"background-image":`url('${r.room.avatar}')`})},null,4)):Ne("",!0)]),He("div",a6,[He("div",l6,[s.userStatus?(ye(),Te("div",{key:0,class:at(["vac-state-circle",{"vac-state-online":s.userStatus==="online"}])},null,2)):Ne("",!0),Ue(e.$slots,"room-list-info_"+r.room.roomId,{},()=>[He("div",c6,tt(r.room.roomName),1)]),r.room.lastMessage?(ye(),Te("div",u6,tt(r.room.lastMessage.timestamp),1)):Ne("",!0)]),He("div",{class:at(["vac-text-last",{"vac-message-new":r.room.lastMessage&&r.room.lastMessage.new&&!s.typingUsers}])},[s.isMessageCheckmarkVisible?(ye(),Te("span",f6,[Ue(e.$slots,"checkmark-icon_"+r.room.roomId,{},()=>[Ve(a,{name:r.room.lastMessage.distributed?"double-checkmark":"checkmark",param:r.room.lastMessage.seen?"seen":"",class:"vac-icon-check"},null,8,["name","param"])])])):Ne("",!0),r.room.lastMessage&&!r.room.lastMessage.deleted&&s.isAudio?(ye(),Te("div",h6,[Ue(e.$slots,"microphone-icon_"+r.room.roomId,{},()=>[Ve(a,{name:"microphone",class:"vac-icon-microphone"})]),Xn(" "+tt(s.formattedDuration),1)])):r.room.lastMessage?(ye(),Rt(o,{key:2,"message-id":r.room.lastMessage._id,"room-id":r.room.roomId,"room-list":!0,content:s.getLastMessage,deleted:!!r.room.lastMessage.deleted&&!s.typingUsers,users:r.room.users,"text-messages":r.textMessages,linkify:!1,"text-formatting":r.textFormatting,"link-options":r.linkOptions,"single-line":!0},Lt({_:2},[st(e.$slots,(u,f)=>({name:f,fn:Xe(c=>[Ue(e.$slots,f,Mt(kt(c)))])}))]),1032,["message-id","room-id","content","deleted","users","text-messages","text-formatting","link-options"])):Ne("",!0),!r.room.lastMessage&&s.typingUsers?(ye(),Te("div",d6,tt(s.typingUsers),1)):Ne("",!0),He("div",p6,[r.room.unreadCount?(ye(),Te("div",m6,tt(r.room.unreadCount),1)):Ne("",!0),Ue(e.$slots,"room-list-options_"+r.room.roomId,{},()=>[r.roomActions.length?(ye(),Te("div",{key:0,class:"vac-svg-button vac-list-room-options",onClick:t[0]||(t[0]=An(u=>i.roomMenuOpened=r.room.roomId,["stop"]))},[Ue(e.$slots,"room-list-options-icon_"+r.room.roomId,{},()=>[Ve(a,{name:"dropdown",param:"room"})])])):Ne("",!0),r.roomActions.length?(ye(),Rt(Zt,{key:1,name:"vac-slide-left"},{default:Xe(()=>[i.roomMenuOpened===r.room.roomId?Gn((ye(),Te("div",_6,[He("div",g6,[(ye(!0),Te(pt,null,st(r.roomActions,u=>(ye(),Te("div",{key:u.name},[He("div",{class:"vac-menu-item",onClick:An(f=>s.roomActionHandler(u),["stop"])},tt(u.title),9,v6)]))),128))])])),[[l,s.closeRoomMenu]]):Ne("",!0)]),_:1})):Ne("",!0)])])],2)])])])}var b6=Pt(s6,[["render",y6]]),gh=(e,t,r,n=!1)=>!r||r===""?e:e.filter(i=>n?Al(i[t]).startsWith(Al(r)):Al(i[t]).includes(Al(r)));function Al(e){return e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")}const w6={name:"RoomsList",components:{Loader:nu,RoomsSearch:q9,RoomContent:b6},props:{currentUserId:{type:[String,Number],required:!0},textMessages:{type:Object,required:!0},showRoomsList:{type:Boolean,required:!0},showSearch:{type:Boolean,required:!0},showAddRoom:{type:Boolean,required:!0},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},isMobile:{type:Boolean,required:!0},rooms:{type:Array,required:!0},loadingRooms:{type:Boolean,required:!0},roomsLoaded:{type:Boolean,required:!0},room:{type:Object,required:!0},customSearchRoomEnabled:{type:[Boolean,String],default:!1},roomActions:{type:Array,required:!0},scrollDistance:{type:Number,required:!0}},emits:["add-room","search-room","room-action-handler","loading-more-rooms","fetch-room","fetch-more-rooms"],data(){return{filteredRooms:this.rooms||[],observer:null,showLoader:!0,loadingMoreRooms:!1,selectedRoomId:""}},watch:{rooms:{deep:!0,handler(e,t){this.filteredRooms=e,(e.length!==t.length||this.roomsLoaded)&&(this.loadingMoreRooms=!1)}},loadingRooms(e){e||setTimeout(()=>this.initIntersectionObserver())},loadingMoreRooms(e){this.$emit("loading-more-rooms",e)},roomsLoaded:{immediate:!0,handler(e){e&&(this.loadingMoreRooms=!1,this.loadingRooms||(this.showLoader=!1))}},room:{immediate:!0,handler(e){e&&!this.isMobile&&(this.selectedRoomId=e.roomId)}}},methods:{initIntersectionObserver(){this.observer&&(this.showLoader=!0,this.observer.disconnect());const e=this.$el.querySelector("#infinite-loader-rooms");if(e){const t={root:this.$el.querySelector("#rooms-list"),rootMargin:`${this.scrollDistance}px`,threshold:0};this.observer=new IntersectionObserver(r=>{r[0].isIntersecting&&this.loadMoreRooms()},t),this.observer.observe(e)}},searchRoom(e){this.customSearchRoomEnabled?this.$emit("search-room",e.target.value):this.filteredRooms=gh(this.rooms,"roomName",e.target.value)},openRoom(e){e.roomId===this.room.roomId&&!this.isMobile||(this.isMobile||(this.selectedRoomId=e.roomId),this.$emit("fetch-room",{room:e}))},loadMoreRooms(){if(!this.loadingMoreRooms){if(this.roomsLoaded){this.loadingMoreRooms=!1,this.showLoader=!1;return}this.$emit("fetch-more-rooms"),this.loadingMoreRooms=!0}}}},S6={key:0,class:"vac-rooms-empty"},C6={key:1,id:"rooms-list",class:"vac-room-list"},x6=["id","onClick"],E6={key:0,id:"infinite-loader-rooms"};function A6(e,t,r,n,i,s){const a=Ge("rooms-search"),o=Ge("loader"),l=Ge("room-content");return Gn((ye(),Te("div",{class:at(["vac-rooms-container",{"vac-rooms-container-full":r.isMobile,"vac-app-border-r":!r.isMobile}])},[Ue(e.$slots,"rooms-header"),Ue(e.$slots,"rooms-list-search",{},()=>[Ve(a,{rooms:r.rooms,"loading-rooms":r.loadingRooms,"text-messages":r.textMessages,"show-search":r.showSearch,"show-add-room":r.showAddRoom,onSearchRoom:s.searchRoom,onAddRoom:t[0]||(t[0]=u=>e.$emit("add-room"))},Lt({_:2},[st(e.$slots,(u,f)=>({name:f,fn:Xe(c=>[Ue(e.$slots,f,Mt(kt(c)))])}))]),1032,["rooms","loading-rooms","text-messages","show-search","show-add-room","onSearchRoom"])]),Ve(o,{show:r.loadingRooms,type:"rooms"},Lt({_:2},[st(e.$slots,(u,f)=>({name:f,fn:Xe(c=>[Ue(e.$slots,f,Mt(kt(c)))])}))]),1032,["show"]),!r.loadingRooms&&!r.rooms.length?(ye(),Te("div",S6,[Ue(e.$slots,"rooms-empty",{},()=>[Xn(tt(r.textMessages.ROOMS_EMPTY),1)])])):Ne("",!0),r.loadingRooms?Ne("",!0):(ye(),Te("div",C6,[(ye(!0),Te(pt,null,st(i.filteredRooms,u=>(ye(),Te("div",{id:u.roomId,key:u.roomId,class:at(["vac-room-item",{"vac-room-selected":i.selectedRoomId===u.roomId}]),onClick:f=>s.openRoom(u)},[Ve(l,{"current-user-id":r.currentUserId,room:u,"text-formatting":r.textFormatting,"link-options":r.linkOptions,"text-messages":r.textMessages,"room-actions":r.roomActions,onRoomActionHandler:t[1]||(t[1]=f=>e.$emit("room-action-handler",f))},Lt({_:2},[st(e.$slots,(f,c)=>({name:c,fn:Xe(h=>[Ue(e.$slots,c,Mt(kt(h)))])}))]),1032,["current-user-id","room","text-formatting","link-options","text-messages","room-actions"])],10,x6))),128)),Ve(Zt,{name:"vac-fade-message"},{default:Xe(()=>[r.rooms.length&&!r.loadingRooms?(ye(),Te("div",E6,[Ve(o,{show:i.showLoader,infinite:!0,type:"infinite-rooms"},Lt({_:2},[st(e.$slots,(u,f)=>({name:f,fn:Xe(c=>[Ue(e.$slots,f,Mt(kt(c)))])}))]),1032,["show"])])):Ne("",!0)]),_:3})]))],2)),[[ru,r.showRoomsList]])}var R6=Pt(w6,[["render",A6]]);const k6={name:"RoomHeader",components:{SvgIcon:cr},directives:{clickOutside:su},props:{currentUserId:{type:[String,Number],required:!0},textMessages:{type:Object,required:!0},singleRoom:{type:Boolean,required:!0},showRoomsList:{type:Boolean,required:!0},isMobile:{type:Boolean,required:!0},roomInfoEnabled:{type:Boolean,required:!0},menuActions:{type:Array,required:!0},room:{type:Object,required:!0},messageSelectionEnabled:{type:Boolean,required:!0},messageSelectionActions:{type:Array,required:!0},selectedMessagesTotal:{type:Number,required:!0}},emits:["toggle-rooms-list","room-info","menu-action-handler","cancel-message-selection","message-selection-action-handler"],data(){return{menuOpened:!1,messageSelectionAnimationEnded:!0}},computed:{typingUsers(){return Iy(this.room,this.currentUserId,this.textMessages)},userStatus(){if(!this.room.users||this.room.users.length!==2)return;const e=this.room.users.find(r=>r._id!==this.currentUserId);if(!(e!=null&&e.status))return;let t="";return e.status.state==="online"?t=this.textMessages.IS_ONLINE:e.status.lastChanged&&(t=this.textMessages.LAST_SEEN+e.status.lastChanged),t}},watch:{messageSelectionEnabled(e){e?this.messageSelectionAnimationEnded=!1:setTimeout(()=>{this.messageSelectionAnimationEnded=!0},300)}},methods:{menuActionHandler(e){this.closeMenu(),this.$emit("menu-action-handler",e)},closeMenu(){this.menuOpened=!1},messageSelectionActionHandler(e){this.$emit("message-selection-action-handler",e)}}},T6={class:"vac-room-header vac-app-border-b"},M6={class:"vac-room-wrapper"},L6={key:0,class:"vac-room-selection"},B6=["id"],O6=["onClick"],I6={class:"vac-selection-button-count"},F6={class:"vac-text-ellipsis"},D6={class:"vac-room-name vac-text-ellipsis"},H6={key:0,class:"vac-room-info vac-text-ellipsis"},P6={key:1,class:"vac-room-info vac-text-ellipsis"},j6={key:0,class:"vac-menu-options"},N6={class:"vac-menu-list"},U6=["onClick"];function q6(e,t,r,n,i,s){const a=Ge("svg-icon"),o=Jc("click-outside");return ye(),Te("div",T6,[Ue(e.$slots,"room-header",{},()=>[He("div",M6,[Ve(Zt,{name:"vac-slide-up"},{default:Xe(()=>[r.messageSelectionEnabled?(ye(),Te("div",L6,[(ye(!0),Te(pt,null,st(r.messageSelectionActions,l=>(ye(),Te("div",{id:l.name,key:l.name},[He("div",{class:"vac-selection-button",onClick:u=>s.messageSelectionActionHandler(l)},[Xn(tt(l.title)+" ",1),He("span",I6,tt(r.selectedMessagesTotal),1)],8,O6)],8,B6))),128)),He("div",{class:"vac-selection-cancel vac-item-clickable",onClick:t[0]||(t[0]=l=>e.$emit("cancel-message-selection"))},tt(r.textMessages.CANCEL_SELECT_MESSAGE),1)])):Ne("",!0)]),_:1}),!r.messageSelectionEnabled&&i.messageSelectionAnimationEnded?(ye(),Te(pt,{key:0},[r.singleRoom?Ne("",!0):(ye(),Te("div",{key:0,class:at(["vac-svg-button vac-toggle-button",{"vac-rotate-icon-init":!r.isMobile,"vac-rotate-icon":!r.showRoomsList&&!r.isMobile}]),onClick:t[1]||(t[1]=l=>e.$emit("toggle-rooms-list"))},[Ue(e.$slots,"toggle-icon",{},()=>[Ve(a,{name:"toggle"})])],2)),He("div",{class:at(["vac-info-wrapper",{"vac-item-clickable":r.roomInfoEnabled}]),onClick:t[2]||(t[2]=l=>e.$emit("room-info"))},[Ue(e.$slots,"room-header-avatar",{},()=>[r.room.avatar?(ye(),Te("div",{key:0,class:"vac-avatar",style:Ut({"background-image":`url('${r.room.avatar}')`})},null,4)):Ne("",!0)]),Ue(e.$slots,"room-header-info",{},()=>[He("div",F6,[He("div",D6,tt(r.room.roomName),1),s.typingUsers?(ye(),Te("div",H6,tt(s.typingUsers),1)):(ye(),Te("div",P6,tt(s.userStatus),1))])])],2),r.room.roomId?Ue(e.$slots,"room-options",{key:1},()=>[r.menuActions.length?(ye(),Te("div",{key:0,class:"vac-svg-button vac-room-options",onClick:t[3]||(t[3]=l=>i.menuOpened=!i.menuOpened)},[Ue(e.$slots,"menu-icon",{},()=>[Ve(a,{name:"menu"})])])):Ne("",!0),r.menuActions.length?(ye(),Rt(Zt,{key:1,name:"vac-slide-left"},{default:Xe(()=>[i.menuOpened?Gn((ye(),Te("div",j6,[He("div",N6,[(ye(!0),Te(pt,null,st(r.menuActions,l=>(ye(),Te("div",{key:l.name},[He("div",{class:"vac-menu-item",onClick:u=>s.menuActionHandler(l)},tt(l.title),9,U6)]))),128))])])),[[o,s.closeMenu]]):Ne("",!0)]),_:1})):Ne("",!0)]):Ne("",!0)],64)):Ne("",!0)])])])}var z6=Pt(k6,[["render",q6]]);function Rl(e){if(typeof e!="string"||!e)throw new Error("expected a non-empty string, got: "+e)}function gf(e){if(typeof e!="number")throw new Error("expected a number, got: "+e)}const V6=1,$6=1,ps="emoji",co="keyvalue",Fd="favorites",W6="tokens",Fy="tokens",K6="unicode",Dy="count",Y6="group",G6="order",Hy="group-order",vh="eTag",bc="url",lm="skinTone",go="readonly",Dd="readwrite",Py="skinUnicodes",X6="skinUnicodes",Z6="https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json",Q6="en";function J6(e,t){const r=new Set,n=[];for(const i of e){const s=t(i);r.has(s)||(r.add(s),n.push(i))}return n}function cm(e){return J6(e,t=>t.unicode)}function eE(e){function t(r,n,i){const s=n?e.createObjectStore(r,{keyPath:n}):e.createObjectStore(r);if(i)for(const[a,[o,l]]of Object.entries(i))s.createIndex(a,o,{multiEntry:l});return s}t(co),t(ps,K6,{[Fy]:[W6,!0],[Hy]:[[Y6,G6]],[Py]:[X6,!0]}),t(Fd,void 0,{[Dy]:[""]})}const yh={},Zl={},wc={};function jy(e,t,r){r.onerror=()=>t(r.error),r.onblocked=()=>t(new Error("IDB blocked")),r.onsuccess=()=>e(r.result)}async function tE(e){const t=await new Promise((r,n)=>{const i=indexedDB.open(e,V6);yh[e]=i,i.onupgradeneeded=s=>{s.oldVersion<$6&&eE(i.result)},jy(r,n,i)});return t.onclose=()=>Hd(e),t}function rE(e){return Zl[e]||(Zl[e]=tE(e)),Zl[e]}function ri(e,t,r,n){return new Promise((i,s)=>{const a=e.transaction(t,r,{durability:"relaxed"}),o=typeof t=="string"?a.objectStore(t):t.map(u=>a.objectStore(u));let l;n(o,a,u=>{l=u}),a.oncomplete=()=>i(l),a.onerror=()=>s(a.error)})}function Hd(e){const t=yh[e],r=t&&t.result;if(r){r.close();const n=wc[e];if(n)for(const i of n)i()}delete yh[e],delete Zl[e],delete wc[e]}function nE(e){return new Promise((t,r)=>{Hd(e);const n=indexedDB.deleteDatabase(e);jy(t,r,n)})}function iE(e,t){let r=wc[e];r||(r=wc[e]=[]),r.push(t)}const sE=new Set([":D","XD",":'D","O:)",":X",":P",";P","XP",":L",":Z",":j","8D","XO","8)",":B",":O",":S",":'o","Dx","X(","D:",":C",">0)",":3","</3","<3","\\M/",":E","8#"]);function no(e){return e.split(/[\s_]+/).map(t=>!t.match(/\w/)||sE.has(t)?t.toLowerCase():t.replace(/[)(:,]/g,"").replace(/’/g,"'").toLowerCase()).filter(Boolean)}const oE=2;function Ny(e){return e.filter(Boolean).map(t=>t.toLowerCase()).filter(t=>t.length>=oE)}function aE(e){return e.map(({annotation:r,emoticon:n,group:i,order:s,shortcodes:a,skins:o,tags:l,emoji:u,version:f})=>{const c=[...new Set(Ny([...(a||[]).map(no).flat(),...l.map(no).flat(),...no(r),n]))].sort(),h={annotation:r,group:i,order:s,tags:l,tokens:c,unicode:u,version:f};if(n&&(h.emoticon=n),a&&(h.shortcodes=a),o){h.skinTones=[],h.skinUnicodes=[],h.skinVersions=[];for(const{tone:d,emoji:p,version:v}of o)h.skinTones.push(d),h.skinUnicodes.push(p),h.skinVersions.push(v)}return h})}function Uy(e,t,r,n){e[t](r).onsuccess=i=>n&&n(i.target.result)}function hs(e,t,r){Uy(e,"get",t,r)}function qy(e,t,r){Uy(e,"getAll",t,r)}function Pd(e){e.commit&&e.commit()}function lE(e,t){let r=e[0];for(let n=1;n<e.length;n++){const i=e[n];t(r)>t(i)&&(r=i)}return r}function zy(e,t){const r=lE(e,i=>i.length),n=[];for(const i of r)e.some(s=>s.findIndex(a=>t(a)===t(i))===-1)||n.push(i);return n}async function cE(e){return!await jd(e,co,bc)}async function uE(e,t,r){const[n,i]=await Promise.all([vh,bc].map(s=>jd(e,co,s)));return n===r&&i===t}async function fE(e,t){return ri(e,ps,go,(n,i,s)=>{let a;const o=()=>{n.getAll(a&&IDBKeyRange.lowerBound(a,!0),50).onsuccess=l=>{const u=l.target.result;for(const f of u)if(a=f.unicode,t(f))return s(f);if(u.length<50)return s();o()}};o()})}async function Vy(e,t,r,n){try{const i=aE(t);await ri(e,[ps,co],Dd,([s,a],o)=>{let l,u,f=0;function c(){++f===2&&h()}function h(){if(!(l===n&&u===r)){s.clear();for(const d of i)s.put(d);a.put(n,vh),a.put(r,bc),Pd(o)}}hs(a,vh,d=>{l=d,c()}),hs(a,bc,d=>{u=d,c()})})}finally{}}async function hE(e,t){return ri(e,ps,go,(r,n,i)=>{const s=IDBKeyRange.bound([t,0],[t+1,0],!1,!0);qy(r.index(Hy),s,i)})}async function $y(e,t){const r=Ny(no(t));return r.length?ri(e,ps,go,(n,i,s)=>{const a=[],o=()=>{a.length===r.length&&l()},l=()=>{const u=zy(a,f=>f.unicode);s(u.sort((f,c)=>f.order<c.order?-1:1))};for(let u=0;u<r.length;u++){const f=r[u],c=u===r.length-1?IDBKeyRange.bound(f,f+"￿",!1,!0):IDBKeyRange.only(f);qy(n.index(Fy),c,h=>{a.push(h),o()})}}):[]}async function dE(e,t){const r=await $y(e,t);return r.length?r.filter(n=>(n.shortcodes||[]).map(s=>s.toLowerCase()).includes(t.toLowerCase()))[0]||null:await fE(e,i=>(i.shortcodes||[]).includes(t.toLowerCase()))||null}async function pE(e,t){return ri(e,ps,go,(r,n,i)=>hs(r,t,s=>{if(s)return i(s);hs(r.index(Py),t,a=>i(a||null))}))}function jd(e,t,r){return ri(e,t,go,(n,i,s)=>hs(n,r,s))}function mE(e,t,r,n){return ri(e,t,Dd,(i,s)=>{i.put(n,r),Pd(s)})}function _E(e,t){return ri(e,Fd,Dd,(r,n)=>hs(r,t,i=>{r.put((i||0)+1,t),Pd(n)}))}function gE(e,t,r){return r===0?[]:ri(e,[Fd,ps],go,([n,i],s,a)=>{const o=[];n.index(Dy).openCursor(void 0,"prev").onsuccess=l=>{const u=l.target.result;if(!u)return a(o);function f(d){if(o.push(d),o.length===r)return a(o);u.continue()}const c=u.primaryKey,h=t.byName(c);if(h)return f(h);hs(i,c,d=>{if(d)return f(d);u.continue()})}})}const kl="";function vE(e,t){const r=new Map;for(const i of e){const s=t(i);for(const a of s){let o=r;for(let u=0;u<a.length;u++){const f=a.charAt(u);let c=o.get(f);c||(c=new Map,o.set(f,c)),o=c}let l=o.get(kl);l||(l=[],o.set(kl,l)),l.push(i)}}return(i,s)=>{let a=r;for(let u=0;u<i.length;u++){const f=i.charAt(u),c=a.get(f);if(c)a=c;else return[]}if(s)return a.get(kl)||[];const o=[],l=[a];for(;l.length;){const f=[...l.shift().entries()].sort((c,h)=>c[0]<h[0]?-1:1);for(const[c,h]of f)c===kl?o.push(...h):l.push(h)}return o}}const yE=["name","url"];function bE(e){const t=e&&Array.isArray(e),r=t&&e.length&&(!e[0]||yE.some(n=>!(n in e[0])));if(!t||r)throw new Error("Custom emojis are in the wrong format")}function um(e){bE(e);const t=(h,d)=>h.name.toLowerCase()<d.name.toLowerCase()?-1:1,r=e.sort(t),i=vE(e,h=>[...new Set((h.shortcodes||[]).map(d=>no(d)).flat())]),s=h=>i(h,!0),a=h=>i(h,!1),o=h=>{const d=no(h),p=d.map((v,_)=>(_<d.length-1?s:a)(v));return zy(p,v=>v.name).sort(t)},l=new Map,u=new Map;for(const h of e){u.set(h.name.toLowerCase(),h);for(const d of h.shortcodes||[])l.set(d.toLowerCase(),h)}return{all:r,search:o,byShortcode:h=>l.get(h.toLowerCase()),byName:h=>u.get(h.toLowerCase())}}function Oo(e){if(!e)return e;if(delete e.tokens,e.skinTones){const t=e.skinTones.length;e.skins=Array(t);for(let r=0;r<t;r++)e.skins[r]={tone:e.skinTones[r],unicode:e.skinUnicodes[r],version:e.skinVersions[r]};delete e.skinTones,delete e.skinUnicodes,delete e.skinVersions}return e}function Wy(e){e||console.warn("emoji-picker-element is more efficient if the dataSource server exposes an ETag header.")}const wE=["annotation","emoji","group","order","tags","version"];function SE(e){if(!e||!Array.isArray(e)||!e[0]||typeof e[0]!="object"||wE.some(t=>!(t in e[0])))throw new Error("Emoji data is in the wrong format")}function Ky(e,t){if(Math.floor(e.status/100)!==2)throw new Error("Failed to fetch: "+t+":  "+e.status)}async function CE(e){const t=await fetch(e,{method:"HEAD"});Ky(t,e);const r=t.headers.get("etag");return Wy(r),r}async function bh(e){const t=await fetch(e);Ky(t,e);const r=t.headers.get("etag");Wy(r);const n=await t.json();return SE(n),[r,n]}function xE(e){for(var t="",r=new Uint8Array(e),n=r.byteLength,i=-1;++i<n;)t+=String.fromCharCode(r[i]);return t}function EE(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r),i=-1;++i<t;)n[i]=e.charCodeAt(i);return r}async function Yy(e){const t=JSON.stringify(e),r=EE(t),n=await crypto.subtle.digest("SHA-1",r),i=xE(n);return btoa(i)}async function AE(e,t){let r,n=await CE(t);if(!n){const i=await bh(t);n=i[0],r=i[1],n||(n=await Yy(r))}await uE(e,t,n)||(r||(r=(await bh(t))[1]),await Vy(e,r,t,n))}async function RE(e,t){let[r,n]=await bh(t);r||(r=await Yy(n)),await Vy(e,n,t,r)}class Gy{constructor({dataSource:t=Z6,locale:r=Q6,customEmoji:n=[]}={}){this.dataSource=t,this.locale=r,this._dbName=`emoji-picker-element-${this.locale}`,this._db=void 0,this._lazyUpdate=void 0,this._custom=um(n),this._clear=this._clear.bind(this),this._ready=this._init()}async _init(){const t=this._db=await rE(this._dbName);iE(this._dbName,this._clear);const r=this.dataSource;await cE(t)?await RE(t,r):this._lazyUpdate=AE(t,r)}async ready(){const t=async()=>(this._ready||(this._ready=this._init()),this._ready);await t(),this._db||await t()}async getEmojiByGroup(t){return gf(t),await this.ready(),cm(await hE(this._db,t)).map(Oo)}async getEmojiBySearchQuery(t){Rl(t),await this.ready();const r=this._custom.search(t),n=cm(await $y(this._db,t)).map(Oo);return[...r,...n]}async getEmojiByShortcode(t){Rl(t),await this.ready();const r=this._custom.byShortcode(t);return r||Oo(await dE(this._db,t))}async getEmojiByUnicodeOrName(t){Rl(t),await this.ready();const r=this._custom.byName(t);return r||Oo(await pE(this._db,t))}async getPreferredSkinTone(){return await this.ready(),await jd(this._db,co,lm)||0}async setPreferredSkinTone(t){return gf(t),await this.ready(),mE(this._db,co,lm,t)}async incrementFavoriteEmojiCount(t){return Rl(t),await this.ready(),_E(this._db,t)}async getTopFavoriteEmoji(t){return gf(t),await this.ready(),(await gE(this._db,this._custom,t)).map(Oo)}set customEmoji(t){this._custom=um(t)}get customEmoji(){return this._custom.all}async _shutdown(){await this.ready();try{await this._lazyUpdate}catch{}}_clear(){this._db=this._ready=this._lazyUpdate=void 0}async close(){await this._shutdown(),await Hd(this._dbName)}async delete(){await this._shutdown(),await nE(this._dbName)}}function xa(){}function Xy(e){return e()}function fm(){return Object.create(null)}function Ua(e){e.forEach(Xy)}function Zy(e){return typeof e=="function"}function kE(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let Tl;function Sc(e,t){return Tl||(Tl=document.createElement("a")),Tl.href=t,e===Tl.href}function TE(e){return Object.keys(e).length===0}function ME(e){return e&&Zy(e.destroy)?e.destroy:xa}function Ot(e,t){e.appendChild(t)}function un(e,t,r){e.insertBefore(t,r||null)}function fn(e){e.parentNode.removeChild(e)}function Tt(e){return document.createElement(e)}function xn(e){return document.createTextNode(e)}function rn(e,t,r,n){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r,n)}function Ce(e,t,r){r==null?e.removeAttribute(t):e.getAttribute(t)!==r&&e.setAttribute(t,r)}function En(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function hm(e,t){e.value=t??""}function ai(e,t,r,n){r===null?e.style.removeProperty(t):e.style.setProperty(t,r,"")}let Nd;function aa(e){Nd=e}const Vo=[],Ks=[],Ql=[],dm=[],Qy=Promise.resolve();let wh=!1;function Jy(){wh||(wh=!0,Qy.then(eb))}function LE(){return Jy(),Qy}function Sh(e){Ql.push(e)}const vf=new Set;let Ml=0;function eb(){const e=Nd;do{for(;Ml<Vo.length;){const t=Vo[Ml];Ml++,aa(t),BE(t.$$)}for(aa(null),Vo.length=0,Ml=0;Ks.length;)Ks.pop()();for(let t=0;t<Ql.length;t+=1){const r=Ql[t];vf.has(r)||(vf.add(r),r())}Ql.length=0}while(Vo.length);for(;dm.length;)dm.pop()();wh=!1,vf.clear(),aa(e)}function BE(e){if(e.fragment!==null){e.update(),Ua(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Sh)}}const OE=new Set;function IE(e,t){e&&e.i&&(OE.delete(e),e.i(t))}const FE=typeof window<"u"?window:globalThis;function $o(e,t){e.d(1),t.delete(e.key)}function Wo(e,t,r,n,i,s,a,o,l,u,f,c){let h=e.length,d=s.length,p=h;const v={};for(;p--;)v[e[p].key]=p;const _=[],m=new Map,g=new Map;for(p=d;p--;){const M=c(i,s,p),F=r(M);let D=a.get(F);D?D.p(M,t):(D=u(F,M),D.c()),m.set(F,_[p]=D),F in v&&g.set(F,Math.abs(p-v[F]))}const x=new Set,L=new Set;function y(M){IE(M,1),M.m(o,f),a.set(M.key,M),f=M.first,d--}for(;h&&d;){const M=_[d-1],F=e[h-1],D=M.key,H=F.key;M===F?(f=M.first,h--,d--):m.has(H)?!a.has(D)||x.has(D)?y(M):L.has(H)?h--:g.get(D)>g.get(H)?(L.add(D),y(M)):(x.add(H),h--):(l(F,a),h--)}for(;h--;){const M=e[h];m.has(M.key)||l(M,a)}for(;d;)y(_[d-1]);return _}function DE(e,t,r,n){const{fragment:i,on_mount:s,on_destroy:a,after_update:o}=e.$$;i&&i.m(t,r),Sh(()=>{const l=s.map(Xy).filter(Zy);a?a.push(...l):Ua(l),e.$$.on_mount=[]}),o.forEach(Sh)}function HE(e,t){const r=e.$$;r.fragment!==null&&(Ua(r.on_destroy),r.fragment&&r.fragment.d(t),r.on_destroy=r.fragment=null,r.ctx=[])}function PE(e,t){e.$$.dirty[0]===-1&&(Vo.push(e),Jy(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function jE(e,t,r,n,i,s,a,o=[-1]){const l=Nd;aa(e);const u=e.$$={fragment:null,ctx:null,props:s,update:xa,not_equal:i,bound:fm(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:[]),callbacks:fm(),dirty:o,skip_bound:!1,root:t.target||l.$$.root};let f=!1;u.ctx=r?r(e,t.props||{},(c,h,...d)=>{const p=d.length?d[0]:h;return u.ctx&&i(u.ctx[c],u.ctx[c]=p)&&(!u.skip_bound&&u.bound[c]&&u.bound[c](p),f&&PE(e,c)),h}):[],u.update(),f=!0,Ua(u.before_update),u.fragment=n?n(u.ctx):!1,t.target&&(u.fragment&&u.fragment.c(),DE(e,t.target,void 0),eb()),aa(l)}class NE{$destroy(){HE(this,1),this.$destroy=xa}$on(t,r){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(r),()=>{const i=n.indexOf(r);i!==-1&&n.splice(i,1)}}$set(t){this.$$set&&!TE(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const tb=[[-1,"✨","custom"],[0,"😀","smileys-emotion"],[1,"👋","people-body"],[3,"🐱","animals-nature"],[4,"🍎","food-drink"],[5,"🏠️","travel-places"],[6,"⚽","activities"],[7,"📝","objects"],[8,"⛔️","symbols"],[9,"🏁","flags"]].map(([e,t,r])=>({id:e,emoji:t,name:r})),Ll=tb.slice(1),UE=tb[0],qE=2,pm=6,rb=typeof requestIdleCallback=="function"?requestIdleCallback:setTimeout;function mm(e){return e.unicode.includes("‍")}const zE={"🫠":14,"🥲":13.1,"🥻":12.1,"🥰":11,"🤩":5,"👱‍♀️":4,"🤣":3,"👁️‍🗨️":2,"😀":1,"😐️":.7,"😃":.6},VE=1e3,$E="🖐️",WE=8,KE=["😊","😒","♥️","👍️","😍","😂","😭","☺️","😔","😩","😏","💕","🙌","😘"],nb='"Twemoji Mozilla","Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji","EmojiOne Color","Android Emoji",sans-serif',YE=(e,t)=>e<t?-1:e>t?1:0,_m=(e,t)=>{const r=document.createElement("canvas");r.width=r.height=1;const n=r.getContext("2d");return n.textBaseline="top",n.font=`100px ${nb}`,n.fillStyle=t,n.scale(.01,.01),n.fillText(e,0,0),n.getImageData(0,0,1,1).data},GE=(e,t)=>{const r=[...e].join(","),n=[...t].join(",");return r===n&&!r.startsWith("0,0,0,")};function XE(e){const t=_m(e,"#000"),r=_m(e,"#fff");return t&&r&&GE(t,r)}function ZE(){const e=Object.entries(zE);try{for(const[t,r]of e)if(XE(t))return r}catch{}finally{}return e[0][1]}const yf=new Promise(e=>rb(()=>e(ZE()))),Ch=new Map,QE="️",JE="\uD83C",e7="‍",t7=127995,r7=57339;function n7(e,t){if(t===0)return e;const r=e.indexOf(e7);return r!==-1?e.substring(0,r)+String.fromCodePoint(t7+t-1)+e.substring(r):(e.endsWith(QE)&&(e=e.substring(0,e.length-1)),e+JE+String.fromCodePoint(r7+t-1))}function li(e){e.preventDefault(),e.stopPropagation()}function bf(e,t,r){return t+=e?-1:1,t<0?t=r.length-1:t>=r.length&&(t=0),t}function ib(e,t){const r=new Set,n=[];for(const i of e){const s=t(i);r.has(s)||(r.add(s),n.push(i))}return n}function i7(e,t){const r=n=>{const i={};for(const s of n)typeof s.tone=="number"&&s.version<=t&&(i[s.tone]=s.unicode);return i};return e.map(({unicode:n,skins:i,shortcodes:s,url:a,name:o,category:l})=>({unicode:n,name:o,shortcodes:s,url:a,category:l,id:n||o,skins:i&&r(i),title:(s||[]).join(", ")}))}const Jl=requestAnimationFrame;let s7=typeof ResizeObserver=="function";function o7(e,t){let r;return s7?(r=new ResizeObserver(n=>t(n[0].contentRect.width)),r.observe(e)):Jl(()=>t(e.getBoundingClientRect().width)),{destroy(){r&&r.disconnect()}}}function gm(e){{const t=document.createRange();return t.selectNode(e.firstChild),t.getBoundingClientRect().width}}let wf;function a7(e,t,r){for(const n of e){const i=r(n),s=gm(i);typeof wf>"u"&&(wf=gm(t));const a=s/1.8<wf;Ch.set(n.unicode,a)}}function l7(e){return ib(e,t=>t)}const{Map:Ko}=FE;function vm(e,t,r){const n=e.slice();return n[63]=t[r],n[65]=r,n}function ym(e,t,r){const n=e.slice();return n[66]=t[r],n[65]=r,n}function bm(e,t,r){const n=e.slice();return n[63]=t[r],n[65]=r,n}function wm(e,t,r){const n=e.slice();return n[69]=t[r],n}function Sm(e,t,r){const n=e.slice();return n[72]=t[r],n[65]=r,n}function Cm(e,t){let r,n=t[72]+"",i,s,a,o,l,u;return{key:e,first:null,c(){r=Tt("div"),i=xn(n),Ce(r,"id",s="skintone-"+t[65]),Ce(r,"class",a="emoji hide-focus "+(t[65]===t[20]?"active":"")),Ce(r,"aria-selected",o=t[65]===t[20]),Ce(r,"role","option"),Ce(r,"title",l=t[0].skinTones[t[65]]),Ce(r,"tabindex","-1"),Ce(r,"aria-label",u=t[0].skinTones[t[65]]),this.first=r},m(f,c){un(f,r,c),Ot(r,i)},p(f,c){t=f,c[0]&512&&n!==(n=t[72]+"")&&En(i,n),c[0]&512&&s!==(s="skintone-"+t[65])&&Ce(r,"id",s),c[0]&1049088&&a!==(a="emoji hide-focus "+(t[65]===t[20]?"active":""))&&Ce(r,"class",a),c[0]&1049088&&o!==(o=t[65]===t[20])&&Ce(r,"aria-selected",o),c[0]&513&&l!==(l=t[0].skinTones[t[65]])&&Ce(r,"title",l),c[0]&513&&u!==(u=t[0].skinTones[t[65]])&&Ce(r,"aria-label",u)},d(f){f&&fn(r)}}}function xm(e,t){let r,n,i=t[69].emoji+"",s,a,o,l,u,f,c;function h(){return t[49](t[69])}return{key:e,first:null,c(){r=Tt("button"),n=Tt("div"),s=xn(i),Ce(n,"class","nav-emoji emoji"),Ce(r,"role","tab"),Ce(r,"class","nav-button"),Ce(r,"aria-controls",a="tab-"+t[69].id),Ce(r,"aria-label",o=t[0].categories[t[69].name]),Ce(r,"aria-selected",l=!t[4]&&t[13].id===t[69].id),Ce(r,"title",u=t[0].categories[t[69].name]),this.first=r},m(d,p){un(d,r,p),Ot(r,n),Ot(n,s),f||(c=rn(r,"click",h),f=!0)},p(d,p){t=d,p[0]&4096&&i!==(i=t[69].emoji+"")&&En(s,i),p[0]&4096&&a!==(a="tab-"+t[69].id)&&Ce(r,"aria-controls",a),p[0]&4097&&o!==(o=t[0].categories[t[69].name])&&Ce(r,"aria-label",o),p[0]&12304&&l!==(l=!t[4]&&t[13].id===t[69].id)&&Ce(r,"aria-selected",l),p[0]&4097&&u!==(u=t[0].categories[t[69].name])&&Ce(r,"title",u)},d(d){d&&fn(r),f=!1,c()}}}function c7(e){let t,r;return{c(){t=Tt("img"),Ce(t,"class","custom-emoji"),Sc(t.src,r=e[63].url)||Ce(t,"src",r),Ce(t,"alt",""),Ce(t,"loading","lazy")},m(n,i){un(n,t,i)},p(n,i){i[0]&32768&&!Sc(t.src,r=n[63].url)&&Ce(t,"src",r)},d(n){n&&fn(t)}}}function u7(e){let t=e[27](e[63],e[8])+"",r;return{c(){r=xn(t)},m(n,i){un(n,r,i)},p(n,i){i[0]&33024&&t!==(t=n[27](n[63],n[8])+"")&&En(r,t)},d(n){n&&fn(r)}}}function Em(e,t){let r,n,i,s,a,o,l;function u(h,d){return h[63].unicode?u7:c7}let f=u(t),c=f(t);return{key:e,first:null,c(){r=Tt("button"),c.c(),Ce(r,"role",n=t[4]?"option":"menuitem"),Ce(r,"aria-selected",i=t[4]?t[65]==t[5]:""),Ce(r,"aria-label",s=t[28](t[63],t[8])),Ce(r,"title",a=t[63].title),Ce(r,"class",o="emoji "+(t[4]&&t[65]===t[5]?"active":"")),Ce(r,"id",l="emo-"+t[63].id),this.first=r},m(h,d){un(h,r,d),c.m(r,null)},p(h,d){t=h,f===(f=u(t))&&c?c.p(t,d):(c.d(1),c=f(t),c&&(c.c(),c.m(r,null))),d[0]&16&&n!==(n=t[4]?"option":"menuitem")&&Ce(r,"role",n),d[0]&32816&&i!==(i=t[4]?t[65]==t[5]:"")&&Ce(r,"aria-selected",i),d[0]&33024&&s!==(s=t[28](t[63],t[8]))&&Ce(r,"aria-label",s),d[0]&32768&&a!==(a=t[63].title)&&Ce(r,"title",a),d[0]&32816&&o!==(o="emoji "+(t[4]&&t[65]===t[5]?"active":""))&&Ce(r,"class",o),d[0]&32768&&l!==(l="emo-"+t[63].id)&&Ce(r,"id",l)},d(h){h&&fn(r),c.d()}}}function Am(e,t){let r,n=(t[4]?t[0].searchResultsLabel:t[66].category?t[66].category:t[15].length>1?t[0].categories.custom:t[0].categories[t[13].name])+"",i,s,a,o,l=[],u=new Ko,f,c,h,d=t[66].emojis;const p=v=>v[63].id;for(let v=0;v<d.length;v+=1){let _=bm(t,d,v),m=p(_);u.set(m,l[v]=Em(m,_))}return{key:e,first:null,c(){r=Tt("div"),i=xn(n),o=Tt("div");for(let v=0;v<l.length;v+=1)l[v].c();Ce(r,"id",s="menu-label-"+t[65]),Ce(r,"class",a="category "+(t[15].length===1&&t[15][0].category===""?"gone":"")),Ce(r,"aria-hidden","true"),Ce(o,"class","emoji-menu"),Ce(o,"role",f=t[4]?"listbox":"menu"),Ce(o,"aria-labelledby",c="menu-label-"+t[65]),Ce(o,"id",h=t[4]?"search-results":""),this.first=r},m(v,_){un(v,r,_),Ot(r,i),un(v,o,_);for(let m=0;m<l.length;m+=1)l[m].m(o,null)},p(v,_){t=v,_[0]&40977&&n!==(n=(t[4]?t[0].searchResultsLabel:t[66].category?t[66].category:t[15].length>1?t[0].categories.custom:t[0].categories[t[13].name])+"")&&En(i,n),_[0]&32768&&s!==(s="menu-label-"+t[65])&&Ce(r,"id",s),_[0]&32768&&a!==(a="category "+(t[15].length===1&&t[15][0].category===""?"gone":""))&&Ce(r,"class",a),_[0]&402686256&&(d=t[66].emojis,l=Wo(l,_,p,1,t,d,u,o,$o,Em,null,bm)),_[0]&16&&f!==(f=t[4]?"listbox":"menu")&&Ce(o,"role",f),_[0]&32768&&c!==(c="menu-label-"+t[65])&&Ce(o,"aria-labelledby",c),_[0]&16&&h!==(h=t[4]?"search-results":"")&&Ce(o,"id",h)},d(v){v&&fn(r),v&&fn(o);for(let _=0;_<l.length;_+=1)l[_].d()}}}function f7(e){let t,r;return{c(){t=Tt("img"),Ce(t,"class","custom-emoji"),Sc(t.src,r=e[63].url)||Ce(t,"src",r),Ce(t,"alt",""),Ce(t,"loading","lazy")},m(n,i){un(n,t,i)},p(n,i){i[0]&1024&&!Sc(t.src,r=n[63].url)&&Ce(t,"src",r)},d(n){n&&fn(t)}}}function h7(e){let t=e[27](e[63],e[8])+"",r;return{c(){r=xn(t)},m(n,i){un(n,r,i)},p(n,i){i[0]&1280&&t!==(t=n[27](n[63],n[8])+"")&&En(r,t)},d(n){n&&fn(r)}}}function Rm(e,t){let r,n,i,s;function a(u,f){return u[63].unicode?h7:f7}let o=a(t),l=o(t);return{key:e,first:null,c(){r=Tt("button"),l.c(),Ce(r,"role","menuitem"),Ce(r,"aria-label",n=t[28](t[63],t[8])),Ce(r,"title",i=t[63].title),Ce(r,"class","emoji"),Ce(r,"id",s="fav-"+t[63].id),this.first=r},m(u,f){un(u,r,f),l.m(r,null)},p(u,f){t=u,o===(o=a(t))&&l?l.p(t,f):(l.d(1),l=o(t),l&&(l.c(),l.m(r,null))),f[0]&1280&&n!==(n=t[28](t[63],t[8]))&&Ce(r,"aria-label",n),f[0]&1024&&i!==(i=t[63].title)&&Ce(r,"title",i),f[0]&1024&&s!==(s="fav-"+t[63].id)&&Ce(r,"id",s)},d(u){u&&fn(r),l.d()}}}function d7(e){let t,r,n,i,s,a,o,l,u,f=e[0].searchLabel+"",c,h,d=e[0].searchDescription+"",p,v,_,m,g,x,L,y=e[0].skinToneDescription+"",M,F,D=[],H=new Ko,b,R,A,k,O,B=[],$=new Ko,Q,X,oe,w,P,ce,V,le,Y=[],Z=new Ko,I,K,ee,ae,Me,S=[],E=new Ko,N,W,re,ne,de,pe,me=e[9];const fe=C=>C[72];for(let C=0;C<me.length;C+=1){let T=Sm(e,me,C),q=fe(T);H.set(q,D[C]=Cm(q,T))}let ke=e[12];const we=C=>C[69].id;for(let C=0;C<ke.length;C+=1){let T=wm(e,ke,C),q=we(T);$.set(q,B[C]=xm(q,T))}let Re=e[15];const Oe=C=>C[66].category;for(let C=0;C<Re.length;C+=1){let T=ym(e,Re,C),q=Oe(T);Z.set(q,Y[C]=Am(q,T))}let Pe=e[10];const z=C=>C[63].id;for(let C=0;C<Pe.length;C+=1){let T=vm(e,Pe,C),q=z(T);E.set(q,S[C]=Rm(q,T))}return{c(){t=Tt("section"),r=Tt("div"),n=Tt("div"),i=Tt("div"),s=Tt("input"),u=Tt("label"),c=xn(f),h=Tt("span"),p=xn(d),v=Tt("div"),_=Tt("button"),m=xn(e[21]),L=Tt("span"),M=xn(y),F=Tt("div");for(let C=0;C<D.length;C+=1)D[C].c();O=Tt("div");for(let C=0;C<B.length;C+=1)B[C].c();X=Tt("div"),oe=Tt("div"),w=Tt("div"),P=xn(e[18]),V=Tt("div"),le=Tt("div");for(let C=0;C<Y.length;C+=1)Y[C].c();Me=Tt("div");for(let C=0;C<S.length;C+=1)S[C].c();re=Tt("button"),re.textContent="😀",Ce(r,"class","pad-top"),Ce(s,"id","search"),Ce(s,"class","search"),Ce(s,"type","search"),Ce(s,"role","combobox"),Ce(s,"enterkeyhint","search"),Ce(s,"placeholder",a=e[0].searchLabel),Ce(s,"autocapitalize","none"),Ce(s,"autocomplete","off"),Ce(s,"spellcheck","true"),Ce(s,"aria-expanded",o=!!(e[4]&&e[1].length)),Ce(s,"aria-controls","search-results"),Ce(s,"aria-describedby","search-description"),Ce(s,"aria-autocomplete","list"),Ce(s,"aria-activedescendant",l=e[26]?`emo-${e[26]}`:""),Ce(u,"class","sr-only"),Ce(u,"for","search"),Ce(h,"id","search-description"),Ce(h,"class","sr-only"),Ce(i,"class","search-wrapper"),Ce(_,"id","skintone-button"),Ce(_,"class",g="emoji "+(e[6]?"hide-focus":"")),Ce(_,"aria-label",e[23]),Ce(_,"title",e[23]),Ce(_,"aria-describedby","skintone-description"),Ce(_,"aria-haspopup","listbox"),Ce(_,"aria-expanded",e[6]),Ce(_,"aria-controls","skintone-list"),Ce(v,"class",x="skintone-button-wrapper "+(e[19]?"expanded":"")),Ce(L,"id","skintone-description"),Ce(L,"class","sr-only"),Ce(F,"id","skintone-list"),Ce(F,"class",b="skintone-list "+(e[6]?"":"hidden no-animate")),ai(F,"transform","translateY("+(e[6]?0:"calc(-1 * var(--num-skintones) * var(--total-emoji-size))")+")"),Ce(F,"role","listbox"),Ce(F,"aria-label",R=e[0].skinTonesLabel),Ce(F,"aria-activedescendant",A="skintone-"+e[20]),Ce(F,"aria-hidden",k=!e[6]),Ce(n,"class","search-row"),Ce(O,"class","nav"),Ce(O,"role","tablist"),ai(O,"grid-template-columns","repeat("+e[12].length+", 1fr)"),Ce(O,"aria-label",Q=e[0].categoriesLabel),Ce(oe,"class","indicator"),ai(oe,"transform","translateX("+(e[24]?-1:1)*e[11]*100+"%)"),Ce(X,"class","indicator-wrapper"),Ce(w,"class",ce="message "+(e[18]?"":"gone")),Ce(w,"role","alert"),Ce(w,"aria-live","polite"),Ce(V,"class",I="tabpanel "+(!e[14]||e[18]?"gone":"")),Ce(V,"role",K=e[4]?"region":"tabpanel"),Ce(V,"aria-label",ee=e[4]?e[0].searchResultsLabel:e[0].categories[e[13].name]),Ce(V,"id",ae=e[4]?"":`tab-${e[13].id}`),Ce(V,"tabindex","0"),Ce(Me,"class",N="favorites emoji-menu "+(e[18]?"gone":"")),Ce(Me,"role","menu"),Ce(Me,"aria-label",W=e[0].favoritesLabel),ai(Me,"padding-inline-end",e[25]+"px"),Ce(re,"aria-hidden","true"),Ce(re,"tabindex","-1"),Ce(re,"class","abs-pos hidden emoji"),Ce(t,"class","picker"),Ce(t,"aria-label",ne=e[0].regionLabel),Ce(t,"style",e[22])},m(C,T){un(C,t,T),Ot(t,r),Ot(t,n),Ot(n,i),Ot(i,s),hm(s,e[2]),Ot(i,u),Ot(u,c),Ot(i,h),Ot(h,p),Ot(n,v),Ot(v,_),Ot(_,m),Ot(n,L),Ot(L,M),Ot(n,F);for(let q=0;q<D.length;q+=1)D[q].m(F,null);e[48](F),Ot(t,O);for(let q=0;q<B.length;q+=1)B[q].m(O,null);Ot(t,X),Ot(X,oe),Ot(t,w),Ot(w,P),Ot(t,V),Ot(V,le);for(let q=0;q<Y.length;q+=1)Y[q].m(le,null);e[50](V),Ot(t,Me);for(let q=0;q<S.length;q+=1)S[q].m(Me,null);Ot(t,re),e[51](re),e[52](t),de||(pe=[rn(s,"input",e[47]),rn(s,"keydown",e[30]),rn(_,"click",e[35]),rn(F,"focusout",e[38]),rn(F,"click",e[34]),rn(F,"keydown",e[36]),rn(F,"keyup",e[37]),rn(O,"keydown",e[32]),ME(e[29].call(null,le)),rn(V,"click",e[33]),rn(Me,"click",e[33])],de=!0)},p(C,T){T[0]&1&&a!==(a=C[0].searchLabel)&&Ce(s,"placeholder",a),T[0]&18&&o!==(o=!!(C[4]&&C[1].length))&&Ce(s,"aria-expanded",o),T[0]&67108864&&l!==(l=C[26]?`emo-${C[26]}`:"")&&Ce(s,"aria-activedescendant",l),T[0]&4&&hm(s,C[2]),T[0]&1&&f!==(f=C[0].searchLabel+"")&&En(c,f),T[0]&1&&d!==(d=C[0].searchDescription+"")&&En(p,d),T[0]&2097152&&En(m,C[21]),T[0]&64&&g!==(g="emoji "+(C[6]?"hide-focus":""))&&Ce(_,"class",g),T[0]&8388608&&Ce(_,"aria-label",C[23]),T[0]&8388608&&Ce(_,"title",C[23]),T[0]&64&&Ce(_,"aria-expanded",C[6]),T[0]&524288&&x!==(x="skintone-button-wrapper "+(C[19]?"expanded":""))&&Ce(v,"class",x),T[0]&1&&y!==(y=C[0].skinToneDescription+"")&&En(M,y),T[0]&1049089&&(me=C[9],D=Wo(D,T,fe,1,C,me,H,F,$o,Cm,null,Sm)),T[0]&64&&b!==(b="skintone-list "+(C[6]?"":"hidden no-animate"))&&Ce(F,"class",b),T[0]&64&&ai(F,"transform","translateY("+(C[6]?0:"calc(-1 * var(--num-skintones) * var(--total-emoji-size))")+")"),T[0]&1&&R!==(R=C[0].skinTonesLabel)&&Ce(F,"aria-label",R),T[0]&1048576&&A!==(A="skintone-"+C[20])&&Ce(F,"aria-activedescendant",A),T[0]&64&&k!==(k=!C[6])&&Ce(F,"aria-hidden",k),T[0]&12305|T[1]&1&&(ke=C[12],B=Wo(B,T,we,1,C,ke,$,O,$o,xm,null,wm)),T[0]&4096&&ai(O,"grid-template-columns","repeat("+C[12].length+", 1fr)"),T[0]&1&&Q!==(Q=C[0].categoriesLabel)&&Ce(O,"aria-label",Q),T[0]&16779264&&ai(oe,"transform","translateX("+(C[24]?-1:1)*C[11]*100+"%)"),T[0]&262144&&En(P,C[18]),T[0]&262144&&ce!==(ce="message "+(C[18]?"":"gone"))&&Ce(w,"class",ce),T[0]&402694449&&(Re=C[15],Y=Wo(Y,T,Oe,1,C,Re,Z,le,$o,Am,null,ym)),T[0]&278528&&I!==(I="tabpanel "+(!C[14]||C[18]?"gone":""))&&Ce(V,"class",I),T[0]&16&&K!==(K=C[4]?"region":"tabpanel")&&Ce(V,"role",K),T[0]&8209&&ee!==(ee=C[4]?C[0].searchResultsLabel:C[0].categories[C[13].name])&&Ce(V,"aria-label",ee),T[0]&8208&&ae!==(ae=C[4]?"":`tab-${C[13].id}`)&&Ce(V,"id",ae),T[0]&402654464&&(Pe=C[10],S=Wo(S,T,z,1,C,Pe,E,Me,$o,Rm,null,vm)),T[0]&262144&&N!==(N="favorites emoji-menu "+(C[18]?"gone":""))&&Ce(Me,"class",N),T[0]&1&&W!==(W=C[0].favoritesLabel)&&Ce(Me,"aria-label",W),T[0]&33554432&&ai(Me,"padding-inline-end",C[25]+"px"),T[0]&1&&ne!==(ne=C[0].regionLabel)&&Ce(t,"aria-label",ne),T[0]&4194304&&Ce(t,"style",C[22])},i:xa,o:xa,d(C){C&&fn(t);for(let T=0;T<D.length;T+=1)D[T].d();e[48](null);for(let T=0;T<B.length;T+=1)B[T].d();for(let T=0;T<Y.length;T+=1)Y[T].d();e[50](null);for(let T=0;T<S.length;T+=1)S[T].d();e[51](null),e[52](null),de=!1,Ua(pe)}}}function p7(e,t,r){let{skinToneEmoji:n}=t,{i18n:i}=t,{database:s}=t,{customEmoji:a}=t,{customCategorySorting:o}=t,l=!0,u=[],f=[],c="",h="",d,p,v,_=!1,m=-1,g,x=!1,L=!1,y,M=0,F=0,D,H,b="",R=[],A=[],k,O=WE,B=!1,$=0,Q=0,X=Ll,oe,w=!1,P;const ce=q=>{d.getRootNode().getElementById(q).focus()},V=(q,ie)=>{d.dispatchEvent(new CustomEvent(q,{detail:ie,bubbles:!0,composed:!0}))},le=(q,ie)=>ie&&q.skins&&q.skins[ie]||q.unicode,Y=(q,ie)=>l7([q.name||le(q,ie),...q.shortcodes||[]]).join(", "),Z=q=>/^skintone-/.test(q.id);yf.then(q=>{q||r(18,g=i.emojiUnsupportedMessage)});function I(q){return o7(q,ie=>{{const j=getComputedStyle(d),U=parseInt(j.getPropertyValue("--num-columns"),10),te=j.getPropertyValue("direction")==="rtl",ue=q.parentElement.getBoundingClientRect().width-ie;r(46,O=U),r(25,$=ue),r(24,B=te)}})}function K(q){const ie=d.getRootNode();a7(q,p,U=>ie.getElementById(`emo-${U.id}`)),r(1,u=u)}function ee(q){return!q.unicode||!mm(q)||Ch.get(q.unicode)}async function ae(q){const ie=await yf;return q.filter(({version:j})=>!j||j<=ie)}async function Me(q){return i7(q,await yf)}async function S(q){if(typeof q>"u")return[];const ie=q===-1?a:await s.getEmojiByGroup(q);return Me(await ae(ie))}async function E(q){return Me(await ae(await s.getEmojiBySearchQuery(q)))}function N(q){if(!_||!u.length)return;const ie=j=>{li(q),r(5,m=bf(j,m,u))};switch(q.key){case"ArrowDown":return ie(!1);case"ArrowUp":return ie(!0);case"Enter":if(m!==-1)return li(q),ne(u[m].id);u.length&&r(5,m=0)}}function W(q){r(2,c=""),r(44,h=""),r(5,m=-1),r(11,Q=X.findIndex(ie=>ie.id===q.id))}function re(q){const{target:ie,key:j}=q,U=te=>{te&&(li(q),te.focus())};switch(j){case"ArrowLeft":return U(ie.previousSibling);case"ArrowRight":return U(ie.nextSibling);case"Home":return U(ie.parentElement.firstChild);case"End":return U(ie.parentElement.lastChild)}}async function ne(q){const ie=await s.getEmojiByUnicodeOrName(q),j=[...u,...A].find(te=>te.id===q),U=j.unicode&&le(j,M);await s.incrementFavoriteEmojiCount(q),V("emoji-click",{emoji:ie,skinTone:M,...U&&{unicode:U},...j.name&&{name:j.name}})}async function de(q){const{target:ie}=q;if(!ie.classList.contains("emoji"))return;li(q);const j=ie.id.substring(4);ne(j)}async function pe(q){const{target:ie}=q;if(!Z(ie))return;li(q);const j=parseInt(ie.id.slice(9),10);r(8,M=j),r(6,x=!1),ce("skintone-button"),V("skin-tone-change",{skinTone:j}),s.setPreferredSkinTone(j)}async function me(q){r(6,x=!x),r(20,F=M),x&&(li(q),Jl(()=>ce(`skintone-${F}`)))}function fe(q){if(!x)return;const ie=async j=>{li(q),r(20,F=j),await LE(),ce(`skintone-${F}`)};switch(q.key){case"ArrowUp":return ie(bf(!0,F,R));case"ArrowDown":return ie(bf(!1,F,R));case"Home":return ie(0);case"End":return ie(R.length-1);case"Enter":return pe(q);case"Escape":return li(q),r(6,x=!1),ce("skintone-button")}}function ke(q){if(x)switch(q.key){case" ":return pe(q)}}async function we(q){const{relatedTarget:ie}=q;(!ie||!Z(ie))&&r(6,x=!1)}function Re(){c=this.value,r(2,c)}function Oe(q){Ks[q?"unshift":"push"](()=>{y=q,r(7,y)})}const Pe=q=>W(q);function z(q){Ks[q?"unshift":"push"](()=>{v=q,r(3,v)})}function C(q){Ks[q?"unshift":"push"](()=>{p=q,r(17,p)})}function T(q){Ks[q?"unshift":"push"](()=>{d=q,r(16,d)})}return e.$$set=q=>{"skinToneEmoji"in q&&r(40,n=q.skinToneEmoji),"i18n"in q&&r(0,i=q.i18n),"database"in q&&r(39,s=q.database),"customEmoji"in q&&r(41,a=q.customEmoji),"customCategorySorting"in q&&r(42,o=q.customCategorySorting)},e.$$.update=()=>{if(e.$$.dirty[1]&1280&&a&&s&&r(39,s.customEmoji=a,s),e.$$.dirty[0]&1|e.$$.dirty[1]&256){async function q(){let ie=!1;const j=setTimeout(()=>{ie=!0,r(18,g=i.loadingMessage)},VE);try{await s.ready(),r(14,w=!0)}catch(U){console.error(U),r(18,g=i.networkErrorMessage)}finally{clearTimeout(j),ie&&(ie=!1,r(18,g=""))}}s&&q()}if(e.$$.dirty[0]&6144|e.$$.dirty[1]&1024&&(a&&a.length?r(12,X=[UE,...Ll]):X!==Ll&&(Q&&r(11,Q--,Q),r(12,X=Ll))),e.$$.dirty[0]&4&&rb(()=>{r(44,h=(c||"").trim()),r(5,m=-1)}),e.$$.dirty[0]&6144&&r(13,oe=X[Q]),e.$$.dirty[0]&24576|e.$$.dirty[1]&8192){async function q(){if(!w)r(1,u=[]),r(4,_=!1);else if(h.length>=qE){const ie=h,j=await E(ie);ie===h&&(r(1,u=j),r(4,_=!0))}else if(oe){const ie=oe.id,j=await S(ie);ie===oe.id&&(r(1,u=j),r(4,_=!1))}}q()}if(e.$$.dirty[0]&4112&&r(22,H=`
  --font-family: ${nb};
  --num-groups: ${X.length}; 
  --indicator-opacity: ${_?0:1}; 
  --num-skintones: ${pm};`),e.$$.dirty[0]&16384|e.$$.dirty[1]&256){async function q(){w&&r(8,M=await s.getPreferredSkinTone())}q()}if(e.$$.dirty[1]&512&&r(9,R=Array(pm).fill().map((q,ie)=>n7(n,ie))),e.$$.dirty[0]&768&&r(21,D=R[M]),e.$$.dirty[0]&257&&r(23,b=i.skinToneLabel.replace("{skinTone}",i.skinTones[M])),e.$$.dirty[0]&16384|e.$$.dirty[1]&256){async function q(){r(45,k=(await Promise.all(KE.map(ie=>s.getEmojiByUnicodeOrName(ie)))).filter(Boolean))}w&&q()}if(e.$$.dirty[0]&16384|e.$$.dirty[1]&49408){async function q(){const ie=await s.getTopFavoriteEmoji(O),j=await Me(ib([...ie,...k],U=>U.unicode||U.name).slice(0,O));r(10,A=j)}w&&k&&q()}if(e.$$.dirty[0]&10){const q=u.filter(ie=>ie.unicode).filter(ie=>mm(ie)&&!Ch.has(ie.unicode));q.length?Jl(()=>K(q)):(r(1,u=u.filter(ee)),Jl(()=>{(v||{}).scrollTop=0}))}e.$$.dirty[0]&1026|e.$$.dirty[1]&4096,e.$$.dirty[0]&18|e.$$.dirty[1]&2048&&r(15,f=function(){if(_)return[{category:"",emojis:u}];const ie=new Map;for(const j of u){const U=j.category||"";let te=ie.get(U);te||(te=[],ie.set(U,te)),te.push(j)}return[...ie.entries()].map(([j,U])=>({category:j,emojis:U})).sort((j,U)=>o(j.category,U.category))}()),e.$$.dirty[0]&34&&r(26,P=m!==-1&&u[m].id),e.$$.dirty[0]&192&&(x?y.addEventListener("transitionend",()=>{r(19,L=!0)},{once:!0}):r(19,L=!1))},[i,u,c,v,_,m,x,y,M,R,A,Q,X,oe,w,f,d,p,g,L,F,D,H,b,B,$,P,le,Y,I,N,W,re,de,pe,me,fe,ke,we,s,n,a,o,l,h,k,O,Re,Oe,Pe,z,C,T]}class m7 extends NE{constructor(t){super(),jE(this,t,p7,d7,kE,{skinToneEmoji:40,i18n:0,database:39,customEmoji:41,customCategorySorting:42},null,[-1,-1,-1])}}const _7="https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json",g7="en";var v7={categoriesLabel:"Categories",emojiUnsupportedMessage:"Your browser does not support color emoji.",favoritesLabel:"Favorites",loadingMessage:"Loading…",networkErrorMessage:"Could not load emoji.",regionLabel:"Emoji picker",searchDescription:"When search results are available, press up or down to select and enter to choose.",searchLabel:"Search",searchResultsLabel:"Search results",skinToneDescription:"When expanded, press up or down to select and enter to choose.",skinToneLabel:"Choose a skin tone (currently {skinTone})",skinTonesLabel:"Skin tones",skinTones:["Default","Light","Medium-Light","Medium","Medium-Dark","Dark"],categories:{custom:"Custom","smileys-emotion":"Smileys and emoticons","people-body":"People and body","animals-nature":"Animals and nature","food-drink":"Food and drink","travel-places":"Travel and places",activities:"Activities",objects:"Objects",symbols:"Symbols",flags:"Flags"}};const sb=["customEmoji","customCategorySorting","database","dataSource","i18n","locale","skinToneEmoji"];class ob extends HTMLElement{constructor(t){super(),this.attachShadow({mode:"open"});const r=document.createElement("style");r.textContent=":host{--emoji-size:1.375rem;--emoji-padding:0.5rem;--category-emoji-size:var(--emoji-size);--category-emoji-padding:var(--emoji-padding);--indicator-height:3px;--input-border-radius:0.5rem;--input-border-size:1px;--input-font-size:1rem;--input-line-height:1.5;--input-padding:0.25rem;--num-columns:8;--outline-size:2px;--border-size:1px;--skintone-border-radius:1rem;--category-font-size:1rem;display:flex;width:min-content;height:400px}:host,:host(.light){--background:#fff;--border-color:#e0e0e0;--indicator-color:#385ac1;--input-border-color:#999;--input-font-color:#111;--input-placeholder-color:#999;--outline-color:#999;--category-font-color:#111;--button-active-background:#e6e6e6;--button-hover-background:#d9d9d9}:host(.dark){--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}@media (prefers-color-scheme:dark){:host{--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}}:host([hidden]){display:none}button{margin:0;padding:0;border:0;background:0 0;box-shadow:none;-webkit-tap-highlight-color:transparent}button::-moz-focus-inner{border:0}input{padding:0;margin:0;line-height:1.15;font-family:inherit}input[type=search]{-webkit-appearance:none}:focus{outline:var(--outline-color) solid var(--outline-size);outline-offset:calc(-1*var(--outline-size))}:host([data-js-focus-visible]) :focus:not([data-focus-visible-added]){outline:0}:focus:not(:focus-visible){outline:0}.hide-focus{outline:0}*{box-sizing:border-box}.picker{contain:content;display:flex;flex-direction:column;background:var(--background);border:var(--border-size) solid var(--border-color);width:100%;height:100%;overflow:hidden;--total-emoji-size:calc(var(--emoji-size) + (2 * var(--emoji-padding)));--total-category-emoji-size:calc(var(--category-emoji-size) + (2 * var(--category-emoji-padding)))}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.hidden{opacity:0;pointer-events:none}.abs-pos{position:absolute;left:0;top:0}.gone{display:none!important}.skintone-button-wrapper,.skintone-list{background:var(--background);z-index:3}.skintone-button-wrapper.expanded{z-index:1}.skintone-list{position:absolute;inset-inline-end:0;top:0;z-index:2;overflow:visible;border-bottom:var(--border-size) solid var(--border-color);border-radius:0 0 var(--skintone-border-radius) var(--skintone-border-radius);will-change:transform;transition:transform .2s ease-in-out;transform-origin:center 0}@media (prefers-reduced-motion:reduce){.skintone-list{transition-duration:.001s}}@supports not (inset-inline-end:0){.skintone-list{right:0}}.skintone-list.no-animate{transition:none}.tabpanel{overflow-y:auto;-webkit-overflow-scrolling:touch;will-change:transform;min-height:0;flex:1;contain:content}.emoji-menu{display:grid;grid-template-columns:repeat(var(--num-columns),var(--total-emoji-size));justify-content:space-around;align-items:flex-start;width:100%}.category{padding:var(--emoji-padding);font-size:var(--category-font-size);color:var(--category-font-color)}.custom-emoji,.emoji,button.emoji{height:var(--total-emoji-size);width:var(--total-emoji-size)}.emoji,button.emoji{font-size:var(--emoji-size);display:flex;align-items:center;justify-content:center;border-radius:100%;line-height:1;overflow:hidden;font-family:var(--font-family);cursor:pointer}@media (hover:hover) and (pointer:fine){.emoji:hover,button.emoji:hover{background:var(--button-hover-background)}}.emoji.active,.emoji:active,button.emoji.active,button.emoji:active{background:var(--button-active-background)}.custom-emoji{padding:var(--emoji-padding);object-fit:contain;pointer-events:none;background-repeat:no-repeat;background-position:center center;background-size:var(--emoji-size) var(--emoji-size)}.nav,.nav-button{align-items:center}.nav{display:grid;justify-content:space-between;contain:content}.nav-button{display:flex;justify-content:center}.nav-emoji{font-size:var(--category-emoji-size);width:var(--total-category-emoji-size);height:var(--total-category-emoji-size)}.indicator-wrapper{display:flex;border-bottom:1px solid var(--border-color)}.indicator{width:calc(100%/var(--num-groups));height:var(--indicator-height);opacity:var(--indicator-opacity);background-color:var(--indicator-color);will-change:transform,opacity;transition:opacity .1s linear,transform .25s ease-in-out}@media (prefers-reduced-motion:reduce){.indicator{will-change:opacity;transition:opacity .1s linear}}.pad-top,input.search{background:var(--background);width:100%}.pad-top{height:var(--emoji-padding);z-index:3}.search-row{display:flex;align-items:center;position:relative;padding-inline-start:var(--emoji-padding);padding-bottom:var(--emoji-padding)}.search-wrapper{flex:1;min-width:0}input.search{padding:var(--input-padding);border-radius:var(--input-border-radius);border:var(--input-border-size) solid var(--input-border-color);color:var(--input-font-color);font-size:var(--input-font-size);line-height:var(--input-line-height)}input.search::placeholder{color:var(--input-placeholder-color)}.favorites{display:flex;flex-direction:row;border-top:var(--border-size) solid var(--border-color);contain:content}.message{padding:var(--emoji-padding)}",this.shadowRoot.appendChild(r),this._ctx={locale:g7,dataSource:_7,skinToneEmoji:$E,customCategorySorting:YE,customEmoji:null,i18n:v7,...t};for(const n of sb)n!=="database"&&Object.prototype.hasOwnProperty.call(this,n)&&(this._ctx[n]=this[n],delete this[n]);this._dbFlush()}connectedCallback(){this._cmp=new m7({target:this.shadowRoot,props:this._ctx})}disconnectedCallback(){this._cmp.$destroy(),this._cmp=void 0;const{database:t}=this._ctx;t&&t.close().catch(r=>console.error(r))}static get observedAttributes(){return["locale","data-source","skin-tone-emoji"]}attributeChangedCallback(t,r,n){this._set(t.replace(/-([a-z])/g,(i,s)=>s.toUpperCase()),n)}_set(t,r){this._ctx[t]=r,this._cmp&&this._cmp.$set({[t]:r}),["locale","dataSource"].includes(t)&&this._dbFlush()}_dbCreate(){const{locale:t,dataSource:r,database:n}=this._ctx;(!n||n.locale!==t||n.dataSource!==r)&&this._set("database",new Gy({locale:t,dataSource:r}))}_dbFlush(){Promise.resolve().then(()=>this._dbCreate())}}const ab={};for(const e of sb)ab[e]={get(){return e==="database"&&this._dbCreate(),this._ctx[e]},set(t){if(e==="database")throw new Error("database is read-only");this._set(e,t)}};Object.defineProperties(ob.prototype,ab);customElements.get("emoji-picker")||customElements.define("emoji-picker",ob);function lb(e,t){for(;e&&!e.querySelector(t);){e=e.parentNode;const r=e.querySelector(t);if(r)return r}return null}const y7={name:"EmojiPickerContainer",components:{SvgIcon:cr},props:{emojiOpened:{type:Boolean,default:!1},emojiReaction:{type:Boolean,default:!1},positionTop:{type:Boolean,default:!1},positionRight:{type:Boolean,default:!1},messageId:{type:String,default:""},emojiDataSource:{type:String,default:void 0}},emits:["add-emoji","open-emoji"],data(){return{emojiPickerHeight:320,emojiPickerTop:0,emojiPickerRight:""}},watch:{emojiOpened(e){e&&setTimeout(()=>{this.addCustomStyling(),this.$refs.emojiPicker.shadowRoot.addEventListener("emoji-click",({detail:t})=>{this.$emit("add-emoji",{unicode:t.unicode})})},0)}},methods:{addCustomStyling(){const e=`.picker {
				border: none;
			}`,t=`.nav {
				overflow-x: auto;
			}`,r=`.search-wrapper {
				padding-right: 2px;
				padding-left: 2px;
			}`,n=`input.search {
				height: 32px;
				font-size: 14px;
				border-radius: 10rem;
				border: var(--chat-border-style);
				padding: 5px 10px;
				outline: none;
				background: var(--chat-bg-color-input);
				color: var(--chat-color);
			}`,i=document.createElement("style");i.textContent=e+t+r+n,this.$refs.emojiPicker.shadowRoot.appendChild(i)},openEmoji(e){this.$emit("open-emoji",!this.emojiOpened),this.setEmojiPickerPosition(e.clientY,e.view.innerWidth,e.view.innerHeight)},setEmojiPickerPosition(e,t,r){const n=t<500||r<700,i=lb(this.$el,"#room-footer");if(!i){n&&(this.emojiPickerRight="-50px");return}n?(this.emojiPickerRight=t/2-(this.positionTop?200:150)+"px",this.emojiPickerTop=100,this.emojiPickerHeight=r-200):(i.getBoundingClientRect().top-e>this.emojiPickerHeight-50?this.emojiPickerTop=e+10:this.emojiPickerTop=e-this.emojiPickerHeight-10,this.emojiPickerRight=this.positionTop?"0px":this.positionRight?"60px":"")}}},b7={class:"vac-emoji-wrapper"};function w7(e,t,r,n,i,s){const a=Ge("svg-icon"),o=Ge("emoji-picker");return ye(),Te("div",b7,[He("div",{class:at(["vac-svg-button",{"vac-emoji-reaction":r.emojiReaction}]),onClick:t[0]||(t[0]=(...l)=>s.openEmoji&&s.openEmoji(...l))},[Ue(e.$slots,r.messageId?"emoji-picker-reaction-icon_"+r.messageId:"emoji-picker-icon",{},()=>[Ve(a,{name:"emoji",param:r.emojiReaction?"reaction":""},null,8,["param"])])],2),r.emojiOpened?(ye(),Rt(Zt,{key:0,name:"vac-slide-up",appear:""},{default:Xe(()=>[He("div",{class:at(["vac-emoji-picker",{"vac-picker-reaction":r.emojiReaction}]),style:Ut({height:`${i.emojiPickerHeight}px`,top:r.positionTop?i.emojiPickerHeight:`${i.emojiPickerTop}px`,right:i.emojiPickerRight,display:i.emojiPickerTop||!r.emojiReaction?"initial":"none"})},[r.emojiOpened?(ye(),Rt(o,{key:0,ref:"emojiPicker","data-source":r.emojiDataSource},null,8,["data-source"])):Ne("",!0)],6)]),_:1})):Ne("",!0)])}var cb=Pt(y7,[["render",w7]]);const S7={name:"RoomFiles",components:{Loader:nu,SvgIcon:cr},props:{file:{type:Object,required:!0},index:{type:Number,required:!0}},emits:["remove-file"],computed:{isImage(){return lo(this.file)},isVideo(){return Na(this.file)}}},C7={class:"vac-room-file-container"},x7=["src"],E7={class:"vac-text-ellipsis"},A7={key:0,class:"vac-text-ellipsis vac-text-extension"};function R7(e,t,r,n,i,s){const a=Ge("loader"),o=Ge("svg-icon");return ye(),Te("div",C7,[Ve(a,{show:r.file.loading,type:"room-file"},Lt({_:2},[st(e.$slots,(l,u)=>({name:u,fn:Xe(f=>[Ue(e.$slots,u,Mt(kt(f)))])}))]),1032,["show"]),He("div",{class:"vac-svg-button vac-icon-remove",onClick:t[0]||(t[0]=l=>e.$emit("remove-file",r.index))},[Ue(e.$slots,"image-close-icon",{},()=>[Ve(o,{name:"close",param:"image"})])]),s.isImage?(ye(),Te("div",{key:0,class:at(["vac-message-image",{"vac-blur-loading":r.file.loading}]),style:Ut({"background-image":`url('${r.file.localUrl||r.file.url}')`})},null,6)):s.isVideo?(ye(),Te("video",{key:1,controls:"",class:at({"vac-blur-loading":r.file.loading})},[He("source",{src:r.file.localUrl||r.file.url},null,8,x7)],2)):(ye(),Te("div",{key:2,class:at(["vac-file-container",{"vac-blur-loading":r.file.loading}])},[He("div",null,[Ue(e.$slots,"file-icon",{},()=>[Ve(o,{name:"file"})])]),He("div",E7,tt(r.file.name),1),r.file.extension?(ye(),Te("div",A7,tt(r.file.extension),1)):Ne("",!0)],2))])}var k7=Pt(S7,[["render",R7]]);const T7={name:"RoomFiles",components:{SvgIcon:cr,RoomFile:k7},props:{files:{type:Array,required:!0}},emits:["remove-file","reset-message"],computed:{}},M7={key:0,class:"vac-room-files-container"},L7={class:"vac-files-box"},B7={class:"vac-icon-close"};function O7(e,t,r,n,i,s){const a=Ge("room-file"),o=Ge("svg-icon");return ye(),Rt(Zt,{name:"vac-slide-up"},{default:Xe(()=>[r.files.length?(ye(),Te("div",M7,[He("div",L7,[(ye(!0),Te(pt,null,st(r.files,(l,u)=>(ye(),Te("div",{key:u},[Ve(a,{file:l,index:u,onRemoveFile:t[0]||(t[0]=f=>e.$emit("remove-file",f))},Lt({_:2},[st(e.$slots,(f,c)=>({name:c,fn:Xe(h=>[Ue(e.$slots,c,Mt(kt(h)))])}))]),1032,["file","index"])]))),128))]),He("div",B7,[He("div",{class:"vac-svg-button",onClick:t[1]||(t[1]=l=>e.$emit("reset-message"))},[Ue(e.$slots,"files-close-icon",{},()=>[Ve(o,{name:"close-outline"})])])])])):Ne("",!0)]),_:3})}var I7=Pt(T7,[["render",O7]]);const F7={props:{percentage:{type:Number,default:0},messageSelectionEnabled:{type:Boolean,required:!0}},emits:["hover-audio-progress","change-linehead"],data(){return{isMouseDown:!1}},methods:{onMouseDown(e){if(this.messageSelectionEnabled)return;this.isMouseDown=!0;const t=this.calculateLineHeadPosition(e,this.$refs.progress);this.$emit("change-linehead",t),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp)},onMouseUp(e){if(this.messageSelectionEnabled)return;this.isMouseDown=!1,document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("mousemove",this.onMouseMove);const t=this.calculateLineHeadPosition(e,this.$refs.progress);this.$emit("change-linehead",t)},onMouseMove(e){if(this.messageSelectionEnabled)return;const t=this.calculateLineHeadPosition(e,this.$refs.progress);this.$emit("change-linehead",t)},calculateLineHeadPosition(e,t){const r=t.getBoundingClientRect().width,n=t.getBoundingClientRect().left;let i=(e.clientX-n)/r;return i=i<0?0:i,i=i>1?1:i,i}}},D7={class:"vac-player-progress"},H7={class:"vac-line-container"};function P7(e,t,r,n,i,s){return ye(),Te("div",{ref:"progress",class:"vac-player-bar",onMousedown:t[0]||(t[0]=(...a)=>s.onMouseDown&&s.onMouseDown(...a)),onMouseover:t[1]||(t[1]=a=>e.$emit("hover-audio-progress",!0)),onMouseout:t[2]||(t[2]=a=>e.$emit("hover-audio-progress",!1))},[He("div",D7,[He("div",H7,[He("div",{class:"vac-line-progress",style:Ut({width:`${r.percentage}%`})},null,4),He("div",{class:at(["vac-line-dot",{"vac-line-dot__active":i.isMouseDown}]),style:Ut({left:`${r.percentage}%`})},null,6)])])],544)}var j7=Pt(F7,[["render",P7]]);const N7={name:"AudioPlayer",components:{SvgIcon:cr,AudioControl:j7},props:{messageId:{type:[String,Number],default:null},src:{type:String,default:null},messageSelectionEnabled:{type:Boolean,required:!0}},emits:["hover-audio-progress","update-progress-time"],data(){return{isPlaying:!1,duration:this.convertTimeMMSS(0),playedTime:this.convertTimeMMSS(0),progress:0}},computed:{playerUniqId(){return`audio-player${this.messageId}`},audioSource(){return this.src?this.src:(this.resetProgress(),null)}},mounted(){this.player=this.$el.querySelector("#"+this.playerUniqId),this.player.addEventListener("ended",()=>{this.isPlaying=!1}),this.player.addEventListener("loadeddata",()=>{this.resetProgress(),this.duration=this.convertTimeMMSS(this.player.duration),this.updateProgressTime()}),this.player.addEventListener("timeupdate",this.onTimeUpdate)},methods:{convertTimeMMSS(e){return new Date(e*1e3).toISOString().substr(14,5)},playback(){this.messageSelectionEnabled||!this.audioSource||(this.isPlaying?this.player.pause():setTimeout(()=>this.player.play()),this.isPlaying=!this.isPlaying)},resetProgress(){this.isPlaying&&this.player.pause(),this.duration=this.convertTimeMMSS(0),this.playedTime=this.convertTimeMMSS(0),this.progress=0,this.isPlaying=!1,this.updateProgressTime()},onTimeUpdate(){this.playedTime=this.convertTimeMMSS(this.player.currentTime),this.progress=this.player.currentTime/this.player.duration*100,this.updateProgressTime()},onUpdateProgress(e){e&&(this.player.currentTime=e*this.player.duration)},updateProgressTime(){this.$emit("update-progress-time",this.progress>1?this.playedTime:this.duration)}}},U7={class:"vac-audio-player"},q7=["id","src"];function z7(e,t,r,n,i,s){const a=Ge("svg-icon"),o=Ge("audio-control");return ye(),Te("div",null,[He("div",U7,[He("div",{class:"vac-svg-button",onClick:t[0]||(t[0]=(...l)=>s.playback&&s.playback(...l))},[i.isPlaying?Ue(e.$slots,"audio-pause-icon_"+r.messageId,{key:0},()=>[Ve(a,{name:"audio-pause"})]):Ue(e.$slots,"audio-play-icon_"+r.messageId,{key:1},()=>[Ve(a,{name:"audio-play"})])]),Ve(o,{percentage:i.progress,"message-selection-enabled":r.messageSelectionEnabled,onChangeLinehead:s.onUpdateProgress,onHoverAudioProgress:t[1]||(t[1]=l=>e.$emit("hover-audio-progress",l))},null,8,["percentage","message-selection-enabled","onChangeLinehead"]),He("audio",{id:s.playerUniqId,src:s.audioSource},null,8,q7)])])}var Ud=Pt(N7,[["render",z7]]);const V7={name:"RoomMessageReply",components:{SvgIcon:cr,FormatMessage:ja,AudioPlayer:Ud},props:{room:{type:Object,required:!0},messageReply:{type:Object,default:null},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0}},emits:["reset-message"],computed:{firstFile(){var e,t;return(t=(e=this.messageReply)==null?void 0:e.files)!=null&&t.length?this.messageReply.files[0]:{}},isImage(){return lo(this.firstFile)},isVideo(){return Na(this.firstFile)},isAudio(){return ou(this.firstFile)},isOtherFile(){var e,t;return((t=(e=this.messageReply)==null?void 0:e.files)==null?void 0:t.length)&&!this.isAudio&&!this.isVideo&&!this.isImage}}},$7={key:0,class:"vac-reply-container"},W7={class:"vac-reply-box"},K7={class:"vac-reply-info"},Y7={class:"vac-reply-username"},G7={class:"vac-reply-content"},X7=["src"],Z7={key:1,controls:"",class:"vac-image-reply"},Q7=["src"],J7={key:3,class:"vac-image-reply vac-file-container"},eA={class:"vac-text-ellipsis"},tA={key:0,class:"vac-text-ellipsis vac-text-extension"},rA={class:"vac-icon-reply"};function nA(e,t,r,n,i,s){const a=Ge("format-message"),o=Ge("audio-player"),l=Ge("svg-icon");return ye(),Rt(Zt,{name:"vac-slide-up"},{default:Xe(()=>[r.messageReply?(ye(),Te("div",$7,[He("div",W7,[He("div",K7,[He("div",Y7,tt(r.messageReply.username),1),He("div",G7,[Ve(a,{"message-id":r.messageReply._id,content:r.messageReply.content,users:r.room.users,"text-formatting":r.textFormatting,"link-options":r.linkOptions,reply:!0},null,8,["message-id","content","users","text-formatting","link-options"])])]),s.isImage?(ye(),Te("img",{key:0,src:s.firstFile.url,class:"vac-image-reply"},null,8,X7)):s.isVideo?(ye(),Te("video",Z7,[He("source",{src:s.firstFile.url},null,8,Q7)])):s.isAudio?(ye(),Rt(o,{key:2,src:s.firstFile.url,"message-selection-enabled":!1,class:"vac-audio-reply"},Lt({_:2},[st(e.$slots,(u,f)=>({name:f,fn:Xe(c=>[Ue(e.$slots,f,Mt(kt(c)))])}))]),1032,["src"])):s.isOtherFile?(ye(),Te("div",J7,[He("div",null,[Ue(e.$slots,"file-icon",{},()=>[Ve(l,{name:"file"})])]),He("div",eA,tt(s.firstFile.name),1),s.firstFile.extension?(ye(),Te("div",tA,tt(s.firstFile.extension),1)):Ne("",!0)])):Ne("",!0)]),He("div",rA,[He("div",{class:"vac-svg-button",onClick:t[0]||(t[0]=u=>e.$emit("reset-message"))},[Ue(e.$slots,"reply-close-icon",{},()=>[Ve(l,{name:"close-outline"})])])])])):Ne("",!0)]),_:3})}var iA=Pt(V7,[["render",nA]]);const sA={name:"RoomUsersTag",props:{filteredUsersTag:{type:Array,required:!0},selectItem:{type:Boolean,default:null},activeUpOrDown:{type:Number,default:null}},emits:["select-user-tag","activate-item"],data(){return{activeItem:null}},watch:{filteredUsersTag(e,t){(!t.length||e.length!==t.length)&&(this.activeItem=0)},selectItem(e){e&&this.$emit("select-user-tag",this.filteredUsersTag[this.activeItem])},activeUpOrDown(){this.activeUpOrDown>0&&this.activeItem<this.filteredUsersTag.length-1?this.activeItem++:this.activeUpOrDown<0&&this.activeItem>0&&this.activeItem--,this.$emit("activate-item")}}},oA={key:0,class:"vac-tags-container"},aA=["onMouseover","onClick"],lA={class:"vac-tags-info"},cA={class:"vac-tags-username"};function uA(e,t,r,n,i,s){return ye(),Rt(Zt,{name:"vac-slide-up"},{default:Xe(()=>[r.filteredUsersTag.length?(ye(),Te("div",oA,[(ye(!0),Te(pt,null,st(r.filteredUsersTag,(a,o)=>(ye(),Te("div",{key:a._id,class:at(["vac-tags-box",{"vac-tags-box-active":o===i.activeItem}]),onMouseover:l=>i.activeItem=o,onClick:l=>e.$emit("select-user-tag",a)},[He("div",lA,[a.avatar?(ye(),Te("div",{key:0,class:"vac-avatar vac-tags-avatar",style:Ut({"background-image":`url('${a.avatar}')`})},null,4)):Ne("",!0),He("div",cA,tt(a.username),1)])],42,aA))),128))])):Ne("",!0)]),_:1})}var fA=Pt(sA,[["render",uA]]);const hA={name:"RoomEmojis",props:{filteredEmojis:{type:Array,required:!0},selectItem:{type:Boolean,default:null},activeUpOrDown:{type:Number,default:null}},emits:["select-emoji","activate-item"],data(){return{activeItem:null}},watch:{filteredEmojis(e,t){(!t.length||e.length!==t.length)&&(this.activeItem=0)},selectItem(e){e&&this.$emit("select-emoji",this.filteredEmojis[this.activeItem])},activeUpOrDown(){this.activeUpOrDown>0&&this.activeItem<this.filteredEmojis.length-1?this.activeItem++:this.activeUpOrDown<0&&this.activeItem>0&&this.activeItem--,this.$emit("activate-item")}}},dA={key:0,class:"vac-emojis-container"},pA=["onMouseover","onClick"];function mA(e,t,r,n,i,s){return ye(),Rt(Zt,{name:"vac-slide-up"},{default:Xe(()=>[r.filteredEmojis.length?(ye(),Te("div",dA,[(ye(!0),Te(pt,null,st(r.filteredEmojis,(a,o)=>(ye(),Te("div",{key:a,class:at(["vac-emoji-element",{"vac-emoji-element-active":o===i.activeItem}]),onMouseover:l=>i.activeItem=o,onClick:l=>e.$emit("select-emoji",a)},tt(a),43,pA))),128))])):Ne("",!0)]),_:1})}var _A=Pt(hA,[["render",mA]]);const gA={name:"RoomTemplatesText",props:{filteredTemplatesText:{type:Array,required:!0},selectItem:{type:Boolean,default:null},activeUpOrDown:{type:Number,default:null}},emits:["select-template-text","activate-item"],data(){return{activeItem:null}},watch:{filteredTemplatesText(e,t){(!t.length||e.length!==t.length)&&(this.activeItem=0)},selectItem(e){e&&this.$emit("select-template-text",this.filteredTemplatesText[this.activeItem])},activeUpOrDown(){this.activeUpOrDown>0&&this.activeItem<this.filteredTemplatesText.length-1?this.activeItem++:this.activeUpOrDown<0&&this.activeItem>0&&this.activeItem--,this.$emit("activate-item")}}},vA={key:0,class:"vac-template-container vac-app-box-shadow"},yA=["onMouseover","onClick"],bA={class:"vac-template-info"},wA={class:"vac-template-tag"},SA={class:"vac-template-text"};function CA(e,t,r,n,i,s){return ye(),Rt(Zt,{name:"vac-slide-up"},{default:Xe(()=>[r.filteredTemplatesText.length?(ye(),Te("div",vA,[(ye(!0),Te(pt,null,st(r.filteredTemplatesText,(a,o)=>(ye(),Te("div",{key:o,class:at(["vac-template-box",{"vac-template-active":o===i.activeItem}]),onMouseover:l=>i.activeItem=o,onClick:l=>e.$emit("select-template-text",a)},[He("div",bA,[He("div",wA," /"+tt(a.tag),1),He("div",SA,tt(a.text),1)])],42,yA))),128))])):Ne("",!0)]),_:1})}var xA=Pt(gA,[["render",CA]]);function EA(e){return new Int8Array(e)}function AA(e){return new Int16Array(e)}function ub(e){return new Int32Array(e)}function fb(e){return new Float32Array(e)}function RA(e){return new Float64Array(e)}function hb(e){if(e.length==1)return fb(e[0]);var t=e[0];e=e.slice(1);for(var r=[],n=0;n<t;n++)r.push(hb(e));return r}function db(e){if(e.length==1)return ub(e[0]);var t=e[0];e=e.slice(1);for(var r=[],n=0;n<t;n++)r.push(db(e));return r}function pb(e){if(e.length==1)return AA(e[0]);var t=e[0];e=e.slice(1);for(var r=[],n=0;n<t;n++)r.push(pb(e));return r}function mb(e){if(e.length==1)return new Array(e[0]);var t=e[0];e=e.slice(1);for(var r=[],n=0;n<t;n++)r.push(mb(e));return r}var _b={};_b.fill=function(e,t,r,n){if(arguments.length==2)for(var i=0;i<e.length;i++)e[i]=arguments[1];else for(var i=t;i<r;i++)e[i]=n};var qa={};qa.arraycopy=function(e,t,r,n,i){for(var s=t+i;t<s;)r[n++]=e[t++]};qa.out={};qa.out.println=function(e){console.log(e)};qa.out.printf=function(){console.log.apply(console,arguments)};var au={};au.SQRT2=1.4142135623730951;au.FAST_LOG10=function(e){return Math.log10(e)};au.FAST_LOG10_X=function(e,t){return Math.log10(e)*t};function Zn(e){this.ordinal=e}Zn.short_block_allowed=new Zn(0);Zn.short_block_coupled=new Zn(1);Zn.short_block_dispensed=new Zn(2);Zn.short_block_forced=new Zn(3);var gb={};gb.MAX_VALUE=34028235e31;function qr(e){this.ordinal=e}qr.vbr_off=new qr(0);qr.vbr_mt=new qr(1);qr.vbr_rh=new qr(2);qr.vbr_abr=new qr(3);qr.vbr_mtrh=new qr(4);qr.vbr_default=qr.vbr_mtrh;var kA=function(e){},je={System:qa,VbrMode:qr,Float:gb,ShortBlock:Zn,Util:au,Arrays:_b,new_array_n:mb,new_byte:EA,new_double:RA,new_float:fb,new_float_n:hb,new_int:ub,new_int_n:db,new_short_n:pb,assert:kA},TA=je.System,Kt=je.Util,MA=je.Arrays,LA=je.new_float;function BA(){var e=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.035780907*Kt.SQRT2*.5/2384e-9,.017876148*Kt.SQRT2*.5/2384e-9,.003134727*Kt.SQRT2*.5/2384e-9,.002457142*Kt.SQRT2*.5/2384e-9,971317e-9*Kt.SQRT2*.5/2384e-9,218868e-9*Kt.SQRT2*.5/2384e-9,101566e-9*Kt.SQRT2*.5/2384e-9,13828e-9*Kt.SQRT2*.5/2384e-9,12804.797818791945,1945.5515939597317,313.4244966442953,20.801593959731544,1995.1556208053692,9.000838926174497,-29.20218120805369],t=[[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,940084909404969e-27,6423305872147839e-28,2382191739347918e-28,5456116108943412e-27,4878985199565852e-27,4240448995017367e-27,3559909094758252e-27,2858043359288075e-27,2156177623817898e-27,1475637723558783e-27,8371015190102974e-28,2599706096327376e-28,-5456116108943412e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758252e-27,-2858043359288076e-27,-2156177623817898e-27,-1475637723558783e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347923e-28,-6423305872147843e-28,-9400849094049696e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049694e-28,-642330587214784e-27,-2382191739347918e-28],[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,9400849094049688e-28,6423305872147841e-28,2382191739347918e-28,5456116108943413e-27,4878985199565852e-27,4240448995017367e-27,3559909094758253e-27,2858043359288075e-27,2156177623817898e-27,1475637723558782e-27,8371015190102975e-28,2599706096327376e-28,-5461314069809755e-27,-4921085770524055e-27,-4343405037091838e-27,-3732668368707687e-27,-3093523840190885e-27,-2430835727329465e-27,-1734679010007751e-27,-974825365660928e-27,-2797435120168326e-28,0,0,0,0,0,0,-2283748241799531e-28,-4037858874020686e-28,-2146547464825323e-28],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2283748241799531e-28,4037858874020686e-28,2146547464825323e-28,5461314069809755e-27,4921085770524055e-27,4343405037091838e-27,3732668368707687e-27,3093523840190885e-27,2430835727329466e-27,1734679010007751e-27,974825365660928e-27,2797435120168326e-28,-5456116108943413e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758253e-27,-2858043359288075e-27,-2156177623817898e-27,-1475637723558782e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347913e-28,-6423305872147834e-28,-9400849094049688e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049688e-28,-6423305872147841e-28,-2382191739347918e-28]],r=t[G.SHORT_TYPE],n=t[G.SHORT_TYPE],i=t[G.SHORT_TYPE],s=t[G.SHORT_TYPE],a=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];function o(f,c,h){for(var d=10,p=c+238-14-286,v=-15;v<0;v++){var _,m,g;_=e[d+-10],m=f[p+-224]*_,g=f[c+224]*_,_=e[d+-9],m+=f[p+-160]*_,g+=f[c+160]*_,_=e[d+-8],m+=f[p+-96]*_,g+=f[c+96]*_,_=e[d+-7],m+=f[p+-32]*_,g+=f[c+32]*_,_=e[d+-6],m+=f[p+32]*_,g+=f[c+-32]*_,_=e[d+-5],m+=f[p+96]*_,g+=f[c+-96]*_,_=e[d+-4],m+=f[p+160]*_,g+=f[c+-160]*_,_=e[d+-3],m+=f[p+224]*_,g+=f[c+-224]*_,_=e[d+-2],m+=f[c+-256]*_,g-=f[p+256]*_,_=e[d+-1],m+=f[c+-192]*_,g-=f[p+192]*_,_=e[d+0],m+=f[c+-128]*_,g-=f[p+128]*_,_=e[d+1],m+=f[c+-64]*_,g-=f[p+64]*_,_=e[d+2],m+=f[c+0]*_,g-=f[p+0]*_,_=e[d+3],m+=f[c+64]*_,g-=f[p+-64]*_,_=e[d+4],m+=f[c+128]*_,g-=f[p+-128]*_,_=e[d+5],m+=f[c+192]*_,g-=f[p+-192]*_,m*=e[d+6],_=g-m,h[30+v*2]=g+m,h[31+v*2]=e[d+7]*_,d+=18,c--,p++}{var m,g,x,L;g=f[c+-16]*e[d+-10],m=f[c+-32]*e[d+-2],g+=(f[c+-48]-f[c+16])*e[d+-9],m+=f[c+-96]*e[d+-1],g+=(f[c+-80]+f[c+48])*e[d+-8],m+=f[c+-160]*e[d+0],g+=(f[c+-112]-f[c+80])*e[d+-7],m+=f[c+-224]*e[d+1],g+=(f[c+-144]+f[c+112])*e[d+-6],m-=f[c+32]*e[d+2],g+=(f[c+-176]-f[c+144])*e[d+-5],m-=f[c+96]*e[d+3],g+=(f[c+-208]+f[c+176])*e[d+-4],m-=f[c+160]*e[d+4],g+=(f[c+-240]-f[c+208])*e[d+-3],m-=f[c+224],x=m-g,L=m+g,g=h[14],m=h[15]-g,h[31]=L+g,h[30]=x+m,h[15]=x-m,h[14]=L-g}{var y;y=h[28]-h[0],h[0]+=h[28],h[28]=y*e[d+-2*18+7],y=h[29]-h[1],h[1]+=h[29],h[29]=y*e[d+-2*18+7],y=h[26]-h[2],h[2]+=h[26],h[26]=y*e[d+-4*18+7],y=h[27]-h[3],h[3]+=h[27],h[27]=y*e[d+-4*18+7],y=h[24]-h[4],h[4]+=h[24],h[24]=y*e[d+-6*18+7],y=h[25]-h[5],h[5]+=h[25],h[25]=y*e[d+-6*18+7],y=h[22]-h[6],h[6]+=h[22],h[22]=y*Kt.SQRT2,y=h[23]-h[7],h[7]+=h[23],h[23]=y*Kt.SQRT2-h[7],h[7]-=h[6],h[22]-=h[7],h[23]-=h[22],y=h[6],h[6]=h[31]-y,h[31]=h[31]+y,y=h[7],h[7]=h[30]-y,h[30]=h[30]+y,y=h[22],h[22]=h[15]-y,h[15]=h[15]+y,y=h[23],h[23]=h[14]-y,h[14]=h[14]+y,y=h[20]-h[8],h[8]+=h[20],h[20]=y*e[d+-10*18+7],y=h[21]-h[9],h[9]+=h[21],h[21]=y*e[d+-10*18+7],y=h[18]-h[10],h[10]+=h[18],h[18]=y*e[d+-12*18+7],y=h[19]-h[11],h[11]+=h[19],h[19]=y*e[d+-12*18+7],y=h[16]-h[12],h[12]+=h[16],h[16]=y*e[d+-14*18+7],y=h[17]-h[13],h[13]+=h[17],h[17]=y*e[d+-14*18+7],y=-h[20]+h[24],h[20]+=h[24],h[24]=y*e[d+-12*18+7],y=-h[21]+h[25],h[21]+=h[25],h[25]=y*e[d+-12*18+7],y=h[4]-h[8],h[4]+=h[8],h[8]=y*e[d+-12*18+7],y=h[5]-h[9],h[5]+=h[9],h[9]=y*e[d+-12*18+7],y=h[0]-h[12],h[0]+=h[12],h[12]=y*e[d+-4*18+7],y=h[1]-h[13],h[1]+=h[13],h[13]=y*e[d+-4*18+7],y=h[16]-h[28],h[16]+=h[28],h[28]=y*e[d+-4*18+7],y=-h[17]+h[29],h[17]+=h[29],h[29]=y*e[d+-4*18+7],y=Kt.SQRT2*(h[2]-h[10]),h[2]+=h[10],h[10]=y,y=Kt.SQRT2*(h[3]-h[11]),h[3]+=h[11],h[11]=y,y=Kt.SQRT2*(-h[18]+h[26]),h[18]+=h[26],h[26]=y-h[18],y=Kt.SQRT2*(-h[19]+h[27]),h[19]+=h[27],h[27]=y-h[19],y=h[2],h[19]-=h[3],h[3]-=y,h[2]=h[31]-y,h[31]+=y,y=h[3],h[11]-=h[19],h[18]-=y,h[3]=h[30]-y,h[30]+=y,y=h[18],h[27]-=h[11],h[19]-=y,h[18]=h[15]-y,h[15]+=y,y=h[19],h[10]-=y,h[19]=h[14]-y,h[14]+=y,y=h[10],h[11]-=y,h[10]=h[23]-y,h[23]+=y,y=h[11],h[26]-=y,h[11]=h[22]-y,h[22]+=y,y=h[26],h[27]-=y,h[26]=h[7]-y,h[7]+=y,y=h[27],h[27]=h[6]-y,h[6]+=y,y=Kt.SQRT2*(h[0]-h[4]),h[0]+=h[4],h[4]=y,y=Kt.SQRT2*(h[1]-h[5]),h[1]+=h[5],h[5]=y,y=Kt.SQRT2*(h[16]-h[20]),h[16]+=h[20],h[20]=y,y=Kt.SQRT2*(h[17]-h[21]),h[17]+=h[21],h[21]=y,y=-Kt.SQRT2*(h[8]-h[12]),h[8]+=h[12],h[12]=y-h[8],y=-Kt.SQRT2*(h[9]-h[13]),h[9]+=h[13],h[13]=y-h[9],y=-Kt.SQRT2*(h[25]-h[29]),h[25]+=h[29],h[29]=y-h[25],y=-Kt.SQRT2*(h[24]+h[28]),h[24]-=h[28],h[28]=y-h[24],y=h[24]-h[16],h[24]=y,y=h[20]-y,h[20]=y,y=h[28]-y,h[28]=y,y=h[25]-h[17],h[25]=y,y=h[21]-y,h[21]=y,y=h[29]-y,h[29]=y,y=h[17]-h[1],h[17]=y,y=h[9]-y,h[9]=y,y=h[25]-y,h[25]=y,y=h[5]-y,h[5]=y,y=h[21]-y,h[21]=y,y=h[13]-y,h[13]=y,y=h[29]-y,h[29]=y,y=h[1]-h[0],h[1]=y,y=h[16]-y,h[16]=y,y=h[17]-y,h[17]=y,y=h[8]-y,h[8]=y,y=h[9]-y,h[9]=y,y=h[24]-y,h[24]=y,y=h[25]-y,h[25]=y,y=h[4]-y,h[4]=y,y=h[5]-y,h[5]=y,y=h[20]-y,h[20]=y,y=h[21]-y,h[21]=y,y=h[12]-y,h[12]=y,y=h[13]-y,h[13]=y,y=h[28]-y,h[28]=y,y=h[29]-y,h[29]=y,y=h[0],h[0]+=h[31],h[31]-=y,y=h[1],h[1]+=h[30],h[30]-=y,y=h[16],h[16]+=h[15],h[15]-=y,y=h[17],h[17]+=h[14],h[14]-=y,y=h[8],h[8]+=h[23],h[23]-=y,y=h[9],h[9]+=h[22],h[22]-=y,y=h[24],h[24]+=h[7],h[7]-=y,y=h[25],h[25]+=h[6],h[6]-=y,y=h[4],h[4]+=h[27],h[27]-=y,y=h[5],h[5]+=h[26],h[26]-=y,y=h[20],h[20]+=h[11],h[11]-=y,y=h[21],h[21]+=h[10],h[10]-=y,y=h[12],h[12]+=h[19],h[19]-=y,y=h[13],h[13]+=h[18],h[18]-=y,y=h[28],h[28]+=h[3],h[3]-=y,y=h[29],h[29]+=h[2],h[2]-=y}}function l(f,c){for(var h=0;h<3;h++){var d,p,v,_,m,g;_=f[c+2*3]*t[G.SHORT_TYPE][0]-f[c+5*3],d=f[c+0*3]*t[G.SHORT_TYPE][2]-f[c+3*3],p=_+d,v=_-d,_=f[c+5*3]*t[G.SHORT_TYPE][0]+f[c+2*3],d=f[c+3*3]*t[G.SHORT_TYPE][2]+f[c+0*3],m=_+d,g=-_+d,d=(f[c+1*3]*t[G.SHORT_TYPE][1]-f[c+4*3])*2069978111953089e-26,_=(f[c+4*3]*t[G.SHORT_TYPE][1]+f[c+1*3])*2069978111953089e-26,f[c+3*0]=p*190752519173728e-25+d,f[c+3*5]=-m*190752519173728e-25+_,v=v*.8660254037844387*1907525191737281e-26,m=m*.5*1907525191737281e-26+_,f[c+3*1]=v-m,f[c+3*2]=v+m,p=p*.5*1907525191737281e-26-d,g=g*.8660254037844387*1907525191737281e-26,f[c+3*3]=p+g,f[c+3*4]=p-g,c++}}function u(f,c,h){var d,p;{var v,_,m,g,x,L,y,M;v=h[17]-h[9],m=h[15]-h[11],g=h[14]-h[12],x=h[0]+h[8],L=h[1]+h[7],y=h[2]+h[6],M=h[3]+h[5],f[c+17]=x+y-M-(L-h[4]),p=(x+y-M)*n[19]+(L-h[4]),d=(v-m-g)*n[18],f[c+5]=d+p,f[c+6]=d-p,_=(h[16]-h[10])*n[18],L=L*n[19]+h[4],d=v*n[12]+_+m*n[13]+g*n[14],p=-x*n[16]+L-y*n[17]+M*n[15],f[c+1]=d+p,f[c+2]=d-p,d=v*n[13]-_-m*n[14]+g*n[12],p=-x*n[17]+L-y*n[15]+M*n[16],f[c+9]=d+p,f[c+10]=d-p,d=v*n[14]-_+m*n[12]-g*n[13],p=x*n[15]-L+y*n[16]-M*n[17],f[c+13]=d+p,f[c+14]=d-p}{var F,D,H,b,R,A,k,O;F=h[8]-h[0],H=h[6]-h[2],b=h[5]-h[3],R=h[17]+h[9],A=h[16]+h[10],k=h[15]+h[11],O=h[14]+h[12],f[c+0]=R+k+O+(A+h[13]),d=(R+k+O)*n[19]-(A+h[13]),p=(F-H+b)*n[18],f[c+11]=d+p,f[c+12]=d-p,D=(h[7]-h[1])*n[18],A=h[13]-A*n[19],d=R*n[15]-A+k*n[16]+O*n[17],p=F*n[14]+D+H*n[12]+b*n[13],f[c+3]=d+p,f[c+4]=d-p,d=-R*n[17]+A-k*n[15]-O*n[16],p=F*n[13]+D-H*n[14]-b*n[12],f[c+7]=d+p,f[c+8]=d-p,d=-R*n[16]+A-k*n[17]-O*n[15],p=F*n[12]-D+H*n[13]-b*n[14],f[c+15]=d+p,f[c+16]=d-p}}this.mdct_sub48=function(f,c,h){for(var d=c,p=286,v=0;v<f.channels_out;v++){for(var _=0;_<f.mode_gr;_++){for(var m,g=f.l3_side.tt[_][v],x=g.xr,L=0,y=f.sb_sample[v][1-_],M=0,F=0;F<18/2;F++)for(o(d,p,y[M]),o(d,p+32,y[M+1]),M+=2,p+=64,m=1;m<32;m+=2)y[M-1][m]*=-1;for(m=0;m<32;m++,L+=18){var D=g.block_type,H=f.sb_sample[v][_],b=f.sb_sample[v][1-_];if(g.mixed_block_flag!=0&&m<2&&(D=0),f.amp_filter[m]<1e-12)MA.fill(x,L+0,L+18,0);else{if(f.amp_filter[m]<1)for(var F=0;F<18;F++)b[F][a[m]]*=f.amp_filter[m];if(D==G.SHORT_TYPE){for(var F=-12/4;F<0;F++){var R=t[G.SHORT_TYPE][F+3];x[L+F*3+9]=H[9+F][a[m]]*R-H[8-F][a[m]],x[L+F*3+18]=H[14-F][a[m]]*R+H[15+F][a[m]],x[L+F*3+10]=H[15+F][a[m]]*R-H[14-F][a[m]],x[L+F*3+19]=b[2-F][a[m]]*R+b[3+F][a[m]],x[L+F*3+11]=b[3+F][a[m]]*R-b[2-F][a[m]],x[L+F*3+20]=b[8-F][a[m]]*R+b[9+F][a[m]]}l(x,L)}else{for(var A=LA(18),F=-36/4;F<0;F++){var k,O;k=t[D][F+27]*b[F+9][a[m]]+t[D][F+36]*b[8-F][a[m]],O=t[D][F+9]*H[F+9][a[m]]-t[D][F+18]*H[8-F][a[m]],A[F+9]=k-O*r[3+F+9],A[F+18]=k*r[3+F+9]+O}u(x,L,A)}}if(D!=G.SHORT_TYPE&&m!=0)for(var F=7;F>=0;--F){var B,$;B=x[L+F]*i[20+F]+x[L+-1-F]*s[28+F],$=x[L+F]*s[28+F]-x[L+-1-F]*i[20+F],x[L+-1-F]=B,x[L+F]=$}}}if(d=h,p=286,f.mode_gr==1)for(var Q=0;Q<18;Q++)TA.arraycopy(f.sb_sample[v][1][Q],0,f.sb_sample[v][0][Q],0,32)}}}var OA=je.System,IA=je.new_float,FA=je.new_float_n;function Cc(){this.l=IA(G.SBMAX_l),this.s=FA([G.SBMAX_s,3]);var e=this;this.assign=function(t){OA.arraycopy(t.l,0,e.l,0,G.SBMAX_l);for(var r=0;r<G.SBMAX_s;r++)for(var n=0;n<3;n++)e.s[r][n]=t.s[r][n]}}function ci(){this.thm=new Cc,this.en=new Cc}function wt(e){var t=e;this.ordinal=function(){return t}}wt.STEREO=new wt(0);wt.JOINT_STEREO=new wt(1);wt.DUAL_CHANNEL=new wt(2);wt.MONO=new wt(3);wt.NOT_SET=new wt(4);var km=je.System,Bl=je.VbrMode,Tm=je.new_array_n,Mm=je.new_float,DA=je.new_float_n,HA=je.new_int,Ol=je.assert;G.ENCDELAY=576;G.POSTDELAY=1152;G.MDCTDELAY=48;G.FFTOFFSET=224+G.MDCTDELAY;G.DECDELAY=528;G.SBLIMIT=32;G.CBANDS=64;G.SBPSY_l=21;G.SBPSY_s=12;G.SBMAX_l=22;G.SBMAX_s=13;G.PSFB21=6;G.PSFB12=6;G.BLKSIZE=1024;G.HBLKSIZE=G.BLKSIZE/2+1;G.BLKSIZE_s=256;G.HBLKSIZE_s=G.BLKSIZE_s/2+1;G.NORM_TYPE=0;G.START_TYPE=1;G.SHORT_TYPE=2;G.STOP_TYPE=3;G.MPG_MD_LR_LR=0;G.MPG_MD_LR_I=1;G.MPG_MD_MS_LR=2;G.MPG_MD_MS_I=3;G.fircoef=[-.0207887*5,-.0378413*5,-.0432472*5,-.031183*5,779609e-23*5,.0467745*5,.10091*5,.151365*5,.187098*5];function G(){var e=G.FFTOFFSET,t=G.MPG_MD_MS_LR,r=null;this.psy=null;var n=null,i=null,s=null;this.setModules=function(f,c,h,d){r=f,this.psy=c,n=c,i=d,s=h};var a=new BA;function o(f){var c,h;if(f.ATH.useAdjust==0){f.ATH.adjust=1;return}if(h=f.loudness_sq[0][0],c=f.loudness_sq[1][0],f.channels_out==2?(h+=f.loudness_sq[0][1],c+=f.loudness_sq[1][1]):(h+=h,c+=c),f.mode_gr==2&&(h=Math.max(h,c)),h*=.5,h*=f.ATH.aaSensitivityP,h>.03125)f.ATH.adjust>=1?f.ATH.adjust=1:f.ATH.adjust<f.ATH.adjustLimit&&(f.ATH.adjust=f.ATH.adjustLimit),f.ATH.adjustLimit=1;else{var d=31.98*h+625e-6;f.ATH.adjust>=d?(f.ATH.adjust*=d*.075+.925,f.ATH.adjust<d&&(f.ATH.adjust=d)):f.ATH.adjustLimit>=d?f.ATH.adjust=d:f.ATH.adjust<f.ATH.adjustLimit&&(f.ATH.adjust=f.ATH.adjustLimit),f.ATH.adjustLimit=d}}function l(f){var c,h;for(Ol(f.bitrate_index>=0&&f.bitrate_index<16),Ol(f.mode_ext>=0&&f.mode_ext<4),f.bitrate_stereoMode_Hist[f.bitrate_index][4]++,f.bitrate_stereoMode_Hist[15][4]++,f.channels_out==2&&(f.bitrate_stereoMode_Hist[f.bitrate_index][f.mode_ext]++,f.bitrate_stereoMode_Hist[15][f.mode_ext]++),c=0;c<f.mode_gr;++c)for(h=0;h<f.channels_out;++h){var d=f.l3_side.tt[c][h].block_type|0;f.l3_side.tt[c][h].mixed_block_flag!=0&&(d=4),f.bitrate_blockType_Hist[f.bitrate_index][d]++,f.bitrate_blockType_Hist[f.bitrate_index][5]++,f.bitrate_blockType_Hist[15][d]++,f.bitrate_blockType_Hist[15][5]++}}function u(f,c){var h=f.internal_flags,d,p;if(h.lame_encode_frame_init==0){var v,_,m=Mm(2014),g=Mm(2014);for(h.lame_encode_frame_init=1,v=0,_=0;v<286+576*(1+h.mode_gr);++v)v<576*h.mode_gr?(m[v]=0,h.channels_out==2&&(g[v]=0)):(m[v]=c[0][_],h.channels_out==2&&(g[v]=c[1][_]),++_);for(p=0;p<h.mode_gr;p++)for(d=0;d<h.channels_out;d++)h.l3_side.tt[p][d].block_type=G.SHORT_TYPE;a.mdct_sub48(h,m,g),Ol(h.mf_size>=G.BLKSIZE+f.framesize-G.FFTOFFSET),Ol(h.mf_size>=512+f.framesize-32)}}this.lame_encode_mp3_frame=function(f,c,h,d,p,v){var _,m=Tm([2,2]);m[0][0]=new ci,m[0][1]=new ci,m[1][0]=new ci,m[1][1]=new ci;var g=Tm([2,2]);g[0][0]=new ci,g[0][1]=new ci,g[1][0]=new ci,g[1][1]=new ci;var x,L=[null,null],y=f.internal_flags,M=DA([2,4]),F=[.5,.5],D=[[0,0],[0,0]],H=[[0,0],[0,0]],b,R,A;if(L[0]=c,L[1]=h,y.lame_encode_frame_init==0&&u(f,L),y.padding=0,(y.slot_lag-=y.frac_SpF)<0&&(y.slot_lag+=f.out_samplerate,y.padding=1),y.psymodel!=0){var k,O=[null,null],B=0,$=HA(2);for(A=0;A<y.mode_gr;A++){for(R=0;R<y.channels_out;R++)O[R]=L[R],B=576+A*576-G.FFTOFFSET;if(f.VBR==Bl.vbr_mtrh||f.VBR==Bl.vbr_mt?k=n.L3psycho_anal_vbr(f,O,B,A,m,g,D[A],H[A],M[A],$):k=n.L3psycho_anal_ns(f,O,B,A,m,g,D[A],H[A],M[A],$),k!=0)return-4;for(f.mode==wt.JOINT_STEREO&&(F[A]=M[A][2]+M[A][3],F[A]>0&&(F[A]=M[A][3]/F[A])),R=0;R<y.channels_out;R++){var Q=y.l3_side.tt[A][R];Q.block_type=$[R],Q.mixed_block_flag=0}}}else for(A=0;A<y.mode_gr;A++)for(R=0;R<y.channels_out;R++)y.l3_side.tt[A][R].block_type=G.NORM_TYPE,y.l3_side.tt[A][R].mixed_block_flag=0,H[A][R]=D[A][R]=700;if(o(y),a.mdct_sub48(y,L[0],L[1]),y.mode_ext=G.MPG_MD_LR_LR,f.force_ms)y.mode_ext=G.MPG_MD_MS_LR;else if(f.mode==wt.JOINT_STEREO){var X=0,oe=0;for(A=0;A<y.mode_gr;A++)for(R=0;R<y.channels_out;R++)X+=H[A][R],oe+=D[A][R];if(X<=1*oe){var w=y.l3_side.tt[0],P=y.l3_side.tt[y.mode_gr-1];w[0].block_type==w[1].block_type&&P[0].block_type==P[1].block_type&&(y.mode_ext=G.MPG_MD_MS_LR)}}if(y.mode_ext==t?(x=g,b=H):(x=m,b=D),f.analysis&&y.pinfo!=null)for(A=0;A<y.mode_gr;A++)for(R=0;R<y.channels_out;R++)y.pinfo.ms_ratio[A]=y.ms_ratio[A],y.pinfo.ms_ener_ratio[A]=F[A],y.pinfo.blocktype[A][R]=y.l3_side.tt[A][R].block_type,y.pinfo.pe[A][R]=b[A][R],km.arraycopy(y.l3_side.tt[A][R].xr,0,y.pinfo.xr[A][R],0,576),y.mode_ext==t&&(y.pinfo.ers[A][R]=y.pinfo.ers[A][R+2],km.arraycopy(y.pinfo.energy[A][R+2],0,y.pinfo.energy[A][R],0,y.pinfo.energy[A][R].length));if(f.VBR==Bl.vbr_off||f.VBR==Bl.vbr_abr){var ce,V;for(ce=0;ce<18;ce++)y.nsPsy.pefirbuf[ce]=y.nsPsy.pefirbuf[ce+1];for(V=0,A=0;A<y.mode_gr;A++)for(R=0;R<y.channels_out;R++)V+=b[A][R];for(y.nsPsy.pefirbuf[18]=V,V=y.nsPsy.pefirbuf[9],ce=0;ce<9;ce++)V+=(y.nsPsy.pefirbuf[ce]+y.nsPsy.pefirbuf[18-ce])*G.fircoef[ce];for(V=670*5*y.mode_gr*y.channels_out/V,A=0;A<y.mode_gr;A++)for(R=0;R<y.channels_out;R++)b[A][R]*=V}if(y.iteration_loop.iteration_loop(f,b,F,x),r.format_bitstream(f),_=r.copy_buffer(y,d,p,v,1),f.bWriteVbrTag&&i.addVbrFrame(f),f.analysis&&y.pinfo!=null){for(R=0;R<y.channels_out;R++){var le;for(le=0;le<e;le++)y.pinfo.pcmdata[R][le]=y.pinfo.pcmdata[R][le+f.framesize];for(le=e;le<1600;le++)y.pinfo.pcmdata[R][le]=L[R][le-e]}s.set_frame_pinfo(f,x)}return l(y),_}}var Lm=je.Util,Bm=je.new_float;function PA(){var e=Bm(G.BLKSIZE),t=Bm(G.BLKSIZE_s/2),r=[.9238795325112867,.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475];function n(s,a,o){var l=0,u,f,c;o<<=1;var h=a+o;u=4;do{var d,p,v,_,m,g,x;x=u>>1,_=u,m=u<<1,g=m+_,u=m<<1,f=a,c=f+x;do{var L,y,M,F;y=s[f+0]-s[f+_],L=s[f+0]+s[f+_],F=s[f+m]-s[f+g],M=s[f+m]+s[f+g],s[f+m]=L-M,s[f+0]=L+M,s[f+g]=y-F,s[f+_]=y+F,y=s[c+0]-s[c+_],L=s[c+0]+s[c+_],F=Lm.SQRT2*s[c+g],M=Lm.SQRT2*s[c+m],s[c+m]=L-M,s[c+0]=L+M,s[c+g]=y-F,s[c+_]=y+F,c+=u,f+=u}while(f<h);for(p=r[l+0],d=r[l+1],v=1;v<x;v++){var D,H;D=1-2*d*d,H=2*d*p,f=a+v,c=a+_-v;do{var b,R,A,L,y,k,M,O,F,B;R=H*s[f+_]-D*s[c+_],b=D*s[f+_]+H*s[c+_],y=s[f+0]-b,L=s[f+0]+b,k=s[c+0]-R,A=s[c+0]+R,R=H*s[f+g]-D*s[c+g],b=D*s[f+g]+H*s[c+g],F=s[f+m]-b,M=s[f+m]+b,B=s[c+m]-R,O=s[c+m]+R,R=d*M-p*B,b=p*M+d*B,s[f+m]=L-b,s[f+0]=L+b,s[c+g]=k-R,s[c+_]=k+R,R=p*O-d*F,b=d*O+p*F,s[c+m]=A-b,s[c+0]=A+b,s[f+g]=y-R,s[f+_]=y+R,c+=u,f+=u}while(f<h);D=p,p=D*r[l+0]-d*r[l+1],d=D*r[l+1]+d*r[l+0]}l+=2}while(u<o)}var i=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(s,a,o,l,u){for(var f=0;f<3;f++){var c=G.BLKSIZE_s/2,h=65535&576/3*(f+1),d=G.BLKSIZE_s/8-1;do{var p,v,_,m,g,x=i[d<<2]&255;p=t[x]*l[o][u+x+h],g=t[127-x]*l[o][u+x+h+128],v=p-g,p=p+g,_=t[x+64]*l[o][u+x+h+64],g=t[63-x]*l[o][u+x+h+192],m=_-g,_=_+g,c-=4,a[f][c+0]=p+_,a[f][c+2]=p-_,a[f][c+1]=v+m,a[f][c+3]=v-m,p=t[x+1]*l[o][u+x+h+1],g=t[126-x]*l[o][u+x+h+129],v=p-g,p=p+g,_=t[x+65]*l[o][u+x+h+65],g=t[62-x]*l[o][u+x+h+193],m=_-g,_=_+g,a[f][c+G.BLKSIZE_s/2+0]=p+_,a[f][c+G.BLKSIZE_s/2+2]=p-_,a[f][c+G.BLKSIZE_s/2+1]=v+m,a[f][c+G.BLKSIZE_s/2+3]=v-m}while(--d>=0);n(a[f],c,G.BLKSIZE_s/2)}},this.fft_long=function(s,a,o,l,u){var f=G.BLKSIZE/8-1,c=G.BLKSIZE/2;do{var h,d,p,v,_,m=i[f]&255;h=e[m]*l[o][u+m],_=e[m+512]*l[o][u+m+512],d=h-_,h=h+_,p=e[m+256]*l[o][u+m+256],_=e[m+768]*l[o][u+m+768],v=p-_,p=p+_,c-=4,a[c+0]=h+p,a[c+2]=h-p,a[c+1]=d+v,a[c+3]=d-v,h=e[m+1]*l[o][u+m+1],_=e[m+513]*l[o][u+m+513],d=h-_,h=h+_,p=e[m+257]*l[o][u+m+257],_=e[m+769]*l[o][u+m+769],v=p-_,p=p+_,a[c+G.BLKSIZE/2+0]=h+p,a[c+G.BLKSIZE/2+2]=h-p,a[c+G.BLKSIZE/2+1]=d+v,a[c+G.BLKSIZE/2+3]=d-v}while(--f>=0);n(a,c,G.BLKSIZE/2)},this.init_fft=function(s){for(var a=0;a<G.BLKSIZE;a++)e[a]=.42-.5*Math.cos(2*Math.PI*(a+.5)/G.BLKSIZE)+.08*Math.cos(4*Math.PI*(a+.5)/G.BLKSIZE);for(var a=0;a<G.BLKSIZE_s/2;a++)t[a]=.5*(1-Math.cos(2*Math.PI*(a+.5)/G.BLKSIZE_s))}}var Ps=je.VbrMode,Om=je.Float,js=je.ShortBlock,kr=je.Util,jA=je.Arrays,Qt=je.new_float,Vr=je.new_float_n,$i=je.new_int,rt=je.assert;function Sf(){var e=new PA,t=2.302585092994046,r=2,n=16,i=2,s=16,a=.34,o=1/(14752*14752)/(G.BLKSIZE/2),l=.01,u=.8,f=.6,c=.3,h=3.5,d=21,p=.2302585093;function v(j){return j}function _(j,U){for(var te=0,se=0;se<G.BLKSIZE/2;++se)te+=j[se]*U.ATH.eql_w[se];return te*=o,te}function m(j,U,te,se,ue,J,he,ve,_e,Ee,be){var Ae=j.internal_flags;if(_e<2)e.fft_long(Ae,se[ue],_e,Ee,be),e.fft_short(Ae,J[he],_e,Ee,be);else if(_e==2){for(var ge=G.BLKSIZE-1;ge>=0;--ge){var Ie=se[ue+0][ge],Be=se[ue+1][ge];se[ue+0][ge]=(Ie+Be)*kr.SQRT2*.5,se[ue+1][ge]=(Ie-Be)*kr.SQRT2*.5}for(var We=2;We>=0;--We)for(var ge=G.BLKSIZE_s-1;ge>=0;--ge){var Ie=J[he+0][We][ge],Be=J[he+1][We][ge];J[he+0][We][ge]=(Ie+Be)*kr.SQRT2*.5,J[he+1][We][ge]=(Ie-Be)*kr.SQRT2*.5}}U[0]=se[ue+0][0],U[0]*=U[0];for(var ge=G.BLKSIZE/2-1;ge>=0;--ge){var Se=se[ue+0][G.BLKSIZE/2-ge],qe=se[ue+0][G.BLKSIZE/2+ge];U[G.BLKSIZE/2-ge]=(Se*Se+qe*qe)*.5}for(var We=2;We>=0;--We){te[We][0]=J[he+0][We][0],te[We][0]*=te[We][0];for(var ge=G.BLKSIZE_s/2-1;ge>=0;--ge){var Se=J[he+0][We][G.BLKSIZE_s/2-ge],qe=J[he+0][We][G.BLKSIZE_s/2+ge];te[We][G.BLKSIZE_s/2-ge]=(Se*Se+qe*qe)*.5}}{for(var Ye=0,ge=11;ge<G.HBLKSIZE;ge++)Ye+=U[ge];Ae.tot_ener[_e]=Ye}if(j.analysis){for(var ge=0;ge<G.HBLKSIZE;ge++)Ae.pinfo.energy[ve][_e][ge]=Ae.pinfo.energy_save[_e][ge],Ae.pinfo.energy_save[_e][ge]=U[ge];Ae.pinfo.pe[ve][_e]=Ae.pe[_e]}j.athaa_loudapprox==2&&_e<2&&(Ae.loudness_sq[ve][_e]=Ae.loudness_sq_save[_e],Ae.loudness_sq_save[_e]=_(U,Ae))}var g=8,x=23,L=15,y,M,F,D=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749];function H(){y=Math.pow(10,(g+1)/16),M=Math.pow(10,(x+1)/16),F=Math.pow(10,L/10)}var b=[3.3246*3.3246,3.23837*3.23837,3.15437*3.15437,3.00412*3.00412,2.86103*2.86103,2.65407*2.65407,2.46209*2.46209,2.284*2.284,2.11879*2.11879,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,1.56911*1.56911,1.46658*1.46658,1.37074*1.37074,1.31036*1.31036,1.25264*1.25264,1.20648*1.20648,1.16203*1.16203,1.12765*1.12765,1.09428*1.09428,1.0659*1.0659,1.03826*1.03826,1.01895*1.01895,1],R=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1],A=[2.35364*2.35364,2.29259*2.29259,2.23313*2.23313,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,1.49999*1.49999,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.11084*1.11084,1.03826*1.03826];function k(j,U,te,se,ue,J){var he;if(U>j)if(U<j*M)he=U/j;else return j+U;else{if(j>=U*M)return j+U;he=j/U}if(j+=U,se+3<=6){if(he>=y)return j;var ve=0|kr.FAST_LOG10_X(he,16);return j*R[ve]}var ve=0|kr.FAST_LOG10_X(he,16);if(U=ue.ATH.cb_l[te]*ue.ATH.adjust,j<F*U){if(j>U){var _e,Ee;return _e=1,ve<=13&&(_e=A[ve]),Ee=kr.FAST_LOG10_X(j/U,10/15),j*((b[ve]-_e)*Ee+_e)}return ve>13?j:j*A[ve]}return j*b[ve]}var O=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1];function B(j,U,te){var se;if(j<0&&(j=0),U<0&&(U=0),j<=0)return U;if(U<=0)return j;if(U>j?se=U/j:se=j/U,te>=-2&&te<=2){if(se>=y)return j+U;var ue=0|kr.FAST_LOG10_X(se,16);return(j+U)*O[ue]}return se<M?j+U:(j<U&&(j=U),j)}function $(j,U){var te=j.internal_flags;if(te.channels_out>1){for(var se=0;se<G.SBMAX_l;se++){var ue=te.thm[0].l[se],J=te.thm[1].l[se];te.thm[0].l[se]+=J*U,te.thm[1].l[se]+=ue*U}for(var se=0;se<G.SBMAX_s;se++)for(var he=0;he<3;he++){var ue=te.thm[0].s[se][he],J=te.thm[1].s[se][he];te.thm[0].s[se][he]+=J*U,te.thm[1].s[se][he]+=ue*U}}}function Q(j){for(var U=0;U<G.SBMAX_l;U++)if(!(j.thm[0].l[U]>1.58*j.thm[1].l[U]||j.thm[1].l[U]>1.58*j.thm[0].l[U])){var te=j.mld_l[U]*j.en[3].l[U],se=Math.max(j.thm[2].l[U],Math.min(j.thm[3].l[U],te));te=j.mld_l[U]*j.en[2].l[U];var ue=Math.max(j.thm[3].l[U],Math.min(j.thm[2].l[U],te));j.thm[2].l[U]=se,j.thm[3].l[U]=ue}for(var U=0;U<G.SBMAX_s;U++)for(var J=0;J<3;J++)if(!(j.thm[0].s[U][J]>1.58*j.thm[1].s[U][J]||j.thm[1].s[U][J]>1.58*j.thm[0].s[U][J])){var te=j.mld_s[U]*j.en[3].s[U][J],se=Math.max(j.thm[2].s[U][J],Math.min(j.thm[3].s[U][J],te));te=j.mld_s[U]*j.en[2].s[U][J];var ue=Math.max(j.thm[3].s[U][J],Math.min(j.thm[2].s[U][J],te));j.thm[2].s[U][J]=se,j.thm[3].s[U][J]=ue}}function X(j,U,te){var se=U,ue=Math.pow(10,te);U*=2,se*=2;for(var J=0;J<G.SBMAX_l;J++){var he,ve,_e,Ee;if(Ee=j.ATH.cb_l[j.bm_l[J]]*ue,he=Math.min(Math.max(j.thm[0].l[J],Ee),Math.max(j.thm[1].l[J],Ee)),ve=Math.max(j.thm[2].l[J],Ee),_e=Math.max(j.thm[3].l[J],Ee),he*U<ve+_e){var be=he*se/(ve+_e);ve*=be,_e*=be}j.thm[2].l[J]=Math.min(ve,j.thm[2].l[J]),j.thm[3].l[J]=Math.min(_e,j.thm[3].l[J])}ue*=G.BLKSIZE_s/G.BLKSIZE;for(var J=0;J<G.SBMAX_s;J++)for(var Ae=0;Ae<3;Ae++){var he,ve,_e,Ee;if(Ee=j.ATH.cb_s[j.bm_s[J]]*ue,he=Math.min(Math.max(j.thm[0].s[J][Ae],Ee),Math.max(j.thm[1].s[J][Ae],Ee)),ve=Math.max(j.thm[2].s[J][Ae],Ee),_e=Math.max(j.thm[3].s[J][Ae],Ee),he*U<ve+_e){var be=he*U/(ve+_e);ve*=be,_e*=be}j.thm[2].s[J][Ae]=Math.min(j.thm[2].s[J][Ae],ve),j.thm[3].s[J][Ae]=Math.min(j.thm[3].s[J][Ae],_e)}}function oe(j,U,te,se,ue){var J,he,ve=0,_e=0;for(J=he=0;J<G.SBMAX_s;++he,++J){for(var Ee=j.bo_s[J],be=j.npart_s,Ae=Ee<be?Ee:be;he<Ae;)rt(U[he]>=0),rt(te[he]>=0),ve+=U[he],_e+=te[he],he++;if(j.en[se].s[J][ue]=ve,j.thm[se].s[J][ue]=_e,he>=be){++J;break}rt(U[he]>=0),rt(te[he]>=0);{var ge=j.PSY.bo_s_weight[J],Ie=1-ge;ve=ge*U[he],_e=ge*te[he],j.en[se].s[J][ue]+=ve,j.thm[se].s[J][ue]+=_e,ve=Ie*U[he],_e=Ie*te[he]}}for(;J<G.SBMAX_s;++J)j.en[se].s[J][ue]=0,j.thm[se].s[J][ue]=0}function w(j,U,te,se){var ue,J,he=0,ve=0;for(ue=J=0;ue<G.SBMAX_l;++J,++ue){for(var _e=j.bo_l[ue],Ee=j.npart_l,be=_e<Ee?_e:Ee;J<be;)rt(U[J]>=0),rt(te[J]>=0),he+=U[J],ve+=te[J],J++;if(j.en[se].l[ue]=he,j.thm[se].l[ue]=ve,J>=Ee){++ue;break}rt(U[J]>=0),rt(te[J]>=0);{var Ae=j.PSY.bo_l_weight[ue],ge=1-Ae;he=Ae*U[J],ve=Ae*te[J],j.en[se].l[ue]+=he,j.thm[se].l[ue]+=ve,he=ge*U[J],ve=ge*te[J]}}for(;ue<G.SBMAX_l;++ue)j.en[se].l[ue]=0,j.thm[se].l[ue]=0}function P(j,U,te,se,ue,J){var he=j.internal_flags,ve,_e;for(_e=ve=0;_e<he.npart_s;++_e){for(var Ee=0,be=he.numlines_s[_e],Ae=0;Ae<be;++Ae,++ve){var ge=U[J][ve];Ee+=ge}te[_e]=Ee}for(rt(_e==he.npart_s),ve=_e=0;_e<he.npart_s;_e++){var Ie=he.s3ind_s[_e][0],Be=he.s3_ss[ve++]*te[Ie];for(++Ie;Ie<=he.s3ind_s[_e][1];)Be+=he.s3_ss[ve]*te[Ie],++ve,++Ie;{var We=i*he.nb_s1[ue][_e];se[_e]=Math.min(Be,We)}if(he.blocktype_old[ue&1]==G.SHORT_TYPE){var We=s*he.nb_s2[ue][_e],Se=se[_e];se[_e]=Math.min(We,Se)}he.nb_s2[ue][_e]=he.nb_s1[ue][_e],he.nb_s1[ue][_e]=Be,rt(se[_e]>=0)}for(;_e<=G.CBANDS;++_e)te[_e]=0,se[_e]=0}function ce(j,U,te,se){var ue=j.internal_flags;j.short_blocks==js.short_block_coupled&&!(U[0]!=0&&U[1]!=0)&&(U[0]=U[1]=0);for(var J=0;J<ue.channels_out;J++)se[J]=G.NORM_TYPE,j.short_blocks==js.short_block_dispensed&&(U[J]=1),j.short_blocks==js.short_block_forced&&(U[J]=0),U[J]!=0?(rt(ue.blocktype_old[J]!=G.START_TYPE),ue.blocktype_old[J]==G.SHORT_TYPE&&(se[J]=G.STOP_TYPE)):(se[J]=G.SHORT_TYPE,ue.blocktype_old[J]==G.NORM_TYPE&&(ue.blocktype_old[J]=G.START_TYPE),ue.blocktype_old[J]==G.STOP_TYPE&&(ue.blocktype_old[J]=G.SHORT_TYPE)),te[J]=ue.blocktype_old[J],ue.blocktype_old[J]=se[J]}function V(j,U,te){return te>=1?j:te<=0?U:U>0?Math.pow(j/U,te)*U:0}var le=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130];function Y(j,U){for(var te=309.07,se=0;se<G.SBMAX_s-1;se++)for(var ue=0;ue<3;ue++){var J=j.thm.s[se][ue];if(J>0){var he=J*U,ve=j.en.s[se][ue];ve>he&&(ve>he*1e10?te+=le[se]*(10*t):te+=le[se]*kr.FAST_LOG10(ve/he))}}return te}var Z=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1];function I(j,U){for(var te=281.0575,se=0;se<G.SBMAX_l-1;se++){var ue=j.thm.l[se];if(ue>0){var J=ue*U,he=j.en.l[se];he>J&&(he>J*1e10?te+=Z[se]*(10*t):te+=Z[se]*kr.FAST_LOG10(he/J))}}return te}function K(j,U,te,se,ue){var J,he;for(J=he=0;J<j.npart_l;++J){var ve=0,_e=0,Ee;for(Ee=0;Ee<j.numlines_l[J];++Ee,++he){var be=U[he];ve+=be,_e<be&&(_e=be)}te[J]=ve,se[J]=_e,ue[J]=ve*j.rnumlines_l[J],rt(j.rnumlines_l[J]>=0),rt(te[J]>=0),rt(se[J]>=0),rt(ue[J]>=0)}}function ee(j,U,te,se){var ue=D.length-1,J=0,he=te[J]+te[J+1];if(he>0){var ve=U[J];ve<U[J+1]&&(ve=U[J+1]),rt(j.numlines_l[J]+j.numlines_l[J+1]-1>0),he=20*(ve*2-he)/(he*(j.numlines_l[J]+j.numlines_l[J+1]-1));var _e=0|he;_e>ue&&(_e=ue),se[J]=_e}else se[J]=0;for(J=1;J<j.npart_l-1;J++)if(he=te[J-1]+te[J]+te[J+1],he>0){var ve=U[J-1];ve<U[J]&&(ve=U[J]),ve<U[J+1]&&(ve=U[J+1]),rt(j.numlines_l[J-1]+j.numlines_l[J]+j.numlines_l[J+1]-1>0),he=20*(ve*3-he)/(he*(j.numlines_l[J-1]+j.numlines_l[J]+j.numlines_l[J+1]-1));var _e=0|he;_e>ue&&(_e=ue),se[J]=_e}else se[J]=0;if(rt(J==j.npart_l-1),he=te[J-1]+te[J],he>0){var ve=U[J-1];ve<U[J]&&(ve=U[J]),rt(j.numlines_l[J-1]+j.numlines_l[J]-1>0),he=20*(ve*2-he)/(he*(j.numlines_l[J-1]+j.numlines_l[J]-1));var _e=0|he;_e>ue&&(_e=ue),se[J]=_e}else se[J]=0;rt(J==j.npart_l-1)}var ae=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];this.L3psycho_anal_ns=function(j,U,te,se,ue,J,he,ve,_e,Ee){var be=j.internal_flags,Ae=Vr([2,G.BLKSIZE]),ge=Vr([2,3,G.BLKSIZE_s]),Ie=Qt(G.CBANDS+1),Be=Qt(G.CBANDS+1),We=Qt(G.CBANDS+2),Se=$i(2),qe=$i(2),Ye,Fe,$e,De,Ke,jt,ze,Je,it=Vr([2,576]),Vt,Or=$i(G.CBANDS+2),Gt=$i(G.CBANDS+2);for(jA.fill(Gt,0),Ye=be.channels_out,j.mode==wt.JOINT_STEREO&&(Ye=4),j.VBR==Ps.vbr_off?Vt=be.ResvMax==0?0:be.ResvSize/be.ResvMax*.5:j.VBR==Ps.vbr_rh||j.VBR==Ps.vbr_mtrh||j.VBR==Ps.vbr_mt?Vt=.6:Vt=1,Fe=0;Fe<be.channels_out;Fe++){var $t=U[Fe],Ar=te+576-350-d+192;for(De=0;De<576;De++){var Ir,Fr;for(Ir=$t[Ar+De+10],Fr=0,Ke=0;Ke<(d-1)/2-1;Ke+=2)Ir+=ae[Ke]*($t[Ar+De+Ke]+$t[Ar+De+d-Ke]),Fr+=ae[Ke+1]*($t[Ar+De+Ke+1]+$t[Ar+De+d-Ke-1]);it[Fe][De]=Ir+Fr}ue[se][Fe].en.assign(be.en[Fe]),ue[se][Fe].thm.assign(be.thm[Fe]),Ye>2&&(J[se][Fe].en.assign(be.en[Fe+2]),J[se][Fe].thm.assign(be.thm[Fe+2]))}for(Fe=0;Fe<Ye;Fe++){var Qr,Jr,ur=Qt(12),pn=[0,0,0,0],ms=Qt(12),pu=1,Zd,Qd=Qt(G.CBANDS),Jd=Qt(G.CBANDS),Wt=[0,0,0,0],e0=Qt(G.HBLKSIZE),t0=Vr([3,G.HBLKSIZE_s]);for(rt(be.npart_s<=G.CBANDS),rt(be.npart_l<=G.CBANDS),De=0;De<3;De++)ur[De]=be.nsPsy.last_en_subshort[Fe][De+6],rt(be.nsPsy.last_en_subshort[Fe][De+4]>0),ms[De]=ur[De]/be.nsPsy.last_en_subshort[Fe][De+4],pn[0]+=ur[De];if(Fe==2)for(De=0;De<576;De++){var mu,_u;mu=it[0][De],_u=it[1][De],it[0][De]=mu+_u,it[1][De]=mu-_u}{var r0=it[Fe&1],yo=0;for(De=0;De<9;De++){for(var Kb=yo+64,rr=1;yo<Kb;yo++)rr<Math.abs(r0[yo])&&(rr=Math.abs(r0[yo]));be.nsPsy.last_en_subshort[Fe][De]=ur[De+3]=rr,pn[1+De/3]+=rr,rr>ur[De+3-2]?(rt(ur[De+3-2]>0),rr=rr/ur[De+3-2]):ur[De+3-2]>rr*10?rr=ur[De+3-2]/(rr*10):rr=0,ms[De+3]=rr}}if(j.analysis){var gu=ms[0];for(De=1;De<12;De++)gu<ms[De]&&(gu=ms[De]);be.pinfo.ers[se][Fe]=be.pinfo.ers_save[Fe],be.pinfo.ers_save[Fe]=gu}for(Zd=Fe==3?be.nsPsy.attackthre_s:be.nsPsy.attackthre,De=0;De<12;De++)Wt[De/3]==0&&ms[De]>Zd&&(Wt[De/3]=De%3+1);for(De=1;De<4;De++){var vu;pn[De-1]>pn[De]?(rt(pn[De]>0),vu=pn[De-1]/pn[De]):(rt(pn[De-1]>0),vu=pn[De]/pn[De-1]),vu<1.7&&(Wt[De]=0,De==1&&(Wt[0]=0))}for(Wt[0]!=0&&be.nsPsy.lastAttacks[Fe]!=0&&(Wt[0]=0),(be.nsPsy.lastAttacks[Fe]==3||Wt[0]+Wt[1]+Wt[2]+Wt[3]!=0)&&(pu=0,Wt[1]!=0&&Wt[0]!=0&&(Wt[1]=0),Wt[2]!=0&&Wt[1]!=0&&(Wt[2]=0),Wt[3]!=0&&Wt[2]!=0&&(Wt[3]=0)),Fe<2?qe[Fe]=pu:pu==0&&(qe[0]=qe[1]=0),_e[Fe]=be.tot_ener[Fe],Jr=ge,Qr=Ae,m(j,e0,t0,Qr,Fe&1,Jr,Fe&1,se,Fe,U,te),K(be,e0,Ie,Qd,Jd),ee(be,Qd,Jd,Or),Je=0;Je<3;Je++){var yu,Rr;for(P(j,t0,Be,We,Fe,Je),oe(be,Be,We,Fe,Je),ze=0;ze<G.SBMAX_s;ze++){if(Rr=be.thm[Fe].s[ze][Je],Rr*=u,Wt[Je]>=2||Wt[Je+1]==1){var bo=Je!=0?Je-1:2,rr=V(be.thm[Fe].s[ze][bo],Rr,f*Vt);Rr=Math.min(Rr,rr)}if(Wt[Je]==1){var bo=Je!=0?Je-1:2,rr=V(be.thm[Fe].s[ze][bo],Rr,c*Vt);Rr=Math.min(Rr,rr)}else if(Je!=0&&Wt[Je-1]==3||Je==0&&be.nsPsy.lastAttacks[Fe]==3){var bo=Je!=2?Je+1:0,rr=V(be.thm[Fe].s[ze][bo],Rr,c*Vt);Rr=Math.min(Rr,rr)}yu=ur[Je*3+3]+ur[Je*3+4]+ur[Je*3+5],ur[Je*3+5]*6<yu&&(Rr*=.5,ur[Je*3+4]*6<yu&&(Rr*=.5)),be.thm[Fe].s[ze][Je]=Rr}}for(be.nsPsy.lastAttacks[Fe]=Wt[2],jt=0,$e=0;$e<be.npart_l;$e++){for(var Oi=be.s3ind[$e][0],bu=Ie[Oi]*D[Or[Oi]],Ii=be.s3_ll[jt++]*bu;++Oi<=be.s3ind[$e][1];)bu=Ie[Oi]*D[Or[Oi]],Ii=k(Ii,be.s3_ll[jt++]*bu,Oi,Oi-$e,be);Ii*=.158489319246111,be.blocktype_old[Fe&1]==G.SHORT_TYPE?We[$e]=Ii:We[$e]=V(Math.min(Ii,Math.min(r*be.nb_1[Fe][$e],n*be.nb_2[Fe][$e])),Ii,Vt),be.nb_2[Fe][$e]=be.nb_1[Fe][$e],be.nb_1[Fe][$e]=Ii}for(;$e<=G.CBANDS;++$e)Ie[$e]=0,We[$e]=0;w(be,Ie,We,Fe)}if((j.mode==wt.STEREO||j.mode==wt.JOINT_STEREO)&&j.interChRatio>0&&$(j,j.interChRatio),j.mode==wt.JOINT_STEREO){var wu;Q(be),wu=j.msfix,Math.abs(wu)>0&&X(be,wu,j.ATHlower*be.ATH.adjust)}for(ce(j,qe,Ee,Se),Fe=0;Fe<Ye;Fe++){var wo,So=0,za,Va;Fe>1?(wo=ve,So=-2,za=G.NORM_TYPE,(Ee[0]==G.SHORT_TYPE||Ee[1]==G.SHORT_TYPE)&&(za=G.SHORT_TYPE),Va=J[se][Fe-2]):(wo=he,So=0,za=Ee[Fe],Va=ue[se][Fe]),za==G.SHORT_TYPE?wo[So+Fe]=Y(Va,be.masking_lower):wo[So+Fe]=I(Va,be.masking_lower),j.analysis&&(be.pinfo.pe[se][Fe]=wo[So+Fe])}return 0};function Me(j,U,te,se,ue,J,he,ve){var _e=j.internal_flags;if(se<2)e.fft_long(_e,he[ve],se,U,te);else if(se==2)for(var Ee=G.BLKSIZE-1;Ee>=0;--Ee){var be=he[ve+0][Ee],Ae=he[ve+1][Ee];he[ve+0][Ee]=(be+Ae)*kr.SQRT2*.5,he[ve+1][Ee]=(be-Ae)*kr.SQRT2*.5}J[0]=he[ve+0][0],J[0]*=J[0];for(var Ee=G.BLKSIZE/2-1;Ee>=0;--Ee){var ge=he[ve+0][G.BLKSIZE/2-Ee],Ie=he[ve+0][G.BLKSIZE/2+Ee];J[G.BLKSIZE/2-Ee]=(ge*ge+Ie*Ie)*.5}{for(var Be=0,Ee=11;Ee<G.HBLKSIZE;Ee++)Be+=J[Ee];_e.tot_ener[se]=Be}if(j.analysis){for(var Ee=0;Ee<G.HBLKSIZE;Ee++)_e.pinfo.energy[ue][se][Ee]=_e.pinfo.energy_save[se][Ee],_e.pinfo.energy_save[se][Ee]=J[Ee];_e.pinfo.pe[ue][se]=_e.pe[se]}}function S(j,U,te,se,ue,J,he,ve){var _e=j.internal_flags;if(ue==0&&se<2&&e.fft_short(_e,he[ve],se,U,te),se==2)for(var Ee=G.BLKSIZE_s-1;Ee>=0;--Ee){var be=he[ve+0][ue][Ee],Ae=he[ve+1][ue][Ee];he[ve+0][ue][Ee]=(be+Ae)*kr.SQRT2*.5,he[ve+1][ue][Ee]=(be-Ae)*kr.SQRT2*.5}J[ue][0]=he[ve+0][ue][0],J[ue][0]*=J[ue][0];for(var Ee=G.BLKSIZE_s/2-1;Ee>=0;--Ee){var ge=he[ve+0][ue][G.BLKSIZE_s/2-Ee],Ie=he[ve+0][ue][G.BLKSIZE_s/2+Ee];J[ue][G.BLKSIZE_s/2-Ee]=(ge*ge+Ie*Ie)*.5}}function E(j,U,te,se){var ue=j.internal_flags;j.athaa_loudapprox==2&&te<2&&(ue.loudness_sq[U][te]=ue.loudness_sq_save[te],ue.loudness_sq_save[te]=_(se,ue))}var N=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];function W(j,U,te,se,ue,J,he,ve,_e,Ee){for(var be=Vr([2,576]),Ae=j.internal_flags,ge=Ae.channels_out,Ie=j.mode==wt.JOINT_STEREO?4:ge,Be=0;Be<ge;Be++){firbuf=U[Be];for(var We=te+576-350-d+192,Se=0;Se<576;Se++){var qe,Ye;qe=firbuf[We+Se+10],Ye=0;for(var Fe=0;Fe<(d-1)/2-1;Fe+=2)qe+=N[Fe]*(firbuf[We+Se+Fe]+firbuf[We+Se+d-Fe]),Ye+=N[Fe+1]*(firbuf[We+Se+Fe+1]+firbuf[We+Se+d-Fe-1]);be[Be][Se]=qe+Ye}ue[se][Be].en.assign(Ae.en[Be]),ue[se][Be].thm.assign(Ae.thm[Be]),Ie>2&&(J[se][Be].en.assign(Ae.en[Be+2]),J[se][Be].thm.assign(Ae.thm[Be+2]))}for(var Be=0;Be<Ie;Be++){var $e=Qt(12),De=Qt(12),Ke=[0,0,0,0],jt=be[Be&1],ze=0,Je=Be==3?Ae.nsPsy.attackthre_s:Ae.nsPsy.attackthre,it=1;if(Be==2)for(var Se=0,Fe=576;Fe>0;++Se,--Fe){var Vt=be[0][Se],Or=be[1][Se];be[0][Se]=Vt+Or,be[1][Se]=Vt-Or}for(var Se=0;Se<3;Se++)De[Se]=Ae.nsPsy.last_en_subshort[Be][Se+6],rt(Ae.nsPsy.last_en_subshort[Be][Se+4]>0),$e[Se]=De[Se]/Ae.nsPsy.last_en_subshort[Be][Se+4],Ke[0]+=De[Se];for(var Se=0;Se<9;Se++){for(var Gt=ze+64,$t=1;ze<Gt;ze++)$t<Math.abs(jt[ze])&&($t=Math.abs(jt[ze]));Ae.nsPsy.last_en_subshort[Be][Se]=De[Se+3]=$t,Ke[1+Se/3]+=$t,$t>De[Se+3-2]?(rt(De[Se+3-2]>0),$t=$t/De[Se+3-2]):De[Se+3-2]>$t*10?$t=De[Se+3-2]/($t*10):$t=0,$e[Se+3]=$t}for(var Se=0;Se<3;++Se){var Ar=De[Se*3+3]+De[Se*3+4]+De[Se*3+5],Ir=1;De[Se*3+5]*6<Ar&&(Ir*=.5,De[Se*3+4]*6<Ar&&(Ir*=.5)),ve[Be][Se]=Ir}if(j.analysis){for(var Fr=$e[0],Se=1;Se<12;Se++)Fr<$e[Se]&&(Fr=$e[Se]);Ae.pinfo.ers[se][Be]=Ae.pinfo.ers_save[Be],Ae.pinfo.ers_save[Be]=Fr}for(var Se=0;Se<12;Se++)_e[Be][Se/3]==0&&$e[Se]>Je&&(_e[Be][Se/3]=Se%3+1);for(var Se=1;Se<4;Se++){var Qr=Ke[Se-1],Jr=Ke[Se],ur=Math.max(Qr,Jr);ur<4e4&&Qr<1.7*Jr&&Jr<1.7*Qr&&(Se==1&&_e[Be][0]<=_e[Be][Se]&&(_e[Be][0]=0),_e[Be][Se]=0)}_e[Be][0]<=Ae.nsPsy.lastAttacks[Be]&&(_e[Be][0]=0),(Ae.nsPsy.lastAttacks[Be]==3||_e[Be][0]+_e[Be][1]+_e[Be][2]+_e[Be][3]!=0)&&(it=0,_e[Be][1]!=0&&_e[Be][0]!=0&&(_e[Be][1]=0),_e[Be][2]!=0&&_e[Be][1]!=0&&(_e[Be][2]=0),_e[Be][3]!=0&&_e[Be][2]!=0&&(_e[Be][3]=0)),Be<2?Ee[Be]=it:it==0&&(Ee[0]=Ee[1]=0),he[Be]=Ae.tot_ener[Be]}}function re(j,U,te){if(te==0)for(var se=0;se<j.npart_s;se++)j.nb_s2[U][se]=j.nb_s1[U][se],j.nb_s1[U][se]=0}function ne(j,U){for(var te=0;te<j.npart_l;te++)j.nb_2[U][te]=j.nb_1[U][te],j.nb_1[U][te]=0}function de(j,U,te,se){var ue=D.length-1,J=0,he=te[J]+te[J+1];if(he>0){var ve=U[J];ve<U[J+1]&&(ve=U[J+1]),rt(j.numlines_s[J]+j.numlines_s[J+1]-1>0),he=20*(ve*2-he)/(he*(j.numlines_s[J]+j.numlines_s[J+1]-1));var _e=0|he;_e>ue&&(_e=ue),se[J]=_e}else se[J]=0;for(J=1;J<j.npart_s-1;J++)if(he=te[J-1]+te[J]+te[J+1],rt(J+1<j.npart_s),he>0){var ve=U[J-1];ve<U[J]&&(ve=U[J]),ve<U[J+1]&&(ve=U[J+1]),rt(j.numlines_s[J-1]+j.numlines_s[J]+j.numlines_s[J+1]-1>0),he=20*(ve*3-he)/(he*(j.numlines_s[J-1]+j.numlines_s[J]+j.numlines_s[J+1]-1));var _e=0|he;_e>ue&&(_e=ue),se[J]=_e}else se[J]=0;if(rt(J==j.npart_s-1),he=te[J-1]+te[J],he>0){var ve=U[J-1];ve<U[J]&&(ve=U[J]),rt(j.numlines_s[J-1]+j.numlines_s[J]-1>0),he=20*(ve*2-he)/(he*(j.numlines_s[J-1]+j.numlines_s[J]-1));var _e=0|he;_e>ue&&(_e=ue),se[J]=_e}else se[J]=0;rt(J==j.npart_s-1)}function pe(j,U,te,se,ue,J){var he=j.internal_flags,ve=new float[G.CBANDS],_e=Qt(G.CBANDS),Ee,be,Ae,ge=new int[G.CBANDS];for(Ae=be=0;Ae<he.npart_s;++Ae){var Ie=0,Be=0,We=he.numlines_s[Ae];for(Ee=0;Ee<We;++Ee,++be){var Se=U[J][be];Ie+=Se,Be<Se&&(Be=Se)}te[Ae]=Ie,ve[Ae]=Be,_e[Ae]=Ie/We,rt(_e[Ae]>=0)}for(rt(Ae==he.npart_s);Ae<G.CBANDS;++Ae)ve[Ae]=0,_e[Ae]=0;for(de(he,ve,_e,ge),be=Ae=0;Ae<he.npart_s;Ae++){var qe=he.s3ind_s[Ae][0],Ye=he.s3ind_s[Ae][1],Fe,$e,De,Ke,jt;for(Fe=ge[qe],$e=1,Ke=he.s3_ss[be]*te[qe]*D[ge[qe]],++be,++qe;qe<=Ye;)Fe+=ge[qe],$e+=1,De=he.s3_ss[be]*te[qe]*D[ge[qe]],Ke=B(Ke,De,qe-Ae),++be,++qe;Fe=(1+2*Fe)/(2*$e),jt=D[Fe]*.5,Ke*=jt,se[Ae]=Ke,he.nb_s2[ue][Ae]=he.nb_s1[ue][Ae],he.nb_s1[ue][Ae]=Ke,De=ve[Ae],De*=he.minval_s[Ae],De*=jt,se[Ae]>De&&(se[Ae]=De),he.masking_lower>1&&(se[Ae]*=he.masking_lower),se[Ae]>te[Ae]&&(se[Ae]=te[Ae]),he.masking_lower<1&&(se[Ae]*=he.masking_lower),rt(se[Ae]>=0)}for(;Ae<G.CBANDS;++Ae)te[Ae]=0,se[Ae]=0}function me(j,U,te,se,ue){var J=Qt(G.CBANDS),he=Qt(G.CBANDS),ve=$i(G.CBANDS+2),_e;K(j,U,te,J,he),ee(j,J,he,ve);var Ee=0;for(_e=0;_e<j.npart_l;_e++){var be,Ae,ge,Ie,Be=j.s3ind[_e][0],We=j.s3ind[_e][1],Se=0,qe=0;for(Se=ve[Be],qe+=1,Ae=j.s3_ll[Ee]*te[Be]*D[ve[Be]],++Ee,++Be;Be<=We;)Se+=ve[Be],qe+=1,be=j.s3_ll[Ee]*te[Be]*D[ve[Be]],Ie=B(Ae,be,Be-_e),Ae=Ie,++Ee,++Be;if(Se=(1+2*Se)/(2*qe),ge=D[Se]*.5,Ae*=ge,j.blocktype_old[ue&1]==G.SHORT_TYPE){var Ye=r*j.nb_1[ue][_e];Ye>0?se[_e]=Math.min(Ae,Ye):se[_e]=Math.min(Ae,te[_e]*c)}else{var Fe=n*j.nb_2[ue][_e],$e=r*j.nb_1[ue][_e],Ye;Fe<=0&&(Fe=Ae),$e<=0&&($e=Ae),j.blocktype_old[ue&1]==G.NORM_TYPE?Ye=Math.min($e,Fe):Ye=$e,se[_e]=Math.min(Ae,Ye)}j.nb_2[ue][_e]=j.nb_1[ue][_e],j.nb_1[ue][_e]=Ae,be=J[_e],be*=j.minval_l[_e],be*=ge,se[_e]>be&&(se[_e]=be),j.masking_lower>1&&(se[_e]*=j.masking_lower),se[_e]>te[_e]&&(se[_e]=te[_e]),j.masking_lower<1&&(se[_e]*=j.masking_lower),rt(se[_e]>=0)}for(;_e<G.CBANDS;++_e)te[_e]=0,se[_e]=0}function fe(j,U){var te=j.internal_flags;j.short_blocks==js.short_block_coupled&&!(U[0]!=0&&U[1]!=0)&&(U[0]=U[1]=0);for(var se=0;se<te.channels_out;se++)j.short_blocks==js.short_block_dispensed&&(U[se]=1),j.short_blocks==js.short_block_forced&&(U[se]=0)}function ke(j,U,te){for(var se=j.internal_flags,ue=0;ue<se.channels_out;ue++){var J=G.NORM_TYPE;U[ue]!=0?(rt(se.blocktype_old[ue]!=G.START_TYPE),se.blocktype_old[ue]==G.SHORT_TYPE&&(J=G.STOP_TYPE)):(J=G.SHORT_TYPE,se.blocktype_old[ue]==G.NORM_TYPE&&(se.blocktype_old[ue]=G.START_TYPE),se.blocktype_old[ue]==G.STOP_TYPE&&(se.blocktype_old[ue]=G.SHORT_TYPE)),te[ue]=se.blocktype_old[ue],se.blocktype_old[ue]=J}}function we(j,U,te,se,ue,J,he){for(var ve=J*2,_e=J>0?Math.pow(10,ue):1,Ee,be,Ae=0;Ae<he;++Ae){var ge=j[2][Ae],Ie=j[3][Ae],Be=U[0][Ae],We=U[1][Ae],Se=U[2][Ae],qe=U[3][Ae];if(Be<=1.58*We&&We<=1.58*Be){var Ye=te[Ae]*Ie,Fe=te[Ae]*ge;be=Math.max(Se,Math.min(qe,Ye)),Ee=Math.max(qe,Math.min(Se,Fe))}else be=Se,Ee=qe;if(J>0){var $e,De,Ke=se[Ae]*_e;if($e=Math.min(Math.max(Be,Ke),Math.max(We,Ke)),Se=Math.max(be,Ke),qe=Math.max(Ee,Ke),De=Se+qe,De>0&&$e*ve<De){var jt=$e*ve/De;Se*=jt,qe*=jt}be=Math.min(Se,be),Ee=Math.min(qe,Ee)}be>ge&&(be=ge),Ee>Ie&&(Ee=Ie),U[2][Ae]=be,U[3][Ae]=Ee}}this.L3psycho_anal_vbr=function(j,U,te,se,ue,J,he,ve,_e,Ee){var be=j.internal_flags,Ae,ge,Ie=Qt(G.HBLKSIZE),Be=Vr([3,G.HBLKSIZE_s]),We=Vr([2,G.BLKSIZE]),Se=Vr([2,3,G.BLKSIZE_s]),qe=Vr([4,G.CBANDS]),Ye=Vr([4,G.CBANDS]),Fe=Vr([4,3]),$e=.6,De=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],Ke=$i(2),jt=j.mode==wt.JOINT_STEREO?4:be.channels_out;W(j,U,te,se,ue,J,_e,Fe,De,Ke),fe(j,Ke);{for(var ze=0;ze<jt;ze++){var Je=ze&1;Ae=We,Me(j,U,te,ze,se,Ie,Ae,Je),E(j,se,ze,Ie),Ke[Je]!=0?me(be,Ie,qe[ze],Ye[ze],ze):ne(be,ze)}Ke[0]+Ke[1]==2&&j.mode==wt.JOINT_STEREO&&we(qe,Ye,be.mld_cb_l,be.ATH.cb_l,j.ATHlower*be.ATH.adjust,j.msfix,be.npart_l);for(var ze=0;ze<jt;ze++){var Je=ze&1;Ke[Je]!=0&&w(be,qe[ze],Ye[ze],ze)}}{for(var it=0;it<3;it++){for(var ze=0;ze<jt;++ze){var Je=ze&1;Ke[Je]!=0?re(be,ze,it):(ge=Se,S(j,U,te,ze,it,Be,ge,Je),pe(j,Be,qe[ze],Ye[ze],ze,it))}Ke[0]+Ke[1]==0&&j.mode==wt.JOINT_STEREO&&we(qe,Ye,be.mld_cb_s,be.ATH.cb_s,j.ATHlower*be.ATH.adjust,j.msfix,be.npart_s);for(var ze=0;ze<jt;++ze){var Je=ze&1;Ke[Je]==0&&oe(be,qe[ze],Ye[ze],ze,it)}}for(var ze=0;ze<jt;ze++){var Je=ze&1;if(Ke[Je]==0)for(var Vt=0;Vt<G.SBMAX_s;Vt++){for(var Or=Qt(3),it=0;it<3;it++){var Gt=be.thm[ze].s[Vt][it];if(Gt*=u,De[ze][it]>=2||De[ze][it+1]==1){var $t=it!=0?it-1:2,Ar=V(be.thm[ze].s[Vt][$t],Gt,f*$e);Gt=Math.min(Gt,Ar)}else if(De[ze][it]==1){var $t=it!=0?it-1:2,Ar=V(be.thm[ze].s[Vt][$t],Gt,c*$e);Gt=Math.min(Gt,Ar)}else if(it!=0&&De[ze][it-1]==3||it==0&&be.nsPsy.lastAttacks[ze]==3){var $t=it!=2?it+1:0,Ar=V(be.thm[ze].s[Vt][$t],Gt,c*$e);Gt=Math.min(Gt,Ar)}Gt*=Fe[ze][it],Or[it]=Gt}for(var it=0;it<3;it++)be.thm[ze].s[Vt][it]=Or[it]}}}for(var ze=0;ze<jt;ze++)be.nsPsy.lastAttacks[ze]=De[ze][2];ke(j,Ke,Ee);for(var ze=0;ze<jt;ze++){var Ir,Fr,Qr,Jr;ze>1?(Ir=ve,Fr=-2,Qr=G.NORM_TYPE,(Ee[0]==G.SHORT_TYPE||Ee[1]==G.SHORT_TYPE)&&(Qr=G.SHORT_TYPE),Jr=J[se][ze-2]):(Ir=he,Fr=0,Qr=Ee[ze],Jr=ue[se][ze]),Qr==G.SHORT_TYPE?Ir[Fr+ze]=Y(Jr,be.masking_lower):Ir[Fr+ze]=I(Jr,be.masking_lower),j.analysis&&(be.pinfo.pe[se][ze]=Ir[Fr+ze])}return 0};function Re(j,U){var te=j,se;return te>=0?se=-te*27:se=te*U,se<=-72?0:Math.exp(se*p)}function Oe(j){var U=0,te=0;{var se=0,ue,J;for(se=0;Re(se,j)>1e-20;se-=1);for(ue=se,J=0;Math.abs(J-ue)>1e-12;)se=(J+ue)/2,Re(se,j)>0?J=se:ue=se;U=ue}{var se=0,ue,J;for(se=0;Re(se,j)>1e-20;se+=1);for(ue=0,J=se;Math.abs(J-ue)>1e-12;)se=(J+ue)/2,Re(se,j)>0?ue=se:J=se;te=J}{var he=0,ve=1e3,_e;for(_e=0;_e<=ve;++_e){var se=U+_e*(te-U)/ve,Ee=Re(se,j);he+=Ee}{var be=(ve+1)/(he*(te-U));return be}}}function Pe(j){var U,te,se,ue;return U=j,U>=0?U*=3:U*=1.5,U>=.5&&U<=2.5?(ue=U-.5,te=8*(ue*ue-2*ue)):te=0,U+=.474,se=15.811389+7.5*U-17.5*Math.sqrt(1+U*U),se<=-60?0:(U=Math.exp((te+se)*p),U/=.6609193,U)}function z(j){return j<0&&(j=0),j=j*.001,13*Math.atan(.76*j)+3.5*Math.atan(j*j/(7.5*7.5))}function C(j,U,te,se,ue,J,he,ve,_e,Ee,be,Ae){var ge=Qt(G.CBANDS+1),Ie=ve/(Ae>15?2*576:2*192),Be=$i(G.HBLKSIZE),We;ve/=_e;var Se=0,qe=0;for(We=0;We<G.CBANDS;We++){var Ye,Fe;for(Ye=z(ve*Se),ge[We]=ve*Se,Fe=Se;z(ve*Fe)-Ye<a&&Fe<=_e/2;Fe++);for(j[We]=Fe-Se,qe=We+1;Se<Fe;)Be[Se++]=We;if(Se>_e/2){Se=_e/2,++We;break}}ge[We]=ve*Se;for(var $e=0;$e<Ae;$e++){var De,Ke,jt,ze,Je;jt=Ee[$e],ze=Ee[$e+1],De=0|Math.floor(.5+be*(jt-.5)),De<0&&(De=0),Ke=0|Math.floor(.5+be*(ze-.5)),Ke>_e/2&&(Ke=_e/2),te[$e]=(Be[De]+Be[Ke])/2,U[$e]=Be[Ke];var it=Ie*ze;he[$e]=(it-ge[U[$e]])/(ge[U[$e]+1]-ge[U[$e]]),he[$e]<0?he[$e]=0:he[$e]>1&&(he[$e]=1),Je=z(ve*Ee[$e]*be),Je=Math.min(Je,15.5)/15.5,J[$e]=Math.pow(10,1.25*(1-Math.cos(Math.PI*Je))-2.5)}Se=0;for(var Vt=0;Vt<qe;Vt++){var Or=j[Vt],Ye,Gt;Ye=z(ve*Se),Gt=z(ve*(Se+Or-1)),se[Vt]=.5*(Ye+Gt),Ye=z(ve*(Se-.5)),Gt=z(ve*(Se+Or-.5)),ue[Vt]=Gt-Ye,Se+=Or}return qe}function T(j,U,te,se,ue,J){var he=Vr([G.CBANDS,G.CBANDS]),ve,_e=0;if(J)for(var Ee=0;Ee<U;Ee++)for(ve=0;ve<U;ve++){var be=Pe(te[Ee]-te[ve])*se[ve];he[Ee][ve]=be*ue[Ee]}else for(ve=0;ve<U;ve++)for(var Ae=15+Math.min(21/te[ve],12),ge=Oe(Ae),Ee=0;Ee<U;Ee++){var be=ge*Re(te[Ee]-te[ve],Ae)*se[ve];he[Ee][ve]=be*ue[Ee]}for(var Ee=0;Ee<U;Ee++){for(ve=0;ve<U&&!(he[Ee][ve]>0);ve++);for(j[Ee][0]=ve,ve=U-1;ve>0&&!(he[Ee][ve]>0);ve--);j[Ee][1]=ve,_e+=j[Ee][1]-j[Ee][0]+1}for(var Ie=Qt(_e),Be=0,Ee=0;Ee<U;Ee++)for(ve=j[Ee][0];ve<=j[Ee][1];ve++)Ie[Be++]=he[Ee][ve];return Ie}function q(j){var U=z(j);return U=Math.min(U,15.5)/15.5,Math.pow(10,1.25*(1-Math.cos(Math.PI*U))-2.5)}this.psymodel_init=function(j){var U=j.internal_flags,te,se=!0,ue=13,J=24,he=0,ve=0,_e=-8.25,Ee=-4.5,be=Qt(G.CBANDS),Ae=Qt(G.CBANDS),ge=Qt(G.CBANDS),Ie=j.out_samplerate;switch(j.experimentalZ){default:case 0:se=!0;break;case 1:se=!(j.VBR==Ps.vbr_mtrh||j.VBR==Ps.vbr_mt);break;case 2:se=!1;break;case 3:ue=8,he=-1.75,ve=-.0125,_e=-8.25,Ee=-2.25;break}for(U.ms_ener_ratio_old=.25,U.blocktype_old[0]=U.blocktype_old[1]=G.NORM_TYPE,te=0;te<4;++te){for(var Se=0;Se<G.CBANDS;++Se)U.nb_1[te][Se]=1e20,U.nb_2[te][Se]=1e20,U.nb_s1[te][Se]=U.nb_s2[te][Se]=1;for(var Be=0;Be<G.SBMAX_l;Be++)U.en[te].l[Be]=1e20,U.thm[te].l[Be]=1e20;for(var Se=0;Se<3;++Se){for(var Be=0;Be<G.SBMAX_s;Be++)U.en[te].s[Be][Se]=1e20,U.thm[te].s[Be][Se]=1e20;U.nsPsy.lastAttacks[te]=0}for(var Se=0;Se<9;Se++)U.nsPsy.last_en_subshort[te][Se]=10}for(U.loudness_sq_save[0]=U.loudness_sq_save[1]=0,U.npart_l=C(U.numlines_l,U.bo_l,U.bm_l,be,Ae,U.mld_l,U.PSY.bo_l_weight,Ie,G.BLKSIZE,U.scalefac_band.l,G.BLKSIZE/(2*576),G.SBMAX_l),rt(U.npart_l<G.CBANDS),te=0;te<U.npart_l;te++){var We=he;be[te]>=ue&&(We=ve*(be[te]-ue)/(J-ue)+he*(J-be[te])/(J-ue)),ge[te]=Math.pow(10,We/10),U.numlines_l[te]>0?U.rnumlines_l[te]=1/U.numlines_l[te]:U.rnumlines_l[te]=0}U.s3_ll=T(U.s3ind,U.npart_l,be,Ae,ge,se);var Se=0;for(te=0;te<U.npart_l;te++){var qe;qe=Om.MAX_VALUE;for(var Ye=0;Ye<U.numlines_l[te];Ye++,Se++){var Fe=Ie*Se/(1e3*G.BLKSIZE),$e;$e=this.ATHformula(Fe*1e3,j)-20,$e=Math.pow(10,.1*$e),$e*=U.numlines_l[te],qe>$e&&(qe=$e)}U.ATH.cb_l[te]=qe,qe=-20+be[te]*20/10,qe>6&&(qe=100),qe<-15&&(qe=-15),qe-=8,U.minval_l[te]=Math.pow(10,qe/10)*U.numlines_l[te]}for(U.npart_s=C(U.numlines_s,U.bo_s,U.bm_s,be,Ae,U.mld_s,U.PSY.bo_s_weight,Ie,G.BLKSIZE_s,U.scalefac_band.s,G.BLKSIZE_s/(2*192),G.SBMAX_s),rt(U.npart_s<G.CBANDS),Se=0,te=0;te<U.npart_s;te++){var qe,We=_e;be[te]>=ue&&(We=Ee*(be[te]-ue)/(J-ue)+_e*(J-be[te])/(J-ue)),ge[te]=Math.pow(10,We/10),qe=Om.MAX_VALUE;for(var Ye=0;Ye<U.numlines_s[te];Ye++,Se++){var Fe=Ie*Se/(1e3*G.BLKSIZE_s),$e;$e=this.ATHformula(Fe*1e3,j)-20,$e=Math.pow(10,.1*$e),$e*=U.numlines_s[te],qe>$e&&(qe=$e)}U.ATH.cb_s[te]=qe,qe=-7+be[te]*7/12,be[te]>12&&(qe*=1+Math.log(1+qe)*3.1),be[te]<12&&(qe*=1+Math.log(1-qe)*2.3),qe<-15&&(qe=-15),qe-=8,U.minval_s[te]=Math.pow(10,qe/10)*U.numlines_s[te]}U.s3_ss=T(U.s3ind_s,U.npart_s,be,Ae,ge,se),H(),e.init_fft(U),U.decay=Math.exp(-1*t/(l*Ie/192));{var De;De=h,(j.exp_nspsytune&2)!=0&&(De=1),Math.abs(j.msfix)>0&&(De=j.msfix),j.msfix=De;for(var Ke=0;Ke<U.npart_l;Ke++)U.s3ind[Ke][1]>U.npart_l-1&&(U.s3ind[Ke][1]=U.npart_l-1)}var jt=576*U.mode_gr/Ie;if(U.ATH.decay=Math.pow(10,-12/10*jt),U.ATH.adjust=.01,U.ATH.adjustLimit=1,rt(U.bo_l[G.SBMAX_l-1]<=U.npart_l),rt(U.bo_s[G.SBMAX_s-1]<=U.npart_s),j.ATHtype!=-1){var Fe,ze=j.out_samplerate/G.BLKSIZE,Je=0;for(Fe=0,te=0;te<G.BLKSIZE/2;++te)Fe+=ze,U.ATH.eql_w[te]=1/Math.pow(10,this.ATHformula(Fe,j)/10),Je+=U.ATH.eql_w[te];for(Je=1/Je,te=G.BLKSIZE/2;--te>=0;)U.ATH.eql_w[te]*=Je}{for(var Ke=Se=0;Ke<U.npart_s;++Ke)for(te=0;te<U.numlines_s[Ke];++te)++Se;for(var Ke=Se=0;Ke<U.npart_l;++Ke)for(te=0;te<U.numlines_l[Ke];++te)++Se}for(Se=0,te=0;te<U.npart_l;te++){var Fe=Ie*(Se+U.numlines_l[te]/2)/(1*G.BLKSIZE);U.mld_cb_l[te]=q(Fe),Se+=U.numlines_l[te]}for(;te<G.CBANDS;++te)U.mld_cb_l[te]=1;for(Se=0,te=0;te<U.npart_s;te++){var Fe=Ie*(Se+U.numlines_s[te]/2)/(1*G.BLKSIZE_s);U.mld_cb_s[te]=q(Fe),Se+=U.numlines_s[te]}for(;te<G.CBANDS;++te)U.mld_cb_s[te]=1;return 0};function ie(j,U){j<-.3&&(j=3410),j/=1e3,j=Math.max(.1,j);var te=3.64*Math.pow(j,-.8)-6.8*Math.exp(-.6*Math.pow(j-3.4,2))+6*Math.exp(-.15*Math.pow(j-8.7,2))+(.6+.04*U)*.001*Math.pow(j,4);return te}this.ATHformula=function(j,U){var te;switch(U.ATHtype){case 0:te=ie(j,9);break;case 1:te=ie(j,-1);break;case 2:te=ie(j,0);break;case 3:te=ie(j,1)+6;break;case 4:te=ie(j,U.ATHcurve);break;default:te=ie(j,0);break}return te}}function NA(){this.class_id=0,this.num_samples=0,this.num_channels=0,this.in_samplerate=0,this.out_samplerate=0,this.scale=0,this.scale_left=0,this.scale_right=0,this.analysis=!1,this.bWriteVbrTag=!1,this.decode_only=!1,this.quality=0,this.mode=wt.STEREO,this.force_ms=!1,this.free_format=!1,this.findReplayGain=!1,this.decode_on_the_fly=!1,this.write_id3tag_automatic=!1,this.brate=0,this.compression_ratio=0,this.copyright=0,this.original=0,this.extension=0,this.emphasis=0,this.error_protection=0,this.strict_ISO=!1,this.disable_reservoir=!1,this.quant_comp=0,this.quant_comp_short=0,this.experimentalY=!1,this.experimentalZ=0,this.exp_nspsytune=0,this.preset=0,this.VBR=null,this.VBR_q_frac=0,this.VBR_q=0,this.VBR_mean_bitrate_kbps=0,this.VBR_min_bitrate_kbps=0,this.VBR_max_bitrate_kbps=0,this.VBR_hard_min=0,this.lowpassfreq=0,this.highpassfreq=0,this.lowpasswidth=0,this.highpasswidth=0,this.maskingadjust=0,this.maskingadjust_short=0,this.ATHonly=!1,this.ATHshort=!1,this.noATH=!1,this.ATHtype=0,this.ATHcurve=0,this.ATHlower=0,this.athaa_type=0,this.athaa_loudapprox=0,this.athaa_sensitivity=0,this.short_blocks=null,this.useTemporal=!1,this.interChRatio=0,this.msfix=0,this.tune=!1,this.tune_value_a=0,this.version=0,this.encoder_delay=0,this.encoder_padding=0,this.framesize=0,this.frameNum=0,this.lame_allocated_gfp=0,this.internal_flags=null}var Ei={};Ei.SFBMAX=G.SBMAX_s*3;var UA=je.new_float,Wi=je.new_int;function xc(){this.xr=UA(576),this.l3_enc=Wi(576),this.scalefac=Wi(Ei.SFBMAX),this.xrpow_max=0,this.part2_3_length=0,this.big_values=0,this.count1=0,this.global_gain=0,this.scalefac_compress=0,this.block_type=0,this.mixed_block_flag=0,this.table_select=Wi(3),this.subblock_gain=Wi(4),this.region0_count=0,this.region1_count=0,this.preflag=0,this.scalefac_scale=0,this.count1table_select=0,this.part2_length=0,this.sfb_lmax=0,this.sfb_smin=0,this.psy_lmax=0,this.sfbmax=0,this.psymax=0,this.sfbdivide=0,this.width=Wi(Ei.SFBMAX),this.window=Wi(Ei.SFBMAX),this.count1bits=0,this.sfb_partition_table=null,this.slen=Wi(4),this.max_nonzero_coeff=0;var e=this;function t(n){return new Int32Array(n)}function r(n){return new Float32Array(n)}this.assign=function(n){e.xr=r(n.xr),e.l3_enc=t(n.l3_enc),e.scalefac=t(n.scalefac),e.xrpow_max=n.xrpow_max,e.part2_3_length=n.part2_3_length,e.big_values=n.big_values,e.count1=n.count1,e.global_gain=n.global_gain,e.scalefac_compress=n.scalefac_compress,e.block_type=n.block_type,e.mixed_block_flag=n.mixed_block_flag,e.table_select=t(n.table_select),e.subblock_gain=t(n.subblock_gain),e.region0_count=n.region0_count,e.region1_count=n.region1_count,e.preflag=n.preflag,e.scalefac_scale=n.scalefac_scale,e.count1table_select=n.count1table_select,e.part2_length=n.part2_length,e.sfb_lmax=n.sfb_lmax,e.sfb_smin=n.sfb_smin,e.psy_lmax=n.psy_lmax,e.sfbmax=n.sfbmax,e.psymax=n.psymax,e.sfbdivide=n.sfbdivide,e.width=t(n.width),e.window=t(n.window),e.count1bits=n.count1bits,e.sfb_partition_table=n.sfb_partition_table.slice(0),e.slen=t(n.slen),e.max_nonzero_coeff=n.max_nonzero_coeff}}var Im=je.new_int;function qA(){this.tt=[[null,null],[null,null]],this.main_data_begin=0,this.private_bits=0,this.resvDrain_pre=0,this.resvDrain_post=0,this.scfsi=[Im(4),Im(4)];for(var e=0;e<2;e++)for(var t=0;t<2;t++)this.tt[e][t]=new xc}var Il=je.System,Fl=je.new_int;function bn(e,t,r,n){this.l=Fl(1+G.SBMAX_l),this.s=Fl(1+G.SBMAX_s),this.psfb21=Fl(1+G.PSFB21),this.psfb12=Fl(1+G.PSFB12);var i=this.l,s=this.s;arguments.length==4&&(this.arrL=arguments[0],this.arrS=arguments[1],this.arr21=arguments[2],this.arr12=arguments[3],Il.arraycopy(this.arrL,0,i,0,Math.min(this.arrL.length,this.l.length)),Il.arraycopy(this.arrS,0,s,0,Math.min(this.arrS.length,this.s.length)),Il.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),Il.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}var Cf=je.new_float,zA=je.new_float_n,VA=je.new_int;function $A(){this.last_en_subshort=zA([4,9]),this.lastAttacks=VA(4),this.pefirbuf=Cf(19),this.longfact=Cf(G.SBMAX_l),this.shortfact=Cf(G.SBMAX_s),this.attackthre=0,this.attackthre_s=0}function WA(){this.sum=0,this.seen=0,this.want=0,this.pos=0,this.size=0,this.bag=null,this.nVbrNumFrames=0,this.nBytesWritten=0,this.TotalFrameSize=0}var KA=je.new_byte,YA=je.new_double,$r=je.new_float,Ki=je.new_float_n,tn=je.new_int,Dl=je.new_int_n;yt.MFSIZE=3*1152+G.ENCDELAY-G.MDCTDELAY;yt.MAX_HEADER_BUF=256;yt.MAX_BITS_PER_CHANNEL=4095;yt.MAX_BITS_PER_GRANULE=7680;yt.BPC=320;function yt(){var e=40;this.Class_ID=0,this.lame_encode_frame_init=0,this.iteration_init_init=0,this.fill_buffer_resample_init=0,this.mfbuf=Ki([2,yt.MFSIZE]),this.mode_gr=0,this.channels_in=0,this.channels_out=0,this.resample_ratio=0,this.mf_samples_to_encode=0,this.mf_size=0,this.VBR_min_bitrate=0,this.VBR_max_bitrate=0,this.bitrate_index=0,this.samplerate_index=0,this.mode_ext=0,this.lowpass1=0,this.lowpass2=0,this.highpass1=0,this.highpass2=0,this.noise_shaping=0,this.noise_shaping_amp=0,this.substep_shaping=0,this.psymodel=0,this.noise_shaping_stop=0,this.subblock_gain=0,this.use_best_huffman=0,this.full_outer_loop=0,this.l3_side=new qA,this.ms_ratio=$r(2),this.padding=0,this.frac_SpF=0,this.slot_lag=0,this.tag_spec=null,this.nMusicCRC=0,this.OldValue=tn(2),this.CurrentStep=tn(2),this.masking_lower=0,this.bv_scf=tn(576),this.pseudohalf=tn(Ei.SFBMAX),this.sfb21_extra=!1,this.inbuf_old=new Array(2),this.blackfilt=new Array(2*yt.BPC+1),this.itime=YA(2),this.sideinfo_len=0,this.sb_sample=Ki([2,2,18,G.SBLIMIT]),this.amp_filter=$r(32);function t(){this.write_timing=0,this.ptr=0,this.buf=KA(e)}this.header=new Array(yt.MAX_HEADER_BUF),this.h_ptr=0,this.w_ptr=0,this.ancillary_flag=0,this.ResvSize=0,this.ResvMax=0,this.scalefac_band=new bn,this.minval_l=$r(G.CBANDS),this.minval_s=$r(G.CBANDS),this.nb_1=Ki([4,G.CBANDS]),this.nb_2=Ki([4,G.CBANDS]),this.nb_s1=Ki([4,G.CBANDS]),this.nb_s2=Ki([4,G.CBANDS]),this.s3_ss=null,this.s3_ll=null,this.decay=0,this.thm=new Array(4),this.en=new Array(4),this.tot_ener=$r(4),this.loudness_sq=Ki([2,2]),this.loudness_sq_save=$r(2),this.mld_l=$r(G.SBMAX_l),this.mld_s=$r(G.SBMAX_s),this.bm_l=tn(G.SBMAX_l),this.bo_l=tn(G.SBMAX_l),this.bm_s=tn(G.SBMAX_s),this.bo_s=tn(G.SBMAX_s),this.npart_l=0,this.npart_s=0,this.s3ind=Dl([G.CBANDS,2]),this.s3ind_s=Dl([G.CBANDS,2]),this.numlines_s=tn(G.CBANDS),this.numlines_l=tn(G.CBANDS),this.rnumlines_l=$r(G.CBANDS),this.mld_cb_l=$r(G.CBANDS),this.mld_cb_s=$r(G.CBANDS),this.numlines_s_num1=0,this.numlines_l_num1=0,this.pe=$r(4),this.ms_ratio_s_old=0,this.ms_ratio_l_old=0,this.ms_ener_ratio_old=0,this.blocktype_old=tn(2),this.nsPsy=new $A,this.VBR_seek_table=new WA,this.ATH=null,this.PSY=null,this.nogap_total=0,this.nogap_current=0,this.decode_on_the_fly=!0,this.findReplayGain=!0,this.findPeakSample=!0,this.PeakSample=0,this.RadioGain=0,this.AudiophileGain=0,this.rgdata=null,this.noclipGainChange=0,this.noclipScale=0,this.bitrate_stereoMode_Hist=Dl([16,5]),this.bitrate_blockType_Hist=Dl([16,6]),this.pinfo=null,this.hip=null,this.in_buffer_nsamples=0,this.in_buffer_0=null,this.in_buffer_1=null,this.iteration_loop=null;for(var r=0;r<this.en.length;r++)this.en[r]=new Cc;for(var r=0;r<this.thm.length;r++)this.thm[r]=new Cc;for(var r=0;r<this.header.length;r++)this.header[r]=new t}var Yi=je.new_float;function GA(){this.useAdjust=0,this.aaSensitivityP=0,this.adjust=0,this.adjustLimit=0,this.decay=0,this.floor=0,this.l=Yi(G.SBMAX_l),this.s=Yi(G.SBMAX_s),this.psfb21=Yi(G.PSFB21),this.psfb12=Yi(G.PSFB12),this.cb_l=Yi(G.CBANDS),this.cb_s=Yi(G.CBANDS),this.eql_w=Yi(G.BLKSIZE/2)}var Tr=je.System,Fm=je.Arrays;Yt.STEPS_per_dB=100;Yt.MAX_dB=120;Yt.GAIN_NOT_ENOUGH_SAMPLES=-24601;Yt.GAIN_ANALYSIS_ERROR=0;Yt.GAIN_ANALYSIS_OK=1;Yt.INIT_GAIN_ANALYSIS_ERROR=0;Yt.INIT_GAIN_ANALYSIS_OK=1;Yt.YULE_ORDER=10;Yt.MAX_ORDER=Yt.YULE_ORDER;Yt.MAX_SAMP_FREQ=48e3;Yt.RMS_WINDOW_TIME_NUMERATOR=1;Yt.RMS_WINDOW_TIME_DENOMINATOR=20;Yt.MAX_SAMPLES_PER_WINDOW=Yt.MAX_SAMP_FREQ*Yt.RMS_WINDOW_TIME_NUMERATOR/Yt.RMS_WINDOW_TIME_DENOMINATOR+1;function Yt(){var e=64.82,t=.95,r=Yt.RMS_WINDOW_TIME_NUMERATOR,n=Yt.RMS_WINDOW_TIME_DENOMINATOR,i=[[.038575994352,-3.84664617118067,-.02160367184185,7.81501653005538,-.00123395316851,-11.34170355132042,-9291677959e-14,13.05504219327545,-.01655260341619,-12.28759895145294,.02161526843274,9.4829380631979,-.02074045215285,-5.87257861775999,.00594298065125,2.75465861874613,.00306428023191,-.86984376593551,.00012025322027,.13919314567432,.00288463683916],[.0541865640643,-3.47845948550071,-.02911007808948,6.36317777566148,-.00848709379851,-8.54751527471874,-.00851165645469,9.4769360780128,-.00834990904936,-8.81498681370155,.02245293253339,6.85401540936998,-.02596338512915,-4.39470996079559,.01624864962975,2.19611684890774,-.00240879051584,-.75104302451432,.00674613682247,.13149317958808,-.00187763777362],[.15457299681924,-2.37898834973084,-.09331049056315,2.84868151156327,-.06247880153653,-2.64577170229825,.02163541888798,2.23697657451713,-.05588393329856,-1.67148153367602,.04781476674921,1.00595954808547,.00222312597743,-.45953458054983,.03174092540049,.16378164858596,-.01390589421898,-.05032077717131,.00651420667831,.0234789740702,-.00881362733839],[.30296907319327,-1.61273165137247,-.22613988682123,1.0797749225997,-.08587323730772,-.2565625775407,.03282930172664,-.1627671912044,-.00915702933434,-.22638893773906,-.02364141202522,.39120800788284,-.00584456039913,-.22138138954925,.06276101321749,.04500235387352,-828086748e-14,.02005851806501,.00205861885564,.00302439095741,-.02950134983287],[.33642304856132,-1.49858979367799,-.2557224142557,.87350271418188,-.11828570177555,.12205022308084,.11921148675203,-.80774944671438,-.07834489609479,.47854794562326,-.0046997791438,-.12453458140019,-.0058950022444,-.04067510197014,.05724228140351,.08333755284107,.00832043980773,-.04237348025746,-.0163538138454,.02977207319925,-.0176017656815],[.4491525660845,-.62820619233671,-.14351757464547,.29661783706366,-.22784394429749,-.372563729424,-.01419140100551,.00213767857124,.04078262797139,-.42029820170918,-.12398163381748,.22199650564824,.04097565135648,.00613424350682,.10478503600251,.06747620744683,-.01863887810927,.05784820375801,-.03193428438915,.03222754072173,.00541907748707],[.56619470757641,-1.04800335126349,-.75464456939302,.29156311971249,.1624213774223,-.26806001042947,.16744243493672,.00819999645858,-.18901604199609,.45054734505008,.3093178284183,-.33032403314006,-.27562961986224,.0673936833311,.00647310677246,-.04784254229033,.08647503780351,.01639907836189,-.0378898455484,.01807364323573,-.00588215443421],[.58100494960553,-.51035327095184,-.53174909058578,-.31863563325245,-.14289799034253,-.20256413484477,.17520704835522,.1472815413433,.02377945217615,.38952639978999,.15558449135573,-.23313271880868,-.25344790059353,-.05246019024463,.01628462406333,-.02505961724053,.06920467763959,.02442357316099,-.03721611395801,.01818801111503,-.00749618797172],[.53648789255105,-.2504987195602,-.42163034350696,-.43193942311114,-.00275953611929,-.03424681017675,.04267842219415,-.04678328784242,-.10214864179676,.26408300200955,.14590772289388,.15113130533216,-.02459864859345,-.17556493366449,-.11202315195388,-.18823009262115,-.04060034127,.05477720428674,.0478866554818,.0470440968812,-.02217936801134]],s=[[.98621192462708,-1.97223372919527,-1.97242384925416,.97261396931306,.98621192462708],[.98500175787242,-1.96977855582618,-1.97000351574484,.9702284756635,.98500175787242],[.97938932735214,-1.95835380975398,-1.95877865470428,.95920349965459,.97938932735214],[.97531843204928,-1.95002759149878,-1.95063686409857,.95124613669835,.97531843204928],[.97316523498161,-1.94561023566527,-1.94633046996323,.94705070426118,.97316523498161],[.96454515552826,-1.92783286977036,-1.92909031105652,.93034775234268,.96454515552826],[.96009142950541,-1.91858953033784,-1.92018285901082,.92177618768381,.96009142950541],[.95856916599601,-1.9154210807478,-1.91713833199203,.91885558323625,.95856916599601],[.94597685600279,-1.88903307939452,-1.89195371200558,.89487434461664,.94597685600279]];function a(c,h,d,p,v,_){for(;v--!=0;)d[p]=1e-10+c[h+0]*_[0]-d[p-1]*_[1]+c[h-1]*_[2]-d[p-2]*_[3]+c[h-2]*_[4]-d[p-3]*_[5]+c[h-3]*_[6]-d[p-4]*_[7]+c[h-4]*_[8]-d[p-5]*_[9]+c[h-5]*_[10]-d[p-6]*_[11]+c[h-6]*_[12]-d[p-7]*_[13]+c[h-7]*_[14]-d[p-8]*_[15]+c[h-8]*_[16]-d[p-9]*_[17]+c[h-9]*_[18]-d[p-10]*_[19]+c[h-10]*_[20],++p,++h}function o(c,h,d,p,v,_){for(;v--!=0;)d[p]=c[h+0]*_[0]-d[p-1]*_[1]+c[h-1]*_[2]-d[p-2]*_[3]+c[h-2]*_[4],++p,++h}function l(c,h){for(var d=0;d<MAX_ORDER;d++)c.linprebuf[d]=c.lstepbuf[d]=c.loutbuf[d]=c.rinprebuf[d]=c.rstepbuf[d]=c.routbuf[d]=0;switch(0|h){case 48e3:c.reqindex=0;break;case 44100:c.reqindex=1;break;case 32e3:c.reqindex=2;break;case 24e3:c.reqindex=3;break;case 22050:c.reqindex=4;break;case 16e3:c.reqindex=5;break;case 12e3:c.reqindex=6;break;case 11025:c.reqindex=7;break;case 8e3:c.reqindex=8;break;default:return INIT_GAIN_ANALYSIS_ERROR}return c.sampleWindow=0|(h*r+n-1)/n,c.lsum=0,c.rsum=0,c.totsamp=0,Fm.ill(c.A,0),INIT_GAIN_ANALYSIS_OK}this.InitGainAnalysis=function(c,h){return l(c,h)!=INIT_GAIN_ANALYSIS_OK?INIT_GAIN_ANALYSIS_ERROR:(c.linpre=MAX_ORDER,c.rinpre=MAX_ORDER,c.lstep=MAX_ORDER,c.rstep=MAX_ORDER,c.lout=MAX_ORDER,c.rout=MAX_ORDER,Fm.fill(c.B,0),INIT_GAIN_ANALYSIS_OK)};function u(c){return c*c}this.AnalyzeSamples=function(c,h,d,p,v,_,m){var g,x,L,y,M,F,D;if(_==0)return GAIN_ANALYSIS_OK;switch(D=0,M=_,m){case 1:p=h,v=d;break;case 2:break;default:return GAIN_ANALYSIS_ERROR}for(_<MAX_ORDER?(Tr.arraycopy(h,d,c.linprebuf,MAX_ORDER,_),Tr.arraycopy(p,v,c.rinprebuf,MAX_ORDER,_)):(Tr.arraycopy(h,d,c.linprebuf,MAX_ORDER,MAX_ORDER),Tr.arraycopy(p,v,c.rinprebuf,MAX_ORDER,MAX_ORDER));M>0;){F=M>c.sampleWindow-c.totsamp?c.sampleWindow-c.totsamp:M,D<MAX_ORDER?(g=c.linpre+D,x=c.linprebuf,L=c.rinpre+D,y=c.rinprebuf,F>MAX_ORDER-D&&(F=MAX_ORDER-D)):(g=d+D,x=h,L=v+D,y=p),a(x,g,c.lstepbuf,c.lstep+c.totsamp,F,i[c.reqindex]),a(y,L,c.rstepbuf,c.rstep+c.totsamp,F,i[c.reqindex]),o(c.lstepbuf,c.lstep+c.totsamp,c.loutbuf,c.lout+c.totsamp,F,s[c.reqindex]),o(c.rstepbuf,c.rstep+c.totsamp,c.routbuf,c.rout+c.totsamp,F,s[c.reqindex]),g=c.lout+c.totsamp,x=c.loutbuf,L=c.rout+c.totsamp,y=c.routbuf;for(var H=F%8;H--!=0;)c.lsum+=u(x[g++]),c.rsum+=u(y[L++]);for(H=F/8;H--!=0;)c.lsum+=u(x[g+0])+u(x[g+1])+u(x[g+2])+u(x[g+3])+u(x[g+4])+u(x[g+5])+u(x[g+6])+u(x[g+7]),g+=8,c.rsum+=u(y[L+0])+u(y[L+1])+u(y[L+2])+u(y[L+3])+u(y[L+4])+u(y[L+5])+u(y[L+6])+u(y[L+7]),L+=8;if(M-=F,D+=F,c.totsamp+=F,c.totsamp==c.sampleWindow){var b=Yt.STEPS_per_dB*10*Math.log10((c.lsum+c.rsum)/c.totsamp*.5+1e-37),R=b<=0?0:0|b;R>=c.A.length&&(R=c.A.length-1),c.A[R]++,c.lsum=c.rsum=0,Tr.arraycopy(c.loutbuf,c.totsamp,c.loutbuf,0,MAX_ORDER),Tr.arraycopy(c.routbuf,c.totsamp,c.routbuf,0,MAX_ORDER),Tr.arraycopy(c.lstepbuf,c.totsamp,c.lstepbuf,0,MAX_ORDER),Tr.arraycopy(c.rstepbuf,c.totsamp,c.rstepbuf,0,MAX_ORDER),c.totsamp=0}if(c.totsamp>c.sampleWindow)return GAIN_ANALYSIS_ERROR}return _<MAX_ORDER?(Tr.arraycopy(c.linprebuf,_,c.linprebuf,0,MAX_ORDER-_),Tr.arraycopy(c.rinprebuf,_,c.rinprebuf,0,MAX_ORDER-_),Tr.arraycopy(h,d,c.linprebuf,MAX_ORDER-_,_),Tr.arraycopy(p,v,c.rinprebuf,MAX_ORDER-_,_)):(Tr.arraycopy(h,d+_-MAX_ORDER,c.linprebuf,0,MAX_ORDER),Tr.arraycopy(p,v+_-MAX_ORDER,c.rinprebuf,0,MAX_ORDER)),GAIN_ANALYSIS_OK};function f(c,h){var d,p=0;for(d=0;d<h;d++)p+=c[d];if(p==0)return GAIN_NOT_ENOUGH_SAMPLES;var v=0|Math.ceil(p*(1-t));for(d=h;d-- >0&&!((v-=c[d])<=0););return e-d/Yt.STEPS_per_dB}this.GetTitleGain=function(c){for(var h=f(c.A,c.A.length),d=0;d<c.A.length;d++)c.B[d]+=c.A[d],c.A[d]=0;for(var d=0;d<MAX_ORDER;d++)c.linprebuf[d]=c.lstepbuf[d]=c.loutbuf[d]=c.rinprebuf[d]=c.rstepbuf[d]=c.routbuf[d]=0;return c.totsamp=0,c.lsum=c.rsum=0,h}}var Ns=je.new_float,Dm=je.new_int;function XA(){this.linprebuf=Ns(void 0*2),this.linpre=0,this.lstepbuf=Ns(void 0+void 0),this.lstep=0,this.loutbuf=Ns(void 0+void 0),this.lout=0,this.rinprebuf=Ns(void 0*2),this.rinpre=0,this.rstepbuf=Ns(void 0+void 0),this.rstep=0,this.routbuf=Ns(void 0+void 0),this.rout=0,this.sampleWindow=0,this.totsamp=0,this.lsum=0,this.rsum=0,this.freqindex=0,this.first=0,this.A=Dm(0|void 0*void 0),this.B=Dm(0|void 0*void 0)}function vb(e){this.bits=e}var Hm=je.new_float,ZA=je.new_int,Pm=je.assert;function QA(e){var t=e;this.quantize=t,this.iteration_loop=function(r,n,i,s){var a=r.internal_flags,o=Hm(Ei.SFBMAX),l=Hm(576),u=ZA(2),f=0,c,h=a.l3_side,d=new vb(f);this.quantize.rv.ResvFrameBegin(r,d),f=d.bits;for(var p=0;p<a.mode_gr;p++){c=this.quantize.qupvt.on_pe(r,n,u,f,p,p),a.mode_ext==G.MPG_MD_MS_LR&&(this.quantize.ms_convert(a.l3_side,p),this.quantize.qupvt.reduce_side(u,i[p],f,c));for(var v=0;v<a.channels_out;v++){var _,m,g=h.tt[p][v];g.block_type!=G.SHORT_TYPE?(_=0,m=a.PSY.mask_adjust-_):(_=0,m=a.PSY.mask_adjust_short-_),a.masking_lower=Math.pow(10,m*.1),this.quantize.init_outer_loop(a,g),this.quantize.init_xrpow(a,g,l)&&(this.quantize.qupvt.calc_xmin(r,s[p][v],g,o),this.quantize.outer_loop(r,g,o,l,v,u[v])),this.quantize.iteration_finish_one(a,p,v),Pm(g.part2_3_length<=yt.MAX_BITS_PER_CHANNEL),Pm(g.part2_3_length<=u[v])}}this.quantize.rv.ResvFrameEnd(a,f)}}function mt(e,t,r,n){this.xlen=e,this.linmax=t,this.table=r,this.hlen=n}var xe={};xe.t1HB=[1,1,1,0];xe.t2HB=[1,2,1,3,1,1,3,2,0];xe.t3HB=[3,2,1,1,1,1,3,2,0];xe.t5HB=[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0];xe.t6HB=[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0];xe.t7HB=[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0];xe.t8HB=[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0];xe.t9HB=[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0];xe.t10HB=[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0];xe.t11HB=[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0];xe.t12HB=[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0];xe.t13HB=[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1];xe.t15HB=[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0];xe.t16HB=[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3];xe.t24HB=[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3];xe.t32HB=[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16];xe.t33HB=[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0];xe.t1l=[1,4,3,5];xe.t2l=[1,4,7,4,5,7,6,7,8];xe.t3l=[2,3,7,4,4,7,6,7,8];xe.t5l=[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10];xe.t6l=[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9];xe.t7l=[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12];xe.t8l=[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13];xe.t9l=[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11];xe.t10l=[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13];xe.t11l=[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12];xe.t12l=[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12];xe.t13l=[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18];xe.t15l=[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15];xe.t16_5l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12];xe.t16l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10];xe.t24l=[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6];xe.t32l=[1,5,5,7,5,8,7,9,5,7,7,9,7,9,9,10];xe.t33l=[4,5,5,6,5,6,6,7,5,6,6,7,6,7,7,8];xe.ht=[new mt(0,0,null,null),new mt(2,0,xe.t1HB,xe.t1l),new mt(3,0,xe.t2HB,xe.t2l),new mt(3,0,xe.t3HB,xe.t3l),new mt(0,0,null,null),new mt(4,0,xe.t5HB,xe.t5l),new mt(4,0,xe.t6HB,xe.t6l),new mt(6,0,xe.t7HB,xe.t7l),new mt(6,0,xe.t8HB,xe.t8l),new mt(6,0,xe.t9HB,xe.t9l),new mt(8,0,xe.t10HB,xe.t10l),new mt(8,0,xe.t11HB,xe.t11l),new mt(8,0,xe.t12HB,xe.t12l),new mt(16,0,xe.t13HB,xe.t13l),new mt(0,0,null,xe.t16_5l),new mt(16,0,xe.t15HB,xe.t15l),new mt(1,1,xe.t16HB,xe.t16l),new mt(2,3,xe.t16HB,xe.t16l),new mt(3,7,xe.t16HB,xe.t16l),new mt(4,15,xe.t16HB,xe.t16l),new mt(6,63,xe.t16HB,xe.t16l),new mt(8,255,xe.t16HB,xe.t16l),new mt(10,1023,xe.t16HB,xe.t16l),new mt(13,8191,xe.t16HB,xe.t16l),new mt(4,15,xe.t24HB,xe.t24l),new mt(5,31,xe.t24HB,xe.t24l),new mt(6,63,xe.t24HB,xe.t24l),new mt(7,127,xe.t24HB,xe.t24l),new mt(8,255,xe.t24HB,xe.t24l),new mt(9,511,xe.t24HB,xe.t24l),new mt(11,2047,xe.t24HB,xe.t24l),new mt(13,8191,xe.t24HB,xe.t24l),new mt(0,0,xe.t32HB,xe.t32l),new mt(0,0,xe.t33HB,xe.t33l)];xe.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366];xe.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296];xe.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369];xe.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]];xe.samplerate_table=[[22050,24e3,16e3,-1],[44100,48e3,32e3,-1],[11025,12e3,8e3,-1]];xe.scfsi_band=[0,6,11,16,21];var Gi=je.VbrMode,Hl=je.Float,xf=je.Util,Xi=je.new_float,JA=je.new_int,Io=je.assert;dr.Q_MAX=257;dr.Q_MAX2=116;dr.LARGE_BITS=1e5;dr.IXMAX_VAL=8206;function dr(){var e=null,t=null,r=null;this.setModules=function(g,x,L){e=g,t=x,r=L};function n(g){return c[g+dr.Q_MAX2]}this.IPOW20=function(g){return h[g]};var i=2220446049250313e-31,s=dr.IXMAX_VAL,a=s+2,o=dr.Q_MAX,l=dr.Q_MAX2,u=100;this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var f=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=f,this.sfBandIndex=[new bn([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new bn([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new bn([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new bn([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new bn([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new bn([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new bn([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new bn([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new bn([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0/3,24/3,48/3,72/3,108/3,156/3,216/3,288/3,372/3,480/3,486/3,492/3,498/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var c=Xi(o+l+1),h=Xi(o),d=Xi(a),p=Xi(a);this.adj43=p;function v(g,x){var L=r.ATHformula(x,g);return L-=u,L=Math.pow(10,L/10+g.ATHlower),L}function _(g){for(var x=g.internal_flags.ATH.l,L=g.internal_flags.ATH.psfb21,y=g.internal_flags.ATH.s,M=g.internal_flags.ATH.psfb12,F=g.internal_flags,D=g.out_samplerate,H=0;H<G.SBMAX_l;H++){var b=F.scalefac_band.l[H],R=F.scalefac_band.l[H+1];x[H]=Hl.MAX_VALUE;for(var A=b;A<R;A++){var k=A*D/1152,O=v(g,k);x[H]=Math.min(x[H],O)}}for(var H=0;H<G.PSFB21;H++){var b=F.scalefac_band.psfb21[H],R=F.scalefac_band.psfb21[H+1];L[H]=Hl.MAX_VALUE;for(var A=b;A<R;A++){var k=A*D/1152,O=v(g,k);L[H]=Math.min(L[H],O)}}for(var H=0;H<G.SBMAX_s;H++){var b=F.scalefac_band.s[H],R=F.scalefac_band.s[H+1];y[H]=Hl.MAX_VALUE;for(var A=b;A<R;A++){var k=A*D/384,O=v(g,k);y[H]=Math.min(y[H],O)}y[H]*=F.scalefac_band.s[H+1]-F.scalefac_band.s[H]}for(var H=0;H<G.PSFB12;H++){var b=F.scalefac_band.psfb12[H],R=F.scalefac_band.psfb12[H+1];M[H]=Hl.MAX_VALUE;for(var A=b;A<R;A++){var k=A*D/384,O=v(g,k);M[H]=Math.min(M[H],O)}M[H]*=F.scalefac_band.s[13]-F.scalefac_band.s[12]}if(g.noATH){for(var H=0;H<G.SBMAX_l;H++)x[H]=1e-20;for(var H=0;H<G.PSFB21;H++)L[H]=1e-20;for(var H=0;H<G.SBMAX_s;H++)y[H]=1e-20;for(var H=0;H<G.PSFB12;H++)M[H]=1e-20}F.ATH.floor=10*Math.log10(v(g,-1))}this.iteration_init=function(g){var x=g.internal_flags,L=x.l3_side,y;if(x.iteration_init_init==0){for(x.iteration_init_init=1,L.main_data_begin=0,_(g),d[0]=0,y=1;y<a;y++)d[y]=Math.pow(y,4/3);for(y=0;y<a-1;y++)p[y]=y+1-Math.pow(.5*(d[y]+d[y+1]),.75);for(p[y]=.5,y=0;y<o;y++)h[y]=Math.pow(2,(y-210)*-.1875);for(y=0;y<=o+l;y++)c[y]=Math.pow(2,(y-210-l)*.25);e.huffman_init(x);{var M,F,D,H;for(y=g.exp_nspsytune>>2&63,y>=32&&(y-=64),M=Math.pow(10,y/4/10),y=g.exp_nspsytune>>8&63,y>=32&&(y-=64),F=Math.pow(10,y/4/10),y=g.exp_nspsytune>>14&63,y>=32&&(y-=64),D=Math.pow(10,y/4/10),y=g.exp_nspsytune>>20&63,y>=32&&(y-=64),H=D*Math.pow(10,y/4/10),y=0;y<G.SBMAX_l;y++){var b;y<=6?b=M:y<=13?b=F:y<=20?b=D:b=H,x.nsPsy.longfact[y]=b}for(y=0;y<G.SBMAX_s;y++){var b;y<=5?b=M:y<=10?b=F:y<=11?b=D:b=H,x.nsPsy.shortfact[y]=b}}}},this.on_pe=function(g,x,L,y,M,F){var D=g.internal_flags,H=0,b,R=JA(2),A,k=new vb(H),O=t.ResvMaxBits(g,y,k,F);H=k.bits;var B=H+O;for(B>yt.MAX_BITS_PER_GRANULE&&(B=yt.MAX_BITS_PER_GRANULE),b=0,A=0;A<D.channels_out;++A)L[A]=Math.min(yt.MAX_BITS_PER_CHANNEL,H/D.channels_out),R[A]=0|L[A]*x[M][A]/700-L[A],R[A]>y*3/4&&(R[A]=y*3/4),R[A]<0&&(R[A]=0),R[A]+L[A]>yt.MAX_BITS_PER_CHANNEL&&(R[A]=Math.max(0,yt.MAX_BITS_PER_CHANNEL-L[A])),b+=R[A];if(b>O)for(A=0;A<D.channels_out;++A)R[A]=O*R[A]/b;for(A=0;A<D.channels_out;++A)L[A]+=R[A],O-=R[A];for(b=0,A=0;A<D.channels_out;++A)b+=L[A];if(b>yt.MAX_BITS_PER_GRANULE){var $=0;for(A=0;A<D.channels_out;++A)L[A]*=yt.MAX_BITS_PER_GRANULE,L[A]/=b,$+=L[A]}return B},this.reduce_side=function(g,x,L,y){Io(g[0]+g[1]<=yt.MAX_BITS_PER_GRANULE);var M=.33*(.5-x)/.5;M<0&&(M=0),M>.5&&(M=.5);var F=0|M*.5*(g[0]+g[1]);F>yt.MAX_BITS_PER_CHANNEL-g[0]&&(F=yt.MAX_BITS_PER_CHANNEL-g[0]),F<0&&(F=0),g[1]>=125&&(g[1]-F>125?(g[0]<L&&(g[0]+=F),g[1]-=F):(g[0]+=g[1]-125,g[1]=125)),F=g[0]+g[1],F>y&&(g[0]=y*g[0]/F,g[1]=y*g[1]/F),Io(g[0]<=yt.MAX_BITS_PER_CHANNEL),Io(g[1]<=yt.MAX_BITS_PER_CHANNEL),Io(g[0]+g[1]<=yt.MAX_BITS_PER_GRANULE)},this.athAdjust=function(g,x,L){var y=90.30873362,M=94.82444863,F=xf.FAST_LOG10_X(x,10),D=g*g,H=0;return F-=L,D>1e-20&&(H=1+xf.FAST_LOG10_X(D,10/y)),H<0&&(H=0),F*=H,F+=L+y-M,Math.pow(10,.1*F)},this.calc_xmin=function(g,x,L,y){var M=0,F=g.internal_flags,D,H=0,b=0,R=F.ATH,A=L.xr,k=g.VBR==Gi.vbr_mtrh?1:0,O=F.masking_lower;for((g.VBR==Gi.vbr_mtrh||g.VBR==Gi.vbr_mt)&&(O=1),D=0;D<L.psy_lmax;D++){var B,$,Q,X,oe,w;g.VBR==Gi.vbr_rh||g.VBR==Gi.vbr_mtrh?$=athAdjust(R.adjust,R.l[D],R.floor):$=R.adjust*R.l[D],oe=L.width[D],Q=$/oe,X=i,w=oe>>1,B=0;do{var P,ce;P=A[H]*A[H],B+=P,X+=P<Q?P:Q,H++,ce=A[H]*A[H],B+=ce,X+=ce<Q?ce:Q,H++}while(--w>0);if(B>$&&b++,D==G.SBPSY_l){var V=$*F.nsPsy.longfact[D];X<V&&(X=V)}if(k!=0&&($=X),!g.ATHonly){var le=x.en.l[D];if(le>0){var V;V=B*x.thm.l[D]*O/le,k!=0&&(V*=F.nsPsy.longfact[D]),$<V&&($=V)}}k!=0?y[M++]=$:y[M++]=$*F.nsPsy.longfact[D]}var Y=575;if(L.block_type!=G.SHORT_TYPE)for(var Z=576;Z--!=0&&Wr.EQ(A[Z],0);)Y=Z;L.max_nonzero_coeff=Y;for(var I=L.sfb_smin;D<L.psymax;I++,D+=3){var oe,K,ee;for(g.VBR==Gi.vbr_rh||g.VBR==Gi.vbr_mtrh?ee=athAdjust(R.adjust,R.s[I],R.floor):ee=R.adjust*R.s[I],oe=L.width[D],K=0;K<3;K++){var B=0,$,Q,X,w=oe>>1;Q=ee/oe,X=i;do{var P,ce;P=A[H]*A[H],B+=P,X+=P<Q?P:Q,H++,ce=A[H]*A[H],B+=ce,X+=ce<Q?ce:Q,H++}while(--w>0);if(B>ee&&b++,I==G.SBPSY_s){var V=ee*F.nsPsy.shortfact[I];X<V&&(X=V)}if(k!=0?$=X:$=ee,!g.ATHonly&&!g.ATHshort){var le=x.en.s[I][K];if(le>0){var V;V=B*x.thm.s[I][K]*O/le,k!=0&&(V*=F.nsPsy.shortfact[I]),$<V&&($=V)}}k!=0?y[M++]=$:y[M++]=$*F.nsPsy.shortfact[I]}g.useTemporal&&(y[M-3]>y[M-3+1]&&(y[M-3+1]+=(y[M-3]-y[M-3+1])*F.decay),y[M-3+1]>y[M-3+2]&&(y[M-3+2]+=(y[M-3+1]-y[M-3+2])*F.decay))}return b};function m(g){this.s=g}this.calc_noise_core=function(g,x,L,y){var M=0,F=x.s,D=g.l3_enc;if(F>g.count1)for(;L--!=0;){var H;H=g.xr[F],F++,M+=H*H,H=g.xr[F],F++,M+=H*H}else if(F>g.big_values){var b=Xi(2);for(b[0]=0,b[1]=y;L--!=0;){var H;H=Math.abs(g.xr[F])-b[D[F]],F++,M+=H*H,H=Math.abs(g.xr[F])-b[D[F]],F++,M+=H*H}}else for(;L--!=0;){var H;H=Math.abs(g.xr[F])-d[D[F]]*y,F++,M+=H*H,H=Math.abs(g.xr[F])-d[D[F]]*y,F++,M+=H*H}return x.s=F,M},this.calc_noise=function(g,x,L,y,M){var F=0,D=0,H,b,R=0,A=0,k=0,O=-20,B=0,$=g.scalefac,Q=0;for(y.over_SSD=0,H=0;H<g.psymax;H++){var X=g.global_gain-($[Q++]+(g.preflag!=0?f[H]:0)<<g.scalefac_scale+1)-g.subblock_gain[g.window[H]]*8,oe=0;if(M!=null&&M.step[H]==X)oe=M.noise[H],B+=g.width[H],L[F++]=oe/x[D++],oe=M.noise_log[H];else{var w=n(X);if(b=g.width[H]>>1,B+g.width[H]>g.max_nonzero_coeff){var P;P=g.max_nonzero_coeff-B+1,P>0?b=P>>1:b=0}var ce=new m(B);oe=this.calc_noise_core(g,ce,b,w),B=ce.s,M!=null&&(M.step[H]=X,M.noise[H]=oe),oe=L[F++]=oe/x[D++],oe=xf.FAST_LOG10(Math.max(oe,1e-20)),M!=null&&(M.noise_log[H]=oe)}if(M!=null&&(M.global_gain=g.global_gain),k+=oe,oe>0){var V;V=Math.max(0|oe*10+.5,1),y.over_SSD+=V*V,R++,A+=oe}O=Math.max(O,oe)}return y.over_count=R,y.tot_noise=k,y.over_noise=A,y.max_noise=O,R},this.set_pinfo=function(g,x,L,y,M){var F=g.internal_flags,D,H,b,R,A,k=x.scalefac_scale==0?.5:1,O=x.scalefac,B=Xi(L3Side.SFBMAX),$=Xi(L3Side.SFBMAX),Q=new CalcNoiseResult;calc_xmin(g,L,x,B),calc_noise(x,B,$,Q,null);var X=0;for(H=x.sfb_lmax,x.block_type!=G.SHORT_TYPE&&x.mixed_block_flag==0&&(H=22),D=0;D<H;D++){var oe=F.scalefac_band.l[D],w=F.scalefac_band.l[D+1],P=w-oe;for(R=0;X<w;X++)R+=x.xr[X]*x.xr[X];R/=P,A=1e15,F.pinfo.en[y][M][D]=A*R,F.pinfo.xfsf[y][M][D]=A*B[D]*$[D]/P,L.en.l[D]>0&&!g.ATHonly?R=R/L.en.l[D]:R=0,F.pinfo.thr[y][M][D]=A*Math.max(R*L.thm.l[D],F.ATH.l[D]),F.pinfo.LAMEsfb[y][M][D]=0,x.preflag!=0&&D>=11&&(F.pinfo.LAMEsfb[y][M][D]=-k*f[D]),D<G.SBPSY_l&&(Io(O[D]>=0),F.pinfo.LAMEsfb[y][M][D]-=k*O[D])}if(x.block_type==G.SHORT_TYPE)for(H=D,D=x.sfb_smin;D<G.SBMAX_s;D++)for(var oe=F.scalefac_band.s[D],w=F.scalefac_band.s[D+1],P=w-oe,ce=0;ce<3;ce++){for(R=0,b=oe;b<w;b++)R+=x.xr[X]*x.xr[X],X++;R=Math.max(R/P,1e-20),A=1e15,F.pinfo.en_s[y][M][3*D+ce]=A*R,F.pinfo.xfsf_s[y][M][3*D+ce]=A*B[H]*$[H]/P,L.en.s[D][ce]>0?R=R/L.en.s[D][ce]:R=0,(g.ATHonly||g.ATHshort)&&(R=0),F.pinfo.thr_s[y][M][3*D+ce]=A*Math.max(R*L.thm.s[D][ce],F.ATH.s[D]),F.pinfo.LAMEsfb_s[y][M][3*D+ce]=-2*x.subblock_gain[ce],D<G.SBPSY_s&&(F.pinfo.LAMEsfb_s[y][M][3*D+ce]-=k*O[H]),H++}F.pinfo.LAMEqss[y][M]=x.global_gain,F.pinfo.LAMEmainbits[y][M]=x.part2_3_length+x.part2_length,F.pinfo.LAMEsfbits[y][M]=x.part2_length,F.pinfo.over[y][M]=Q.over_count,F.pinfo.max_noise[y][M]=Q.max_noise*10,F.pinfo.over_noise[y][M]=Q.over_noise*10,F.pinfo.tot_noise[y][M]=Q.tot_noise*10,F.pinfo.over_SSD[y][M]=Q.over_SSD}}var eR=je.System,tR=je.Arrays,Fo=je.new_int,Ef=je.assert;function Ea(){var e=null;this.qupvt=null,this.setModules=function(b){this.qupvt=b,e=b};function t(b){this.bits=0|b}var r=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]];function n(b,R,A,k,O,B){var $=.5946/R;for(b=b>>1;b--!=0;)O[B++]=$>A[k++]?0:1,O[B++]=$>A[k++]?0:1}function i(b,R,A,k,O,B){b=b>>1;var $=b%2;for(b=b>>1;b--!=0;){var Q,X,oe,w,P,ce,V,le;Q=A[k++]*R,X=A[k++]*R,P=0|Q,oe=A[k++]*R,ce=0|X,w=A[k++]*R,V=0|oe,Q+=e.adj43[P],le=0|w,X+=e.adj43[ce],O[B++]=0|Q,oe+=e.adj43[V],O[B++]=0|X,w+=e.adj43[le],O[B++]=0|oe,O[B++]=0|w}if($!=0){var Q,X,P,ce;Q=A[k++]*R,X=A[k++]*R,P=0|Q,ce=0|X,Q+=e.adj43[P],X+=e.adj43[ce],O[B++]=0|Q,O[B++]=0|X}}function s(b,R,A,k,O){var B,$,Q=0,X,oe=0,w=0,P=0,ce=R,V=0,le=ce,Y=0,Z=b,I=0;for(X=O!=null&&k.global_gain==O.global_gain,k.block_type==G.SHORT_TYPE?$=38:$=21,B=0;B<=$;B++){var K=-1;if((X||k.block_type==G.NORM_TYPE)&&(K=k.global_gain-(k.scalefac[B]+(k.preflag!=0?e.pretab[B]:0)<<k.scalefac_scale+1)-k.subblock_gain[k.window[B]]*8),Ef(k.width[B]>=0),X&&O.step[B]==K)oe!=0&&(i(oe,A,Z,I,le,Y),oe=0),w!=0&&(n(w,A,Z,I,le,Y),w=0);else{var ee=k.width[B];if(Q+k.width[B]>k.max_nonzero_coeff){var ae;ae=k.max_nonzero_coeff-Q+1,tR.fill(R,k.max_nonzero_coeff,576,0),ee=ae,ee<0&&(ee=0),B=$+1}if(oe==0&&w==0&&(le=ce,Y=V,Z=b,I=P),O!=null&&O.sfb_count1>0&&B>=O.sfb_count1&&O.step[B]>0&&K>=O.step[B]?(oe!=0&&(i(oe,A,Z,I,le,Y),oe=0,le=ce,Y=V,Z=b,I=P),w+=ee):(w!=0&&(n(w,A,Z,I,le,Y),w=0,le=ce,Y=V,Z=b,I=P),oe+=ee),ee<=0){w!=0&&(n(w,A,Z,I,le,Y),w=0),oe!=0&&(i(oe,A,Z,I,le,Y),oe=0);break}}B<=$&&(V+=k.width[B],P+=k.width[B],Q+=k.width[B])}oe!=0&&(i(oe,A,Z,I,le,Y),oe=0),w!=0&&(n(w,A,Z,I,le,Y),w=0)}function a(b,R,A){var k=0,O=0;do{var B=b[R++],$=b[R++];k<B&&(k=B),O<$&&(O=$)}while(R<A);return k<O&&(k=O),k}function o(b,R,A,k,O,B){var $=xe.ht[k].xlen*65536+xe.ht[O].xlen,Q=0,X;do{var oe=b[R++],w=b[R++];oe!=0&&(oe>14&&(oe=15,Q+=$),oe*=16),w!=0&&(w>14&&(w=15,Q+=$),oe+=w),Q+=xe.largetbl[oe]}while(R<A);return X=Q&65535,Q>>=16,Q>X&&(Q=X,k=O),B.bits+=Q,k}function l(b,R,A,k){var O=0,B=xe.ht[1].hlen;do{var $=b[R+0]*2+b[R+1];R+=2,O+=B[$]}while(R<A);return k.bits+=O,1}function u(b,R,A,k,O){var B=0,$,Q=xe.ht[k].xlen,X;k==2?X=xe.table23:X=xe.table56;do{var oe=b[R+0]*Q+b[R+1];R+=2,B+=X[oe]}while(R<A);return $=B&65535,B>>=16,B>$&&(B=$,k++),O.bits+=B,k}function f(b,R,A,k,O){var B=0,$=0,Q=0,X=xe.ht[k].xlen,oe=xe.ht[k].hlen,w=xe.ht[k+1].hlen,P=xe.ht[k+2].hlen;do{var ce=b[R+0]*X+b[R+1];R+=2,B+=oe[ce],$+=w[ce],Q+=P[ce]}while(R<A);var V=k;return B>$&&(B=$,V++),B>Q&&(B=Q,V=k+2),O.bits+=B,V}var c=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];function h(b,R,A,k){var O=a(b,R,A);switch(O){case 0:return O;case 1:return l(b,R,A,k);case 2:case 3:return u(b,R,A,c[O-1],k);case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return f(b,R,A,c[O-1],k);default:if(O>dr.IXMAX_VAL)return k.bits=dr.LARGE_BITS,-1;O-=15;var B;for(B=24;B<32&&!(xe.ht[B].linmax>=O);B++);var $;for($=B-8;$<24&&!(xe.ht[$].linmax>=O);$++);return o(b,R,A,$,B,k)}}this.noquant_count_bits=function(b,R,A){var k=R.l3_enc,O=Math.min(576,R.max_nonzero_coeff+2>>1<<1);for(A!=null&&(A.sfb_count1=0);O>1&&(k[O-1]|k[O-2])==0;O-=2);R.count1=O;for(var B=0,$=0;O>3;O-=4){var Q;if(((k[O-1]|k[O-2]|k[O-3]|k[O-4])&2147483647)>1)break;Q=((k[O-4]*2+k[O-3])*2+k[O-2])*2+k[O-1],B+=xe.t32l[Q],$+=xe.t33l[Q]}var X=B;if(R.count1table_select=0,B>$&&(X=$,R.count1table_select=1),R.count1bits=X,R.big_values=O,O==0)return X;if(R.block_type==G.SHORT_TYPE)B=3*b.scalefac_band.s[3],B>R.big_values&&(B=R.big_values),$=R.big_values;else if(R.block_type==G.NORM_TYPE){if(B=R.region0_count=b.bv_scf[O-2],$=R.region1_count=b.bv_scf[O-1],$=b.scalefac_band.l[B+$+2],B=b.scalefac_band.l[B+1],$<O){var oe=new t(X);R.table_select[2]=h(k,$,O,oe),X=oe.bits}}else R.region0_count=7,R.region1_count=G.SBMAX_l-1-7-1,B=b.scalefac_band.l[8],$=O,B>$&&(B=$);if(B=Math.min(B,O),$=Math.min($,O),B>0){var oe=new t(X);R.table_select[0]=h(k,0,B,oe),X=oe.bits}if(B<$){var oe=new t(X);R.table_select[1]=h(k,B,$,oe),X=oe.bits}if(b.use_best_huffman==2&&(R.part2_3_length=X,best_huffman_divide(b,R),X=R.part2_3_length),A!=null&&R.block_type==G.NORM_TYPE){for(var w=0;b.scalefac_band.l[w]<R.big_values;)w++;A.sfb_count1=w}return X},this.count_bits=function(b,R,A,k){var O=A.l3_enc,B=dr.IXMAX_VAL/e.IPOW20(A.global_gain);if(A.xrpow_max>B)return dr.LARGE_BITS;if(s(R,O,e.IPOW20(A.global_gain),A,k),(b.substep_shaping&2)!=0)for(var $=0,Q=A.global_gain+A.scalefac_scale,X=.634521682242439/e.IPOW20(Q),oe=0;oe<A.sfbmax;oe++){var w=A.width[oe];if(b.pseudohalf[oe]==0)$+=w;else{var P;for(P=$,$+=w;P<$;++P)O[P]=R[P]>=X?O[P]:0}}return this.noquant_count_bits(b,A,k)};function d(b,R,A,k,O,B,$){for(var Q=R.big_values,X=0;X<=22;X++)k[X]=dr.LARGE_BITS;for(var X=0;X<16;X++){var oe=b.scalefac_band.l[X+1];if(oe>=Q)break;var w=0,P=new t(w),ce=h(A,0,oe,P);w=P.bits;for(var V=0;V<8;V++){var le=b.scalefac_band.l[X+V+2];if(le>=Q)break;var Y=w;P=new t(Y);var Z=h(A,oe,le,P);Y=P.bits,k[X+V]>Y&&(k[X+V]=Y,O[X+V]=X,B[X+V]=ce,$[X+V]=Z)}}}function p(b,R,A,k,O,B,$,Q){for(var X=R.big_values,oe=2;oe<G.SBMAX_l+1;oe++){var w=b.scalefac_band.l[oe];if(w>=X)break;var P=O[oe-2]+R.count1bits;if(A.part2_3_length<=P)break;var ce=new t(P),V=h(k,w,X,ce);P=ce.bits,!(A.part2_3_length<=P)&&(A.assign(R),A.part2_3_length=P,A.region0_count=B[oe-2],A.region1_count=oe-2-B[oe-2],A.table_select[0]=$[oe-2],A.table_select[1]=Q[oe-2],A.table_select[2]=V)}}this.best_huffman_divide=function(b,R){var A=new xc,k=R.l3_enc,O=Fo(23),B=Fo(23),$=Fo(23),Q=Fo(23);if(!(R.block_type==G.SHORT_TYPE&&b.mode_gr==1)){A.assign(R),R.block_type==G.NORM_TYPE&&(d(b,R,k,O,B,$,Q),p(b,A,R,k,O,B,$,Q));var X=A.big_values;if(!(X==0||(k[X-2]|k[X-1])>1)&&(X=R.count1+2,!(X>576))){A.assign(R),A.count1=X;for(var oe=0,w=0;X>A.big_values;X-=4){var P=((k[X-4]*2+k[X-3])*2+k[X-2])*2+k[X-1];oe+=xe.t32l[P],w+=xe.t33l[P]}if(A.big_values=X,A.count1table_select=0,oe>w&&(oe=w,A.count1table_select=1),A.count1bits=oe,A.block_type==G.NORM_TYPE)p(b,A,R,k,O,B,$,Q);else{if(A.part2_3_length=oe,oe=b.scalefac_band.l[8],oe>X&&(oe=X),oe>0){var ce=new t(A.part2_3_length);A.table_select[0]=h(k,0,oe,ce),A.part2_3_length=ce.bits}if(X>oe){var ce=new t(A.part2_3_length);A.table_select[1]=h(k,oe,X,ce),A.part2_3_length=ce.bits}R.part2_3_length>A.part2_3_length&&R.assign(A)}}}};var v=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],_=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],m=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],g=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];Ea.slen1_tab=m,Ea.slen2_tab=g;function x(b,R){for(var A,k=R.tt[1][b],O=R.tt[0][b],B=0;B<xe.scfsi_band.length-1;B++){for(A=xe.scfsi_band[B];A<xe.scfsi_band[B+1]&&!(O.scalefac[A]!=k.scalefac[A]&&k.scalefac[A]>=0);A++);if(A==xe.scfsi_band[B+1]){for(A=xe.scfsi_band[B];A<xe.scfsi_band[B+1];A++)k.scalefac[A]=-1;R.scfsi[b][B]=1}}var $=0,Q=0;for(A=0;A<11;A++)k.scalefac[A]!=-1&&(Q++,$<k.scalefac[A]&&($=k.scalefac[A]));for(var X=0,oe=0;A<G.SBPSY_l;A++)k.scalefac[A]!=-1&&(oe++,X<k.scalefac[A]&&(X=k.scalefac[A]));for(var B=0;B<16;B++)if($<v[B]&&X<_[B]){var w=m[B]*Q+g[B]*oe;k.part2_length>w&&(k.part2_length=w,k.scalefac_compress=B)}}this.best_scalefac_store=function(b,R,A,k){var O=k.tt[R][A],B,$,Q,X,oe=0;for(Q=0,B=0;B<O.sfbmax;B++){var w=O.width[B];for(Q+=w,X=-w;X<0&&O.l3_enc[X+Q]==0;X++);X==0&&(O.scalefac[B]=oe=-2)}if(O.scalefac_scale==0&&O.preflag==0){var P=0;for(B=0;B<O.sfbmax;B++)O.scalefac[B]>0&&(P|=O.scalefac[B]);if((P&1)==0&&P!=0){for(B=0;B<O.sfbmax;B++)O.scalefac[B]>0&&(O.scalefac[B]>>=1);O.scalefac_scale=oe=1}}if(O.preflag==0&&O.block_type!=G.SHORT_TYPE&&b.mode_gr==2){for(B=11;B<G.SBPSY_l&&!(O.scalefac[B]<e.pretab[B]&&O.scalefac[B]!=-2);B++);if(B==G.SBPSY_l){for(B=11;B<G.SBPSY_l;B++)O.scalefac[B]>0&&(O.scalefac[B]-=e.pretab[B]);O.preflag=oe=1}}for($=0;$<4;$++)k.scfsi[A][$]=0;for(b.mode_gr==2&&R==1&&k.tt[0][A].block_type!=G.SHORT_TYPE&&k.tt[1][A].block_type!=G.SHORT_TYPE&&(x(A,k),oe=0),B=0;B<O.sfbmax;B++)O.scalefac[B]==-2&&(O.scalefac[B]=0);oe!=0&&(b.mode_gr==2?this.scale_bitcount(O):this.scale_bitcount_lsf(b,O))};function L(b,R){for(var A=0;A<R;++A)if(b[A]<0)return!1;return!0}var y=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],M=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],F=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(b){var R,A,k=0,O=0,B,$=b.scalefac;if(Ef(L($,b.sfbmax)),b.block_type==G.SHORT_TYPE)B=y,b.mixed_block_flag!=0&&(B=M);else if(B=F,b.preflag==0){for(A=11;A<G.SBPSY_l&&!($[A]<e.pretab[A]);A++);if(A==G.SBPSY_l)for(b.preflag=1,A=11;A<G.SBPSY_l;A++)$[A]-=e.pretab[A]}for(A=0;A<b.sfbdivide;A++)k<$[A]&&(k=$[A]);for(;A<b.sfbmax;A++)O<$[A]&&(O=$[A]);for(b.part2_length=dr.LARGE_BITS,R=0;R<16;R++)k<v[R]&&O<_[R]&&b.part2_length>B[R]&&(b.part2_length=B[R],b.scalefac_compress=R);return b.part2_length==dr.LARGE_BITS};var D=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(b,R){var A,k,O,B,$,Q,X,oe,w=Fo(4),P=R.scalefac;for(R.preflag!=0?A=2:A=0,X=0;X<4;X++)w[X]=0;if(R.block_type==G.SHORT_TYPE){k=1;var ce=e.nr_of_sfb_block[A][k];for(oe=0,O=0;O<4;O++)for(B=ce[O]/3,X=0;X<B;X++,oe++)for($=0;$<3;$++)P[oe*3+$]>w[O]&&(w[O]=P[oe*3+$])}else{k=0;var ce=e.nr_of_sfb_block[A][k];for(oe=0,O=0;O<4;O++)for(B=ce[O],X=0;X<B;X++,oe++)P[oe]>w[O]&&(w[O]=P[oe])}for(Q=!1,O=0;O<4;O++)w[O]>D[A][O]&&(Q=!0);if(!Q){var V,le,Y,Z;for(R.sfb_partition_table=e.nr_of_sfb_block[A][k],O=0;O<4;O++)R.slen[O]=H[w[O]];switch(V=R.slen[0],le=R.slen[1],Y=R.slen[2],Z=R.slen[3],A){case 0:R.scalefac_compress=(V*5+le<<4)+(Y<<2)+Z;break;case 1:R.scalefac_compress=400+(V*5+le<<2)+Y;break;case 2:R.scalefac_compress=500+V*3+le;break;default:eR.err.printf(`intensity stereo not implemented yet
`);break}}if(!Q)for(Ef(R.sfb_partition_table!=null),R.part2_length=0,O=0;O<4;O++)R.part2_length+=R.slen[O]*R.sfb_partition_table[O];return Q};var H=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(b){for(var R=2;R<=576;R+=2){for(var A=0,k;b.scalefac_band.l[++A]<R;);for(k=r[A][0];b.scalefac_band.l[k+1]>R;)k--;for(k<0&&(k=r[A][0]),b.bv_scf[R-2]=k,k=r[A][1];b.scalefac_band.l[k+b.bv_scf[R-2]+2]>R;)k--;k<0&&(k=r[A][1]),b.bv_scf[R-1]=k}}}var gn=je.System,rR=je.Arrays,nR=je.new_byte,iR=je.new_float_n,sR=je.new_int,Jt=je.assert;Wr.EQ=function(e,t){return Math.abs(e)>Math.abs(t)?Math.abs(e-t)<=Math.abs(e)*1e-6:Math.abs(e-t)<=Math.abs(t)*1e-6};Wr.NEQ=function(e,t){return!Wr.EQ(e,t)};function Wr(){var e=this,t=32773,r=null,n=null,i=null,s=null;this.setModules=function(D,H,b,R){r=D,n=H,i=b,s=R};var a=null,o=0,l=0,u=0;this.getframebits=function(D){var H=D.internal_flags,b;H.bitrate_index!=0?b=xe.bitrate_table[D.version][H.bitrate_index]:b=D.brate;var R=0|(D.version+1)*72e3*b/D.out_samplerate+H.padding;return 8*R};function f(D){gn.arraycopy(D.header[D.w_ptr].buf,0,a,l,D.sideinfo_len),l+=D.sideinfo_len,o+=D.sideinfo_len*8,D.w_ptr=D.w_ptr+1&yt.MAX_HEADER_BUF-1}function c(D,H,b){for(;b>0;){var R;u==0&&(u=8,l++,Jt(D.header[D.w_ptr].write_timing>=o),D.header[D.w_ptr].write_timing==o&&f(D),a[l]=0),R=Math.min(b,u),b-=R,u-=R,a[l]|=H>>b<<u,o+=R}}function h(D,H,b){for(;b>0;){var R;u==0&&(u=8,l++,a[l]=0),R=Math.min(b,u),b-=R,u-=R,a[l]|=H>>b<<u,o+=R}}function d(D,H){var b=D.internal_flags,R;if(H>=8&&(c(b,76,8),H-=8),H>=8&&(c(b,65,8),H-=8),H>=8&&(c(b,77,8),H-=8),H>=8&&(c(b,69,8),H-=8),H>=32){var A=i.getLameShortVersion();if(H>=32)for(R=0;R<A.length&&H>=8;++R)H-=8,c(b,A.charAt(R),8)}for(;H>=1;H-=1)c(b,b.ancillary_flag,1),b.ancillary_flag^=D.disable_reservoir?0:1}function p(D,H,b){for(var R=D.header[D.h_ptr].ptr;b>0;){var A=Math.min(b,8-(R&7));b-=A,D.header[D.h_ptr].buf[R>>3]|=H>>b<<8-(R&7)-A,R+=A}D.header[D.h_ptr].ptr=R}function v(D,H){D<<=8;for(var b=0;b<8;b++)D<<=1,H<<=1,((H^D)&65536)!=0&&(H^=t);return H}this.CRC_writeheader=function(D,H){var b=65535;b=v(H[2]&255,b),b=v(H[3]&255,b);for(var R=6;R<D.sideinfo_len;R++)b=v(H[R]&255,b);H[4]=byte(b>>8),H[5]=byte(b&255)};function _(D,H){var b=D.internal_flags,R,A,k;if(R=b.l3_side,b.header[b.h_ptr].ptr=0,rR.fill(b.header[b.h_ptr].buf,0,b.sideinfo_len,0),D.out_samplerate<16e3?p(b,4094,12):p(b,4095,12),p(b,D.version,1),p(b,1,2),p(b,D.error_protection?0:1,1),p(b,b.bitrate_index,4),p(b,b.samplerate_index,2),p(b,b.padding,1),p(b,D.extension,1),p(b,D.mode.ordinal(),2),p(b,b.mode_ext,2),p(b,D.copyright,1),p(b,D.original,1),p(b,D.emphasis,2),D.error_protection&&p(b,0,16),D.version==1){for(Jt(R.main_data_begin>=0),p(b,R.main_data_begin,9),b.channels_out==2?p(b,R.private_bits,3):p(b,R.private_bits,5),k=0;k<b.channels_out;k++){var O;for(O=0;O<4;O++)p(b,R.scfsi[k][O],1)}for(A=0;A<2;A++)for(k=0;k<b.channels_out;k++){var B=R.tt[A][k];p(b,B.part2_3_length+B.part2_length,12),p(b,B.big_values/2,9),p(b,B.global_gain,8),p(b,B.scalefac_compress,4),B.block_type!=G.NORM_TYPE?(p(b,1,1),p(b,B.block_type,2),p(b,B.mixed_block_flag,1),B.table_select[0]==14&&(B.table_select[0]=16),p(b,B.table_select[0],5),B.table_select[1]==14&&(B.table_select[1]=16),p(b,B.table_select[1],5),p(b,B.subblock_gain[0],3),p(b,B.subblock_gain[1],3),p(b,B.subblock_gain[2],3)):(p(b,0,1),B.table_select[0]==14&&(B.table_select[0]=16),p(b,B.table_select[0],5),B.table_select[1]==14&&(B.table_select[1]=16),p(b,B.table_select[1],5),B.table_select[2]==14&&(B.table_select[2]=16),p(b,B.table_select[2],5),Jt(B.region0_count>=0&&B.region0_count<16),Jt(B.region1_count>=0&&B.region1_count<8),p(b,B.region0_count,4),p(b,B.region1_count,3)),p(b,B.preflag,1),p(b,B.scalefac_scale,1),p(b,B.count1table_select,1)}}else for(Jt(R.main_data_begin>=0),p(b,R.main_data_begin,8),p(b,R.private_bits,b.channels_out),A=0,k=0;k<b.channels_out;k++){var B=R.tt[A][k];p(b,B.part2_3_length+B.part2_length,12),p(b,B.big_values/2,9),p(b,B.global_gain,8),p(b,B.scalefac_compress,9),B.block_type!=G.NORM_TYPE?(p(b,1,1),p(b,B.block_type,2),p(b,B.mixed_block_flag,1),B.table_select[0]==14&&(B.table_select[0]=16),p(b,B.table_select[0],5),B.table_select[1]==14&&(B.table_select[1]=16),p(b,B.table_select[1],5),p(b,B.subblock_gain[0],3),p(b,B.subblock_gain[1],3),p(b,B.subblock_gain[2],3)):(p(b,0,1),B.table_select[0]==14&&(B.table_select[0]=16),p(b,B.table_select[0],5),B.table_select[1]==14&&(B.table_select[1]=16),p(b,B.table_select[1],5),B.table_select[2]==14&&(B.table_select[2]=16),p(b,B.table_select[2],5),Jt(B.region0_count>=0&&B.region0_count<16),Jt(B.region1_count>=0&&B.region1_count<8),p(b,B.region0_count,4),p(b,B.region1_count,3)),p(b,B.scalefac_scale,1),p(b,B.count1table_select,1)}D.error_protection&&CRC_writeheader(b,b.header[b.h_ptr].buf);{var $=b.h_ptr;Jt(b.header[$].ptr==b.sideinfo_len*8),b.h_ptr=$+1&yt.MAX_HEADER_BUF-1,b.header[b.h_ptr].write_timing=b.header[$].write_timing+H,b.h_ptr==b.w_ptr&&gn.err.println(`Error: MAX_HEADER_BUF too small in bitstream.c 
`)}}function m(D,H){var b=xe.ht[H.count1table_select+32],R,A=0,k=H.big_values,O=H.big_values;for(Jt(H.count1table_select<2),R=(H.count1-H.big_values)/4;R>0;--R){var B=0,$=0,Q;Q=H.l3_enc[k+0],Q!=0&&($+=8,H.xr[O+0]<0&&B++),Q=H.l3_enc[k+1],Q!=0&&($+=4,B*=2,H.xr[O+1]<0&&B++),Q=H.l3_enc[k+2],Q!=0&&($+=2,B*=2,H.xr[O+2]<0&&B++),Q=H.l3_enc[k+3],Q!=0&&($++,B*=2,H.xr[O+3]<0&&B++),k+=4,O+=4,c(D,B+b.table[$],b.hlen[$]),A+=b.hlen[$]}return A}function g(D,H,b,R,A){var k=xe.ht[H],O=0;if(H==0)return O;for(var B=b;B<R;B+=2){var $=0,Q=0,X=k.xlen,oe=k.xlen,w=0,P=A.l3_enc[B],ce=A.l3_enc[B+1];if(P!=0&&(A.xr[B]<0&&w++,$--),H>15){if(P>14){var V=P-15;Jt(V<=k.linmax),w|=V<<1,Q=X,P=15}if(ce>14){var le=ce-15;Jt(le<=k.linmax),w<<=X,w|=le,Q+=X,ce=15}oe=16}ce!=0&&(w<<=1,A.xr[B+1]<0&&w++,$--),P=P*oe+ce,Q-=$,$+=k.hlen[P],c(D,k.table[P],$),c(D,w,Q),O+=$+Q}return O}function x(D,H){var b=3*D.scalefac_band.s[3];b>H.big_values&&(b=H.big_values);var R=g(D,H.table_select[0],0,b,H);return R+=g(D,H.table_select[1],b,H.big_values,H),R}function L(D,H){var b,R,A,k;b=H.big_values;var O=H.region0_count+1;return Jt(O<D.scalefac_band.l.length),A=D.scalefac_band.l[O],O+=H.region1_count+1,Jt(O<D.scalefac_band.l.length),k=D.scalefac_band.l[O],A>b&&(A=b),k>b&&(k=b),R=g(D,H.table_select[0],0,A,H),R+=g(D,H.table_select[1],A,k,H),R+=g(D,H.table_select[2],k,b,H),R}function y(D){var H,b,R,A,k=0,O=D.internal_flags,B=O.l3_side;if(D.version==1)for(H=0;H<2;H++)for(b=0;b<O.channels_out;b++){var $=B.tt[H][b],Q=Ea.slen1_tab[$.scalefac_compress],X=Ea.slen2_tab[$.scalefac_compress];for(A=0,R=0;R<$.sfbdivide;R++)$.scalefac[R]!=-1&&(c(O,$.scalefac[R],Q),A+=Q);for(;R<$.sfbmax;R++)$.scalefac[R]!=-1&&(c(O,$.scalefac[R],X),A+=X);Jt(A==$.part2_length),$.block_type==G.SHORT_TYPE?A+=x(O,$):A+=L(O,$),A+=m(O,$),Jt(A==$.part2_3_length+$.part2_length),k+=A}else for(H=0,b=0;b<O.channels_out;b++){var $=B.tt[H][b],oe,w,P=0;if(Jt($.sfb_partition_table!=null),A=0,R=0,w=0,$.block_type==G.SHORT_TYPE){for(;w<4;w++){var ce=$.sfb_partition_table[w]/3,V=$.slen[w];for(oe=0;oe<ce;oe++,R++)c(O,Math.max($.scalefac[R*3+0],0),V),c(O,Math.max($.scalefac[R*3+1],0),V),c(O,Math.max($.scalefac[R*3+2],0),V),P+=3*V}A+=x(O,$)}else{for(;w<4;w++){var ce=$.sfb_partition_table[w],V=$.slen[w];for(oe=0;oe<ce;oe++,R++)c(O,Math.max($.scalefac[R],0),V),P+=V}A+=L(O,$)}A+=m(O,$),Jt(A==$.part2_3_length),Jt(P==$.part2_length),k+=P+A}return k}function M(){this.total=0}function F(D,H){var b=D.internal_flags,R,A,k,O,B;return B=b.w_ptr,O=b.h_ptr-1,O==-1&&(O=yt.MAX_HEADER_BUF-1),R=b.header[O].write_timing-o,H.total=R,R>=0&&(A=1+O-B,O<B&&(A=1+O-B+yt.MAX_HEADER_BUF),R-=A*8*b.sideinfo_len),k=e.getframebits(D),R+=k,H.total+=k,H.total%8!=0?H.total=1+H.total/8:H.total=H.total/8,H.total+=l+1,R<0&&gn.err.println(`strange error flushing buffer ... 
`),R}this.flush_bitstream=function(D){var H=D.internal_flags,b,R,A=H.h_ptr-1;if(A==-1&&(A=yt.MAX_HEADER_BUF-1),b=H.l3_side,!((R=F(D,new M))<0)){if(d(D,R),Jt(H.header[A].write_timing+this.getframebits(D)==o),H.ResvSize=0,b.main_data_begin=0,H.findReplayGain){var k=r.GetTitleGain(H.rgdata);Jt(NEQ(k,GainAnalysis.GAIN_NOT_ENOUGH_SAMPLES)),H.RadioGain=Math.floor(k*10+.5)|0}H.findPeakSample&&(H.noclipGainChange=Math.ceil(Math.log10(H.PeakSample/32767)*20*10)|0,H.noclipGainChange>0&&(EQ(D.scale,1)||EQ(D.scale,0))?H.noclipScale=Math.floor(32767/H.PeakSample*100)/100:H.noclipScale=-1)}},this.add_dummy_byte=function(D,H,b){for(var R=D.internal_flags,A;b-- >0;)for(h(R,H,8),A=0;A<yt.MAX_HEADER_BUF;++A)R.header[A].write_timing+=8},this.format_bitstream=function(D){var H=D.internal_flags,b;b=H.l3_side;var R=this.getframebits(D);d(D,b.resvDrain_pre),_(D,R);var A=8*H.sideinfo_len;if(A+=y(D),d(D,b.resvDrain_post),A+=b.resvDrain_post,b.main_data_begin+=(R-A)/8,F(D,new M)!=H.ResvSize&&gn.err.println("Internal buffer inconsistency. flushbits <> ResvSize"),b.main_data_begin*8!=H.ResvSize&&(gn.err.printf(`bit reservoir error: 
l3_side.main_data_begin: %d 
Resvoir size:             %d 
resv drain (post)         %d 
resv drain (pre)          %d 
header and sideinfo:      %d 
data bits:                %d 
total bits:               %d (remainder: %d) 
bitsperframe:             %d 
`,8*b.main_data_begin,H.ResvSize,b.resvDrain_post,b.resvDrain_pre,8*H.sideinfo_len,A-b.resvDrain_post-8*H.sideinfo_len,A,A%8,R),gn.err.println("This is a fatal error.  It has several possible causes:"),gn.err.println("90%%  LAME compiled with buggy version of gcc using advanced optimizations"),gn.err.println(" 9%%  Your system is overclocked"),gn.err.println(" 1%%  bug in LAME encoding library"),H.ResvSize=b.main_data_begin*8),o>1e9){var k;for(k=0;k<yt.MAX_HEADER_BUF;++k)H.header[k].write_timing-=o;o=0}return 0},this.copy_buffer=function(D,H,b,R,A){var k=l+1;if(k<=0)return 0;if(R!=0&&k>R)return-1;if(gn.arraycopy(a,0,H,b,k),l=-1,u=0,A!=0){var O=sR(1);if(O[0]=D.nMusicCRC,s.updateMusicCRC(O,H,b,k),D.nMusicCRC=O[0],k>0&&(D.VBR_seek_table.nBytesWritten+=k),D.decode_on_the_fly){for(var B=iR([2,1152]),$=k,Q=-1,X;Q!=0;)if(Q=n.hip_decode1_unclipped(D.hip,H,b,$,B[0],B[1]),$=0,Q==-1&&(Q=0),Q>0){if(D.findPeakSample){for(X=0;X<Q;X++)B[0][X]>D.PeakSample?D.PeakSample=B[0][X]:-B[0][X]>D.PeakSample&&(D.PeakSample=-B[0][X]);if(D.channels_out>1)for(X=0;X<Q;X++)B[1][X]>D.PeakSample?D.PeakSample=B[1][X]:-B[1][X]>D.PeakSample&&(D.PeakSample=-B[1][X])}if(D.findReplayGain&&r.AnalyzeSamples(D.rgdata,B[0],0,B[1],0,Q,D.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6}}}return k},this.init_bit_stream_w=function(D){a=nR(et.LAME_MAXMP3BUFFER),D.h_ptr=D.w_ptr=0,D.header[D.h_ptr].write_timing=0,l=-1,u=0,o=0}}var oR=je.System,Bt=je.VbrMode,Af=je.ShortBlock,Zi=je.new_float,jm=je.new_int_n,aR=je.new_short_n,ui=je.assert;function et(){var e=this,t=128*1024;et.V9=410,et.V8=420,et.V7=430,et.V6=440,et.V5=450,et.V4=460,et.V3=470,et.V2=480,et.V1=490,et.V0=500,et.R3MIX=1e3,et.STANDARD=1001,et.EXTREME=1002,et.INSANE=1003,et.STANDARD_FAST=1004,et.EXTREME_FAST=1005,et.MEDIUM=1006,et.MEDIUM_FAST=1007;var r=16384+t;et.LAME_MAXMP3BUFFER=r;var n,i,s,a,o,l=new Sf,u,f,c;this.enc=new G,this.setModules=function(w,P,ce,V,le,Y,Z,I,K){n=w,i=P,s=ce,a=V,o=le,u=Y,f=I,c=K,this.enc.setModules(i,l,a,u)};function h(){this.mask_adjust=0,this.mask_adjust_short=0,this.bo_l_weight=Zi(G.SBMAX_l),this.bo_s_weight=Zi(G.SBMAX_s)}function d(){this.lowerlimit=0}function p(w,P){this.lowpass=P}var v=4294479419;function _(w){var P;return w.class_id=v,P=w.internal_flags=new yt,w.mode=wt.NOT_SET,w.original=1,w.in_samplerate=44100,w.num_channels=2,w.num_samples=-1,w.bWriteVbrTag=!0,w.quality=-1,w.short_blocks=null,P.subblock_gain=-1,w.lowpassfreq=0,w.highpassfreq=0,w.lowpasswidth=-1,w.highpasswidth=-1,w.VBR=Bt.vbr_off,w.VBR_q=4,w.ATHcurve=-1,w.VBR_mean_bitrate_kbps=128,w.VBR_min_bitrate_kbps=0,w.VBR_max_bitrate_kbps=0,w.VBR_hard_min=0,P.VBR_min_bitrate=1,P.VBR_max_bitrate=13,w.quant_comp=-1,w.quant_comp_short=-1,w.msfix=-1,P.resample_ratio=1,P.OldValue[0]=180,P.OldValue[1]=180,P.CurrentStep[0]=4,P.CurrentStep[1]=4,P.masking_lower=1,P.nsPsy.attackthre=-1,P.nsPsy.attackthre_s=-1,w.scale=-1,w.athaa_type=-1,w.ATHtype=-1,w.athaa_loudapprox=-1,w.athaa_sensitivity=0,w.useTemporal=null,w.interChRatio=-1,P.mf_samples_to_encode=G.ENCDELAY+G.POSTDELAY,w.encoder_padding=0,P.mf_size=G.ENCDELAY-G.MDCTDELAY,w.findReplayGain=!1,w.decode_on_the_fly=!1,P.decode_on_the_fly=!1,P.findReplayGain=!1,P.findPeakSample=!1,P.RadioGain=0,P.AudiophileGain=0,P.noclipGainChange=0,P.noclipScale=-1,w.preset=0,w.write_id3tag_automatic=!0,0}this.lame_init=function(){var w=new NA;return _(w),w.lame_allocated_gfp=1,w};function m(w){return w>1?0:w<=0?1:Math.cos(Math.PI/2*w)}this.nearestBitrateFullIndex=function(w){var P=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320],ce=0,V=0,le=0,Y=0;Y=P[16],le=16,V=P[16],ce=16;for(var Z=0;Z<16;Z++)if(Math.max(w,P[Z+1])!=w){Y=P[Z+1],le=Z+1,V=P[Z],ce=Z;break}return Y-w>w-V?ce:le};function g(w,P){var ce=44100;return P>=48e3?ce=48e3:P>=44100?ce=44100:P>=32e3?ce=32e3:P>=24e3?ce=24e3:P>=22050?ce=22050:P>=16e3?ce=16e3:P>=12e3?ce=12e3:P>=11025?ce=11025:P>=8e3&&(ce=8e3),w==-1?ce:(w<=15960&&(ce=44100),w<=15250&&(ce=32e3),w<=11220&&(ce=24e3),w<=9970&&(ce=22050),w<=7230&&(ce=16e3),w<=5420&&(ce=12e3),w<=4510&&(ce=11025),w<=3970&&(ce=8e3),P<ce?P>44100?48e3:P>32e3?44100:P>24e3?32e3:P>22050?24e3:P>16e3?22050:P>12e3?16e3:P>11025?12e3:P>8e3?11025:8e3:ce)}function x(w,P){switch(w){case 44100:return P.version=1,0;case 48e3:return P.version=1,1;case 32e3:return P.version=1,2;case 22050:return P.version=0,0;case 24e3:return P.version=0,1;case 16e3:return P.version=0,2;case 11025:return P.version=0,0;case 12e3:return P.version=0,1;case 8e3:return P.version=0,2;default:return P.version=0,-1}}function L(w,P,ce){ce<16e3&&(P=2);for(var V=xe.bitrate_table[P][1],le=2;le<=14;le++)xe.bitrate_table[P][le]>0&&Math.abs(xe.bitrate_table[P][le]-w)<Math.abs(V-w)&&(V=xe.bitrate_table[P][le]);return V}function y(w,P,ce){ce<16e3&&(P=2);for(var V=0;V<=14;V++)if(xe.bitrate_table[P][V]>0&&xe.bitrate_table[P][V]==w)return V;return-1}function M(w,P){var ce=[new p(8,2e3),new p(16,3700),new p(24,3900),new p(32,5500),new p(40,7e3),new p(48,7500),new p(56,1e4),new p(64,11e3),new p(80,13500),new p(96,15100),new p(112,15600),new p(128,17e3),new p(160,17500),new p(192,18600),new p(224,19400),new p(256,19700),new p(320,20500)],V=e.nearestBitrateFullIndex(P);w.lowerlimit=ce[V].lowpass}function F(w){var P=w.internal_flags,ce=32,V=-1;if(P.lowpass1>0){for(var le=999,Y=0;Y<=31;Y++){var Z=Y/31;Z>=P.lowpass2&&(ce=Math.min(ce,Y)),P.lowpass1<Z&&Z<P.lowpass2&&(le=Math.min(le,Y))}le==999?P.lowpass1=(ce-.75)/31:P.lowpass1=(le-.75)/31,P.lowpass2=ce/31}if(P.highpass2>0&&P.highpass2<.9*(.75/31)&&(P.highpass1=0,P.highpass2=0,oR.err.println(`Warning: highpass filter disabled.  highpass frequency too small
`)),P.highpass2>0){for(var I=-1,Y=0;Y<=31;Y++){var Z=Y/31;Z<=P.highpass1&&(V=Math.max(V,Y)),P.highpass1<Z&&Z<P.highpass2&&(I=Math.max(I,Y))}P.highpass1=V/31,I==-1?P.highpass2=(V+.75)/31:P.highpass2=(I+.75)/31}for(var Y=0;Y<32;Y++){var K,ee,Z=Y/31;P.highpass2>P.highpass1?K=m((P.highpass2-Z)/(P.highpass2-P.highpass1+1e-20)):K=1,P.lowpass2>P.lowpass1?ee=m((Z-P.lowpass1)/(P.lowpass2-P.lowpass1+1e-20)):ee=1,P.amp_filter[Y]=K*ee}}function D(w){var P=w.internal_flags;switch(w.quality){default:case 9:P.psymodel=0,P.noise_shaping=0,P.noise_shaping_amp=0,P.noise_shaping_stop=0,P.use_best_huffman=0,P.full_outer_loop=0;break;case 8:w.quality=7;case 7:P.psymodel=1,P.noise_shaping=0,P.noise_shaping_amp=0,P.noise_shaping_stop=0,P.use_best_huffman=0,P.full_outer_loop=0;break;case 6:P.psymodel=1,P.noise_shaping==0&&(P.noise_shaping=1),P.noise_shaping_amp=0,P.noise_shaping_stop=0,P.subblock_gain==-1&&(P.subblock_gain=1),P.use_best_huffman=0,P.full_outer_loop=0;break;case 5:P.psymodel=1,P.noise_shaping==0&&(P.noise_shaping=1),P.noise_shaping_amp=0,P.noise_shaping_stop=0,P.subblock_gain==-1&&(P.subblock_gain=1),P.use_best_huffman=0,P.full_outer_loop=0;break;case 4:P.psymodel=1,P.noise_shaping==0&&(P.noise_shaping=1),P.noise_shaping_amp=0,P.noise_shaping_stop=0,P.subblock_gain==-1&&(P.subblock_gain=1),P.use_best_huffman=1,P.full_outer_loop=0;break;case 3:P.psymodel=1,P.noise_shaping==0&&(P.noise_shaping=1),P.noise_shaping_amp=1,P.noise_shaping_stop=1,P.subblock_gain==-1&&(P.subblock_gain=1),P.use_best_huffman=1,P.full_outer_loop=0;break;case 2:P.psymodel=1,P.noise_shaping==0&&(P.noise_shaping=1),P.substep_shaping==0&&(P.substep_shaping=2),P.noise_shaping_amp=1,P.noise_shaping_stop=1,P.subblock_gain==-1&&(P.subblock_gain=1),P.use_best_huffman=1,P.full_outer_loop=0;break;case 1:P.psymodel=1,P.noise_shaping==0&&(P.noise_shaping=1),P.substep_shaping==0&&(P.substep_shaping=2),P.noise_shaping_amp=2,P.noise_shaping_stop=1,P.subblock_gain==-1&&(P.subblock_gain=1),P.use_best_huffman=1,P.full_outer_loop=0;break;case 0:P.psymodel=1,P.noise_shaping==0&&(P.noise_shaping=1),P.substep_shaping==0&&(P.substep_shaping=2),P.noise_shaping_amp=2,P.noise_shaping_stop=1,P.subblock_gain==-1&&(P.subblock_gain=1),P.use_best_huffman=1,P.full_outer_loop=0;break}}function H(w){var P=w.internal_flags;w.frameNum=0,w.write_id3tag_automatic&&f.id3tag_write_v2(w),P.bitrate_stereoMode_Hist=jm([16,5]),P.bitrate_blockType_Hist=jm([16,6]),P.PeakSample=0,w.bWriteVbrTag&&u.InitVbrTag(w)}this.lame_init_params=function(w){var P=w.internal_flags;if(P.Class_ID=0,P.ATH==null&&(P.ATH=new GA),P.PSY==null&&(P.PSY=new h),P.rgdata==null&&(P.rgdata=new XA),P.channels_in=w.num_channels,P.channels_in==1&&(w.mode=wt.MONO),P.channels_out=w.mode==wt.MONO?1:2,P.mode_ext=G.MPG_MD_MS_LR,w.mode==wt.MONO&&(w.force_ms=!1),w.VBR==Bt.vbr_off&&w.VBR_mean_bitrate_kbps!=128&&w.brate==0&&(w.brate=w.VBR_mean_bitrate_kbps),w.VBR==Bt.vbr_off||w.VBR==Bt.vbr_mtrh||w.VBR==Bt.vbr_mt||(w.free_format=!1),w.VBR==Bt.vbr_off&&w.brate==0&&Wr.EQ(w.compression_ratio,0)&&(w.compression_ratio=11.025),w.VBR==Bt.vbr_off&&w.compression_ratio>0&&(w.out_samplerate==0&&(w.out_samplerate=map2MP3Frequency(int(.97*w.in_samplerate))),w.brate=0|w.out_samplerate*16*P.channels_out/(1e3*w.compression_ratio),P.samplerate_index=x(w.out_samplerate,w),w.free_format||(w.brate=L(w.brate,w.version,w.out_samplerate))),w.out_samplerate!=0&&(w.out_samplerate<16e3?(w.VBR_mean_bitrate_kbps=Math.max(w.VBR_mean_bitrate_kbps,8),w.VBR_mean_bitrate_kbps=Math.min(w.VBR_mean_bitrate_kbps,64)):w.out_samplerate<32e3?(w.VBR_mean_bitrate_kbps=Math.max(w.VBR_mean_bitrate_kbps,8),w.VBR_mean_bitrate_kbps=Math.min(w.VBR_mean_bitrate_kbps,160)):(w.VBR_mean_bitrate_kbps=Math.max(w.VBR_mean_bitrate_kbps,32),w.VBR_mean_bitrate_kbps=Math.min(w.VBR_mean_bitrate_kbps,320))),w.lowpassfreq==0){var ce=16e3;switch(w.VBR){case Bt.vbr_off:{var V=new d;M(V,w.brate),ce=V.lowerlimit;break}case Bt.vbr_abr:{var V=new d;M(V,w.VBR_mean_bitrate_kbps),ce=V.lowerlimit;break}case Bt.vbr_rh:{var le=[19500,19e3,18600,18e3,17500,16e3,15600,14900,12500,1e4,3950];if(w.VBR_q>=0&&w.VBR_q<=9){var Y=le[w.VBR_q],Z=le[w.VBR_q+1],I=w.VBR_q_frac;ce=linear_int(Y,Z,I)}else ce=19500;break}default:{var le=[19500,19e3,18500,18e3,17500,16500,15500,14500,12500,9500,3950];if(w.VBR_q>=0&&w.VBR_q<=9){var Y=le[w.VBR_q],Z=le[w.VBR_q+1],I=w.VBR_q_frac;ce=linear_int(Y,Z,I)}else ce=19500}}w.mode==wt.MONO&&(w.VBR==Bt.vbr_off||w.VBR==Bt.vbr_abr)&&(ce*=1.5),w.lowpassfreq=ce|0}if(w.out_samplerate==0&&(2*w.lowpassfreq>w.in_samplerate&&(w.lowpassfreq=w.in_samplerate/2),w.out_samplerate=g(w.lowpassfreq|0,w.in_samplerate)),w.lowpassfreq=Math.min(20500,w.lowpassfreq),w.lowpassfreq=Math.min(w.out_samplerate/2,w.lowpassfreq),w.VBR==Bt.vbr_off&&(w.compression_ratio=w.out_samplerate*16*P.channels_out/(1e3*w.brate)),w.VBR==Bt.vbr_abr&&(w.compression_ratio=w.out_samplerate*16*P.channels_out/(1e3*w.VBR_mean_bitrate_kbps)),w.bWriteVbrTag||(w.findReplayGain=!1,w.decode_on_the_fly=!1,P.findPeakSample=!1),P.findReplayGain=w.findReplayGain,P.decode_on_the_fly=w.decode_on_the_fly,P.decode_on_the_fly&&(P.findPeakSample=!0),P.findReplayGain&&n.InitGainAnalysis(P.rgdata,w.out_samplerate)==GainAnalysis.INIT_GAIN_ANALYSIS_ERROR)return w.internal_flags=null,-6;switch(P.decode_on_the_fly&&!w.decode_only&&(P.hip!=null&&c.hip_decode_exit(P.hip),P.hip=c.hip_decode_init()),P.mode_gr=w.out_samplerate<=24e3?1:2,w.framesize=576*P.mode_gr,w.encoder_delay=G.ENCDELAY,P.resample_ratio=w.in_samplerate/w.out_samplerate,w.VBR){case Bt.vbr_mt:case Bt.vbr_rh:case Bt.vbr_mtrh:{var K=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5];w.compression_ratio=K[w.VBR_q]}break;case Bt.vbr_abr:w.compression_ratio=w.out_samplerate*16*P.channels_out/(1e3*w.VBR_mean_bitrate_kbps);break;default:w.compression_ratio=w.out_samplerate*16*P.channels_out/(1e3*w.brate);break}if(w.mode==wt.NOT_SET&&(w.mode=wt.JOINT_STEREO),w.highpassfreq>0?(P.highpass1=2*w.highpassfreq,w.highpasswidth>=0?P.highpass2=2*(w.highpassfreq+w.highpasswidth):P.highpass2=1*2*w.highpassfreq,P.highpass1/=w.out_samplerate,P.highpass2/=w.out_samplerate):(P.highpass1=0,P.highpass2=0),w.lowpassfreq>0?(P.lowpass2=2*w.lowpassfreq,w.lowpasswidth>=0?(P.lowpass1=2*(w.lowpassfreq-w.lowpasswidth),P.lowpass1<0&&(P.lowpass1=0)):P.lowpass1=1*2*w.lowpassfreq,P.lowpass1/=w.out_samplerate,P.lowpass2/=w.out_samplerate):(P.lowpass1=0,P.lowpass2=0),F(w),P.samplerate_index=x(w.out_samplerate,w),P.samplerate_index<0)return w.internal_flags=null,-1;if(w.VBR==Bt.vbr_off){if(w.free_format)P.bitrate_index=0;else if(w.brate=L(w.brate,w.version,w.out_samplerate),P.bitrate_index=y(w.brate,w.version,w.out_samplerate),P.bitrate_index<=0)return w.internal_flags=null,-1}else P.bitrate_index=1;w.analysis&&(w.bWriteVbrTag=!1),P.pinfo!=null&&(w.bWriteVbrTag=!1),i.init_bit_stream_w(P);for(var ee=P.samplerate_index+3*w.version+6*(w.out_samplerate<16e3?1:0),ae=0;ae<G.SBMAX_l+1;ae++)P.scalefac_band.l[ae]=a.sfBandIndex[ee].l[ae];for(var ae=0;ae<G.PSFB21+1;ae++){var Me=(P.scalefac_band.l[22]-P.scalefac_band.l[21])/G.PSFB21,S=P.scalefac_band.l[21]+ae*Me;P.scalefac_band.psfb21[ae]=S}P.scalefac_band.psfb21[G.PSFB21]=576;for(var ae=0;ae<G.SBMAX_s+1;ae++)P.scalefac_band.s[ae]=a.sfBandIndex[ee].s[ae];for(var ae=0;ae<G.PSFB12+1;ae++){var Me=(P.scalefac_band.s[13]-P.scalefac_band.s[12])/G.PSFB12,S=P.scalefac_band.s[12]+ae*Me;P.scalefac_band.psfb12[ae]=S}P.scalefac_band.psfb12[G.PSFB12]=192,w.version==1?P.sideinfo_len=P.channels_out==1?21:36:P.sideinfo_len=P.channels_out==1?13:21,w.error_protection&&(P.sideinfo_len+=2),H(w),P.Class_ID=v;{var E;for(E=0;E<19;E++)P.nsPsy.pefirbuf[E]=700*P.mode_gr*P.channels_out;w.ATHtype==-1&&(w.ATHtype=4)}switch(ui(w.VBR_q<=9),ui(w.VBR_q>=0),w.VBR){case Bt.vbr_mt:w.VBR=Bt.vbr_mtrh;case Bt.vbr_mtrh:{w.useTemporal==null&&(w.useTemporal=!1),s.apply_preset(w,500-w.VBR_q*10,0),w.quality<0&&(w.quality=LAME_DEFAULT_QUALITY),w.quality<5&&(w.quality=0),w.quality>5&&(w.quality=5),P.PSY.mask_adjust=w.maskingadjust,P.PSY.mask_adjust_short=w.maskingadjust_short,w.experimentalY?P.sfb21_extra=!1:P.sfb21_extra=w.out_samplerate>44e3,P.iteration_loop=new VBRNewIterationLoop(o);break}case Bt.vbr_rh:{s.apply_preset(w,500-w.VBR_q*10,0),P.PSY.mask_adjust=w.maskingadjust,P.PSY.mask_adjust_short=w.maskingadjust_short,w.experimentalY?P.sfb21_extra=!1:P.sfb21_extra=w.out_samplerate>44e3,w.quality>6&&(w.quality=6),w.quality<0&&(w.quality=LAME_DEFAULT_QUALITY),P.iteration_loop=new VBROldIterationLoop(o);break}default:{var N;P.sfb21_extra=!1,w.quality<0&&(w.quality=LAME_DEFAULT_QUALITY),N=w.VBR,N==Bt.vbr_off&&(w.VBR_mean_bitrate_kbps=w.brate),s.apply_preset(w,w.VBR_mean_bitrate_kbps,0),w.VBR=N,P.PSY.mask_adjust=w.maskingadjust,P.PSY.mask_adjust_short=w.maskingadjust_short,N==Bt.vbr_off?P.iteration_loop=new QA(o):P.iteration_loop=new ABRIterationLoop(o);break}}if(ui(w.scale>=0),w.VBR!=Bt.vbr_off){if(P.VBR_min_bitrate=1,P.VBR_max_bitrate=14,w.out_samplerate<16e3&&(P.VBR_max_bitrate=8),w.VBR_min_bitrate_kbps!=0&&(w.VBR_min_bitrate_kbps=L(w.VBR_min_bitrate_kbps,w.version,w.out_samplerate),P.VBR_min_bitrate=y(w.VBR_min_bitrate_kbps,w.version,w.out_samplerate),P.VBR_min_bitrate<0)||w.VBR_max_bitrate_kbps!=0&&(w.VBR_max_bitrate_kbps=L(w.VBR_max_bitrate_kbps,w.version,w.out_samplerate),P.VBR_max_bitrate=y(w.VBR_max_bitrate_kbps,w.version,w.out_samplerate),P.VBR_max_bitrate<0))return-1;w.VBR_min_bitrate_kbps=xe.bitrate_table[w.version][P.VBR_min_bitrate],w.VBR_max_bitrate_kbps=xe.bitrate_table[w.version][P.VBR_max_bitrate],w.VBR_mean_bitrate_kbps=Math.min(xe.bitrate_table[w.version][P.VBR_max_bitrate],w.VBR_mean_bitrate_kbps),w.VBR_mean_bitrate_kbps=Math.max(xe.bitrate_table[w.version][P.VBR_min_bitrate],w.VBR_mean_bitrate_kbps)}return w.tune&&(P.PSY.mask_adjust+=w.tune_value_a,P.PSY.mask_adjust_short+=w.tune_value_a),D(w),ui(w.scale>=0),w.athaa_type<0?P.ATH.useAdjust=3:P.ATH.useAdjust=w.athaa_type,P.ATH.aaSensitivityP=Math.pow(10,w.athaa_sensitivity/-10),w.short_blocks==null&&(w.short_blocks=Af.short_block_allowed),w.short_blocks==Af.short_block_allowed&&(w.mode==wt.JOINT_STEREO||w.mode==wt.STEREO)&&(w.short_blocks=Af.short_block_coupled),w.quant_comp<0&&(w.quant_comp=1),w.quant_comp_short<0&&(w.quant_comp_short=0),w.msfix<0&&(w.msfix=0),w.exp_nspsytune=w.exp_nspsytune|1,w.internal_flags.nsPsy.attackthre<0&&(w.internal_flags.nsPsy.attackthre=Sf.NSATTACKTHRE),w.internal_flags.nsPsy.attackthre_s<0&&(w.internal_flags.nsPsy.attackthre_s=Sf.NSATTACKTHRE_S),ui(w.scale>=0),w.scale<0&&(w.scale=1),w.ATHtype<0&&(w.ATHtype=4),w.ATHcurve<0&&(w.ATHcurve=4),w.athaa_loudapprox<0&&(w.athaa_loudapprox=2),w.interChRatio<0&&(w.interChRatio=0),w.useTemporal==null&&(w.useTemporal=!0),P.slot_lag=P.frac_SpF=0,w.VBR==Bt.vbr_off&&(P.slot_lag=P.frac_SpF=(w.version+1)*72e3*w.brate%w.out_samplerate|0),a.iteration_init(w),l.psymodel_init(w),ui(w.scale>=0),0};function b(w,P){(w.in_buffer_0==null||w.in_buffer_nsamples<P)&&(w.in_buffer_0=Zi(P),w.in_buffer_1=Zi(P),w.in_buffer_nsamples=P)}this.lame_encode_flush=function(w,P,ce,V){var le=w.internal_flags,Y=aR([2,1152]),Z=0,I,K,ee,ae,Me=le.mf_samples_to_encode-G.POSTDELAY,S=R(w);if(le.mf_samples_to_encode<1)return 0;for(I=0,w.in_samplerate!=w.out_samplerate&&(Me+=16*w.out_samplerate/w.in_samplerate),ee=w.framesize-Me%w.framesize,ee<576&&(ee+=w.framesize),w.encoder_padding=ee,ae=(Me+ee)/w.framesize;ae>0&&Z>=0;){var E=S-le.mf_size,N=w.frameNum;E*=w.in_samplerate,E/=w.out_samplerate,E>1152&&(E=1152),E<1&&(E=1),K=V-I,V==0&&(K=0),Z=this.lame_encode_buffer(w,Y[0],Y[1],E,P,ce,K),ce+=Z,I+=Z,ae-=N!=w.frameNum?1:0}if(le.mf_samples_to_encode=0,Z<0||(K=V-I,V==0&&(K=0),i.flush_bitstream(w),Z=i.copy_buffer(le,P,ce,K,1),Z<0))return Z;if(ce+=Z,I+=Z,K=V-I,V==0&&(K=0),w.write_id3tag_automatic){if(f.id3tag_write_v1(w),Z=i.copy_buffer(le,P,ce,K,0),Z<0)return Z;I+=Z}return I},this.lame_encode_buffer=function(w,P,ce,V,le,Y,Z){var I=w.internal_flags,K=[null,null];if(I.Class_ID!=v)return-3;if(V==0)return 0;b(I,V),K[0]=I.in_buffer_0,K[1]=I.in_buffer_1;for(var ee=0;ee<V;ee++)K[0][ee]=P[ee],I.channels_in>1&&(K[1][ee]=ce[ee]);return A(w,K[0],K[1],V,le,Y,Z)};function R(w){var P=G.BLKSIZE+w.framesize-G.FFTOFFSET;return P=Math.max(P,512+w.framesize-32),P}function A(w,P,ce,V,le,Y,Z){var I=w.internal_flags,K=0,ee,ae,Me,S,E,N=[null,null],W=[null,null];if(I.Class_ID!=v)return-3;if(V==0)return 0;if(E=i.copy_buffer(I,le,Y,Z,0),E<0)return E;if(Y+=E,K+=E,W[0]=P,W[1]=ce,Wr.NEQ(w.scale,0)&&Wr.NEQ(w.scale,1))for(ae=0;ae<V;++ae)W[0][ae]*=w.scale,I.channels_out==2&&(W[1][ae]*=w.scale);if(Wr.NEQ(w.scale_left,0)&&Wr.NEQ(w.scale_left,1))for(ae=0;ae<V;++ae)W[0][ae]*=w.scale_left;if(Wr.NEQ(w.scale_right,0)&&Wr.NEQ(w.scale_right,1))for(ae=0;ae<V;++ae)W[1][ae]*=w.scale_right;if(w.num_channels==2&&I.channels_out==1)for(ae=0;ae<V;++ae)W[0][ae]=.5*(W[0][ae]+W[1][ae]),W[1][ae]=0;S=R(w),N[0]=I.mfbuf[0],N[1]=I.mfbuf[1];for(var re=0;V>0;){var ne=[null,null],de=0,pe=0;ne[0]=W[0],ne[1]=W[1];var me=new O;if(oe(w,N,ne,re,V,me),de=me.n_in,pe=me.n_out,I.findReplayGain&&!I.decode_on_the_fly&&n.AnalyzeSamples(I.rgdata,N[0],I.mf_size,N[1],I.mf_size,pe,I.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6;if(V-=de,re+=de,I.channels_out==2,I.mf_size+=pe,ui(I.mf_size<=yt.MFSIZE),I.mf_samples_to_encode<1&&(I.mf_samples_to_encode=G.ENCDELAY+G.POSTDELAY),I.mf_samples_to_encode+=pe,I.mf_size>=S){var fe=Z-K;if(Z==0&&(fe=0),ee=k(w,N[0],N[1],le,Y,fe),ee<0)return ee;for(Y+=ee,K+=ee,I.mf_size-=w.framesize,I.mf_samples_to_encode-=w.framesize,Me=0;Me<I.channels_out;Me++)for(ae=0;ae<I.mf_size;ae++)N[Me][ae]=N[Me][ae+w.framesize]}}return K}function k(w,P,ce,V,le,Y){var Z=e.enc.lame_encode_mp3_frame(w,P,ce,V,le,Y);return w.frameNum++,Z}function O(){this.n_in=0,this.n_out=0}function B(){this.num_used=0}function $(w,P){return P!=0?$(P,w%P):w}function Q(w,P,ce){var V=Math.PI*P;w/=ce,w<0&&(w=0),w>1&&(w=1);var le=w-.5,Y=.42-.5*Math.cos(2*w*Math.PI)+.08*Math.cos(4*w*Math.PI);return Math.abs(le)<1e-9?V/Math.PI:Y*Math.sin(ce*V*le)/(Math.PI*ce*le)}function X(w,P,ce,V,le,Y,Z,I,K){var ee=w.internal_flags,ae,Me=0,S,E=w.out_samplerate/$(w.out_samplerate,w.in_samplerate);E>yt.BPC&&(E=yt.BPC);var N=Math.abs(ee.resample_ratio-Math.floor(.5+ee.resample_ratio))<1e-4?1:0,W=1/ee.resample_ratio;W>1&&(W=1);var re=31;re%2==0&&--re,re+=N;var ne=re+1;if(ee.fill_buffer_resample_init==0){for(ee.inbuf_old[0]=Zi(ne),ee.inbuf_old[1]=Zi(ne),ae=0;ae<=2*E;++ae)ee.blackfilt[ae]=Zi(ne);for(ee.itime[0]=0,ee.itime[1]=0,Me=0;Me<=2*E;Me++){var de=0,pe=(Me-E)/(2*E);for(ae=0;ae<=re;ae++)de+=ee.blackfilt[Me][ae]=Q(ae-pe,W,re);for(ae=0;ae<=re;ae++)ee.blackfilt[Me][ae]/=de}ee.fill_buffer_resample_init=1}var me=ee.inbuf_old[K];for(S=0;S<V;S++){var fe,ke;if(fe=S*ee.resample_ratio,Me=0|Math.floor(fe-ee.itime[K]),re+Me-re/2>=Z)break;var pe=fe-ee.itime[K]-(Me+.5*(re%2));ke=0|Math.floor(pe*2*E+E+.5);var we=0;for(ae=0;ae<=re;++ae){var Re=0|ae+Me-re/2,Oe;Oe=Re<0?me[ne+Re]:le[Y+Re],we+=Oe*ee.blackfilt[ke][ae]}P[ce+S]=we}if(I.num_used=Math.min(Z,re+Me-re/2),ee.itime[K]+=I.num_used-S*ee.resample_ratio,I.num_used>=ne)for(ae=0;ae<ne;ae++)me[ae]=le[Y+I.num_used+ae-ne];else{var Pe=ne-I.num_used;for(ae=0;ae<Pe;++ae)me[ae]=me[ae+I.num_used];for(Me=0;ae<ne;++ae,++Me)me[ae]=le[Y+Me];ui(Me==I.num_used)}return S}function oe(w,P,ce,V,le,Y){var Z=w.internal_flags;if(Z.resample_ratio<.9999||Z.resample_ratio>1.0001)for(var I=0;I<Z.channels_out;I++){var K=new B;Y.n_out=X(w,P[I],Z.mf_size,w.framesize,ce[I],V,le,K,I),Y.n_in=K.num_used}else{Y.n_out=Math.min(w.framesize,le),Y.n_in=Y.n_out;for(var ee=0;ee<Y.n_out;++ee)P[0][Z.mf_size+ee]=ce[0][V+ee],Z.channels_out==2&&(P[1][Z.mf_size+ee]=ce[1][V+ee])}}}var vn=je.VbrMode;function lR(){function e(u,f,c,h,d,p,v,_,m,g,x,L,y,M,F){this.vbr_q=u,this.quant_comp=f,this.quant_comp_s=c,this.expY=h,this.st_lrm=d,this.st_s=p,this.masking_adj=v,this.masking_adj_short=_,this.ath_lower=m,this.ath_curve=g,this.ath_sensitivity=x,this.interch=L,this.safejoint=y,this.sfb21mod=M,this.msfix=F}function t(u,f,c,h,d,p,v,_,m,g,x,L,y,M){this.quant_comp=f,this.quant_comp_s=c,this.safejoint=h,this.nsmsfix=d,this.st_lrm=p,this.st_s=v,this.nsbass=_,this.scale=m,this.masking_adj=g,this.ath_lower=x,this.ath_curve=L,this.interch=y,this.sfscale=M}var r;this.setModules=function(u){r=u};var n=[new e(0,9,9,0,5.2,125,-4.2,-6.3,4.8,1,0,0,2,21,.97),new e(1,9,9,0,5.3,125,-3.6,-5.6,4.5,1.5,0,0,2,21,1.35),new e(2,9,9,0,5.6,125,-2.2,-3.5,2.8,2,0,0,2,21,1.49),new e(3,9,9,1,5.8,130,-1.8,-2.8,2.6,3,-4,0,2,20,1.64),new e(4,9,9,1,6,135,-.7,-1.1,1.1,3.5,-8,0,2,0,1.79),new e(5,9,9,1,6.4,140,.5,.4,-7.5,4,-12,2e-4,0,0,1.95),new e(6,9,9,1,6.6,145,.67,.65,-14.7,6.5,-19,4e-4,0,0,2.3),new e(7,9,9,1,6.6,145,.8,.75,-19.7,8,-22,6e-4,0,0,2.7),new e(8,9,9,1,6.6,145,1.2,1.15,-27.5,10,-23,7e-4,0,0,0),new e(9,9,9,1,6.6,145,1.6,1.6,-36,11,-25,8e-4,0,0,0),new e(10,9,9,1,6.6,145,2,2,-36,12,-25,8e-4,0,0,0)],i=[new e(0,9,9,0,4.2,25,-7,-4,7.5,1,0,0,2,26,.97),new e(1,9,9,0,4.2,25,-5.6,-3.6,4.5,1.5,0,0,2,21,1.35),new e(2,9,9,0,4.2,25,-4.4,-1.8,2,2,0,0,2,18,1.49),new e(3,9,9,1,4.2,25,-3.4,-1.25,1.1,3,-4,0,2,15,1.64),new e(4,9,9,1,4.2,25,-2.2,.1,0,3.5,-8,0,2,0,1.79),new e(5,9,9,1,4.2,25,-1,1.65,-7.7,4,-12,2e-4,0,0,1.95),new e(6,9,9,1,4.2,25,-0,2.47,-7.7,6.5,-19,4e-4,0,0,2),new e(7,9,9,1,4.2,25,.5,2,-14.5,8,-22,6e-4,0,0,2),new e(8,9,9,1,4.2,25,1,2.4,-22,10,-23,7e-4,0,0,2),new e(9,9,9,1,4.2,25,1.5,2.95,-30,11,-25,8e-4,0,0,2),new e(10,9,9,1,4.2,25,2,2.95,-36,12,-30,8e-4,0,0,2)];function s(u,f,c){var h=u.VBR==vn.vbr_rh?n:i,d=u.VBR_q_frac,p=h[f],v=h[f+1],_=p;p.st_lrm=p.st_lrm+d*(v.st_lrm-p.st_lrm),p.st_s=p.st_s+d*(v.st_s-p.st_s),p.masking_adj=p.masking_adj+d*(v.masking_adj-p.masking_adj),p.masking_adj_short=p.masking_adj_short+d*(v.masking_adj_short-p.masking_adj_short),p.ath_lower=p.ath_lower+d*(v.ath_lower-p.ath_lower),p.ath_curve=p.ath_curve+d*(v.ath_curve-p.ath_curve),p.ath_sensitivity=p.ath_sensitivity+d*(v.ath_sensitivity-p.ath_sensitivity),p.interch=p.interch+d*(v.interch-p.interch),p.msfix=p.msfix+d*(v.msfix-p.msfix),l(u,_.vbr_q),c!=0?u.quant_comp=_.quant_comp:Math.abs(u.quant_comp- -1)>0||(u.quant_comp=_.quant_comp),c!=0?u.quant_comp_short=_.quant_comp_s:Math.abs(u.quant_comp_short- -1)>0||(u.quant_comp_short=_.quant_comp_s),_.expY!=0&&(u.experimentalY=_.expY!=0),c!=0?u.internal_flags.nsPsy.attackthre=_.st_lrm:Math.abs(u.internal_flags.nsPsy.attackthre- -1)>0||(u.internal_flags.nsPsy.attackthre=_.st_lrm),c!=0?u.internal_flags.nsPsy.attackthre_s=_.st_s:Math.abs(u.internal_flags.nsPsy.attackthre_s- -1)>0||(u.internal_flags.nsPsy.attackthre_s=_.st_s),c!=0?u.maskingadjust=_.masking_adj:Math.abs(u.maskingadjust-0)>0||(u.maskingadjust=_.masking_adj),c!=0?u.maskingadjust_short=_.masking_adj_short:Math.abs(u.maskingadjust_short-0)>0||(u.maskingadjust_short=_.masking_adj_short),c!=0?u.ATHlower=-_.ath_lower/10:Math.abs(-u.ATHlower*10-0)>0||(u.ATHlower=-_.ath_lower/10),c!=0?u.ATHcurve=_.ath_curve:Math.abs(u.ATHcurve- -1)>0||(u.ATHcurve=_.ath_curve),c!=0?u.athaa_sensitivity=_.ath_sensitivity:Math.abs(u.athaa_sensitivity- -1)>0||(u.athaa_sensitivity=_.ath_sensitivity),_.interch>0&&(c!=0?u.interChRatio=_.interch:Math.abs(u.interChRatio- -1)>0||(u.interChRatio=_.interch)),_.safejoint>0&&(u.exp_nspsytune=u.exp_nspsytune|_.safejoint),_.sfb21mod>0&&(u.exp_nspsytune=u.exp_nspsytune|_.sfb21mod<<20),c!=0?u.msfix=_.msfix:Math.abs(u.msfix- -1)>0||(u.msfix=_.msfix),c==0&&(u.VBR_q=f,u.VBR_q_frac=d)}var a=[new t(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new t(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new t(24,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new t(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),new t(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new t(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new t(56,9,9,0,0,6.6,145,0,.95,0,-6,11,8e-4,1),new t(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8e-4,1),new t(80,9,9,0,0,6.6,145,0,.95,0,0,8,7e-4,1),new t(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6e-4,1),new t(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5e-4,1),new t(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2e-4,1),new t(160,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new t(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new t(224,9,9,1,1.25,5.2,125,0,.98,-6,9,2,0,0),new t(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new t(320,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];function o(u,f,c){var h=f,d=r.nearestBitrateFullIndex(f);if(u.VBR=vn.vbr_abr,u.VBR_mean_bitrate_kbps=h,u.VBR_mean_bitrate_kbps=Math.min(u.VBR_mean_bitrate_kbps,320),u.VBR_mean_bitrate_kbps=Math.max(u.VBR_mean_bitrate_kbps,8),u.brate=u.VBR_mean_bitrate_kbps,u.VBR_mean_bitrate_kbps>320&&(u.disable_reservoir=!0),a[d].safejoint>0&&(u.exp_nspsytune=u.exp_nspsytune|2),a[d].sfscale>0&&(u.internal_flags.noise_shaping=2),Math.abs(a[d].nsbass)>0){var p=int(a[d].nsbass*4);p<0&&(p+=64),u.exp_nspsytune=u.exp_nspsytune|p<<2}return c!=0?u.quant_comp=a[d].quant_comp:Math.abs(u.quant_comp- -1)>0||(u.quant_comp=a[d].quant_comp),c!=0?u.quant_comp_short=a[d].quant_comp_s:Math.abs(u.quant_comp_short- -1)>0||(u.quant_comp_short=a[d].quant_comp_s),c!=0?u.msfix=a[d].nsmsfix:Math.abs(u.msfix- -1)>0||(u.msfix=a[d].nsmsfix),c!=0?u.internal_flags.nsPsy.attackthre=a[d].st_lrm:Math.abs(u.internal_flags.nsPsy.attackthre- -1)>0||(u.internal_flags.nsPsy.attackthre=a[d].st_lrm),c!=0?u.internal_flags.nsPsy.attackthre_s=a[d].st_s:Math.abs(u.internal_flags.nsPsy.attackthre_s- -1)>0||(u.internal_flags.nsPsy.attackthre_s=a[d].st_s),c!=0?u.scale=a[d].scale:Math.abs(u.scale- -1)>0||(u.scale=a[d].scale),c!=0?u.maskingadjust=a[d].masking_adj:Math.abs(u.maskingadjust-0)>0||(u.maskingadjust=a[d].masking_adj),a[d].masking_adj>0?c!=0?u.maskingadjust_short=a[d].masking_adj*.9:Math.abs(u.maskingadjust_short-0)>0||(u.maskingadjust_short=a[d].masking_adj*.9):c!=0?u.maskingadjust_short=a[d].masking_adj*1.1:Math.abs(u.maskingadjust_short-0)>0||(u.maskingadjust_short=a[d].masking_adj*1.1),c!=0?u.ATHlower=-a[d].ath_lower/10:Math.abs(-u.ATHlower*10-0)>0||(u.ATHlower=-a[d].ath_lower/10),c!=0?u.ATHcurve=a[d].ath_curve:Math.abs(u.ATHcurve- -1)>0||(u.ATHcurve=a[d].ath_curve),c!=0?u.interChRatio=a[d].interch:Math.abs(u.interChRatio- -1)>0||(u.interChRatio=a[d].interch),f}this.apply_preset=function(u,f,c){switch(f){case et.R3MIX:{f=et.V3,u.VBR=vn.vbr_mtrh;break}case et.MEDIUM:{f=et.V4,u.VBR=vn.vbr_rh;break}case et.MEDIUM_FAST:{f=et.V4,u.VBR=vn.vbr_mtrh;break}case et.STANDARD:{f=et.V2,u.VBR=vn.vbr_rh;break}case et.STANDARD_FAST:{f=et.V2,u.VBR=vn.vbr_mtrh;break}case et.EXTREME:{f=et.V0,u.VBR=vn.vbr_rh;break}case et.EXTREME_FAST:{f=et.V0,u.VBR=vn.vbr_mtrh;break}case et.INSANE:return f=320,u.preset=f,o(u,f,c),u.VBR=vn.vbr_off,f}switch(u.preset=f,f){case et.V9:return s(u,9,c),f;case et.V8:return s(u,8,c),f;case et.V7:return s(u,7,c),f;case et.V6:return s(u,6,c),f;case et.V5:return s(u,5,c),f;case et.V4:return s(u,4,c),f;case et.V3:return s(u,3,c),f;case et.V2:return s(u,2,c),f;case et.V1:return s(u,1,c),f;case et.V0:return s(u,0,c),f}return f>=8&&f<=320?o(u,f,c):(u.preset=0,f)};function l(u,f){var c=0;return f<0&&(c=-1,f=0),f>9&&(c=-1,f=9),u.VBR_q=f,u.VBR_q_frac=0,c}}function cR(){this.setModules=function(e,t){}}function Rf(){this.over_noise=0,this.tot_noise=0,this.max_noise=0,this.over_count=0,this.over_SSD=0,this.bits=0}var Nm=je.new_float,uR=je.new_int;function fR(){this.global_gain=0,this.sfb_count1=0,this.step=uR(39),this.noise=Nm(39),this.noise_log=Nm(39)}var fi=je.System,Um=je.VbrMode,kf=je.Util,Us=je.Arrays,Do=je.new_float,Ho=je.assert;function hR(){var e;this.rv=null;var t;this.qupvt=null;var r,n=new cR,i;this.setModules=function(m,g,x,L){e=m,t=g,this.rv=g,r=x,this.qupvt=x,i=L,n.setModules(r,i)},this.ms_convert=function(m,g){for(var x=0;x<576;++x){var L=m.tt[g][0].xr[x],y=m.tt[g][1].xr[x];m.tt[g][0].xr[x]=(L+y)*(kf.SQRT2*.5),m.tt[g][1].xr[x]=(L-y)*(kf.SQRT2*.5)}};function s(m,g,x,L){L=0;for(var y=0;y<=x;++y){var M=Math.abs(m.xr[y]);L+=M,g[y]=Math.sqrt(M*Math.sqrt(M)),g[y]>m.xrpow_max&&(m.xrpow_max=g[y])}return L}this.init_xrpow=function(m,g,x){var L=0,y=0|g.max_nonzero_coeff;if(g.xrpow_max=0,Us.fill(x,y,576,0),L=s(g,x,y,L),L>1e-20){var M=0;(m.substep_shaping&2)!=0&&(M=1);for(var F=0;F<g.psymax;F++)m.pseudohalf[F]=M;return!0}return Us.fill(g.l3_enc,0,576,0),!1};function a(m,g){var x=m.ATH,L=g.xr;if(g.block_type!=G.SHORT_TYPE)for(var y=!1,M=G.PSFB21-1;M>=0&&!y;M--){var F=m.scalefac_band.psfb21[M],D=m.scalefac_band.psfb21[M+1],H=r.athAdjust(x.adjust,x.psfb21[M],x.floor);m.nsPsy.longfact[21]>1e-12&&(H*=m.nsPsy.longfact[21]);for(var b=D-1;b>=F;b--)if(Math.abs(L[b])<H)L[b]=0;else{y=!0;break}}else for(var R=0;R<3;R++)for(var y=!1,M=G.PSFB12-1;M>=0&&!y;M--){var F=m.scalefac_band.s[12]*3+(m.scalefac_band.s[13]-m.scalefac_band.s[12])*R+(m.scalefac_band.psfb12[M]-m.scalefac_band.psfb12[0]),D=F+(m.scalefac_band.psfb12[M+1]-m.scalefac_band.psfb12[M]),A=r.athAdjust(x.adjust,x.psfb12[M],x.floor);m.nsPsy.shortfact[12]>1e-12&&(A*=m.nsPsy.shortfact[12]);for(var b=D-1;b>=F;b--)if(Math.abs(L[b])<A)L[b]=0;else{y=!0;break}}}this.init_outer_loop=function(m,g){g.part2_3_length=0,g.big_values=0,g.count1=0,g.global_gain=210,g.scalefac_compress=0,g.table_select[0]=0,g.table_select[1]=0,g.table_select[2]=0,g.subblock_gain[0]=0,g.subblock_gain[1]=0,g.subblock_gain[2]=0,g.subblock_gain[3]=0,g.region0_count=0,g.region1_count=0,g.preflag=0,g.scalefac_scale=0,g.count1table_select=0,g.part2_length=0,g.sfb_lmax=G.SBPSY_l,g.sfb_smin=G.SBPSY_s,g.psy_lmax=m.sfb21_extra?G.SBMAX_l:G.SBPSY_l,g.psymax=g.psy_lmax,g.sfbmax=g.sfb_lmax,g.sfbdivide=11;for(var x=0;x<G.SBMAX_l;x++)g.width[x]=m.scalefac_band.l[x+1]-m.scalefac_band.l[x],g.window[x]=3;if(g.block_type==G.SHORT_TYPE){var L=Do(576);g.sfb_smin=0,g.sfb_lmax=0,g.mixed_block_flag!=0&&(g.sfb_smin=3,g.sfb_lmax=m.mode_gr*2+4),g.psymax=g.sfb_lmax+3*((m.sfb21_extra?G.SBMAX_s:G.SBPSY_s)-g.sfb_smin),g.sfbmax=g.sfb_lmax+3*(G.SBPSY_s-g.sfb_smin),g.sfbdivide=g.sfbmax-18,g.psy_lmax=g.sfb_lmax;var y=m.scalefac_band.l[g.sfb_lmax];fi.arraycopy(g.xr,0,L,0,576);for(var x=g.sfb_smin;x<G.SBMAX_s;x++)for(var M=m.scalefac_band.s[x],F=m.scalefac_band.s[x+1],D=0;D<3;D++)for(var H=M;H<F;H++)g.xr[y++]=L[3*H+D];for(var b=g.sfb_lmax,x=g.sfb_smin;x<G.SBMAX_s;x++)g.width[b]=g.width[b+1]=g.width[b+2]=m.scalefac_band.s[x+1]-m.scalefac_band.s[x],g.window[b]=0,g.window[b+1]=1,g.window[b+2]=2,b+=3}g.count1bits=0,g.sfb_partition_table=r.nr_of_sfb_block[0][0],g.slen[0]=0,g.slen[1]=0,g.slen[2]=0,g.slen[3]=0,g.max_nonzero_coeff=575,Us.fill(g.scalefac,0),a(m,g)};function o(m){this.ordinal=m}o.BINSEARCH_NONE=new o(0),o.BINSEARCH_UP=new o(1),o.BINSEARCH_DOWN=new o(2);function l(m,g,x,L,y){var M,F=m.CurrentStep[L],D=!1,H=m.OldValue[L],b=o.BINSEARCH_NONE;for(g.global_gain=H,x-=g.part2_length;;){var R;if(M=i.count_bits(m,y,g,null),F==1||M==x)break;M>x?(b==o.BINSEARCH_DOWN&&(D=!0),D&&(F/=2),b=o.BINSEARCH_UP,R=F):(b==o.BINSEARCH_UP&&(D=!0),D&&(F/=2),b=o.BINSEARCH_DOWN,R=-F),g.global_gain+=R,g.global_gain<0&&(g.global_gain=0,D=!0),g.global_gain>255&&(g.global_gain=255,D=!0)}for(Ho(g.global_gain>=0),Ho(g.global_gain<256);M>x&&g.global_gain<255;)g.global_gain++,M=i.count_bits(m,y,g,null);return m.CurrentStep[L]=H-g.global_gain>=4?4:2,m.OldValue[L]=g.global_gain,g.part2_3_length=M,M}this.trancate_smallspectrums=function(m,g,x,L){var y=Do(Ei.SFBMAX);if(!((m.substep_shaping&4)==0&&g.block_type==G.SHORT_TYPE||(m.substep_shaping&128)!=0)){r.calc_noise(g,x,y,new Rf,null);for(var F=0;F<576;F++){var M=0;g.l3_enc[F]!=0&&(M=Math.abs(g.xr[F])),L[F]=M}var F=0,D=8;g.block_type==G.SHORT_TYPE&&(D=6);do{var H,b,R,A,k=g.width[D];if(F+=k,!(y[D]>=1)&&(Us.sort(L,F-k,k),!BitStream.EQ(L[F-1],0))){H=(1-y[D])*x[D],b=0,A=0;do{var O;for(R=1;A+R<k&&!BitStream.NEQ(L[A+F-k],L[A+F+R-k]);R++);if(O=L[A+F-k]*L[A+F-k]*R,H<O){A!=0&&(b=L[A+F-k-1]);break}H-=O,A+=R}while(A<k);if(!BitStream.EQ(b,0))do Math.abs(g.xr[F-k])<=b&&(g.l3_enc[F-k]=0);while(--k>0)}}while(++D<g.psymax);g.part2_3_length=i.noquant_count_bits(m,g,null)}};function u(m){for(var g=0;g<m.sfbmax;g++)if(m.scalefac[g]+m.subblock_gain[m.window[g]]==0)return!1;return!0}function f(m){return kf.FAST_LOG10(.368+.632*m*m*m)}function c(m,g){for(var x=1e-37,L=0;L<g.psymax;L++)x+=f(m[L]);return Math.max(1e-20,x)}function h(m,g,x,L,y){var M;switch(m){default:case 9:{g.over_count>0?(M=x.over_SSD<=g.over_SSD,x.over_SSD==g.over_SSD&&(M=x.bits<g.bits)):M=x.max_noise<0&&x.max_noise*10+x.bits<=g.max_noise*10+g.bits;break}case 0:M=x.over_count<g.over_count||x.over_count==g.over_count&&x.over_noise<g.over_noise||x.over_count==g.over_count&&BitStream.EQ(x.over_noise,g.over_noise)&&x.tot_noise<g.tot_noise;break;case 8:x.max_noise=c(y,L);case 1:M=x.max_noise<g.max_noise;break;case 2:M=x.tot_noise<g.tot_noise;break;case 3:M=x.tot_noise<g.tot_noise&&x.max_noise<g.max_noise;break;case 4:M=x.max_noise<=0&&g.max_noise>.2||x.max_noise<=0&&g.max_noise<0&&g.max_noise>x.max_noise-.2&&x.tot_noise<g.tot_noise||x.max_noise<=0&&g.max_noise>0&&g.max_noise>x.max_noise-.2&&x.tot_noise<g.tot_noise+g.over_noise||x.max_noise>0&&g.max_noise>-.05&&g.max_noise>x.max_noise-.1&&x.tot_noise+x.over_noise<g.tot_noise+g.over_noise||x.max_noise>0&&g.max_noise>-.1&&g.max_noise>x.max_noise-.15&&x.tot_noise+x.over_noise+x.over_noise<g.tot_noise+g.over_noise+g.over_noise;break;case 5:M=x.over_noise<g.over_noise||BitStream.EQ(x.over_noise,g.over_noise)&&x.tot_noise<g.tot_noise;break;case 6:M=x.over_noise<g.over_noise||BitStream.EQ(x.over_noise,g.over_noise)&&(x.max_noise<g.max_noise||BitStream.EQ(x.max_noise,g.max_noise)&&x.tot_noise<=g.tot_noise);break;case 7:M=x.over_count<g.over_count||x.over_noise<g.over_noise;break}return g.over_count==0&&(M=M&&x.bits<g.bits),M}function d(m,g,x,L,y){var M=m.internal_flags,F;g.scalefac_scale==0?F=1.2968395546510096:F=1.6817928305074292;for(var D=0,H=0;H<g.sfbmax;H++)D<x[H]&&(D=x[H]);var b=M.noise_shaping_amp;switch(b==3&&(y?b=2:b=1),b){case 2:break;case 1:D>1?D=Math.pow(D,.5):D*=.95;break;case 0:default:D>1?D=1:D*=.95;break}for(var R=0,H=0;H<g.sfbmax;H++){var A=g.width[H],k;if(R+=A,!(x[H]<D)){if((M.substep_shaping&2)!=0&&(M.pseudohalf[H]=M.pseudohalf[H]==0?1:0,M.pseudohalf[H]==0&&M.noise_shaping_amp==2))return;for(g.scalefac[H]++,k=-A;k<0;k++)L[R+k]*=F,L[R+k]>g.xrpow_max&&(g.xrpow_max=L[R+k]);if(M.noise_shaping_amp==2)return}}}function p(m,g){for(var x=1.2968395546510096,L=0,y=0;y<m.sfbmax;y++){var M=m.width[y],F=m.scalefac[y];if(m.preflag!=0&&(F+=r.pretab[y]),L+=M,(F&1)!=0){F++;for(var D=-M;D<0;D++)g[L+D]*=x,g[L+D]>m.xrpow_max&&(m.xrpow_max=g[L+D])}m.scalefac[y]=F>>1}m.preflag=0,m.scalefac_scale=1}function v(m,g,x){var L,y=g.scalefac;for(L=0;L<g.sfb_lmax;L++)if(y[L]>=16)return!0;for(var M=0;M<3;M++){var F=0,D=0;for(L=g.sfb_lmax+M;L<g.sfbdivide;L+=3)F<y[L]&&(F=y[L]);for(;L<g.sfbmax;L+=3)D<y[L]&&(D=y[L]);if(!(F<16&&D<8)){if(g.subblock_gain[M]>=7)return!0;g.subblock_gain[M]++;var H=m.scalefac_band.l[g.sfb_lmax];for(L=g.sfb_lmax+M;L<g.sfbmax;L+=3){var b,R=g.width[L],A=y[L];if(A=A-(4>>g.scalefac_scale),A>=0){y[L]=A,H+=R*3;continue}y[L]=0;{var k=210+(A<<g.scalefac_scale+1);b=r.IPOW20(k)}H+=R*(M+1);for(var O=-R;O<0;O++)x[H+O]*=b,x[H+O]>g.xrpow_max&&(g.xrpow_max=x[H+O]);H+=R*(3-M-1)}{var b=r.IPOW20(202);H+=g.width[L]*(M+1);for(var O=-g.width[L];O<0;O++)x[H+O]*=b,x[H+O]>g.xrpow_max&&(g.xrpow_max=x[H+O])}}}return!1}function _(m,g,x,L,y){var M=m.internal_flags;d(m,g,x,L,y);var F=u(g);return F?!1:(M.mode_gr==2?F=i.scale_bitcount(g):F=i.scale_bitcount_lsf(M,g),F?(M.noise_shaping>1&&(Us.fill(M.pseudohalf,0),g.scalefac_scale==0?(p(g,L),F=!1):g.block_type==G.SHORT_TYPE&&M.subblock_gain>0&&(F=v(M,g,L)||u(g))),F||(M.mode_gr==2?F=i.scale_bitcount(g):F=i.scale_bitcount_lsf(M,g)),!F):!0)}this.outer_loop=function(m,g,x,L,y,M){var F=m.internal_flags,D=new xc,H=Do(576),b=Do(Ei.SFBMAX),R=new Rf,A,k=new fR,O=9999999,B=!1,$=!1,Q=0;if(l(F,g,M,y,L),F.noise_shaping==0)return 100;r.calc_noise(g,x,b,R,k),R.bits=g.part2_3_length,D.assign(g);var X=0;for(fi.arraycopy(L,0,H,0,576);!B;){do{var oe=new Rf,w,P=255;if((F.substep_shaping&2)!=0?w=20:w=3,F.sfb21_extra&&(b[D.sfbmax]>1||D.block_type==G.SHORT_TYPE&&(b[D.sfbmax+1]>1||b[D.sfbmax+2]>1))||!_(m,D,b,L,$))break;D.scalefac_scale!=0&&(P=254);var ce=M-D.part2_length;if(ce<=0)break;for(;(D.part2_3_length=i.count_bits(F,L,D,k))>ce&&D.global_gain<=P;)D.global_gain++;if(D.global_gain>P)break;if(R.over_count==0){for(;(D.part2_3_length=i.count_bits(F,L,D,k))>O&&D.global_gain<=P;)D.global_gain++;if(D.global_gain>P)break}if(r.calc_noise(D,x,b,oe,k),oe.bits=D.part2_3_length,g.block_type!=G.SHORT_TYPE?A=m.quant_comp:A=m.quant_comp_short,A=h(A,R,oe,D,b)?1:0,A!=0)O=g.part2_3_length,R=oe,g.assign(D),X=0,fi.arraycopy(L,0,H,0,576);else if(F.full_outer_loop==0&&(++X>w&&R.over_count==0||F.noise_shaping_amp==3&&$&&X>30||F.noise_shaping_amp==3&&$&&D.global_gain-Q>15))break}while(D.global_gain+D.scalefac_scale<255);F.noise_shaping_amp==3?$?B=!0:(D.assign(g),fi.arraycopy(H,0,L,0,576),X=0,Q=D.global_gain,$=!0):B=!0}return Ho(g.global_gain+g.scalefac_scale<=255),m.VBR==Um.vbr_rh||m.VBR==Um.vbr_mtrh?fi.arraycopy(H,0,L,0,576):(F.substep_shaping&1)!=0&&trancate_smallspectrums(F,g,x,L),R.over_count},this.iteration_finish_one=function(m,g,x){var L=m.l3_side,y=L.tt[g][x];i.best_scalefac_store(m,g,x,L),m.use_best_huffman==1&&i.best_huffman_divide(m,y),t.ResvAdjust(m,y)},this.VBR_encode_granule=function(m,g,x,L,y,M,F){var D=m.internal_flags,H=new xc,b=Do(576),R=F,A=F+1,k=(F+M)/2,O,B,$=0,Q=D.sfb21_extra;Ho(R<=LameInternalFlags.MAX_BITS_PER_CHANNEL),Us.fill(H.l3_enc,0);do k>R-42?D.sfb21_extra=!1:D.sfb21_extra=Q,B=outer_loop(m,g,x,L,y,k),B<=0?($=1,A=g.part2_3_length,H.assign(g),fi.arraycopy(L,0,b,0,576),F=A-32,O=F-M,k=(F+M)/2):(M=k+32,O=F-M,k=(F+M)/2,$!=0&&($=2,g.assign(H),fi.arraycopy(b,0,L,0,576)));while(O>12);D.sfb21_extra=Q,$==2&&fi.arraycopy(H.l3_enc,0,g.l3_enc,0,576),Ho(g.part2_3_length<=R)},this.get_framebits=function(m,g){var x=m.internal_flags;x.bitrate_index=x.VBR_min_bitrate;var L=e.getframebits(m);x.bitrate_index=1,L=e.getframebits(m);for(var y=1;y<=x.VBR_max_bitrate;y++){x.bitrate_index=y;var M=new MeanBits(L);g[y]=t.ResvFrameBegin(m,M),L=M.bits}},this.VBR_old_prepare=function(m,g,x,L,y,M,F,D,H){var b=m.internal_flags,R,A=0,k=1,O=0;b.bitrate_index=b.VBR_max_bitrate;var B=t.ResvFrameBegin(m,new MeanBits(0))/b.mode_gr;get_framebits(m,M);for(var $=0;$<b.mode_gr;$++){var Q=r.on_pe(m,g,D[$],B,$,0);b.mode_ext==G.MPG_MD_MS_LR&&(ms_convert(b.l3_side,$),r.reduce_side(D[$],x[$],B,Q));for(var X=0;X<b.channels_out;++X){var oe=b.l3_side.tt[$][X];oe.block_type!=G.SHORT_TYPE?(A=1.28/(1+Math.exp(3.5-g[$][X]/300))-.05,R=b.PSY.mask_adjust-A):(A=2.56/(1+Math.exp(3.5-g[$][X]/300))-.14,R=b.PSY.mask_adjust_short-A),b.masking_lower=Math.pow(10,R*.1),init_outer_loop(b,oe),H[$][X]=r.calc_xmin(m,L[$][X],oe,y[$][X]),H[$][X]!=0&&(k=0),F[$][X]=126,O+=D[$][X]}}for(var $=0;$<b.mode_gr;$++)for(var X=0;X<b.channels_out;X++)O>M[b.VBR_max_bitrate]&&(D[$][X]*=M[b.VBR_max_bitrate],D[$][X]/=O),F[$][X]>D[$][X]&&(F[$][X]=D[$][X]);return k},this.bitpressure_strategy=function(m,g,x,L){for(var y=0;y<m.mode_gr;y++)for(var M=0;M<m.channels_out;M++){for(var F=m.l3_side.tt[y][M],D=g[y][M],H=0,b=0;b<F.psy_lmax;b++)D[H++]*=1+.029*b*b/G.SBMAX_l/G.SBMAX_l;if(F.block_type==G.SHORT_TYPE)for(var b=F.sfb_smin;b<G.SBMAX_s;b++)D[H++]*=1+.029*b*b/G.SBMAX_s/G.SBMAX_s,D[H++]*=1+.029*b*b/G.SBMAX_s/G.SBMAX_s,D[H++]*=1+.029*b*b/G.SBMAX_s/G.SBMAX_s;L[y][M]=0|Math.max(x[y][M],.9*L[y][M])}},this.VBR_new_prepare=function(m,g,x,L,y,M){var F=m.internal_flags,D=1,H=0,b=0,R;if(m.free_format){F.bitrate_index=0;var A=new MeanBits(H);R=t.ResvFrameBegin(m,A),H=A.bits,y[0]=R}else{F.bitrate_index=F.VBR_max_bitrate;var A=new MeanBits(H);t.ResvFrameBegin(m,A),H=A.bits,get_framebits(m,y),R=y[F.VBR_max_bitrate]}for(var k=0;k<F.mode_gr;k++){r.on_pe(m,g,M[k],H,k,0),F.mode_ext==G.MPG_MD_MS_LR&&ms_convert(F.l3_side,k);for(var O=0;O<F.channels_out;++O){var B=F.l3_side.tt[k][O];F.masking_lower=Math.pow(10,F.PSY.mask_adjust*.1),init_outer_loop(F,B),r.calc_xmin(m,x[k][O],B,L[k][O])!=0&&(D=0),b+=M[k][O]}}for(var k=0;k<F.mode_gr;k++)for(var O=0;O<F.channels_out;O++)b>R&&(M[k][O]*=R,M[k][O]/=b);return D},this.calc_target_bits=function(m,g,x,L,y,M){var F=m.internal_flags,D=F.l3_side,H,b,R,A,k=0;F.bitrate_index=F.VBR_max_bitrate;var O=new MeanBits(k);for(M[0]=t.ResvFrameBegin(m,O),k=O.bits,F.bitrate_index=1,k=e.getframebits(m)-F.sideinfo_len*8,y[0]=k/(F.mode_gr*F.channels_out),k=m.VBR_mean_bitrate_kbps*m.framesize*1e3,(F.substep_shaping&1)!=0&&(k*=1.09),k/=m.out_samplerate,k-=F.sideinfo_len*8,k/=F.mode_gr*F.channels_out,H=.93+.07*(11-m.compression_ratio)/(11-5.5),H<.9&&(H=.9),H>1&&(H=1),b=0;b<F.mode_gr;b++){var B=0;for(R=0;R<F.channels_out;R++){if(L[b][R]=int(H*k),g[b][R]>700){var $=int((g[b][R]-700)/1.4),Q=D.tt[b][R];L[b][R]=int(H*k),Q.block_type==G.SHORT_TYPE&&$<k/2&&($=k/2),$>k*3/2?$=k*3/2:$<0&&($=0),L[b][R]+=$}L[b][R]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(L[b][R]=LameInternalFlags.MAX_BITS_PER_CHANNEL),B+=L[b][R]}if(B>LameInternalFlags.MAX_BITS_PER_GRANULE)for(R=0;R<F.channels_out;++R)L[b][R]*=LameInternalFlags.MAX_BITS_PER_GRANULE,L[b][R]/=B}if(F.mode_ext==G.MPG_MD_MS_LR)for(b=0;b<F.mode_gr;b++)r.reduce_side(L[b],x[b],k*F.channels_out,LameInternalFlags.MAX_BITS_PER_GRANULE);for(A=0,b=0;b<F.mode_gr;b++)for(R=0;R<F.channels_out;R++)L[b][R]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(L[b][R]=LameInternalFlags.MAX_BITS_PER_CHANNEL),A+=L[b][R];if(A>M[0])for(b=0;b<F.mode_gr;b++)for(R=0;R<F.channels_out;R++)L[b][R]*=M[0],L[b][R]/=A}}var qm=je.assert;function dR(){var e;this.setModules=function(t){e=t},this.ResvFrameBegin=function(t,r){var n=t.internal_flags,i,s=n.l3_side,a=e.getframebits(t);r.bits=(a-n.sideinfo_len*8)/n.mode_gr;var o=8*256*n.mode_gr-8;t.brate>320?i=8*int(t.brate*1e3/(t.out_samplerate/1152)/8+.5):(i=8*1440,t.strict_ISO&&(i=8*int(32e4/(t.out_samplerate/1152)/8+.5))),n.ResvMax=i-a,n.ResvMax>o&&(n.ResvMax=o),(n.ResvMax<0||t.disable_reservoir)&&(n.ResvMax=0);var l=r.bits*n.mode_gr+Math.min(n.ResvSize,n.ResvMax);return l>i&&(l=i),qm(n.ResvMax%8==0),qm(n.ResvMax>=0),s.resvDrain_pre=0,n.pinfo!=null&&(n.pinfo.mean_bits=r.bits/2,n.pinfo.resvsize=n.ResvSize),l},this.ResvMaxBits=function(t,r,n,i){var s=t.internal_flags,a,o=s.ResvSize,l=s.ResvMax;i!=0&&(o+=r),(s.substep_shaping&1)!=0&&(l*=.9),n.bits=r,o*10>l*9?(a=o-l*9/10,n.bits+=a,s.substep_shaping|=128):(a=0,s.substep_shaping&=127,!t.disable_reservoir&&(s.substep_shaping&1)==0&&(n.bits-=.1*r));var u=o<s.ResvMax*6/10?o:s.ResvMax*6/10;return u-=a,u<0&&(u=0),u},this.ResvAdjust=function(t,r){t.ResvSize-=r.part2_3_length+r.part2_length},this.ResvFrameEnd=function(t,r){var n,i=t.l3_side;t.ResvSize+=r*t.mode_gr;var s=0;i.resvDrain_post=0,i.resvDrain_pre=0,(n=t.ResvSize%8)!=0&&(s+=n),n=t.ResvSize-s-t.ResvMax,n>0&&(s+=n);{var a=Math.min(i.main_data_begin*8,s)/8;i.resvDrain_pre+=8*a,s-=8*a,t.ResvSize-=8*a,i.main_data_begin-=a}i.resvDrain_post+=s,t.ResvSize-=s}}function pR(){var e="http://www.mp3dev.org/",t=3,r=98,n=4,i=0,s=93;this.getLameVersion=function(){return t+"."+r+"."+n},this.getLameShortVersion=function(){return t+"."+r+"."+n},this.getLameVeryShortVersion=function(){return"LAME"+t+"."+r+"r"},this.getPsyVersion=function(){return i+"."+s},this.getLameUrl=function(){return e},this.getLameOsBitness=function(){return"32bits"}}var mR=je.System,Tf=je.VbrMode,zm=je.ShortBlock,_R=je.Arrays,Pl=je.new_byte,gR=je.assert;Aa.NUMTOCENTRIES=100;Aa.MAXFRAMESIZE=2880;function Aa(){var e,t,r;this.setModules=function(k,O,B){e=k,t=O,r=B};var n=1,i=2,s=4,a=8,o=Aa.NUMTOCENTRIES,l=Aa.MAXFRAMESIZE,u=o+4+4+4+4+4,f=u+9+1+1+8+1+1+3+1+1+2+4+2+2,c=128,h=64,d=32,p=null,v="Xing",_="Info",m=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];function g(k,O){if(k.nVbrNumFrames++,k.sum+=O,k.seen++,!(k.seen<k.want)&&(k.pos<k.size&&(k.bag[k.pos]=k.sum,k.pos++,k.seen=0),k.pos==k.size)){for(var B=1;B<k.size;B+=2)k.bag[B/2]=k.bag[B];k.want*=2,k.pos/=2}}function x(k,O){if(!(k.pos<=0))for(var B=1;B<o;++B){var $=B/o,Q,X,oe=0|Math.floor($*k.pos);oe>k.pos-1&&(oe=k.pos-1),Q=k.bag[oe],X=k.sum;var w=0|256*Q/X;w>255&&(w=255),O[B]=255&w}}this.addVbrFrame=function(k){var O=k.internal_flags,B=Tables.bitrate_table[k.version][O.bitrate_index];gR(O.VBR_seek_table.bag!=null),g(O.VBR_seek_table,B)};function L(k,O){var B=k[O+0]&255;return B<<=8,B|=k[O+1]&255,B<<=8,B|=k[O+2]&255,B<<=8,B|=k[O+3]&255,B}function y(k,O,B){k[O+0]=255&(B>>24&255),k[O+1]=255&(B>>16&255),k[O+2]=255&(B>>8&255),k[O+3]=255&(B&255)}function M(k,O,B){k[O+0]=255&(B>>8&255),k[O+1]=255&(B&255)}function F(k,O){return new String(k,O,v.length(),p).equals(v)||new String(k,O,_.length(),p).equals(_)}function D(k,O,B){return 255&(k<<O|B&~(-1<<O))}function H(k,O){var B=k.internal_flags;O[0]=D(O[0],8,255),O[1]=D(O[1],3,7),O[1]=D(O[1],1,k.out_samplerate<16e3?0:1),O[1]=D(O[1],1,k.version),O[1]=D(O[1],2,1),O[1]=D(O[1],1,k.error_protection?0:1),O[2]=D(O[2],4,B.bitrate_index),O[2]=D(O[2],2,B.samplerate_index),O[2]=D(O[2],1,0),O[2]=D(O[2],1,k.extension),O[3]=D(O[3],2,k.mode.ordinal()),O[3]=D(O[3],2,B.mode_ext),O[3]=D(O[3],1,k.copyright),O[3]=D(O[3],1,k.original),O[3]=D(O[3],2,k.emphasis),O[0]=255;var $=255&(O[1]&241),Q;k.version==1?Q=c:k.out_samplerate<16e3?Q=d:Q=h,k.VBR==Tf.vbr_off&&(Q=k.brate);var X;k.free_format?X=0:X=255&16*e.BitrateIndex(Q,k.version,k.out_samplerate),k.version==1?(O[1]=255&($|10),$=255&(O[2]&13),O[2]=255&(X|$)):(O[1]=255&($|2),$=255&(O[2]&13),O[2]=255&(X|$))}this.getVbrTag=function(k){var O=new VBRTagData,B=0;O.flags=0;var $=k[B+1]>>3&1,Q=k[B+2]>>2&3,X=k[B+3]>>6&3,oe=k[B+2]>>4&15;if(oe=Tables.bitrate_table[$][oe],k[B+1]>>4==14?O.samprate=Tables.samplerate_table[2][Q]:O.samprate=Tables.samplerate_table[$][Q],$!=0?X!=3?B+=36:B+=21:X!=3?B+=21:B+=13,!F(k,B))return null;B+=4,O.hId=$;var w=O.flags=L(k,B);if(B+=4,(w&n)!=0&&(O.frames=L(k,B),B+=4),(w&i)!=0&&(O.bytes=L(k,B),B+=4),(w&s)!=0){if(O.toc!=null)for(var P=0;P<o;P++)O.toc[P]=k[B+P];B+=o}O.vbrScale=-1,(w&a)!=0&&(O.vbrScale=L(k,B),B+=4),O.headersize=($+1)*72e3*oe/O.samprate,B+=21;var ce=k[B+0]<<4;ce+=k[B+1]>>4;var V=(k[B+1]&15)<<8;return V+=k[B+2]&255,(ce<0||ce>3e3)&&(ce=-1),(V<0||V>3e3)&&(V=-1),O.encDelay=ce,O.encPadding=V,O},this.InitVbrTag=function(k){var O=k.internal_flags,B;k.version==1?B=c:k.out_samplerate<16e3?B=d:B=h,k.VBR==Tf.vbr_off&&(B=k.brate);var $=(k.version+1)*72e3*B/k.out_samplerate,Q=O.sideinfo_len+f;if(O.VBR_seek_table.TotalFrameSize=$,$<Q||$>l){k.bWriteVbrTag=!1;return}O.VBR_seek_table.nVbrNumFrames=0,O.VBR_seek_table.nBytesWritten=0,O.VBR_seek_table.sum=0,O.VBR_seek_table.seen=0,O.VBR_seek_table.want=1,O.VBR_seek_table.pos=0,O.VBR_seek_table.bag==null&&(O.VBR_seek_table.bag=new int[400],O.VBR_seek_table.size=400);var X=Pl(l);H(k,X);for(var oe=O.VBR_seek_table.TotalFrameSize,w=0;w<oe;++w)t.add_dummy_byte(k,X[w]&255,1)};function b(k,O){var B=O^k;return O=O>>8^m[B&255],O}this.updateMusicCRC=function(k,O,B,$){for(var Q=0;Q<$;++Q)k[0]=b(O[B+Q],k[0])};function R(k,O,B,$,Q){var X=k.internal_flags,oe=0,w=k.encoder_delay,P=k.encoder_padding,ce=100-10*k.VBR_q-k.quality,V=r.getLameVeryShortVersion(),le,Y=0,Z,I=[1,5,3,2,4,0,3],K=0|(k.lowpassfreq/100+.5>255?255:k.lowpassfreq/100+.5),ee=0,ae=0,Me=0,S=k.internal_flags.noise_shaping,E=0,N=0,W=0,re=0,ne=0,de=(k.exp_nspsytune&1)!=0,pe=(k.exp_nspsytune&2)!=0,me=!1,fe=!1,ke=k.internal_flags.nogap_total,we=k.internal_flags.nogap_current,Re=k.ATHtype,Oe=0,Pe;switch(k.VBR){case vbr_abr:Pe=k.VBR_mean_bitrate_kbps;break;case vbr_off:Pe=k.brate;break;default:Pe=k.VBR_min_bitrate_kbps}switch(k.VBR.ordinal()<I.length?le=I[k.VBR.ordinal()]:le=0,Z=16*Y+le,X.findReplayGain&&(X.RadioGain>510&&(X.RadioGain=510),X.RadioGain<-510&&(X.RadioGain=-510),ae=8192,ae|=3072,X.RadioGain>=0?ae|=X.RadioGain:(ae|=512,ae|=-X.RadioGain)),X.findPeakSample&&(ee=Math.abs(0|X.PeakSample/32767*Math.pow(2,23)+.5)),ke!=-1&&(we>0&&(fe=!0),we<ke-1&&(me=!0)),Oe=Re+((de?1:0)<<4)+((pe?1:0)<<5)+((me?1:0)<<6)+((fe?1:0)<<7),ce<0&&(ce=0),k.mode){case MONO:E=0;break;case STEREO:E=1;break;case DUAL_CHANNEL:E=2;break;case JOINT_STEREO:k.force_ms?E=4:E=3;break;case NOT_SET:default:E=7;break}k.in_samplerate<=32e3?W=0:k.in_samplerate==48e3?W=2:k.in_samplerate>48e3?W=3:W=1,(k.short_blocks==zm.short_block_forced||k.short_blocks==zm.short_block_dispensed||k.lowpassfreq==-1&&k.highpassfreq==-1||k.scale_left<k.scale_right||k.scale_left>k.scale_right||k.disable_reservoir&&k.brate<320||k.noATH||k.ATHonly||Re==0||k.in_samplerate<=32e3)&&(N=1),re=S+(E<<2)+(N<<5)+(W<<6),ne=X.nMusicCRC,y(B,$+oe,ce),oe+=4;for(var z=0;z<9;z++)B[$+oe+z]=255&V.charAt(z);oe+=9,B[$+oe]=255&Z,oe++,B[$+oe]=255&K,oe++,y(B,$+oe,ee),oe+=4,M(B,$+oe,ae),oe+=2,M(B,$+oe,Me),oe+=2,B[$+oe]=255&Oe,oe++,Pe>=255?B[$+oe]=255:B[$+oe]=255&Pe,oe++,B[$+oe]=255&w>>4,B[$+oe+1]=255&(w<<4)+(P>>8),B[$+oe+2]=255&P,oe+=3,B[$+oe]=255&re,oe++,B[$+oe++]=0,M(B,$+oe,k.preset),oe+=2,y(B,$+oe,O),oe+=4,M(B,$+oe,ne),oe+=2;for(var C=0;C<oe;C++)Q=b(B[$+C],Q);return M(B,$+oe,Q),oe+=2,oe}function A(k){k.seek(0);var O=Pl(10);k.readFully(O);var B;return new String(O,"ISO-8859-1").startsWith("ID3")?B=0:B=((O[6]&127)<<21|(O[7]&127)<<14|(O[8]&127)<<7|O[9]&127)+O.length,B}this.getLameTagFrame=function(k,O){var B=k.internal_flags;if(!k.bWriteVbrTag||B.Class_ID!=Lame.LAME_ID||B.VBR_seek_table.pos<=0)return 0;if(O.length<B.VBR_seek_table.TotalFrameSize)return B.VBR_seek_table.TotalFrameSize;_R.fill(O,0,B.VBR_seek_table.TotalFrameSize,0),H(k,O);var $=Pl(o);if(k.free_format)for(var Q=1;Q<o;++Q)$[Q]=255&255*Q/100;else x(B.VBR_seek_table,$);var X=B.sideinfo_len;k.error_protection&&(X-=2),k.VBR==Tf.vbr_off?(O[X++]=255&_.charAt(0),O[X++]=255&_.charAt(1),O[X++]=255&_.charAt(2),O[X++]=255&_.charAt(3)):(O[X++]=255&v.charAt(0),O[X++]=255&v.charAt(1),O[X++]=255&v.charAt(2),O[X++]=255&v.charAt(3)),y(O,X,n+i+s+a),X+=4,y(O,X,B.VBR_seek_table.nVbrNumFrames),X+=4;var oe=B.VBR_seek_table.nBytesWritten+B.VBR_seek_table.TotalFrameSize;y(O,X,0|oe),X+=4,mR.arraycopy($,0,O,X,$.length),X+=$.length,k.error_protection&&t.CRC_writeheader(B,O);for(var w=0,Q=0;Q<X;Q++)w=b(O[Q],w);return X+=R(k,oe,O,X,w),B.VBR_seek_table.TotalFrameSize},this.putVbrTag=function(k,O){var B=k.internal_flags;if(B.VBR_seek_table.pos<=0||(O.seek(O.length()),O.length()==0))return-1;var $=A(O);O.seek($);var Q=Pl(l),X=getLameTagFrame(k,Q);return X>Q.length?-1:(X<1||O.write(Q,0,X),0)}}var Vm=je.new_byte,vR=je.assert;function yR(){this.setModules=function(e,t){}}function bR(){this.setModules=function(e,t,r){}}function wR(){}function SR(){this.setModules=function(e,t){}}function CR(e,t,r){arguments.length!=3&&(console.error("WARN: Mp3Encoder(channels, samplerate, kbps) not specified"),e=1,t=44100,r=128);var n=new et,i=new yR,s=new Yt,a=new Wr,o=new lR,l=new dr,u=new hR,f=new Aa,c=new pR,h=new SR,d=new dR,p=new Ea,v=new bR,_=new wR;n.setModules(s,a,o,l,u,f,c,h,_),a.setModules(s,_,c,f),h.setModules(a,c),o.setModules(n),u.setModules(a,d,l,p),l.setModules(p,d,n.enc.psy),d.setModules(a),p.setModules(l),f.setModules(n,a,c),i.setModules(v,_),v.setModules(c,h,o);var m=n.lame_init();m.num_channels=e,m.in_samplerate=t,m.brate=r,m.mode=wt.STEREO,m.quality=3,m.bWriteVbrTag=!1,m.disable_reservoir=!0,m.write_id3tag_automatic=!1,n.lame_init_params(m);var g=1152,x=0|1.25*g+7200,L=Vm(x);this.encodeBuffer=function(y,M){e==1&&(M=y),vR(y.length==M.length),y.length>g&&(g=y.length,x=0|1.25*g+7200,L=Vm(x));var F=n.lame_encode_buffer(m,y,M,y.length,L,0,x);return new Int8Array(L.subarray(0,F))},this.flush=function(){var y=n.lame_encode_flush(m,L,0,x);return new Int8Array(L.subarray(0,y))}}function lu(e){return e.charCodeAt(0)<<24|e.charCodeAt(1)<<16|e.charCodeAt(2)<<8|e.charCodeAt(3)}lu("RIFF");lu("WAVE");lu("fmt ");lu("data");class xR{constructor(t){this.bitRate=t.bitRate,this.sampleRate=t.sampleRate,this.dataBuffer=[],this.encoder=new CR(1,this.sampleRate,this.bitRate)}encode(t){const n=this._convertBuffer(t);let i=n.length;for(let s=0;i>=0;s+=1152){const a=n.subarray(s,s+1152),o=this.encoder.encodeBuffer(a);this.dataBuffer.push(new Int8Array(o)),i-=1152}}finish(){this.dataBuffer.push(this.encoder.flush());const t=new Blob(this.dataBuffer,{type:"audio/mp3"});return this.dataBuffer=[],{id:Date.now(),blob:t,url:URL.createObjectURL(t)}}_floatTo16BitPCM(t,r){for(let n=0;n<t.length;n++){const i=Math.max(-1,Math.min(1,t[n]));r[n]=i<0?i*32768:i*32767}}_convertBuffer(t){const r=new Float32Array(t),n=new Int16Array(t.length);return this._floatTo16BitPCM(r,n),n}}class ER{constructor(t={}){this.beforeRecording=t.beforeRecording,this.pauseRecording=t.pauseRecording,this.afterRecording=t.afterRecording,this.micFailed=t.micFailed,this.encoderOptions={bitRate:t.bitRate,sampleRate:t.sampleRate},this.bufferSize=4096,this.records=[],this.isPause=!1,this.isRecording=!1,this.duration=0,this.volume=0,this._duration=0}start(){const t={video:!1,audio:{channelCount:1,echoCancellation:!1}};this.beforeRecording&&this.beforeRecording("start recording"),navigator.mediaDevices.getUserMedia(t).then(this._micCaptured.bind(this)).catch(this._micError.bind(this)),this.isPause=!1,this.isRecording=!0,this.lameEncoder||(this.lameEncoder=new xR(this.encoderOptions))}stop(){this.stream.getTracks().forEach(r=>r.stop()),this.input.disconnect(),this.processor.disconnect(),this.context.close();let t=null;t=this.lameEncoder.finish(),t.duration=this.duration,this.records.push(t),this._duration=0,this.duration=0,this.isPause=!1,this.isRecording=!1,this.afterRecording&&this.afterRecording(t)}pause(){this.stream.getTracks().forEach(t=>t.stop()),this.input.disconnect(),this.processor.disconnect(),this._duration=this.duration,this.isPause=!0,this.pauseRecording&&this.pauseRecording("pause recording")}_micCaptured(t){this.context=new(window.AudioContext||window.webkitAudioContext),this.duration=this._duration,this.input=this.context.createMediaStreamSource(t),this.processor=this.context.createScriptProcessor(this.bufferSize,1,1),this.stream=t,this.processor.onaudioprocess=r=>{const n=r.inputBuffer.getChannelData(0);let i=0;this.lameEncoder&&this.lameEncoder.encode(n);for(let s=0;s<n.length;++s)i+=n[s]*n[s];this.duration=parseFloat(this._duration)+parseFloat(this.context.currentTime.toFixed(2)),this.volume=Math.sqrt(i/n.length).toFixed(2)},this.input.connect(this.processor),this.processor.connect(this.context.destination)}_micError(t){this.micFailed&&this.micFailed(t)}}var $m=window.chrome,qd=window.navigator,AR=qd.vendor,RR=typeof window.opr<"u",kR=qd.userAgent.indexOf("Edg")>-1,TR=qd.userAgent.match("CriOS");function MR(){return TR?!0:$m!==null&&typeof $m<"u"&&AR==="Google Inc."&&RR===!1&&kR===!1}function Wm(){var e=LR(),t=e.substr(0,4);return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw(n|u)|c55\/|capi|ccwa|cdm|cell|chtm|cldc|cmd|co(mp|nd)|craw|da(it|ll|ng)|dbte|dcs|devi|dica|dmob|do(c|p)o|ds(12|d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(|_)|g1 u|g560|gene|gf5|gmo|go(\.w|od)|gr(ad|un)|haie|hcit|hd(m|p|t)|hei|hi(pt|ta)|hp( i|ip)|hsc|ht(c(| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i(20|go|ma)|i230|iac( ||\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|[a-w])|libw|lynx|m1w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|mcr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|([1-8]|c))|phil|pire|pl(ay|uc)|pn2|po(ck|rt|se)|prox|psio|ptg|qaa|qc(07|12|21|32|60|[2-7]|i)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h|oo|p)|sdk\/|se(c(|0|1)|47|mc|nd|ri)|sgh|shar|sie(|m)|sk0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h|v|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl|tdg|tel(i|m)|tim|tmo|to(pl|sh)|ts(70|m|m3|m5)|tx9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas|your|zeto|zte/i.test(t)}function LR(){var e=navigator.userAgent||navigator.vendor||window.opera||null;if(!e)throw new Error("Failed to look for user agent information.");return e}const BR={name:"RoomFooter",components:{SvgIcon:cr,EmojiPickerContainer:cb,RoomFiles:I7,RoomMessageReply:iA,RoomUsersTag:fA,RoomEmojis:_A,RoomTemplatesText:xA},directives:{clickOutside:su},props:{room:{type:Object,required:!0},roomId:{type:[String,Number],required:!0},roomMessage:{type:String,default:null},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},textMessages:{type:Object,required:!0},showSendIcon:{type:Boolean,required:!0},showFiles:{type:Boolean,required:!0},showAudio:{type:Boolean,required:!0},showEmojis:{type:Boolean,required:!0},showFooter:{type:Boolean,required:!0},acceptedFiles:{type:String,required:!0},multipleFiles:{type:Boolean,default:!0},captureFiles:{type:String,required:!0},textareaActionEnabled:{type:Boolean,required:!0},textareaAutoFocus:{type:Boolean,required:!0},userTagsEnabled:{type:Boolean,required:!0},emojisSuggestionEnabled:{type:Boolean,required:!0},templatesText:{type:Array,default:null},audioBitRate:{type:Number,required:!0},audioSampleRate:{type:Number,required:!0},initReplyMessage:{type:Object,default:null},initEditMessage:{type:Object,default:null},droppedFiles:{type:Array,default:null},emojiDataSource:{type:String,default:void 0}},emits:["edit-message","send-message","update-edited-message-id","textarea-action-handler","typing-message"],data(){return{message:"",editedMessage:{},messageReply:null,cursorRangePosition:null,files:[],fileDialog:!1,selectUsersTagItem:null,selectEmojiItem:null,selectTemplatesTextItem:null,format:"mp3",activeUpOrDownEmojis:null,activeUpOrDownUsersTag:null,activeUpOrDownTemplatesText:null,emojisDB:new Gy({dataSource:this.emojiDataSource}),emojiOpened:!1,keepKeyboardOpen:!1,filteredEmojis:[],filteredUsersTag:[],selectedUsersTag:[],filteredTemplatesText:[],recorder:this.initRecorder(),isRecording:!1}},computed:{isMessageEmpty(){return!this.files.length&&!this.message.trim()},isFileLoading(){return this.files.some(e=>e.loading)},recordedTime(){return new Date(this.recorder.duration*1e3).toISOString().substr(14,5)},shadowFooter(){return!!this.filteredEmojis.length||!!this.filteredUsersTag.length||!!this.filteredTemplatesText.length||!!this.files.length||!!this.messageReply}},watch:{roomId(){this.resetMessage(!0,!0),this.roomMessage&&(this.message=this.roomMessage,setTimeout(()=>this.onChangeInput()))},message(e){this.getTextareaRef().value=e},roomMessage:{immediate:!0,handler(e){e&&(this.message=this.roomMessage)}},editedMessage(e){this.$emit("update-edited-message-id",e._id)},initReplyMessage(e){e&&this.replyMessage(e)},initEditMessage(e){e&&this.editMessage(e)},droppedFiles(e){e&&this.onFileChange(e)}},mounted(){const e=Wm();let t=!0;this.getTextareaRef().addEventListener("keyup",r=>{r.key==="Enter"&&!r.shiftKey&&!this.fileDialog&&(e?(this.message=this.message+`
`,setTimeout(()=>this.onChangeInput())):t&&!this.filteredEmojis.length&&!this.filteredUsersTag.length&&!this.filteredTemplatesText.length&&this.sendMessage()),t=!r.isComposing,setTimeout(()=>{this.updateFooterLists()},60)}),this.getTextareaRef().addEventListener("click",()=>{e&&(this.keepKeyboardOpen=!0),this.updateFooterLists()}),this.getTextareaRef().addEventListener("blur",()=>{setTimeout(()=>{this.resetFooterList()},100),e&&setTimeout(()=>this.keepKeyboardOpen=!1)})},beforeUnmount(){this.stopRecorder()},methods:{getTextareaRef(){return this.$refs.roomTextarea},focusTextarea(e){Wm()&&e||this.getTextareaRef()&&(this.getTextareaRef().focus(),this.cursorRangePosition&&setTimeout(()=>{const t=MR()?0:1;this.getTextareaRef().setSelectionRange(this.cursorRangePosition+t,this.cursorRangePosition+t),this.cursorRangePosition=null}))},onChangeInput(){var e,t,r;((e=this.getTextareaRef())!=null&&e.value||((t=this.getTextareaRef())==null?void 0:t.value)==="")&&(this.message=(r=this.getTextareaRef())==null?void 0:r.value),this.keepKeyboardOpen=!0,this.resizeTextarea(),this.$emit("typing-message",this.message)},resizeTextarea(){const e=this.getTextareaRef();if(!e)return;const t=window.getComputedStyle(e,null).getPropertyValue("padding-top").replace("px","");e.style.height=0,e.style.height=e.scrollHeight-t*2+"px"},escapeTextarea(){this.filteredEmojis.length?this.filteredEmojis=[]:this.filteredUsersTag.length?this.filteredUsersTag=[]:this.filteredTemplatesText.length?this.filteredTemplatesText=[]:this.resetMessage()},onPasteImage(e){var t;const r=(t=e.clipboardData)==null?void 0:t.items;r&&Array.from(r).forEach(n=>{if(n.type.includes("image")){const i=n.getAsFile();this.onFileChange([i])}})},updateActiveUpOrDown(e,t){this.filteredEmojis.length?(this.activeUpOrDownEmojis=t,e.preventDefault()):this.filteredUsersTag.length?(this.activeUpOrDownUsersTag=t,e.preventDefault()):this.filteredTemplatesText.length&&(this.activeUpOrDownTemplatesText=t,e.preventDefault())},selectItem(){this.filteredEmojis.length?this.selectEmojiItem=!0:this.filteredUsersTag.length?this.selectUsersTagItem=!0:this.filteredTemplatesText.length&&(this.selectTemplatesTextItem=!0)},selectEmoji(e){if(this.selectEmojiItem=!1,!e)return;const{position:t,endPosition:r}=this.getCharPosition(":");this.message=this.message.substr(0,t-1)+e+this.message.substr(r,this.message.length-1),this.cursorRangePosition=t,this.focusTextarea()},selectTemplateText(e){if(this.selectTemplatesTextItem=!1,!e)return;const{position:t,endPosition:r}=this.getCharPosition("/"),n=this.message.substr(r,r).length?"":" ";this.message=this.message.substr(0,t-1)+e.text+n+this.message.substr(r,this.message.length-1),this.cursorRangePosition=t+e.text.length+n.length+1,this.focusTextarea()},addEmoji(e){this.message+=e.unicode,this.focusTextarea(!0)},launchFilePicker(){this.$refs.file.value="",this.$refs.file.click()},async onFileChange(e){this.fileDialog=!0,this.focusTextarea(),Array.from(e).forEach(async t=>{const r=URL.createObjectURL(t),n=t.name.lastIndexOf(".");this.files.push({loading:!0,name:t.name.substring(0,n),size:t.size,type:t.type,extension:t.name.substring(n+1),localUrl:r});const i=await fetch(r).then(a=>a.blob());let s=this.files.find(a=>a.localUrl===r);s&&(s.blob=i,s.loading=!1,delete s.loading)}),setTimeout(()=>this.fileDialog=!1,500)},removeFile(e){this.files.splice(e,1),this.focusTextarea()},toggleRecorder(e){if(this.isRecording=e,!this.recorder.isRecording)setTimeout(()=>this.recorder.start(),200);else try{this.recorder.stop();const t=this.recorder.records[0];this.files.push({blob:t.blob,name:`audio.${this.format}`,size:t.blob.size,duration:t.duration,type:t.blob.type,audio:!0,localUrl:URL.createObjectURL(t.blob)}),this.recorder=this.initRecorder(),this.sendMessage()}catch{setTimeout(()=>this.stopRecorder(),100)}},stopRecorder(){if(this.recorder.isRecording)try{this.recorder.stop(),this.recorder=this.initRecorder()}catch{setTimeout(()=>this.stopRecorder(),100)}},textareaActionHandler(){this.$emit("textarea-action-handler",this.message)},sendMessage(){var e;let t=this.message.trim();if(!this.files.length&&!t||this.isFileLoading)return;this.selectedUsersTag.forEach(n=>{t=t.replace(`@${n.username}`,`<usertag>${n._id}</usertag>`)});const r=this.files.length?this.files:null;this.editedMessage._id?(this.editedMessage.content!==t||(e=this.editedMessage.files)!=null&&e.length||this.files.length)&&this.$emit("edit-message",{messageId:this.editedMessage._id,newContent:t,files:r,replyMessage:this.messageReply,usersTag:this.selectedUsersTag}):this.$emit("send-message",{content:t,files:r,replyMessage:this.messageReply,usersTag:this.selectedUsersTag}),this.resetMessage(!0)},editMessage(e){this.resetMessage(),this.editedMessage={...e};let t=e.content;const r=t,n="<usertag>",i="</usertag>";[...t.matchAll(new RegExp(n,"gi"))].map(a=>a.index).forEach(a=>{const o=r.substring(a+n.length,r.indexOf(i,a)),l=this.room.users.find(u=>u._id===o);t=t.replace(`${n}${o}${i}`,`@${(l==null?void 0:l.username)||"unknown"}`),this.selectUserTag(l,!0)}),this.message=t,e.files&&(this.files=[...e.files]),setTimeout(()=>this.resizeTextarea())},replyMessage(e){this.editedMessage={},this.messageReply=e,this.focusTextarea()},updateFooterLists(){this.updateFooterList("@"),this.updateFooterList(":"),this.updateFooterList("/")},updateFooterList(e){if(!this.getTextareaRef()||e===":"&&!this.emojisSuggestionEnabled||e==="@"&&(!this.userTagsEnabled||!this.room.users)||e==="/"&&!this.templatesText)return;const t=this.getTextareaRef().selectionStart;let r=t;for(;r>0&&this.message.charAt(r-1)!==e&&(this.message.charAt(r-1)!==" "||e!==":");)r--;const n=this.message.charAt(r-2),i=!n.match(/^[0-9a-zA-Z]+$/);if(this.message.charAt(r-1)===e&&(!n||n===" "||i)){const s=this.message.substring(r,t);e===":"?this.updateEmojis(s):e==="@"?this.updateShowUsersTag(s):e==="/"&&this.updateShowTemplatesText(s)}else this.resetFooterList(e)},updateShowUsersTag(e){this.filteredUsersTag=gh(this.room.users,"username",e,!0).filter(t=>t._id!==this.currentUserId)},selectUserTag(e,t=!1){if(this.selectUsersTagItem=!1,!e)return;const{position:r,endPosition:n}=this.getCharPosition("@"),i=this.message.substr(n,n).length?"":" ";this.message=this.message.substr(0,r)+e.username+i+this.message.substr(n,this.message.length-1),this.selectedUsersTag=[...this.selectedUsersTag,{...e}],t||(this.cursorRangePosition=r+e.username.length+i.length+1),this.focusTextarea()},updateShowTemplatesText(e){this.filteredTemplatesText=gh(this.templatesText,"tag",e,!0)},getCharPosition(e){let r=this.getTextareaRef().selectionStart;for(;r>0&&this.message.charAt(r-1)!==e;)r--;const n=this.getTextareaRef().selectionEnd;return{position:r,endPosition:n}},async updateEmojis(e){if(!e)return;const t=await this.emojisDB.getEmojiBySearchQuery(e);this.filteredEmojis=t.map(r=>r.unicode)},resetFooterList(e=null){e===":"?this.filteredEmojis=[]:e==="@"?this.filteredUsersTag=[]:e==="/"?this.filteredTemplatesText=[]:(this.filteredEmojis=[],this.filteredUsersTag=[],this.filteredTemplatesText=[])},resetMessage(e=!1,t=!1){t||this.$emit("typing-message",null),this.selectedUsersTag=[],this.resetFooterList(),this.resetTextareaSize(),this.message="",this.editedMessage={},this.messageReply=null,this.files=[],this.emojiOpened=!1,this.preventKeyboardFromClosing(),(this.textareaAutoFocus||!t)&&setTimeout(()=>this.focusTextarea(e))},resetTextareaSize(){this.getTextareaRef()&&(this.getTextareaRef().style.height="20px")},preventKeyboardFromClosing(){this.keepKeyboardOpen&&this.getTextareaRef().focus()},initRecorder(){return this.isRecording=!1,new ER({bitRate:Number(this.audioBitRate),sampleRate:Number(this.audioSampleRate),beforeRecording:null,afterRecording:null,pauseRecording:null,micFailed:this.micFailed})},micFailed(){this.isRecording=!1,this.recorder=this.initRecorder()}}},OR={key:0,class:"vac-icon-textarea-left"},IR=He("div",{class:"vac-dot-audio-record"},null,-1),FR={class:"vac-dot-audio-record-time"},DR=["placeholder"],HR={class:"vac-icon-textarea"},PR={key:1},jR=["multiple","accept","capture"];function NR(e,t,r,n,i,s){const a=Ge("room-emojis"),o=Ge("room-users-tag"),l=Ge("room-templates-text"),u=Ge("room-message-reply"),f=Ge("room-files"),c=Ge("svg-icon"),h=Ge("emoji-picker-container"),d=Jc("click-outside");return Gn((ye(),Te("div",{id:"room-footer",class:at(["vac-room-footer",{"vac-app-box-shadow":s.shadowFooter}])},[Ve(a,{"filtered-emojis":i.filteredEmojis,"select-item":i.selectEmojiItem,"active-up-or-down":i.activeUpOrDownEmojis,onSelectEmoji:t[0]||(t[0]=p=>s.selectEmoji(p)),onActivateItem:t[1]||(t[1]=p=>i.activeUpOrDownEmojis=0)},null,8,["filtered-emojis","select-item","active-up-or-down"]),Ve(o,{"filtered-users-tag":i.filteredUsersTag,"select-item":i.selectUsersTagItem,"active-up-or-down":i.activeUpOrDownUsersTag,onSelectUserTag:t[2]||(t[2]=p=>s.selectUserTag(p)),onActivateItem:t[3]||(t[3]=p=>i.activeUpOrDownUsersTag=0)},null,8,["filtered-users-tag","select-item","active-up-or-down"]),Ve(l,{"filtered-templates-text":i.filteredTemplatesText,"select-item":i.selectTemplatesTextItem,"active-up-or-down":i.activeUpOrDownTemplatesText,onSelectTemplateText:t[4]||(t[4]=p=>s.selectTemplateText(p)),onActivateItem:t[5]||(t[5]=p=>i.activeUpOrDownTemplatesText=0)},null,8,["filtered-templates-text","select-item","active-up-or-down"]),Ve(u,{room:r.room,"message-reply":i.messageReply,"text-formatting":r.textFormatting,"link-options":r.linkOptions,onResetMessage:s.resetMessage},Lt({_:2},[st(e.$slots,(p,v)=>({name:v,fn:Xe(_=>[Ue(e.$slots,v,Mt(kt(_)))])}))]),1032,["room","message-reply","text-formatting","link-options","onResetMessage"]),Ve(f,{files:i.files,onRemoveFile:s.removeFile,onResetMessage:s.resetMessage},Lt({_:2},[st(e.$slots,(p,v)=>({name:v,fn:Xe(_=>[Ue(e.$slots,v,Mt(kt(_)))])}))]),1032,["files","onRemoveFile","onResetMessage"]),He("div",{class:at(["vac-box-footer",{"vac-box-footer-border":!i.files.length}])},[r.showAudio&&!i.files.length?(ye(),Te("div",OR,[i.isRecording?(ye(),Te(pt,{key:0},[He("div",{class:"vac-svg-button vac-icon-audio-stop",onClick:t[6]||(t[6]=(...p)=>s.stopRecorder&&s.stopRecorder(...p))},[Ue(e.$slots,"audio-stop-icon",{},()=>[Ve(c,{name:"close-outline"})])]),IR,He("div",FR,tt(s.recordedTime),1),He("div",{class:"vac-svg-button vac-icon-audio-confirm",onClick:t[7]||(t[7]=p=>s.toggleRecorder(!1))},[Ue(e.$slots,"audio-check-icon",{},()=>[Ve(c,{name:"checkmark"})])])],64)):(ye(),Te("div",{key:1,class:"vac-svg-button",onClick:t[8]||(t[8]=p=>s.toggleRecorder(!0))},[Ue(e.$slots,"microphone-icon",{},()=>[Ve(c,{name:"microphone",class:"vac-icon-microphone"})])]))])):Ne("",!0),He("textarea",{id:"roomTextarea",ref:"roomTextarea",placeholder:r.textMessages.TYPE_MESSAGE,class:at(["vac-textarea",{"vac-textarea-outline":i.editedMessage._id}]),style:{"min-height":"20px","padding-left":"12px"},onInput:t[9]||(t[9]=(...p)=>s.onChangeInput&&s.onChangeInput(...p)),onKeydown:[t[10]||(t[10]=es((...p)=>s.escapeTextarea&&s.escapeTextarea(...p),["esc"])),t[11]||(t[11]=es(An((...p)=>s.selectItem&&s.selectItem(...p),["exact","prevent"]),["enter"])),t[13]||(t[13]=es(An(()=>{},["exact","prevent"]),["tab"])),t[14]||(t[14]=es((...p)=>s.selectItem&&s.selectItem(...p),["tab"])),t[15]||(t[15]=es(p=>s.updateActiveUpOrDown(p,-1),["up"])),t[16]||(t[16]=es(p=>s.updateActiveUpOrDown(p,1),["down"]))],onPaste:t[12]||(t[12]=(...p)=>s.onPasteImage&&s.onPasteImage(...p))},null,42,DR),He("div",HR,[i.editedMessage._id?(ye(),Te("div",{key:0,class:"vac-svg-button",onClick:t[17]||(t[17]=(...p)=>s.resetMessage&&s.resetMessage(...p))},[Ue(e.$slots,"edit-close-icon",{},()=>[Ve(c,{name:"close-outline"})])])):Ne("",!0),r.showEmojis?Gn((ye(),Te("div",PR,[Ue(e.$slots,"emoji-picker",Ad({emojiOpened:i.emojiOpened},{addEmoji:s.addEmoji}),()=>[Ve(h,{"emoji-opened":i.emojiOpened,"position-top":!0,"emoji-data-source":r.emojiDataSource,onAddEmoji:s.addEmoji,onOpenEmoji:t[18]||(t[18]=p=>i.emojiOpened=p)},{"emoji-picker-icon":Xe(()=>[Ue(e.$slots,"emoji-picker-icon")]),_:3},8,["emoji-opened","emoji-data-source","onAddEmoji"])])])),[[d,()=>i.emojiOpened=!1]]):Ne("",!0),r.showFiles?(ye(),Te("div",{key:2,class:"vac-svg-button",onClick:t[19]||(t[19]=(...p)=>s.launchFilePicker&&s.launchFilePicker(...p))},[Ue(e.$slots,"paperclip-icon",{},()=>[Ve(c,{name:"paperclip"})])])):Ne("",!0),r.textareaActionEnabled?(ye(),Te("div",{key:3,class:"vac-svg-button",onClick:t[20]||(t[20]=(...p)=>s.textareaActionHandler&&s.textareaActionHandler(...p))},[Ue(e.$slots,"custom-action-icon",{},()=>[Ve(c,{name:"deleted"})])])):Ne("",!0),r.showFiles?(ye(),Te("input",{key:4,ref:"file",type:"file",multiple:r.multipleFiles?!0:null,accept:r.acceptedFiles,capture:r.captureFiles,style:{display:"none"},onChange:t[21]||(t[21]=p=>s.onFileChange(p.target.files))},null,40,jR)):Ne("",!0),r.showSendIcon?(ye(),Te("div",{key:5,class:at(["vac-svg-button",{"vac-send-disabled":s.isMessageEmpty}]),onClick:t[22]||(t[22]=(...p)=>s.sendMessage&&s.sendMessage(...p))},[Ue(e.$slots,"send-icon",{},()=>[Ve(c,{name:"send",param:s.isMessageEmpty||s.isFileLoading?"disabled":""},null,8,["param"])])],2)):Ne("",!0)])],2)],2)),[[ru,Object.keys(r.room).length&&r.showFooter]])}var UR=Pt(BR,[["render",NR]]);const qR={name:"MessageReply",components:{AudioPlayer:Ud,SvgIcon:cr,FormatMessage:ja},props:{message:{type:Object,required:!0},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},roomUsers:{type:Array,required:!0}},computed:{replyUsername(){const{senderId:e}=this.message.replyMessage,t=this.roomUsers.find(r=>r._id===e);return t?t.username:""},firstFile(){var e,t;return(t=(e=this.message.replyMessage)==null?void 0:e.files)!=null&&t.length?this.message.replyMessage.files[0]:{}},isAudio(){return ou(this.firstFile)},isImage(){return lo(this.firstFile)},isVideo(){return Na(this.firstFile)},isOtherFile(){var e;return((e=this.message.replyMessage.files)==null?void 0:e.length)&&!this.isAudio&&!this.isVideo&&!this.isImage}}},zR={class:"vac-reply-message"},VR={class:"vac-reply-username"},$R={key:0,class:"vac-image-reply-container"},WR={key:1,class:"vac-video-reply-container"},KR={controls:""},YR=["src"],GR={key:3,class:"vac-file-container"},XR={class:"vac-text-ellipsis"},ZR={key:0,class:"vac-text-ellipsis vac-text-extension"},QR={class:"vac-reply-content"};function JR(e,t,r,n,i,s){const a=Ge("audio-player"),o=Ge("svg-icon"),l=Ge("format-message");return ye(),Te("div",zR,[He("div",VR,tt(s.replyUsername),1),s.isImage?(ye(),Te("div",$R,[He("div",{class:"vac-message-image vac-message-image-reply",style:Ut({"background-image":`url('${s.firstFile.url}')`})},null,4)])):s.isVideo?(ye(),Te("div",WR,[He("video",KR,[He("source",{src:s.firstFile.url},null,8,YR)])])):s.isAudio?(ye(),Rt(a,{key:2,src:s.firstFile.url,"message-selection-enabled":!1,onUpdateProgressTime:t[0]||(t[0]=u=>e.progressTime=u),onHoverAudioProgress:t[1]||(t[1]=u=>e.hoverAudioProgress=u)},Lt({_:2},[st(e.$slots,(u,f)=>({name:f,fn:Xe(c=>[Ue(e.$slots,f,Mt(kt(c)))])}))]),1032,["src"])):s.isOtherFile?(ye(),Te("div",GR,[He("div",null,[Ue(e.$slots,"file-icon",{},()=>[Ve(o,{name:"file"})])]),He("div",XR,tt(s.firstFile.name),1),s.firstFile.extension?(ye(),Te("div",ZR,tt(s.firstFile.extension),1)):Ne("",!0)])):Ne("",!0),He("div",QR,[Ve(l,{"message-id":r.message.replyMessage._id,content:r.message.replyMessage.content,users:r.roomUsers,"text-formatting":r.textFormatting,"link-options":r.linkOptions,reply:!0},null,8,["message-id","content","users","text-formatting","link-options"])])])}var ek=Pt(qR,[["render",JR]]);const tk={name:"ProgressBar",props:{progress:{type:Number,default:0}},data(){return{radius:35,stroke:4,normalizedRadius:27,circumference:54*Math.PI}},computed:{strokeDashoffset(){return this.circumference-this.progress/100*this.circumference}}},rk={ref:"progress",class:"vac-progress-wrapper"},nk=["height","width"],ik=["stroke-dasharray","stroke-width","r","cx","cy"],sk={class:"vac-progress-text"},ok=He("span",{class:"vac-progress-pourcent"},"%",-1);function ak(e,t,r,n,i,s){return ye(),Rt(Zt,{name:"vac-fade-spinner",appear:""},{default:Xe(()=>[He("div",rk,[(ye(),Te("svg",{height:i.radius*2,width:i.radius*2},[He("circle",{stroke:"rgba(255, 255, 255, 0.7)","stroke-dasharray":i.circumference+" "+i.circumference,style:Ut({strokeDashoffset:s.strokeDashoffset,strokeLinecap:"round"}),"stroke-width":i.stroke,fill:"transparent",r:i.normalizedRadius,cx:i.radius,cy:i.radius},null,12,ik)],8,nk)),He("div",{class:"vac-progress-content",style:Ut({height:i.radius*2-19+"px",width:i.radius*2-19+"px"})},[He("div",sk,[Xn(tt(r.progress),1),ok])],4)],512)]),_:1})}var yb=Pt(tk,[["render",ak]]);const lk={name:"MessageFile",components:{SvgIcon:cr,Loader:nu,ProgressBar:yb},props:{currentUserId:{type:[String,Number],required:!0},message:{type:Object,required:!0},file:{type:Object,required:!0},index:{type:Number,required:!0},messageSelectionEnabled:{type:Boolean,required:!0}},emits:["open-file"],data(){return{imageResponsive:"",imageLoading:!1,imageHover:!1}},computed:{isImageLoading(){return this.file.url.indexOf("blob:http")!==-1||this.imageLoading},isImage(){return lo(this.file)},isVideo(){return Na(this.file)}},watch:{file:{immediate:!0,handler(){this.checkImgLoad()}}},mounted(){const e=this.$refs["imageRef"+this.index];e&&(this.imageResponsive={maxHeight:e.clientWidth-18,loaderTop:e.clientHeight/2-9})},methods:{checkImgLoad(){if(!lo(this.file))return;this.imageLoading=!0;const e=new Image;e.src=this.file.url,e.addEventListener("load",()=>this.imageLoading=!1)},openFile(e,t){this.messageSelectionEnabled||(e.stopPropagation(),this.$emit("open-file",{file:this.file,action:t}))}}},ck={class:"vac-message-file-container"},uk={key:0,class:"vac-image-buttons"},fk={controls:""},hk=["src"];function dk(e,t,r,n,i,s){const a=Ge("progress-bar"),o=Ge("loader"),l=Ge("svg-icon");return ye(),Te("div",ck,[s.isImage?(ye(),Te("div",{key:0,ref:"imageRef"+r.index,class:"vac-message-image-container",onMouseover:t[2]||(t[2]=u=>i.imageHover=!0),onMouseleave:t[3]||(t[3]=u=>i.imageHover=!1),onClick:t[4]||(t[4]=u=>s.openFile(u,"preview"))},[r.file.progress>=0?(ye(),Rt(a,{key:0,progress:r.file.progress,style:Ut({top:`${i.imageResponsive.loaderTop}px`})},null,8,["progress","style"])):(ye(),Rt(o,{key:1,show:s.isImageLoading,type:"message-file","message-id":r.message._id,style:Ut({top:`${i.imageResponsive.loaderTop}px`})},Lt({_:2},[st(e.$slots,(u,f)=>({name:f,fn:Xe(c=>[Ue(e.$slots,f,Mt(kt(c)))])}))]),1032,["show","message-id","style"])),He("div",{class:at(["vac-message-image",{"vac-blur-loading":s.isImageLoading&&r.message.senderId===r.currentUserId}]),style:Ut({"background-image":`url('${s.isImageLoading&&r.file.preview||r.file.url}')`,"max-height":`${i.imageResponsive.maxHeight}px`})},[Ve(Zt,{name:"vac-fade-image"},{default:Xe(()=>[!r.messageSelectionEnabled&&i.imageHover&&!s.isImageLoading?(ye(),Te("div",uk,[He("div",{class:"vac-svg-button vac-button-view",onClick:t[0]||(t[0]=u=>s.openFile(u,"preview"))},[Ue(e.$slots,"eye-icon_"+r.message._id,{},()=>[Ve(l,{name:"eye"})])]),He("div",{class:"vac-svg-button vac-button-download",onClick:t[1]||(t[1]=u=>s.openFile(u,"download"))},[Ue(e.$slots,"document-icon_"+r.message._id,{},()=>[Ve(l,{name:"document"})])])])):Ne("",!0)]),_:3})],6)],544)):s.isVideo?(ye(),Te("div",{key:1,class:"vac-video-container",onClick:t[5]||(t[5]=An(u=>s.openFile(u,"preview"),["prevent"]))},[r.file.progress>=0?(ye(),Rt(a,{key:0,progress:r.file.progress},null,8,["progress"])):Ne("",!0),He("video",fk,[He("source",{src:r.file.url},null,8,hk)])])):Ne("",!0)])}var pk=Pt(lk,[["render",dk]]);const mk={name:"MessageFiles",components:{SvgIcon:cr,FormatMessage:ja,ProgressBar:yb,MessageFile:pk},props:{currentUserId:{type:[String,Number],required:!0},message:{type:Object,required:!0},roomUsers:{type:Array,required:!0},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},messageSelectionEnabled:{type:Boolean,required:!0}},emits:["open-file","open-user-tag"],computed:{imageVideoFiles(){return this.message.files.filter(e=>am(e))},otherFiles(){return this.message.files.filter(e=>!am(e))}},methods:{openFile(e,t,r){this.messageSelectionEnabled||(e.stopPropagation(),this.$emit("open-file",{file:t,action:r}))}}},_k={class:"vac-message-files-container"},gk=["onClick"],vk={class:"vac-svg-button"},yk={class:"vac-text-ellipsis"},bk={key:0,class:"vac-text-ellipsis vac-text-extension"};function wk(e,t,r,n,i,s){const a=Ge("message-file"),o=Ge("progress-bar"),l=Ge("svg-icon"),u=Ge("format-message");return ye(),Te("div",_k,[(ye(!0),Te(pt,null,st(s.imageVideoFiles,(f,c)=>(ye(),Te("div",{key:c+"iv"},[Ve(a,{file:f,"current-user-id":r.currentUserId,message:r.message,index:c,"message-selection-enabled":r.messageSelectionEnabled,onOpenFile:t[0]||(t[0]=h=>e.$emit("open-file",h))},Lt({_:2},[st(e.$slots,(h,d)=>({name:d,fn:Xe(p=>[Ue(e.$slots,d,Mt(kt(p)))])}))]),1032,["file","current-user-id","message","index","message-selection-enabled"])]))),128)),(ye(!0),Te(pt,null,st(s.otherFiles,(f,c)=>(ye(),Te("div",{key:c+"a",class:"vac-file-wrapper"},[f.progress>=0?(ye(),Rt(o,{key:0,progress:f.progress,style:{top:"44px"}},null,8,["progress"])):Ne("",!0),He("div",{class:at(["vac-file-container",{"vac-file-container-progress":f.progress>=0}]),onClick:h=>s.openFile(h,f,"download")},[He("div",vk,[Ue(e.$slots,"document-icon",{},()=>[Ve(l,{name:"document"})])]),He("div",yk,tt(f.name),1),f.extension?(ye(),Te("div",bk,tt(f.extension),1)):Ne("",!0)],10,gk)]))),128)),Ve(u,{"message-id":r.message._id,content:r.message.content,users:r.roomUsers,"text-formatting":r.textFormatting,"link-options":r.linkOptions,onOpenUserTag:t[1]||(t[1]=f=>e.$emit("open-user-tag",f))},null,8,["message-id","content","users","text-formatting","link-options"])])}var Sk=Pt(mk,[["render",wk]]);const Ck={name:"MessageActions",components:{SvgIcon:cr,EmojiPickerContainer:cb},directives:{clickOutside:su},props:{currentUserId:{type:[String,Number],required:!0},message:{type:Object,required:!0},messageActions:{type:Array,required:!0},showReactionEmojis:{type:Boolean,required:!0},messageHover:{type:Boolean,required:!0},hoverMessageId:{type:[String,Number],default:null},hoverAudioProgress:{type:Boolean,required:!0},emojiDataSource:{type:String,default:void 0}},emits:["update-emoji-opened","update-options-opened","update-message-hover","message-action-handler","send-message-reaction"],data(){return{menuOptionsTop:0,optionsOpened:!1,optionsClosing:!1,emojiOpened:!1}},computed:{isMessageActions(){return this.filteredMessageActions.length&&this.messageHover&&!this.message.deleted&&!this.message.disableActions&&!this.hoverAudioProgress},isMessageReactions(){return this.showReactionEmojis&&this.messageHover&&!this.message.deleted&&!this.message.disableReactions&&!this.hoverAudioProgress},filteredMessageActions(){return this.message.senderId===this.currentUserId?this.messageActions:this.messageActions.filter(e=>!e.onlyMe)}},watch:{emojiOpened(e){this.$emit("update-emoji-opened",e),e&&(this.optionsOpened=!1)},optionsOpened(e){this.$emit("update-options-opened",e)}},methods:{openOptions(){this.optionsClosing||(this.optionsOpened=!this.optionsOpened,this.optionsOpened&&setTimeout(()=>{const e=lb(this.$el,"#room-footer");if(!e||!this.$refs.menuOptions||!this.$refs.actionIcon)return;const t=this.$refs.menuOptions.getBoundingClientRect().height,r=this.$refs.actionIcon.getBoundingClientRect().top;e.getBoundingClientRect().top-r>t+50?this.menuOptionsTop=30:this.menuOptionsTop=-t}))},closeOptions(){this.optionsOpened=!1,this.optionsClosing=!0,this.updateMessageHover(),setTimeout(()=>this.optionsClosing=!1,100)},openEmoji(){this.emojiOpened=!this.emojiOpened},closeEmoji(){this.emojiOpened=!1,this.updateMessageHover()},updateMessageHover(){this.hoverMessageId!==this.message._id&&this.$emit("update-message-hover",!1)},messageActionHandler(e){this.closeOptions(),this.$emit("message-action-handler",e)},sendMessageReaction(e,t){this.$emit("send-message-reaction",{emoji:e,reaction:t}),this.closeEmoji()}}},xk={class:"vac-message-actions-wrapper"},Ek={key:"3"},Ak={class:"vac-menu-list"},Rk=["onClick"];function kk(e,t,r,n,i,s){const a=Ge("svg-icon"),o=Ge("emoji-picker-container"),l=Jc("click-outside");return ye(),Te("div",xk,[He("div",{class:"vac-options-container",style:Ut({display:r.hoverAudioProgress?"none":"initial",width:s.filteredMessageActions.length&&r.showReactionEmojis?"70px":"45px"})},[Ve(Td,{name:"vac-slide-left",tag:"span"},{default:Xe(()=>[s.isMessageActions||s.isMessageReactions?(ye(),Te("div",{key:"1",class:at(["vac-blur-container",{"vac-options-me":r.message.senderId===r.currentUserId}])},null,2)):Ne("",!0),s.isMessageActions?(ye(),Te("div",{ref:"actionIcon",key:"2",class:"vac-svg-button vac-message-options",onClick:t[0]||(t[0]=(...u)=>s.openOptions&&s.openOptions(...u))},[Ue(e.$slots,"dropdown-icon_"+r.message._id,{},()=>[Ve(a,{name:"dropdown",param:"message"})])],512)):Ne("",!0),s.isMessageReactions?Gn((ye(),Te("div",Ek,[Ue(e.$slots,"emoji-picker",Ad({emojiOpened:i.emojiOpened},{addEmoji:s.sendMessageReaction}),()=>[Ve(o,{class:"vac-message-emojis",style:Ut({right:s.isMessageActions?"30px":"5px"}),"emoji-opened":i.emojiOpened,"emoji-reaction":!0,"position-right":r.message.senderId===r.currentUserId,"message-id":r.message._id,"emoji-data-source":r.emojiDataSource,onAddEmoji:s.sendMessageReaction,onOpenEmoji:s.openEmoji},Lt({_:2},[st(e.$slots,(u,f)=>({name:f,fn:Xe(c=>[Ue(e.$slots,f,Mt(kt(c)))])}))]),1032,["style","emoji-opened","position-right","message-id","emoji-data-source","onAddEmoji","onOpenEmoji"])])])),[[l,s.closeEmoji]]):Ne("",!0)]),_:3})],4),s.filteredMessageActions.length?(ye(),Rt(Zt,{key:0,name:r.message.senderId===r.currentUserId?"vac-slide-left":"vac-slide-right"},{default:Xe(()=>[i.optionsOpened?Gn((ye(),Te("div",{key:0,ref:"menuOptions",class:at(["vac-menu-options",{"vac-menu-left":r.message.senderId!==r.currentUserId}]),style:Ut({top:`${i.menuOptionsTop}px`})},[He("div",Ak,[(ye(!0),Te(pt,null,st(s.filteredMessageActions,u=>(ye(),Te("div",{key:u.name},[He("div",{class:"vac-menu-item",onClick:f=>s.messageActionHandler(u)},tt(u.title),9,Rk)]))),128))])],6)),[[l,s.closeOptions]]):Ne("",!0)]),_:1},8,["name"])):Ne("",!0)])}var Tk=Pt(Ck,[["render",kk]]);const Mk={name:"MessageReactions",props:{currentUserId:{type:[String,Number],required:!0},message:{type:Object,required:!0}},emits:["send-message-reaction"],methods:{sendMessageReaction(e,t){this.$emit("send-message-reaction",{emoji:e,reaction:t})}}},Lk=["onClick"];function Bk(e,t,r,n,i,s){return r.message.deleted?Ne("",!0):(ye(),Rt(Td,{key:0,name:"vac-slide-left",tag:"span"},{default:Xe(()=>[(ye(!0),Te(pt,null,st(r.message.reactions,(a,o)=>Gn((ye(),Te("button",{key:o+0,class:at(["vac-button-reaction",{"vac-reaction-me":a.indexOf(r.currentUserId)!==-1}]),style:Ut({float:r.message.senderId===r.currentUserId?"right":"left"}),onClick:l=>s.sendMessageReaction({unicode:o},a)},[Xn(tt(o),1),He("span",null,tt(a.length),1)],14,Lk)),[[ru,a.length]])),128))]),_:1}))}var Ok=Pt(Mk,[["render",Bk]]);function Ik(e){if(!((n,i)=>i.every(s=>{let a=!1;return(s.type[0]==="array"&&Array.isArray(n[s.key])||s.type.find(o=>o===typeof n[s.key]))&&(a=!0),a&&zd(n,s.key)}))(e,[{key:"roomId",type:["string","number"]},{key:"roomName",type:["string"]},{key:"users",type:["array"]}]))throw new Error("Rooms object is not valid! Must contain at least roomId[String, Number], roomName[String] and users[Array]")}function Fk(e){if(!((n,i)=>i.every(s=>s.type.find(o=>o===typeof n[s.key])&&zd(n,s.key)))(e,[{key:"_id",type:["string","number"]},{key:"username",type:["string"]}]))throw new Error("Participants object is not valid! Must contain at least _id[String, Number] and username[String]")}function Dk(e){if(!((n,i)=>i.every(s=>s.type.find(o=>o===typeof n[s.key])&&zd(n,s.key)))(e,[{key:"_id",type:["string","number"]},{key:"senderId",type:["string","number"]}]))throw new Error("Messages object is not valid! Must contain at least _id[String, Number] and senderId[String, Number]")}function zd(e,t){return Object.prototype.hasOwnProperty.call(e,t)&&e[t]!==null&&e[t]!==void 0}const Hk={name:"RoomMessage",components:{SvgIcon:cr,FormatMessage:ja,AudioPlayer:Ud,MessageReply:ek,MessageFiles:Sk,MessageActions:Tk,MessageReactions:Ok},props:{currentUserId:{type:[String,Number],required:!0},textMessages:{type:Object,required:!0},index:{type:Number,required:!0},message:{type:Object,required:!0},messages:{type:Array,required:!0},editedMessageId:{type:[String,Number],default:null},roomUsers:{type:Array,default:()=>[]},messageActions:{type:Array,required:!0},newMessages:{type:Array,default:()=>[]},showReactionEmojis:{type:Boolean,required:!0},showNewMessagesDivider:{type:Boolean,required:!0},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},usernameOptions:{type:Object,required:!0},messageSelectionEnabled:{type:Boolean,required:!0},selectedMessages:{type:Array,default:()=>[]},emojiDataSource:{type:String,default:void 0}},emits:["message-added","open-file","open-user-tag","open-failed-message","message-action-handler","send-message-reaction","select-message","unselect-message"],data(){return{hoverMessageId:null,messageHover:!1,optionsOpened:!1,emojiOpened:!1,newMessage:{},progressTime:"- : -",hoverAudioProgress:!1}},computed:{showUsername(){return!this.usernameOptions.currentUser&&this.message.senderId===this.currentUserId?!1:this.roomUsers.length>=this.usernameOptions.minUsers},showDate(){return this.index>0&&this.message.date!==this.messages[this.index-1].date},messageOffset(){return this.index>0&&this.message.senderId!==this.messages[this.index-1].senderId},isMessageHover(){return this.editedMessageId===this.message._id||this.hoverMessageId===this.message._id},isAudio(){var e;return(e=this.message.files)==null?void 0:e.some(t=>ou(t))},isCheckmarkVisible(){return this.message.senderId===this.currentUserId&&!this.message.deleted&&(this.message.saved||this.message.distributed||this.message.seen)},hasCurrentUserAvatar(){return this.messages.some(e=>e.senderId===this.currentUserId&&e.avatar)},hasSenderUserAvatar(){return this.messages.some(e=>e.senderId!==this.currentUserId&&e.avatar)},isMessageSelected(){return this.messageSelectionEnabled&&!!this.selectedMessages.find(e=>e._id===this.message._id)}},watch:{newMessages:{immediate:!0,deep:!0,handler(e){if(!e.length||!this.showNewMessagesDivider){this.newMessage={};return}this.newMessage=e.reduce((t,r)=>r.index<t.index?r:t)}},messageSelectionEnabled(){this.resetMessageHover()}},mounted(){Dk(this.message),this.$emit("message-added",{message:this.message,index:this.index,ref:this.$refs.message})},methods:{onHoverMessage(){this.messageSelectionEnabled||(this.messageHover=!0,this.canEditMessage()&&(this.hoverMessageId=this.message._id))},canEditMessage(){return!this.message.deleted},onLeaveMessage(){this.messageSelectionEnabled||(!this.optionsOpened&&!this.emojiOpened&&(this.messageHover=!1),this.hoverMessageId=null)},resetMessageHover(){this.messageHover=!1,this.hoverMessageId=null},openFile(e){this.$emit("open-file",{message:this.message,file:e})},openUserTag(e){this.$emit("open-user-tag",{user:e})},messageActionHandler(e){this.resetMessageHover(),setTimeout(()=>{this.$emit("message-action-handler",{action:e,message:this.message})},300)},sendMessageReaction({emoji:e,reaction:t}){this.$emit("send-message-reaction",{messageId:this.message._id,reaction:e,remove:t&&t.indexOf(this.currentUserId)!==-1}),this.messageHover=!1},selectMessage(){this.messageSelectionEnabled&&(this.isMessageSelected?this.$emit("unselect-message",this.message._id):this.$emit("select-message",this.message))}}},Pk=["id"],jk={key:0,class:"vac-card-info vac-card-date"},Nk={key:1,class:"vac-line-new"},Uk={key:2,class:"vac-card-info vac-card-system"},qk={key:1,class:"vac-avatar-offset"},zk={key:0,class:"vac-progress-time"},Vk={class:"vac-text-timestamp"},$k={key:0,class:"vac-icon-edited"},Wk={key:1},Kk=He("div",{class:"vac-failure-text"},"!",-1),Yk=[Kk],Gk={key:3,class:"vac-avatar-current-offset"};function Xk(e,t,r,n,i,s){const a=Ge("format-message"),o=Ge("message-reply"),l=Ge("message-files"),u=Ge("audio-player"),f=Ge("svg-icon"),c=Ge("message-actions"),h=Ge("message-reactions");return ye(),Te("div",{id:r.message._id,ref:"message",class:"vac-message-wrapper"},[s.showDate?(ye(),Te("div",jk,tt(r.message.date),1)):Ne("",!0),i.newMessage._id===r.message._id?(ye(),Te("div",Nk,tt(r.textMessages.NEW_MESSAGES),1)):Ne("",!0),r.message.system?(ye(),Te("div",Uk,[Ue(e.$slots,"message_"+r.message._id,{},()=>[Ve(a,{"message-id":r.message._id,content:r.message.content,deleted:!!r.message.deleted,users:r.roomUsers,"text-messages":r.textMessages,"text-formatting":r.textFormatting,"link-options":r.linkOptions,onOpenUserTag:s.openUserTag},Lt({_:2},[st(e.$slots,(d,p)=>({name:p,fn:Xe(v=>[Ue(e.$slots,p,Mt(kt(v)))])}))]),1032,["message-id","content","deleted","users","text-messages","text-formatting","link-options","onOpenUserTag"])])])):(ye(),Te("div",{key:3,class:at(["vac-message-box",{"vac-offset-current":r.message.senderId===r.currentUserId}]),onClick:t[8]||(t[8]=(...d)=>s.selectMessage&&s.selectMessage(...d))},[Ue(e.$slots,"message_"+r.message._id,{},()=>[r.message.senderId!==r.currentUserId?Ue(e.$slots,"message-avatar_"+r.message._id,{key:0},()=>[r.message.avatar?(ye(),Te("div",{key:0,class:"vac-avatar",style:Ut({"background-image":`url('${r.message.avatar}')`})},null,4)):Ne("",!0)]):Ne("",!0),s.hasSenderUserAvatar&&!r.message.avatar?(ye(),Te("div",qk)):Ne("",!0),He("div",{class:at(["vac-message-container",{"vac-message-container-offset":s.messageOffset}])},[He("div",{class:at(["vac-message-card",{"vac-message-highlight":s.isMessageHover,"vac-message-current":r.message.senderId===r.currentUserId,"vac-message-deleted":r.message.deleted,"vac-item-clickable":r.messageSelectionEnabled,"vac-message-selected":s.isMessageSelected}]),onMouseover:t[5]||(t[5]=(...d)=>s.onHoverMessage&&s.onHoverMessage(...d)),onMouseleave:t[6]||(t[6]=(...d)=>s.onLeaveMessage&&s.onLeaveMessage(...d))},[s.showUsername?(ye(),Te("div",{key:0,class:at(["vac-text-username",{"vac-username-reply":!r.message.deleted&&r.message.replyMessage}])},[He("span",null,tt(r.message.username),1)],2)):Ne("",!0),!r.message.deleted&&r.message.replyMessage?(ye(),Rt(o,{key:1,message:r.message,"room-users":r.roomUsers,"text-formatting":r.textFormatting,"link-options":r.linkOptions},Lt({_:2},[st(e.$slots,(d,p)=>({name:p,fn:Xe(v=>[Ue(e.$slots,p,Mt(kt(v)))])}))]),1032,["message","room-users","text-formatting","link-options"])):Ne("",!0),r.message.deleted||!r.message.files||!r.message.files.length?(ye(),Rt(a,{key:2,"message-id":r.message._id,content:r.message.content,deleted:!!r.message.deleted,users:r.roomUsers,"text-formatting":r.textFormatting,"text-messages":r.textMessages,"link-options":r.linkOptions,onOpenUserTag:s.openUserTag},Lt({_:2},[st(e.$slots,(d,p)=>({name:p,fn:Xe(v=>[Ue(e.$slots,p,Mt(kt(v)))])}))]),1032,["message-id","content","deleted","users","text-formatting","text-messages","link-options","onOpenUserTag"])):!s.isAudio||r.message.files.length>1?(ye(),Rt(l,{key:3,"current-user-id":r.currentUserId,message:r.message,"room-users":r.roomUsers,"text-formatting":r.textFormatting,"link-options":r.linkOptions,"message-selection-enabled":r.messageSelectionEnabled,onOpenFile:s.openFile,onOpenUserTag:s.openUserTag},Lt({_:2},[st(e.$slots,(d,p)=>({name:p,fn:Xe(v=>[Ue(e.$slots,p,Mt(kt(v)))])}))]),1032,["current-user-id","message","room-users","text-formatting","link-options","message-selection-enabled","onOpenFile","onOpenUserTag"])):(ye(),Te(pt,{key:4},[Ve(u,{"message-id":r.message._id,src:r.message.files[0].url,"message-selection-enabled":r.messageSelectionEnabled,onUpdateProgressTime:t[0]||(t[0]=d=>i.progressTime=d),onHoverAudioProgress:t[1]||(t[1]=d=>i.hoverAudioProgress=d)},Lt({_:2},[st(e.$slots,(d,p)=>({name:p,fn:Xe(v=>[Ue(e.$slots,p,Mt(kt(v)))])}))]),1032,["message-id","src","message-selection-enabled"]),r.message.deleted?Ne("",!0):(ye(),Te("div",zk,tt(i.progressTime),1))],64)),He("div",Vk,[r.message.edited&&!r.message.deleted?(ye(),Te("div",$k,[Ue(e.$slots,"pencil-icon_"+r.message._id,{},()=>[Ve(f,{name:"pencil"})])])):Ne("",!0),He("span",null,tt(r.message.timestamp),1),s.isCheckmarkVisible?(ye(),Te("span",Wk,[Ue(e.$slots,"checkmark-icon_"+r.message._id,{},()=>[Ve(f,{name:r.message.distributed?"double-checkmark":"checkmark",param:r.message.seen?"seen":"",class:"vac-icon-check"},null,8,["name","param"])])])):Ne("",!0)]),Ve(c,{"current-user-id":r.currentUserId,message:r.message,"message-actions":r.messageActions,"show-reaction-emojis":r.showReactionEmojis,"message-hover":i.messageHover,"hover-message-id":i.hoverMessageId,"hover-audio-progress":i.hoverAudioProgress,"emoji-data-source":r.emojiDataSource,onUpdateMessageHover:t[2]||(t[2]=d=>i.messageHover=d),onUpdateOptionsOpened:t[3]||(t[3]=d=>i.optionsOpened=d),onUpdateEmojiOpened:t[4]||(t[4]=d=>i.emojiOpened=d),onMessageActionHandler:s.messageActionHandler,onSendMessageReaction:s.sendMessageReaction},Lt({_:2},[st(e.$slots,(d,p)=>({name:p,fn:Xe(v=>[Ue(e.$slots,p,Mt(kt(v)))])}))]),1032,["current-user-id","message","message-actions","show-reaction-emojis","message-hover","hover-message-id","hover-audio-progress","emoji-data-source","onMessageActionHandler","onSendMessageReaction"])],34),Ve(h,{"current-user-id":r.currentUserId,message:r.message,onSendMessageReaction:s.sendMessageReaction},null,8,["current-user-id","message","onSendMessageReaction"])],2),Ue(e.$slots,"message-failure_"+r.message._id,{},()=>[r.message.failure&&r.message.senderId===r.currentUserId?(ye(),Te("div",{key:0,class:at(["vac-failure-container vac-svg-button",{"vac-failure-container-avatar":r.message.avatar&&r.message.senderId===r.currentUserId}]),onClick:t[7]||(t[7]=d=>e.$emit("open-failed-message",{message:r.message}))},Yk,2)):Ne("",!0)]),r.message.senderId===r.currentUserId?Ue(e.$slots,"message-avatar_"+r.message._id,{key:2},()=>[r.message.avatar?(ye(),Te("div",{key:0,class:"vac-avatar vac-avatar-current",style:Ut({"background-image":`url('${r.message.avatar}')`})},null,4)):Ne("",!0)]):Ne("",!0),s.hasCurrentUserAvatar&&!r.message.avatar?(ye(),Te("div",Gk)):Ne("",!0)])],2))],8,Pk)}var Zk=Pt(Hk,[["render",Xk]]);const Qk={name:"ChatRoom",components:{Loader:nu,SvgIcon:cr,RoomHeader:z6,RoomFooter:UR,RoomMessage:Zk},props:{currentUserId:{type:[String,Number],required:!0},textMessages:{type:Object,required:!0},singleRoom:{type:Boolean,required:!0},showRoomsList:{type:Boolean,required:!0},isMobile:{type:Boolean,required:!0},rooms:{type:Array,required:!0},roomId:{type:[String,Number],required:!0},loadFirstRoom:{type:Boolean,required:!0},messages:{type:Array,required:!0},roomMessage:{type:String,default:null},messagesLoaded:{type:Boolean,required:!0},menuActions:{type:Array,required:!0},messageActions:{type:Array,required:!0},messageSelectionActions:{type:Array,required:!0},autoScroll:{type:Object,required:!0},showSendIcon:{type:Boolean,required:!0},showFiles:{type:Boolean,required:!0},showAudio:{type:Boolean,required:!0},audioBitRate:{type:Number,required:!0},audioSampleRate:{type:Number,required:!0},showEmojis:{type:Boolean,required:!0},showReactionEmojis:{type:Boolean,required:!0},showNewMessagesDivider:{type:Boolean,required:!0},showFooter:{type:Boolean,required:!0},acceptedFiles:{type:String,required:!0},captureFiles:{type:String,required:!0},multipleFiles:{type:Boolean,default:!0},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},loadingRooms:{type:Boolean,required:!0},roomInfoEnabled:{type:Boolean,required:!0},textareaActionEnabled:{type:Boolean,required:!0},textareaAutoFocus:{type:Boolean,required:!0},userTagsEnabled:{type:Boolean,required:!0},emojisSuggestionEnabled:{type:Boolean,required:!0},scrollDistance:{type:Number,required:!0},templatesText:{type:Array,default:null},usernameOptions:{type:Object,required:!0},emojiDataSource:{type:String,default:void 0}},emits:["toggle-rooms-list","room-info","menu-action-handler","message-selection-action-handler","edit-message","send-message","delete-message","message-action-handler","fetch-messages","send-message-reaction","typing-message","open-file","open-user-tag","open-failed-message","textarea-action-handler"],data(){return{editedMessageId:null,initReplyMessage:null,initEditMessage:null,loadingMessages:!1,observer:null,showLoader:!0,loadingMoreMessages:!1,scrollIcon:!1,scrollMessagesCount:0,newMessages:[],messageSelectionEnabled:!1,selectedMessages:[],droppedFiles:[]}},computed:{room(){return this.rooms.find(e=>e.roomId===this.roomId)||{}},showNoMessages(){return this.roomId&&!this.messages.length&&!this.loadingMessages&&!this.loadingRooms},showNoRoom(){const e=!this.rooms.length&&!this.loadingRooms||!this.roomId&&!this.loadFirstRoom;return e&&this.updateLoadingMessages(!1),e},showMessagesStarted(){return this.messages.length&&this.messagesLoaded}},watch:{roomId:{immediate:!0,handler(){this.onRoomChanged()}},messages:{deep:!0,handler(e,t){e.forEach((r,n)=>{this.showNewMessagesDivider&&!r.seen&&r.senderId!==this.currentUserId&&this.newMessages.push({_id:r._id,index:n})}),(t==null?void 0:t.length)===(e==null?void 0:e.length)-1&&(this.newMessages=[]),setTimeout(()=>this.loadingMoreMessages=!1)}},messagesLoaded(e){e&&this.updateLoadingMessages(!1)}},mounted(){this.newMessages=[]},methods:{updateLoadingMessages(e){this.loadingMessages=e,e||setTimeout(()=>this.initIntersectionObserver())},initIntersectionObserver(){this.observer&&(this.showLoader=!0,this.observer.disconnect());const e=this.$el.querySelector("#infinite-loader-messages");if(e){const t={root:this.$el.querySelector("#messages-list"),rootMargin:`${this.scrollDistance}px`,threshold:0};this.observer=new IntersectionObserver(r=>{r[0].isIntersecting&&this.loadMoreMessages()},t),this.observer.observe(e)}},preventTopScroll(){const e=this.$refs.scrollContainer,t=e.scrollHeight,r=new ResizeObserver(i=>{e.scrollHeight!==t&&this.$refs.scrollContainer&&(this.$refs.scrollContainer.scrollTo({top:e.scrollHeight-t}),r.disconnect())});for(var n=0;n<e.children.length;n++)r.observe(e.children[n])},touchStart(e){if(!this.singleRoom&&e.changedTouches.length===1){const t=e.changedTouches[0].clientX,r=e.changedTouches[0].clientY;addEventListener("touchend",n=>this.touchEnd(n,t,r),{once:!0})}},touchEnd(e,t,r){if(e.changedTouches.length===1){const n=e.changedTouches[0].clientX,i=e.changedTouches[0].clientY,s=n-t>100,a=Math.abs(i-r)>50;s&&!a&&this.$emit("toggle-rooms-list")}},onRoomChanged(){this.updateLoadingMessages(!0),this.scrollIcon=!1,this.scrollMessagesCount=0,this.resetMessageSelection();const e=this.$watch(()=>this.messages,t=>{if(!t||!t.length)return;const r=this.$refs.scrollContainer;r&&(e(),setTimeout(()=>{r.scrollTo({top:r.scrollHeight}),this.updateLoadingMessages(!1)}))})},resetMessageSelection(){this.messageSelectionEnabled=!1,this.selectedMessages=[]},selectMessage(e){this.selectedMessages.push(e)},unselectMessage(e){this.selectedMessages=this.selectedMessages.filter(t=>t._id!==e)},onMessageAdded({message:e,index:t,ref:r}){if(t!==this.messages.length-1)return;const n=r.offsetHeight+60;setTimeout(()=>{const i=this.$refs.scrollContainer;let s=!1;i&&(s=this.getBottomScroll(i)>n),e.senderId===this.currentUserId?s?this.autoScroll.send.newAfterScrollUp&&this.scrollToBottom():this.autoScroll.send.new&&this.scrollToBottom():s?this.autoScroll.receive.newAfterScrollUp?this.scrollToBottom():(this.scrollIcon=!0,this.scrollMessagesCount++):this.autoScroll.receive.new?this.scrollToBottom():(this.scrollIcon=!0,this.scrollMessagesCount++)})},onContainerScroll(e){if(!e.target)return;const t=this.getBottomScroll(e.target);t<60&&(this.scrollMessagesCount=0),this.scrollIcon=t>500||this.scrollMessagesCount},loadMoreMessages(){this.loadingMessages||setTimeout(()=>{if(!this.loadingMoreMessages){if(this.messagesLoaded||!this.roomId){this.loadingMoreMessages=!1,this.showLoader=!1;return}this.preventTopScroll(),this.$emit("fetch-messages"),this.loadingMoreMessages=!0}},500)},messageActionHandler({action:e,message:t}){switch(e.name){case"replyMessage":this.initReplyMessage=t,setTimeout(()=>{this.initReplyMessage=null});return;case"editMessage":this.initEditMessage=t,setTimeout(()=>{this.initEditMessage=null});return;case"deleteMessage":return this.$emit("delete-message",t);case"selectMessages":this.selectedMessages=[t],this.messageSelectionEnabled=!0;return;default:return this.$emit("message-action-handler",{action:e,message:t})}},messageSelectionActionHandler(e){this.$emit("message-selection-action-handler",{action:e,messages:this.selectedMessages}),this.resetMessageSelection()},sendMessageReaction(e){this.$emit("send-message-reaction",e)},getBottomScroll(e){const{scrollHeight:t,clientHeight:r,scrollTop:n}=e;return t-r-n},scrollToBottom(){setTimeout(()=>{const e=this.$refs.scrollContainer;e&&(e.classList.add("vac-scroll-smooth"),e.scrollTo({top:e.scrollHeight,behavior:"smooth"}),setTimeout(()=>e.classList.remove("vac-scroll-smooth")))},50)},openFile({message:e,file:t}){this.$emit("open-file",{message:e,file:t})},openUserTag(e){this.$emit("open-user-tag",e)},onDropFiles(e){this.showFiles&&(this.droppedFiles=e.dataTransfer.files)}}},Jk={class:"vac-container-center vac-room-empty"},eT={class:"vac-messages-container"},tT={key:0,class:"vac-text-started"},rT={key:1,class:"vac-text-started"},nT={key:0,id:"infinite-loader-messages"},iT={key:2},sT={key:0,class:"vac-badge-counter vac-messages-count"};function oT(e,t,r,n,i,s){const a=Ge("room-header"),o=Ge("loader"),l=Ge("room-message"),u=Ge("svg-icon"),f=Ge("room-footer");return Gn((ye(),Te("div",{class:"vac-col-messages",onDrop:t[12]||(t[12]=An((...c)=>s.onDropFiles&&s.onDropFiles(...c),["prevent"])),onDragenter:t[13]||(t[13]=An(()=>{},["prevent"])),onDragover:t[14]||(t[14]=An(()=>{},["prevent"])),onDragleave:t[15]||(t[15]=An(()=>{},["prevent"])),onTouchstart:t[16]||(t[16]=(...c)=>s.touchStart&&s.touchStart(...c))},[s.showNoRoom?Ue(e.$slots,"no-room-selected",{key:0},()=>[He("div",Jk,[He("div",null,tt(r.textMessages.ROOM_EMPTY),1)])]):(ye(),Rt(a,{key:1,"current-user-id":r.currentUserId,"text-messages":r.textMessages,"single-room":r.singleRoom,"show-rooms-list":r.showRoomsList,"is-mobile":r.isMobile,"room-info-enabled":r.roomInfoEnabled,"menu-actions":r.menuActions,room:s.room,"message-selection-enabled":i.messageSelectionEnabled,"message-selection-actions":r.messageSelectionActions,"selected-messages-total":i.selectedMessages.length,onToggleRoomsList:t[0]||(t[0]=c=>e.$emit("toggle-rooms-list")),onRoomInfo:t[1]||(t[1]=c=>e.$emit("room-info")),onMenuActionHandler:t[2]||(t[2]=c=>e.$emit("menu-action-handler",c)),onMessageSelectionActionHandler:s.messageSelectionActionHandler,onCancelMessageSelection:t[3]||(t[3]=c=>i.messageSelectionEnabled=!1)},Lt({_:2},[st(e.$slots,(c,h)=>({name:h,fn:Xe(d=>[Ue(e.$slots,h,Mt(kt(d)))])}))]),1032,["current-user-id","text-messages","single-room","show-rooms-list","is-mobile","room-info-enabled","menu-actions","room","message-selection-enabled","message-selection-actions","selected-messages-total","onMessageSelectionActionHandler"])),He("div",{id:"messages-list",ref:"scrollContainer",class:"vac-container-scroll",onScroll:t[5]||(t[5]=(...c)=>s.onContainerScroll&&s.onContainerScroll(...c))},[Ve(o,{show:i.loadingMessages,type:"messages"},Lt({_:2},[st(e.$slots,(c,h)=>({name:h,fn:Xe(d=>[Ue(e.$slots,h,Mt(kt(d)))])}))]),1032,["show"]),He("div",eT,[He("div",{class:at({"vac-messages-hidden":i.loadingMessages})},[Ve(Zt,{name:"vac-fade-message"},{default:Xe(()=>[He("div",null,[s.showNoMessages?(ye(),Te("div",tT,[Ue(e.$slots,"messages-empty",{},()=>[Xn(tt(r.textMessages.MESSAGES_EMPTY),1)])])):Ne("",!0),s.showMessagesStarted?(ye(),Te("div",rT,tt(r.textMessages.CONVERSATION_STARTED)+" "+tt(r.messages[0].date),1)):Ne("",!0)])]),_:3}),r.messages.length&&!r.messagesLoaded?(ye(),Te("div",nT,[Ve(o,{show:!0,infinite:!0,type:"infinite-messages"},Lt({_:2},[st(e.$slots,(c,h)=>({name:h,fn:Xe(d=>[Ue(e.$slots,h,Mt(kt(d)))])}))]),1024)])):Ne("",!0),(ye(),Rt(Td,{key:r.roomId,name:"vac-fade-message",tag:"span"},{default:Xe(()=>[(ye(!0),Te(pt,null,st(r.messages,(c,h)=>(ye(),Te("div",{key:c.indexId||c._id},[Ve(l,{"current-user-id":r.currentUserId,message:c,index:h,messages:r.messages,"edited-message-id":i.editedMessageId,"message-actions":r.messageActions,"room-users":s.room.users,"text-messages":r.textMessages,"new-messages":i.newMessages,"show-reaction-emojis":r.showReactionEmojis,"show-new-messages-divider":r.showNewMessagesDivider,"text-formatting":r.textFormatting,"link-options":r.linkOptions,"username-options":r.usernameOptions,"message-selection-enabled":i.messageSelectionEnabled,"selected-messages":i.selectedMessages,"emoji-data-source":r.emojiDataSource,onMessageAdded:s.onMessageAdded,onMessageActionHandler:s.messageActionHandler,onOpenFile:s.openFile,onOpenUserTag:s.openUserTag,onOpenFailedMessage:t[4]||(t[4]=d=>e.$emit("open-failed-message",d)),onSendMessageReaction:s.sendMessageReaction,onSelectMessage:s.selectMessage,onUnselectMessage:s.unselectMessage},Lt({_:2},[st(e.$slots,(d,p)=>({name:p,fn:Xe(v=>[Ue(e.$slots,p,Mt(kt(v)))])}))]),1032,["current-user-id","message","index","messages","edited-message-id","message-actions","room-users","text-messages","new-messages","show-reaction-emojis","show-new-messages-divider","text-formatting","link-options","username-options","message-selection-enabled","selected-messages","emoji-data-source","onMessageAdded","onMessageActionHandler","onOpenFile","onOpenUserTag","onSendMessageReaction","onSelectMessage","onUnselectMessage"])]))),128))]),_:3}))],2)])],544),i.loadingMessages?Ne("",!0):(ye(),Te("div",iT,[Ve(Zt,{name:"vac-bounce"},{default:Xe(()=>[i.scrollIcon?(ye(),Te("div",{key:0,class:"vac-icon-scroll",onClick:t[6]||(t[6]=(...c)=>s.scrollToBottom&&s.scrollToBottom(...c))},[Ve(Zt,{name:"vac-bounce"},{default:Xe(()=>[i.scrollMessagesCount?(ye(),Te("div",sT,tt(i.scrollMessagesCount),1)):Ne("",!0)]),_:1}),Ue(e.$slots,"scroll-icon",{},()=>[Ve(u,{name:"dropdown",param:"scroll"})])])):Ne("",!0)]),_:3})])),Ve(f,{room:s.room,"room-id":r.roomId,"room-message":r.roomMessage,"text-messages":r.textMessages,"show-send-icon":r.showSendIcon,"show-files":r.showFiles,"show-audio":r.showAudio,"show-emojis":r.showEmojis,"show-footer":r.showFooter,"accepted-files":r.acceptedFiles,"capture-files":r.captureFiles,"multiple-files":r.multipleFiles,"textarea-action-enabled":r.textareaActionEnabled,"textarea-auto-focus":r.textareaAutoFocus,"user-tags-enabled":r.userTagsEnabled,"emojis-suggestion-enabled":r.emojisSuggestionEnabled,"templates-text":r.templatesText,"text-formatting":r.textFormatting,"link-options":r.linkOptions,"audio-bit-rate":r.audioBitRate,"audio-sample-rate":r.audioSampleRate,"init-reply-message":i.initReplyMessage,"init-edit-message":i.initEditMessage,"dropped-files":i.droppedFiles,"emoji-data-source":r.emojiDataSource,onUpdateEditedMessageId:t[7]||(t[7]=c=>i.editedMessageId=c),onEditMessage:t[8]||(t[8]=c=>e.$emit("edit-message",c)),onSendMessage:t[9]||(t[9]=c=>e.$emit("send-message",c)),onTypingMessage:t[10]||(t[10]=c=>e.$emit("typing-message",c)),onTextareaActionHandler:t[11]||(t[11]=c=>e.$emit("textarea-action-handler",c))},Lt({_:2},[st(e.$slots,(c,h)=>({name:h,fn:Xe(d=>[Ue(e.$slots,h,Mt(kt(d)))])}))]),1032,["room","room-id","room-message","text-messages","show-send-icon","show-files","show-audio","show-emojis","show-footer","accepted-files","capture-files","multiple-files","textarea-action-enabled","textarea-auto-focus","user-tags-enabled","emojis-suggestion-enabled","templates-text","text-formatting","link-options","audio-bit-rate","audio-sample-rate","init-reply-message","init-edit-message","dropped-files","emoji-data-source"])],544)),[[ru,r.isMobile&&!r.showRoomsList||!r.isMobile||r.singleRoom]])}var aT=Pt(Qk,[["render",oT]]);const lT={name:"MediaPreview",components:{SvgIcon:cr},props:{file:{type:Object,required:!0}},emits:["close-media-preview"],computed:{isImage(){return lo(this.file)},isVideo(){return Na(this.file)}},mounted(){this.$refs.modal.focus()},methods:{closeModal(){this.$emit("close-media-preview")}}},cT={key:0,class:"vac-media-preview-container"},uT={key:1,class:"vac-media-preview-container"},fT={controls:"",autoplay:""},hT=["src"],dT={class:"vac-svg-button"};function pT(e,t,r,n,i,s){const a=Ge("svg-icon");return ye(),Te("div",{ref:"modal",tabindex:"0",class:"vac-media-preview",onClick:t[0]||(t[0]=An((...o)=>s.closeModal&&s.closeModal(...o),["stop"])),onKeydown:t[1]||(t[1]=es((...o)=>s.closeModal&&s.closeModal(...o),["esc"]))},[Ve(Zt,{name:"vac-bounce-preview",appear:""},{default:Xe(()=>[s.isImage?(ye(),Te("div",cT,[He("div",{class:"vac-image-preview",style:Ut({"background-image":`url('${r.file.url}')`})},null,4)])):s.isVideo?(ye(),Te("div",uT,[He("video",fT,[He("source",{src:r.file.url},null,8,hT)])])):Ne("",!0)]),_:1}),He("div",dT,[Ue(e.$slots,"preview-close-icon",{},()=>[Ve(a,{name:"close-outline",param:"preview"})])])],544)}var mT=Pt(lT,[["render",pT]]),_T={ROOMS_EMPTY:"No rooms",ROOM_EMPTY:"No room selected",NEW_MESSAGES:"New Messages",MESSAGE_DELETED:"This message was deleted",MESSAGES_EMPTY:"No messages",CONVERSATION_STARTED:"Conversation started on:",TYPE_MESSAGE:"Type message",SEARCH:"Search",IS_ONLINE:"is online",LAST_SEEN:"last seen ",IS_TYPING:"is writing...",CANCEL_SELECT_MESSAGE:"Cancel"};const gT={light:{general:{color:"#0a0a0a",colorButtonClear:"#1976d2",colorButton:"#fff",backgroundColorButton:"#1976d2",backgroundInput:"#fff",colorPlaceholder:"#9ca6af",colorCaret:"#1976d2",colorSpinner:"#333",borderStyle:"1px solid #e1e4e8",backgroundScrollIcon:"#fff"},container:{border:"none",borderRadius:"4px",boxShadow:"0px 1px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)"},header:{background:"#fff",colorRoomName:"#0a0a0a",colorRoomInfo:"#9ca6af",position:"absolute",width:"100%"},footer:{background:"#f8f9fa",borderStyleInput:"1px solid #e1e4e8",borderInputSelected:"#1976d2",backgroundReply:"#e5e5e6",backgroundTagActive:"#e5e5e6",backgroundTag:"#f8f9fa"},content:{background:"#f8f9fa"},sidemenu:{background:"#fff",backgroundHover:"#f6f6f6",backgroundActive:"#e5effa",colorActive:"#1976d2",borderColorSearch:"#e1e5e8"},dropdown:{background:"#fff",backgroundHover:"#f6f6f6"},message:{background:"#fff",backgroundMe:"#ccf2cf",color:"#0a0a0a",colorStarted:"#9ca6af",backgroundDeleted:"#dadfe2",backgroundSelected:"#c2dcf2",colorDeleted:"#757e85",colorUsername:"#9ca6af",colorTimestamp:"#828c94",backgroundDate:"#e5effa",colorDate:"#505a62",backgroundSystem:"#e5effa",colorSystem:"#505a62",backgroundMedia:"rgba(0, 0, 0, 0.15)",backgroundReply:"rgba(0, 0, 0, 0.08)",colorReplyUsername:"#0a0a0a",colorReply:"#6e6e6e",colorTag:"#0d579c",backgroundImage:"#ddd",colorNewMessages:"#1976d2",backgroundScrollCounter:"#0696c7",colorScrollCounter:"#fff",backgroundReaction:"#eee",borderStyleReaction:"1px solid #eee",backgroundReactionHover:"#fff",borderStyleReactionHover:"1px solid #ddd",colorReactionCounter:"#0a0a0a",backgroundReactionMe:"#cfecf5",borderStyleReactionMe:"1px solid #3b98b8",backgroundReactionHoverMe:"#cfecf5",borderStyleReactionHoverMe:"1px solid #3b98b8",colorReactionCounterMe:"#0b59b3",backgroundAudioRecord:"#eb4034",backgroundAudioLine:"rgba(0, 0, 0, 0.15)",backgroundAudioProgress:"#455247",backgroundAudioProgressSelector:"#455247",colorFileExtension:"#757e85"},markdown:{background:"rgba(239, 239, 239, 0.7)",border:"rgba(212, 212, 212, 0.9)",color:"#e01e5a",colorMulti:"#0a0a0a"},room:{colorUsername:"#0a0a0a",colorMessage:"#67717a",colorTimestamp:"#a2aeb8",colorStateOnline:"#4caf50",colorStateOffline:"#9ca6af",backgroundCounterBadge:"#0696c7",colorCounterBadge:"#fff"},emoji:{background:"#fff"},icons:{search:"#9ca6af",add:"#1976d2",toggle:"#0a0a0a",menu:"#0a0a0a",close:"#9ca6af",closeImage:"#fff",file:"#1976d2",paperclip:"#1976d2",closeOutline:"#000",closePreview:"#fff",send:"#1976d2",sendDisabled:"#9ca6af",emoji:"#1976d2",emojiReaction:"rgba(0, 0, 0, 0.3)",document:"#1976d2",pencil:"#9e9e9e",checkmark:"#9e9e9e",checkmarkSeen:"#0696c7",eye:"#fff",dropdownMessage:"#fff",dropdownMessageBackground:"rgba(0, 0, 0, 0.25)",dropdownRoom:"#9e9e9e",dropdownScroll:"#0a0a0a",microphone:"#1976d2",audioPlay:"#455247",audioPause:"#455247",audioCancel:"#eb4034",audioConfirm:"#1ba65b"}},dark:{general:{color:"#fff",colorButtonClear:"#fff",colorButton:"#fff",backgroundColorButton:"#1976d2",backgroundInput:"#202223",colorPlaceholder:"#596269",colorCaret:"#fff",colorSpinner:"#fff",borderStyle:"none",backgroundScrollIcon:"#fff"},container:{border:"none",borderRadius:"4px",boxShadow:"0px 1px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)"},header:{background:"#181a1b",colorRoomName:"#fff",colorRoomInfo:"#9ca6af",position:"absolute",width:"100%"},footer:{background:"#131415",borderStyleInput:"none",borderInputSelected:"#1976d2",backgroundReply:"#1b1c1c",backgroundTagActive:"#1b1c1c",backgroundTag:"#131415"},content:{background:"#131415"},sidemenu:{background:"#181a1b",backgroundHover:"#202224",backgroundActive:"#151617",colorActive:"#fff",borderColorSearch:"#181a1b"},dropdown:{background:"#2a2c33",backgroundHover:"#26282e"},message:{background:"#22242a",backgroundMe:"#1f7e80",color:"#fff",colorStarted:"#9ca6af",backgroundDeleted:"#1b1c21",backgroundSelected:"#c2dcf2",colorDeleted:"#a2a5a8",colorUsername:"#b3bac9",colorTimestamp:"#ebedf2",backgroundDate:"rgba(0, 0, 0, 0.3)",colorDate:"#bec5cc",backgroundSystem:"rgba(0, 0, 0, 0.3)",colorSystem:"#bec5cc",backgroundMedia:"rgba(0, 0, 0, 0.18)",backgroundReply:"rgba(0, 0, 0, 0.18)",colorReplyUsername:"#fff",colorReply:"#d6d6d6",colorTag:"#f0c60a",backgroundImage:"#ddd",colorNewMessages:"#fff",backgroundScrollCounter:"#1976d2",colorScrollCounter:"#fff",backgroundReaction:"none",borderStyleReaction:"none",backgroundReactionHover:"#202223",borderStyleReactionHover:"none",colorReactionCounter:"#fff",backgroundReactionMe:"#4e9ad1",borderStyleReactionMe:"none",backgroundReactionHoverMe:"#4e9ad1",borderStyleReactionHoverMe:"none",colorReactionCounterMe:"#fff",backgroundAudioRecord:"#eb4034",backgroundAudioLine:"rgba(255, 255, 255, 0.15)",backgroundAudioProgress:"#b7d4d3",backgroundAudioProgressSelector:"#b7d4d3",colorFileExtension:"#a2a5a8"},markdown:{background:"rgba(239, 239, 239, 0.7)",border:"rgba(212, 212, 212, 0.9)",color:"#e01e5a",colorMulti:"#0a0a0a"},room:{colorUsername:"#fff",colorMessage:"#6c7278",colorTimestamp:"#6c7278",colorStateOnline:"#4caf50",colorStateOffline:"#596269",backgroundCounterBadge:"#1976d2",colorCounterBadge:"#fff"},emoji:{background:"#343740"},icons:{search:"#596269",add:"#fff",toggle:"#fff",menu:"#fff",close:"#9ca6af",closeImage:"#fff",file:"#1976d2",paperclip:"#fff",closeOutline:"#fff",closePreview:"#fff",send:"#fff",sendDisabled:"#646a70",emoji:"#fff",emojiReaction:"#fff",document:"#1976d2",pencil:"#ebedf2",checkmark:"#ebedf2",checkmarkSeen:"#f0d90a",eye:"#fff",dropdownMessage:"#fff",dropdownMessageBackground:"rgba(0, 0, 0, 0.25)",dropdownRoom:"#fff",dropdownScroll:"#0a0a0a",microphone:"#fff",audioPlay:"#b7d4d3",audioPause:"#b7d4d3",audioCancel:"#eb4034",audioConfirm:"#1ba65b"}}},vT=({general:e,container:t,header:r,footer:n,sidemenu:i,content:s,dropdown:a,message:o,markdown:l,room:u,emoji:f,icons:c})=>({"--chat-color":e.color,"--chat-color-button-clear":e.colorButtonClear,"--chat-color-button":e.colorButton,"--chat-bg-color-button":e.backgroundColorButton,"--chat-bg-color-input":e.backgroundInput,"--chat-color-spinner":e.colorSpinner,"--chat-color-placeholder":e.colorPlaceholder,"--chat-color-caret":e.colorCaret,"--chat-border-style":e.borderStyle,"--chat-bg-scroll-icon":e.backgroundScrollIcon,"--chat-container-border":t.border,"--chat-container-border-radius":t.borderRadius,"--chat-container-box-shadow":t.boxShadow,"--chat-header-bg-color":r.background,"--chat-header-color-name":r.colorRoomName,"--chat-header-color-info":r.colorRoomInfo,"--chat-header-position":r.position,"--chat-header-width":r.width,"--chat-footer-bg-color":n.background,"--chat-border-style-input":n.borderStyleInput,"--chat-border-color-input-selected":n.borderInputSelected,"--chat-footer-bg-color-reply":n.backgroundReply,"--chat-footer-bg-color-tag-active":n.backgroundTagActive,"--chat-footer-bg-color-tag":n.backgroundTag,"--chat-content-bg-color":s.background,"--chat-sidemenu-bg-color":i.background,"--chat-sidemenu-bg-color-hover":i.backgroundHover,"--chat-sidemenu-bg-color-active":i.backgroundActive,"--chat-sidemenu-color-active":i.colorActive,"--chat-sidemenu-border-color-search":i.borderColorSearch,"--chat-dropdown-bg-color":a.background,"--chat-dropdown-bg-color-hover":a.backgroundHover,"--chat-message-bg-color":o.background,"--chat-message-bg-color-me":o.backgroundMe,"--chat-message-color-started":o.colorStarted,"--chat-message-bg-color-deleted":o.backgroundDeleted,"--chat-message-bg-color-selected":o.backgroundSelected,"--chat-message-color-deleted":o.colorDeleted,"--chat-message-color-username":o.colorUsername,"--chat-message-color-timestamp":o.colorTimestamp,"--chat-message-bg-color-date":o.backgroundDate,"--chat-message-color-date":o.colorDate,"--chat-message-bg-color-system":o.backgroundSystem,"--chat-message-color-system":o.colorSystem,"--chat-message-color":o.color,"--chat-message-bg-color-media":o.backgroundMedia,"--chat-message-bg-color-reply":o.backgroundReply,"--chat-message-color-reply-username":o.colorReplyUsername,"--chat-message-color-reply-content":o.colorReply,"--chat-message-color-tag":o.colorTag,"--chat-message-bg-color-image":o.backgroundImage,"--chat-message-color-new-messages":o.colorNewMessages,"--chat-message-bg-color-scroll-counter":o.backgroundScrollCounter,"--chat-message-color-scroll-counter":o.colorScrollCounter,"--chat-message-bg-color-reaction":o.backgroundReaction,"--chat-message-border-style-reaction":o.borderStyleReaction,"--chat-message-bg-color-reaction-hover":o.backgroundReactionHover,"--chat-message-border-style-reaction-hover":o.borderStyleReactionHover,"--chat-message-color-reaction-counter":o.colorReactionCounter,"--chat-message-bg-color-reaction-me":o.backgroundReactionMe,"--chat-message-border-style-reaction-me":o.borderStyleReactionMe,"--chat-message-bg-color-reaction-hover-me":o.backgroundReactionHoverMe,"--chat-message-border-style-reaction-hover-me":o.borderStyleReactionHoverMe,"--chat-message-color-reaction-counter-me":o.colorReactionCounterMe,"--chat-message-bg-color-audio-record":o.backgroundAudioRecord,"--chat-message-bg-color-audio-line":o.backgroundAudioLine,"--chat-message-bg-color-audio-progress":o.backgroundAudioProgress,"--chat-message-bg-color-audio-progress-selector":o.backgroundAudioProgressSelector,"--chat-message-color-file-extension":o.colorFileExtension,"--chat-markdown-bg":l.background,"--chat-markdown-border":l.border,"--chat-markdown-color":l.color,"--chat-markdown-color-multi":l.colorMulti,"--chat-room-color-username":u.colorUsername,"--chat-room-color-message":u.colorMessage,"--chat-room-color-timestamp":u.colorTimestamp,"--chat-room-color-online":u.colorStateOnline,"--chat-room-color-offline":u.colorStateOffline,"--chat-room-bg-color-badge":u.backgroundCounterBadge,"--chat-room-color-badge":u.colorCounterBadge,"--chat-emoji-bg-color":f.background,"--chat-icon-color-search":c.search,"--chat-icon-color-add":c.add,"--chat-icon-color-toggle":c.toggle,"--chat-icon-color-menu":c.menu,"--chat-icon-color-close":c.close,"--chat-icon-color-close-image":c.closeImage,"--chat-icon-color-file":c.file,"--chat-icon-color-paperclip":c.paperclip,"--chat-icon-color-close-outline":c.closeOutline,"--chat-icon-color-close-preview":c.closePreview,"--chat-icon-color-send":c.send,"--chat-icon-color-send-disabled":c.sendDisabled,"--chat-icon-color-emoji":c.emoji,"--chat-icon-color-emoji-reaction":c.emojiReaction,"--chat-icon-color-document":c.document,"--chat-icon-color-pencil":c.pencil,"--chat-icon-color-checkmark":c.checkmark,"--chat-icon-color-checkmark-seen":c.checkmarkSeen,"--chat-icon-color-eye":c.eye,"--chat-icon-color-dropdown-message":c.dropdownMessage,"--chat-icon-bg-dropdown-message":c.dropdownMessageBackground,"--chat-icon-color-dropdown-room":c.dropdownRoom,"--chat-icon-color-dropdown-scroll":c.dropdownScroll,"--chat-icon-color-microphone":c.microphone,"--chat-icon-color-audio-play":c.audioPlay,"--chat-icon-color-audio-pause":c.audioPause,"--chat-icon-color-audio-cancel":c.audioCancel,"--chat-icon-color-audio-confirm":c.audioConfirm});var yT=`.vac-fade-spinner-enter-from{opacity:0}.vac-fade-spinner-enter-active{transition:opacity .8s}.vac-fade-spinner-leave-active{transition:opacity .2s;opacity:0}.vac-fade-image-enter-from{opacity:0}.vac-fade-image-enter-active{transition:opacity 1s}.vac-fade-image-leave-active{transition:opacity .5s;opacity:0}.vac-fade-message-enter-from{opacity:0}.vac-fade-message-enter-active{transition:opacity .5s}.vac-fade-message-leave-active{transition:opacity .2s;opacity:0}.vac-slide-left-enter-active,.vac-slide-right-enter-active{transition:all .3s ease;transition-property:transform,opacity}.vac-slide-left-leave-active,.vac-slide-right-leave-active{transition:all .2s cubic-bezier(1,.5,.8,1)!important;transition-property:transform,opacity}.vac-slide-left-enter-from,.vac-slide-left-leave-to{transform:translate(10px);opacity:0}.vac-slide-right-enter-from,.vac-slide-right-leave-to{transform:translate(-10px);opacity:0}.vac-slide-up-enter-active{transition:all .3s ease}.vac-slide-up-leave-active{transition:all .2s cubic-bezier(1,.5,.8,1)}.vac-slide-up-enter-from,.vac-slide-up-leave-to{transform:translateY(10px);opacity:0}.vac-bounce-enter-active{animation:vac-bounce-in .5s}.vac-bounce-leave-active{animation:vac-bounce-in .3s reverse}@keyframes vac-bounce-in{0%{transform:scale(0)}50%{transform:scale(1.05)}to{transform:scale(1)}}.vac-fade-preview-enter{opacity:0}.vac-fade-preview-enter-active{transition:opacity .1s}.vac-fade-preview-leave-active{transition:opacity .2s;opacity:0}.vac-bounce-preview-enter-active{animation:vac-bounce-image-in .4s}.vac-bounce-preview-leave-active{animation:vac-bounce-image-in .3s reverse}@keyframes vac-bounce-image-in{0%{transform:scale(.6)}to{transform:scale(1)}}.vac-menu-list{border-radius:4px;display:block;cursor:pointer;background:var(--chat-dropdown-bg-color);padding:6px 0}.vac-menu-list :hover{background:var(--chat-dropdown-bg-color-hover);transition:background-color .3s cubic-bezier(.25,.8,.5,1)}.vac-menu-list :not(:hover){transition:background-color .3s cubic-bezier(.25,.8,.5,1)}.vac-menu-item{-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-ms-flex:1 1 100%;flex:1 1 100%;min-height:30px;padding:5px 16px;position:relative;white-space:nowrap;line-height:30px}.vac-menu-options{position:absolute;right:10px;top:20px;z-index:9999;min-width:150px;display:inline-block;border-radius:4px;font-size:14px;color:var(--chat-color);overflow-y:auto;overflow-x:hidden;contain:content;box-shadow:0 2px 2px -4px #0000001a,0 2px 2px 1px #0000001f,0 1px 8px 1px #0000001f}.vac-app-border{border:var(--chat-border-style)}.vac-app-border-t{border-top:var(--chat-border-style)}.vac-app-border-r{border-right:var(--chat-border-style)}.vac-app-border-b{border-bottom:var(--chat-border-style)}.vac-app-box-shadow{transition:all .5s;box-shadow:0 2px 2px -4px #0000001a,0 2px 2px 1px #0000001f,0 1px 8px 1px #0000001f}.vac-item-clickable{cursor:pointer}.vac-vertical-center{display:flex;align-items:center;height:100%}.vac-vertical-center .vac-vertical-container{width:100%;text-align:center}.vac-svg-button{max-height:30px;display:flex;cursor:pointer;transition:all .2s}.vac-svg-button:hover{transform:scale(1.1);opacity:.7}.vac-avatar{background-size:cover;background-position:center center;background-repeat:no-repeat;background-color:#ddd;height:42px;width:42px;min-height:42px;min-width:42px;margin-right:15px;border-radius:50%}.vac-blur-loading{filter:blur(3px)}.vac-badge-counter{height:13px;width:auto;min-width:13px;border-radius:50%;display:flex;align-items:center;justify-content:center;padding:3px;font-size:11px;font-weight:500}.vac-text-ellipsis{width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.vac-text-tag{color:var(--chat-message-color-tag);cursor:pointer}.vac-file-container{display:flex;align-content:center;justify-content:center;flex-wrap:wrap;text-align:center;background:var(--chat-bg-color-input);border:var(--chat-border-style-input);border-radius:4px;padding:10px}.vac-file-container svg{height:28px;width:28px}.vac-file-container .vac-text-extension{font-size:12px;color:var(--chat-message-color-file-extension);margin-top:-2px}.markdown p{margin:0}.markdown ol{display:flex;flex-direction:column;list-style-position:inside}.markdown ul{display:flex;flex-direction:column}.markdown code{display:block;font-size:12px;color:var(--chat-markdown-color-multi);background:var(--chat-markdown-bg);border:1px solid var(--chat-markdown-border);border-radius:3px;margin:4px 0;padding:7px}.markdown p code{display:inline-block;font-size:12px;color:var(--chat-markdown-color);background:var(--chat-markdown-bg);border:1px solid var(--chat-markdown-border);border-radius:3px;margin:2px 0;padding:2px 3px}.vac-card-window{width:100%;display:block;max-width:100%;background:var(--chat-content-bg-color);color:var(--chat-color);overflow-wrap:break-word;white-space:normal;border:var(--chat-container-border);border-radius:var(--chat-container-border-radius);box-shadow:var(--chat-container-box-shadow);-webkit-tap-highlight-color:transparent}.vac-card-window *{font-family:inherit}.vac-card-window a{color:#0d579c;font-weight:500}.vac-card-window .vac-chat-container{height:100%;display:flex}.vac-card-window .vac-chat-container input{min-width:10px}.vac-card-window .vac-chat-container textarea,.vac-card-window .vac-chat-container input[type=text],.vac-card-window .vac-chat-container input[type=search]{-webkit-appearance:none}.vac-media-preview{position:fixed;top:0;left:0;z-index:99;width:100vw;height:100vh;display:flex;align-items:center;background-color:#000c;outline:none}.vac-media-preview .vac-media-preview-container{height:calc(100% - 140px);width:calc(100% - 80px);padding:70px 40px;margin:0 auto}.vac-media-preview .vac-image-preview{width:100%;height:100%;background-size:contain;background-repeat:no-repeat;background-position:center}.vac-media-preview video{width:100%;height:100%}.vac-media-preview .vac-svg-button{position:absolute;top:30px;right:30px;transform:scale(1.4)}@media only screen and (max-width: 768px){.vac-media-preview .vac-svg-button{top:20px;right:20px;transform:scale(1.2)}.vac-media-preview .vac-media-preview-container{width:calc(100% - 40px);padding:70px 20px}}.vac-col-messages{position:relative;height:100%;flex:1;overflow:hidden;display:flex;flex-flow:column}.vac-col-messages .vac-container-center{height:100%;width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center}.vac-col-messages .vac-room-empty{font-size:14px;color:#9ca6af;font-style:italic;line-height:20px;white-space:pre-line}.vac-col-messages .vac-room-empty div{padding:0 10%}.vac-col-messages .vac-container-scroll{background:var(--chat-content-bg-color);flex:1;overflow-y:auto;margin-right:1px;margin-top:65px;-webkit-overflow-scrolling:touch}.vac-col-messages .vac-container-scroll.vac-scroll-smooth{scroll-behavior:smooth}.vac-col-messages .vac-messages-container{padding:0 5px 5px}.vac-col-messages .vac-text-started{font-size:14px;color:var(--chat-message-color-started);font-style:italic;text-align:center;margin-top:25px;margin-bottom:20px}.vac-col-messages .vac-icon-scroll{position:absolute;bottom:80px;right:20px;padding:8px;background:var(--chat-bg-scroll-icon);border-radius:50%;box-shadow:0 1px 1px -1px #0003,0 1px 1px #00000024,0 1px 2px #0000001f;display:flex;cursor:pointer;z-index:10}.vac-col-messages .vac-icon-scroll svg{height:25px;width:25px}.vac-col-messages .vac-messages-count{position:absolute;top:-8px;left:11px;background-color:var(--chat-message-bg-color-scroll-counter);color:var(--chat-message-color-scroll-counter)}.vac-col-messages .vac-messages-hidden{opacity:0}@media only screen and (max-width: 768px){.vac-col-messages .vac-container-scroll{margin-top:50px}.vac-col-messages .vac-text-started{margin-top:20px}.vac-col-messages .vac-icon-scroll{bottom:70px}}.vac-room-header{position:var(--chat-header-position);display:flex;align-items:center;height:64px;width:var(--chat-header-width);z-index:10;margin-right:1px;background:var(--chat-header-bg-color);border-top-right-radius:var(--chat-container-border-radius)}.vac-room-header .vac-room-wrapper{display:flex;align-items:center;min-width:0;height:100%;width:100%;padding:0 16px}.vac-room-header .vac-toggle-button{margin-right:15px}.vac-room-header .vac-toggle-button svg{height:26px;width:26px}.vac-room-header .vac-rotate-icon{transform:rotate(180deg)!important}.vac-room-header .vac-rotate-icon-init{transform:rotate(360deg)}.vac-room-header .vac-info-wrapper,.vac-room-header .vac-room-selection{display:flex;align-items:center;min-width:0;width:100%;height:100%}.vac-room-header .vac-room-selection .vac-selection-button{padding:8px 16px;color:var(--chat-color-button);background-color:var(--chat-bg-color-button);border-radius:4px;margin-right:10px;cursor:pointer;transition:all .2s}.vac-room-header .vac-room-selection .vac-selection-button:hover{opacity:.7}.vac-room-header .vac-room-selection .vac-selection-button:active{opacity:.9}.vac-room-header .vac-room-selection .vac-selection-button .vac-selection-button-count{margin-left:6px;opacity:.9}.vac-room-header .vac-room-selection .vac-selection-cancel{display:flex;align-items:center;margin-left:auto;white-space:nowrap;color:var(--chat-color-button-clear);transition:all .2s}.vac-room-header .vac-room-selection .vac-selection-cancel:hover{opacity:.7}.vac-room-header .vac-room-name{font-size:17px;font-weight:500;line-height:22px;color:var(--chat-header-color-name)}.vac-room-header .vac-room-info{font-size:13px;line-height:18px;color:var(--chat-header-color-info)}.vac-room-header .vac-room-options{margin-left:auto}@media only screen and (max-width: 768px){.vac-room-header{height:50px}.vac-room-header .vac-room-wrapper{padding:0 10px}.vac-room-header .vac-room-name{font-size:16px;line-height:22px}.vac-room-header .vac-room-info{font-size:12px;line-height:16px}.vac-room-header .vac-avatar{height:37px;width:37px;min-height:37px;min-width:37px}}.vac-room-footer{width:100%;border-bottom-right-radius:4px;z-index:10}.vac-box-footer{display:flex;position:relative;background:var(--chat-footer-bg-color);padding:10px 8px}.vac-textarea{max-height:300px;overflow-y:auto;height:20px;width:100%;line-height:20px;outline:0;resize:none;border-radius:20px;padding:12px 16px;box-sizing:content-box;font-size:16px;background:var(--chat-bg-color-input);color:var(--chat-color);caret-color:var(--chat-color-caret);border:var(--chat-border-style-input)}.vac-textarea::placeholder{color:var(--chat-color-placeholder);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.vac-textarea-outline{border:1px solid var(--chat-border-color-input-selected);box-shadow:inset 0 0 0 1px var(--chat-border-color-input-selected)}.vac-icon-textarea,.vac-icon-textarea-left{display:flex;align-items:center}.vac-icon-textarea svg,.vac-icon-textarea .vac-wrapper,.vac-icon-textarea-left svg,.vac-icon-textarea-left .vac-wrapper{margin:0 7px}.vac-icon-textarea{margin-left:5px}.vac-icon-textarea-left{display:flex;align-items:center;margin-right:5px}.vac-icon-textarea-left svg,.vac-icon-textarea-left .vac-wrapper{margin:0 7px}.vac-icon-textarea-left .vac-icon-microphone{fill:var(--chat-icon-color-microphone);margin:0 7px}.vac-icon-textarea-left .vac-dot-audio-record{height:15px;width:15px;border-radius:50%;background-color:var(--chat-message-bg-color-audio-record);animation:vac-scaling .8s ease-in-out infinite alternate}@keyframes vac-scaling{0%{transform:scale(1);opacity:.4}to{transform:scale(1.1);opacity:1}}.vac-icon-textarea-left .vac-dot-audio-record-time{font-size:16px;color:var(--chat-color);margin-left:8px;width:45px}.vac-icon-textarea-left .vac-icon-audio-stop,.vac-icon-textarea-left .vac-icon-audio-confirm{min-height:28px;min-width:28px}.vac-icon-textarea-left .vac-icon-audio-stop svg,.vac-icon-textarea-left .vac-icon-audio-confirm svg{min-height:28px;min-width:28px}.vac-icon-textarea-left .vac-icon-audio-stop{margin-right:20px}.vac-icon-textarea-left .vac-icon-audio-stop #vac-icon-close-outline{fill:var(--chat-icon-color-audio-cancel)}.vac-icon-textarea-left .vac-icon-audio-confirm{margin-right:3px;margin-left:12px}.vac-icon-textarea-left .vac-icon-audio-confirm #vac-icon-checkmark{fill:var(--chat-icon-color-audio-confirm)}.vac-send-disabled,.vac-send-disabled svg{cursor:none!important;pointer-events:none!important;transform:none!important}@media only screen and (max-width: 768px){.vac-room-footer{width:100%}.vac-box-footer{padding:7px 2px 7px 7px}.vac-box-footer.vac-box-footer-border{border-top:var(--chat-border-style-input)}.vac-textarea{padding:7px;line-height:18px}.vac-textarea::placeholder{color:transparent}.vac-icon-textarea svg,.vac-icon-textarea .vac-wrapper,.vac-icon-textarea-left svg,.vac-icon-textarea-left .vac-wrapper{margin:0 5px!important}}@media only screen and (max-height: 768px){.vac-textarea{max-height:120px}}.vac-emojis-container{width:calc(100% - 16px);padding:10px 8px;background:var(--chat-footer-bg-color);display:flex;align-items:center;overflow:auto}.vac-emojis-container .vac-emoji-element{padding:0 8px;font-size:30px;border-radius:4px;cursor:pointer;background:var(--chat-footer-bg-color-tag);transition:background-color .3s cubic-bezier(.25,.8,.5,1)}.vac-emojis-container .vac-emoji-element-active{background:var(--chat-footer-bg-color-tag-active)}@media only screen and (max-width: 768px){.vac-emojis-container{width:calc(100% - 10px);padding:7px 5px}.vac-emojis-container .vac-emoji-element{padding:0 7px;font-size:26px}}.vac-reply-container{display:flex;padding:10px 10px 0;background:var(--chat-footer-bg-color);align-items:center;width:calc(100% - 20px)}.vac-reply-container .vac-reply-box{width:100%;overflow:hidden;background:var(--chat-footer-bg-color-reply);border-radius:4px;padding:8px 10px}.vac-reply-container .vac-reply-info{overflow:hidden}.vac-reply-container .vac-reply-username{color:var(--chat-message-color-reply-username);font-size:12px;line-height:15px;margin-bottom:2px}.vac-reply-container .vac-reply-content{font-size:12px;color:var(--chat-message-color-reply-content);white-space:pre-line}.vac-reply-container .vac-icon-reply{margin-left:10px}.vac-reply-container .vac-icon-reply svg{height:20px;width:20px}.vac-reply-container .vac-image-reply{max-height:100px;max-width:200px;margin:4px 10px 0 0;border-radius:4px}.vac-reply-container .vac-audio-reply{margin-right:10px}.vac-reply-container .vac-file-container{max-width:80px}@media only screen and (max-width: 768px){.vac-reply-container{padding:5px 8px;width:calc(100% - 16px)}}.vac-room-files-container{display:flex;align-items:center;padding:10px 6px 0;background:var(--chat-footer-bg-color)}.vac-room-files-container .vac-files-box{display:flex;overflow:auto;width:calc(100% - 30px)}.vac-room-files-container video{height:100px;border:var(--chat-border-style-input);border-radius:4px}.vac-room-files-container .vac-icon-close{margin-left:auto}.vac-room-files-container .vac-icon-close svg{height:20px;width:20px}@media only screen and (max-width: 768px){.vac-files-container{padding:6px 4px 4px 2px}}.vac-room-file-container{display:flex;position:relative;margin:0 4px}.vac-room-file-container .vac-message-image{position:relative;background-color:var(--chat-message-bg-color-image)!important;background-size:cover!important;background-position:center center!important;background-repeat:no-repeat!important;height:100px;width:100px;border:var(--chat-border-style-input);border-radius:4px}.vac-room-file-container .vac-file-container{height:80px;width:80px}.vac-room-file-container .vac-icon-remove{position:absolute;top:6px;left:6px;z-index:10}.vac-room-file-container .vac-icon-remove svg{height:20px;width:20px;border-radius:50%}.vac-room-file-container .vac-icon-remove:before{content:" ";position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);border-radius:50%;z-index:-1}.vac-tags-container{display:flex;flex-direction:column;align-items:center;width:100%}.vac-tags-container .vac-tags-box{display:flex;width:100%;height:54px;overflow:hidden;cursor:pointer;background:var(--chat-footer-bg-color-tag);transition:background-color .3s cubic-bezier(.25,.8,.5,1)}.vac-tags-container .vac-tags-box-active{background:var(--chat-footer-bg-color-tag-active)}.vac-tags-container .vac-tags-info{display:flex;overflow:hidden;padding:0 20px;align-items:center}.vac-tags-container .vac-tags-avatar{height:34px;width:34px;min-height:34px;min-width:34px}.vac-tags-container .vac-tags-username{font-size:14px}@media only screen and (max-width: 768px){.vac-tags-container .vac-tags-box{height:50px}.vac-tags-container .vac-tags-info{padding:0 12px}}.vac-template-container{display:flex;flex-direction:column;align-items:center;width:100%}.vac-template-container .vac-template-box{display:flex;width:100%;height:54px;overflow:hidden;cursor:pointer;background:var(--chat-footer-bg-color-tag);transition:background-color .3s cubic-bezier(.25,.8,.5,1)}.vac-template-container .vac-template-active{background:var(--chat-footer-bg-color-tag-active)}.vac-template-container .vac-template-info{display:flex;overflow:hidden;padding:0 20px;align-items:center}.vac-template-container .vac-template-tag{font-size:14px;font-weight:700;margin-right:10px}.vac-template-container .vac-template-text{font-size:14px}@media only screen and (max-width: 768px){.vac-template-container .vac-template-box{height:50px}.vac-template-container .vac-template-info{padding:0 12px}}.vac-rooms-container{display:flex;flex-flow:column;flex:0 0 25%;min-width:260px;max-width:500px;position:relative;background:var(--chat-sidemenu-bg-color);height:100%;border-top-left-radius:var(--chat-container-border-radius);border-bottom-left-radius:var(--chat-container-border-radius)}.vac-rooms-container.vac-rooms-container-full{flex:0 0 100%;max-width:100%}.vac-rooms-container .vac-rooms-empty{font-size:14px;color:#9ca6af;font-style:italic;text-align:center;margin:40px 0;line-height:20px;white-space:pre-line}.vac-rooms-container .vac-room-list{flex:1;position:relative;max-width:100%;padding:0 10px 5px;overflow-y:auto}.vac-rooms-container .vac-room-item{border-radius:8px;align-items:center;display:flex;flex:1 1 100%;margin-bottom:5px;padding:0 14px;position:relative;min-height:71px;transition:background-color .3s cubic-bezier(.25,.8,.5,1)}.vac-rooms-container .vac-room-item:hover{background:var(--chat-sidemenu-bg-color-hover)}.vac-rooms-container .vac-room-item:not(.vac-room-selected){cursor:pointer}.vac-rooms-container .vac-room-selected{color:var(--chat-sidemenu-color-active)!important;background:var(--chat-sidemenu-bg-color-active)!important}.vac-rooms-container .vac-room-selected:hover{background:var(--chat-sidemenu-bg-color-active)!important}@media only screen and (max-width: 768px){.vac-rooms-container .vac-room-list{padding:0 7px 5px}.vac-rooms-container .vac-room-item{min-height:60px;padding:0 8px}}.vac-room-container{display:flex;flex:1;align-items:center;width:100%}.vac-room-container .vac-name-container{flex:1}.vac-room-container .vac-title-container{display:flex;align-items:center;line-height:25px}.vac-room-container .vac-state-circle{width:9px;height:9px;border-radius:50%;background-color:var(--chat-room-color-offline);margin-right:6px;transition:.3s}.vac-room-container .vac-state-online{background-color:var(--chat-room-color-online)}.vac-room-container .vac-room-name{flex:1;color:var(--chat-room-color-username);font-weight:500}.vac-room-container .vac-text-date{margin-left:5px;font-size:11px;color:var(--chat-room-color-timestamp)}.vac-room-container .vac-text-last{display:flex;align-items:center;font-size:12px;line-height:19px;color:var(--chat-room-color-message)}.vac-room-container .vac-message-new{color:var(--chat-room-color-username);font-weight:500}.vac-room-container .vac-icon-check{display:flex;vertical-align:middle;height:14px;width:14px;margin-top:-2px;margin-right:2px}.vac-room-container .vac-icon-microphone{height:15px;width:15px;vertical-align:middle;margin:-3px 1px 0 -2px;fill:var(--chat-room-color-message)}.vac-room-container .vac-room-options-container{display:flex;margin-left:auto}.vac-room-container .vac-room-badge{background-color:var(--chat-room-bg-color-badge);color:var(--chat-room-color-badge);margin-left:5px}.vac-room-container .vac-list-room-options{height:19px;width:19px;align-items:center;margin-left:5px}.vac-box-empty{margin-top:10px}@media only screen and (max-width: 768px){.vac-box-empty{margin-top:7px}}.vac-box-search{position:sticky;display:flex;align-items:center;height:64px;padding:0 15px}.vac-box-search .vac-icon-search{display:flex;position:absolute;left:30px}.vac-box-search .vac-icon-search svg{width:18px;height:18px}.vac-box-search .vac-input{height:38px;width:100%;background:var(--chat-bg-color-input);color:var(--chat-color);font-size:15px;outline:0;caret-color:var(--chat-color-caret);padding:10px 10px 10px 40px;border:1px solid var(--chat-sidemenu-border-color-search);border-radius:20px}.vac-box-search .vac-input::placeholder{color:var(--chat-color-placeholder)}.vac-box-search .vac-add-icon{margin-left:auto;padding-left:10px}@media only screen and (max-width: 768px){.vac-box-search{height:58px}}.vac-message-wrapper .vac-card-info{border-radius:4px;text-align:center;margin:10px auto;font-size:12px;padding:4px;display:block;overflow-wrap:break-word;position:relative;white-space:normal;box-shadow:0 1px 1px -1px #0000001a,0 1px 1px -1px #0000001c,0 1px 2px -1px #0000001c}.vac-message-wrapper .vac-card-date{max-width:150px;font-weight:500;text-transform:uppercase;color:var(--chat-message-color-date);background-color:var(--chat-message-bg-color-date)}.vac-message-wrapper .vac-card-system{max-width:250px;padding:8px 4px;color:var(--chat-message-color-system);background-color:var(--chat-message-bg-color-system)}.vac-message-wrapper .vac-line-new{color:var(--chat-message-color-new-messages);position:relative;text-align:center;font-size:13px;padding:10px 0}.vac-message-wrapper .vac-line-new:after,.vac-message-wrapper .vac-line-new:before{border-top:1px solid var(--chat-message-color-new-messages);content:"";left:0;position:absolute;top:50%;width:calc(50% - 60px)}.vac-message-wrapper .vac-line-new:before{left:auto;right:0}.vac-message-wrapper .vac-message-box{display:flex;flex:0 0 50%;max-width:50%;justify-content:flex-start;line-height:1.4}.vac-message-wrapper .vac-avatar{height:28px;width:28px;min-height:28px;min-width:28px;margin:0 0 2px;align-self:flex-end}.vac-message-wrapper .vac-avatar-current-offset{margin-right:28px}.vac-message-wrapper .vac-avatar-offset{margin-left:28px}.vac-message-wrapper .vac-failure-container{position:relative;align-self:flex-end;height:20px;width:20px;margin:0 0 2px -4px;border-radius:50%;background-color:#f44336}.vac-message-wrapper .vac-failure-container.vac-failure-container-avatar{margin-right:6px}.vac-message-wrapper .vac-failure-container .vac-failure-text{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;font-size:15px;font-weight:700}.vac-message-wrapper .vac-message-container{position:relative;padding:2px 10px;align-items:end;min-width:100px;box-sizing:content-box}.vac-message-wrapper .vac-message-container-offset{margin-top:10px}.vac-message-wrapper .vac-offset-current{margin-left:50%;justify-content:flex-end}.vac-message-wrapper .vac-message-card{background-color:var(--chat-message-bg-color);color:var(--chat-message-color);border-radius:8px;font-size:14px;padding:6px 9px 3px;white-space:pre-line;max-width:100%;-webkit-transition-property:box-shadow,opacity;transition-property:box-shadow,opacity;transition:box-shadow .28s cubic-bezier(.4,0,.2,1);will-change:box-shadow;box-shadow:0 1px 1px -1px #0000001a,0 1px 1px -1px #0000001c,0 1px 2px -1px #0000001c}.vac-message-wrapper .vac-message-highlight{box-shadow:0 1px 2px -1px #0000001a,0 1px 2px -1px #0000001c,0 1px 5px -1px #0000001c}.vac-message-wrapper .vac-message-current{background-color:var(--chat-message-bg-color-me)!important}.vac-message-wrapper .vac-message-deleted{color:var(--chat-message-color-deleted)!important;font-size:13px!important;font-style:italic!important;background-color:var(--chat-message-bg-color-deleted)!important}.vac-message-wrapper .vac-message-selected{background-color:var(--chat-message-bg-color-selected)!important;transition:background-color .2s}.vac-message-wrapper .vac-message-image{position:relative;background-color:var(--chat-message-bg-color-image)!important;background-size:cover!important;background-position:center center!important;background-repeat:no-repeat!important;height:250px;width:250px;max-width:100%;border-radius:4px;margin:4px auto 5px;transition:.4s filter linear}.vac-message-wrapper .vac-text-username{font-size:13px;color:var(--chat-message-color-username);margin-bottom:2px}.vac-message-wrapper .vac-username-reply{margin-bottom:5px}.vac-message-wrapper .vac-text-timestamp{font-size:10px;color:var(--chat-message-color-timestamp);text-align:right}.vac-message-wrapper .vac-progress-time{float:left;margin:-2px 0 0 40px;color:var(--chat-color);font-size:12px}.vac-message-wrapper .vac-icon-edited{-webkit-box-align:center;align-items:center;display:-webkit-inline-box;display:inline-flex;justify-content:center;letter-spacing:normal;line-height:1;text-indent:0;vertical-align:middle;margin:0 4px 2px}.vac-message-wrapper .vac-icon-edited svg{height:12px;width:12px}.vac-message-wrapper .vac-icon-check{height:14px;width:14px;vertical-align:middle;margin:-3px -3px 0 3px}@media only screen and (max-width: 768px){.vac-message-wrapper .vac-message-container{padding:2px 3px 1px}.vac-message-wrapper .vac-message-container-offset{margin-top:10px}.vac-message-wrapper .vac-message-box{flex:0 0 80%;max-width:80%}.vac-message-wrapper .vac-avatar{height:25px;width:25px;min-height:25px;min-width:25px;margin:0 6px 1px 0}.vac-message-wrapper .vac-avatar.vac-avatar-current{margin:0 0 1px 6px}.vac-message-wrapper .vac-avatar-current-offset{margin-right:31px}.vac-message-wrapper .vac-avatar-offset{margin-left:31px}.vac-message-wrapper .vac-failure-container{margin-left:2px}.vac-message-wrapper .vac-failure-container.vac-failure-container-avatar{margin-right:0}.vac-message-wrapper .vac-offset-current{margin-left:20%}.vac-message-wrapper .vac-progress-time{margin-left:37px}}.vac-audio-player{display:flex;margin:8px 0 5px}.vac-audio-player .vac-svg-button{max-width:18px;margin-left:7px}@media only screen and (max-width: 768px){.vac-audio-player{margin:4px 0 0}.vac-audio-player .vac-svg-button{max-width:16px;margin-left:5px}}.vac-player-bar{display:flex;align-items:center;max-width:calc(100% - 18px);margin-right:7px;margin-left:20px}.vac-player-bar .vac-player-progress{width:190px}.vac-player-bar .vac-player-progress .vac-line-container{position:relative;height:4px;border-radius:5px;background-color:var(--chat-message-bg-color-audio-line)}.vac-player-bar .vac-player-progress .vac-line-container .vac-line-progress{position:absolute;height:inherit;background-color:var(--chat-message-bg-color-audio-progress);border-radius:inherit}.vac-player-bar .vac-player-progress .vac-line-container .vac-line-dot{position:absolute;top:-5px;margin-left:-7px;height:14px;width:14px;border-radius:50%;background-color:var(--chat-message-bg-color-audio-progress-selector);transition:transform .25s}.vac-player-bar .vac-player-progress .vac-line-container .vac-line-dot__active{transform:scale(1.2)}@media only screen and (max-width: 768px){.vac-player-bar{margin-right:5px}.vac-player-bar .vac-player-progress .vac-line-container{height:3px}.vac-player-bar .vac-player-progress .vac-line-container .vac-line-dot{height:12px;width:12px;top:-5px;margin-left:-5px}}.vac-message-actions-wrapper .vac-options-container{position:absolute;top:2px;right:10px;height:40px;width:70px;overflow:hidden;border-top-right-radius:8px}.vac-message-actions-wrapper .vac-blur-container{position:absolute;height:100%;width:100%;left:8px;bottom:10px;background:var(--chat-message-bg-color);filter:blur(3px);border-bottom-left-radius:8px}.vac-message-actions-wrapper .vac-options-me{background:var(--chat-message-bg-color-me)}.vac-message-actions-wrapper .vac-message-options{background:var(--chat-icon-bg-dropdown-message);border-radius:50%;position:absolute;top:7px;right:7px}.vac-message-actions-wrapper .vac-message-options svg{height:17px;width:17px;padding:5px;margin:-5px}.vac-message-actions-wrapper .vac-message-emojis{position:absolute;top:6px;right:30px}.vac-message-actions-wrapper .vac-menu-options{right:15px}.vac-message-actions-wrapper .vac-menu-left{right:-118px}@media only screen and (max-width: 768px){.vac-message-actions-wrapper .vac-options-container{right:3px}.vac-message-actions-wrapper .vac-menu-left{right:-50px}}.vac-message-files-container .vac-file-wrapper{position:relative;width:fit-content}.vac-message-files-container .vac-file-wrapper .vac-file-container{height:60px;width:60px;margin:3px 0 5px;cursor:pointer;transition:all .6s}.vac-message-files-container .vac-file-wrapper .vac-file-container:hover{opacity:.85}.vac-message-files-container .vac-file-wrapper .vac-file-container svg{height:30px;width:30px}.vac-message-files-container .vac-file-wrapper .vac-file-container.vac-file-container-progress{background-color:#0000004d}.vac-message-file-container{position:relative;z-index:0}.vac-message-file-container .vac-message-image-container{cursor:pointer}.vac-message-file-container .vac-image-buttons{position:absolute;width:100%;height:100%;border-radius:4px;background:linear-gradient(to bottom,rgba(0,0,0,0) 55%,rgba(0,0,0,.02) 60%,rgba(0,0,0,.05) 65%,rgba(0,0,0,.1) 70%,rgba(0,0,0,.2) 75%,rgba(0,0,0,.3) 80%,rgba(0,0,0,.5) 85%,rgba(0,0,0,.6) 90%,rgba(0,0,0,.7) 95%,rgba(0,0,0,.8) 100%)}.vac-message-file-container .vac-image-buttons svg{height:26px;width:26px}.vac-message-file-container .vac-image-buttons .vac-button-view,.vac-message-file-container .vac-image-buttons .vac-button-download{position:absolute;bottom:6px;left:7px}.vac-message-file-container .vac-image-buttons :first-child{left:40px}.vac-message-file-container .vac-image-buttons .vac-button-view{max-width:18px;bottom:8px}.vac-message-file-container .vac-video-container{width:350px;max-width:100%;margin:4px auto 5px;cursor:pointer}.vac-message-file-container .vac-video-container video{width:100%;height:100%;border-radius:4px}.vac-button-reaction{display:inline-flex;align-items:center;border:var(--chat-message-border-style-reaction);outline:none;background:var(--chat-message-bg-color-reaction);border-radius:4px;margin:4px 2px 0;transition:.3s;padding:0 5px;font-size:18px;line-height:23px}.vac-button-reaction span{font-size:11px;font-weight:500;min-width:7px;color:var(--chat-message-color-reaction-counter)}.vac-button-reaction:hover{border:var(--chat-message-border-style-reaction-hover);background:var(--chat-message-bg-color-reaction-hover);cursor:pointer}.vac-button-reaction.vac-reaction-me{border:var(--chat-message-border-style-reaction-me);background:var(--chat-message-bg-color-reaction-me)}.vac-button-reaction.vac-reaction-me span{color:var(--chat-message-color-reaction-counter-me)}.vac-button-reaction.vac-reaction-me:hover{border:var(--chat-message-border-style-reaction-hover-me);background:var(--chat-message-bg-color-reaction-hover-me)}.vac-reply-message{background:var(--chat-message-bg-color-reply);border-radius:4px;margin:-1px -5px 8px;padding:8px 10px}.vac-reply-message .vac-reply-username{color:var(--chat-message-color-reply-username);font-size:12px;line-height:15px;margin-bottom:2px}.vac-reply-message .vac-image-reply-container{width:70px}.vac-reply-message .vac-image-reply-container .vac-message-image-reply{height:70px;width:70px;margin:4px auto 3px}.vac-reply-message .vac-video-reply-container{width:200px;max-width:100%}.vac-reply-message .vac-video-reply-container video{width:100%;height:100%;border-radius:4px}.vac-reply-message .vac-reply-content{font-size:12px;color:var(--chat-message-color-reply-content)}.vac-reply-message .vac-file-container{height:60px;width:60px}.vac-emoji-wrapper{position:relative;display:flex}.vac-emoji-wrapper .vac-emoji-reaction svg{height:19px;width:19px}.vac-emoji-wrapper .vac-emoji-picker{position:absolute;z-index:9999;bottom:32px;right:10px;width:300px;padding-top:4px;overflow:scroll;box-sizing:border-box;border-radius:.5rem;background:var(--chat-emoji-bg-color);box-shadow:0 1px 2px -2px #0000001a,0 1px 2px -1px #0000001a,0 1px 2px 1px #0000001a;scrollbar-width:none}.vac-emoji-wrapper .vac-emoji-picker::-webkit-scrollbar{display:none}.vac-emoji-wrapper .vac-emoji-picker.vac-picker-reaction{position:fixed;top:initial;right:initial}.vac-emoji-wrapper .vac-emoji-picker emoji-picker{height:100%;width:100%;--emoji-size: 1.2rem;--background: var(--chat-emoji-bg-color);--emoji-padding: .4rem;--border-color: var(--chat-sidemenu-border-color-search);--button-hover-background: var(--chat-sidemenu-bg-color-hover);--button-active-background: var(--chat-sidemenu-bg-color-hover)}.vac-format-message-wrapper .vac-format-container{display:inline}.vac-format-message-wrapper .vac-icon-deleted{height:14px;width:14px;vertical-align:middle;margin:-2px 2px 0 0;fill:var(--chat-message-color-deleted)}.vac-format-message-wrapper .vac-icon-deleted.vac-icon-deleted-room{margin:-3px 1px 0 0;fill:var(--chat-room-color-message)}.vac-format-message-wrapper .vac-image-link-container{background-color:var(--chat-message-bg-color-media);padding:8px;margin:2px auto;border-radius:4px}.vac-format-message-wrapper .vac-image-link{position:relative;background-color:var(--chat-message-bg-color-image)!important;background-size:contain;background-position:center center!important;background-repeat:no-repeat!important;height:150px;width:150px;max-width:100%;border-radius:4px;margin:0 auto}.vac-format-message-wrapper .vac-image-link-message{max-width:166px;font-size:12px}.vac-loader-wrapper.vac-container-center{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);z-index:9}.vac-loader-wrapper.vac-container-top{padding:21px}.vac-loader-wrapper.vac-container-top #vac-circle{height:20px;width:20px}.vac-loader-wrapper #vac-circle{margin:auto;height:28px;width:28px;border:3px rgba(0,0,0,.25) solid;border-top:3px var(--chat-color-spinner) solid;border-right:3px var(--chat-color-spinner) solid;border-bottom:3px var(--chat-color-spinner) solid;border-radius:50%;-webkit-animation:vac-spin 1s infinite linear;animation:vac-spin 1s infinite linear}@media only screen and (max-width: 768px){.vac-loader-wrapper #vac-circle{height:24px;width:24px}.vac-loader-wrapper.vac-container-top{padding:18px}.vac-loader-wrapper.vac-container-top #vac-circle{height:16px;width:16px}}@-webkit-keyframes vac-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}@keyframes vac-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}#vac-icon-search{fill:var(--chat-icon-color-search)}#vac-icon-add{fill:var(--chat-icon-color-add)}#vac-icon-toggle{fill:var(--chat-icon-color-toggle)}#vac-icon-menu{fill:var(--chat-icon-color-menu)}#vac-icon-close{fill:var(--chat-icon-color-close)}#vac-icon-close-image{fill:var(--chat-icon-color-close-image)}#vac-icon-file{fill:var(--chat-icon-color-file)}#vac-icon-paperclip{fill:var(--chat-icon-color-paperclip)}#vac-icon-close-outline{fill:var(--chat-icon-color-close-outline)}#vac-icon-close-outline-preview{fill:var(--chat-icon-color-close-preview)}#vac-icon-send{fill:var(--chat-icon-color-send)}#vac-icon-send-disabled{fill:var(--chat-icon-color-send-disabled)}#vac-icon-emoji{fill:var(--chat-icon-color-emoji)}#vac-icon-emoji-reaction{fill:var(--chat-icon-color-emoji-reaction)}#vac-icon-document{fill:var(--chat-icon-color-document)}#vac-icon-pencil{fill:var(--chat-icon-color-pencil)}#vac-icon-checkmark,#vac-icon-double-checkmark{fill:var(--chat-icon-color-checkmark)}#vac-icon-checkmark-seen,#vac-icon-double-checkmark-seen{fill:var(--chat-icon-color-checkmark-seen)}#vac-icon-eye{fill:var(--chat-icon-color-eye)}#vac-icon-dropdown-message{fill:var(--chat-icon-color-dropdown-message)}#vac-icon-dropdown-room{fill:var(--chat-icon-color-dropdown-room)}#vac-icon-dropdown-scroll{fill:var(--chat-icon-color-dropdown-scroll)}#vac-icon-audio-play{fill:var(--chat-icon-color-audio-play)}#vac-icon-audio-pause{fill:var(--chat-icon-color-audio-pause)}.vac-progress-wrapper{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);z-index:9}.vac-progress-wrapper circle{transition:stroke-dashoffset .35s;transform:rotate(-90deg);transform-origin:50% 50%}.vac-progress-wrapper .vac-progress-content{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);z-index:-1;margin-top:-2px;background-color:#000000b3;border-radius:50%}.vac-progress-wrapper .vac-progress-content .vac-progress-text{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);font-weight:700;color:#fff}.vac-progress-wrapper .vac-progress-content .vac-progress-text .vac-progress-pourcent{font-size:9px;font-weight:400}
`;const bT={name:"ChatContainer",components:{RoomsList:R6,Room:aT,MediaPreview:mT},props:{height:{type:String,default:"600px"},theme:{type:String,default:"light"},styles:{type:[Object,String],default:()=>({})},responsiveBreakpoint:{type:Number,default:900},singleRoom:{type:[Boolean,String],default:!1},roomsListOpened:{type:[Boolean,String],default:!0},textMessages:{type:[Object,String],default:()=>({})},currentUserId:{type:String,default:""},rooms:{type:[Array,String],default:()=>[]},roomsOrder:{type:String,default:"desc"},loadingRooms:{type:[Boolean,String],default:!1},roomsLoaded:{type:[Boolean,String],default:!1},roomId:{type:String,default:null},loadFirstRoom:{type:[Boolean,String],default:!0},messages:{type:[Array,String],default:()=>[]},messagesLoaded:{type:[Boolean,String],default:!1},roomActions:{type:[Array,String],default:()=>[]},menuActions:{type:[Array,String],default:()=>[]},messageActions:{type:[Array,String],default:()=>[{name:"replyMessage",title:"Reply"},{name:"editMessage",title:"Edit Message",onlyMe:!0},{name:"deleteMessage",title:"Delete Message",onlyMe:!0},{name:"selectMessages",title:"Select"}]},messageSelectionActions:{type:[Array,String],default:()=>[]},autoScroll:{type:[Object,String],default:()=>({send:{new:!0,newAfterScrollUp:!0},receive:{new:!0,newAfterScrollUp:!1}})},customSearchRoomEnabled:{type:[Boolean,String],default:!1},showSearch:{type:[Boolean,String],default:!0},showAddRoom:{type:[Boolean,String],default:!0},showSendIcon:{type:[Boolean,String],default:!0},showFiles:{type:[Boolean,String],default:!0},showAudio:{type:[Boolean,String],default:!0},audioBitRate:{type:Number,default:128},audioSampleRate:{type:Number,default:new(window.AudioContext||window.webkitAudioContext)().sampleRate},showEmojis:{type:[Boolean,String],default:!0},showReactionEmojis:{type:[Boolean,String],default:!0},showNewMessagesDivider:{type:[Boolean,String],default:!0},showFooter:{type:[Boolean,String],default:!0},textFormatting:{type:[Object,String],default:()=>({disabled:!1})},linkOptions:{type:[Object,String],default:()=>({disabled:!1,target:"_blank",rel:null})},roomInfoEnabled:{type:[Boolean,String],default:!1},textareaActionEnabled:{type:[Boolean,String],default:!1},textareaAutoFocus:{type:[Boolean,String],default:!0},userTagsEnabled:{type:[Boolean,String],default:!0},emojisSuggestionEnabled:{type:[Boolean,String],default:!0},roomMessage:{type:String,default:""},scrollDistance:{type:Number,default:60},acceptedFiles:{type:String,default:"*"},captureFiles:{type:String,default:""},multipleFiles:{type:[Boolean,String],default:!0},templatesText:{type:[Array,String],default:()=>[]},mediaPreviewEnabled:{type:[Boolean,String],default:!0},usernameOptions:{type:[Object,String],default:()=>({minUsers:3,currentUser:!1})},emojiDataSource:{type:String,default:void 0}},emits:["toggle-rooms-list","room-info","fetch-messages","send-message","edit-message","delete-message","open-file","open-user-tag","open-failed-message","menu-action-handler","message-action-handler","send-message-reaction","typing-message","textarea-action-handler","fetch-more-rooms","add-room","search-room","room-action-handler","message-selection-action-handler"],data(){return{slots:[],room:{},loadingMoreRooms:!1,showRoomsList:!0,isMobile:!1,showMediaPreview:!1,previewFile:{}}},computed:{t(){return{..._T,...this.textMessagesCasted}},cssVars(){const e=gT[this.theme],t={};return Object.keys(e).map(r=>{t[r]={...e[r],...this.stylesCasted[r]||{}}}),vT(t)},orderedRooms(){return this.roomsCasted.slice().sort((e,t)=>{const r=e.index||0,n=t.index||0;return this.roomsOrder==="asc"?r<n?-1:n<r?1:0:r>n?-1:n>r?1:0})},singleRoomCasted(){return this.castBoolean(this.singleRoom)},roomsListOpenedCasted(){return this.castBoolean(this.roomsListOpened)},loadingRoomsCasted(){return this.castBoolean(this.loadingRooms)},roomsLoadedCasted(){return this.castBoolean(this.roomsLoaded)},loadFirstRoomCasted(){return this.castBoolean(this.loadFirstRoom)},messagesLoadedCasted(){return this.castBoolean(this.messagesLoaded)},multipleFilesCasted(){return this.castBoolean(this.multipleFiles)},showSearchCasted(){return this.castBoolean(this.showSearch)},showAddRoomCasted(){return this.castBoolean(this.showAddRoom)},showSendIconCasted(){return this.castBoolean(this.showSendIcon)},showFilesCasted(){return this.castBoolean(this.showFiles)},showAudioCasted(){return this.castBoolean(this.showAudio)},showEmojisCasted(){return this.castBoolean(this.showEmojis)},showReactionEmojisCasted(){return this.castBoolean(this.showReactionEmojis)},showNewMessagesDividerCasted(){return this.castBoolean(this.showNewMessagesDivider)},showFooterCasted(){return this.castBoolean(this.showFooter)},roomInfoEnabledCasted(){return this.castBoolean(this.roomInfoEnabled)},textareaActionEnabledCasted(){return this.castBoolean(this.textareaActionEnabled)},textareaAutoFocusCasted(){return this.castBoolean(this.textareaAutoFocus)},userTagsEnabledCasted(){return this.castBoolean(this.userTagsEnabled)},emojisSuggestionEnabledCasted(){return this.castBoolean(this.emojisSuggestionEnabled)},mediaPreviewEnabledCasted(){return this.castBoolean(this.mediaPreviewEnabled)},roomsCasted(){return this.castArray(this.rooms)},messagesCasted(){return this.castArray(this.messages)},roomActionsCasted(){return this.castArray(this.roomActions)},menuActionsCasted(){return this.castArray(this.menuActions)},messageActionsCasted(){return this.castArray(this.messageActions)},messageSelectionActionsCasted(){return this.castArray(this.messageSelectionActions)},templatesTextCasted(){return this.castArray(this.templatesText)},stylesCasted(){return this.castObject(this.styles)},textMessagesCasted(){return this.castObject(this.textMessages)},autoScrollCasted(){return this.castObject(this.autoScroll)},textFormattingCasted(){return this.castObject(this.textFormatting)},linkOptionsCasted(){return this.castObject(this.linkOptions)},usernameOptionsCasted(){return this.castObject(this.usernameOptions)}},watch:{roomsCasted:{immediate:!0,deep:!0,handler(e,t){if((!e[0]||!e.find(r=>r.roomId===this.room.roomId))&&(this.showRoomsList=!0),!this.loadingMoreRooms&&this.loadFirstRoomCasted&&e[0]&&(!t||e.length!==t.length))if(this.roomId){const r=e.find(n=>n.roomId===this.roomId)||{};this.fetchRoom({room:r})}else!this.isMobile||this.singleRoomCasted?this.fetchRoom({room:this.orderedRooms[0]}):this.showRoomsList=!0}},loadingRoomsCasted(e){e&&(this.room={})},roomId:{immediate:!0,handler(e,t){if(e&&!this.loadingRoomsCasted&&this.roomsCasted.length){const r=this.roomsCasted.find(n=>n.roomId===e);this.fetchRoom({room:r})}else t&&!e&&(this.room={})}},room(e){!e||Object.entries(e).length===0||(Ik(e),e.users.forEach(t=>{Fk(t)}))},roomsListOpenedCasted:{immediate:!0,handler(e){this.showRoomsList=e}}},created(){this.updateResponsive(),window.addEventListener("resize",e=>{e.isTrusted&&this.updateResponsive()})},updated(){const e=document.querySelectorAll("[slot]");this.slots.length!==e.length&&(this.slots=e)},methods:{castBoolean(e){return e==="true"||e===!0},castArray(e){return e?Array.isArray(e)?e:JSON.parse(e):[]},castObject(e){return e?typeof e=="object"?e:JSON.parse(e):{}},updateResponsive(){this.isMobile=window.innerWidth<Number(this.responsiveBreakpoint)},toggleRoomsList(){this.showRoomsList=!this.showRoomsList,this.isMobile&&(this.room={}),this.$emit("toggle-rooms-list",{opened:this.showRoomsList})},fetchRoom({room:e}){this.room=e,this.fetchMessages({reset:!0}),this.isMobile&&(this.showRoomsList=!1)},fetchMoreRooms(){this.$emit("fetch-more-rooms")},roomInfo(){this.$emit("room-info",this.room)},addRoom(){this.$emit("add-room")},searchRoom(e){this.$emit("search-room",{value:e,roomId:this.room.roomId})},fetchMessages(e){this.$emit("fetch-messages",{room:this.room,options:e})},sendMessage(e){this.$emit("send-message",{...e,roomId:this.room.roomId})},editMessage(e){this.$emit("edit-message",{...e,roomId:this.room.roomId})},deleteMessage(e){this.$emit("delete-message",{message:e,roomId:this.room.roomId})},openFile({message:e,file:t}){this.mediaPreviewEnabledCasted&&t.action==="preview"?(this.previewFile=t.file,this.showMediaPreview=!0):this.$emit("open-file",{message:e,file:t})},openUserTag({user:e}){this.$emit("open-user-tag",{user:e})},openFailedMessage({message:e}){this.$emit("open-failed-message",{message:e,roomId:this.room.roomId})},menuActionHandler(e){this.$emit("menu-action-handler",{action:e,roomId:this.room.roomId})},roomActionHandler({action:e,roomId:t}){this.$emit("room-action-handler",{action:e,roomId:t})},messageActionHandler(e){this.$emit("message-action-handler",{...e,roomId:this.room.roomId})},messageSelectionActionHandler(e){this.$emit("message-selection-action-handler",{...e,roomId:this.room.roomId})},sendMessageReaction(e){this.$emit("send-message-reaction",{...e,roomId:this.room.roomId})},typingMessage(e){this.$emit("typing-message",{message:e,roomId:this.room.roomId})},textareaActionHandler(e){this.$emit("textarea-action-handler",{message:e,roomId:this.room.roomId})}}},wT={class:"vac-chat-container"};function ST(e,t,r,n,i,s){const a=Ge("rooms-list"),o=Ge("room"),l=Ge("media-preview");return ye(),Te("div",{class:"vac-card-window",style:Ut([{height:r.height},s.cssVars])},[He("div",wT,[s.singleRoomCasted?Ne("",!0):(ye(),Rt(a,{key:0,"current-user-id":r.currentUserId,rooms:s.orderedRooms,"loading-rooms":s.loadingRoomsCasted,"rooms-loaded":s.roomsLoadedCasted,room:i.room,"room-actions":s.roomActionsCasted,"custom-search-room-enabled":r.customSearchRoomEnabled,"text-messages":s.t,"show-search":s.showSearchCasted,"show-add-room":s.showAddRoomCasted,"show-rooms-list":i.showRoomsList&&s.roomsListOpenedCasted,"text-formatting":s.textFormattingCasted,"link-options":s.linkOptionsCasted,"is-mobile":i.isMobile,"scroll-distance":r.scrollDistance,onFetchRoom:s.fetchRoom,onFetchMoreRooms:s.fetchMoreRooms,onLoadingMoreRooms:t[0]||(t[0]=u=>i.loadingMoreRooms=u),onAddRoom:s.addRoom,onSearchRoom:s.searchRoom,onRoomActionHandler:s.roomActionHandler},Lt({_:2},[st(i.slots,u=>({name:u.slot,fn:Xe(f=>[Ue(e.$slots,u.slot,Mt(kt(f)))])}))]),1032,["current-user-id","rooms","loading-rooms","rooms-loaded","room","room-actions","custom-search-room-enabled","text-messages","show-search","show-add-room","show-rooms-list","text-formatting","link-options","is-mobile","scroll-distance","onFetchRoom","onFetchMoreRooms","onAddRoom","onSearchRoom","onRoomActionHandler"])),Ve(o,{"current-user-id":r.currentUserId,rooms:s.roomsCasted,"room-id":i.room.roomId||"","load-first-room":s.loadFirstRoomCasted,messages:s.messagesCasted,"room-message":r.roomMessage,"messages-loaded":s.messagesLoadedCasted,"menu-actions":s.menuActionsCasted,"message-actions":s.messageActionsCasted,"message-selection-actions":s.messageSelectionActionsCasted,"auto-scroll":s.autoScrollCasted,"show-send-icon":s.showSendIconCasted,"show-files":s.showFilesCasted,"show-audio":s.showAudioCasted,"audio-bit-rate":r.audioBitRate,"audio-sample-rate":r.audioSampleRate,"show-emojis":s.showEmojisCasted,"show-reaction-emojis":s.showReactionEmojisCasted,"show-new-messages-divider":s.showNewMessagesDividerCasted,"show-footer":s.showFooterCasted,"text-messages":s.t,"single-room":s.singleRoomCasted,"show-rooms-list":i.showRoomsList&&s.roomsListOpenedCasted,"text-formatting":s.textFormattingCasted,"link-options":s.linkOptionsCasted,"is-mobile":i.isMobile,"loading-rooms":s.loadingRoomsCasted,"room-info-enabled":s.roomInfoEnabledCasted,"textarea-action-enabled":s.textareaActionEnabledCasted,"textarea-auto-focus":s.textareaAutoFocusCasted,"user-tags-enabled":s.userTagsEnabledCasted,"emojis-suggestion-enabled":s.emojisSuggestionEnabledCasted,"scroll-distance":r.scrollDistance,"accepted-files":r.acceptedFiles,"capture-files":r.captureFiles,"multiple-files":s.multipleFilesCasted,"templates-text":s.templatesTextCasted,"username-options":s.usernameOptionsCasted,"emoji-data-source":r.emojiDataSource,onToggleRoomsList:s.toggleRoomsList,onRoomInfo:s.roomInfo,onFetchMessages:s.fetchMessages,onSendMessage:s.sendMessage,onEditMessage:s.editMessage,onDeleteMessage:s.deleteMessage,onOpenFile:s.openFile,onOpenUserTag:s.openUserTag,onOpenFailedMessage:s.openFailedMessage,onMenuActionHandler:s.menuActionHandler,onMessageActionHandler:s.messageActionHandler,onMessageSelectionActionHandler:s.messageSelectionActionHandler,onSendMessageReaction:s.sendMessageReaction,onTypingMessage:s.typingMessage,onTextareaActionHandler:s.textareaActionHandler},Lt({_:2},[st(i.slots,u=>({name:u.slot,fn:Xe(f=>[Ue(e.$slots,u.slot,Mt(kt(f)))])}))]),1032,["current-user-id","rooms","room-id","load-first-room","messages","room-message","messages-loaded","menu-actions","message-actions","message-selection-actions","auto-scroll","show-send-icon","show-files","show-audio","audio-bit-rate","audio-sample-rate","show-emojis","show-reaction-emojis","show-new-messages-divider","show-footer","text-messages","single-room","show-rooms-list","text-formatting","link-options","is-mobile","loading-rooms","room-info-enabled","textarea-action-enabled","textarea-auto-focus","user-tags-enabled","emojis-suggestion-enabled","scroll-distance","accepted-files","capture-files","multiple-files","templates-text","username-options","emoji-data-source","onToggleRoomsList","onRoomInfo","onFetchMessages","onSendMessage","onEditMessage","onDeleteMessage","onOpenFile","onOpenUserTag","onOpenFailedMessage","onMenuActionHandler","onMessageActionHandler","onMessageSelectionActionHandler","onSendMessageReaction","onTypingMessage","onTextareaActionHandler"])]),Ve(Zt,{name:"vac-fade-preview",appear:""},{default:Xe(()=>[i.showMediaPreview?(ye(),Rt(l,{key:0,file:i.previewFile,onCloseMediaPreview:t[1]||(t[1]=u=>i.showMediaPreview=!1)},Lt({_:2},[st(i.slots,u=>({name:u.slot,fn:Xe(f=>[Ue(e.$slots,u.slot,Mt(kt(f)))])}))]),1032,["file"])):Ne("",!0)]),_:3})],4)}var CT=Pt(bT,[["render",ST],["styles",[yT]]]);const xT=u9(CT),Km="vue-advanced-chat";function ET(){customElements.get(Km)||customElements.define(Km,xT)}const cu=Lg("aetherTerminalService",()=>{const e=lt({isConnected:!1,isConnecting:!1,isReconnecting:!1,reconnectAttempts:0,maxReconnectAttempts:5,latency:0}),t=lt(null),r=lt({id:"",isActive:!1,isPaused:!1,isReconnecting:!1,lastActivity:new Date,adminControlled:!1,aiMonitoring:!0}),n=lt([]),i=lt([]),s=lt([]),a=lt(!1),o=lt(["rm -rf","sudo rm","format","mkfs","dd if=","shutdown","reboot","halt","init 0","init 6","systemctl poweroff","systemctl reboot","pkill","killall","kill -9"]),l=lt({onShellOutput:[],onControlOutput:[],onChatMessage:[],onConnect:[],onDisconnect:[],onReconnect:[],onError:[]}),u=zt(()=>n.value.length>0),f=zt(()=>r.value.isPaused||r.value.isReconnecting||a.value||u.value||!e.value.isConnected),c=zt(()=>n.value.filter(I=>I.riskLevel==="critical")),h=zt(()=>e.value.isConnected?"connected":e.value.isConnecting?"connecting":e.value.isReconnecting?"reconnecting":"disconnected"),d=I=>{t.value=I,p()},p=()=>{t.value&&(t.value.on("connect",()=>{e.value.isConnected=!0,e.value.isConnecting=!1,e.value.isReconnecting=!1,e.value.reconnectAttempts=0,e.value.lastConnected=new Date,e.value.connectionError=void 0,P("[SYSTEM] Connected to AetherTerm service"),l.value.onConnect.forEach(I=>I())}),t.value.on("disconnect",I=>{e.value.isConnected=!1,e.value.lastDisconnected=new Date,e.value.connectionError=I,P(`[SYSTEM] Disconnected from AetherTerm service: ${I}`),l.value.onDisconnect.forEach(K=>K()),I!=="io client disconnect"&&v()}),t.value.on("reconnect",I=>{e.value.isReconnecting=!1,e.value.reconnectAttempts=I,P(`[SYSTEM] Reconnected after ${I} attempts`),l.value.onReconnect.forEach(K=>K())}),t.value.on("reconnect_attempt",I=>{e.value.reconnectAttempts=I,P(`[SYSTEM] Reconnection attempt ${I}`)}),t.value.on("reconnect_failed",()=>{e.value.isReconnecting=!1,e.value.connectionError="Max reconnection attempts reached",P("[SYSTEM] Failed to reconnect after maximum attempts")}),t.value.on("connect_error",I=>{e.value.connectionError=I.message,P(`[SYSTEM] Connection error: ${I.message}`),l.value.onError.forEach(K=>K(I))}),t.value.on("shell_output",I=>{a.value||P(I),l.value.onShellOutput.forEach(K=>K(I))}),t.value.on("ctl_output",I=>{a.value||P(`[CTL] ${I}`),l.value.onControlOutput.forEach(K=>K(I))}),t.value.on("chat_message",I=>{l.value.onChatMessage.forEach(K=>K(I))}),t.value.on("admin_pause_terminal",I=>{k(I.reason)}),t.value.on("admin_resume_terminal",()=>{O()}),t.value.on("admin_suppress_output",I=>{B(I.suppress,I.reason)}),t.value.on("command_approval",I=>{I.approved?X(I.commandId):oe(I.commandId,I.reason||"Rejected by admin")}))},v=()=>{e.value.reconnectAttempts>=e.value.maxReconnectAttempts||(e.value.isReconnecting=!0,r.value.isReconnecting=!0,P("[SYSTEM] Starting reconnection process..."))},_=()=>{e.value.isConnected||e.value.isConnecting||(e.value.isConnecting=!0,P("[SYSTEM] Connecting to AetherTerm service..."))},m=()=>{t.value&&t.value.disconnect(),e.value.isConnected=!1,e.value.isConnecting=!1,e.value.isReconnecting=!1},g=I=>{l.value.onShellOutput.push(I)},x=I=>{l.value.onControlOutput.push(I)},L=I=>{l.value.onChatMessage.push(I)},y=I=>{l.value.onConnect.push(I)},M=I=>{l.value.onDisconnect.push(I)},F=I=>{l.value.onReconnect.push(I)},D=I=>{l.value.onError.push(I)},H=I=>{if(I){const K=l.value.onShellOutput.indexOf(I);K!==-1&&l.value.onShellOutput.splice(K,1)}else l.value.onShellOutput=[]},b=I=>{if(I){const K=l.value.onControlOutput.indexOf(I);K!==-1&&l.value.onControlOutput.splice(K,1)}else l.value.onControlOutput=[]},R=I=>{if(I){const K=l.value.onChatMessage.indexOf(I);K!==-1&&l.value.onChatMessage.splice(K,1)}else l.value.onChatMessage=[]},A=I=>{r.value.id=I,r.value.isActive=!0,r.value.lastActivity=new Date,P(`[SYSTEM] Terminal session initialized: ${I}`)},k=I=>{r.value.isPaused=!0,P(`[SYSTEM] Terminal paused: ${I}`)},O=()=>{r.value.isPaused=!1,P("[SYSTEM] Terminal resumed")},B=(I,K)=>{a.value=I,I&&K?P(`[SYSTEM] Output suppressed: ${K}`):I||P("[SYSTEM] Output restored")},$=I=>{const K=Date.now().toString();let ee="low",ae="";return o.value.some(S=>I.toLowerCase().includes(S.toLowerCase()))?(ee="critical",ae="This command may cause system damage or data loss. Consider using safer alternatives."):I.includes("sudo")?(ee="high",ae="This command requires elevated privileges. Ensure you understand its implications."):(I.includes("chmod")||I.includes("chown"))&&(ee="medium",ae="This command modifies file permissions. Verify the target files and permissions."),{id:K,command:I,timestamp:new Date,status:ee==="critical"?"pending":"approved",riskLevel:ee,aiSuggestion:ae,source:"user"}},Q=I=>{const K=$(I);return K.status==="pending"?(n.value.push(K),P(`[AI] Command blocked for review: ${I}`),P(`[AI] Reason: ${K.aiSuggestion}`),t.value&&t.value.emit("command_review_required",{commandId:K.id,command:K.command,riskLevel:K.riskLevel,aiSuggestion:K.aiSuggestion}),!1):(i.value.push(K),r.value.lastActivity=new Date,t.value&&t.value.emit("terminal_command",{command:K.command,commandId:K.id}),!0)},X=I=>{const K=n.value.findIndex(ee=>ee.id===I);if(K!==-1){const ee=n.value[K];return ee.status="approved",i.value.push(ee),n.value.splice(K,1),P(`[ADMIN] Command approved: ${ee.command}`),t.value&&t.value.emit("terminal_command",{command:ee.command,commandId:ee.id}),ee}return null},oe=(I,K)=>{const ee=n.value.findIndex(ae=>ae.id===I);if(ee!==-1){const ae=n.value[ee];ae.status="rejected",ae.rejectionReason=K,i.value.push(ae),n.value.splice(ee,1),P(`[ADMIN] Command rejected: ${ae.command}`),P(`[ADMIN] Reason: ${K}`)}},w=I=>{t.value&&t.value.emit("chat_message",I)},P=I=>{a.value||(s.value.push(`[${new Date().toLocaleTimeString()}] ${I}`),s.value.length>1e3&&(s.value=s.value.slice(-1e3)))};return{connectionState:e,socket:t,session:r,pendingCommands:n,commandHistory:i,outputBuffer:s,isOutputSuppressed:a,dangerousCommands:o,hasPendingCommands:u,isTerminalBlocked:f,criticalCommandsPending:c,connectionStatus:h,setSocket:d,connect:_,disconnect:m,startReconnection:v,onShellOutput:g,onControlOutput:x,onChatMessage:L,onConnect:y,onDisconnect:M,onReconnect:F,onError:D,offShellOutput:H,offControlOutput:b,offChatMessage:R,initializeSession:A,pauseTerminal:k,resumeTerminal:O,suppressOutput:B,analyzeCommand:$,submitCommand:Q,approveCommand:X,rejectCommand:oe,sendChatMessage:w,addToOutput:P,clearOutput:()=>{s.value=[]},setAdminControl:I=>{r.value.adminControlled=I,P(`[SYSTEM] Admin control ${I?"enabled":"disabled"}`)},setAIMonitoring:I=>{r.value.aiMonitoring=I,P(`[SYSTEM] AI monitoring ${I?"enabled":"disabled"}`)},addDangerousCommand:I=>{o.value.includes(I)||o.value.push(I)},removeDangerousCommand:I=>{const K=o.value.indexOf(I);K!==-1&&o.value.splice(K,1)}}}),AT={class:"admin-control-panel"},RT={class:"panel-header"},kT={class:"control-section"},TT={class:"control-buttons"},MT={key:0,class:"control-section"},LT={class:"pending-commands-list"},BT={class:"command-info"},OT={class:"command-text"},IT={class:"command-meta"},FT={class:"timestamp"},DT={key:0,class:"ai-suggestion"},HT={class:"command-actions"},PT=["onClick"],jT=["onClick"],NT={class:"control-section"},UT={class:"command-history"},qT={class:"command-text"},zT={class:"command-meta"},VT={class:"timestamp"},$T={key:0,class:"rejection-reason"},WT={class:"control-section"},KT={class:"monitoring-controls"},YT={class:"toggle-switch"},GT={class:"dangerous-commands"},XT={class:"command-tags"},ZT=["onClick"],QT={class:"add-command"},JT={class:"control-section"},eM={class:"status-grid"},tM={class:"status-item"},rM={class:"value"},nM={class:"status-item"},iM={class:"value"},sM={class:"status-item"},oM={class:"status-item"},aM={class:"value"},lM={class:"command-to-reject"},cM={class:"form-group"},uM=Li({__name:"AdminControlPanel",setup(e){const t=cu(),r=lt(""),n=lt(!1),i=lt(null),s=lt(""),a=zt(()=>{switch(t.connectionStatus){case"connected":return"status-connected";case"connecting":return"status-connecting";case"reconnecting":return"status-reconnecting";default:return"status-disconnected"}}),o=zt(()=>t.commandHistory.slice(-10).reverse()),l=()=>{t.session.isPaused?t.resumeTerminal():t.pauseTerminal("Paused by administrator")},u=()=>{t.isOutputSuppressed?t.suppressOutput(!1):t.suppressOutput(!0,"Suppressed by administrator")},f=()=>{t.clearOutput()},c=x=>{t.approveCommand(x)},h=x=>{i.value=x,s.value="",n.value=!0},d=()=>{n.value=!1,i.value=null,s.value=""},p=()=>{i.value&&s.value.trim()&&(t.rejectCommand(i.value.id,s.value.trim()),d())},v=()=>{t.setAIMonitoring(t.session.aiMonitoring)},_=()=>{const x=r.value.trim();x&&(t.addDangerousCommand(x),r.value="")},m=x=>{t.removeDangerousCommand(x)},g=x=>new Date(x).toLocaleTimeString();return(x,L)=>{var y;return ot(),ct("div",AT,[Le("div",RT,[L[4]||(L[4]=Le("h3",null,"Admin Control Panel",-1)),Le("div",{class:Br(["connection-status",a.value])},It(ht(t).connectionStatus),3)]),Le("div",kT,[L[5]||(L[5]=Le("h4",null,"Terminal Control",-1)),Le("div",TT,[Le("button",{onClick:l,class:Br([{active:ht(t).session.isPaused},"control-btn pause-btn"])},It(ht(t).session.isPaused?"Resume":"Pause")+" Terminal ",3),Le("button",{onClick:u,class:Br([{active:ht(t).isOutputSuppressed},"control-btn suppress-btn"])},It(ht(t).isOutputSuppressed?"Restore":"Suppress")+" Output ",3),Le("button",{onClick:f,class:"control-btn clear-btn"}," Clear Output ")])]),ht(t).hasPendingCommands?(ot(),ct("div",MT,[Le("h4",null,"Pending Commands ("+It(ht(t).pendingCommands.length)+")",1),Le("div",LT,[(ot(!0),ct(ir,null,Qo(ht(t).pendingCommands,M=>(ot(),ct("div",{key:M.id,class:"pending-command-item"},[Le("div",BT,[Le("div",OT,[Le("code",null,It(M.command),1)]),Le("div",IT,[Le("span",{class:Br(["risk-level",M.riskLevel])},It(M.riskLevel.toUpperCase()),3),Le("span",FT,It(g(M.timestamp)),1)]),M.aiSuggestion?(ot(),ct("div",DT,[L[6]||(L[6]=Le("strong",null,"AI Analysis:",-1)),_t(" "+It(M.aiSuggestion),1)])):Hr("",!0)]),Le("div",HT,[Le("button",{onClick:F=>c(M.id),class:"action-btn approve-btn"}," Approve ",8,PT),Le("button",{onClick:F=>h(M),class:"action-btn reject-btn"}," Reject ",8,jT)])]))),128))])])):Hr("",!0),Le("div",NT,[L[8]||(L[8]=Le("h4",null,"Recent Commands",-1)),Le("div",UT,[(ot(!0),ct(ir,null,Qo(o.value,M=>(ot(),ct("div",{key:M.id,class:Br(["history-item",M.status])},[Le("div",qT,[Le("code",null,It(M.command),1)]),Le("div",zT,[Le("span",{class:Br(["status",M.status])},It(M.status.toUpperCase()),3),Le("span",VT,It(g(M.timestamp)),1)]),M.rejectionReason?(ot(),ct("div",$T,[L[7]||(L[7]=Le("strong",null,"Rejected:",-1)),_t(" "+It(M.rejectionReason),1)])):Hr("",!0)],2))),128))])]),Le("div",WT,[L[12]||(L[12]=Le("h4",null,"AI Monitoring",-1)),Le("div",KT,[Le("label",YT,[ql(Le("input",{type:"checkbox","onUpdate:modelValue":L[0]||(L[0]=M=>ht(t).session.aiMonitoring=M),onChange:v},null,544),[[h4,ht(t).session.aiMonitoring]]),L[9]||(L[9]=Le("span",{class:"slider"},null,-1)),L[10]||(L[10]=_t(" AI Command Analysis "))]),Le("div",GT,[L[11]||(L[11]=Le("h5",null,"Dangerous Commands",-1)),Le("div",XT,[(ot(!0),ct(ir,null,Qo(ht(t).dangerousCommands,M=>(ot(),ct("span",{key:M,class:"command-tag"},[_t(It(M)+" ",1),Le("button",{onClick:F=>m(M),class:"remove-tag"},"×",8,ZT)]))),128))]),Le("div",QT,[ql(Le("input",{"onUpdate:modelValue":L[1]||(L[1]=M=>r.value=M),onKeyup:Ag(_,["enter"]),placeholder:"Add dangerous command pattern...",class:"add-input"},null,544),[[Kf,r.value]]),Le("button",{onClick:_,class:"add-btn"},"Add")])])])]),Le("div",JT,[L[17]||(L[17]=Le("h4",null,"System Status",-1)),Le("div",eM,[Le("div",tM,[L[13]||(L[13]=Le("span",{class:"label"},"Session ID:",-1)),Le("span",rM,It(ht(t).session.id),1)]),Le("div",nM,[L[14]||(L[14]=Le("span",{class:"label"},"Last Activity:",-1)),Le("span",iM,It(g(ht(t).session.lastActivity)),1)]),Le("div",sM,[L[15]||(L[15]=Le("span",{class:"label"},"Admin Control:",-1)),Le("span",{class:Br(["value",{active:ht(t).session.adminControlled}])},It(ht(t).session.adminControlled?"Enabled":"Disabled"),3)]),Le("div",oM,[L[16]||(L[16]=Le("span",{class:"label"},"Connection Attempts:",-1)),Le("span",aM,It(ht(t).connectionState.reconnectAttempts),1)])])]),n.value?(ot(),ct("div",{key:1,class:"modal-overlay",onClick:d},[Le("div",{class:"modal-content",onClick:L[3]||(L[3]=_4(()=>{},["stop"]))},[L[19]||(L[19]=Le("h3",null,"Reject Command",-1)),Le("div",lM,[Le("code",null,It((y=i.value)==null?void 0:y.command),1)]),Le("div",cM,[L[18]||(L[18]=Le("label",null,"Rejection Reason:",-1)),ql(Le("textarea",{"onUpdate:modelValue":L[2]||(L[2]=M=>s.value=M),placeholder:"Enter reason for rejection...",rows:"3"},null,512),[[Kf,s.value]])]),Le("div",{class:"modal-actions"},[Le("button",{onClick:p,class:"action-btn reject-btn"}," Reject Command "),Le("button",{onClick:d,class:"action-btn cancel-btn"}," Cancel ")])])])):Hr("",!0)])}}}),ni=(e,t)=>{const r=e.__vccOpts||e;for(const[n,i]of t)r[n]=i;return r},fM=ni(uM,[["__scopeId","data-v-6613b754"]]),hM=Lg("chat",()=>{const e=lt({id:"1",username:"User",role:"user",status:"online",permissions:{canControlTerminal:!1,canApproveCommands:!1,canViewLogs:!0},lastSeen:new Date}),t=lt([{id:"general",name:"General Chat",type:"general",participants:[],unreadCount:0,isActive:!0,permissions:{canSendMessages:!0,canControlTerminal:!1,canViewHistory:!0}},{id:"terminal-control",name:"Terminal Control",type:"terminal-control",participants:[],unreadCount:0,isActive:!0,permissions:{canSendMessages:!0,canControlTerminal:!0,canViewHistory:!0}},{id:"ai-assistance",name:"AI Assistant",type:"ai-assistance",participants:[],unreadCount:0,isActive:!0,permissions:{canSendMessages:!0,canControlTerminal:!1,canViewHistory:!0}}]),r=lt(new Map),n=lt("general"),i=lt(!1),s=lt(!1),a=lt(new Map);t.value.forEach(A=>{r.value.set(A.id,[])});const o=zt(()=>t.value.find(A=>A.id===n.value)),l=zt(()=>r.value.get(n.value)||[]),u=zt(()=>t.value.reduce((A,k)=>A+k.unreadCount,0)),f=zt(()=>t.value.flatMap(A=>A.participants).filter(A=>A.status==="online")),c=zt(()=>t.value.flatMap(A=>A.participants).filter(A=>A.role==="admin")),h=A=>{Object.assign(e.value,A)},d=A=>{i.value=A,A&&(s.value=!1)},p=A=>{s.value=A},v=A=>{const k=t.value.find(O=>O.id===A);k&&(n.value=A,k.unreadCount=0)},_=(A,k)=>{const O={...k,id:Date.now().toString()+Math.random().toString(36).substr(2,9),timestamp:new Date},B=r.value.get(A)||[];B.push(O),r.value.set(A,B);const $=t.value.find(Q=>Q.id===A);return $&&($.lastMessage=O,A!==n.value&&k.senderId!==e.value.id&&$.unreadCount++),O},m=(A,k="text",O)=>_(n.value,{content:A,senderId:e.value.id,username:e.value.username,avatar:e.value.avatar,roomId:n.value,type:k,status:"sending",metadata:O}),g=(A,k)=>{for(const[O,B]of r.value.entries()){const $=B.find(Q=>Q.id===A);if($){$.status=k;break}}},x=(A,k,O)=>_(A,{content:k,senderId:"system",username:"System",roomId:A,type:"system",status:"sent",metadata:O});return{currentUser:e,rooms:t,messages:r,activeRoomId:n,isConnected:i,isReconnecting:s,typingUsers:a,activeRoom:o,activeMessages:l,totalUnreadCount:u,onlineUsers:f,adminUsers:c,setCurrentUser:h,setConnectionStatus:d,setReconnecting:p,switchRoom:v,addMessage:_,sendMessage:m,updateMessageStatus:g,addSystemMessage:x,addCommandMessage:(A,k,O)=>_(A,{content:`Command: ${k}`,senderId:e.value.id,username:e.value.username,roomId:A,type:"command",status:"sent",metadata:{commandId:O}}),addUserToRoom:(A,k)=>{const O=t.value.find(B=>B.id===A);if(O){const B=O.participants.find($=>$.id===k.id);B?Object.assign(B,k):(O.participants.push(k),x(A,`${k.username} joined the room`))}},removeUserFromRoom:(A,k)=>{const O=t.value.find(B=>B.id===A);if(O){const B=O.participants.findIndex($=>$.id===k);if(B!==-1){const $=O.participants[B];O.participants.splice(B,1),x(A,`${$.username} left the room`)}}},updateUserStatus:(A,k)=>{t.value.forEach(O=>{const B=O.participants.find($=>$.id===A);B&&(B.status=k,B.lastSeen=new Date)})},setUserTyping:(A,k,O)=>{const B=a.value.get(A)||[];if(O)B.includes(k)||B.push(k);else{const $=B.indexOf(k);$!==-1&&B.splice($,1)}a.value.set(A,B)},getTypingUsers:A=>{const k=a.value.get(A)||[],O=t.value.find(B=>B.id===A);return O?k.map(B=>O.participants.find($=>$.id===B)).filter(B=>B&&B.id!==e.value.id):[]},clearMessages:A=>{r.value.set(A,[])},markAllAsRead:A=>{const k=t.value.find(O=>O.id===A);k&&(k.unreadCount=0)}}}),dM={class:"chat-container"},pM=Li({__name:"ChatComponent",setup(e){const t=cu();hM();const r=lt("1"),n=lt("1"),i=lt(!1),s=lt([{roomId:"1",roomName:"General Chat",avatar:"",unreadCount:0,index:0,lastMessage:{content:"Welcome to the chat!",timestamp:new Date().toISOString(),saved:!0,distributed:!0,seen:!0,new:!1},users:[{_id:"1",username:"User 1",avatar:"",status:{state:"online",lastChanged:new Date().toISOString()}},{_id:"2",username:"User 2",avatar:"",status:{state:"online",lastChanged:new Date().toISOString()}}]}]),a=lt([{_id:"1",content:"Welcome to vue-advanced-chat!",senderId:"2",username:"System",avatar:"",date:new Date().toISOString().split("T")[0],timestamp:new Date().toISOString(),system:!1,saved:!0,distributed:!0,seen:!0,deleted:!1}]),o=m=>{console.log("Send message:",m);const g={_id:Date.now().toString(),content:m.content,senderId:r.value,username:"You",avatar:"",date:new Date().toISOString().split("T")[0],timestamp:new Date().toISOString(),system:!1,saved:!0,distributed:!0,seen:!0,deleted:!1,files:m.files||[]};a.value.push(g),t.sendChatMessage({id:g._id,content:g.content,senderId:g.senderId,username:g.username,timestamp:g.timestamp,roomId:n.value})},l=({room:m,options:g})=>{console.log("Fetch messages for room:",m.roomId),i.value=!0},u=({room:m,options:g})=>{console.log("Fetch more messages for room:",m.roomId)},f=()=>{console.log("Add room")},c=({action:m,roomId:g})=>{console.log("Room action:",m,g)},h=({action:m,message:g,roomId:x})=>{console.log("Message action:",m,g,x)},d=({action:m,message:g,roomId:x})=>{console.log("Menu action:",m,g,x)},p=({action:m,messages:g,roomId:x})=>{console.log("Message selection action:",m,g,x)},v=({message:m,roomId:g})=>{console.log("Typing message:",m,g)},_=({message:m,roomId:g})=>{console.log("Textarea action:",m,g)};return Gh(()=>{t.onChatMessage(m=>{console.log("Received chat message:",m);const g={_id:m.id||Date.now().toString(),content:m.content,senderId:m.senderId,username:m.username||"Unknown",avatar:m.avatar||"",date:new Date().toISOString().split("T")[0],timestamp:m.timestamp||new Date().toISOString(),system:!1,saved:!0,distributed:!0,seen:!0,deleted:!1};a.value.push(g)}),i.value=!0}),Ba(()=>{t.offChatMessage()}),(m,g)=>{const x=eg("vue-advanced-chat");return ot(),ct("div",dM,[Et(x,{"current-user-id":r.value,rooms:s.value,messages:a.value,"messages-loaded":i.value,"room-id":n.value,onSendMessage:o,onFetchMessages:l,onFetchMoreMessages:u,onAddRoom:f,onRoomActionHandler:c,onMessageActionHandler:h,onMenuActionHandler:d,onMessageSelectionActionHandler:p,onTypingMessage:v,onTextareaActionHandler:_},null,8,["current-user-id","rooms","messages","messages-loaded","room-id"])])}}}),mM=ni(pM,[["__scopeId","data-v-0a957bcd"]]),_M={class:"terminal-container"},gM={key:0,class:"connection-status"},vM={key:0,class:"reconnect-info"},yM={key:1,class:"terminal-overlay"},bM={class:"overlay-content"},wM={key:0,class:"block-reason"},SM={key:1,class:"block-reason"},CM={class:"pending-commands"},xM={key:2,class:"block-reason"},EM={key:3,class:"block-reason"},AM={class:"command-input-container"},RM=["disabled"],kM=["disabled"],TM={key:2,class:"vue-term-container"},MM=Li({__name:"TerminalComponent",setup(e){const t=cu(),r=lt(null),n=lt(null),i=lt(""),s=lt(),a=lt(!1),o=zt(()=>{switch(t.connectionStatus){case"connected":return"status-connected";case"connecting":return"status-connecting";case"reconnecting":return"status-reconnecting";default:return"status-disconnected"}}),l=zt(()=>{switch(t.connectionStatus){case"connected":return"Connected";case"connecting":return"Connecting...";case"reconnecting":return"Reconnecting...";default:return"Disconnected"}}),u=v=>{console.log("Shell Output:",v)},f=v=>{console.log("Control Output:",v)},c=()=>{console.log("Terminal connected")},h=()=>{console.log("Terminal disconnected")},d=v=>{console.error("Terminal error:",v)},p=()=>{const v=i.value.trim();if(!v||t.isTerminalBlocked)return;t.submitCommand(v)&&(i.value="")};return Qs(()=>t.outputBuffer.length,()=>{Oc(()=>{s.value&&(s.value.scrollTop=s.value.scrollHeight)})}),Gh(()=>{t.onShellOutput(u),t.onControlOutput(f),t.onConnect(c),t.onDisconnect(h),t.onError(d)}),Ba(()=>{t.offShellOutput(u),t.offControlOutput(f)}),(v,_)=>{const m=eg("VueTerm");return ot(),ct("div",_M,[ht(t).connectionState.isConnected?Hr("",!0):(ot(),ct("div",gM,[Le("div",{class:Br(["status-indicator",o.value])},It(l.value),3),ht(t).connectionState.isReconnecting?(ot(),ct("div",vM," Reconnection attempt: "+It(ht(t).connectionState.reconnectAttempts)+"/"+It(ht(t).connectionState.maxReconnectAttempts),1)):Hr("",!0)])),ht(t).isTerminalBlocked?(ot(),ct("div",yM,[Le("div",bM,[ht(t).session.isPaused?(ot(),ct("div",wM,_[1]||(_[1]=[Le("h3",null,"Terminal Paused",-1),Le("p",null,"Terminal has been paused by administrator",-1)]))):ht(t).hasPendingCommands?(ot(),ct("div",SM,[_[2]||(_[2]=Le("h3",null,"Commands Pending Review",-1)),Le("p",null,It(ht(t).pendingCommands.length)+" command(s) awaiting approval",1),Le("div",CM,[(ot(!0),ct(ir,null,Qo(ht(t).pendingCommands,g=>(ot(),ct("div",{key:g.id,class:"pending-command"},[Le("code",null,It(g.command),1),Le("span",{class:Br(["risk-level",g.riskLevel])},It(g.riskLevel),3)]))),128))])])):ht(t).isOutputSuppressed?(ot(),ct("div",xM,_[3]||(_[3]=[Le("h3",null,"Output Suppressed",-1),Le("p",null,"Terminal output is currently suppressed",-1)]))):ht(t).connectionState.isConnected?Hr("",!0):(ot(),ct("div",EM,_[4]||(_[4]=[Le("h3",null,"Connection Lost",-1),Le("p",null,"Reconnecting to terminal service...",-1)])))])])):Hr("",!0),Le("div",{class:"terminal-output",ref_key:"outputContainer",ref:s},[(ot(!0),ct(ir,null,Qo(ht(t).outputBuffer,(g,x)=>(ot(),ct("div",{key:x,class:"output-line"},It(g),1))),128))],512),Le("div",AM,[ql(Le("input",{"onUpdate:modelValue":_[0]||(_[0]=g=>i.value=g),onKeyup:Ag(p,["enter"]),disabled:ht(t).isTerminalBlocked,class:"command-input",placeholder:"Enter command..."},null,40,RM),[[Kf,i.value]]),Le("button",{onClick:p,disabled:ht(t).isTerminalBlocked||!i.value.trim(),class:"submit-button"}," Execute ",8,kM)]),a.value?(ot(),ct("div",TM,[Et(m,{"shell-ws":r.value,"ctl-ws":n.value},null,8,["shell-ws","ctl-ws"])])):Hr("",!0)])}}}),LM=ni(MM,[["__scopeId","data-v-b33f56fc"]]),BM={id:"app-container"},OM={class:"main-content"},IM={id:"terminal-container"},FM={class:"chat-header"},DM={class:"admin-header"},HM={class:"admin-controls"},PM=["title"],jM={class:"control-buttons"},NM=Li({__name:"App",setup(e){const t=lt(!0),r=lt(!1),n=lt(!0),i=lt(!1),s=lt({x:0,y:0}),a=lt({x:20,y:60}),o=u=>{if(!i.value)return;const f=u.clientX-s.value.x,c=u.clientY-s.value.y,h=window.innerWidth-300,d=window.innerHeight-400;a.value={x:Math.max(0,Math.min(f,h)),y:Math.max(0,Math.min(c,d))}},l=()=>{i.value=!1,document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",l)};return Ba(()=>{document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",l)}),(u,f)=>(ot(),ct("div",BM,[Le("div",OM,[Le("div",IM,[Et(LM)]),n.value?(ot(),ct("div",{key:0,id:"chat-container",class:Br({"chat-bottom":!r.value})},[Le("div",FM,[f[5]||(f[5]=Le("h3",null,"Chat",-1)),Le("button",{onClick:f[0]||(f[0]=c=>n.value=!1),class:"close-btn"},"×")]),Et(mM)],2)):Hr("",!0)]),t.value?(ot(),ct("div",{key:0,id:"admin-container",class:Br({"admin-floating":r.value,"admin-fixed":!r.value})},[Le("div",DM,[f[6]||(f[6]=Le("h3",null,"Control Panel",-1)),Le("div",HM,[Le("button",{onClick:f[1]||(f[1]=c=>r.value=!r.value),class:"float-toggle-btn",title:r.value?"Dock Panel":"Float Panel"},It(r.value?"📌":"🔓"),9,PM),Le("button",{onClick:f[2]||(f[2]=c=>t.value=!1),class:"close-btn"},"×")])]),Et(fM)],2)):Hr("",!0),Le("div",jM,[t.value?Hr("",!0):(ot(),ct("button",{key:0,onClick:f[3]||(f[3]=c=>t.value=!0),class:"control-btn admin-btn"}," Admin ")),n.value?Hr("",!0):(ot(),ct("button",{key:1,onClick:f[4]||(f[4]=c=>n.value=!0),class:"control-btn chat-btn"}," Chat "))])]))}}),UM="modulepreload",qM=function(e,t){return new URL(e,t).href},Ym={},zM=function(t,r,n){let i=Promise.resolve();if(r&&r.length>0){let a=function(f){return Promise.all(f.map(c=>Promise.resolve(c).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};const o=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),u=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));i=a(r.map(f=>{if(f=qM(f,n),f in Ym)return;Ym[f]=!0;const c=f.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(!!n)for(let v=o.length-1;v>=0;v--){const _=o[v];if(_.href===f&&(!c||_.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${f}"]${h}`))return;const p=document.createElement("link");if(p.rel=c?"stylesheet":UM,c||(p.as="script"),p.crossOrigin="",p.href=f,u&&p.setAttribute("nonce",u),document.head.appendChild(p),c)return new Promise((v,_)=>{p.addEventListener("load",v),p.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${f}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return t().catch(s)})};/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const Ws=typeof document<"u";function bb(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function VM(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&bb(e.default)}const St=Object.assign;function Mf(e,t){const r={};for(const n in t){const i=t[n];r[n]=hn(i)?i.map(e):e(i)}return r}const la=()=>{},hn=Array.isArray,wb=/#/g,$M=/&/g,WM=/\//g,KM=/=/g,YM=/\?/g,Sb=/\+/g,GM=/%5B/g,XM=/%5D/g,Cb=/%5E/g,ZM=/%60/g,xb=/%7B/g,QM=/%7C/g,Eb=/%7D/g,JM=/%20/g;function Vd(e){return encodeURI(""+e).replace(QM,"|").replace(GM,"[").replace(XM,"]")}function eL(e){return Vd(e).replace(xb,"{").replace(Eb,"}").replace(Cb,"^")}function xh(e){return Vd(e).replace(Sb,"%2B").replace(JM,"+").replace(wb,"%23").replace($M,"%26").replace(ZM,"`").replace(xb,"{").replace(Eb,"}").replace(Cb,"^")}function tL(e){return xh(e).replace(KM,"%3D")}function rL(e){return Vd(e).replace(wb,"%23").replace(YM,"%3F")}function nL(e){return e==null?"":rL(e).replace(WM,"%2F")}function Ra(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const iL=/\/$/,sL=e=>e.replace(iL,"");function Lf(e,t,r="/"){let n,i={},s="",a="";const o=t.indexOf("#");let l=t.indexOf("?");return o<l&&o>=0&&(l=-1),l>-1&&(n=t.slice(0,l),s=t.slice(l+1,o>-1?o:t.length),i=e(s)),o>-1&&(n=n||t.slice(0,o),a=t.slice(o,t.length)),n=cL(n??t,r),{fullPath:n+(s&&"?")+s+a,path:n,query:i,hash:Ra(a)}}function oL(e,t){const r=t.query?e(t.query):"";return t.path+(r&&"?")+r+(t.hash||"")}function Gm(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function aL(e,t,r){const n=t.matched.length-1,i=r.matched.length-1;return n>-1&&n===i&&uo(t.matched[n],r.matched[i])&&Ab(t.params,r.params)&&e(t.query)===e(r.query)&&t.hash===r.hash}function uo(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Ab(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(!lL(e[r],t[r]))return!1;return!0}function lL(e,t){return hn(e)?Xm(e,t):hn(t)?Xm(t,e):e===t}function Xm(e,t){return hn(t)?e.length===t.length&&e.every((r,n)=>r===t[n]):e.length===1&&e[0]===t}function cL(e,t){if(e.startsWith("/"))return e;if(!e)return t;const r=t.split("/"),n=e.split("/"),i=n[n.length-1];(i===".."||i===".")&&n.push("");let s=r.length-1,a,o;for(a=0;a<n.length;a++)if(o=n[a],o!==".")if(o==="..")s>1&&s--;else break;return r.slice(0,s).join("/")+"/"+n.slice(a).join("/")}const hi={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var ka;(function(e){e.pop="pop",e.push="push"})(ka||(ka={}));var ca;(function(e){e.back="back",e.forward="forward",e.unknown=""})(ca||(ca={}));function uL(e){if(!e)if(Ws){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),sL(e)}const fL=/^[^#]+#/;function hL(e,t){return e.replace(fL,"#")+t}function dL(e,t){const r=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-r.left-(t.left||0),top:n.top-r.top-(t.top||0)}}const uu=()=>({left:window.scrollX,top:window.scrollY});function pL(e){let t;if("el"in e){const r=e.el,n=typeof r=="string"&&r.startsWith("#"),i=typeof r=="string"?n?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!i)return;t=dL(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function Zm(e,t){return(history.state?history.state.position-t:-1)+e}const Eh=new Map;function mL(e,t){Eh.set(e,t)}function _L(e){const t=Eh.get(e);return Eh.delete(e),t}let gL=()=>location.protocol+"//"+location.host;function Rb(e,t){const{pathname:r,search:n,hash:i}=t,s=e.indexOf("#");if(s>-1){let o=i.includes(e.slice(s))?e.slice(s).length:1,l=i.slice(o);return l[0]!=="/"&&(l="/"+l),Gm(l,"")}return Gm(r,e)+n+i}function vL(e,t,r,n){let i=[],s=[],a=null;const o=({state:h})=>{const d=Rb(e,location),p=r.value,v=t.value;let _=0;if(h){if(r.value=d,t.value=h,a&&a===p){a=null;return}_=v?h.position-v.position:0}else n(d);i.forEach(m=>{m(r.value,p,{delta:_,type:ka.pop,direction:_?_>0?ca.forward:ca.back:ca.unknown})})};function l(){a=r.value}function u(h){i.push(h);const d=()=>{const p=i.indexOf(h);p>-1&&i.splice(p,1)};return s.push(d),d}function f(){const{history:h}=window;h.state&&h.replaceState(St({},h.state,{scroll:uu()}),"")}function c(){for(const h of s)h();s=[],window.removeEventListener("popstate",o),window.removeEventListener("beforeunload",f)}return window.addEventListener("popstate",o),window.addEventListener("beforeunload",f,{passive:!0}),{pauseListeners:l,listen:u,destroy:c}}function Qm(e,t,r,n=!1,i=!1){return{back:e,current:t,forward:r,replaced:n,position:window.history.length,scroll:i?uu():null}}function yL(e){const{history:t,location:r}=window,n={value:Rb(e,r)},i={value:t.state};i.value||s(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function s(l,u,f){const c=e.indexOf("#"),h=c>-1?(r.host&&document.querySelector("base")?e:e.slice(c))+l:gL()+e+l;try{t[f?"replaceState":"pushState"](u,"",h),i.value=u}catch(d){console.error(d),r[f?"replace":"assign"](h)}}function a(l,u){const f=St({},t.state,Qm(i.value.back,l,i.value.forward,!0),u,{position:i.value.position});s(l,f,!0),n.value=l}function o(l,u){const f=St({},i.value,t.state,{forward:l,scroll:uu()});s(f.current,f,!0);const c=St({},Qm(n.value,l,null),{position:f.position+1},u);s(l,c,!1),n.value=l}return{location:n,state:i,push:o,replace:a}}function bL(e){e=uL(e);const t=yL(e),r=vL(e,t.state,t.location,t.replace);function n(s,a=!0){a||r.pauseListeners(),history.go(s)}const i=St({location:"",base:e,go:n,createHref:hL.bind(null,e)},t,r);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function wL(e){return typeof e=="string"||e&&typeof e=="object"}function kb(e){return typeof e=="string"||typeof e=="symbol"}const Tb=Symbol("");var Jm;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(Jm||(Jm={}));function fo(e,t){return St(new Error,{type:e,[Tb]:!0},t)}function Pn(e,t){return e instanceof Error&&Tb in e&&(t==null||!!(e.type&t))}const e_="[^/]+?",SL={sensitive:!1,strict:!1,start:!0,end:!0},CL=/[.+*?^${}()[\]/\\]/g;function xL(e,t){const r=St({},SL,t),n=[];let i=r.start?"^":"";const s=[];for(const u of e){const f=u.length?[]:[90];r.strict&&!u.length&&(i+="/");for(let c=0;c<u.length;c++){const h=u[c];let d=40+(r.sensitive?.25:0);if(h.type===0)c||(i+="/"),i+=h.value.replace(CL,"\\$&"),d+=40;else if(h.type===1){const{value:p,repeatable:v,optional:_,regexp:m}=h;s.push({name:p,repeatable:v,optional:_});const g=m||e_;if(g!==e_){d+=10;try{new RegExp(`(${g})`)}catch(L){throw new Error(`Invalid custom RegExp for param "${p}" (${g}): `+L.message)}}let x=v?`((?:${g})(?:/(?:${g}))*)`:`(${g})`;c||(x=_&&u.length<2?`(?:/${x})`:"/"+x),_&&(x+="?"),i+=x,d+=20,_&&(d+=-8),v&&(d+=-20),g===".*"&&(d+=-50)}f.push(d)}n.push(f)}if(r.strict&&r.end){const u=n.length-1;n[u][n[u].length-1]+=.7000000000000001}r.strict||(i+="/?"),r.end?i+="$":r.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const a=new RegExp(i,r.sensitive?"":"i");function o(u){const f=u.match(a),c={};if(!f)return null;for(let h=1;h<f.length;h++){const d=f[h]||"",p=s[h-1];c[p.name]=d&&p.repeatable?d.split("/"):d}return c}function l(u){let f="",c=!1;for(const h of e){(!c||!f.endsWith("/"))&&(f+="/"),c=!1;for(const d of h)if(d.type===0)f+=d.value;else if(d.type===1){const{value:p,repeatable:v,optional:_}=d,m=p in u?u[p]:"";if(hn(m)&&!v)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const g=hn(m)?m.join("/"):m;if(!g)if(_)h.length<2&&(f.endsWith("/")?f=f.slice(0,-1):c=!0);else throw new Error(`Missing required param "${p}"`);f+=g}}return f||"/"}return{re:a,score:n,keys:s,parse:o,stringify:l}}function EL(e,t){let r=0;for(;r<e.length&&r<t.length;){const n=t[r]-e[r];if(n)return n;r++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function Mb(e,t){let r=0;const n=e.score,i=t.score;for(;r<n.length&&r<i.length;){const s=EL(n[r],i[r]);if(s)return s;r++}if(Math.abs(i.length-n.length)===1){if(t_(n))return 1;if(t_(i))return-1}return i.length-n.length}function t_(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const AL={type:0,value:""},RL=/[a-zA-Z0-9_]/;function kL(e){if(!e)return[[]];if(e==="/")return[[AL]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(d){throw new Error(`ERR (${r})/"${u}": ${d}`)}let r=0,n=r;const i=[];let s;function a(){s&&i.push(s),s=[]}let o=0,l,u="",f="";function c(){u&&(r===0?s.push({type:0,value:u}):r===1||r===2||r===3?(s.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:u,regexp:f,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),u="")}function h(){u+=l}for(;o<e.length;){if(l=e[o++],l==="\\"&&r!==2){n=r,r=4;continue}switch(r){case 0:l==="/"?(u&&c(),a()):l===":"?(c(),r=1):h();break;case 4:h(),r=n;break;case 1:l==="("?r=2:RL.test(l)?h():(c(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&o--);break;case 2:l===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+l:r=3:f+=l;break;case 3:c(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&o--,f="";break;default:t("Unknown state");break}}return r===2&&t(`Unfinished custom RegExp for param "${u}"`),c(),a(),i}function TL(e,t,r){const n=xL(kL(e.path),r),i=St(n,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function ML(e,t){const r=[],n=new Map;t=s_({strict:!1,end:!0,sensitive:!1},t);function i(c){return n.get(c)}function s(c,h,d){const p=!d,v=n_(c);v.aliasOf=d&&d.record;const _=s_(t,c),m=[v];if("alias"in c){const L=typeof c.alias=="string"?[c.alias]:c.alias;for(const y of L)m.push(n_(St({},v,{components:d?d.record.components:v.components,path:y,aliasOf:d?d.record:v})))}let g,x;for(const L of m){const{path:y}=L;if(h&&y[0]!=="/"){const M=h.record.path,F=M[M.length-1]==="/"?"":"/";L.path=h.record.path+(y&&F+y)}if(g=TL(L,h,_),d?d.alias.push(g):(x=x||g,x!==g&&x.alias.push(g),p&&c.name&&!i_(g)&&a(c.name)),Lb(g)&&l(g),v.children){const M=v.children;for(let F=0;F<M.length;F++)s(M[F],g,d&&d.children[F])}d=d||g}return x?()=>{a(x)}:la}function a(c){if(kb(c)){const h=n.get(c);h&&(n.delete(c),r.splice(r.indexOf(h),1),h.children.forEach(a),h.alias.forEach(a))}else{const h=r.indexOf(c);h>-1&&(r.splice(h,1),c.record.name&&n.delete(c.record.name),c.children.forEach(a),c.alias.forEach(a))}}function o(){return r}function l(c){const h=OL(c,r);r.splice(h,0,c),c.record.name&&!i_(c)&&n.set(c.record.name,c)}function u(c,h){let d,p={},v,_;if("name"in c&&c.name){if(d=n.get(c.name),!d)throw fo(1,{location:c});_=d.record.name,p=St(r_(h.params,d.keys.filter(x=>!x.optional).concat(d.parent?d.parent.keys.filter(x=>x.optional):[]).map(x=>x.name)),c.params&&r_(c.params,d.keys.map(x=>x.name))),v=d.stringify(p)}else if(c.path!=null)v=c.path,d=r.find(x=>x.re.test(v)),d&&(p=d.parse(v),_=d.record.name);else{if(d=h.name?n.get(h.name):r.find(x=>x.re.test(h.path)),!d)throw fo(1,{location:c,currentLocation:h});_=d.record.name,p=St({},h.params,c.params),v=d.stringify(p)}const m=[];let g=d;for(;g;)m.unshift(g.record),g=g.parent;return{name:_,path:v,params:p,matched:m,meta:BL(m)}}e.forEach(c=>s(c));function f(){r.length=0,n.clear()}return{addRoute:s,resolve:u,removeRoute:a,clearRoutes:f,getRoutes:o,getRecordMatcher:i}}function r_(e,t){const r={};for(const n of t)n in e&&(r[n]=e[n]);return r}function n_(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:LL(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function LL(e){const t={},r=e.props||!1;if("component"in e)t.default=r;else for(const n in e.components)t[n]=typeof r=="object"?r[n]:r;return t}function i_(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function BL(e){return e.reduce((t,r)=>St(t,r.meta),{})}function s_(e,t){const r={};for(const n in e)r[n]=n in t?t[n]:e[n];return r}function OL(e,t){let r=0,n=t.length;for(;r!==n;){const s=r+n>>1;Mb(e,t[s])<0?n=s:r=s+1}const i=IL(e);return i&&(n=t.lastIndexOf(i,n-1)),n}function IL(e){let t=e;for(;t=t.parent;)if(Lb(t)&&Mb(e,t)===0)return t}function Lb({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function FL(e){const t={};if(e===""||e==="?")return t;const n=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<n.length;++i){const s=n[i].replace(Sb," "),a=s.indexOf("="),o=Ra(a<0?s:s.slice(0,a)),l=a<0?null:Ra(s.slice(a+1));if(o in t){let u=t[o];hn(u)||(u=t[o]=[u]),u.push(l)}else t[o]=l}return t}function o_(e){let t="";for(let r in e){const n=e[r];if(r=tL(r),n==null){n!==void 0&&(t+=(t.length?"&":"")+r);continue}(hn(n)?n.map(s=>s&&xh(s)):[n&&xh(n)]).forEach(s=>{s!==void 0&&(t+=(t.length?"&":"")+r,s!=null&&(t+="="+s))})}return t}function DL(e){const t={};for(const r in e){const n=e[r];n!==void 0&&(t[r]=hn(n)?n.map(i=>i==null?null:""+i):n==null?n:""+n)}return t}const HL=Symbol(""),a_=Symbol(""),$d=Symbol(""),Bb=Symbol(""),Ah=Symbol("");function Po(){let e=[];function t(n){return e.push(n),()=>{const i=e.indexOf(n);i>-1&&e.splice(i,1)}}function r(){e=[]}return{add:t,list:()=>e.slice(),reset:r}}function yi(e,t,r,n,i,s=a=>a()){const a=n&&(n.enterCallbacks[i]=n.enterCallbacks[i]||[]);return()=>new Promise((o,l)=>{const u=h=>{h===!1?l(fo(4,{from:r,to:t})):h instanceof Error?l(h):wL(h)?l(fo(2,{from:t,to:h})):(a&&n.enterCallbacks[i]===a&&typeof h=="function"&&a.push(h),o())},f=s(()=>e.call(n&&n.instances[i],t,r,u));let c=Promise.resolve(f);e.length<3&&(c=c.then(u)),c.catch(h=>l(h))})}function Bf(e,t,r,n,i=s=>s()){const s=[];for(const a of e)for(const o in a.components){let l=a.components[o];if(!(t!=="beforeRouteEnter"&&!a.instances[o]))if(bb(l)){const f=(l.__vccOpts||l)[t];f&&s.push(yi(f,r,n,a,o,i))}else{let u=l();s.push(()=>u.then(f=>{if(!f)throw new Error(`Couldn't resolve component "${o}" at "${a.path}"`);const c=VM(f)?f.default:f;a.mods[o]=f,a.components[o]=c;const d=(c.__vccOpts||c)[t];return d&&yi(d,r,n,a,o,i)()}))}}return s}function l_(e){const t=kn($d),r=kn(Bb),n=zt(()=>{const l=ht(e.to);return t.resolve(l)}),i=zt(()=>{const{matched:l}=n.value,{length:u}=l,f=l[u-1],c=r.matched;if(!f||!c.length)return-1;const h=c.findIndex(uo.bind(null,f));if(h>-1)return h;const d=c_(l[u-2]);return u>1&&c_(f)===d&&c[c.length-1].path!==d?c.findIndex(uo.bind(null,l[u-2])):h}),s=zt(()=>i.value>-1&&qL(r.params,n.value.params)),a=zt(()=>i.value>-1&&i.value===r.matched.length-1&&Ab(r.params,n.value.params));function o(l={}){if(UL(l)){const u=t[ht(e.replace)?"replace":"push"](ht(e.to)).catch(la);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:n,href:zt(()=>n.value.href),isActive:s,isExactActive:a,navigate:o}}function PL(e){return e.length===1?e[0]:e}const jL=Li({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:l_,setup(e,{slots:t}){const r=Ma(l_(e)),{options:n}=kn($d),i=zt(()=>({[u_(e.activeClass,n.linkActiveClass,"router-link-active")]:r.isActive,[u_(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const s=t.default&&PL(t.default(r));return e.custom?s:Cg("a",{"aria-current":r.isExactActive?e.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:i.value},s)}}}),NL=jL;function UL(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function qL(e,t){for(const r in t){const n=t[r],i=e[r];if(typeof n=="string"){if(n!==i)return!1}else if(!hn(i)||i.length!==n.length||n.some((s,a)=>s!==i[a]))return!1}return!0}function c_(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const u_=(e,t,r)=>e??t??r,zL=Li({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:r}){const n=kn(Ah),i=zt(()=>e.route||n.value),s=kn(a_,0),a=zt(()=>{let u=ht(s);const{matched:f}=i.value;let c;for(;(c=f[u])&&!c.components;)u++;return u}),o=zt(()=>i.value.matched[a.value]);zl(a_,zt(()=>a.value+1)),zl(HL,o),zl(Ah,i);const l=lt();return Qs(()=>[l.value,o.value,e.name],([u,f,c],[h,d,p])=>{f&&(f.instances[c]=u,d&&d!==f&&u&&u===h&&(f.leaveGuards.size||(f.leaveGuards=d.leaveGuards),f.updateGuards.size||(f.updateGuards=d.updateGuards))),u&&f&&(!d||!uo(f,d)||!h)&&(f.enterCallbacks[c]||[]).forEach(v=>v(u))},{flush:"post"}),()=>{const u=i.value,f=e.name,c=o.value,h=c&&c.components[f];if(!h)return f_(r.default,{Component:h,route:u});const d=c.props[f],p=d?d===!0?u.params:typeof d=="function"?d(u):d:null,_=Cg(h,St({},p,t,{onVnodeUnmounted:m=>{m.component.isUnmounted&&(c.instances[f]=null)},ref:l}));return f_(r.default,{Component:_,route:u})||_}}});function f_(e,t){if(!e)return null;const r=e(t);return r.length===1?r[0]:r}const VL=zL;function $L(e){const t=ML(e.routes,e),r=e.parseQuery||FL,n=e.stringifyQuery||o_,i=e.history,s=Po(),a=Po(),o=Po(),l=k2(hi);let u=hi;Ws&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=Mf.bind(null,I=>""+I),c=Mf.bind(null,nL),h=Mf.bind(null,Ra);function d(I,K){let ee,ae;return kb(I)?(ee=t.getRecordMatcher(I),ae=K):ae=I,t.addRoute(ae,ee)}function p(I){const K=t.getRecordMatcher(I);K&&t.removeRoute(K)}function v(){return t.getRoutes().map(I=>I.record)}function _(I){return!!t.getRecordMatcher(I)}function m(I,K){if(K=St({},K||l.value),typeof I=="string"){const N=Lf(r,I,K.path),W=t.resolve({path:N.path},K),re=i.createHref(N.fullPath);return St(N,W,{params:h(W.params),hash:Ra(N.hash),redirectedFrom:void 0,href:re})}let ee;if(I.path!=null)ee=St({},I,{path:Lf(r,I.path,K.path).path});else{const N=St({},I.params);for(const W in N)N[W]==null&&delete N[W];ee=St({},I,{params:c(N)}),K.params=c(K.params)}const ae=t.resolve(ee,K),Me=I.hash||"";ae.params=f(h(ae.params));const S=oL(n,St({},I,{hash:eL(Me),path:ae.path})),E=i.createHref(S);return St({fullPath:S,hash:Me,query:n===o_?DL(I.query):I.query||{}},ae,{redirectedFrom:void 0,href:E})}function g(I){return typeof I=="string"?Lf(r,I,l.value.path):St({},I)}function x(I,K){if(u!==I)return fo(8,{from:K,to:I})}function L(I){return F(I)}function y(I){return L(St(g(I),{replace:!0}))}function M(I){const K=I.matched[I.matched.length-1];if(K&&K.redirect){const{redirect:ee}=K;let ae=typeof ee=="function"?ee(I):ee;return typeof ae=="string"&&(ae=ae.includes("?")||ae.includes("#")?ae=g(ae):{path:ae},ae.params={}),St({query:I.query,hash:I.hash,params:ae.path!=null?{}:I.params},ae)}}function F(I,K){const ee=u=m(I),ae=l.value,Me=I.state,S=I.force,E=I.replace===!0,N=M(ee);if(N)return F(St(g(N),{state:typeof N=="object"?St({},Me,N.state):Me,force:S,replace:E}),K||ee);const W=ee;W.redirectedFrom=K;let re;return!S&&aL(n,ae,ee)&&(re=fo(16,{to:W,from:ae}),P(ae,ae,!0,!1)),(re?Promise.resolve(re):b(W,ae)).catch(ne=>Pn(ne)?Pn(ne,2)?ne:w(ne):X(ne,W,ae)).then(ne=>{if(ne){if(Pn(ne,2))return F(St({replace:E},g(ne.to),{state:typeof ne.to=="object"?St({},Me,ne.to.state):Me,force:S}),K||W)}else ne=A(W,ae,!0,E,Me);return R(W,ae,ne),ne})}function D(I,K){const ee=x(I,K);return ee?Promise.reject(ee):Promise.resolve()}function H(I){const K=le.values().next().value;return K&&typeof K.runWithContext=="function"?K.runWithContext(I):I()}function b(I,K){let ee;const[ae,Me,S]=WL(I,K);ee=Bf(ae.reverse(),"beforeRouteLeave",I,K);for(const N of ae)N.leaveGuards.forEach(W=>{ee.push(yi(W,I,K))});const E=D.bind(null,I,K);return ee.push(E),Z(ee).then(()=>{ee=[];for(const N of s.list())ee.push(yi(N,I,K));return ee.push(E),Z(ee)}).then(()=>{ee=Bf(Me,"beforeRouteUpdate",I,K);for(const N of Me)N.updateGuards.forEach(W=>{ee.push(yi(W,I,K))});return ee.push(E),Z(ee)}).then(()=>{ee=[];for(const N of S)if(N.beforeEnter)if(hn(N.beforeEnter))for(const W of N.beforeEnter)ee.push(yi(W,I,K));else ee.push(yi(N.beforeEnter,I,K));return ee.push(E),Z(ee)}).then(()=>(I.matched.forEach(N=>N.enterCallbacks={}),ee=Bf(S,"beforeRouteEnter",I,K,H),ee.push(E),Z(ee))).then(()=>{ee=[];for(const N of a.list())ee.push(yi(N,I,K));return ee.push(E),Z(ee)}).catch(N=>Pn(N,8)?N:Promise.reject(N))}function R(I,K,ee){o.list().forEach(ae=>H(()=>ae(I,K,ee)))}function A(I,K,ee,ae,Me){const S=x(I,K);if(S)return S;const E=K===hi,N=Ws?history.state:{};ee&&(ae||E?i.replace(I.fullPath,St({scroll:E&&N&&N.scroll},Me)):i.push(I.fullPath,Me)),l.value=I,P(I,K,ee,E),w()}let k;function O(){k||(k=i.listen((I,K,ee)=>{if(!Y.listening)return;const ae=m(I),Me=M(ae);if(Me){F(St(Me,{replace:!0,force:!0}),ae).catch(la);return}u=ae;const S=l.value;Ws&&mL(Zm(S.fullPath,ee.delta),uu()),b(ae,S).catch(E=>Pn(E,12)?E:Pn(E,2)?(F(St(g(E.to),{force:!0}),ae).then(N=>{Pn(N,20)&&!ee.delta&&ee.type===ka.pop&&i.go(-1,!1)}).catch(la),Promise.reject()):(ee.delta&&i.go(-ee.delta,!1),X(E,ae,S))).then(E=>{E=E||A(ae,S,!1),E&&(ee.delta&&!Pn(E,8)?i.go(-ee.delta,!1):ee.type===ka.pop&&Pn(E,20)&&i.go(-1,!1)),R(ae,S,E)}).catch(la)}))}let B=Po(),$=Po(),Q;function X(I,K,ee){w(I);const ae=$.list();return ae.length?ae.forEach(Me=>Me(I,K,ee)):console.error(I),Promise.reject(I)}function oe(){return Q&&l.value!==hi?Promise.resolve():new Promise((I,K)=>{B.add([I,K])})}function w(I){return Q||(Q=!I,O(),B.list().forEach(([K,ee])=>I?ee(I):K()),B.reset()),I}function P(I,K,ee,ae){const{scrollBehavior:Me}=e;if(!Ws||!Me)return Promise.resolve();const S=!ee&&_L(Zm(I.fullPath,0))||(ae||!ee)&&history.state&&history.state.scroll||null;return Oc().then(()=>Me(I,K,S)).then(E=>E&&pL(E)).catch(E=>X(E,I,K))}const ce=I=>i.go(I);let V;const le=new Set,Y={currentRoute:l,listening:!0,addRoute:d,removeRoute:p,clearRoutes:t.clearRoutes,hasRoute:_,getRoutes:v,resolve:m,options:e,push:L,replace:y,go:ce,back:()=>ce(-1),forward:()=>ce(1),beforeEach:s.add,beforeResolve:a.add,afterEach:o.add,onError:$.add,isReady:oe,install(I){const K=this;I.component("RouterLink",NL),I.component("RouterView",VL),I.config.globalProperties.$router=K,Object.defineProperty(I.config.globalProperties,"$route",{enumerable:!0,get:()=>ht(l)}),Ws&&!V&&l.value===hi&&(V=!0,L(i.location).catch(Me=>{}));const ee={};for(const Me in hi)Object.defineProperty(ee,Me,{get:()=>l.value[Me],enumerable:!0});I.provide($d,K),I.provide(Bb,q_(ee)),I.provide(Ah,l);const ae=I.unmount;le.add(I),I.unmount=function(){le.delete(I),le.size<1&&(u=hi,k&&k(),k=null,l.value=hi,V=!1,Q=!1),ae()}}};function Z(I){return I.reduce((K,ee)=>K.then(()=>H(ee)),Promise.resolve())}return Y}function WL(e,t){const r=[],n=[],i=[],s=Math.max(t.matched.length,e.matched.length);for(let a=0;a<s;a++){const o=t.matched[a];o&&(e.matched.find(u=>uo(u,o))?n.push(o):r.push(o));const l=e.matched[a];l&&(t.matched.find(u=>uo(u,l))||i.push(l))}return[r,n,i]}const KL={},YL={class:"item"},GL={class:"details"};function XL(e,t){return ot(),ct("div",YL,[Le("i",null,[ku(e.$slots,"icon",{},void 0)]),Le("div",GL,[Le("h3",null,[ku(e.$slots,"heading",{},void 0)]),ku(e.$slots,"default",{},void 0)])])}const jo=ni(KL,[["render",XL],["__scopeId","data-v-fd0742eb"]]),ZL={},QL={xmlns:"http://www.w3.org/2000/svg",width:"20",height:"17",fill:"currentColor"};function JL(e,t){return ot(),ct("svg",QL,t[0]||(t[0]=[Le("path",{d:"M11 2.253a1 1 0 1 0-2 0h2zm-2 13a1 1 0 1 0 2 0H9zm.447-12.167a1 1 0 1 0 1.107-1.666L9.447 3.086zM1 2.253L.447 1.42A1 1 0 0 0 0 2.253h1zm0 13H0a1 1 0 0 0 1.553.833L1 15.253zm8.447.833a1 1 0 1 0 1.107-1.666l-1.107 1.666zm0-14.666a1 1 0 1 0 1.107 1.666L9.447 1.42zM19 2.253h1a1 1 0 0 0-.447-.833L19 2.253zm0 13l-.553.833A1 1 0 0 0 20 15.253h-1zm-9.553-.833a1 1 0 1 0 1.107 1.666L9.447 14.42zM9 2.253v13h2v-13H9zm1.553-.833C9.203.523 7.42 0 5.5 0v2c1.572 0 2.961.431 3.947 1.086l1.107-1.666zM5.5 0C3.58 0 1.797.523.447 1.42l1.107 1.666C2.539 2.431 3.928 2 5.5 2V0zM0 2.253v13h2v-13H0zm1.553 13.833C2.539 15.431 3.928 15 5.5 15v-2c-1.92 0-3.703.523-5.053 1.42l1.107 1.666zM5.5 15c1.572 0 2.961.431 3.947 1.086l1.107-1.666C9.203 13.523 7.42 13 5.5 13v2zm5.053-11.914C11.539 2.431 12.928 2 14.5 2V0c-1.92 0-3.703.523-5.053 1.42l1.107 1.666zM14.5 2c1.573 0 2.961.431 3.947 1.086l1.107-1.666C18.203.523 16.421 0 14.5 0v2zm3.5.253v13h2v-13h-2zm1.553 12.167C18.203 13.523 16.421 13 14.5 13v2c1.573 0 2.961.431 3.947 1.086l1.107-1.666zM14.5 13c-1.92 0-3.703.523-5.053 1.42l1.107 1.666C11.539 15.431 12.928 15 14.5 15v-2z"},null,-1)]))}const eB=ni(ZL,[["render",JL]]),tB={},rB={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",class:"iconify iconify--mdi",width:"24",height:"24",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"};function nB(e,t){return ot(),ct("svg",rB,t[0]||(t[0]=[Le("path",{d:"M20 18v-4h-3v1h-2v-1H9v1H7v-1H4v4h16M6.33 8l-1.74 4H7v-1h2v1h6v-1h2v1h2.41l-1.74-4H6.33M9 5v1h6V5H9m12.84 7.61c.1.22.16.48.16.8V18c0 .53-.21 1-.6 1.41c-.4.4-.85.59-1.4.59H4c-.55 0-1-.19-1.4-.59C2.21 19 2 18.53 2 18v-4.59c0-.32.06-.58.16-.8L4.5 7.22C4.84 6.41 5.45 6 6.33 6H7V5c0-.55.18-1 .57-1.41C7.96 3.2 8.44 3 9 3h6c.56 0 1.04.2 1.43.59c.39.41.57.86.57 1.41v1h.67c.88 0 1.49.41 1.83 1.22l2.34 5.39z",fill:"currentColor"},null,-1)]))}const iB=ni(tB,[["render",nB]]),sB={},oB={xmlns:"http://www.w3.org/2000/svg",width:"18",height:"20",fill:"currentColor"};function aB(e,t){return ot(),ct("svg",oB,t[0]||(t[0]=[Le("path",{d:"M11.447 8.894a1 1 0 1 0-.894-1.789l.894 1.789zm-2.894-.789a1 1 0 1 0 .894 1.789l-.894-1.789zm0 1.789a1 1 0 1 0 .894-1.789l-.894 1.789zM7.447 7.106a1 1 0 1 0-.894 1.789l.894-1.789zM10 9a1 1 0 1 0-2 0h2zm-2 2.5a1 1 0 1 0 2 0H8zm9.447-5.606a1 1 0 1 0-.894-1.789l.894 1.789zm-2.894-.789a1 1 0 1 0 .894 1.789l-.894-1.789zm2 .789a1 1 0 1 0 .894-1.789l-.894 1.789zm-1.106-2.789a1 1 0 1 0-.894 1.789l.894-1.789zM18 5a1 1 0 1 0-2 0h2zm-2 2.5a1 1 0 1 0 2 0h-2zm-5.447-4.606a1 1 0 1 0 .894-1.789l-.894 1.789zM9 1l.447-.894a1 1 0 0 0-.894 0L9 1zm-2.447.106a1 1 0 1 0 .894 1.789l-.894-1.789zm-6 3a1 1 0 1 0 .894 1.789L.553 4.106zm2.894.789a1 1 0 1 0-.894-1.789l.894 1.789zm-2-.789a1 1 0 1 0-.894 1.789l.894-1.789zm1.106 2.789a1 1 0 1 0 .894-1.789l-.894 1.789zM2 5a1 1 0 1 0-2 0h2zM0 7.5a1 1 0 1 0 2 0H0zm8.553 12.394a1 1 0 1 0 .894-1.789l-.894 1.789zm-1.106-2.789a1 1 0 1 0-.894 1.789l.894-1.789zm1.106 1a1 1 0 1 0 .894 1.789l-.894-1.789zm2.894.789a1 1 0 1 0-.894-1.789l.894 1.789zM8 19a1 1 0 1 0 2 0H8zm2-2.5a1 1 0 1 0-2 0h2zm-7.447.394a1 1 0 1 0 .894-1.789l-.894 1.789zM1 15H0a1 1 0 0 0 .553.894L1 15zm1-2.5a1 1 0 1 0-2 0h2zm12.553 2.606a1 1 0 1 0 .894 1.789l-.894-1.789zM17 15l.447.894A1 1 0 0 0 18 15h-1zm1-2.5a1 1 0 1 0-2 0h2zm-7.447-5.394l-2 1 .894 1.789 2-1-.894-1.789zm-1.106 1l-2-1-.894 1.789 2 1 .894-1.789zM8 9v2.5h2V9H8zm8.553-4.894l-2 1 .894 1.789 2-1-.894-1.789zm.894 0l-2-1-.894 1.789 2 1 .894-1.789zM16 5v2.5h2V5h-2zm-4.553-3.894l-2-1-.894 1.789 2 1 .894-1.789zm-2.894-1l-2 1 .894 1.789 2-1L8.553.106zM1.447 5.894l2-1-.894-1.789-2 1 .894 1.789zm-.894 0l2 1 .894-1.789-2-1-.894 1.789zM0 5v2.5h2V5H0zm9.447 13.106l-2-1-.894 1.789 2 1 .894-1.789zm0 1.789l2-1-.894-1.789-2 1 .894 1.789zM10 19v-2.5H8V19h2zm-6.553-3.894l-2-1-.894 1.789 2 1 .894-1.789zM2 15v-2.5H0V15h2zm13.447 1.894l2-1-.894-1.789-2 1 .894 1.789zM18 15v-2.5h-2V15h2z"},null,-1)]))}const lB=ni(sB,[["render",aB]]),cB={},uB={xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor"};function fB(e,t){return ot(),ct("svg",uB,t[0]||(t[0]=[Le("path",{d:"M15 4a1 1 0 1 0 0 2V4zm0 11v-1a1 1 0 0 0-1 1h1zm0 4l-.707.707A1 1 0 0 0 16 19h-1zm-4-4l.707-.707A1 1 0 0 0 11 14v1zm-4.707-1.293a1 1 0 0 0-1.414 1.414l1.414-1.414zm-.707.707l-.707-.707.707.707zM9 11v-1a1 1 0 0 0-.707.293L9 11zm-4 0h1a1 1 0 0 0-1-1v1zm0 4H4a1 1 0 0 0 1.707.707L5 15zm10-9h2V4h-2v2zm2 0a1 1 0 0 1 1 1h2a3 3 0 0 0-3-3v2zm1 1v6h2V7h-2zm0 6a1 1 0 0 1-1 1v2a3 3 0 0 0 3-3h-2zm-1 1h-2v2h2v-2zm-3 1v4h2v-4h-2zm1.707 3.293l-4-4-1.414 1.414 4 4 1.414-1.414zM11 14H7v2h4v-2zm-4 0c-.276 0-.525-.111-.707-.293l-1.414 1.414C5.42 15.663 6.172 16 7 16v-2zm-.707 1.121l3.414-3.414-1.414-1.414-3.414 3.414 1.414 1.414zM9 12h4v-2H9v2zm4 0a3 3 0 0 0 3-3h-2a1 1 0 0 1-1 1v2zm3-3V3h-2v6h2zm0-6a3 3 0 0 0-3-3v2a1 1 0 0 1 1 1h2zm-3-3H3v2h10V0zM3 0a3 3 0 0 0-3 3h2a1 1 0 0 1 1-1V0zM0 3v6h2V3H0zm0 6a3 3 0 0 0 3 3v-2a1 1 0 0 1-1-1H0zm3 3h2v-2H3v2zm1-1v4h2v-4H4zm1.707 4.707l.586-.586-1.414-1.414-.586.586 1.414 1.414z"},null,-1)]))}const hB=ni(cB,[["render",fB]]),dB={},pB={xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor"};function mB(e,t){return ot(),ct("svg",pB,t[0]||(t[0]=[Le("path",{d:"M10 3.22l-.61-.6a5.5 5.5 0 0 0-7.666.105 5.5 5.5 0 0 0-.114 7.665L10 18.78l8.39-8.4a5.5 5.5 0 0 0-.114-7.665 5.5 5.5 0 0 0-7.666-.105l-.61.61z"},null,-1)]))}const _B=ni(dB,[["render",mB]]),gB=Li({__name:"TheWelcome",setup(e){const t=()=>fetch("/__open-in-editor?file=README.md");return(r,n)=>(ot(),ct(ir,null,[Et(jo,null,{icon:fr(()=>[Et(eB)]),heading:fr(()=>n[0]||(n[0]=[_t("Documentation")])),default:fr(()=>[n[1]||(n[1]=_t(" Vue’s ")),n[2]||(n[2]=Le("a",{href:"https://vuejs.org/",target:"_blank",rel:"noopener"},"official documentation",-1)),n[3]||(n[3]=_t(" provides you with all information you need to get started. "))]),_:1,__:[1,2,3]}),Et(jo,null,{icon:fr(()=>[Et(iB)]),heading:fr(()=>n[4]||(n[4]=[_t("Tooling")])),default:fr(()=>[n[6]||(n[6]=_t(" This project is served and bundled with ")),n[7]||(n[7]=Le("a",{href:"https://vite.dev/guide/features.html",target:"_blank",rel:"noopener"},"Vite",-1)),n[8]||(n[8]=_t(". The recommended IDE setup is ")),n[9]||(n[9]=Le("a",{href:"https://code.visualstudio.com/",target:"_blank",rel:"noopener"},"VSCode",-1)),n[10]||(n[10]=_t(" + ")),n[11]||(n[11]=Le("a",{href:"https://github.com/vuejs/language-tools",target:"_blank",rel:"noopener"},"Vue - Official",-1)),n[12]||(n[12]=_t(". If you need to test your components and web pages, check out ")),n[13]||(n[13]=Le("a",{href:"https://vitest.dev/",target:"_blank",rel:"noopener"},"Vitest",-1)),n[14]||(n[14]=_t(" and ")),n[15]||(n[15]=Le("a",{href:"https://www.cypress.io/",target:"_blank",rel:"noopener"},"Cypress",-1)),n[16]||(n[16]=_t(" / ")),n[17]||(n[17]=Le("a",{href:"https://playwright.dev/",target:"_blank",rel:"noopener"},"Playwright",-1)),n[18]||(n[18]=_t(". ")),n[19]||(n[19]=Le("br",null,null,-1)),n[20]||(n[20]=_t(" More instructions are available in ")),Le("a",{href:"javascript:void(0)",onClick:t},n[5]||(n[5]=[Le("code",null,"README.md",-1)])),n[21]||(n[21]=_t(". "))]),_:1,__:[6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21]}),Et(jo,null,{icon:fr(()=>[Et(lB)]),heading:fr(()=>n[22]||(n[22]=[_t("Ecosystem")])),default:fr(()=>[n[23]||(n[23]=_t(" Get official tools and libraries for your project: ")),n[24]||(n[24]=Le("a",{href:"https://pinia.vuejs.org/",target:"_blank",rel:"noopener"},"Pinia",-1)),n[25]||(n[25]=_t(", ")),n[26]||(n[26]=Le("a",{href:"https://router.vuejs.org/",target:"_blank",rel:"noopener"},"Vue Router",-1)),n[27]||(n[27]=_t(", ")),n[28]||(n[28]=Le("a",{href:"https://test-utils.vuejs.org/",target:"_blank",rel:"noopener"},"Vue Test Utils",-1)),n[29]||(n[29]=_t(", and ")),n[30]||(n[30]=Le("a",{href:"https://github.com/vuejs/devtools",target:"_blank",rel:"noopener"},"Vue Dev Tools",-1)),n[31]||(n[31]=_t(". If you need more resources, we suggest paying ")),n[32]||(n[32]=Le("a",{href:"https://github.com/vuejs/awesome-vue",target:"_blank",rel:"noopener"},"Awesome Vue",-1)),n[33]||(n[33]=_t(" a visit. "))]),_:1,__:[23,24,25,26,27,28,29,30,31,32,33]}),Et(jo,null,{icon:fr(()=>[Et(hB)]),heading:fr(()=>n[34]||(n[34]=[_t("Community")])),default:fr(()=>[n[35]||(n[35]=_t(" Got stuck? Ask your question on ")),n[36]||(n[36]=Le("a",{href:"https://chat.vuejs.org",target:"_blank",rel:"noopener"},"Vue Land",-1)),n[37]||(n[37]=_t(" (our official Discord server), or ")),n[38]||(n[38]=Le("a",{href:"https://stackoverflow.com/questions/tagged/vue.js",target:"_blank",rel:"noopener"},"StackOverflow",-1)),n[39]||(n[39]=_t(". You should also follow the official ")),n[40]||(n[40]=Le("a",{href:"https://bsky.app/profile/vuejs.org",target:"_blank",rel:"noopener"},"@vuejs.org",-1)),n[41]||(n[41]=_t(" Bluesky account or the ")),n[42]||(n[42]=Le("a",{href:"https://x.com/vuejs",target:"_blank",rel:"noopener"},"@vuejs",-1)),n[43]||(n[43]=_t(" X account for latest news in the Vue world. "))]),_:1,__:[35,36,37,38,39,40,41,42,43]}),Et(jo,null,{icon:fr(()=>[Et(_B)]),heading:fr(()=>n[44]||(n[44]=[_t("Support Vue")])),default:fr(()=>[n[45]||(n[45]=_t(" As an independent project, Vue relies on community backing for its sustainability. You can help us by ")),n[46]||(n[46]=Le("a",{href:"https://vuejs.org/sponsor/",target:"_blank",rel:"noopener"},"becoming a sponsor",-1)),n[47]||(n[47]=_t(". "))]),_:1,__:[45,46,47]})],64))}}),vB=Li({__name:"HomeView",setup(e){return(t,r)=>(ot(),ct("main",null,[Et(gB)]))}}),yB=$L({history:bL("./"),routes:[{path:"/",name:"home",component:vB},{path:"/about",name:"about",component:()=>zM(()=>import("./AboutView.DWJtUdZF.js"),__vite__mapDeps([0,1]),import.meta.url)}]}),On=Object.create(null);On.open="0";On.close="1";On.ping="2";On.pong="3";On.message="4";On.upgrade="5";On.noop="6";const ec=Object.create(null);Object.keys(On).forEach(e=>{ec[On[e]]=e});const Rh={type:"error",data:"parser error"},Ob=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Ib=typeof ArrayBuffer=="function",Fb=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Wd=({type:e,data:t},r,n)=>Ob&&t instanceof Blob?r?n(t):h_(t,n):Ib&&(t instanceof ArrayBuffer||Fb(t))?r?n(t):h_(new Blob([t]),n):n(On[e]+(t||"")),h_=(e,t)=>{const r=new FileReader;return r.onload=function(){const n=r.result.split(",")[1];t("b"+(n||""))},r.readAsDataURL(e)};function d_(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Of;function bB(e,t){if(Ob&&e.data instanceof Blob)return e.data.arrayBuffer().then(d_).then(t);if(Ib&&(e.data instanceof ArrayBuffer||Fb(e.data)))return t(d_(e.data));Wd(e,!1,r=>{Of||(Of=new TextEncoder),t(Of.encode(r))})}const p_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Yo=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<p_.length;e++)Yo[p_.charCodeAt(e)]=e;const wB=e=>{let t=e.length*.75,r=e.length,n,i=0,s,a,o,l;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const u=new ArrayBuffer(t),f=new Uint8Array(u);for(n=0;n<r;n+=4)s=Yo[e.charCodeAt(n)],a=Yo[e.charCodeAt(n+1)],o=Yo[e.charCodeAt(n+2)],l=Yo[e.charCodeAt(n+3)],f[i++]=s<<2|a>>4,f[i++]=(a&15)<<4|o>>2,f[i++]=(o&3)<<6|l&63;return u},SB=typeof ArrayBuffer=="function",Kd=(e,t)=>{if(typeof e!="string")return{type:"message",data:Db(e,t)};const r=e.charAt(0);return r==="b"?{type:"message",data:CB(e.substring(1),t)}:ec[r]?e.length>1?{type:ec[r],data:e.substring(1)}:{type:ec[r]}:Rh},CB=(e,t)=>{if(SB){const r=wB(e);return Db(r,t)}else return{base64:!0,data:e}},Db=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},Hb="",xB=(e,t)=>{const r=e.length,n=new Array(r);let i=0;e.forEach((s,a)=>{Wd(s,!1,o=>{n[a]=o,++i===r&&t(n.join(Hb))})})},EB=(e,t)=>{const r=e.split(Hb),n=[];for(let i=0;i<r.length;i++){const s=Kd(r[i],t);if(n.push(s),s.type==="error")break}return n};function AB(){return new TransformStream({transform(e,t){bB(e,r=>{const n=r.length;let i;if(n<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,n);else if(n<65536){i=new Uint8Array(3);const s=new DataView(i.buffer);s.setUint8(0,126),s.setUint16(1,n)}else{i=new Uint8Array(9);const s=new DataView(i.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(n))}e.data&&typeof e.data!="string"&&(i[0]|=128),t.enqueue(i),t.enqueue(r)})}})}let If;function jl(e){return e.reduce((t,r)=>t+r.length,0)}function Nl(e,t){if(e[0].length===t)return e.shift();const r=new Uint8Array(t);let n=0;for(let i=0;i<t;i++)r[i]=e[0][n++],n===e[0].length&&(e.shift(),n=0);return e.length&&n<e[0].length&&(e[0]=e[0].slice(n)),r}function RB(e,t){If||(If=new TextDecoder);const r=[];let n=0,i=-1,s=!1;return new TransformStream({transform(a,o){for(r.push(a);;){if(n===0){if(jl(r)<1)break;const l=Nl(r,1);s=(l[0]&128)===128,i=l[0]&127,i<126?n=3:i===126?n=1:n=2}else if(n===1){if(jl(r)<2)break;const l=Nl(r,2);i=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),n=3}else if(n===2){if(jl(r)<8)break;const l=Nl(r,8),u=new DataView(l.buffer,l.byteOffset,l.length),f=u.getUint32(0);if(f>Math.pow(2,21)-1){o.enqueue(Rh);break}i=f*Math.pow(2,32)+u.getUint32(4),n=3}else{if(jl(r)<i)break;const l=Nl(r,i);o.enqueue(Kd(s?l:If.decode(l),t)),n=0}if(i===0||i>e){o.enqueue(Rh);break}}}})}const Pb=4;function er(e){if(e)return kB(e)}function kB(e){for(var t in er.prototype)e[t]=er.prototype[t];return e}er.prototype.on=er.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};er.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this};er.prototype.off=er.prototype.removeListener=er.prototype.removeAllListeners=er.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var n,i=0;i<r.length;i++)if(n=r[i],n===t||n.fn===t){r.splice(i,1);break}return r.length===0&&delete this._callbacks["$"+e],this};er.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(r){r=r.slice(0);for(var n=0,i=r.length;n<i;++n)r[n].apply(this,t)}return this};er.prototype.emitReserved=er.prototype.emit;er.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};er.prototype.hasListeners=function(e){return!!this.listeners(e).length};const fu=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,r)=>r(t,0),Kr=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),TB="arraybuffer";function jb(e,...t){return t.reduce((r,n)=>(e.hasOwnProperty(n)&&(r[n]=e[n]),r),{})}const MB=Kr.setTimeout,LB=Kr.clearTimeout;function hu(e,t){t.useNativeTimers?(e.setTimeoutFn=MB.bind(Kr),e.clearTimeoutFn=LB.bind(Kr)):(e.setTimeoutFn=Kr.setTimeout.bind(Kr),e.clearTimeoutFn=Kr.clearTimeout.bind(Kr))}const BB=1.33;function OB(e){return typeof e=="string"?IB(e):Math.ceil((e.byteLength||e.size)*BB)}function IB(e){let t=0,r=0;for(let n=0,i=e.length;n<i;n++)t=e.charCodeAt(n),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(n++,r+=4);return r}function Nb(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function FB(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}function DB(e){let t={},r=e.split("&");for(let n=0,i=r.length;n<i;n++){let s=r[n].split("=");t[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return t}class HB extends Error{constructor(t,r,n){super(t),this.description=r,this.context=n,this.type="TransportError"}}class Yd extends er{constructor(t){super(),this.writable=!1,hu(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,r,n){return super.emitReserved("error",new HB(t,r,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const r=Kd(t,this.socket.binaryType);this.onPacket(r)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,r={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const r=FB(t);return r.length?"?"+r:""}}class PB extends Yd{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const r=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||r()})),this.writable||(n++,this.once("drain",function(){--n||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const r=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};EB(t,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,xB(t,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=Nb()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(t,r)}}let Ub=!1;try{Ub=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const jB=Ub;function NB(){}class UB extends PB{constructor(t){if(super(t),typeof location<"u"){const r=location.protocol==="https:";let n=location.port;n||(n=r?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||n!==t.port}}doWrite(t,r){const n=this.request({method:"POST",data:t});n.on("success",r),n.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(r,n)=>{this.onError("xhr poll error",r,n)}),this.pollXhr=t}}class Tn extends er{constructor(t,r,n){super(),this.createRequest=t,hu(this,n),this._opts=n,this._method=n.method||"GET",this._uri=r,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var t;const r=jb(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(r);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&n.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var i;n.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=Tn.requestsCount++,Tn.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=NB,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Tn.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Tn.requestsCount=0;Tn.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",m_);else if(typeof addEventListener=="function"){const e="onpagehide"in Kr?"pagehide":"unload";addEventListener(e,m_,!1)}}function m_(){for(let e in Tn.requests)Tn.requests.hasOwnProperty(e)&&Tn.requests[e].abort()}const qB=function(){const e=qb({xdomain:!1});return e&&e.responseType!==null}();class zB extends UB{constructor(t){super(t);const r=t&&t.forceBase64;this.supportsBinary=qB&&!r}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Tn(qb,this.uri(),t)}}function qb(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||jB))return new XMLHttpRequest}catch{}if(!t)try{return new Kr[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const zb=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class VB extends Yd{get name(){return"websocket"}doOpen(){const t=this.uri(),r=this.opts.protocols,n=zb?{}:jb(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,r,n)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const n=t[r],i=r===t.length-1;Wd(n,this.supportsBinary,s=>{try{this.doWrite(n,s)}catch{}i&&fu(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=Nb()),this.supportsBinary||(r.b64=1),this.createUri(t,r)}}const Ff=Kr.WebSocket||Kr.MozWebSocket;class $B extends VB{createSocket(t,r,n){return zb?new Ff(t,r,n):r?new Ff(t,r):new Ff(t)}doWrite(t,r){this.ws.send(r)}}class WB extends Yd{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const r=RB(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=t.readable.pipeThrough(r).getReader(),i=AB();i.readable.pipeTo(t.writable),this._writer=i.writable.getWriter();const s=()=>{n.read().then(({done:o,value:l})=>{o||(this.onPacket(l),s())}).catch(o=>{})};s();const a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const n=t[r],i=r===t.length-1;this._writer.write(n).then(()=>{i&&fu(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const KB={websocket:$B,webtransport:WB,polling:zB},YB=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,GB=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function kh(e){if(e.length>8e3)throw"URI too long";const t=e,r=e.indexOf("["),n=e.indexOf("]");r!=-1&&n!=-1&&(e=e.substring(0,r)+e.substring(r,n).replace(/:/g,";")+e.substring(n,e.length));let i=YB.exec(e||""),s={},a=14;for(;a--;)s[GB[a]]=i[a]||"";return r!=-1&&n!=-1&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=XB(s,s.path),s.queryKey=ZB(s,s.query),s}function XB(e,t){const r=/\/{2,9}/g,n=t.replace(r,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&n.splice(0,1),t.slice(-1)=="/"&&n.splice(n.length-1,1),n}function ZB(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,i,s){i&&(r[i]=s)}),r}const Th=typeof addEventListener=="function"&&typeof removeEventListener=="function",tc=[];Th&&addEventListener("offline",()=>{tc.forEach(e=>e())},!1);class Ai extends er{constructor(t,r){if(super(),this.binaryType=TB,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(r=t,t=null),t){const n=kh(t);r.hostname=n.host,r.secure=n.protocol==="https"||n.protocol==="wss",r.port=n.port,n.query&&(r.query=n.query)}else r.host&&(r.hostname=kh(r.host).host);hu(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(n=>{const i=n.prototype.name;this.transports.push(i),this._transportsByName[i]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=DB(this.opts.query)),Th&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},tc.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const r=Object.assign({},this.opts.query);r.EIO=Pb,r.transport=t,this.id&&(r.sid=this.id);const n=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&Ai.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(t);r.open(),this.setTransport(r)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",Ai.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=t.data,this._onError(r);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let n=0;n<this.writeBuffer.length;n++){const i=this.writeBuffer[n].data;if(i&&(r+=OB(i)),n>0&&r>this._maxPayload)return this.writeBuffer.slice(0,n);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,fu(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,r,n){return this._sendPacket("message",t,r,n),this}send(t,r,n){return this._sendPacket("message",t,r,n),this}_sendPacket(t,r,n,i){if(typeof r=="function"&&(i=r,r=void 0),typeof n=="function"&&(i=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const s={type:t,data:r,options:n};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),t()},n=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():t()}):this.upgrading?n():t()),this}_onError(t){if(Ai.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Th&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=tc.indexOf(this._offlineEventListener);n!==-1&&tc.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,r),this.writeBuffer=[],this._prevBufferLen=0}}}Ai.protocol=Pb;class QB extends Ai{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let r=this.createTransport(t),n=!1;Ai.priorWebsocketSuccess=!1;const i=()=>{n||(r.send([{type:"ping",data:"probe"}]),r.once("packet",c=>{if(!n)if(c.type==="pong"&&c.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;Ai.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(f(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=r.name,this.emitReserved("upgradeError",h)}}))};function s(){n||(n=!0,f(),r.close(),r=null)}const a=c=>{const h=new Error("probe error: "+c);h.transport=r.name,s(),this.emitReserved("upgradeError",h)};function o(){a("transport closed")}function l(){a("socket closed")}function u(c){r&&c.name!==r.name&&s()}const f=()=>{r.removeListener("open",i),r.removeListener("error",a),r.removeListener("close",o),this.off("close",l),this.off("upgrading",u)};r.once("open",i),r.once("error",a),r.once("close",o),this.once("close",l),this.once("upgrading",u),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{n||r.open()},200):r.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const r=[];for(let n=0;n<t.length;n++)~this.transports.indexOf(t[n])&&r.push(t[n]);return r}}let JB=class extends QB{constructor(t,r={}){const n=typeof t=="object"?t:r;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(i=>KB[i]).filter(i=>!!i)),super(t,n)}};function eO(e,t="",r){let n=e;r=r||typeof location<"u"&&location,e==null&&(e=r.protocol+"//"+r.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=r.protocol+e:e=r.host+e),/^(https?|wss?):\/\//.test(e)||(typeof r<"u"?e=r.protocol+"//"+e:e="https://"+e),n=kh(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const s=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+s+":"+n.port+t,n.href=n.protocol+"://"+s+(r&&r.port===n.port?"":":"+n.port),n}const tO=typeof ArrayBuffer=="function",rO=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,Vb=Object.prototype.toString,nO=typeof Blob=="function"||typeof Blob<"u"&&Vb.call(Blob)==="[object BlobConstructor]",iO=typeof File=="function"||typeof File<"u"&&Vb.call(File)==="[object FileConstructor]";function Gd(e){return tO&&(e instanceof ArrayBuffer||rO(e))||nO&&e instanceof Blob||iO&&e instanceof File}function rc(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let r=0,n=e.length;r<n;r++)if(rc(e[r]))return!0;return!1}if(Gd(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return rc(e.toJSON(),!0);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&rc(e[r]))return!0;return!1}function sO(e){const t=[],r=e.data,n=e;return n.data=Mh(r,t),n.attachments=t.length,{packet:n,buffers:t}}function Mh(e,t){if(!e)return e;if(Gd(e)){const r={_placeholder:!0,num:t.length};return t.push(e),r}else if(Array.isArray(e)){const r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=Mh(e[n],t);return r}else if(typeof e=="object"&&!(e instanceof Date)){const r={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=Mh(e[n],t));return r}return e}function oO(e,t){return e.data=Lh(e.data,t),delete e.attachments,e}function Lh(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=Lh(e[r],t);else if(typeof e=="object")for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=Lh(e[r],t));return e}const aO=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],lO=5;var dt;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(dt||(dt={}));class cO{constructor(t){this.replacer=t}encode(t){return(t.type===dt.EVENT||t.type===dt.ACK)&&rc(t)?this.encodeAsBinary({type:t.type===dt.EVENT?dt.BINARY_EVENT:dt.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let r=""+t.type;return(t.type===dt.BINARY_EVENT||t.type===dt.BINARY_ACK)&&(r+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(r+=t.nsp+","),t.id!=null&&(r+=t.id),t.data!=null&&(r+=JSON.stringify(t.data,this.replacer)),r}encodeAsBinary(t){const r=sO(t),n=this.encodeAsString(r.packet),i=r.buffers;return i.unshift(n),i}}function __(e){return Object.prototype.toString.call(e)==="[object Object]"}class Xd extends er{constructor(t){super(),this.reviver=t}add(t){let r;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(t);const n=r.type===dt.BINARY_EVENT;n||r.type===dt.BINARY_ACK?(r.type=n?dt.EVENT:dt.ACK,this.reconstructor=new uO(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(Gd(t)||t.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let r=0;const n={type:Number(t.charAt(0))};if(dt[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===dt.BINARY_EVENT||n.type===dt.BINARY_ACK){const s=r+1;for(;t.charAt(++r)!=="-"&&r!=t.length;);const a=t.substring(s,r);if(a!=Number(a)||t.charAt(r)!=="-")throw new Error("Illegal attachments");n.attachments=Number(a)}if(t.charAt(r+1)==="/"){const s=r+1;for(;++r&&!(t.charAt(r)===","||r===t.length););n.nsp=t.substring(s,r)}else n.nsp="/";const i=t.charAt(r+1);if(i!==""&&Number(i)==i){const s=r+1;for(;++r;){const a=t.charAt(r);if(a==null||Number(a)!=a){--r;break}if(r===t.length)break}n.id=Number(t.substring(s,r+1))}if(t.charAt(++r)){const s=this.tryParse(t.substr(r));if(Xd.isPayloadValid(n.type,s))n.data=s;else throw new Error("invalid payload")}return n}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,r){switch(t){case dt.CONNECT:return __(r);case dt.DISCONNECT:return r===void 0;case dt.CONNECT_ERROR:return typeof r=="string"||__(r);case dt.EVENT:case dt.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&aO.indexOf(r[0])===-1);case dt.ACK:case dt.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class uO{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const r=oO(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const fO=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Xd,Encoder:cO,get PacketType(){return dt},protocol:lO},Symbol.toStringTag,{value:"Module"}));function nn(e,t,r){return e.on(t,r),function(){e.off(t,r)}}const hO=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class $b extends er{constructor(t,r,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=r,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[nn(t,"open",this.onopen.bind(this)),nn(t,"packet",this.onpacket.bind(this)),nn(t,"error",this.onerror.bind(this)),nn(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...r){var n,i,s;if(hO.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(r.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const a={type:dt.EVENT,data:r};if(a.options={},a.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const f=this.ids++,c=r.pop();this._registerAckCallback(f,c),a.id=f}const o=(i=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||i===void 0?void 0:i.writable,l=this.connected&&!(!((s=this.io.engine)===null||s===void 0)&&s._hasPingExpired());return this.flags.volatile&&!o||(l?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(t,r){var n;const i=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(i===void 0){this.acks[t]=r;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let o=0;o<this.sendBuffer.length;o++)this.sendBuffer[o].id===t&&this.sendBuffer.splice(o,1);r.call(this,new Error("operation has timed out"))},i),a=(...o)=>{this.io.clearTimeoutFn(s),r.apply(this,o)};a.withError=!0,this.acks[t]=a}emitWithAck(t,...r){return new Promise((n,i)=>{const s=(a,o)=>a?i(a):n(o);s.withError=!0,r.push(s),this.emit(t,...r)})}_addToQueue(t){let r;typeof t[t.length-1]=="function"&&(r=t.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((i,...s)=>n!==this._queue[0]?void 0:(i!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(i)):(this._queue.shift(),r&&r(null,...s)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!t||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:dt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(n=>String(n.id)===t)){const n=this.acks[t];delete this.acks[t],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case dt.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case dt.EVENT:case dt.BINARY_EVENT:this.onevent(t);break;case dt.ACK:case dt.BINARY_ACK:this.onack(t);break;case dt.DISCONNECT:this.ondisconnect();break;case dt.CONNECT_ERROR:this.destroy();const n=new Error(t.data.message);n.data=t.data.data,this.emitReserved("connect_error",n);break}}onevent(t){const r=t.data||[];t.id!=null&&r.push(this.ack(t.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const n of r)n.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const r=this;let n=!1;return function(...i){n||(n=!0,r.packet({type:dt.ACK,id:t,data:i}))}}onack(t){const r=this.acks[t.id];typeof r=="function"&&(delete this.acks[t.id],r.withError&&t.data.unshift(null),r.apply(this,t.data))}onconnect(t,r){this.id=t,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:dt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const r=this._anyListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const r=this._anyOutgoingListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const n of r)n.apply(this,t.data)}}}function vo(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}vo.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=(Math.floor(t*10)&1)==0?e-r:e+r}return Math.min(e,this.max)|0};vo.prototype.reset=function(){this.attempts=0};vo.prototype.setMin=function(e){this.ms=e};vo.prototype.setMax=function(e){this.max=e};vo.prototype.setJitter=function(e){this.jitter=e};class Bh extends er{constructor(t,r){var n;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(r=t,t=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,hu(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((n=r.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new vo({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=t;const i=r.parser||fO;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var r;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(r=this.backoff)===null||r===void 0||r.setMin(t),this)}randomizationFactor(t){var r;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(r=this.backoff)===null||r===void 0||r.setJitter(t),this)}reconnectionDelayMax(t){var r;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(r=this.backoff)===null||r===void 0||r.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new JB(this.uri,this.opts);const r=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const i=nn(r,"open",function(){n.onopen(),t&&t()}),s=o=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",o),t?t(o):this.maybeReconnectOnOpen()},a=nn(r,"error",s);if(this._timeout!==!1){const o=this._timeout,l=this.setTimeoutFn(()=>{i(),s(new Error("timeout")),r.close()},o);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(i),this.subs.push(a),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(nn(t,"ping",this.onping.bind(this)),nn(t,"data",this.ondata.bind(this)),nn(t,"error",this.onerror.bind(this)),nn(t,"close",this.onclose.bind(this)),nn(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(r){this.onclose("parse error",r)}}ondecoded(t){fu(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,r){let n=this.nsps[t];return n?this._autoConnect&&!n.active&&n.connect():(n=new $b(this,t,r),this.nsps[t]=n),n}_destroy(t){const r=Object.keys(this.nsps);for(const n of r)if(this.nsps[n].active)return;this._close()}_packet(t){const r=this.encoder.encode(t);for(let n=0;n<r.length;n++)this.engine.write(r[n],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,r){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(i=>{i?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",i)):t.onreconnect()}))},r);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const No={};function nc(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const r=eO(e,t.path||"/socket.io"),n=r.source,i=r.id,s=r.path,a=No[i]&&s in No[i].nsps,o=t.forceNew||t["force new connection"]||t.multiplex===!1||a;let l;return o?l=new Bh(n,t):(No[i]||(No[i]=new Bh(n,t)),l=No[i]),r.query&&!t.query&&(t.query=r.queryKey),l.socket(r.path,t)}Object.assign(nc,{Manager:Bh,Socket:$b,io:nc,connect:nc});const ss=class ss{constructor(){Su(this,"socket",null)}static getInstance(){return ss.instance||(ss.instance=new ss),ss.instance}connect(){return this.socket||(this.socket=nc(window.location.origin,{path:window.location.pathname+"socket.io/"}),this.socket.on("connect",()=>{console.log("AetherTerm Socket.IO connected")}),this.socket.on("disconnect",()=>{console.log("AetherTerm Socket.IO disconnected")})),this.socket}getSocket(){return this.socket}disconnect(){this.socket&&(this.socket.disconnect(),this.socket=null)}onShellOutput(t){this.socket&&this.socket.on("shell_output",t)}onControlOutput(t){this.socket&&this.socket.on("ctl_output",t)}onChatMessage(t){this.socket&&this.socket.on("chat_message",t)}sendChatMessage(t){this.socket&&this.socket.emit("chat_message",t)}offShellOutput(t){this.socket&&this.socket.off("shell_output",t)}offControlOutput(t){this.socket&&this.socket.off("ctl_output",t)}offChatMessage(t){this.socket&&this.socket.off("chat_message",t)}};Su(ss,"instance");let Oh=ss;ET();const du=b4(NM),dO=C4();du.use(dO);du.use(yB);du.component("VueTerm",Tw);const pO=Oh.getInstance(),mO=pO.connect(),Wb=cu();Wb.setSocket(mO);Wb.initializeSession(`session_${Date.now()}`);du.mount("#app");export{ni as _,Le as a,ct as c,ot as o};
