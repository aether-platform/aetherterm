const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./WorkspaceDebugPage.B4q9gyVG.js","./vue-vendor.oiotgX_B.js","./socket.B_mMAB35.js","./terminal.dC09zdKq.js","./vuetify.CMZzXhov.js","./WorkspaceDebugPage.CpIKoUcc.css"])))=>i.map(i=>d[i]);
import{I as $a,d as ie,h as se,r as Ii,j as kt,G as sn,J,y as h,K as Me,q as Se,L as Q,u as At,F as Je,M as wt,N as nt,O as it,P as Sn,Q as an,R as Di,S as Y,T as Fa,U as _o,H as Yt,w as rt,V as Tt,W as rv,n as j,X as Ee,Y as lv,a as ds,z as qn,v as ot,Z as js,_ as Rn,$ as Mg,a0 as Ig,a1 as Bg,a2 as Lg,a3 as Og,a4 as bu,a5 as Ba,k as Fo,b as Pg,m as $g,x as La,a6 as Mc,s as dt,a7 as tl,t as je,A as yu,B as Ys,p as Ks,f as ts,a8 as Fg,a9 as Dg,o as Fn,aa as Vg,l as _n,e as cv,ab as Ng,D as jg,ac as Hg,c as wu,ad as zg,ae as Ug}from"./vue-vendor.oiotgX_B.js";import{l as uv}from"./socket.B_mMAB35.js";import{r as qg}from"./terminal.dC09zdKq.js";import{g as st,p as ze,a as bn,c as Wg,u as fs,b as ut,m as fn,d as Yg,e as St,f as ai,h as dv,n as ku,i as Kg,j as Gg,s as bo,k as ua,l as _t,o as Su,q as Vd,r as Xg,t as Zg,v as Qg,w as da,x as Or,y as Jg,S as Cu,z as ms,A as ys,B as Zt,C as ws,D as fv,E as mv,F as sa,G as ks,H as ep,I as tp,J as np,K as sp,L as Dt,M as ap,N as yo,O as Ic,P as Cn,Q as Nd,R as jd,T as Un,U as Vi,V as Pr,W as fa,X as nl,Y as Au,Z as Tu,_ as vv,$ as sl,a0 as ip,a1 as $r,a2 as op,a3 as hv,a4 as rp,a5 as Bc,a6 as Fs,a7 as Tr,a8 as lp,a9 as ql,aa as Wl,ab as Hd,ac as gv,ad as Yl,ae as Fr,af as cp,ag as zd,ah as Ud,ai as up,aj as dp,ak as qd,al as fp,am as mp,an as pv,ao as _v,ap as vp,aq as hp,ar as gp,as as pp,at as _p,au as Wd,av as bv,aw as al,ax as bp,ay as yp,az as wp}from"./vuetify.CMZzXhov.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();function kp(e,t){const n=Object.create(null),s=e.split(",");for(let a=0;a<s.length;a++)n[s[a]]=!0;return a=>!!n[a]}const Sp=()=>{},Cp=Object.assign,Ap=Object.prototype.hasOwnProperty,il=(e,t)=>Ap.call(e,t),Ea=Array.isArray,xr=e=>yv(e)==="[object Map]",Tp=e=>typeof e=="function",xp=e=>typeof e=="string",xu=e=>typeof e=="symbol",ol=e=>e!==null&&typeof e=="object",Ep=Object.prototype.toString,yv=e=>Ep.call(e),Rp=e=>yv(e).slice(8,-1),Eu=e=>xp(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,wv=(e,t)=>!Object.is(e,t),Mp=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})};let Os;class Ip{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&Os&&(this.parent=Os,this.index=(Os.scopes||(Os.scopes=[])).push(this)-1)}run(t){if(this.active){const n=Os;try{return Os=this,t()}finally{Os=n}}}on(){Os=this}off(){Os=this.parent}stop(t){if(this.active){let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.scopes)for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);if(this.parent&&!t){const a=this.parent.scopes.pop();a&&a!==this&&(this.parent.scopes[this.index]=a,a.index=this.index)}this.active=!1}}}function Bp(e,t=Os){t&&t.active&&t.effects.push(e)}const Ru=e=>{const t=new Set(e);return t.w=0,t.n=0,t},kv=e=>(e.w&Oa)>0,Sv=e=>(e.n&Oa)>0,Lp=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=Oa},Op=e=>{const{deps:t}=e;if(t.length){let n=0;for(let s=0;s<t.length;s++){const a=t[s];kv(a)&&!Sv(a)?a.delete(e):t[n++]=a,a.w&=~Oa,a.n&=~Oa}t.length=n}},Lc=new WeakMap;let ao=0,Oa=1;const Oc=30;let _s;const li=Symbol(""),Pc=Symbol("");class Mu{constructor(t,n=null,s){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,Bp(this,s)}run(){if(!this.active)return this.fn();let t=_s,n=Ra;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=_s,_s=this,Ra=!0,Oa=1<<++ao,ao<=Oc?Lp(this):Yd(this),this.fn()}finally{ao<=Oc&&Op(this),Oa=1<<--ao,_s=this.parent,Ra=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){_s===this?this.deferStop=!0:this.active&&(Yd(this),this.onStop&&this.onStop(),this.active=!1)}}function Yd(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let Ra=!0;const Cv=[];function Ni(){Cv.push(Ra),Ra=!1}function ji(){const e=Cv.pop();Ra=e===void 0?!0:e}function Jn(e,t,n){if(Ra&&_s){let s=Lc.get(e);s||Lc.set(e,s=new Map);let a=s.get(n);a||s.set(n,a=Ru()),Av(a)}}function Av(e,t){let n=!1;ao<=Oc?Sv(e)||(e.n|=Oa,n=!kv(e)):n=!e.has(_s),n&&(e.add(_s),_s.deps.push(e))}function ia(e,t,n,s,a,i){const o=Lc.get(e);if(!o)return;let r=[];if(t==="clear")r=[...o.values()];else if(n==="length"&&Ea(e))o.forEach((f,u)=>{(u==="length"||u>=s)&&r.push(f)});else switch(n!==void 0&&r.push(o.get(n)),t){case"add":Ea(e)?Eu(n)&&r.push(o.get("length")):(r.push(o.get(li)),xr(e)&&r.push(o.get(Pc)));break;case"delete":Ea(e)||(r.push(o.get(li)),xr(e)&&r.push(o.get(Pc)));break;case"set":xr(e)&&r.push(o.get(li));break}if(r.length===1)r[0]&&$c(r[0]);else{const f=[];for(const u of r)u&&f.push(...u);$c(Ru(f))}}function $c(e,t){const n=Ea(e)?e:[...e];for(const s of n)s.computed&&Kd(s);for(const s of n)s.computed||Kd(s)}function Kd(e,t){(e!==_s||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const Pp=kp("__proto__,__v_isRef,__isVue"),Tv=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(xu)),$p=Iu(),Fp=Iu(!1,!0),Dp=Iu(!0),Gd=Vp();function Vp(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const s=jt(this);for(let i=0,o=this.length;i<o;i++)Jn(s,"get",i+"");const a=s[t](...n);return a===-1||a===!1?s[t](...n.map(jt)):a}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){Ni();const s=jt(this)[t].apply(this,n);return ji(),s}}),e}function Iu(e=!1,t=!1){return function(s,a,i){if(a==="__v_isReactive")return!e;if(a==="__v_isReadonly")return e;if(a==="__v_isShallow")return t;if(a==="__v_raw"&&i===(e?t?t_:Iv:t?Mv:Rv).get(s))return s;const o=Ea(s);if(!e&&o&&il(Gd,a))return Reflect.get(Gd,a,i);const r=Reflect.get(s,a,i);return(xu(a)?Tv.has(a):Pp(a))||(e||Jn(s,"get",a),t)?r:On(r)?o&&Eu(a)?r:r.value:ol(r)?e?Bv(r):Ou(r):r}}const Np=xv(),jp=xv(!0);function xv(e=!1){return function(n,s,a,i){let o=n[s];if(wo(o)&&On(o)&&!On(a))return!1;if(!e&&!wo(a)&&(Fc(a)||(a=jt(a),o=jt(o)),!Ea(n)&&On(o)&&!On(a)))return o.value=a,!0;const r=Ea(n)&&Eu(s)?Number(s)<n.length:il(n,s),f=Reflect.set(n,s,a,i);return n===jt(i)&&(r?wv(a,o)&&ia(n,"set",s,a):ia(n,"add",s,a)),f}}function Hp(e,t){const n=il(e,t);e[t];const s=Reflect.deleteProperty(e,t);return s&&n&&ia(e,"delete",t,void 0),s}function zp(e,t){const n=Reflect.has(e,t);return(!xu(t)||!Tv.has(t))&&Jn(e,"has",t),n}function Up(e){return Jn(e,"iterate",Ea(e)?"length":li),Reflect.ownKeys(e)}const Ev={get:$p,set:Np,deleteProperty:Hp,has:zp,ownKeys:Up},qp={get:Dp,set(e,t){return!0},deleteProperty(e,t){return!0}},Wp=Cp({},Ev,{get:Fp,set:jp}),Bu=e=>e,rl=e=>Reflect.getPrototypeOf(e);function sr(e,t,n=!1,s=!1){e=e.__v_raw;const a=jt(e),i=jt(t);n||(t!==i&&Jn(a,"get",t),Jn(a,"get",i));const{has:o}=rl(a),r=s?Bu:n?Fu:$u;if(o.call(a,t))return r(e.get(t));if(o.call(a,i))return r(e.get(i));e!==a&&e.get(t)}function ar(e,t=!1){const n=this.__v_raw,s=jt(n),a=jt(e);return t||(e!==a&&Jn(s,"has",e),Jn(s,"has",a)),e===a?n.has(e):n.has(e)||n.has(a)}function ir(e,t=!1){return e=e.__v_raw,!t&&Jn(jt(e),"iterate",li),Reflect.get(e,"size",e)}function Xd(e){e=jt(e);const t=jt(this);return rl(t).has.call(t,e)||(t.add(e),ia(t,"add",e,e)),this}function Zd(e,t){t=jt(t);const n=jt(this),{has:s,get:a}=rl(n);let i=s.call(n,e);i||(e=jt(e),i=s.call(n,e));const o=a.call(n,e);return n.set(e,t),i?wv(t,o)&&ia(n,"set",e,t):ia(n,"add",e,t),this}function Qd(e){const t=jt(this),{has:n,get:s}=rl(t);let a=n.call(t,e);a||(e=jt(e),a=n.call(t,e)),s&&s.call(t,e);const i=t.delete(e);return a&&ia(t,"delete",e,void 0),i}function Jd(){const e=jt(this),t=e.size!==0,n=e.clear();return t&&ia(e,"clear",void 0,void 0),n}function or(e,t){return function(s,a){const i=this,o=i.__v_raw,r=jt(o),f=t?Bu:e?Fu:$u;return!e&&Jn(r,"iterate",li),o.forEach((u,d)=>s.call(a,f(u),f(d),i))}}function rr(e,t,n){return function(...s){const a=this.__v_raw,i=jt(a),o=xr(i),r=e==="entries"||e===Symbol.iterator&&o,f=e==="keys"&&o,u=a[e](...s),d=n?Bu:t?Fu:$u;return!t&&Jn(i,"iterate",f?Pc:li),{next(){const{value:c,done:l}=u.next();return l?{value:c,done:l}:{value:r?[d(c[0]),d(c[1])]:d(c),done:l}},[Symbol.iterator](){return this}}}}function _a(e){return function(...t){return e==="delete"?!1:this}}function Yp(){const e={get(i){return sr(this,i)},get size(){return ir(this)},has:ar,add:Xd,set:Zd,delete:Qd,clear:Jd,forEach:or(!1,!1)},t={get(i){return sr(this,i,!1,!0)},get size(){return ir(this)},has:ar,add:Xd,set:Zd,delete:Qd,clear:Jd,forEach:or(!1,!0)},n={get(i){return sr(this,i,!0)},get size(){return ir(this,!0)},has(i){return ar.call(this,i,!0)},add:_a("add"),set:_a("set"),delete:_a("delete"),clear:_a("clear"),forEach:or(!0,!1)},s={get(i){return sr(this,i,!0,!0)},get size(){return ir(this,!0)},has(i){return ar.call(this,i,!0)},add:_a("add"),set:_a("set"),delete:_a("delete"),clear:_a("clear"),forEach:or(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{e[i]=rr(i,!1,!1),n[i]=rr(i,!0,!1),t[i]=rr(i,!1,!0),s[i]=rr(i,!0,!0)}),[e,n,t,s]}const[Kp,Gp,Xp,Zp]=Yp();function Lu(e,t){const n=t?e?Zp:Xp:e?Gp:Kp;return(s,a,i)=>a==="__v_isReactive"?!e:a==="__v_isReadonly"?e:a==="__v_raw"?s:Reflect.get(il(n,a)&&a in s?n:s,a,i)}const Qp={get:Lu(!1,!1)},Jp={get:Lu(!1,!0)},e_={get:Lu(!0,!1)},Rv=new WeakMap,Mv=new WeakMap,Iv=new WeakMap,t_=new WeakMap;function n_(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function s_(e){return e.__v_skip||!Object.isExtensible(e)?0:n_(Rp(e))}function Ou(e){return wo(e)?e:Pu(e,!1,Ev,Qp,Rv)}function a_(e){return Pu(e,!1,Wp,Jp,Mv)}function Bv(e){return Pu(e,!0,qp,e_,Iv)}function Pu(e,t,n,s,a){if(!ol(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=a.get(e);if(i)return i;const o=s_(e);if(o===0)return e;const r=new Proxy(e,o===2?s:n);return a.set(e,r),r}function xi(e){return wo(e)?xi(e.__v_raw):!!(e&&e.__v_isReactive)}function wo(e){return!!(e&&e.__v_isReadonly)}function Fc(e){return!!(e&&e.__v_isShallow)}function Lv(e){return xi(e)||wo(e)}function jt(e){const t=e&&e.__v_raw;return t?jt(t):e}function Ov(e){return Mp(e,"__v_skip",!0),e}const $u=e=>ol(e)?Ou(e):e,Fu=e=>ol(e)?Bv(e):e;function i_(e){Ra&&_s&&(e=jt(e),Av(e.dep||(e.dep=Ru())))}function o_(e,t){e=jt(e),e.dep&&$c(e.dep)}function On(e){return!!(e&&e.__v_isRef===!0)}function r_(e){return On(e)?e.value:e}const l_={get:(e,t,n)=>r_(Reflect.get(e,t,n)),set:(e,t,n,s)=>{const a=e[t];return On(a)&&!On(n)?(a.value=n,!0):Reflect.set(e,t,n,s)}};function Pv(e){return xi(e)?e:new Proxy(e,l_)}class c_{constructor(t,n,s,a){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new Mu(t,()=>{this._dirty||(this._dirty=!0,o_(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!a,this.__v_isReadonly=s}get value(){const t=jt(this);return i_(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function u_(e,t,n=!1){let s,a;const i=Tp(e);return i?(s=e,a=Sp):(s=e.get,a=e.set),new c_(s,a,i||!a,n)}function d_(e,t){const n=Object.create(null),s=e.split(",");for(let a=0;a<s.length;a++)n[s[a]]=!0;return a=>!!n[a]}function nn(e){if($t(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],a=Pn(s)?v_(s):nn(s);if(a)for(const i in a)t[i]=a[i]}return t}else{if(Pn(e))return e;if($n(e))return e}}const f_=/;(?![^(]*\))/g,m_=/:(.+)/;function v_(e){const t={};return e.split(f_).forEach(n=>{if(n){const s=n.split(m_);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function Mt(e){let t="";if(Pn(e))t=e;else if($t(e))for(let n=0;n<e.length;n++){const s=Mt(e[n]);s&&(t+=s+" ")}else if($n(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function qt(e){if(!e)return null;let{class:t,style:n}=e;return t&&!Pn(t)&&(e.class=Mt(t)),n&&(e.style=nn(n)),e}const yt=e=>Pn(e)?e:e==null?"":$t(e)||$n(e)&&(e.toString===jv||!It(e.toString))?JSON.stringify(e,$v,2):String(e),$v=(e,t)=>t&&t.__v_isRef?$v(e,t.value):Dv(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[s,a])=>(n[`${s} =>`]=a,n),{})}:Vv(t)?{[`Set(${t.size})`]:[...t.values()]}:$n(t)&&!$t(t)&&!Hv(t)?String(t):t,Xt={},Ei=[],aa=()=>{},h_=()=>!1,g_=/^on[^a-z]/,Du=e=>g_.test(e),Fv=e=>e.startsWith("onUpdate:"),Ss=Object.assign,Vu=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},p_=Object.prototype.hasOwnProperty,Nt=(e,t)=>p_.call(e,t),$t=Array.isArray,Dv=e=>Nu(e)==="[object Map]",Vv=e=>Nu(e)==="[object Set]",It=e=>typeof e=="function",Pn=e=>typeof e=="string",$n=e=>e!==null&&typeof e=="object",Nv=e=>$n(e)&&It(e.then)&&It(e.catch),jv=Object.prototype.toString,Nu=e=>jv.call(e),Hv=e=>Nu(e)==="[object Object]",Er=d_(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ll=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},__=/-(\w)/g,Hs=ll(e=>e.replace(__,(t,n)=>n?n.toUpperCase():"")),b_=/\B([A-Z])/g,cl=ll(e=>e.replace(b_,"-$1").toLowerCase()),ju=ll(e=>e.charAt(0).toUpperCase()+e.slice(1)),Kl=ll(e=>e?`on${ju(e)}`:""),ef=(e,t)=>!Object.is(e,t),Gl=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},Dc=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},y_=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let tf;const w_=()=>tf||(tf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof globalThis<"u"?globalThis:{});function Ma(e,t,n,s){let a;try{a=s?e(...s):e()}catch(i){ul(i,t,n)}return a}function cs(e,t,n,s){if(It(e)){const i=Ma(e,t,n,s);return i&&Nv(i)&&i.catch(o=>{ul(o,t,n)}),i}const a=[];for(let i=0;i<e.length;i++)a.push(cs(e[i],t,n,s));return a}function ul(e,t,n,s=!0){const a=t?t.vnode:null;if(t){let i=t.parent;const o=t.proxy,r=n;for(;i;){const u=i.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](e,o,r)===!1)return}i=i.parent}const f=t.appContext.config.errorHandler;if(f){Ma(f,null,10,[e,o,r]);return}}k_(e,n,a,s)}function k_(e,t,n,s=!0){console.error(e)}let Dr=!1,Vc=!1;const Gn=[];let ta=0;const fo=[];let io=null,ki=0;const mo=[];let Aa=null,Si=0;const zv=Promise.resolve();let Hu=null,Nc=null;function Uv(e){const t=Hu||zv;return e?t.then(this?e.bind(this):e):t}function S_(e){let t=ta+1,n=Gn.length;for(;t<n;){const s=t+n>>>1;ko(Gn[s])<e?t=s+1:n=s}return t}function qv(e){(!Gn.length||!Gn.includes(e,Dr&&e.allowRecurse?ta+1:ta))&&e!==Nc&&(e.id==null?Gn.push(e):Gn.splice(S_(e.id),0,e),Wv())}function Wv(){!Dr&&!Vc&&(Vc=!0,Hu=zv.then(Gv))}function C_(e){const t=Gn.indexOf(e);t>ta&&Gn.splice(t,1)}function Yv(e,t,n,s){$t(e)?n.push(...e):(!t||!t.includes(e,e.allowRecurse?s+1:s))&&n.push(e),Wv()}function A_(e){Yv(e,io,fo,ki)}function T_(e){Yv(e,Aa,mo,Si)}function dl(e,t=null){if(fo.length){for(Nc=t,io=[...new Set(fo)],fo.length=0,ki=0;ki<io.length;ki++)io[ki]();io=null,ki=0,Nc=null,dl(e,t)}}function Kv(e){if(dl(),mo.length){const t=[...new Set(mo)];if(mo.length=0,Aa){Aa.push(...t);return}for(Aa=t,Aa.sort((n,s)=>ko(n)-ko(s)),Si=0;Si<Aa.length;Si++)Aa[Si]();Aa=null,Si=0}}const ko=e=>e.id==null?1/0:e.id;function Gv(e){Vc=!1,Dr=!0,dl(e),Gn.sort((t,n)=>ko(t)-ko(n));try{for(ta=0;ta<Gn.length;ta++){const t=Gn[ta];t&&t.active!==!1&&Ma(t,null,14)}}finally{ta=0,Gn.length=0,Kv(),Dr=!1,Hu=null,(Gn.length||fo.length||mo.length)&&Gv(e)}}function x_(e,t,...n){if(e.isUnmounted)return;const s=e.vnode.props||Xt;let a=n;const i=t.startsWith("update:"),o=i&&t.slice(7);if(o&&o in s){const d=`${o==="modelValue"?"model":o}Modifiers`,{number:c,trim:l}=s[d]||Xt;l&&(a=n.map(m=>m.trim())),c&&(a=n.map(y_))}let r,f=s[r=Kl(t)]||s[r=Kl(Hs(t))];!f&&i&&(f=s[r=Kl(cl(t))]),f&&cs(f,e,6,a);const u=s[r+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[r])return;e.emitted[r]=!0,cs(u,e,6,a)}}function Xv(e,t,n=!1){const s=t.emitsCache,a=s.get(e);if(a!==void 0)return a;const i=e.emits;let o={},r=!1;if(!It(e)){const f=u=>{const d=Xv(u,t,!0);d&&(r=!0,Ss(o,d))};!n&&t.mixins.length&&t.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}return!i&&!r?(s.set(e,null),null):($t(i)?i.forEach(f=>o[f]=null):Ss(o,i),s.set(e,o),o)}function fl(e,t){return!e||!Du(t)?!1:(t=t.slice(2).replace(/Once$/,""),Nt(e,t[0].toLowerCase()+t.slice(1))||Nt(e,cl(t))||Nt(e,t))}let Mn=null,Zv=null;function Vr(e){const t=Mn;return Mn=e,Zv=e&&e.type.__scopeId||null,t}function vt(e,t=Mn,n){if(!t||e._n)return e;const s=(...a)=>{s._d&&vf(-1);const i=Vr(t),o=e(...a);return Vr(i),s._d&&vf(1),o};return s._n=!0,s._c=!0,s._d=!0,s}function nf(e){const{type:t,vnode:n,proxy:s,withProxy:a,props:i,propsOptions:[o],slots:r,attrs:f,emit:u,render:d,renderCache:c,data:l,setupState:m,ctx:v,inheritAttrs:C}=e;let b,_;const g=Vr(e);try{if(n.shapeFlag&4){const P=a||s;b=$s(d.call(P,P,c,i,m,l,v)),_=f}else{const P=t;b=$s(P.length>1?P(i,{attrs:f,slots:r,emit:u}):P(i,null)),_=t.props?f:E_(f)}}catch(P){ho.length=0,ul(P,e,1),b=Ge(us)}let R=b;if(_&&C!==!1){const P=Object.keys(_),{shapeFlag:S}=R;P.length&&S&7&&(o&&P.some(Fv)&&(_=R_(_,o)),R=Pa(R,_))}return n.dirs&&(R=Pa(R),R.dirs=R.dirs?R.dirs.concat(n.dirs):n.dirs),n.transition&&(R.transition=n.transition),b=R,Vr(g),b}const E_=e=>{let t;for(const n in e)(n==="class"||n==="style"||Du(n))&&((t||(t={}))[n]=e[n]);return t},R_=(e,t)=>{const n={};for(const s in e)(!Fv(s)||!(s.slice(9)in t))&&(n[s]=e[s]);return n};function M_(e,t,n){const{props:s,children:a,component:i}=e,{props:o,children:r,patchFlag:f}=t,u=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&f>=0){if(f&1024)return!0;if(f&16)return s?sf(s,o,u):!!o;if(f&8){const d=t.dynamicProps;for(let c=0;c<d.length;c++){const l=d[c];if(o[l]!==s[l]&&!fl(u,l))return!0}}}else return(a||r)&&(!r||!r.$stable)?!0:s===o?!1:s?o?sf(s,o,u):!0:!!o;return!1}function sf(e,t,n){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let a=0;a<s.length;a++){const i=s[a];if(t[i]!==e[i]&&!fl(n,i))return!0}return!1}function I_({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const B_=e=>e.__isSuspense;function L_(e,t){t&&t.pendingBranch?$t(e)?t.effects.push(...e):t.effects.push(e):T_(e)}function O_(e,t){if(kn){let n=kn.provides;const s=kn.parent&&kn.parent.provides;s===n&&(n=kn.provides=Object.create(s)),n[e]=t}}function Xl(e,t,n=!1){const s=kn||Mn;if(s){const a=s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides;if(a&&e in a)return a[e];if(arguments.length>1)return n&&It(t)?t.call(s.proxy):t}}const af={};function Zl(e,t,n){return Qv(e,t,n)}function Qv(e,t,{immediate:n,deep:s,flush:a,onTrack:i,onTrigger:o}=Xt){const r=kn;let f,u=!1,d=!1;if(On(e)?(f=()=>e.value,u=Fc(e)):xi(e)?(f=()=>e,s=!0):$t(e)?(d=!0,u=e.some(_=>xi(_)||Fc(_)),f=()=>e.map(_=>{if(On(_))return _.value;if(xi(_))return ii(_);if(It(_))return Ma(_,r,2)})):It(e)?t?f=()=>Ma(e,r,2):f=()=>{if(!(r&&r.isUnmounted))return c&&c(),cs(e,r,3,[l])}:f=aa,t&&s){const _=f;f=()=>ii(_())}let c,l=_=>{c=b.onStop=()=>{Ma(_,r,4)}};if(To)return l=aa,t?n&&cs(t,r,3,[f(),d?[]:void 0,l]):f(),aa;let m=d?[]:af;const v=()=>{if(b.active)if(t){const _=b.run();(s||u||(d?_.some((g,R)=>ef(g,m[R])):ef(_,m)))&&(c&&c(),cs(t,r,3,[_,m===af?void 0:m,l]),m=_)}else b.run()};v.allowRecurse=!!t;let C;a==="sync"?C=v:a==="post"?C=()=>zn(v,r&&r.suspense):C=()=>A_(v);const b=new Mu(f,C);return t?n?v():m=b.run():a==="post"?zn(b.run.bind(b),r&&r.suspense):b.run(),()=>{b.stop(),r&&r.scope&&Vu(r.scope.effects,b)}}function P_(e,t,n){const s=this.proxy,a=Pn(e)?e.includes(".")?Jv(s,e):()=>s[e]:e.bind(s,s);let i;It(t)?i=t:(i=t.handler,n=t);const o=kn;Bi(this);const r=Qv(a,i.bind(s),n);return o?Bi(o):ci(),r}function Jv(e,t){const n=t.split(".");return()=>{let s=e;for(let a=0;a<n.length&&s;a++)s=s[n[a]];return s}}function ii(e,t){if(!$n(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),On(e))ii(e.value,t);else if($t(e))for(let n=0;n<e.length;n++)ii(e[n],t);else if(Vv(e)||Dv(e))e.forEach(n=>{ii(n,t)});else if(Hv(e))for(const n in e)ii(e[n],t);return e}function e1(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return a1(()=>{e.isMounted=!0}),o1(()=>{e.isUnmounting=!0}),e}const is=[Function,Array],$_={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:is,onEnter:is,onAfterEnter:is,onEnterCancelled:is,onBeforeLeave:is,onLeave:is,onAfterLeave:is,onLeaveCancelled:is,onBeforeAppear:is,onAppear:is,onAfterAppear:is,onAppearCancelled:is},setup(e,{slots:t}){const n=w1(),s=e1();let a;return()=>{const i=t.default&&zu(t.default(),!0);if(!i||!i.length)return;let o=i[0];if(i.length>1){for(const C of i)if(C.type!==us){o=C;break}}const r=jt(e),{mode:f}=r;if(s.isLeaving)return Ql(o);const u=of(o);if(!u)return Ql(o);const d=So(u,r,s,n);Co(u,d);const c=n.subTree,l=c&&of(c);let m=!1;const{getTransitionKey:v}=u.type;if(v){const C=v();a===void 0?a=C:C!==a&&(a=C,m=!0)}if(l&&l.type!==us&&(!ti(u,l)||m)){const C=So(l,r,s,n);if(Co(l,C),f==="out-in")return s.isLeaving=!0,C.afterLeave=()=>{s.isLeaving=!1,n.update()},Ql(o);f==="in-out"&&u.type!==us&&(C.delayLeave=(b,_,g)=>{const R=n1(s,l);R[String(l.key)]=l,b._leaveCb=()=>{_(),b._leaveCb=void 0,delete d.delayedLeave},d.delayedLeave=g})}return o}}},t1=$_;function n1(e,t){const{leavingVNodes:n}=e;let s=n.get(t.type);return s||(s=Object.create(null),n.set(t.type,s)),s}function So(e,t,n,s){const{appear:a,mode:i,persisted:o=!1,onBeforeEnter:r,onEnter:f,onAfterEnter:u,onEnterCancelled:d,onBeforeLeave:c,onLeave:l,onAfterLeave:m,onLeaveCancelled:v,onBeforeAppear:C,onAppear:b,onAfterAppear:_,onAppearCancelled:g}=t,R=String(e.key),P=n1(n,e),S=(T,E)=>{T&&cs(T,s,9,E)},L=(T,E)=>{const y=E[1];S(T,E),$t(T)?T.every(A=>A.length<=1)&&y():T.length<=1&&y()},I={mode:i,persisted:o,beforeEnter(T){let E=r;if(!n.isMounted)if(a)E=C||r;else return;T._leaveCb&&T._leaveCb(!0);const y=P[R];y&&ti(e,y)&&y.el._leaveCb&&y.el._leaveCb(),S(E,[T])},enter(T){let E=f,y=u,A=d;if(!n.isMounted)if(a)E=b||f,y=_||u,A=g||d;else return;let w=!1;const k=T._enterCb=M=>{w||(w=!0,M?S(A,[T]):S(y,[T]),I.delayedLeave&&I.delayedLeave(),T._enterCb=void 0)};E?L(E,[T,k]):k()},leave(T,E){const y=String(e.key);if(T._enterCb&&T._enterCb(!0),n.isUnmounting)return E();S(c,[T]);let A=!1;const w=T._leaveCb=k=>{A||(A=!0,E(),k?S(v,[T]):S(m,[T]),T._leaveCb=void 0,P[y]===e&&delete P[y])};P[y]=e,l?L(l,[T,w]):w()},clone(T){return So(T,t,n,s)}};return I}function Ql(e){if(ml(e))return e=Pa(e),e.children=null,e}function of(e){return ml(e)?e.children?e.children[0]:void 0:e}function Co(e,t){e.shapeFlag&6&&e.component?Co(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function zu(e,t=!1,n){let s=[],a=0;for(let i=0;i<e.length;i++){let o=e[i];const r=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===Lt?(o.patchFlag&128&&a++,s=s.concat(zu(o.children,t,r))):(t||o.type!==us)&&s.push(r!=null?Pa(o,{key:r}):o)}if(a>1)for(let i=0;i<s.length;i++)s[i].patchFlag=-2;return s}function F_(e){return It(e)?{setup:e,name:e.name}:e}const vo=e=>!!e.type.__asyncLoader,ml=e=>e.type.__isKeepAlive;function D_(e,t){s1(e,"a",t)}function V_(e,t){s1(e,"da",t)}function s1(e,t,n=kn){const s=e.__wdc||(e.__wdc=()=>{let a=n;for(;a;){if(a.isDeactivated)return;a=a.parent}return e()});if(vl(t,s,n),n){let a=n.parent;for(;a&&a.parent;)ml(a.parent.vnode)&&N_(s,t,n,a),a=a.parent}}function N_(e,t,n,s){const a=vl(t,e,s,!0);r1(()=>{Vu(s[t],a)},n)}function vl(e,t,n=kn,s=!1){if(n){const a=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...o)=>{if(n.isUnmounted)return;Ni(),Bi(n);const r=cs(t,n,e,o);return ci(),ji(),r});return s?a.unshift(i):a.push(i),i}}const ma=e=>(t,n=kn)=>(!To||e==="sp")&&vl(e,t,n),j_=ma("bm"),a1=ma("m"),H_=ma("bu"),i1=ma("u"),o1=ma("bum"),r1=ma("um"),z_=ma("sp"),U_=ma("rtg"),q_=ma("rtc");function W_(e,t=kn){vl("ec",e,t)}function oa(e,t){const n=Mn;if(n===null)return e;const s=pl(n)||n.proxy,a=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[o,r,f,u=Xt]=t[i];It(o)&&(o={mounted:o,updated:o}),o.deep&&ii(r),a.push({dir:o,instance:s,value:r,oldValue:void 0,arg:f,modifiers:u})}return e}function Ha(e,t,n,s){const a=e.dirs,i=t&&t.dirs;for(let o=0;o<a.length;o++){const r=a[o];i&&(r.oldValue=i[o].value);let f=r.dir[s];f&&(Ni(),cs(f,n,8,[e.el,r,e,t]),ji())}}const Uu="components",Y_="directives";function mt(e,t){return qu(Uu,e,!0,t)||e}const l1=Symbol();function K_(e){return Pn(e)?qu(Uu,e,!1)||e:e||l1}function hl(e){return qu(Y_,e)}function qu(e,t,n=!0,s=!1){const a=Mn||kn;if(a){const i=a.type;if(e===Uu){const r=wb(i,!1);if(r&&(r===t||r===Hs(t)||r===ju(Hs(t))))return i}const o=rf(a[e]||i[e],t)||rf(a.appContext[e],t);return!o&&s?i:o}}function rf(e,t){return e&&(e[t]||e[Hs(t)]||e[ju(Hs(t))])}function Rt(e,t,n,s){let a;const i=n;if($t(e)||Pn(e)){a=new Array(e.length);for(let o=0,r=e.length;o<r;o++)a[o]=t(e[o],o,void 0,i)}else if(typeof e=="number"){a=new Array(e);for(let o=0;o<e;o++)a[o]=t(o+1,o,void 0,i)}else if($n(e))if(e[Symbol.iterator])a=Array.from(e,(o,r)=>t(o,r,void 0,i));else{const o=Object.keys(e);a=new Array(o.length);for(let r=0,f=o.length;r<f;r++){const u=o[r];a[r]=t(e[u],u,r,i)}}else a=[];return a}function Wt(e,t){for(let n=0;n<t.length;n++){const s=t[n];if($t(s))for(let a=0;a<s.length;a++)e[s[a].name]=s[a].fn;else s&&(e[s.name]=s.fn)}return e}function We(e,t,n={},s,a){if(Mn.isCE||Mn.parent&&vo(Mn.parent)&&Mn.parent.isCE)return Ge("slot",t==="default"?null:{name:t},s&&s());let i=e[t];i&&i._c&&(i._d=!1),me();const o=i&&c1(i(n)),r=Ht(Lt,{key:n.key||`_${t}`},o||(s?s():[]),o&&e._===1?64:-2);return r.scopeId&&(r.slotScopeIds=[r.scopeId+"-s"]),i&&i._c&&(i._d=!0),r}function c1(e){return e.some(t=>Hr(t)?!(t.type===us||t.type===Lt&&!c1(t.children)):!0)?e:null}const jc=e=>e?k1(e)?pl(e)||e.proxy:jc(e.parent):null,Nr=Ss(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>jc(e.parent),$root:e=>jc(e.root),$emit:e=>e.emit,$options:e=>d1(e),$forceUpdate:e=>e.f||(e.f=()=>qv(e.update)),$nextTick:e=>e.n||(e.n=Uv.bind(e.proxy)),$watch:e=>P_.bind(e)}),G_={get({_:e},t){const{ctx:n,setupState:s,data:a,props:i,accessCache:o,type:r,appContext:f}=e;let u;if(t[0]!=="$"){const m=o[t];if(m!==void 0)switch(m){case 1:return s[t];case 2:return a[t];case 4:return n[t];case 3:return i[t]}else{if(s!==Xt&&Nt(s,t))return o[t]=1,s[t];if(a!==Xt&&Nt(a,t))return o[t]=2,a[t];if((u=e.propsOptions[0])&&Nt(u,t))return o[t]=3,i[t];if(n!==Xt&&Nt(n,t))return o[t]=4,n[t];Hc&&(o[t]=0)}}const d=Nr[t];let c,l;if(d)return t==="$attrs"&&Jn(e,"get",t),d(e);if((c=r.__cssModules)&&(c=c[t]))return c;if(n!==Xt&&Nt(n,t))return o[t]=4,n[t];if(l=f.config.globalProperties,Nt(l,t))return l[t]},set({_:e},t,n){const{data:s,setupState:a,ctx:i}=e;return a!==Xt&&Nt(a,t)?(a[t]=n,!0):s!==Xt&&Nt(s,t)?(s[t]=n,!0):Nt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:s,appContext:a,propsOptions:i}},o){let r;return!!n[o]||e!==Xt&&Nt(e,o)||t!==Xt&&Nt(t,o)||(r=i[0])&&Nt(r,o)||Nt(s,o)||Nt(Nr,o)||Nt(a.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Nt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};let Hc=!0;function X_(e){const t=d1(e),n=e.proxy,s=e.ctx;Hc=!1,t.beforeCreate&&lf(t.beforeCreate,e,"bc");const{data:a,computed:i,methods:o,watch:r,provide:f,inject:u,created:d,beforeMount:c,mounted:l,beforeUpdate:m,updated:v,activated:C,deactivated:b,beforeDestroy:_,beforeUnmount:g,destroyed:R,unmounted:P,render:S,renderTracked:L,renderTriggered:I,errorCaptured:T,serverPrefetch:E,expose:y,inheritAttrs:A,components:w,directives:k,filters:M}=t;if(u&&Z_(u,s,null,e.appContext.config.unwrapInjectedRef),o)for(const V in o){const D=o[V];It(D)&&(s[V]=D.bind(n))}if(a){const V=a.call(n,n);$n(V)&&(e.data=Ou(V))}if(Hc=!0,i)for(const V in i){const D=i[V],z=It(D)?D.bind(n,n):It(D.get)?D.get.bind(n,n):aa,p=!It(D)&&It(D.set)?D.set.bind(n):aa,B=Sb({get:z,set:p});Object.defineProperty(s,V,{enumerable:!0,configurable:!0,get:()=>B.value,set:U=>B.value=U})}if(r)for(const V in r)u1(r[V],s,n,V);if(f){const V=It(f)?f.call(n):f;Reflect.ownKeys(V).forEach(D=>{O_(D,V[D])})}d&&lf(d,e,"c");function F(V,D){$t(D)?D.forEach(z=>V(z.bind(n))):D&&V(D.bind(n))}if(F(j_,c),F(a1,l),F(H_,m),F(i1,v),F(D_,C),F(V_,b),F(W_,T),F(q_,L),F(U_,I),F(o1,g),F(r1,P),F(z_,E),$t(y))if(y.length){const V=e.exposed||(e.exposed={});y.forEach(D=>{Object.defineProperty(V,D,{get:()=>n[D],set:z=>n[D]=z})})}else e.exposed||(e.exposed={});S&&e.render===aa&&(e.render=S),A!=null&&(e.inheritAttrs=A),w&&(e.components=w),k&&(e.directives=k)}function Z_(e,t,n=aa,s=!1){$t(e)&&(e=zc(e));for(const a in e){const i=e[a];let o;$n(i)?"default"in i?o=Xl(i.from||a,i.default,!0):o=Xl(i.from||a):o=Xl(i),On(o)&&s?Object.defineProperty(t,a,{enumerable:!0,configurable:!0,get:()=>o.value,set:r=>o.value=r}):t[a]=o}}function lf(e,t,n){cs($t(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,n)}function u1(e,t,n,s){const a=s.includes(".")?Jv(n,s):()=>n[s];if(Pn(e)){const i=t[e];It(i)&&Zl(a,i)}else if(It(e))Zl(a,e.bind(n));else if($n(e))if($t(e))e.forEach(i=>u1(i,t,n,s));else{const i=It(e.handler)?e.handler.bind(n):t[e.handler];It(i)&&Zl(a,i,e)}}function d1(e){const t=e.type,{mixins:n,extends:s}=t,{mixins:a,optionsCache:i,config:{optionMergeStrategies:o}}=e.appContext,r=i.get(t);let f;return r?f=r:!a.length&&!n&&!s?f=t:(f={},a.length&&a.forEach(u=>jr(f,u,o,!0)),jr(f,t,o)),i.set(t,f),f}function jr(e,t,n,s=!1){const{mixins:a,extends:i}=t;i&&jr(e,i,n,!0),a&&a.forEach(o=>jr(e,o,n,!0));for(const o in t)if(!(s&&o==="expose")){const r=Q_[o]||n&&n[o];e[o]=r?r(e[o],t[o]):t[o]}return e}const Q_={data:cf,props:Ja,emits:Ja,methods:Ja,computed:Ja,beforeCreate:Bn,created:Bn,beforeMount:Bn,mounted:Bn,beforeUpdate:Bn,updated:Bn,beforeDestroy:Bn,beforeUnmount:Bn,destroyed:Bn,unmounted:Bn,activated:Bn,deactivated:Bn,errorCaptured:Bn,serverPrefetch:Bn,components:Ja,directives:Ja,watch:eb,provide:cf,inject:J_};function cf(e,t){return t?e?function(){return Ss(It(e)?e.call(this,this):e,It(t)?t.call(this,this):t)}:t:e}function J_(e,t){return Ja(zc(e),zc(t))}function zc(e){if($t(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Bn(e,t){return e?[...new Set([].concat(e,t))]:t}function Ja(e,t){return e?Ss(Ss(Object.create(null),e),t):t}function eb(e,t){if(!e)return t;if(!t)return e;const n=Ss(Object.create(null),e);for(const s in t)n[s]=Bn(e[s],t[s]);return n}function tb(e,t,n,s=!1){const a={},i={};Dc(i,gl,1),e.propsDefaults=Object.create(null),f1(e,t,a,i);for(const o in e.propsOptions[0])o in a||(a[o]=void 0);n?e.props=s?a:a_(a):e.type.props?e.props=a:e.props=i,e.attrs=i}function nb(e,t,n,s){const{props:a,attrs:i,vnode:{patchFlag:o}}=e,r=jt(a),[f]=e.propsOptions;let u=!1;if((s||o>0)&&!(o&16)){if(o&8){const d=e.vnode.dynamicProps;for(let c=0;c<d.length;c++){let l=d[c];if(fl(e.emitsOptions,l))continue;const m=t[l];if(f)if(Nt(i,l))m!==i[l]&&(i[l]=m,u=!0);else{const v=Hs(l);a[v]=Uc(f,r,v,m,e,!1)}else m!==i[l]&&(i[l]=m,u=!0)}}}else{f1(e,t,a,i)&&(u=!0);let d;for(const c in r)(!t||!Nt(t,c)&&((d=cl(c))===c||!Nt(t,d)))&&(f?n&&(n[c]!==void 0||n[d]!==void 0)&&(a[c]=Uc(f,r,c,void 0,e,!0)):delete a[c]);if(i!==r)for(const c in i)(!t||!Nt(t,c))&&(delete i[c],u=!0)}u&&ia(e,"set","$attrs")}function f1(e,t,n,s){const[a,i]=e.propsOptions;let o=!1,r;if(t)for(let f in t){if(Er(f))continue;const u=t[f];let d;a&&Nt(a,d=Hs(f))?!i||!i.includes(d)?n[d]=u:(r||(r={}))[d]=u:fl(e.emitsOptions,f)||(!(f in s)||u!==s[f])&&(s[f]=u,o=!0)}if(i){const f=jt(n),u=r||Xt;for(let d=0;d<i.length;d++){const c=i[d];n[c]=Uc(a,f,c,u[c],e,!Nt(u,c))}}return o}function Uc(e,t,n,s,a,i){const o=e[n];if(o!=null){const r=Nt(o,"default");if(r&&s===void 0){const f=o.default;if(o.type!==Function&&It(f)){const{propsDefaults:u}=a;n in u?s=u[n]:(Bi(a),s=u[n]=f.call(null,t),ci())}else s=f}o[0]&&(i&&!r?s=!1:o[1]&&(s===""||s===cl(n))&&(s=!0))}return s}function m1(e,t,n=!1){const s=t.propsCache,a=s.get(e);if(a)return a;const i=e.props,o={},r=[];let f=!1;if(!It(e)){const d=c=>{f=!0;const[l,m]=m1(c,t,!0);Ss(o,l),m&&r.push(...m)};!n&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!i&&!f)return s.set(e,Ei),Ei;if($t(i))for(let d=0;d<i.length;d++){const c=Hs(i[d]);uf(c)&&(o[c]=Xt)}else if(i)for(const d in i){const c=Hs(d);if(uf(c)){const l=i[d],m=o[c]=$t(l)||It(l)?{type:l}:l;if(m){const v=mf(Boolean,m.type),C=mf(String,m.type);m[0]=v>-1,m[1]=C<0||v<C,(v>-1||Nt(m,"default"))&&r.push(c)}}}const u=[o,r];return s.set(e,u),u}function uf(e){return e[0]!=="$"}function df(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function ff(e,t){return df(e)===df(t)}function mf(e,t){return $t(t)?t.findIndex(n=>ff(n,e)):It(t)&&ff(t,e)?0:-1}const v1=e=>e[0]==="_"||e==="$stable",Wu=e=>$t(e)?e.map($s):[$s(e)],sb=(e,t,n)=>{if(t._n)return t;const s=vt((...a)=>Wu(t(...a)),n);return s._c=!1,s},h1=(e,t,n)=>{const s=e._ctx;for(const a in e){if(v1(a))continue;const i=e[a];if(It(i))t[a]=sb(a,i,s);else if(i!=null){const o=Wu(i);t[a]=()=>o}}},g1=(e,t)=>{const n=Wu(t);e.slots.default=()=>n},ab=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=jt(t),Dc(t,"_",n)):h1(t,e.slots={})}else e.slots={},t&&g1(e,t);Dc(e.slots,gl,1)},ib=(e,t,n)=>{const{vnode:s,slots:a}=e;let i=!0,o=Xt;if(s.shapeFlag&32){const r=t._;r?n&&r===1?i=!1:(Ss(a,t),!n&&r===1&&delete a._):(i=!t.$stable,h1(t,a)),o=t}else t&&(g1(e,t),o={default:1});if(i)for(const r in a)!v1(r)&&!(r in o)&&delete a[r]};function p1(){return{app:null,config:{isNativeTag:h_,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let ob=0;function rb(e,t){return function(s,a=null){It(s)||(s=Object.assign({},s)),a!=null&&!$n(a)&&(a=null);const i=p1(),o=new Set;let r=!1;const f=i.app={_uid:ob++,_component:s,_props:a,_container:null,_context:i,_instance:null,version:Ab,get config(){return i.config},set config(u){},use(u,...d){return o.has(u)||(u&&It(u.install)?(o.add(u),u.install(f,...d)):It(u)&&(o.add(u),u(f,...d))),f},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),f},component(u,d){return d?(i.components[u]=d,f):i.components[u]},directive(u,d){return d?(i.directives[u]=d,f):i.directives[u]},mount(u,d,c){if(!r){const l=Ge(s,a);return l.appContext=i,e(l,u,c),r=!0,f._container=u,u.__vue_app__=f,pl(l.component)||l.component.proxy}},unmount(){r&&(e(null,f._container),delete f._container.__vue_app__)},provide(u,d){return i.provides[u]=d,f}};return f}}function qc(e,t,n,s,a=!1){if($t(e)){e.forEach((l,m)=>qc(l,t&&($t(t)?t[m]:t),n,s,a));return}if(vo(s)&&!a)return;const i=s.shapeFlag&4?pl(s.component)||s.component.proxy:s.el,o=a?null:i,{i:r,r:f}=e,u=t&&t.r,d=r.refs===Xt?r.refs={}:r.refs,c=r.setupState;if(u!=null&&u!==f&&(Pn(u)?(d[u]=null,Nt(c,u)&&(c[u]=null)):On(u)&&(u.value=null)),It(f))Ma(f,r,12,[o,d]);else{const l=Pn(f),m=On(f);if(l||m){const v=()=>{if(e.f){const C=l?d[f]:f.value;a?$t(C)&&Vu(C,i):$t(C)?C.includes(i)||C.push(i):l?(d[f]=[i],Nt(c,f)&&(c[f]=d[f])):(f.value=[i],e.k&&(d[e.k]=f.value))}else l?(d[f]=o,Nt(c,f)&&(c[f]=o)):m&&(f.value=o,e.k&&(d[e.k]=o))};o?(v.id=-1,zn(v,n)):v()}}}const zn=L_;function lb(e){return cb(e)}function cb(e,t){const n=w_();n.__VUE__=!0;const{insert:s,remove:a,patchProp:i,createElement:o,createText:r,createComment:f,setText:u,setElementText:d,parentNode:c,nextSibling:l,setScopeId:m=aa,cloneNode:v,insertStaticContent:C}=e,b=(K,te,ve,Ce=null,Ae=null,Be=null,He=!1,Fe=null,Ve=!!te.dynamicChildren)=>{if(K===te)return;K&&!ti(K,te)&&(Ce=X(K),$(K,Ae,Be,!0),K=null),te.patchFlag===-2&&(Ve=!1,te.dynamicChildren=null);const{type:Le,ref:et,shapeFlag:Ze}=te;switch(Le){case Yu:_(K,te,ve,Ce);break;case us:g(K,te,ve,Ce);break;case Jl:K==null&&R(te,ve,Ce,He);break;case Lt:k(K,te,ve,Ce,Ae,Be,He,Fe,Ve);break;default:Ze&1?L(K,te,ve,Ce,Ae,Be,He,Fe,Ve):Ze&6?M(K,te,ve,Ce,Ae,Be,He,Fe,Ve):(Ze&64||Ze&128)&&Le.process(K,te,ve,Ce,Ae,Be,He,Fe,Ve,we)}et!=null&&Ae&&qc(et,K&&K.ref,Be,te||K,!te)},_=(K,te,ve,Ce)=>{if(K==null)s(te.el=r(te.children),ve,Ce);else{const Ae=te.el=K.el;te.children!==K.children&&u(Ae,te.children)}},g=(K,te,ve,Ce)=>{K==null?s(te.el=f(te.children||""),ve,Ce):te.el=K.el},R=(K,te,ve,Ce)=>{[K.el,K.anchor]=C(K.children,te,ve,Ce,K.el,K.anchor)},P=({el:K,anchor:te},ve,Ce)=>{let Ae;for(;K&&K!==te;)Ae=l(K),s(K,ve,Ce),K=Ae;s(te,ve,Ce)},S=({el:K,anchor:te})=>{let ve;for(;K&&K!==te;)ve=l(K),a(K),K=ve;a(te)},L=(K,te,ve,Ce,Ae,Be,He,Fe,Ve)=>{He=He||te.type==="svg",K==null?I(te,ve,Ce,Ae,Be,He,Fe,Ve):y(K,te,Ae,Be,He,Fe,Ve)},I=(K,te,ve,Ce,Ae,Be,He,Fe)=>{let Ve,Le;const{type:et,props:Ze,shapeFlag:Xe,transition:at,patchFlag:lt,dirs:gt}=K;if(K.el&&v!==void 0&&lt===-1)Ve=K.el=v(K.el);else{if(Ve=K.el=o(K.type,Be,Ze&&Ze.is,Ze),Xe&8?d(Ve,K.children):Xe&16&&E(K.children,Ve,null,Ce,Ae,Be&&et!=="foreignObject",He,Fe),gt&&Ha(K,null,Ce,"created"),Ze){for(const Ne in Ze)Ne!=="value"&&!Er(Ne)&&i(Ve,Ne,null,Ze[Ne],Be,K.children,Ce,Ae,ae);"value"in Ze&&i(Ve,"value",null,Ze.value),(Le=Ze.onVnodeBeforeMount)&&Ms(Le,Ce,K)}T(Ve,K,K.scopeId,He,Ce)}gt&&Ha(K,null,Ce,"beforeMount");const Te=(!Ae||Ae&&!Ae.pendingBranch)&&at&&!at.persisted;Te&&at.beforeEnter(Ve),s(Ve,te,ve),((Le=Ze&&Ze.onVnodeMounted)||Te||gt)&&zn(()=>{Le&&Ms(Le,Ce,K),Te&&at.enter(Ve),gt&&Ha(K,null,Ce,"mounted")},Ae)},T=(K,te,ve,Ce,Ae)=>{if(ve&&m(K,ve),Ce)for(let Be=0;Be<Ce.length;Be++)m(K,Ce[Be]);if(Ae){let Be=Ae.subTree;if(te===Be){const He=Ae.vnode;T(K,He,He.scopeId,He.slotScopeIds,Ae.parent)}}},E=(K,te,ve,Ce,Ae,Be,He,Fe,Ve=0)=>{for(let Le=Ve;Le<K.length;Le++){const et=K[Le]=Fe?xa(K[Le]):$s(K[Le]);b(null,et,te,ve,Ce,Ae,Be,He,Fe)}},y=(K,te,ve,Ce,Ae,Be,He)=>{const Fe=te.el=K.el;let{patchFlag:Ve,dynamicChildren:Le,dirs:et}=te;Ve|=K.patchFlag&16;const Ze=K.props||Xt,Xe=te.props||Xt;let at;ve&&za(ve,!1),(at=Xe.onVnodeBeforeUpdate)&&Ms(at,ve,te,K),et&&Ha(te,K,ve,"beforeUpdate"),ve&&za(ve,!0);const lt=Ae&&te.type!=="foreignObject";if(Le?A(K.dynamicChildren,Le,Fe,ve,Ce,lt,Be):He||z(K,te,Fe,null,ve,Ce,lt,Be,!1),Ve>0){if(Ve&16)w(Fe,te,Ze,Xe,ve,Ce,Ae);else if(Ve&2&&Ze.class!==Xe.class&&i(Fe,"class",null,Xe.class,Ae),Ve&4&&i(Fe,"style",Ze.style,Xe.style,Ae),Ve&8){const gt=te.dynamicProps;for(let Te=0;Te<gt.length;Te++){const Ne=gt[Te],pe=Ze[Ne],de=Xe[Ne];(de!==pe||Ne==="value")&&i(Fe,Ne,pe,de,Ae,K.children,ve,Ce,ae)}}Ve&1&&K.children!==te.children&&d(Fe,te.children)}else!He&&Le==null&&w(Fe,te,Ze,Xe,ve,Ce,Ae);((at=Xe.onVnodeUpdated)||et)&&zn(()=>{at&&Ms(at,ve,te,K),et&&Ha(te,K,ve,"updated")},Ce)},A=(K,te,ve,Ce,Ae,Be,He)=>{for(let Fe=0;Fe<te.length;Fe++){const Ve=K[Fe],Le=te[Fe],et=Ve.el&&(Ve.type===Lt||!ti(Ve,Le)||Ve.shapeFlag&70)?c(Ve.el):ve;b(Ve,Le,et,null,Ce,Ae,Be,He,!0)}},w=(K,te,ve,Ce,Ae,Be,He)=>{if(ve!==Ce){for(const Fe in Ce){if(Er(Fe))continue;const Ve=Ce[Fe],Le=ve[Fe];Ve!==Le&&Fe!=="value"&&i(K,Fe,Le,Ve,He,te.children,Ae,Be,ae)}if(ve!==Xt)for(const Fe in ve)!Er(Fe)&&!(Fe in Ce)&&i(K,Fe,ve[Fe],null,He,te.children,Ae,Be,ae);"value"in Ce&&i(K,"value",ve.value,Ce.value)}},k=(K,te,ve,Ce,Ae,Be,He,Fe,Ve)=>{const Le=te.el=K?K.el:r(""),et=te.anchor=K?K.anchor:r("");let{patchFlag:Ze,dynamicChildren:Xe,slotScopeIds:at}=te;at&&(Fe=Fe?Fe.concat(at):at),K==null?(s(Le,ve,Ce),s(et,ve,Ce),E(te.children,ve,et,Ae,Be,He,Fe,Ve)):Ze>0&&Ze&64&&Xe&&K.dynamicChildren?(A(K.dynamicChildren,Xe,ve,Ae,Be,He,Fe),(te.key!=null||Ae&&te===Ae.subTree)&&_1(K,te,!0)):z(K,te,ve,et,Ae,Be,He,Fe,Ve)},M=(K,te,ve,Ce,Ae,Be,He,Fe,Ve)=>{te.slotScopeIds=Fe,K==null?te.shapeFlag&512?Ae.ctx.activate(te,ve,Ce,He,Ve):x(te,ve,Ce,Ae,Be,He,Ve):F(K,te,Ve)},x=(K,te,ve,Ce,Ae,Be,He)=>{const Fe=K.component=gb(K,Ce,Ae);if(ml(K)&&(Fe.ctx.renderer=we),pb(Fe),Fe.asyncDep){if(Ae&&Ae.registerDep(Fe,V),!K.el){const Ve=Fe.subTree=Ge(us);g(null,Ve,te,ve)}return}V(Fe,K,te,ve,Ae,Be,He)},F=(K,te,ve)=>{const Ce=te.component=K.component;if(M_(K,te,ve))if(Ce.asyncDep&&!Ce.asyncResolved){D(Ce,te,ve);return}else Ce.next=te,C_(Ce.update),Ce.update();else te.el=K.el,Ce.vnode=te},V=(K,te,ve,Ce,Ae,Be,He)=>{const Fe=()=>{if(K.isMounted){let{next:et,bu:Ze,u:Xe,parent:at,vnode:lt}=K,gt=et,Te;za(K,!1),et?(et.el=lt.el,D(K,et,He)):et=lt,Ze&&Gl(Ze),(Te=et.props&&et.props.onVnodeBeforeUpdate)&&Ms(Te,at,et,lt),za(K,!0);const Ne=nf(K),pe=K.subTree;K.subTree=Ne,b(pe,Ne,c(pe.el),X(pe),K,Ae,Be),et.el=Ne.el,gt===null&&I_(K,Ne.el),Xe&&zn(Xe,Ae),(Te=et.props&&et.props.onVnodeUpdated)&&zn(()=>Ms(Te,at,et,lt),Ae)}else{let et;const{el:Ze,props:Xe}=te,{bm:at,m:lt,parent:gt}=K,Te=vo(te);za(K,!1),at&&Gl(at),!Te&&(et=Xe&&Xe.onVnodeBeforeMount)&&Ms(et,gt,te),za(K,!0);{const Ne=K.subTree=nf(K);b(null,Ne,ve,Ce,K,Ae,Be),te.el=Ne.el}if(lt&&zn(lt,Ae),!Te&&(et=Xe&&Xe.onVnodeMounted)){const Ne=te;zn(()=>Ms(et,gt,Ne),Ae)}(te.shapeFlag&256||gt&&vo(gt.vnode)&&gt.vnode.shapeFlag&256)&&K.a&&zn(K.a,Ae),K.isMounted=!0,te=ve=Ce=null}},Ve=K.effect=new Mu(Fe,()=>qv(Le),K.scope),Le=K.update=()=>Ve.run();Le.id=K.uid,za(K,!0),Le()},D=(K,te,ve)=>{te.component=K;const Ce=K.vnode.props;K.vnode=te,K.next=null,nb(K,te.props,Ce,ve),ib(K,te.children,ve),Ni(),dl(void 0,K.update),ji()},z=(K,te,ve,Ce,Ae,Be,He,Fe,Ve=!1)=>{const Le=K&&K.children,et=K?K.shapeFlag:0,Ze=te.children,{patchFlag:Xe,shapeFlag:at}=te;if(Xe>0){if(Xe&128){B(Le,Ze,ve,Ce,Ae,Be,He,Fe,Ve);return}else if(Xe&256){p(Le,Ze,ve,Ce,Ae,Be,He,Fe,Ve);return}}at&8?(et&16&&ae(Le,Ae,Be),Ze!==Le&&d(ve,Ze)):et&16?at&16?B(Le,Ze,ve,Ce,Ae,Be,He,Fe,Ve):ae(Le,Ae,Be,!0):(et&8&&d(ve,""),at&16&&E(Ze,ve,Ce,Ae,Be,He,Fe,Ve))},p=(K,te,ve,Ce,Ae,Be,He,Fe,Ve)=>{K=K||Ei,te=te||Ei;const Le=K.length,et=te.length,Ze=Math.min(Le,et);let Xe;for(Xe=0;Xe<Ze;Xe++){const at=te[Xe]=Ve?xa(te[Xe]):$s(te[Xe]);b(K[Xe],at,ve,null,Ae,Be,He,Fe,Ve)}Le>et?ae(K,Ae,Be,!0,!1,Ze):E(te,ve,Ce,Ae,Be,He,Fe,Ve,Ze)},B=(K,te,ve,Ce,Ae,Be,He,Fe,Ve)=>{let Le=0;const et=te.length;let Ze=K.length-1,Xe=et-1;for(;Le<=Ze&&Le<=Xe;){const at=K[Le],lt=te[Le]=Ve?xa(te[Le]):$s(te[Le]);if(ti(at,lt))b(at,lt,ve,null,Ae,Be,He,Fe,Ve);else break;Le++}for(;Le<=Ze&&Le<=Xe;){const at=K[Ze],lt=te[Xe]=Ve?xa(te[Xe]):$s(te[Xe]);if(ti(at,lt))b(at,lt,ve,null,Ae,Be,He,Fe,Ve);else break;Ze--,Xe--}if(Le>Ze){if(Le<=Xe){const at=Xe+1,lt=at<et?te[at].el:Ce;for(;Le<=Xe;)b(null,te[Le]=Ve?xa(te[Le]):$s(te[Le]),ve,lt,Ae,Be,He,Fe,Ve),Le++}}else if(Le>Xe)for(;Le<=Ze;)$(K[Le],Ae,Be,!0),Le++;else{const at=Le,lt=Le,gt=new Map;for(Le=lt;Le<=Xe;Le++){const ne=te[Le]=Ve?xa(te[Le]):$s(te[Le]);ne.key!=null&&gt.set(ne.key,Le)}let Te,Ne=0;const pe=Xe-lt+1;let de=!1,O=0;const N=new Array(pe);for(Le=0;Le<pe;Le++)N[Le]=0;for(Le=at;Le<=Ze;Le++){const ne=K[Le];if(Ne>=pe){$(ne,Ae,Be,!0);continue}let oe;if(ne.key!=null)oe=gt.get(ne.key);else for(Te=lt;Te<=Xe;Te++)if(N[Te-lt]===0&&ti(ne,te[Te])){oe=Te;break}oe===void 0?$(ne,Ae,Be,!0):(N[oe-lt]=Le+1,oe>=O?O=oe:de=!0,b(ne,te[oe],ve,null,Ae,Be,He,Fe,Ve),Ne++)}const Z=de?ub(N):Ei;for(Te=Z.length-1,Le=pe-1;Le>=0;Le--){const ne=lt+Le,oe=te[ne],W=ne+1<et?te[ne+1].el:Ce;N[Le]===0?b(null,oe,ve,W,Ae,Be,He,Fe,Ve):de&&(Te<0||Le!==Z[Te]?U(oe,ve,W,2):Te--)}}},U=(K,te,ve,Ce,Ae=null)=>{const{el:Be,type:He,transition:Fe,children:Ve,shapeFlag:Le}=K;if(Le&6){U(K.component.subTree,te,ve,Ce);return}if(Le&128){K.suspense.move(te,ve,Ce);return}if(Le&64){He.move(K,te,ve,we);return}if(He===Lt){s(Be,te,ve);for(let Ze=0;Ze<Ve.length;Ze++)U(Ve[Ze],te,ve,Ce);s(K.anchor,te,ve);return}if(He===Jl){P(K,te,ve);return}if(Ce!==2&&Le&1&&Fe)if(Ce===0)Fe.beforeEnter(Be),s(Be,te,ve),zn(()=>Fe.enter(Be),Ae);else{const{leave:Ze,delayLeave:Xe,afterLeave:at}=Fe,lt=()=>s(Be,te,ve),gt=()=>{Ze(Be,()=>{lt(),at&&at()})};Xe?Xe(Be,lt,gt):gt()}else s(Be,te,ve)},$=(K,te,ve,Ce=!1,Ae=!1)=>{const{type:Be,props:He,ref:Fe,children:Ve,dynamicChildren:Le,shapeFlag:et,patchFlag:Ze,dirs:Xe}=K;if(Fe!=null&&qc(Fe,null,ve,K,!0),et&256){te.ctx.deactivate(K);return}const at=et&1&&Xe,lt=!vo(K);let gt;if(lt&&(gt=He&&He.onVnodeBeforeUnmount)&&Ms(gt,te,K),et&6)G(K.component,ve,Ce);else{if(et&128){K.suspense.unmount(ve,Ce);return}at&&Ha(K,null,te,"beforeUnmount"),et&64?K.type.remove(K,te,ve,Ae,we,Ce):Le&&(Be!==Lt||Ze>0&&Ze&64)?ae(Le,te,ve,!1,!0):(Be===Lt&&Ze&384||!Ae&&et&16)&&ae(Ve,te,ve),Ce&&ee(K)}(lt&&(gt=He&&He.onVnodeUnmounted)||at)&&zn(()=>{gt&&Ms(gt,te,K),at&&Ha(K,null,te,"unmounted")},ve)},ee=K=>{const{type:te,el:ve,anchor:Ce,transition:Ae}=K;if(te===Lt){re(ve,Ce);return}if(te===Jl){S(K);return}const Be=()=>{a(ve),Ae&&!Ae.persisted&&Ae.afterLeave&&Ae.afterLeave()};if(K.shapeFlag&1&&Ae&&!Ae.persisted){const{leave:He,delayLeave:Fe}=Ae,Ve=()=>He(ve,Be);Fe?Fe(K.el,Be,Ve):Ve()}else Be()},re=(K,te)=>{let ve;for(;K!==te;)ve=l(K),a(K),K=ve;a(te)},G=(K,te,ve)=>{const{bum:Ce,scope:Ae,update:Be,subTree:He,um:Fe}=K;Ce&&Gl(Ce),Ae.stop(),Be&&(Be.active=!1,$(He,K,te,ve)),Fe&&zn(Fe,te),zn(()=>{K.isUnmounted=!0},te),te&&te.pendingBranch&&!te.isUnmounted&&K.asyncDep&&!K.asyncResolved&&K.suspenseId===te.pendingId&&(te.deps--,te.deps===0&&te.resolve())},ae=(K,te,ve,Ce=!1,Ae=!1,Be=0)=>{for(let He=Be;He<K.length;He++)$(K[He],te,ve,Ce,Ae)},X=K=>K.shapeFlag&6?X(K.component.subTree):K.shapeFlag&128?K.suspense.next():l(K.anchor||K.el),he=(K,te,ve)=>{K==null?te._vnode&&$(te._vnode,null,null,!0):b(te._vnode||null,K,te,null,null,null,ve),Kv(),te._vnode=K},we={p:b,um:$,m:U,r:ee,mt:x,mc:E,pc:z,pbc:A,n:X,o:e};return{render:he,hydrate:void 0,createApp:rb(he)}}function za({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function _1(e,t,n=!1){const s=e.children,a=t.children;if($t(s)&&$t(a))for(let i=0;i<s.length;i++){const o=s[i];let r=a[i];r.shapeFlag&1&&!r.dynamicChildren&&((r.patchFlag<=0||r.patchFlag===32)&&(r=a[i]=xa(a[i]),r.el=o.el),n||_1(o,r))}}function ub(e){const t=e.slice(),n=[0];let s,a,i,o,r;const f=e.length;for(s=0;s<f;s++){const u=e[s];if(u!==0){if(a=n[n.length-1],e[a]<u){t[s]=a,n.push(s);continue}for(i=0,o=n.length-1;i<o;)r=i+o>>1,e[n[r]]<u?i=r+1:o=r;u<e[n[i]]&&(i>0&&(t[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=t[o];return n}const db=e=>e.__isTeleport,Lt=Symbol(void 0),Yu=Symbol(void 0),us=Symbol(void 0),Jl=Symbol(void 0),ho=[];let bs=null;function me(e=!1){ho.push(bs=e?null:[])}function fb(){ho.pop(),bs=ho[ho.length-1]||null}let Ao=1;function vf(e){Ao+=e}function b1(e){return e.dynamicChildren=Ao>0?bs||Ei:null,fb(),Ao>0&&bs&&bs.push(e),e}function xe(e,t,n,s,a,i){return b1(De(e,t,n,s,a,i,!0))}function Ht(e,t,n,s,a){return b1(Ge(e,t,n,s,a,!0))}function Hr(e){return e?e.__v_isVNode===!0:!1}function ti(e,t){return e.type===t.type&&e.key===t.key}const gl="__vInternal",y1=({key:e})=>e??null,Rr=({ref:e,ref_key:t,ref_for:n})=>e!=null?Pn(e)||On(e)||It(e)?{i:Mn,r:e,k:t,f:!!n}:e:null;function De(e,t=null,n=null,s=0,a=null,i=e===Lt?0:1,o=!1,r=!1){const f={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&y1(t),ref:t&&Rr(t),scopeId:Zv,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:a,dynamicChildren:null,appContext:null};return r?(Ku(f,n),i&128&&e.normalize(f)):n&&(f.shapeFlag|=Pn(n)?8:16),Ao>0&&!o&&bs&&(f.patchFlag>0||i&6)&&f.patchFlag!==32&&bs.push(f),f}const Ge=mb;function mb(e,t=null,n=null,s=0,a=null,i=!1){if((!e||e===l1)&&(e=us),Hr(e)){const r=Pa(e,t,!0);return n&&Ku(r,n),Ao>0&&!i&&bs&&(r.shapeFlag&6?bs[bs.indexOf(e)]=r:bs.push(r)),r.patchFlag|=-2,r}if(kb(e)&&(e=e.__vccOpts),t){t=zt(t);let{class:r,style:f}=t;r&&!Pn(r)&&(t.class=Mt(r)),$n(f)&&(Lv(f)&&!$t(f)&&(f=Ss({},f)),t.style=nn(f))}const o=Pn(e)?1:B_(e)?128:db(e)?64:$n(e)?4:It(e)?2:0;return De(e,t,n,s,a,o,i,!0)}function zt(e){return e?Lv(e)||gl in e?Ss({},e):e:null}function Pa(e,t,n=!1){const{props:s,ref:a,patchFlag:i,children:o}=e,r=t?Gu(s||{},t):s;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:r,key:r&&y1(r),ref:t&&t.ref?n&&a?$t(a)?a.concat(Rr(t)):[a,Rr(t)]:Rr(t):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Lt?i===-1?16:i|16:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Pa(e.ssContent),ssFallback:e.ssFallback&&Pa(e.ssFallback),el:e.el,anchor:e.anchor}}function ra(e=" ",t=0){return Ge(Yu,null,e,t)}function qe(e="",t=!1){return t?(me(),Ht(us,null,e)):Ge(us,null,e)}function $s(e){return e==null||typeof e=="boolean"?Ge(us):$t(e)?Ge(Lt,null,e.slice()):typeof e=="object"?xa(e):Ge(Yu,null,String(e))}function xa(e){return e.el===null||e.memo?e:Pa(e)}function Ku(e,t){let n=0;const{shapeFlag:s}=e;if(t==null)t=null;else if($t(t))n=16;else if(typeof t=="object")if(s&65){const a=t.default;a&&(a._c&&(a._d=!1),Ku(e,a()),a._c&&(a._d=!0));return}else{n=32;const a=t._;!a&&!(gl in t)?t._ctx=Mn:a===3&&Mn&&(Mn.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else It(t)?(t={default:t,_ctx:Mn},n=32):(t=String(t),s&64?(n=16,t=[ra(t)]):n=8);e.children=t,e.shapeFlag|=n}function Gu(...e){const t={};for(let n=0;n<e.length;n++){const s=e[n];for(const a in s)if(a==="class")t.class!==s.class&&(t.class=Mt([t.class,s.class]));else if(a==="style")t.style=nn([t.style,s.style]);else if(Du(a)){const i=t[a],o=s[a];o&&i!==o&&!($t(i)&&i.includes(o))&&(t[a]=i?[].concat(i,o):o)}else a!==""&&(t[a]=s[a])}return t}function Ms(e,t,n,s=null){cs(e,t,7,[n,s])}const vb=p1();let hb=0;function gb(e,t,n){const s=e.type,a=(t?t.appContext:e.appContext)||vb,i={uid:hb++,vnode:e,type:s,parent:t,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,scope:new Ip(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(a.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:m1(s,a),emitsOptions:Xv(s,a),emit:null,emitted:null,propsDefaults:Xt,inheritAttrs:s.inheritAttrs,ctx:Xt,data:Xt,props:Xt,attrs:Xt,slots:Xt,refs:Xt,setupState:Xt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=x_.bind(null,i),e.ce&&e.ce(i),i}let kn=null;const w1=()=>kn||Mn,Bi=e=>{kn=e,e.scope.on()},ci=()=>{kn&&kn.scope.off(),kn=null};function k1(e){return e.vnode.shapeFlag&4}let To=!1;function pb(e,t=!1){To=t;const{props:n,children:s}=e.vnode,a=k1(e);tb(e,n,a,t),ab(e,s);const i=a?_b(e,t):void 0;return To=!1,i}function _b(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=Ov(new Proxy(e.ctx,G_));const{setup:s}=n;if(s){const a=e.setupContext=s.length>1?yb(e):null;Bi(e),Ni();const i=Ma(s,e,0,[e.props,a]);if(ji(),ci(),Nv(i)){if(i.then(ci,ci),t)return i.then(o=>{hf(e,o)}).catch(o=>{ul(o,e,0)});e.asyncDep=i}else hf(e,i)}else S1(e)}function hf(e,t,n){It(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:$n(t)&&(e.setupState=Pv(t)),S1(e)}function S1(e,t,n){const s=e.type;e.render||(e.render=s.render||aa),Bi(e),Ni(),X_(e),ji(),ci()}function bb(e){return new Proxy(e.attrs,{get(t,n){return Jn(e,"get","$attrs"),t[n]}})}function yb(e){const t=s=>{e.exposed=s||{}};let n;return{get attrs(){return n||(n=bb(e))},slots:e.slots,emit:e.emit,expose:t}}function pl(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Pv(Ov(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Nr)return Nr[n](e)}}))}function wb(e,t=!0){return It(e)?e.displayName||e.name:e.name||t&&e.__name}function kb(e){return It(e)&&"__vccOpts"in e}const Sb=(e,t)=>u_(e,t,To);function Cb(e,t,n){const s=arguments.length;return s===2?$n(t)&&!$t(t)?Hr(t)?Ge(e,null,[t]):Ge(e,t):Ge(e,null,t):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&Hr(n)&&(n=[n]),Ge(e,t,n))}const Ab="3.2.37";function Tb(e,t){const n=Object.create(null),s=e.split(",");for(let a=0;a<s.length;a++)n[s[a]]=!0;return a=>!!n[a]}const xb="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Eb=Tb(xb);function C1(e){return!!e||e===""}const Rb=/^on[^a-z]/,Mb=e=>Rb.test(e),Ib=e=>e.startsWith("onUpdate:"),Do=Object.assign,Vo=Array.isArray,Bb=e=>typeof e=="function",Wc=e=>typeof e=="string",Lb=e=>e!==null&&typeof e=="object",Xu=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Ob=/-(\w)/g,gf=Xu(e=>e.replace(Ob,(t,n)=>n?n.toUpperCase():"")),Pb=/\B([A-Z])/g,Ri=Xu(e=>e.replace(Pb,"-$1").toLowerCase()),$b=Xu(e=>e.charAt(0).toUpperCase()+e.slice(1)),Yc=e=>{const t=parseFloat(e);return isNaN(t)?e:t},Fb="http://www.w3.org/2000/svg",ni=typeof document<"u"?document:null,pf=ni&&ni.createElement("template"),Db={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,s)=>{const a=t?ni.createElementNS(Fb,e):ni.createElement(e,n?{is:n}:void 0);return e==="select"&&s&&s.multiple!=null&&a.setAttribute("multiple",s.multiple),a},createText:e=>ni.createTextNode(e),createComment:e=>ni.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>ni.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,n,s,a,i){const o=n?n.previousSibling:t.lastChild;if(a&&(a===i||a.nextSibling))for(;t.insertBefore(a.cloneNode(!0),n),!(a===i||!(a=a.nextSibling)););else{pf.innerHTML=s?`<svg>${e}</svg>`:e;const r=pf.content;if(s){const f=r.firstChild;for(;f.firstChild;)r.appendChild(f.firstChild);r.removeChild(f)}t.insertBefore(r,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function Vb(e,t,n){const s=e._vtc;s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function Nb(e,t,n){const s=e.style,a=Wc(n);if(n&&!a){for(const i in n)Kc(s,i,n[i]);if(t&&!Wc(t))for(const i in t)n[i]==null&&Kc(s,i,"")}else{const i=s.display;a?t!==n&&(s.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(s.display=i)}}const _f=/\s*!important$/;function Kc(e,t,n){if(Vo(n))n.forEach(s=>Kc(e,t,s));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const s=jb(e,t);_f.test(n)?e.setProperty(Ri(s),n.replace(_f,""),"important"):e[s]=n}}const bf=["Webkit","Moz","ms"],ec={};function jb(e,t){const n=ec[t];if(n)return n;let s=Hs(t);if(s!=="filter"&&s in e)return ec[t]=s;s=$b(s);for(let a=0;a<bf.length;a++){const i=bf[a]+s;if(i in e)return ec[t]=i}return t}const yf="http://www.w3.org/1999/xlink";function Hb(e,t,n,s,a){if(s&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(yf,t.slice(6,t.length)):e.setAttributeNS(yf,t,n);else{const i=Eb(t);n==null||i&&!C1(n)?e.removeAttribute(t):e.setAttribute(t,i?"":n)}}function zb(e,t,n,s,a,i,o){if(t==="innerHTML"||t==="textContent"){s&&o(s,a,i),e[t]=n??"";return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=n;const f=n??"";(e.value!==f||e.tagName==="OPTION")&&(e.value=f),n==null&&e.removeAttribute(t);return}let r=!1;if(n===""||n==null){const f=typeof e[t];f==="boolean"?n=C1(n):n==null&&f==="string"?(n="",r=!0):f==="number"&&(n=0,r=!0)}try{e[t]=n}catch{}r&&e.removeAttribute(t)}const[A1,Ub]=(()=>{let e=Date.now,t=!1;if(typeof window<"u"){Date.now()>document.createEvent("Event").timeStamp&&(e=performance.now.bind(performance));const n=navigator.userAgent.match(/firefox\/(\d+)/i);t=!!(n&&Number(n[1])<=53)}return[e,t]})();let Gc=0;const qb=Promise.resolve(),Wb=()=>{Gc=0},Yb=()=>Gc||(qb.then(Wb),Gc=A1());function Kb(e,t,n,s){e.addEventListener(t,n,s)}function Gb(e,t,n,s){e.removeEventListener(t,n,s)}function Xb(e,t,n,s,a=null){const i=e._vei||(e._vei={}),o=i[t];if(s&&o)o.value=s;else{const[r,f]=Zb(t);if(s){const u=i[t]=Qb(s,a);Kb(e,r,u,f)}else o&&(Gb(e,r,o,f),i[t]=void 0)}}const wf=/(?:Once|Passive|Capture)$/;function Zb(e){let t;if(wf.test(e)){t={};let n;for(;n=e.match(wf);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[Ri(e.slice(2)),t]}function Qb(e,t){const n=s=>{const a=s.timeStamp||A1();(Ub||a>=n.attached-1)&&cs(Jb(s,n.value),t,5,[s])};return n.value=e,n.attached=Yb(),n}function Jb(e,t){if(Vo(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(s=>a=>!a._stopped&&s&&s(a))}else return t}const kf=/^on[a-z]/,e2=(e,t,n,s,a=!1,i,o,r,f)=>{t==="class"?Vb(e,s,a):t==="style"?Nb(e,n,s):Mb(t)?Ib(t)||Xb(e,t,n,s,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):t2(e,t,s,a))?zb(e,t,s,i,o,r,f):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),Hb(e,t,s,a))};function t2(e,t,n,s){return s?!!(t==="innerHTML"||t==="textContent"||t in e&&kf.test(t)&&Bb(n)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||kf.test(t)&&Wc(n)?!1:t in e}function n2(e,t){const n=F_(e);class s extends Zu{constructor(i){super(n,i,t)}}return s.def=n,s}const s2=typeof HTMLElement<"u"?HTMLElement:class{};class Zu extends s2{constructor(t,n={},s){super(),this._def=t,this._props=n,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this.shadowRoot&&s?s(this._createVNode(),this.shadowRoot):this.attachShadow({mode:"open"})}connectedCallback(){this._connected=!0,this._instance||this._resolveDef()}disconnectedCallback(){this._connected=!1,Uv(()=>{this._connected||(Rf(null,this.shadowRoot),this._instance=null)})}_resolveDef(){if(this._resolved)return;this._resolved=!0;for(let s=0;s<this.attributes.length;s++)this._setAttr(this.attributes[s].name);new MutationObserver(s=>{for(const a of s)this._setAttr(a.attributeName)}).observe(this,{attributes:!0});const t=s=>{const{props:a,styles:i}=s,o=!Vo(a),r=a?o?Object.keys(a):a:[];let f;if(o)for(const u in this._props){const d=a[u];(d===Number||d&&d.type===Number)&&(this._props[u]=Yc(this._props[u]),(f||(f=Object.create(null)))[u]=!0)}this._numberProps=f;for(const u of Object.keys(this))u[0]!=="_"&&this._setProp(u,this[u],!0,!1);for(const u of r.map(gf))Object.defineProperty(this,u,{get(){return this._getProp(u)},set(d){this._setProp(u,d)}});this._applyStyles(i),this._update()},n=this._def.__asyncLoader;n?n().then(t):t(this._def)}_setAttr(t){let n=this.getAttribute(t);this._numberProps&&this._numberProps[t]&&(n=Yc(n)),this._setProp(gf(t),n,!1)}_getProp(t){return this._props[t]}_setProp(t,n,s=!0,a=!0){n!==this._props[t]&&(this._props[t]=n,a&&this._instance&&this._update(),s&&(n===!0?this.setAttribute(Ri(t),""):typeof n=="string"||typeof n=="number"?this.setAttribute(Ri(t),n+""):n||this.removeAttribute(Ri(t))))}_update(){Rf(this._createVNode(),this.shadowRoot)}_createVNode(){const t=Ge(this._def,Do({},this._props));return this._instance||(t.ce=n=>{this._instance=n,n.isCE=!0,n.emit=(a,...i)=>{this.dispatchEvent(new CustomEvent(a,{detail:i}))};let s=this;for(;s=s&&(s.parentNode||s.host);)if(s instanceof Zu){n.parent=s._instance;break}}),t}_applyStyles(t){t&&t.forEach(n=>{const s=document.createElement("style");s.textContent=n,this.shadowRoot.appendChild(s)})}}const ba="transition",Gi="animation",vn=(e,{slots:t})=>Cb(t1,x1(e),t);vn.displayName="Transition";const T1={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},a2=vn.props=Do({},t1.props,T1),Ua=(e,t=[])=>{Vo(e)?e.forEach(n=>n(...t)):e&&e(...t)},Sf=e=>e?Vo(e)?e.some(t=>t.length>1):e.length>1:!1;function x1(e){const t={};for(const w in e)w in T1||(t[w]=e[w]);if(e.css===!1)return t;const{name:n="v",type:s,duration:a,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:r=`${n}-enter-to`,appearFromClass:f=i,appearActiveClass:u=o,appearToClass:d=r,leaveFromClass:c=`${n}-leave-from`,leaveActiveClass:l=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=e,v=i2(a),C=v&&v[0],b=v&&v[1],{onBeforeEnter:_,onEnter:g,onEnterCancelled:R,onLeave:P,onLeaveCancelled:S,onBeforeAppear:L=_,onAppear:I=g,onAppearCancelled:T=R}=t,E=(w,k,M)=>{Ta(w,k?d:r),Ta(w,k?u:o),M&&M()},y=(w,k)=>{w._isLeaving=!1,Ta(w,c),Ta(w,m),Ta(w,l),k&&k()},A=w=>(k,M)=>{const x=w?I:g,F=()=>E(k,w,M);Ua(x,[k,F]),Cf(()=>{Ta(k,w?f:i),ea(k,w?d:r),Sf(x)||Af(k,s,C,F)})};return Do(t,{onBeforeEnter(w){Ua(_,[w]),ea(w,i),ea(w,o)},onBeforeAppear(w){Ua(L,[w]),ea(w,f),ea(w,u)},onEnter:A(!1),onAppear:A(!0),onLeave(w,k){w._isLeaving=!0;const M=()=>y(w,k);ea(w,c),R1(),ea(w,l),Cf(()=>{w._isLeaving&&(Ta(w,c),ea(w,m),Sf(P)||Af(w,s,b,M))}),Ua(P,[w,M])},onEnterCancelled(w){E(w,!1),Ua(R,[w])},onAppearCancelled(w){E(w,!0),Ua(T,[w])},onLeaveCancelled(w){y(w),Ua(S,[w])}})}function i2(e){if(e==null)return null;if(Lb(e))return[tc(e.enter),tc(e.leave)];{const t=tc(e);return[t,t]}}function tc(e){return Yc(e)}function ea(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e._vtc||(e._vtc=new Set)).add(t)}function Ta(e,t){t.split(/\s+/).forEach(s=>s&&e.classList.remove(s));const{_vtc:n}=e;n&&(n.delete(t),n.size||(e._vtc=void 0))}function Cf(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let o2=0;function Af(e,t,n,s){const a=e._endId=++o2,i=()=>{a===e._endId&&s()};if(n)return setTimeout(i,n);const{type:o,timeout:r,propCount:f}=E1(e,t);if(!o)return s();const u=o+"end";let d=0;const c=()=>{e.removeEventListener(u,l),i()},l=m=>{m.target===e&&++d>=f&&c()};setTimeout(()=>{d<f&&c()},r+1),e.addEventListener(u,l)}function E1(e,t){const n=window.getComputedStyle(e),s=v=>(n[v]||"").split(", "),a=s(ba+"Delay"),i=s(ba+"Duration"),o=Tf(a,i),r=s(Gi+"Delay"),f=s(Gi+"Duration"),u=Tf(r,f);let d=null,c=0,l=0;t===ba?o>0&&(d=ba,c=o,l=i.length):t===Gi?u>0&&(d=Gi,c=u,l=f.length):(c=Math.max(o,u),d=c>0?o>u?ba:Gi:null,l=d?d===ba?i.length:f.length:0);const m=d===ba&&/\b(transform|all)(,|$)/.test(n[ba+"Property"]);return{type:d,timeout:c,propCount:l,hasTransform:m}}function Tf(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,s)=>xf(n)+xf(e[s])))}function xf(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function R1(){return document.body.offsetHeight}const M1=new WeakMap,I1=new WeakMap,r2={name:"TransitionGroup",props:Do({},a2,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=w1(),s=e1();let a,i;return i1(()=>{if(!a.length)return;const o=e.moveClass||`${e.name||"v"}-move`;if(!d2(a[0].el,n.vnode.el,o))return;a.forEach(l2),a.forEach(c2);const r=a.filter(u2);R1(),r.forEach(f=>{const u=f.el,d=u.style;ea(u,o),d.transform=d.webkitTransform=d.transitionDuration="";const c=u._moveCb=l=>{l&&l.target!==u||(!l||/transform$/.test(l.propertyName))&&(u.removeEventListener("transitionend",c),u._moveCb=null,Ta(u,o))};u.addEventListener("transitionend",c)})}),()=>{const o=jt(e),r=x1(o);let f=o.tag||Lt;a=i,i=t.default?zu(t.default()):[];for(let u=0;u<i.length;u++){const d=i[u];d.key!=null&&Co(d,So(d,r,s,n))}if(a)for(let u=0;u<a.length;u++){const d=a[u];Co(d,So(d,r,s,n)),M1.set(d,d.el.getBoundingClientRect())}return Ge(f,null,i)}}},Qu=r2;function l2(e){const t=e.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function c2(e){I1.set(e,e.el.getBoundingClientRect())}function u2(e){const t=M1.get(e),n=I1.get(e),s=t.left-n.left,a=t.top-n.top;if(s||a){const i=e.el.style;return i.transform=i.webkitTransform=`translate(${s}px,${a}px)`,i.transitionDuration="0s",e}}function d2(e,t,n){const s=e.cloneNode();e._vtc&&e._vtc.forEach(o=>{o.split(/\s+/).forEach(r=>r&&s.classList.remove(r))}),n.split(/\s+/).forEach(o=>o&&s.classList.add(o)),s.style.display="none";const a=t.nodeType===1?t:t.parentNode;a.appendChild(s);const{hasTransform:i}=E1(s);return a.removeChild(s),i}const f2=["ctrl","shift","alt","meta"],m2={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>f2.some(n=>e[`${n}Key`]&&!t.includes(n))},Ns=(e,t)=>(n,...s)=>{for(let a=0;a<t.length;a++){const i=m2[t[a]];if(i&&i(n,t))return}return e(n,...s)},v2={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},ei=(e,t)=>n=>{if(!("key"in n))return;const s=Ri(n.key);if(t.some(a=>a===s||v2[a]===s))return e(n)},_l={beforeMount(e,{value:t},{transition:n}){e._vod=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):Xi(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:s}){!t!=!n&&(s?t?(s.beforeEnter(e),Xi(e,!0),s.enter(e)):s.leave(e,()=>{Xi(e,!1)}):Xi(e,t))},beforeUnmount(e,{value:t}){Xi(e,t)}};function Xi(e,t){e.style.display=t?e._vod:"none"}const h2=Do({patchProp:e2},Db);let Ef;function g2(){return Ef||(Ef=lb(h2))}const Rf=(...e)=>{g2().render(...e)};var Jt=(e,t)=>{const n=e.__vccOpts||e;for(const[s,a]of t)n[s]=a;return n};const p2={name:"AppLoader",props:{show:{type:Boolean,default:!1},infinite:{type:Boolean,default:!1},type:{type:String,required:!0},messageId:{type:String,default:""}}},_2=De("div",{id:"vac-circle"},null,-1),b2=De("div",{id:"vac-circle"},null,-1),y2=De("div",{id:"vac-circle"},null,-1),w2=De("div",{id:"vac-circle"},null,-1),k2=De("div",{id:"vac-circle"},null,-1),S2=De("div",{id:"vac-circle"},null,-1);function C2(e,t,n,s,a,i){return me(),Ht(vn,{name:"vac-fade-spinner",appear:""},{default:vt(()=>[n.show?(me(),xe("div",{key:0,class:Mt(["vac-loader-wrapper",{"vac-container-center":!n.infinite,"vac-container-top":n.infinite}])},[n.type==="rooms"?We(e.$slots,"spinner-icon-rooms",{key:0},()=>[_2]):qe("",!0),n.type==="infinite-rooms"?We(e.$slots,"spinner-icon-infinite-rooms",{key:1},()=>[b2]):qe("",!0),n.type==="message-file"?We(e.$slots,"spinner-icon-message-file_"+n.messageId,{key:2},()=>[y2]):qe("",!0),n.type==="room-file"?We(e.$slots,"spinner-icon-room-file",{key:3},()=>[w2]):qe("",!0),n.type==="messages"?We(e.$slots,"spinner-icon-messages",{key:4},()=>[k2]):qe("",!0),n.type==="infinite-messages"?We(e.$slots,"spinner-icon-infinite-messages",{key:5},()=>[S2]):qe("",!0)],2)):qe("",!0)]),_:3})}var bl=Jt(p2,[["render",C2]]);const A2={name:"SvgIcon",props:{name:{type:String,default:null},param:{type:String,default:null}},data(){return{svgItem:{search:{path:"M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"},add:{path:"M17,13H13V17H11V13H7V11H11V7H13V11H17M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"},toggle:{path:"M5,13L9,17L7.6,18.42L1.18,12L7.6,5.58L9,7L5,11H21V13H5M21,6V8H11V6H21M21,16V18H11V16H21Z"},menu:{path:"M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z"},close:{path:"M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z"},file:{path:"M14,17H7V15H14M17,13H7V11H17M17,9H7V7H17M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z"},paperclip:{path:"M16.5,6V17.5A4,4 0 0,1 12.5,21.5A4,4 0 0,1 8.5,17.5V5A2.5,2.5 0 0,1 11,2.5A2.5,2.5 0 0,1 13.5,5V15.5A1,1 0 0,1 12.5,16.5A1,1 0 0,1 11.5,15.5V6H10V15.5A2.5,2.5 0 0,0 12.5,18A2.5,2.5 0 0,0 15,15.5V5A4,4 0 0,0 11,1A4,4 0 0,0 7,5V17.5A5.5,5.5 0 0,0 12.5,23A5.5,5.5 0 0,0 18,17.5V6H16.5Z"},"close-outline":{path:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"},send:{path:"M2,21L23,12L2,3V10L17,12L2,14V21Z"},emoji:{path:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"},document:{path:"M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z"},pencil:{path:"M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z"},checkmark:{path:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"},"double-checkmark":{path:"M18 7l-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41L6 19l1.41-1.41L1.83 12 .41 13.41z"},eye:{path:"M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z"},dropdown:{path:"M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"},deleted:{path:"M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12C4,13.85 4.63,15.55 5.68,16.91L16.91,5.68C15.55,4.63 13.85,4 12,4M12,20A8,8 0 0,0 20,12C20,10.15 19.37,8.45 18.32,7.09L7.09,18.32C8.45,19.37 10.15,20 12,20Z"},microphone:{size:"large",path:"M432.8,216.4v39.2c0,45.2-15.3,84.3-45.2,118.4c-29.8,33.2-67.3,52.8-111.6,57.9v40.9h78.4c5.1,0,10.2,1.7,13.6,6c4.3,4.3,6,8.5,6,13.6c0,5.1-1.7,10.2-6,13.6c-4.3,4.3-8.5,6-13.6,6H157.6c-5.1,0-10.2-1.7-13.6-6c-4.3-4.3-6-8.5-6-13.6c0-5.1,1.7-10.2,6-13.6c4.3-4.3,8.5-6,13.6-6H236v-40.9c-44.3-5.1-81.8-23.9-111.6-57.9s-45.2-73.3-45.2-118.4v-39.2c0-5.1,1.7-10.2,6-13.6c4.3-4.3,8.5-6,13.6-6s10.2,1.7,13.6,6c4.3,4.3,6,8.5,6,13.6v39.2c0,37.5,13.6,70.7,40,97.1s59.6,40,97.1,40s70.7-13.6,97.1-40c26.4-26.4,40-59.6,40-97.1v-39.2c0-5.1,1.7-10.2,6-13.6c4.3-4.3,8.5-6,13.6-6c5.1,0,10.2,1.7,13.6,6C430.2,206.2,432.8,211.3,432.8,216.4z M353.5,98v157.6c0,27.3-9.4,50.3-29,69c-19.6,19.6-42.6,29-69,29s-50.3-9.4-69-29c-19.6-19.6-29-42.6-29-69V98c0-27.3,9.4-50.3,29-69c19.6-19.6,42.6-29,69-29s50.3,9.4,69,29C344.2,47.7,353.5,71.6,353.5,98z"},"audio-play":{size:"medium",path:"M43.331,21.237L7.233,0.397c-0.917-0.529-2.044-0.529-2.96,0c-0.916,0.528-1.48,1.505-1.48,2.563v41.684   c0,1.058,0.564,2.035,1.48,2.563c0.458,0.268,0.969,0.397,1.48,0.397c0.511,0,1.022-0.133,1.48-0.397l36.098-20.84   c0.918-0.529,1.479-1.506,1.479-2.564S44.247,21.767,43.331,21.237z"},"audio-pause":{size:"medium",path:"M17.991,40.976c0,3.662-2.969,6.631-6.631,6.631l0,0c-3.662,0-6.631-2.969-6.631-6.631V6.631C4.729,2.969,7.698,0,11.36,0l0,0c3.662,0,6.631,2.969,6.631,6.631V40.976z",path2:"M42.877,40.976c0,3.662-2.969,6.631-6.631,6.631l0,0c-3.662,0-6.631-2.969-6.631-6.631V6.631C29.616,2.969,32.585,0,36.246,0l0,0c3.662,0,6.631,2.969,6.631,6.631V40.976z"}}}},computed:{svgId(){const e=this.param?"-"+this.param:"";return`vac-icon-${this.name}${e}`},size(){const e=this.svgItem[this.name];return e.size==="large"?512:e.size==="medium"?48:24}}},T2=["viewBox"],x2=["id","d"],E2=["id","d"];function R2(e,t,n,s,a,i){return me(),xe("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",width:"24",height:"24",viewBox:`0 0 ${i.size} ${i.size}`},[De("path",{id:i.svgId,d:a.svgItem[n.name].path},null,8,x2),a.svgItem[n.name].path2?(me(),xe("path",{key:0,id:i.svgId,d:a.svgItem[n.name].path2},null,8,E2)):qe("",!0)],8,T2)}var An=Jt(A2,[["render",R2]]);const M2={name:"RoomsSearch",components:{SvgIcon:An},props:{textMessages:{type:Object,required:!0},showSearch:{type:Boolean,required:!0},showAddRoom:{type:Boolean,required:!0},rooms:{type:Array,required:!0},loadingRooms:{type:Boolean,required:!0}},emits:["search-room","add-room"],computed:{showSearchBar(){return this.showSearch||this.showAddRoom}}},I2={key:0,class:"vac-icon-search"},B2=["placeholder"];function L2(e,t,n,s,a,i){const o=mt("svg-icon");return me(),xe("div",{class:Mt({"vac-box-search":i.showSearchBar,"vac-box-empty":!i.showSearchBar})},[n.showSearch?(me(),xe(Lt,{key:0},[!n.loadingRooms&&n.rooms.length?(me(),xe("div",I2,[We(e.$slots,"search-icon",{},()=>[Ge(o,{name:"search"})])])):qe("",!0),!n.loadingRooms&&n.rooms.length?(me(),xe("input",{key:1,type:"search",placeholder:n.textMessages.SEARCH,autocomplete:"off",class:"vac-input",onInput:t[0]||(t[0]=r=>e.$emit("search-room",r))},null,40,B2)):qe("",!0)],64)):qe("",!0),n.showAddRoom?(me(),xe("div",{key:1,class:"vac-svg-button vac-add-icon",onClick:t[1]||(t[1]=r=>e.$emit("add-room"))},[We(e.$slots,"add-icon",{},()=>[Ge(o,{name:"add"})])])):qe("",!0)],2)}var O2=Jt(M2,[["render",L2]]);const Mf=document.createElement("i");function B1(e){const t="&"+e+";";Mf.innerHTML=t;const n=Mf.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Zn(e,t,n,s){const a=e.length;let i=0,o;if(t<0?t=-t>a?0:a+t:t=t>a?a:t,n=n>0?n:0,s.length<1e4)o=Array.from(s),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);i<s.length;)o=s.slice(i,i+1e4),o.unshift(t,0),e.splice(...o),i+=1e4,t+=1e4}function En(e,t){return e.length>0?(Zn(e,e.length,0,t),e):t}const Xc={}.hasOwnProperty;function L1(e){const t={};let n=-1;for(;++n<e.length;)P2(t,e[n]);return t}function P2(e,t){let n;for(n in t){const a=(Xc.call(e,n)?e[n]:void 0)||(e[n]={}),i=t[n];let o;if(i)for(o in i){Xc.call(a,o)||(a[o]=[]);const r=i[o];$2(a[o],Array.isArray(r)?r:r?[r]:[])}}}function $2(e,t){let n=-1;const s=[];for(;++n<t.length;)(t[n].add==="after"?e:s).push(t[n]);Zn(e,0,0,s)}function O1(e){const t={};let n=-1;for(;++n<e.length;)F2(t,e[n]);return t}function F2(e,t){let n;for(n in t){const a=(Xc.call(e,n)?e[n]:void 0)||(e[n]={}),i=t[n];let o;if(i)for(o in i)a[o]=i[o]}}function D2(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCharCode(n)}const V2={'"':"quot","&":"amp","<":"lt",">":"gt"};function P1(e){return e.replace(/["&<>]/g,t);function t(n){return"&"+V2[n]+";"}}function zs(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const N2=/[!-\/:-@\[-`\{-~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,Ln=Da(/[A-Za-z]/),In=Da(/[\dA-Za-z]/),j2=Da(/[#-'*+\--9=?A-Z^-~]/);function zr(e){return e!==null&&(e<32||e===127)}const Zc=Da(/\d/),H2=Da(/[\dA-Fa-f]/),z2=Da(/[!-/:-@[-`{-~]/);function ht(e){return e!==null&&e<-2}function Qt(e){return e!==null&&(e<0||e===32)}function Bt(e){return e===-2||e===-1||e===32}const Ju=Da(N2),Li=Da(/\s/);function Da(e){return t;function t(n){return n!==null&&e.test(String.fromCharCode(n))}}function oi(e,t){const n=P1(U2(e||""));if(!t)return n;const s=n.indexOf(":"),a=n.indexOf("?"),i=n.indexOf("#"),o=n.indexOf("/");return s<0||o>-1&&s>o||a>-1&&s>a||i>-1&&s>i||t.test(n.slice(0,s))?n:""}function U2(e){const t=[];let n=-1,s=0,a=0;for(;++n<e.length;){const i=e.charCodeAt(n);let o="";if(i===37&&In(e.charCodeAt(n+1))&&In(e.charCodeAt(n+2)))a=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(o=String.fromCharCode(i));else if(i>55295&&i<57344){const r=e.charCodeAt(n+1);i<56320&&r>56319&&r<57344?(o=String.fromCharCode(i,r),a=1):o=""}else o=String.fromCharCode(i);o&&(t.push(e.slice(s,n),encodeURIComponent(o)),s=n+a+1,o=""),a&&(n+=a,a=0)}return t.join("")+e.slice(s)}const If={}.hasOwnProperty,Bf=/^(https?|ircs?|mailto|xmpp)$/i,q2=/^https?$/i;function W2(e){const t=e||{};let n=!0;const s={},a=[[]],i=[],o=[],f=O1([{enter:{blockQuote:M,codeFenced:D,codeFencedFenceInfo:b,codeFencedFenceMeta:b,codeIndented:B,codeText:ne,content:Fe,definition:te,definitionDestinationString:Ce,definitionLabelString:b,definitionTitleString:b,emphasis:N,htmlFlow:pe,htmlText:O,image:$,label:b,link:ee,listItemMarker:y,listItemValue:E,listOrdered:I,listUnordered:T,paragraph:F,reference:b,resource:X,resourceDestinationString:he,resourceTitleString:b,setextHeading:Le,strong:Z},exit:{atxHeading:Ze,atxHeadingSequence:Ve,autolinkEmail:_e,autolinkProtocol:q,blockQuote:x,characterEscapeValue:lt,characterReferenceMarkerHexadecimal:ce,characterReferenceMarkerNumeric:ce,characterReferenceValue:ye,codeFenced:U,codeFencedFence:p,codeFencedFenceInfo:z,codeFencedFenceMeta:_,codeFlowValue:Te,codeIndented:U,codeText:oe,codeTextData:lt,data:lt,definition:He,definitionDestinationString:Ae,definitionLabelString:ve,definitionTitleString:Be,emphasis:W,hardBreakEscape:Ne,hardBreakTrailing:Ne,htmlFlow:de,htmlFlowData:lt,htmlText:de,htmlTextData:lt,image:K,label:G,labelText:re,lineEnding:gt,link:K,listOrdered:A,listUnordered:w,paragraph:V,reference:_,referenceString:ae,resource:_,resourceDestinationString:we,resourceTitleString:Ie,setextHeading:at,setextHeadingLineSequence:Xe,setextHeadingText:et,strong:le,thematicBreak:fe}}].concat(t.htmlExtensions||[])),u={tightStack:o,definitions:s},d={lineEndingIfNeeded:S,options:t,encode:L,raw:R,tag:g,buffer:b,resume:_,setData:v,getData:C};let c=t.defaultLineEnding;return l;function l(ue){let Oe=-1,Re=0;const tt=[];let ge=[],Ye=[];for(;++Oe<ue.length;)!c&&(ue[Oe][1].type==="lineEnding"||ue[Oe][1].type==="lineEndingBlank")&&(c=ue[Oe][2].sliceSerialize(ue[Oe][1])),(ue[Oe][1].type==="listOrdered"||ue[Oe][1].type==="listUnordered")&&(ue[Oe][0]==="enter"?tt.push(Oe):m(ue.slice(tt.pop(),Oe))),ue[Oe][1].type==="definition"&&(ue[Oe][0]==="enter"?(Ye=En(Ye,ue.slice(Re,Oe)),Re=Oe):(ge=En(ge,ue.slice(Re,Oe+1)),Re=Oe+1));ge=En(ge,Ye),ge=En(ge,ue.slice(Re)),Oe=-1;const ft=ge;for(f.enter.null&&f.enter.null.call(d);++Oe<ue.length;){const Pe=f[ft[Oe][0]],Qe=ft[Oe][1].type,$e=Pe[Qe];If.call(Pe,Qe)&&$e&&$e.call(Object.assign({sliceSerialize:ft[Oe][2].sliceSerialize},d),ft[Oe][1])}return f.exit.null&&f.exit.null.call(d),a[0].join("")}function m(ue){const Oe=ue.length;let Re=0,tt=0,ge=!1,Ye;for(;++Re<Oe;){const ft=ue[Re];if(ft[1]._container)Ye=void 0,ft[0]==="enter"?tt++:tt--;else switch(ft[1].type){case"listItemPrefix":{ft[0]==="exit"&&(Ye=!0);break}case"linePrefix":break;case"lineEndingBlank":{ft[0]==="enter"&&!tt&&(Ye?Ye=void 0:ge=!0);break}default:Ye=void 0}}ue[0][1]._loose=ge}function v(ue,Oe){u[ue]=Oe}function C(ue){return u[ue]}function b(){a.push([])}function _(){return a.pop().join("")}function g(ue){n&&(v("lastWasTag",!0),a[a.length-1].push(ue))}function R(ue){v("lastWasTag"),a[a.length-1].push(ue)}function P(){R(c||`
`)}function S(){const ue=a[a.length-1],Oe=ue[ue.length-1],Re=Oe?Oe.charCodeAt(Oe.length-1):null;Re===10||Re===13||Re===null||P()}function L(ue){return C("ignoreEncode")?ue:P1(ue)}function I(ue){o.push(!ue._loose),S(),g("<ol"),v("expectFirstItem",!0)}function T(ue){o.push(!ue._loose),S(),g("<ul"),v("expectFirstItem",!0)}function E(ue){if(C("expectFirstItem")){const Oe=Number.parseInt(this.sliceSerialize(ue),10);Oe!==1&&g(' start="'+L(String(Oe))+'"')}}function y(){C("expectFirstItem")?g(">"):k(),S(),g("<li>"),v("expectFirstItem"),v("lastWasTag")}function A(){k(),o.pop(),P(),g("</ol>")}function w(){k(),o.pop(),P(),g("</ul>")}function k(){C("lastWasTag")&&!C("slurpAllLineEndings")&&S(),g("</li>"),v("slurpAllLineEndings")}function M(){o.push(!1),S(),g("<blockquote>")}function x(){o.pop(),S(),g("</blockquote>"),v("slurpAllLineEndings")}function F(){o[o.length-1]||(S(),g("<p>")),v("slurpAllLineEndings")}function V(){o[o.length-1]?v("slurpAllLineEndings",!0):g("</p>")}function D(){S(),g("<pre><code"),v("fencesCount",0)}function z(){const ue=_();g(' class="language-'+ue+'"')}function p(){const ue=C("fencesCount")||0;ue||(g(">"),v("slurpOneLineEnding",!0)),v("fencesCount",ue+1)}function B(){S(),g("<pre><code>")}function U(){const ue=C("fencesCount");ue!==void 0&&ue<2&&u.tightStack.length>0&&!C("lastWasTag")&&P(),C("flowCodeSeenData")&&S(),g("</code></pre>"),ue!==void 0&&ue<2&&S(),v("flowCodeSeenData"),v("fencesCount"),v("slurpOneLineEnding")}function $(){i.push({image:!0}),n=void 0}function ee(){i.push({})}function re(ue){i[i.length-1].labelId=this.sliceSerialize(ue)}function G(){i[i.length-1].label=_()}function ae(ue){i[i.length-1].referenceId=this.sliceSerialize(ue)}function X(){b(),i[i.length-1].destination=""}function he(){b(),v("ignoreEncode",!0)}function we(){i[i.length-1].destination=_(),v("ignoreEncode")}function Ie(){i[i.length-1].title=_()}function K(){let ue=i.length-1;const Oe=i[ue],Re=Oe.referenceId||Oe.labelId,tt=Oe.destination===void 0?s[zs(Re)]:Oe;for(n=!0;ue--;)if(i[ue].image){n=void 0;break}Oe.image?(g('<img src="'+oi(tt.destination,t.allowDangerousProtocol?void 0:q2)+'" alt="'),R(Oe.label),g('"')):g('<a href="'+oi(tt.destination,t.allowDangerousProtocol?void 0:Bf)+'"'),g(tt.title?' title="'+tt.title+'"':""),Oe.image?g(" />"):(g(">"),R(Oe.label),g("</a>")),i.pop()}function te(){b(),i.push({})}function ve(ue){_(),i[i.length-1].labelId=this.sliceSerialize(ue)}function Ce(){b(),v("ignoreEncode",!0)}function Ae(){i[i.length-1].destination=_(),v("ignoreEncode")}function Be(){i[i.length-1].title=_()}function He(){const ue=i[i.length-1],Oe=zs(ue.labelId);_(),If.call(s,Oe)||(s[Oe]=i[i.length-1]),i.pop()}function Fe(){v("slurpAllLineEndings",!0)}function Ve(ue){C("headingRank")||(v("headingRank",this.sliceSerialize(ue).length),S(),g("<h"+C("headingRank")+">"))}function Le(){b(),v("slurpAllLineEndings")}function et(){v("slurpAllLineEndings",!0)}function Ze(){g("</h"+C("headingRank")+">"),v("headingRank")}function Xe(ue){v("headingRank",this.sliceSerialize(ue).charCodeAt(0)===61?1:2)}function at(){const ue=_();S(),g("<h"+C("headingRank")+">"),R(ue),g("</h"+C("headingRank")+">"),v("slurpAllLineEndings"),v("headingRank")}function lt(ue){R(L(this.sliceSerialize(ue)))}function gt(ue){if(!C("slurpAllLineEndings")){if(C("slurpOneLineEnding")){v("slurpOneLineEnding");return}if(C("inCodeText")){R(" ");return}R(L(this.sliceSerialize(ue)))}}function Te(ue){R(L(this.sliceSerialize(ue))),v("flowCodeSeenData",!0)}function Ne(){g("<br />")}function pe(){S(),O()}function de(){v("ignoreEncode")}function O(){t.allowDangerousHtml&&v("ignoreEncode",!0)}function N(){g("<em>")}function Z(){g("<strong>")}function ne(){v("inCodeText",!0),g("<code>")}function oe(){v("inCodeText"),g("</code>")}function W(){g("</em>")}function le(){g("</strong>")}function fe(){S(),g("<hr />")}function ce(ue){v("characterReferenceType",ue.type)}function ye(ue){let Oe=this.sliceSerialize(ue);Oe=C("characterReferenceType")?D2(Oe,C("characterReferenceType")==="characterReferenceMarkerNumeric"?10:16):B1(Oe),R(L(Oe)),v("characterReferenceType")}function q(ue){const Oe=this.sliceSerialize(ue);g('<a href="'+oi(Oe,t.allowDangerousProtocol?void 0:Bf)+'">'),R(L(Oe)),g("</a>")}function _e(ue){const Oe=this.sliceSerialize(ue);g('<a href="'+oi("mailto:"+Oe)+'">'),R(L(Oe)),g("</a>")}}function Pt(e,t,n,s){const a=s?s-1:Number.POSITIVE_INFINITY;let i=0;return o;function o(f){return Bt(f)?(e.enter(n),r(f)):t(f)}function r(f){return Bt(f)&&i++<a?(e.consume(f),r):(e.exit(n),t(f))}}const Y2={tokenize:K2};function K2(e){const t=e.attempt(this.parser.constructs.contentInitial,s,a);let n;return t;function s(r){if(r===null){e.consume(r);return}return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Pt(e,t,"linePrefix")}function a(r){return e.enter("paragraph"),i(r)}function i(r){const f=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=f),n=f,o(r)}function o(r){if(r===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(r);return}return ht(r)?(e.consume(r),e.exit("chunkText"),i):(e.consume(r),o)}}const G2={tokenize:X2},Lf={tokenize:Z2};function X2(e){const t=this,n=[];let s=0,a,i,o;return r;function r(R){if(s<n.length){const P=n[s];return t.containerState=P[1],e.attempt(P[0].continuation,f,u)(R)}return u(R)}function f(R){if(s++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,a&&g();const P=t.events.length;let S=P,L;for(;S--;)if(t.events[S][0]==="exit"&&t.events[S][1].type==="chunkFlow"){L=t.events[S][1].end;break}_(s);let I=P;for(;I<t.events.length;)t.events[I][1].end=Object.assign({},L),I++;return Zn(t.events,S+1,0,t.events.slice(P)),t.events.length=I,u(R)}return r(R)}function u(R){if(s===n.length){if(!a)return l(R);if(a.currentConstruct&&a.currentConstruct.concrete)return v(R);t.interrupt=!!(a.currentConstruct&&!a._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Lf,d,c)(R)}function d(R){return a&&g(),_(s),l(R)}function c(R){return t.parser.lazy[t.now().line]=s!==n.length,o=t.now().offset,v(R)}function l(R){return t.containerState={},e.attempt(Lf,m,v)(R)}function m(R){return s++,n.push([t.currentConstruct,t.containerState]),l(R)}function v(R){if(R===null){a&&g(),_(0),e.consume(R);return}return a=a||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:i,_tokenizer:a}),C(R)}function C(R){if(R===null){b(e.exit("chunkFlow"),!0),_(0),e.consume(R);return}return ht(R)?(e.consume(R),b(e.exit("chunkFlow")),s=0,t.interrupt=void 0,r):(e.consume(R),C)}function b(R,P){const S=t.sliceStream(R);if(P&&S.push(null),R.previous=i,i&&(i.next=R),i=R,a.defineSkip(R.start),a.write(S),t.parser.lazy[R.start.line]){let L=a.events.length;for(;L--;)if(a.events[L][1].start.offset<o&&(!a.events[L][1].end||a.events[L][1].end.offset>o))return;const I=t.events.length;let T=I,E,y;for(;T--;)if(t.events[T][0]==="exit"&&t.events[T][1].type==="chunkFlow"){if(E){y=t.events[T][1].end;break}E=!0}for(_(s),L=I;L<t.events.length;)t.events[L][1].end=Object.assign({},y),L++;Zn(t.events,T+1,0,t.events.slice(I)),t.events.length=L}}function _(R){let P=n.length;for(;P-- >R;){const S=n[P];t.containerState=S[1],S[0].exit.call(t,e)}n.length=R}function g(){a.write([null]),i=void 0,a=void 0,t.containerState._closeFlow=void 0}}function Z2(e,t,n){return Pt(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Ur(e){if(e===null||Qt(e)||Li(e))return 1;if(Ju(e))return 2}function yl(e,t,n){const s=[];let a=-1;for(;++a<e.length;){const i=e[a].resolveAll;i&&!s.includes(i)&&(t=i(t,n),s.push(i))}return t}const Qc={name:"attention",tokenize:J2,resolveAll:Q2};function Q2(e,t){let n=-1,s,a,i,o,r,f,u,d;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(s=n;s--;)if(e[s][0]==="exit"&&e[s][1].type==="attentionSequence"&&e[s][1]._open&&t.sliceSerialize(e[s][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[s][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[s][1].end.offset-e[s][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;f=e[s][1].end.offset-e[s][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const c=Object.assign({},e[s][1].end),l=Object.assign({},e[n][1].start);Of(c,-f),Of(l,f),o={type:f>1?"strongSequence":"emphasisSequence",start:c,end:Object.assign({},e[s][1].end)},r={type:f>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:l},i={type:f>1?"strongText":"emphasisText",start:Object.assign({},e[s][1].end),end:Object.assign({},e[n][1].start)},a={type:f>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},r.end)},e[s][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},r.end),u=[],e[s][1].end.offset-e[s][1].start.offset&&(u=En(u,[["enter",e[s][1],t],["exit",e[s][1],t]])),u=En(u,[["enter",a,t],["enter",o,t],["exit",o,t],["enter",i,t]]),u=En(u,yl(t.parser.constructs.insideSpan.null,e.slice(s+1,n),t)),u=En(u,[["exit",i,t],["enter",r,t],["exit",r,t],["exit",a,t]]),e[n][1].end.offset-e[n][1].start.offset?(d=2,u=En(u,[["enter",e[n][1],t],["exit",e[n][1],t]])):d=0,Zn(e,s-1,n-s+3,u),n=s+u.length-d-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function J2(e,t){const n=this.parser.constructs.attentionMarkers.null,s=this.previous,a=Ur(s);let i;return o;function o(f){return i=f,e.enter("attentionSequence"),r(f)}function r(f){if(f===i)return e.consume(f),r;const u=e.exit("attentionSequence"),d=Ur(f),c=!d||d===2&&a||n.includes(f),l=!a||a===2&&d||n.includes(s);return u._open=!!(i===42?c:c&&(a||!l)),u._close=!!(i===42?l:l&&(d||!c)),t(f)}}function Of(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const ey={name:"autolink",tokenize:ty};function ty(e,t,n){let s=0;return a;function a(m){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),i}function i(m){return Ln(m)?(e.consume(m),o):u(m)}function o(m){return m===43||m===45||m===46||In(m)?(s=1,r(m)):u(m)}function r(m){return m===58?(e.consume(m),s=0,f):(m===43||m===45||m===46||In(m))&&s++<32?(e.consume(m),r):(s=0,u(m))}function f(m){return m===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.exit("autolink"),t):m===null||m===32||m===60||zr(m)?n(m):(e.consume(m),f)}function u(m){return m===64?(e.consume(m),d):j2(m)?(e.consume(m),u):n(m)}function d(m){return In(m)?c(m):n(m)}function c(m){return m===46?(e.consume(m),s=0,d):m===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.exit("autolink"),t):l(m)}function l(m){if((m===45||In(m))&&s++<63){const v=m===45?l:c;return e.consume(m),v}return n(m)}}const No={tokenize:ny,partial:!0};function ny(e,t,n){return s;function s(i){return Bt(i)?Pt(e,a,"linePrefix")(i):a(i)}function a(i){return i===null||ht(i)?t(i):n(i)}}const $1={name:"blockQuote",tokenize:sy,continuation:{tokenize:ay},exit:iy};function sy(e,t,n){const s=this;return a;function a(o){if(o===62){const r=s.containerState;return r.open||(e.enter("blockQuote",{_container:!0}),r.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),i}return n(o)}function i(o){return Bt(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function ay(e,t,n){const s=this;return a;function a(o){return Bt(o)?Pt(e,i,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):i(o)}function i(o){return e.attempt($1,t,n)(o)}}function iy(e){e.exit("blockQuote")}const F1={name:"characterEscape",tokenize:oy};function oy(e,t,n){return s;function s(i){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(i),e.exit("escapeMarker"),a}function a(i){return z2(i)?(e.enter("characterEscapeValue"),e.consume(i),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(i)}}const D1={name:"characterReference",tokenize:ry};function ry(e,t,n){const s=this;let a=0,i,o;return r;function r(c){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(c),e.exit("characterReferenceMarker"),f}function f(c){return c===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(c),e.exit("characterReferenceMarkerNumeric"),u):(e.enter("characterReferenceValue"),i=31,o=In,d(c))}function u(c){return c===88||c===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(c),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),i=6,o=H2,d):(e.enter("characterReferenceValue"),i=7,o=Zc,d(c))}function d(c){if(c===59&&a){const l=e.exit("characterReferenceValue");return o===In&&!B1(s.sliceSerialize(l))?n(c):(e.enter("characterReferenceMarker"),e.consume(c),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(c)&&a++<i?(e.consume(c),d):n(c)}}const Pf={tokenize:cy,partial:!0},$f={name:"codeFenced",tokenize:ly,concrete:!0};function ly(e,t,n){const s=this,a={tokenize:S,partial:!0};let i=0,o=0,r;return f;function f(L){return u(L)}function u(L){const I=s.events[s.events.length-1];return i=I&&I[1].type==="linePrefix"?I[2].sliceSerialize(I[1],!0).length:0,r=L,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),d(L)}function d(L){return L===r?(o++,e.consume(L),d):o<3?n(L):(e.exit("codeFencedFenceSequence"),Bt(L)?Pt(e,c,"whitespace")(L):c(L))}function c(L){return L===null||ht(L)?(e.exit("codeFencedFence"),s.interrupt?t(L):e.check(Pf,C,P)(L)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),l(L))}function l(L){return L===null||ht(L)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),c(L)):Bt(L)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Pt(e,m,"whitespace")(L)):L===96&&L===r?n(L):(e.consume(L),l)}function m(L){return L===null||ht(L)?c(L):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),v(L))}function v(L){return L===null||ht(L)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),c(L)):L===96&&L===r?n(L):(e.consume(L),v)}function C(L){return e.attempt(a,P,b)(L)}function b(L){return e.enter("lineEnding"),e.consume(L),e.exit("lineEnding"),_}function _(L){return i>0&&Bt(L)?Pt(e,g,"linePrefix",i+1)(L):g(L)}function g(L){return L===null||ht(L)?e.check(Pf,C,P)(L):(e.enter("codeFlowValue"),R(L))}function R(L){return L===null||ht(L)?(e.exit("codeFlowValue"),g(L)):(e.consume(L),R)}function P(L){return e.exit("codeFenced"),t(L)}function S(L,I,T){let E=0;return y;function y(x){return L.enter("lineEnding"),L.consume(x),L.exit("lineEnding"),A}function A(x){return L.enter("codeFencedFence"),Bt(x)?Pt(L,w,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(x):w(x)}function w(x){return x===r?(L.enter("codeFencedFenceSequence"),k(x)):T(x)}function k(x){return x===r?(E++,L.consume(x),k):E>=o?(L.exit("codeFencedFenceSequence"),Bt(x)?Pt(L,M,"whitespace")(x):M(x)):T(x)}function M(x){return x===null||ht(x)?(L.exit("codeFencedFence"),I(x)):T(x)}}}function cy(e,t,n){const s=this;return a;function a(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i)}function i(o){return s.parser.lazy[s.now().line]?n(o):t(o)}}const nc={name:"codeIndented",tokenize:dy},uy={tokenize:fy,partial:!0};function dy(e,t,n){const s=this;return a;function a(u){return e.enter("codeIndented"),Pt(e,i,"linePrefix",5)(u)}function i(u){const d=s.events[s.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?o(u):n(u)}function o(u){return u===null?f(u):ht(u)?e.attempt(uy,o,f)(u):(e.enter("codeFlowValue"),r(u))}function r(u){return u===null||ht(u)?(e.exit("codeFlowValue"),o(u)):(e.consume(u),r)}function f(u){return e.exit("codeIndented"),t(u)}}function fy(e,t,n){const s=this;return a;function a(o){return s.parser.lazy[s.now().line]?n(o):ht(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),a):Pt(e,i,"linePrefix",5)(o)}function i(o){const r=s.events[s.events.length-1];return r&&r[1].type==="linePrefix"&&r[2].sliceSerialize(r[1],!0).length>=4?t(o):ht(o)?a(o):n(o)}}const my={name:"codeText",tokenize:gy,resolve:vy,previous:hy};function vy(e){let t=e.length-4,n=3,s,a;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(s=n;++s<t;)if(e[s][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(s=n-1,t++;++s<=t;)a===void 0?s!==t&&e[s][1].type!=="lineEnding"&&(a=s):(s===t||e[s][1].type==="lineEnding")&&(e[a][1].type="codeTextData",s!==a+2&&(e[a][1].end=e[s-1][1].end,e.splice(a+2,s-a-2),t-=s-a-2,s=a+2),a=void 0);return e}function hy(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function gy(e,t,n){let s=0,a,i;return o;function o(c){return e.enter("codeText"),e.enter("codeTextSequence"),r(c)}function r(c){return c===96?(e.consume(c),s++,r):(e.exit("codeTextSequence"),f(c))}function f(c){return c===null?n(c):c===32?(e.enter("space"),e.consume(c),e.exit("space"),f):c===96?(i=e.enter("codeTextSequence"),a=0,d(c)):ht(c)?(e.enter("lineEnding"),e.consume(c),e.exit("lineEnding"),f):(e.enter("codeTextData"),u(c))}function u(c){return c===null||c===32||c===96||ht(c)?(e.exit("codeTextData"),f(c)):(e.consume(c),u)}function d(c){return c===96?(e.consume(c),a++,d):a===s?(e.exit("codeTextSequence"),e.exit("codeText"),t(c)):(i.type="codeTextData",u(c))}}function V1(e){const t={};let n=-1,s,a,i,o,r,f,u;for(;++n<e.length;){for(;n in t;)n=t[n];if(s=e[n],n&&s[1].type==="chunkFlow"&&e[n-1][1].type==="listItemPrefix"&&(f=s[1]._tokenizer.events,i=0,i<f.length&&f[i][1].type==="lineEndingBlank"&&(i+=2),i<f.length&&f[i][1].type==="content"))for(;++i<f.length&&f[i][1].type!=="content";)f[i][1].type==="chunkText"&&(f[i][1]._isInFirstContentOfListItem=!0,i++);if(s[0]==="enter")s[1].contentType&&(Object.assign(t,py(e,n)),n=t[n],u=!0);else if(s[1]._container){for(i=n,a=void 0;i--&&(o=e[i],o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(a&&(e[a][1].type="lineEndingBlank"),o[1].type="lineEnding",a=i);a&&(s[1].end=Object.assign({},e[a][1].start),r=e.slice(a,n),r.unshift(s),Zn(e,a,n-a+1,r))}}return!u}function py(e,t){const n=e[t][1],s=e[t][2];let a=t-1;const i=[],o=n._tokenizer||s.parser[n.contentType](n.start),r=o.events,f=[],u={};let d,c,l=-1,m=n,v=0,C=0;const b=[C];for(;m;){for(;e[++a][1]!==m;);i.push(a),m._tokenizer||(d=s.sliceStream(m),m.next||d.push(null),c&&o.defineSkip(m.start),m._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(d),m._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),c=m,m=m.next}for(m=n;++l<r.length;)r[l][0]==="exit"&&r[l-1][0]==="enter"&&r[l][1].type===r[l-1][1].type&&r[l][1].start.line!==r[l][1].end.line&&(C=l+1,b.push(C),m._tokenizer=void 0,m.previous=void 0,m=m.next);for(o.events=[],m?(m._tokenizer=void 0,m.previous=void 0):b.pop(),l=b.length;l--;){const _=r.slice(b[l],b[l+1]),g=i.pop();f.unshift([g,g+_.length-1]),Zn(e,g,2,_)}for(l=-1;++l<f.length;)u[v+f[l][0]]=v+f[l][1],v+=f[l][1]-f[l][0]-1;return u}const _y={tokenize:wy,resolve:yy},by={tokenize:ky,partial:!0};function yy(e){return V1(e),e}function wy(e,t){let n;return s;function s(r){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),a(r)}function a(r){return r===null?i(r):ht(r)?e.check(by,o,i)(r):(e.consume(r),a)}function i(r){return e.exit("chunkContent"),e.exit("content"),t(r)}function o(r){return e.consume(r),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,a}}function ky(e,t,n){const s=this;return a;function a(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),Pt(e,i,"linePrefix")}function i(o){if(o===null||ht(o))return n(o);const r=s.events[s.events.length-1];return!s.parser.constructs.disable.null.includes("codeIndented")&&r&&r[1].type==="linePrefix"&&r[2].sliceSerialize(r[1],!0).length>=4?t(o):e.interrupt(s.parser.constructs.flow,n,t)(o)}}function N1(e,t,n,s,a,i,o,r,f){const u=f||Number.POSITIVE_INFINITY;let d=0;return c;function c(_){return _===60?(e.enter(s),e.enter(a),e.enter(i),e.consume(_),e.exit(i),l):_===null||_===32||_===41||zr(_)?n(_):(e.enter(s),e.enter(o),e.enter(r),e.enter("chunkString",{contentType:"string"}),C(_))}function l(_){return _===62?(e.enter(i),e.consume(_),e.exit(i),e.exit(a),e.exit(s),t):(e.enter(r),e.enter("chunkString",{contentType:"string"}),m(_))}function m(_){return _===62?(e.exit("chunkString"),e.exit(r),l(_)):_===null||_===60||ht(_)?n(_):(e.consume(_),_===92?v:m)}function v(_){return _===60||_===62||_===92?(e.consume(_),m):m(_)}function C(_){return!d&&(_===null||_===41||Qt(_))?(e.exit("chunkString"),e.exit(r),e.exit(o),e.exit(s),t(_)):d<u&&_===40?(e.consume(_),d++,C):_===41?(e.consume(_),d--,C):_===null||_===32||_===40||zr(_)?n(_):(e.consume(_),_===92?b:C)}function b(_){return _===40||_===41||_===92?(e.consume(_),C):C(_)}}function j1(e,t,n,s,a,i){const o=this;let r=0,f;return u;function u(m){return e.enter(s),e.enter(a),e.consume(m),e.exit(a),e.enter(i),d}function d(m){return r>999||m===null||m===91||m===93&&!f||m===94&&!r&&"_hiddenFootnoteSupport"in o.parser.constructs?n(m):m===93?(e.exit(i),e.enter(a),e.consume(m),e.exit(a),e.exit(s),t):ht(m)?(e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),d):(e.enter("chunkString",{contentType:"string"}),c(m))}function c(m){return m===null||m===91||m===93||ht(m)||r++>999?(e.exit("chunkString"),d(m)):(e.consume(m),f||(f=!Bt(m)),m===92?l:c)}function l(m){return m===91||m===92||m===93?(e.consume(m),r++,c):c(m)}}function H1(e,t,n,s,a,i){let o;return r;function r(l){return l===34||l===39||l===40?(e.enter(s),e.enter(a),e.consume(l),e.exit(a),o=l===40?41:l,f):n(l)}function f(l){return l===o?(e.enter(a),e.consume(l),e.exit(a),e.exit(s),t):(e.enter(i),u(l))}function u(l){return l===o?(e.exit(i),f(o)):l===null?n(l):ht(l)?(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),Pt(e,u,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),d(l))}function d(l){return l===o||l===null||ht(l)?(e.exit("chunkString"),u(l)):(e.consume(l),l===92?c:d)}function c(l){return l===o||l===92?(e.consume(l),d):d(l)}}function go(e,t){let n;return s;function s(a){return ht(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),n=!0,s):Bt(a)?Pt(e,s,n?"linePrefix":"lineSuffix")(a):t(a)}}const Sy={name:"definition",tokenize:Ay},Cy={tokenize:Ty,partial:!0};function Ay(e,t,n){const s=this;let a;return i;function i(m){return e.enter("definition"),o(m)}function o(m){return j1.call(s,e,r,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(m)}function r(m){return a=zs(s.sliceSerialize(s.events[s.events.length-1][1]).slice(1,-1)),m===58?(e.enter("definitionMarker"),e.consume(m),e.exit("definitionMarker"),f):n(m)}function f(m){return Qt(m)?go(e,u)(m):u(m)}function u(m){return N1(e,d,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(m)}function d(m){return e.attempt(Cy,c,c)(m)}function c(m){return Bt(m)?Pt(e,l,"whitespace")(m):l(m)}function l(m){return m===null||ht(m)?(e.exit("definition"),s.parser.defined.push(a),t(m)):n(m)}}function Ty(e,t,n){return s;function s(r){return Qt(r)?go(e,a)(r):n(r)}function a(r){return H1(e,i,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(r)}function i(r){return Bt(r)?Pt(e,o,"whitespace")(r):o(r)}function o(r){return r===null||ht(r)?t(r):n(r)}}const xy={name:"hardBreakEscape",tokenize:Ey};function Ey(e,t,n){return s;function s(i){return e.enter("hardBreakEscape"),e.consume(i),a}function a(i){return ht(i)?(e.exit("hardBreakEscape"),t(i)):n(i)}}const Ry={name:"headingAtx",tokenize:Iy,resolve:My};function My(e,t){let n=e.length-2,s=3,a,i;return e[s][1].type==="whitespace"&&(s+=2),n-2>s&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(s===n-1||n-4>s&&e[n-2][1].type==="whitespace")&&(n-=s+1===n?2:4),n>s&&(a={type:"atxHeadingText",start:e[s][1].start,end:e[n][1].end},i={type:"chunkText",start:e[s][1].start,end:e[n][1].end,contentType:"text"},Zn(e,s,n-s+1,[["enter",a,t],["enter",i,t],["exit",i,t],["exit",a,t]])),e}function Iy(e,t,n){let s=0;return a;function a(d){return e.enter("atxHeading"),i(d)}function i(d){return e.enter("atxHeadingSequence"),o(d)}function o(d){return d===35&&s++<6?(e.consume(d),o):d===null||Qt(d)?(e.exit("atxHeadingSequence"),r(d)):n(d)}function r(d){return d===35?(e.enter("atxHeadingSequence"),f(d)):d===null||ht(d)?(e.exit("atxHeading"),t(d)):Bt(d)?Pt(e,r,"whitespace")(d):(e.enter("atxHeadingText"),u(d))}function f(d){return d===35?(e.consume(d),f):(e.exit("atxHeadingSequence"),r(d))}function u(d){return d===null||d===35||Qt(d)?(e.exit("atxHeadingText"),r(d)):(e.consume(d),u)}}const By=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Ff=["pre","script","style","textarea"],Ly={name:"htmlFlow",tokenize:Fy,resolveTo:$y,concrete:!0},Oy={tokenize:Vy,partial:!0},Py={tokenize:Dy,partial:!0};function $y(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function Fy(e,t,n){const s=this;let a,i,o,r,f;return u;function u($){return d($)}function d($){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume($),c}function c($){return $===33?(e.consume($),l):$===47?(e.consume($),i=!0,C):$===63?(e.consume($),a=3,s.interrupt?t:p):Ln($)?(e.consume($),o=String.fromCharCode($),b):n($)}function l($){return $===45?(e.consume($),a=2,m):$===91?(e.consume($),a=5,r=0,v):Ln($)?(e.consume($),a=4,s.interrupt?t:p):n($)}function m($){return $===45?(e.consume($),s.interrupt?t:p):n($)}function v($){const ee="CDATA[";return $===ee.charCodeAt(r++)?(e.consume($),r===ee.length?s.interrupt?t:w:v):n($)}function C($){return Ln($)?(e.consume($),o=String.fromCharCode($),b):n($)}function b($){if($===null||$===47||$===62||Qt($)){const ee=$===47,re=o.toLowerCase();return!ee&&!i&&Ff.includes(re)?(a=1,s.interrupt?t($):w($)):By.includes(o.toLowerCase())?(a=6,ee?(e.consume($),_):s.interrupt?t($):w($)):(a=7,s.interrupt&&!s.parser.lazy[s.now().line]?n($):i?g($):R($))}return $===45||In($)?(e.consume($),o+=String.fromCharCode($),b):n($)}function _($){return $===62?(e.consume($),s.interrupt?t:w):n($)}function g($){return Bt($)?(e.consume($),g):y($)}function R($){return $===47?(e.consume($),y):$===58||$===95||Ln($)?(e.consume($),P):Bt($)?(e.consume($),R):y($)}function P($){return $===45||$===46||$===58||$===95||In($)?(e.consume($),P):S($)}function S($){return $===61?(e.consume($),L):Bt($)?(e.consume($),S):R($)}function L($){return $===null||$===60||$===61||$===62||$===96?n($):$===34||$===39?(e.consume($),f=$,I):Bt($)?(e.consume($),L):T($)}function I($){return $===f?(e.consume($),f=null,E):$===null||ht($)?n($):(e.consume($),I)}function T($){return $===null||$===34||$===39||$===47||$===60||$===61||$===62||$===96||Qt($)?S($):(e.consume($),T)}function E($){return $===47||$===62||Bt($)?R($):n($)}function y($){return $===62?(e.consume($),A):n($)}function A($){return $===null||ht($)?w($):Bt($)?(e.consume($),A):n($)}function w($){return $===45&&a===2?(e.consume($),F):$===60&&a===1?(e.consume($),V):$===62&&a===4?(e.consume($),B):$===63&&a===3?(e.consume($),p):$===93&&a===5?(e.consume($),z):ht($)&&(a===6||a===7)?(e.exit("htmlFlowData"),e.check(Oy,U,k)($)):$===null||ht($)?(e.exit("htmlFlowData"),k($)):(e.consume($),w)}function k($){return e.check(Py,M,U)($)}function M($){return e.enter("lineEnding"),e.consume($),e.exit("lineEnding"),x}function x($){return $===null||ht($)?k($):(e.enter("htmlFlowData"),w($))}function F($){return $===45?(e.consume($),p):w($)}function V($){return $===47?(e.consume($),o="",D):w($)}function D($){if($===62){const ee=o.toLowerCase();return Ff.includes(ee)?(e.consume($),B):w($)}return Ln($)&&o.length<8?(e.consume($),o+=String.fromCharCode($),D):w($)}function z($){return $===93?(e.consume($),p):w($)}function p($){return $===62?(e.consume($),B):$===45&&a===2?(e.consume($),p):w($)}function B($){return $===null||ht($)?(e.exit("htmlFlowData"),U($)):(e.consume($),B)}function U($){return e.exit("htmlFlow"),t($)}}function Dy(e,t,n){const s=this;return a;function a(o){return ht(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):n(o)}function i(o){return s.parser.lazy[s.now().line]?n(o):t(o)}}function Vy(e,t,n){return s;function s(a){return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),e.attempt(No,t,n)}}const Ny={name:"htmlText",tokenize:jy};function jy(e,t,n){const s=this;let a,i,o;return r;function r(p){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(p),f}function f(p){return p===33?(e.consume(p),u):p===47?(e.consume(p),S):p===63?(e.consume(p),R):Ln(p)?(e.consume(p),T):n(p)}function u(p){return p===45?(e.consume(p),d):p===91?(e.consume(p),i=0,v):Ln(p)?(e.consume(p),g):n(p)}function d(p){return p===45?(e.consume(p),m):n(p)}function c(p){return p===null?n(p):p===45?(e.consume(p),l):ht(p)?(o=c,V(p)):(e.consume(p),c)}function l(p){return p===45?(e.consume(p),m):c(p)}function m(p){return p===62?F(p):p===45?l(p):c(p)}function v(p){const B="CDATA[";return p===B.charCodeAt(i++)?(e.consume(p),i===B.length?C:v):n(p)}function C(p){return p===null?n(p):p===93?(e.consume(p),b):ht(p)?(o=C,V(p)):(e.consume(p),C)}function b(p){return p===93?(e.consume(p),_):C(p)}function _(p){return p===62?F(p):p===93?(e.consume(p),_):C(p)}function g(p){return p===null||p===62?F(p):ht(p)?(o=g,V(p)):(e.consume(p),g)}function R(p){return p===null?n(p):p===63?(e.consume(p),P):ht(p)?(o=R,V(p)):(e.consume(p),R)}function P(p){return p===62?F(p):R(p)}function S(p){return Ln(p)?(e.consume(p),L):n(p)}function L(p){return p===45||In(p)?(e.consume(p),L):I(p)}function I(p){return ht(p)?(o=I,V(p)):Bt(p)?(e.consume(p),I):F(p)}function T(p){return p===45||In(p)?(e.consume(p),T):p===47||p===62||Qt(p)?E(p):n(p)}function E(p){return p===47?(e.consume(p),F):p===58||p===95||Ln(p)?(e.consume(p),y):ht(p)?(o=E,V(p)):Bt(p)?(e.consume(p),E):F(p)}function y(p){return p===45||p===46||p===58||p===95||In(p)?(e.consume(p),y):A(p)}function A(p){return p===61?(e.consume(p),w):ht(p)?(o=A,V(p)):Bt(p)?(e.consume(p),A):E(p)}function w(p){return p===null||p===60||p===61||p===62||p===96?n(p):p===34||p===39?(e.consume(p),a=p,k):ht(p)?(o=w,V(p)):Bt(p)?(e.consume(p),w):(e.consume(p),M)}function k(p){return p===a?(e.consume(p),a=void 0,x):p===null?n(p):ht(p)?(o=k,V(p)):(e.consume(p),k)}function M(p){return p===null||p===34||p===39||p===60||p===61||p===96?n(p):p===47||p===62||Qt(p)?E(p):(e.consume(p),M)}function x(p){return p===47||p===62||Qt(p)?E(p):n(p)}function F(p){return p===62?(e.consume(p),e.exit("htmlTextData"),e.exit("htmlText"),t):n(p)}function V(p){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(p),e.exit("lineEnding"),D}function D(p){return Bt(p)?Pt(e,z,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(p):z(p)}function z(p){return e.enter("htmlTextData"),o(p)}}const ed={name:"labelEnd",tokenize:Yy,resolveTo:Wy,resolveAll:qy},Hy={tokenize:Ky},zy={tokenize:Gy},Uy={tokenize:Xy};function qy(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function Wy(e,t){let n=e.length,s=0,a,i,o,r;for(;n--;)if(a=e[n][1],i){if(a.type==="link"||a.type==="labelLink"&&a._inactive)break;e[n][0]==="enter"&&a.type==="labelLink"&&(a._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(a.type==="labelImage"||a.type==="labelLink")&&!a._balanced&&(i=n,a.type!=="labelLink")){s=2;break}}else a.type==="labelEnd"&&(o=n);const f={type:e[i][1].type==="labelLink"?"link":"image",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)},u={type:"label",start:Object.assign({},e[i][1].start),end:Object.assign({},e[o][1].end)},d={type:"labelText",start:Object.assign({},e[i+s+2][1].end),end:Object.assign({},e[o-2][1].start)};return r=[["enter",f,t],["enter",u,t]],r=En(r,e.slice(i+1,i+s+3)),r=En(r,[["enter",d,t]]),r=En(r,yl(t.parser.constructs.insideSpan.null,e.slice(i+s+4,o-3),t)),r=En(r,[["exit",d,t],e[o-2],e[o-1],["exit",u,t]]),r=En(r,e.slice(o+1)),r=En(r,[["exit",f,t]]),Zn(e,i,e.length,r),e}function Yy(e,t,n){const s=this;let a=s.events.length,i,o;for(;a--;)if((s.events[a][1].type==="labelImage"||s.events[a][1].type==="labelLink")&&!s.events[a][1]._balanced){i=s.events[a][1];break}return r;function r(l){return i?i._inactive?c(l):(o=s.parser.defined.includes(zs(s.sliceSerialize({start:i.end,end:s.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelEnd"),f):n(l)}function f(l){return l===40?e.attempt(Hy,d,o?d:c)(l):l===91?e.attempt(zy,d,o?u:c)(l):o?d(l):c(l)}function u(l){return e.attempt(Uy,d,c)(l)}function d(l){return t(l)}function c(l){return i._balanced=!0,n(l)}}function Ky(e,t,n){return s;function s(c){return e.enter("resource"),e.enter("resourceMarker"),e.consume(c),e.exit("resourceMarker"),a}function a(c){return Qt(c)?go(e,i)(c):i(c)}function i(c){return c===41?d(c):N1(e,o,r,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(c)}function o(c){return Qt(c)?go(e,f)(c):d(c)}function r(c){return n(c)}function f(c){return c===34||c===39||c===40?H1(e,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(c):d(c)}function u(c){return Qt(c)?go(e,d)(c):d(c)}function d(c){return c===41?(e.enter("resourceMarker"),e.consume(c),e.exit("resourceMarker"),e.exit("resource"),t):n(c)}}function Gy(e,t,n){const s=this;return a;function a(r){return j1.call(s,e,i,o,"reference","referenceMarker","referenceString")(r)}function i(r){return s.parser.defined.includes(zs(s.sliceSerialize(s.events[s.events.length-1][1]).slice(1,-1)))?t(r):n(r)}function o(r){return n(r)}}function Xy(e,t,n){return s;function s(i){return e.enter("reference"),e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),a}function a(i){return i===93?(e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),e.exit("reference"),t):n(i)}}const Zy={name:"labelStartImage",tokenize:Qy,resolveAll:ed.resolveAll};function Qy(e,t,n){const s=this;return a;function a(r){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(r),e.exit("labelImageMarker"),i}function i(r){return r===91?(e.enter("labelMarker"),e.consume(r),e.exit("labelMarker"),e.exit("labelImage"),o):n(r)}function o(r){return r===94&&"_hiddenFootnoteSupport"in s.parser.constructs?n(r):t(r)}}const Jy={name:"labelStartLink",tokenize:e3,resolveAll:ed.resolveAll};function e3(e,t,n){const s=this;return a;function a(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),i}function i(o){return o===94&&"_hiddenFootnoteSupport"in s.parser.constructs?n(o):t(o)}}const sc={name:"lineEnding",tokenize:t3};function t3(e,t){return n;function n(s){return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),Pt(e,t,"linePrefix")}}const Mr={name:"thematicBreak",tokenize:n3};function n3(e,t,n){let s=0,a;return i;function i(u){return e.enter("thematicBreak"),o(u)}function o(u){return a=u,r(u)}function r(u){return u===a?(e.enter("thematicBreakSequence"),f(u)):s>=3&&(u===null||ht(u))?(e.exit("thematicBreak"),t(u)):n(u)}function f(u){return u===a?(e.consume(u),s++,f):(e.exit("thematicBreakSequence"),Bt(u)?Pt(e,r,"whitespace")(u):r(u))}}const Hn={name:"list",tokenize:i3,continuation:{tokenize:o3},exit:l3},s3={tokenize:c3,partial:!0},a3={tokenize:r3,partial:!0};function i3(e,t,n){const s=this,a=s.events[s.events.length-1];let i=a&&a[1].type==="linePrefix"?a[2].sliceSerialize(a[1],!0).length:0,o=0;return r;function r(m){const v=s.containerState.type||(m===42||m===43||m===45?"listUnordered":"listOrdered");if(v==="listUnordered"?!s.containerState.marker||m===s.containerState.marker:Zc(m)){if(s.containerState.type||(s.containerState.type=v,e.enter(v,{_container:!0})),v==="listUnordered")return e.enter("listItemPrefix"),m===42||m===45?e.check(Mr,n,u)(m):u(m);if(!s.interrupt||m===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),f(m)}return n(m)}function f(m){return Zc(m)&&++o<10?(e.consume(m),f):(!s.interrupt||o<2)&&(s.containerState.marker?m===s.containerState.marker:m===41||m===46)?(e.exit("listItemValue"),u(m)):n(m)}function u(m){return e.enter("listItemMarker"),e.consume(m),e.exit("listItemMarker"),s.containerState.marker=s.containerState.marker||m,e.check(No,s.interrupt?n:d,e.attempt(s3,l,c))}function d(m){return s.containerState.initialBlankLine=!0,i++,l(m)}function c(m){return Bt(m)?(e.enter("listItemPrefixWhitespace"),e.consume(m),e.exit("listItemPrefixWhitespace"),l):n(m)}function l(m){return s.containerState.size=i+s.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(m)}}function o3(e,t,n){const s=this;return s.containerState._closeFlow=void 0,e.check(No,a,i);function a(r){return s.containerState.furtherBlankLines=s.containerState.furtherBlankLines||s.containerState.initialBlankLine,Pt(e,t,"listItemIndent",s.containerState.size+1)(r)}function i(r){return s.containerState.furtherBlankLines||!Bt(r)?(s.containerState.furtherBlankLines=void 0,s.containerState.initialBlankLine=void 0,o(r)):(s.containerState.furtherBlankLines=void 0,s.containerState.initialBlankLine=void 0,e.attempt(a3,t,o)(r))}function o(r){return s.containerState._closeFlow=!0,s.interrupt=void 0,Pt(e,e.attempt(Hn,t,n),"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(r)}}function r3(e,t,n){const s=this;return Pt(e,a,"listItemIndent",s.containerState.size+1);function a(i){const o=s.events[s.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===s.containerState.size?t(i):n(i)}}function l3(e){e.exit(this.containerState.type)}function c3(e,t,n){const s=this;return Pt(e,a,"listItemPrefixWhitespace",s.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function a(i){const o=s.events[s.events.length-1];return!Bt(i)&&o&&o[1].type==="listItemPrefixWhitespace"?t(i):n(i)}}const Df={name:"setextUnderline",tokenize:d3,resolveTo:u3};function u3(e,t){let n=e.length,s,a,i;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){s=n;break}e[n][1].type==="paragraph"&&(a=n)}else e[n][1].type==="content"&&e.splice(n,1),!i&&e[n][1].type==="definition"&&(i=n);const o={type:"setextHeading",start:Object.assign({},e[a][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[a][1].type="setextHeadingText",i?(e.splice(a,0,["enter",o,t]),e.splice(i+1,0,["exit",e[s][1],t]),e[s][1].end=Object.assign({},e[i][1].end)):e[s][1]=o,e.push(["exit",o,t]),e}function d3(e,t,n){const s=this;let a;return i;function i(u){let d=s.events.length,c;for(;d--;)if(s.events[d][1].type!=="lineEnding"&&s.events[d][1].type!=="linePrefix"&&s.events[d][1].type!=="content"){c=s.events[d][1].type==="paragraph";break}return!s.parser.lazy[s.now().line]&&(s.interrupt||c)?(e.enter("setextHeadingLine"),a=u,o(u)):n(u)}function o(u){return e.enter("setextHeadingLineSequence"),r(u)}function r(u){return u===a?(e.consume(u),r):(e.exit("setextHeadingLineSequence"),Bt(u)?Pt(e,f,"lineSuffix")(u):f(u))}function f(u){return u===null||ht(u)?(e.exit("setextHeadingLine"),t(u)):n(u)}}const f3={tokenize:m3};function m3(e){const t=this,n=e.attempt(No,s,e.attempt(this.parser.constructs.flowInitial,a,Pt(e,e.attempt(this.parser.constructs.flow,a,e.attempt(_y,a)),"linePrefix")));return n;function s(i){if(i===null){e.consume(i);return}return e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function a(i){if(i===null){e.consume(i);return}return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const v3={resolveAll:U1()},h3=z1("string"),g3=z1("text");function z1(e){return{tokenize:t,resolveAll:U1(e==="text"?p3:void 0)};function t(n){const s=this,a=this.parser.constructs[e],i=n.attempt(a,o,r);return o;function o(d){return u(d)?i(d):r(d)}function r(d){if(d===null){n.consume(d);return}return n.enter("data"),n.consume(d),f}function f(d){return u(d)?(n.exit("data"),i(d)):(n.consume(d),f)}function u(d){if(d===null)return!0;const c=a[d];let l=-1;if(c)for(;++l<c.length;){const m=c[l];if(!m.previous||m.previous.call(s,s.previous))return!0}return!1}}}function U1(e){return t;function t(n,s){let a=-1,i;for(;++a<=n.length;)i===void 0?n[a]&&n[a][1].type==="data"&&(i=a,a++):(!n[a]||n[a][1].type!=="data")&&(a!==i+2&&(n[i][1].end=n[a-1][1].end,n.splice(i+2,a-i-2),a=i+2),i=void 0);return e?e(n,s):n}}function p3(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const s=e[n-1][1],a=t.sliceStream(s);let i=a.length,o=-1,r=0,f;for(;i--;){const u=a[i];if(typeof u=="string"){for(o=u.length;u.charCodeAt(o-1)===32;)r++,o--;if(o)break;o=-1}else if(u===-2)f=!0,r++;else if(u!==-1){i++;break}}if(r){const u={type:n===e.length||f||r<2?"lineSuffix":"hardBreakTrailing",start:{line:s.end.line,column:s.end.column-r,offset:s.end.offset-r,_index:s.start._index+i,_bufferIndex:i?o:s.start._bufferIndex+o},end:Object.assign({},s.end)};s.end=Object.assign({},u.start),s.start.offset===s.end.offset?Object.assign(s,u):(e.splice(n,0,["enter",u,t],["exit",u,t]),n+=2)}n++}return e}function _3(e,t,n){let s=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const a={},i=[];let o=[],r=[];const f={consume:g,enter:R,exit:P,attempt:I(S),check:I(L),interrupt:I(L,{interrupt:!0})},u={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:m,sliceSerialize:l,now:v,defineSkip:C,write:c};let d=t.tokenize.call(u,f);return t.resolveAll&&i.push(t),u;function c(A){return o=En(o,A),b(),o[o.length-1]!==null?[]:(T(t,0),u.events=yl(i,u.events,u),u.events)}function l(A,w){return y3(m(A),w)}function m(A){return b3(o,A)}function v(){const{line:A,column:w,offset:k,_index:M,_bufferIndex:x}=s;return{line:A,column:w,offset:k,_index:M,_bufferIndex:x}}function C(A){a[A.line]=A.column,y()}function b(){let A;for(;s._index<o.length;){const w=o[s._index];if(typeof w=="string")for(A=s._index,s._bufferIndex<0&&(s._bufferIndex=0);s._index===A&&s._bufferIndex<w.length;)_(w.charCodeAt(s._bufferIndex));else _(w)}}function _(A){d=d(A)}function g(A){ht(A)?(s.line++,s.column=1,s.offset+=A===-3?2:1,y()):A!==-1&&(s.column++,s.offset++),s._bufferIndex<0?s._index++:(s._bufferIndex++,s._bufferIndex===o[s._index].length&&(s._bufferIndex=-1,s._index++)),u.previous=A}function R(A,w){const k=w||{};return k.type=A,k.start=v(),u.events.push(["enter",k,u]),r.push(k),k}function P(A){const w=r.pop();return w.end=v(),u.events.push(["exit",w,u]),w}function S(A,w){T(A,w.from)}function L(A,w){w.restore()}function I(A,w){return k;function k(M,x,F){let V,D,z,p;return Array.isArray(M)?U(M):"tokenize"in M?U([M]):B(M);function B(G){return ae;function ae(X){const he=X!==null&&G[X],we=X!==null&&G.null,Ie=[...Array.isArray(he)?he:he?[he]:[],...Array.isArray(we)?we:we?[we]:[]];return U(Ie)(X)}}function U(G){return V=G,D=0,G.length===0?F:$(G[D])}function $(G){return ae;function ae(X){return p=E(),z=G,G.partial||(u.currentConstruct=G),G.name&&u.parser.constructs.disable.null.includes(G.name)?re():G.tokenize.call(w?Object.assign(Object.create(u),w):u,f,ee,re)(X)}}function ee(G){return A(z,p),x}function re(G){return p.restore(),++D<V.length?$(V[D]):F}}}function T(A,w){A.resolveAll&&!i.includes(A)&&i.push(A),A.resolve&&Zn(u.events,w,u.events.length-w,A.resolve(u.events.slice(w),u)),A.resolveTo&&(u.events=A.resolveTo(u.events,u))}function E(){const A=v(),w=u.previous,k=u.currentConstruct,M=u.events.length,x=Array.from(r);return{restore:F,from:M};function F(){s=A,u.previous=w,u.currentConstruct=k,u.events.length=M,r=x,y()}}function y(){s.line in a&&s.column<2&&(s.column=a[s.line],s.offset+=a[s.line]-1)}}function b3(e,t){const n=t.start._index,s=t.start._bufferIndex,a=t.end._index,i=t.end._bufferIndex;let o;if(n===a)o=[e[n].slice(s,i)];else{if(o=e.slice(n,a),s>-1){const r=o[0];typeof r=="string"?o[0]=r.slice(s):o.shift()}i>0&&o.push(e[a].slice(0,i))}return o}function y3(e,t){let n=-1;const s=[];let a;for(;++n<e.length;){const i=e[n];let o;if(typeof i=="string")o=i;else switch(i){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&a)continue;o=" ";break}default:o=String.fromCharCode(i)}a=i===-2,s.push(o)}return s.join("")}const w3={42:Hn,43:Hn,45:Hn,48:Hn,49:Hn,50:Hn,51:Hn,52:Hn,53:Hn,54:Hn,55:Hn,56:Hn,57:Hn,62:$1},k3={91:Sy},S3={[-2]:nc,[-1]:nc,32:nc},C3={35:Ry,42:Mr,45:[Df,Mr],60:Ly,61:Df,95:Mr,96:$f,126:$f},A3={38:D1,92:F1},T3={[-5]:sc,[-4]:sc,[-3]:sc,33:Zy,38:D1,42:Qc,60:[ey,Ny],91:Jy,92:[xy,F1],93:ed,95:Qc,96:my},x3={null:[Qc,v3]},E3={null:[42,95]},R3={null:[]};var M3=Object.freeze(Object.defineProperty({__proto__:null,document:w3,contentInitial:k3,flowInitial:S3,flow:C3,string:A3,text:T3,insideSpan:x3,attentionMarkers:E3,disable:R3},Symbol.toStringTag,{value:"Module"}));function I3(e){const n=L1([M3,...(e||{}).extensions||[]]),s={defined:[],lazy:{},constructs:n,content:a(Y2),document:a(G2),flow:a(f3),string:a(h3),text:a(g3)};return s;function a(i){return o;function o(r){return _3(s,i,r)}}}function B3(e){for(;!V1(e););return e}const Vf=/[\0\t\n\r]/g;function L3(){let e=1,t="",n=!0,s;return a;function a(i,o,r){const f=[];let u,d,c,l,m;for(i=t+i.toString(o),c=0,t="",n&&(i.charCodeAt(0)===65279&&c++,n=void 0);c<i.length;){if(Vf.lastIndex=c,u=Vf.exec(i),l=u&&u.index!==void 0?u.index:i.length,m=i.charCodeAt(l),!u){t=i.slice(c);break}if(m===10&&c===l&&s)f.push(-3),s=void 0;else switch(s&&(f.push(-5),s=void 0),c<l&&(f.push(i.slice(c,l)),e+=l-c),m){case 0:{f.push(65533),e++;break}case 9:{for(d=Math.ceil(e/4)*4,f.push(-2);e++<d;)f.push(-1);break}case 10:{f.push(-4),e=1;break}default:s=!0,e=1}c=l+1}return r&&(s&&f.push(-5),t&&f.push(t),f.push(null)),f}}function O3(e,t,n){return typeof t!="string"&&(n=t,t=void 0),W2(n)(B3(I3(n).document().write(L3()(e,t,!0))))}const P3={tokenize:j3,partial:!0},q1={tokenize:H3,partial:!0},W1={tokenize:z3,partial:!0},Y1={tokenize:U3,partial:!0},$3={tokenize:q3,partial:!0},K1={tokenize:V3,previous:X1},G1={tokenize:N3,previous:Z1},va={tokenize:D3,previous:Q1},Gs={},F3={text:Gs};let qa=48;for(;qa<123;)Gs[qa]=va,qa++,qa===58?qa=65:qa===91&&(qa=97);Gs[43]=va;Gs[45]=va;Gs[46]=va;Gs[95]=va;Gs[72]=[va,G1];Gs[104]=[va,G1];Gs[87]=[va,K1];Gs[119]=[va,K1];function D3(e,t,n){const s=this;let a,i;return o;function o(c){return!Jc(c)||!Q1.call(s,s.previous)||td(s.events)?n(c):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),r(c))}function r(c){return Jc(c)?(e.consume(c),r):c===64?(e.consume(c),f):n(c)}function f(c){return c===46?e.check($3,d,u)(c):c===45||c===95||In(c)?(i=!0,e.consume(c),f):d(c)}function u(c){return e.consume(c),a=!0,f}function d(c){return i&&a&&Ln(s.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(c)):n(c)}}function V3(e,t,n){const s=this;return a;function a(o){return o!==87&&o!==119||!X1.call(s,s.previous)||td(s.events)?n(o):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(P3,e.attempt(q1,e.attempt(W1,i),n),n)(o))}function i(o){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(o)}}function N3(e,t,n){const s=this;let a="",i=!1;return o;function o(c){return(c===72||c===104)&&Z1.call(s,s.previous)&&!td(s.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),a+=String.fromCodePoint(c),e.consume(c),r):n(c)}function r(c){if(Ln(c)&&a.length<5)return a+=String.fromCodePoint(c),e.consume(c),r;if(c===58){const l=a.toLowerCase();if(l==="http"||l==="https")return e.consume(c),f}return n(c)}function f(c){return c===47?(e.consume(c),i?u:(i=!0,f)):n(c)}function u(c){return c===null||zr(c)||Qt(c)||Li(c)||Ju(c)?n(c):e.attempt(q1,e.attempt(W1,d),n)(c)}function d(c){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(c)}}function j3(e,t,n){let s=0;return a;function a(o){return(o===87||o===119)&&s<3?(s++,e.consume(o),a):o===46&&s===3?(e.consume(o),i):n(o)}function i(o){return o===null?n(o):t(o)}}function H3(e,t,n){let s,a,i;return o;function o(u){return u===46||u===95?e.check(Y1,f,r)(u):u===null||Qt(u)||Li(u)||u!==45&&Ju(u)?f(u):(i=!0,e.consume(u),o)}function r(u){return u===95?s=!0:(a=s,s=void 0),e.consume(u),o}function f(u){return a||s||!i?n(u):t(u)}}function z3(e,t){let n=0,s=0;return a;function a(o){return o===40?(n++,e.consume(o),a):o===41&&s<n?i(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?e.check(Y1,t,i)(o):o===null||Qt(o)||Li(o)?t(o):(e.consume(o),a)}function i(o){return o===41&&s++,e.consume(o),a}}function U3(e,t,n){return s;function s(r){return r===33||r===34||r===39||r===41||r===42||r===44||r===46||r===58||r===59||r===63||r===95||r===126?(e.consume(r),s):r===38?(e.consume(r),i):r===93?(e.consume(r),a):r===60||r===null||Qt(r)||Li(r)?t(r):n(r)}function a(r){return r===null||r===40||r===91||Qt(r)||Li(r)?t(r):s(r)}function i(r){return Ln(r)?o(r):n(r)}function o(r){return r===59?(e.consume(r),s):Ln(r)?(e.consume(r),o):n(r)}}function q3(e,t,n){return s;function s(i){return e.consume(i),a}function a(i){return In(i)?n(i):t(i)}}function X1(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||Qt(e)}function Z1(e){return!Ln(e)}function Q1(e){return!(e===47||Jc(e))}function Jc(e){return e===43||e===45||e===46||e===95||In(e)}function td(e){let t=e.length,n=!1;for(;t--;){const s=e[t][1];if((s.type==="labelLink"||s.type==="labelImage")&&!s._balanced){n=!0;break}if(s._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const W3={exit:{literalAutolinkEmail:K3,literalAutolinkHttp:G3,literalAutolinkWww:Y3}};function Y3(e){nd.call(this,e,"http://")}function K3(e){nd.call(this,e,"mailto:")}function G3(e){nd.call(this,e)}function nd(e,t){const n=this.sliceSerialize(e);this.tag('<a href="'+oi((t||"")+n)+'">'),this.raw(this.encode(n)),this.tag("</a>")}const X3={tokenize:a4,partial:!0};function Z3(){return{document:{91:{tokenize:t4,continuation:{tokenize:n4},exit:s4}},text:{91:{tokenize:e4},93:{add:"after",tokenize:Q3,resolveTo:J3}}}}function Q3(e,t,n){const s=this;let a=s.events.length;const i=s.parser.gfmFootnotes||(s.parser.gfmFootnotes=[]);let o;for(;a--;){const f=s.events[a][1];if(f.type==="labelImage"){o=f;break}if(f.type==="gfmFootnoteCall"||f.type==="labelLink"||f.type==="label"||f.type==="image"||f.type==="link")break}return r;function r(f){if(!o||!o._balanced)return n(f);const u=zs(s.sliceSerialize({start:o.end,end:s.now()}));return u.codePointAt(0)!==94||!i.includes(u.slice(1))?n(f):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(f),e.exit("gfmFootnoteCallLabelMarker"),t(f))}}function J3(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const s={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},a={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};a.end.column++,a.end.offset++,a.end._bufferIndex++;const i={type:"gfmFootnoteCallString",start:Object.assign({},a.end),end:Object.assign({},e[e.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},i.start),end:Object.assign({},i.end)},r=[e[n+1],e[n+2],["enter",s,t],e[n+3],e[n+4],["enter",a,t],["exit",a,t],["enter",i,t],["enter",o,t],["exit",o,t],["exit",i,t],e[e.length-2],e[e.length-1],["exit",s,t]];return e.splice(n,e.length-n+1,...r),e}function e4(e,t,n){const s=this,a=s.parser.gfmFootnotes||(s.parser.gfmFootnotes=[]);let i=0,o;return r;function r(c){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(c),e.exit("gfmFootnoteCallLabelMarker"),f}function f(c){return c!==94?n(c):(e.enter("gfmFootnoteCallMarker"),e.consume(c),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",u)}function u(c){if(i>999||c===93&&!o||c===null||c===91||Qt(c))return n(c);if(c===93){e.exit("chunkString");const l=e.exit("gfmFootnoteCallString");return a.includes(zs(s.sliceSerialize(l)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(c),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(c)}return Qt(c)||(o=!0),i++,e.consume(c),c===92?d:u}function d(c){return c===91||c===92||c===93?(e.consume(c),i++,u):u(c)}}function t4(e,t,n){const s=this,a=s.parser.gfmFootnotes||(s.parser.gfmFootnotes=[]);let i,o=0,r;return f;function f(v){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(v),e.exit("gfmFootnoteDefinitionLabelMarker"),u}function u(v){return v===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(v),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",d):n(v)}function d(v){if(o>999||v===93&&!r||v===null||v===91||Qt(v))return n(v);if(v===93){e.exit("chunkString");const C=e.exit("gfmFootnoteDefinitionLabelString");return i=zs(s.sliceSerialize(C)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(v),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),l}return Qt(v)||(r=!0),o++,e.consume(v),v===92?c:d}function c(v){return v===91||v===92||v===93?(e.consume(v),o++,d):d(v)}function l(v){return v===58?(e.enter("definitionMarker"),e.consume(v),e.exit("definitionMarker"),a.includes(i)||a.push(i),Pt(e,m,"gfmFootnoteDefinitionWhitespace")):n(v)}function m(v){return t(v)}}function n4(e,t,n){return e.check(No,t,e.attempt(X3,t,n))}function s4(e){e.exit("gfmFootnoteDefinition")}function a4(e,t,n){const s=this;return Pt(e,a,"gfmFootnoteDefinitionIndent",5);function a(i){const o=s.events[s.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?t(i):n(i)}}const i4={}.hasOwnProperty,o4={};function r4(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function l4(e){const t=o4,n=t.label||"Footnotes",s=t.labelTagName||"h2",a=t.labelAttributes===null||t.labelAttributes===void 0?'class="sr-only"':t.labelAttributes,i=t.backLabel||r4,o=t.clobberPrefix===null||t.clobberPrefix===void 0?"user-content-":t.clobberPrefix;return{enter:{gfmFootnoteDefinition(){this.getData("tightStack").push(!1)},gfmFootnoteDefinitionLabelString(){this.buffer()},gfmFootnoteCallString(){this.buffer()}},exit:{gfmFootnoteDefinition(){let r=this.getData("gfmFootnoteDefinitions");const f=this.getData("gfmFootnoteDefinitionStack"),u=this.getData("tightStack"),d=f.pop(),c=this.resume();r||this.setData("gfmFootnoteDefinitions",r={}),i4.call(r,d)||(r[d]=c),u.pop(),this.setData("slurpOneLineEnding",!0),this.setData("lastWasTag")},gfmFootnoteDefinitionLabelString(r){let f=this.getData("gfmFootnoteDefinitionStack");f||this.setData("gfmFootnoteDefinitionStack",f=[]),f.push(zs(this.sliceSerialize(r))),this.resume(),this.buffer()},gfmFootnoteCallString(r){let f=this.getData("gfmFootnoteCallOrder"),u=this.getData("gfmFootnoteCallCounts");const d=zs(this.sliceSerialize(r));let c;this.resume(),f||this.setData("gfmFootnoteCallOrder",f=[]),u||this.setData("gfmFootnoteCallCounts",u={});const l=f.indexOf(d),m=oi(d.toLowerCase());l===-1?(f.push(d),u[d]=1,c=f.length):(u[d]++,c=l+1);const v=u[d];this.tag('<sup><a href="#'+o+"fn-"+m+'" id="'+o+"fnref-"+m+(v>1?"-"+v:"")+'" data-footnote-ref="" aria-describedby="footnote-label">'+String(c)+"</a></sup>")},null(){const r=this.getData("gfmFootnoteCallOrder")||[],f=this.getData("gfmFootnoteCallCounts")||{},u=this.getData("gfmFootnoteDefinitions")||{};let d=-1;for(r.length>0&&(this.lineEndingIfNeeded(),this.tag('<section data-footnotes="" class="footnotes"><'+s+' id="footnote-label"'+(a?" "+a:"")+">"),this.raw(this.encode(n)),this.tag("</"+s+">"),this.lineEndingIfNeeded(),this.tag("<ol>"));++d<r.length;){const c=r[d],l=oi(c.toLowerCase());let m=0;const v=[];for(;++m<=f[c];)v.push('<a href="#'+o+"fnref-"+l+(m>1?"-"+m:"")+'" data-footnote-backref="" aria-label="'+this.encode(typeof i=="string"?i:i(d,m))+'" class="data-footnote-backref">'+(m>1?"<sup>"+m+"</sup>":"")+"</a>");const C=v.join(" ");let b=!1;this.lineEndingIfNeeded(),this.tag('<li id="'+o+"fn-"+l+'">'),this.lineEndingIfNeeded(),this.tag(u[c].replace(/<\/p>(?:\r?\n|\r)?$/,_=>(b=!0," "+C+_))),b||(this.lineEndingIfNeeded(),this.tag(C)),this.lineEndingIfNeeded(),this.tag("</li>")}r.length>0&&(this.lineEndingIfNeeded(),this.tag("</ol>"),this.lineEndingIfNeeded(),this.tag("</section>"))}}}}const c4={enter:{strikethrough(){this.tag("<del>")}},exit:{strikethrough(){this.tag("</del>")}}};function u4(e){let n={}.singleTilde;const s={tokenize:i,resolveAll:a};return n==null&&(n=!0),{text:{126:s},insideSpan:{null:[s]},attentionMarkers:{null:[126]}};function a(o,r){let f=-1;for(;++f<o.length;)if(o[f][0]==="enter"&&o[f][1].type==="strikethroughSequenceTemporary"&&o[f][1]._close){let u=f;for(;u--;)if(o[u][0]==="exit"&&o[u][1].type==="strikethroughSequenceTemporary"&&o[u][1]._open&&o[f][1].end.offset-o[f][1].start.offset===o[u][1].end.offset-o[u][1].start.offset){o[f][1].type="strikethroughSequence",o[u][1].type="strikethroughSequence";const d={type:"strikethrough",start:Object.assign({},o[u][1].start),end:Object.assign({},o[f][1].end)},c={type:"strikethroughText",start:Object.assign({},o[u][1].end),end:Object.assign({},o[f][1].start)},l=[["enter",d,r],["enter",o[u][1],r],["exit",o[u][1],r],["enter",c,r]],m=r.parser.constructs.insideSpan.null;m&&Zn(l,l.length,0,yl(m,o.slice(u+1,f),r)),Zn(l,l.length,0,[["exit",c,r],["enter",o[f][1],r],["exit",o[f][1],r],["exit",d,r]]),Zn(o,u-1,f-u+3,l),f=u+l.length-2;break}}for(f=-1;++f<o.length;)o[f][1].type==="strikethroughSequenceTemporary"&&(o[f][1].type="data");return o}function i(o,r,f){const u=this.previous,d=this.events;let c=0;return l;function l(v){return u===126&&d[d.length-1][1].type!=="characterEscape"?f(v):(o.enter("strikethroughSequenceTemporary"),m(v))}function m(v){const C=Ur(u);if(v===126)return c>1?f(v):(o.consume(v),c++,m);if(c<2&&!n)return f(v);const b=o.exit("strikethroughSequenceTemporary"),_=Ur(v);return b._open=!_||_===2&&!!C,b._close=!C||C===2&&!!_,r(v)}}}const ac={none:"",left:' align="left"',right:' align="right"',center:' align="center"'},d4={enter:{table(e){const t=e._align;this.lineEndingIfNeeded(),this.tag("<table>"),this.setData("tableAlign",t)},tableBody(){this.tag("<tbody>")},tableData(){const e=this.getData("tableAlign"),t=this.getData("tableColumn"),n=ac[e[t]];n===void 0?this.buffer():(this.lineEndingIfNeeded(),this.tag("<td"+n+">"))},tableHead(){this.lineEndingIfNeeded(),this.tag("<thead>")},tableHeader(){const e=this.getData("tableAlign"),t=this.getData("tableColumn"),n=ac[e[t]];this.lineEndingIfNeeded(),this.tag("<th"+n+">")},tableRow(){this.setData("tableColumn",0),this.lineEndingIfNeeded(),this.tag("<tr>")}},exit:{codeTextData(e){let t=this.sliceSerialize(e);this.getData("tableAlign")&&(t=t.replace(/\\([\\|])/g,f4)),this.raw(this.encode(t))},table(){this.setData("tableAlign"),this.setData("slurpAllLineEndings"),this.lineEndingIfNeeded(),this.tag("</table>")},tableBody(){this.lineEndingIfNeeded(),this.tag("</tbody>")},tableData(){const e=this.getData("tableAlign"),t=this.getData("tableColumn");t in e?(this.tag("</td>"),this.setData("tableColumn",t+1)):this.resume()},tableHead(){this.lineEndingIfNeeded(),this.tag("</thead>")},tableHeader(){const e=this.getData("tableColumn");this.tag("</th>"),this.setData("tableColumn",e+1)},tableRow(){const e=this.getData("tableAlign");let t=this.getData("tableColumn");for(;t<e.length;)this.lineEndingIfNeeded(),this.tag("<td"+ac[e[t]]+"></td>"),t++;this.setData("tableColumn",t),this.lineEndingIfNeeded(),this.tag("</tr>")}}};function f4(e,t){return t==="|"?t:e}class m4{constructor(){this.map=[]}add(t,n,s){v4(this,t,n,s)}consume(t){if(this.map.sort((i,o)=>i[0]-o[0]),this.map.length===0)return;let n=this.map.length;const s=[];for(;n>0;)n-=1,s.push(t.slice(this.map[n][0]+this.map[n][1])),s.push(this.map[n][2]),t.length=this.map[n][0];s.push([...t]),t.length=0;let a=s.pop();for(;a;)t.push(...a),a=s.pop();this.map.length=0}}function v4(e,t,n,s){let a=0;if(!(n===0&&s.length===0)){for(;a<e.map.length;){if(e.map[a][0]===t){e.map[a][1]+=n,e.map[a][2].push(...s);return}a+=1}e.map.push([t,n,s])}}function h4(e,t){let n=!1;const s=[];for(;t<e.length;){const a=e[t];if(n){if(a[0]==="enter")a[1].type==="tableContent"&&s.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(a[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const i=s.length-1;s[i]=s[i]==="left"?"center":"right"}}else if(a[1].type==="tableDelimiterRow")break}else a[0]==="enter"&&a[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return s}const g4={flow:{null:{tokenize:p4,resolveAll:_4}}};function p4(e,t,n){const s=this;let a=0,i=0,o;return r;function r(y){let A=s.events.length-1;for(;A>-1;){const M=s.events[A][1].type;if(M==="lineEnding"||M==="linePrefix")A--;else break}const w=A>-1?s.events[A][1].type:null,k=w==="tableHead"||w==="tableRow"?L:f;return k===L&&s.parser.lazy[s.now().line]?n(y):k(y)}function f(y){return e.enter("tableHead"),e.enter("tableRow"),u(y)}function u(y){return y===124||(o=!0,i+=1),d(y)}function d(y){return y===null?n(y):ht(y)?i>1?(i=0,s.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(y),e.exit("lineEnding"),m):n(y):Bt(y)?Pt(e,d,"whitespace")(y):(i+=1,o&&(o=!1,a+=1),y===124?(e.enter("tableCellDivider"),e.consume(y),e.exit("tableCellDivider"),o=!0,d):(e.enter("data"),c(y)))}function c(y){return y===null||y===124||Qt(y)?(e.exit("data"),d(y)):(e.consume(y),y===92?l:c)}function l(y){return y===92||y===124?(e.consume(y),c):c(y)}function m(y){return s.interrupt=!1,s.parser.lazy[s.now().line]?n(y):(e.enter("tableDelimiterRow"),o=!1,Bt(y)?Pt(e,v,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(y):v(y))}function v(y){return y===45||y===58?b(y):y===124?(o=!0,e.enter("tableCellDivider"),e.consume(y),e.exit("tableCellDivider"),C):S(y)}function C(y){return Bt(y)?Pt(e,b,"whitespace")(y):b(y)}function b(y){return y===58?(i+=1,o=!0,e.enter("tableDelimiterMarker"),e.consume(y),e.exit("tableDelimiterMarker"),_):y===45?(i+=1,_(y)):y===null||ht(y)?P(y):S(y)}function _(y){return y===45?(e.enter("tableDelimiterFiller"),g(y)):S(y)}function g(y){return y===45?(e.consume(y),g):y===58?(o=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(y),e.exit("tableDelimiterMarker"),R):(e.exit("tableDelimiterFiller"),R(y))}function R(y){return Bt(y)?Pt(e,P,"whitespace")(y):P(y)}function P(y){return y===124?v(y):y===null||ht(y)?!o||a!==i?S(y):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(y)):S(y)}function S(y){return n(y)}function L(y){return e.enter("tableRow"),I(y)}function I(y){return y===124?(e.enter("tableCellDivider"),e.consume(y),e.exit("tableCellDivider"),I):y===null||ht(y)?(e.exit("tableRow"),t(y)):Bt(y)?Pt(e,I,"whitespace")(y):(e.enter("data"),T(y))}function T(y){return y===null||y===124||Qt(y)?(e.exit("data"),I(y)):(e.consume(y),y===92?E:T)}function E(y){return y===92||y===124?(e.consume(y),T):T(y)}}function _4(e,t){let n=-1,s=!0,a=0,i=[0,0,0,0],o=[0,0,0,0],r=!1,f=0,u,d,c;const l=new m4;for(;++n<e.length;){const m=e[n],v=m[1];m[0]==="enter"?v.type==="tableHead"?(r=!1,f!==0&&(Nf(l,t,f,u,d),d=void 0,f=0),u={type:"table",start:Object.assign({},v.start),end:Object.assign({},v.end)},l.add(n,0,[["enter",u,t]])):v.type==="tableRow"||v.type==="tableDelimiterRow"?(s=!0,c=void 0,i=[0,0,0,0],o=[0,n+1,0,0],r&&(r=!1,d={type:"tableBody",start:Object.assign({},v.start),end:Object.assign({},v.end)},l.add(n,0,[["enter",d,t]])),a=v.type==="tableDelimiterRow"?2:d?3:1):a&&(v.type==="data"||v.type==="tableDelimiterMarker"||v.type==="tableDelimiterFiller")?(s=!1,o[2]===0&&(i[1]!==0&&(o[0]=o[1],c=lr(l,t,i,a,void 0,c),i=[0,0,0,0]),o[2]=n)):v.type==="tableCellDivider"&&(s?s=!1:(i[1]!==0&&(o[0]=o[1],c=lr(l,t,i,a,void 0,c)),i=o,o=[i[1],n,0,0])):v.type==="tableHead"?(r=!0,f=n):v.type==="tableRow"||v.type==="tableDelimiterRow"?(f=n,i[1]!==0?(o[0]=o[1],c=lr(l,t,i,a,n,c)):o[1]!==0&&(c=lr(l,t,o,a,n,c)),a=0):a&&(v.type==="data"||v.type==="tableDelimiterMarker"||v.type==="tableDelimiterFiller")&&(o[3]=n)}for(f!==0&&Nf(l,t,f,u,d),l.consume(t.events),n=-1;++n<t.events.length;){const m=t.events[n];m[0]==="enter"&&m[1].type==="table"&&(m[1]._align=h4(t.events,n))}return e}function lr(e,t,n,s,a,i){const o=s===1?"tableHeader":s===2?"tableDelimiter":"tableData",r="tableContent";n[0]!==0&&(i.end=Object.assign({},Ci(t.events,n[0])),e.add(n[0],0,[["exit",i,t]]));const f=Ci(t.events,n[1]);if(i={type:o,start:Object.assign({},f),end:Object.assign({},f)},e.add(n[1],0,[["enter",i,t]]),n[2]!==0){const u=Ci(t.events,n[2]),d=Ci(t.events,n[3]),c={type:r,start:Object.assign({},u),end:Object.assign({},d)};if(e.add(n[2],0,[["enter",c,t]]),s!==2){const l=t.events[n[2]],m=t.events[n[3]];if(l[1].end=Object.assign({},m[1].end),l[1].type="chunkText",l[1].contentType="text",n[3]>n[2]+1){const v=n[2]+1,C=n[3]-n[2]-1;e.add(v,C,[])}}e.add(n[3]+1,0,[["exit",c,t]])}return a!==void 0&&(i.end=Object.assign({},Ci(t.events,a)),e.add(a,0,[["exit",i,t]]),i=void 0),i}function Nf(e,t,n,s,a){const i=[],o=Ci(t.events,n);a&&(a.end=Object.assign({},o),i.push(["exit",a,t])),s.end=Object.assign({},o),i.push(["exit",s,t]),e.add(n+1,0,i)}function Ci(e,t){const n=e[t],s=n[0]==="enter"?"start":"end";return n[1][s]}const J1=/<(\/?)(iframe|noembed|noframes|plaintext|script|style|title|textarea|xmp)(?=[\t\n\f\r />])/gi,b4=new RegExp("^"+J1.source,"i"),y4={exit:{htmlFlowData(e){jf.call(this,e,J1)},htmlTextData(e){jf.call(this,e,b4)}}};function jf(e,t){let n=this.sliceSerialize(e);this.options.allowDangerousHtml&&(n=n.replace(t,"&lt;$1$2")),this.raw(this.encode(n))}const w4={enter:{taskListCheck(){this.tag('<input type="checkbox" disabled="" ')}},exit:{taskListCheck(){this.tag("/>")},taskListCheckValueChecked(){this.tag('checked="" ')}}},k4={tokenize:C4},S4={text:{91:k4}};function C4(e,t,n){const s=this;return a;function a(f){return s.previous!==null||!s._gfmTasklistFirstContentOfListItem?n(f):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(f),e.exit("taskListCheckMarker"),i)}function i(f){return Qt(f)?(e.enter("taskListCheckValueUnchecked"),e.consume(f),e.exit("taskListCheckValueUnchecked"),o):f===88||f===120?(e.enter("taskListCheckValueChecked"),e.consume(f),e.exit("taskListCheckValueChecked"),o):n(f)}function o(f){return f===93?(e.enter("taskListCheckMarker"),e.consume(f),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),r):n(f)}function r(f){return ht(f)?t(f):Bt(f)?e.check({tokenize:A4},t,n)(f):n(f)}}function A4(e,t,n){return Pt(e,s,"whitespace");function s(a){return a===null?n(a):t(a)}}function T4(e){return L1([F3,Z3(),u4(),g4,S4])}function x4(e){return O1([W3,l4(),c4,d4,y4,w4])}const wn={carriageReturn:-5,lineFeed:-4,carriageReturnLineFeed:-3,eof:null,greaterThan:62,atSign:64,backslash:92,degree:176},E4=(e,t,n)=>{const s=o=>o===wn.carriageReturn||o===wn.lineFeed||o===wn.carriageReturnLineFeed||o===wn.eof?n(o):o===wn.backslash?(e.consume(o),a):o===wn.degree?(e.exit("underlineContent"),e.enter("underlineMarker"),e.consume(o),e.exit("underlineMarker"),e.exit("underline"),t):(e.consume(o),s),a=o=>o===wn.backslash||o===wn.degree?(e.consume(o),s):s(o),i=o=>o===wn.degree?n(o):s(o);return o=>(e.enter("underline"),e.enter("underlineMarker"),e.consume(o),e.exit("underlineMarker"),e.enter("underlineContent",{contentType:"string"}),i)},R4={name:"underline",tokenize:E4},M4={text:{176:R4}},I4={enter:{underline(){this.tag("<u>")}},exit:{underline(){this.tag("</u>")}}},B4=(e,t,n)=>{const s=o=>o===wn.carriageReturn||o===wn.lineFeed||o===wn.carriageReturnLineFeed||o===wn.eof?n(o):o===wn.backslash?(e.consume(o),a):o===wn.greaterThan?(e.exit("usertagContent"),e.enter("usertagMarker"),e.consume(o),e.exit("usertagMarker"),e.exit("usertag"),t):(e.consume(o),s),a=o=>o===wn.backslash||o===wn.greaterThan?(e.consume(o),s):s(o),i=o=>o===wn.atSign?(e.consume(o),e.exit("usertagMarker"),e.enter("usertagContent"),s):n(o);return o=>(e.enter("usertag"),e.enter("usertagMarker"),e.consume(o),i)},L4={name:"usertag",tokenize:B4},O4={text:{60:L4}},P4=e=>({exit:{usertagContent(t){const n=this.sliceSerialize(t);this.tag(`<span class="vac-text-tag" data-user-id="${n}">`);const s=e.find(a=>a._id===n);this.raw(`@${this.encode(s?s.username:n)}`),this.tag("</span>")}}});var $4=(e,{textFormatting:t})=>{if(t){let n=[];t.linkify||(n=["literalAutolink","literalAutolinkEmail"]);const s=O3(e.replaceAll("<usertag>","<@").replaceAll("</usertag>",">"),{extensions:[{...T4(),disable:{null:n}},M4,O4],htmlExtensions:[x4(),I4,P4(t.users)]});if(t.singleLine){const a=document.createElement("div");return a.innerHTML=s,[{types:[],value:a.innerText}]}return[{types:["markdown"],value:s}]}return[{types:[],value:e}]};const sd=["png","jpg","jpeg","webp","svg","gif"],eh=["mp4","video/ogg","webm","quicktime"],F4=["mp3","audio/ogg","wav","mpeg"],D4={name:"FormatMessage",components:{SvgIcon:An},props:{messageId:{type:String,default:""},roomId:{type:String,default:""},roomList:{type:Boolean,default:!1},content:{type:[String,Number],required:!0},deleted:{type:Boolean,default:!1},users:{type:Array,default:()=>[]},linkify:{type:Boolean,default:!0},singleLine:{type:Boolean,default:!1},reply:{type:Boolean,default:!1},textFormatting:{type:Object,required:!0},textMessages:{type:Object,default:()=>{}},linkOptions:{type:Object,required:!0}},emits:["open-user-tag"],computed:{parsedMessage(){if(this.deleted)return[{value:this.textMessages.MESSAGE_DELETED}];let e;this.textFormatting.disabled?e={}:e={textFormatting:{linkify:this.linkify,linkOptions:this.linkOptions,singleLine:this.singleLine,reply:this.reply,users:this.users,...this.textFormatting}};const t=$4(this.content,e);return t.forEach(n=>{n.markdown=this.checkType(n,"markdown"),n.tag=this.checkType(n,"tag"),n.image=this.checkImageType(n)}),t}},methods:{checkType(e,t){return e.types&&e.types.indexOf(t)!==-1},checkImageType(e){let t=e.value.lastIndexOf(".");e.value.lastIndexOf("/")>t&&(t=-1);const s=e.value.substring(t+1,e.value.length),a=t>0&&sd.some(i=>s.toLowerCase().includes(i));return a&&this.setImageSize(e),a},setImageSize(e){const t=new Image;t.src=e.value,t.addEventListener("load",n);function n(s){const a=s.path[0].width/150;e.height=Math.round(s.path[0].height/a)+"px",t.removeEventListener("load",n)}},openTag(e){const t=e.target.getAttribute("data-user-id");if(!this.singleLine&&t){const n=this.users.find(s=>String(s._id)===t);this.$emit("open-user-tag",n)}}}},V4=["innerHTML"],N4={class:"vac-image-link-container"},j4={class:"vac-image-link-message"};function H4(e,t,n,s,a,i){const o=mt("svg-icon");return me(),xe("div",{class:Mt(["vac-format-message-wrapper",{"vac-text-ellipsis":n.singleLine}])},[(me(!0),xe(Lt,null,Rt(i.parsedMessage,(r,f)=>(me(),xe(Lt,{key:f},[r.markdown?(me(),xe("div",{key:0,class:"markdown",onClick:t[0]||(t[0]=(...u)=>i.openTag&&i.openTag(...u)),innerHTML:r.value},null,8,V4)):(me(),xe("div",{key:1,class:Mt(["vac-format-container",{"vac-text-ellipsis":n.singleLine}])},[(me(),Ht(K_(r.url?"a":"span"),{class:Mt({"vac-text-ellipsis":n.singleLine,"vac-text-tag":!n.singleLine&&!n.reply&&r.tag}),href:r.href,target:r.href?n.linkOptions.target:null,rel:r.href?n.linkOptions.rel:null},{default:vt(()=>[n.deleted?(me(),xe(Lt,{key:0},[We(e.$slots,n.roomList?"deleted-icon-room_"+n.roomId:"deleted-icon_"+n.messageId,{},()=>[Ge(o,{name:"deleted",class:Mt(["vac-icon-deleted",{"vac-icon-deleted-room":n.roomList}])},null,8,["class"])]),ra(" "+yt(n.textMessages.MESSAGE_DELETED),1)],64)):r.url&&r.image?(me(),xe(Lt,{key:1},[De("div",N4,[De("div",{class:"vac-image-link",style:nn({"background-image":`url('${r.value}')`,height:r.height})},null,4)]),De("div",j4,yt(r.value),1)],64)):(me(),xe(Lt,{key:2},[ra(yt(r.value),1)],64))]),_:2},1032,["class","href","target","rel"]))],2))],64))),128))],2)}var jo=Jt(D4,[["render",H4]]);const si="__v-click-outside",th=typeof window<"u",z4=typeof navigator<"u",U4=th&&("ontouchstart"in window||z4&&navigator.msMaxTouchPoints>0),q4=U4?["touchstart"]:["click"],W4=e=>{const t=typeof e=="function";if(!t&&typeof e!="object")throw new Error("v-click-outside: Binding value must be a function or an object");return{handler:t?e:e.handler,middleware:e.middleware||(n=>n),events:e.events||q4,isActive:e.isActive!==!1,detectIframe:e.detectIframe!==!1,capture:!!e.capture}},nh=({event:e,handler:t,middleware:n})=>{n(e)&&t(e)},Y4=({el:e,event:t,handler:n,middleware:s})=>{setTimeout(()=>{const{activeElement:a}=document;a&&a.tagName==="IFRAME"&&!e.contains(a)&&nh({event:t,handler:n,middleware:s})},0)},K4=({el:e,event:t,handler:n,middleware:s})=>{const a=t.path||t.composedPath&&t.composedPath();(a?a.indexOf(e)<0:!e.contains(t.target))&&nh({event:t,handler:n,middleware:s})},sh=(e,{value:t})=>{const{events:n,handler:s,middleware:a,isActive:i,detectIframe:o,capture:r}=W4(t);if(i){if(e[si]=n.map(f=>({event:f,srcTarget:document.documentElement,handler:u=>K4({el:e,event:u,handler:s,middleware:a}),capture:r})),o){const f={event:"blur",srcTarget:window,handler:u=>Y4({el:e,event:u,handler:s,middleware:a}),capture:r};e[si]=[...e[si],f]}e[si].forEach(({event:f,srcTarget:u,handler:d})=>setTimeout(()=>{e[si]&&u.addEventListener(f,d,r)},0))}},ah=e=>{(e[si]||[]).forEach(({event:n,srcTarget:s,handler:a,capture:i})=>s.removeEventListener(n,a,i)),delete e[si]},G4=(e,{value:t,oldValue:n})=>{JSON.stringify(t)!==JSON.stringify(n)&&(ah(e),sh(e,{value:t}))},X4={beforeMount:sh,updated:G4,unmounted:ah};var wl=th?X4:{},ih=(e,t,n)=>{if(e.typingUsers&&e.typingUsers.length){const s=e.users.filter(a=>{if(a._id!==t&&e.typingUsers.indexOf(a._id)!==-1&&!(a.status&&a.status.state==="offline"))return!0});return s.length?e.users.length===2?n.IS_TYPING:s.map(a=>a.username).join(", ")+" "+n.IS_TYPING:void 0}};function xo(e,t){if(!(!t||!t.type))return e.some(n=>t.type.toLowerCase().includes(n))}function Oi(e){return xo(sd,e)}function Ho(e){return xo(eh,e)}function Hf(e){return xo(sd,e)||xo(eh,e)}function kl(e){return xo(F4,e)}const Z4={name:"RoomsContent",components:{SvgIcon:An,FormatMessage:jo},directives:{clickOutside:wl},props:{currentUserId:{type:[String,Number],required:!0},room:{type:Object,required:!0},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},textMessages:{type:Object,required:!0},roomActions:{type:Array,required:!0}},emits:["room-action-handler"],data(){return{roomMenuOpened:null}},computed:{getLastMessage(){const e=this.typingUsers;if(e)return e;const t=this.room.lastMessage.content;if(this.room.users.length<=2)return t;const n=this.room.users.find(s=>s._id===this.room.lastMessage.senderId);return this.room.lastMessage.username?`${this.room.lastMessage.username} - ${t}`:!n||n._id===this.currentUserId?t:`${n.username} - ${t}`},userStatus(){if(!this.room.users||this.room.users.length!==2)return;const e=this.room.users.find(t=>t._id!==this.currentUserId);return e&&e.status?e.status.state:null},typingUsers(){return ih(this.room,this.currentUserId,this.textMessages)},isMessageCheckmarkVisible(){return!this.typingUsers&&this.room.lastMessage&&!this.room.lastMessage.deleted&&this.room.lastMessage.senderId===this.currentUserId&&(this.room.lastMessage.saved||this.room.lastMessage.distributed||this.room.lastMessage.seen)},formattedDuration(){var e,t;const n=(t=(e=this.room.lastMessage)==null?void 0:e.files)==null?void 0:t[0];if(n){if(!n.duration)return`${n.name}.${n.extension}`;let s=Math.floor(n.duration);return(s-(s%=60))/60+(s>9?":":":0")+s}return""},isAudio(){return this.room.lastMessage.files?kl(this.room.lastMessage.files[0]):!1}},methods:{roomActionHandler(e){this.closeRoomMenu(),this.$emit("room-action-handler",{action:e,roomId:this.room.roomId})},closeRoomMenu(){this.roomMenuOpened=null}}},Q4={class:"vac-room-container"},J4={class:"vac-name-container vac-text-ellipsis"},e5={class:"vac-title-container"},t5={class:"vac-room-name vac-text-ellipsis"},n5={key:1,class:"vac-text-date"},s5={key:0},a5={key:1,class:"vac-text-ellipsis"},i5={key:3,class:"vac-text-ellipsis"},o5={class:"vac-room-options-container"},r5={key:0,class:"vac-badge-counter vac-room-badge"},l5={key:0,class:"vac-menu-options"},c5={class:"vac-menu-list"},u5=["onClick"];function d5(e,t,n,s,a,i){const o=mt("svg-icon"),r=mt("format-message"),f=hl("click-outside");return me(),xe("div",Q4,[We(e.$slots,"room-list-item_"+n.room.roomId,{},()=>[We(e.$slots,"room-list-avatar_"+n.room.roomId,{},()=>[n.room.avatar?(me(),xe("div",{key:0,class:"vac-avatar",style:nn({"background-image":`url('${n.room.avatar}')`})},null,4)):qe("",!0)]),De("div",J4,[De("div",e5,[i.userStatus?(me(),xe("div",{key:0,class:Mt(["vac-state-circle",{"vac-state-online":i.userStatus==="online"}])},null,2)):qe("",!0),We(e.$slots,"room-list-info_"+n.room.roomId,{},()=>[De("div",t5,yt(n.room.roomName),1)]),n.room.lastMessage?(me(),xe("div",n5,yt(n.room.lastMessage.timestamp),1)):qe("",!0)]),De("div",{class:Mt(["vac-text-last",{"vac-message-new":n.room.lastMessage&&n.room.lastMessage.new&&!i.typingUsers}])},[i.isMessageCheckmarkVisible?(me(),xe("span",s5,[We(e.$slots,"checkmark-icon_"+n.room.roomId,{},()=>[Ge(o,{name:n.room.lastMessage.distributed?"double-checkmark":"checkmark",param:n.room.lastMessage.seen?"seen":"",class:"vac-icon-check"},null,8,["name","param"])])])):qe("",!0),n.room.lastMessage&&!n.room.lastMessage.deleted&&i.isAudio?(me(),xe("div",a5,[We(e.$slots,"microphone-icon_"+n.room.roomId,{},()=>[Ge(o,{name:"microphone",class:"vac-icon-microphone"})]),ra(" "+yt(i.formattedDuration),1)])):n.room.lastMessage?(me(),Ht(r,{key:2,"message-id":n.room.lastMessage._id,"room-id":n.room.roomId,"room-list":!0,content:i.getLastMessage,deleted:!!n.room.lastMessage.deleted&&!i.typingUsers,users:n.room.users,"text-messages":n.textMessages,linkify:!1,"text-formatting":n.textFormatting,"link-options":n.linkOptions,"single-line":!0},Wt({_:2},[Rt(e.$slots,(u,d)=>({name:d,fn:vt(c=>[We(e.$slots,d,qt(zt(c)))])}))]),1032,["message-id","room-id","content","deleted","users","text-messages","text-formatting","link-options"])):qe("",!0),!n.room.lastMessage&&i.typingUsers?(me(),xe("div",i5,yt(i.typingUsers),1)):qe("",!0),De("div",o5,[n.room.unreadCount?(me(),xe("div",r5,yt(n.room.unreadCount),1)):qe("",!0),We(e.$slots,"room-list-options_"+n.room.roomId,{},()=>[n.roomActions.length?(me(),xe("div",{key:0,class:"vac-svg-button vac-list-room-options",onClick:t[0]||(t[0]=Ns(u=>a.roomMenuOpened=n.room.roomId,["stop"]))},[We(e.$slots,"room-list-options-icon_"+n.room.roomId,{},()=>[Ge(o,{name:"dropdown",param:"room"})])])):qe("",!0),n.roomActions.length?(me(),Ht(vn,{key:1,name:"vac-slide-left"},{default:vt(()=>[a.roomMenuOpened===n.room.roomId?oa((me(),xe("div",l5,[De("div",c5,[(me(!0),xe(Lt,null,Rt(n.roomActions,u=>(me(),xe("div",{key:u.name},[De("div",{class:"vac-menu-item",onClick:Ns(d=>i.roomActionHandler(u),["stop"])},yt(u.title),9,u5)]))),128))])])),[[f,i.closeRoomMenu]]):qe("",!0)]),_:1})):qe("",!0)])])],2)])])])}var f5=Jt(Z4,[["render",d5]]),eu=(e,t,n,s=!1)=>!n||n===""?e:e.filter(a=>s?cr(a[t]).startsWith(cr(n)):cr(a[t]).includes(cr(n)));function cr(e){return e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")}const m5={name:"RoomsList",components:{Loader:bl,RoomsSearch:O2,RoomContent:f5},props:{currentUserId:{type:[String,Number],required:!0},textMessages:{type:Object,required:!0},showRoomsList:{type:Boolean,required:!0},showSearch:{type:Boolean,required:!0},showAddRoom:{type:Boolean,required:!0},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},isMobile:{type:Boolean,required:!0},rooms:{type:Array,required:!0},loadingRooms:{type:Boolean,required:!0},roomsLoaded:{type:Boolean,required:!0},room:{type:Object,required:!0},customSearchRoomEnabled:{type:[Boolean,String],default:!1},roomActions:{type:Array,required:!0},scrollDistance:{type:Number,required:!0}},emits:["add-room","search-room","room-action-handler","loading-more-rooms","fetch-room","fetch-more-rooms"],data(){return{filteredRooms:this.rooms||[],observer:null,showLoader:!0,loadingMoreRooms:!1,selectedRoomId:""}},watch:{rooms:{deep:!0,handler(e,t){this.filteredRooms=e,(e.length!==t.length||this.roomsLoaded)&&(this.loadingMoreRooms=!1)}},loadingRooms(e){e||setTimeout(()=>this.initIntersectionObserver())},loadingMoreRooms(e){this.$emit("loading-more-rooms",e)},roomsLoaded:{immediate:!0,handler(e){e&&(this.loadingMoreRooms=!1,this.loadingRooms||(this.showLoader=!1))}},room:{immediate:!0,handler(e){e&&!this.isMobile&&(this.selectedRoomId=e.roomId)}}},methods:{initIntersectionObserver(){this.observer&&(this.showLoader=!0,this.observer.disconnect());const e=this.$el.querySelector("#infinite-loader-rooms");if(e){const t={root:this.$el.querySelector("#rooms-list"),rootMargin:`${this.scrollDistance}px`,threshold:0};this.observer=new IntersectionObserver(n=>{n[0].isIntersecting&&this.loadMoreRooms()},t),this.observer.observe(e)}},searchRoom(e){this.customSearchRoomEnabled?this.$emit("search-room",e.target.value):this.filteredRooms=eu(this.rooms,"roomName",e.target.value)},openRoom(e){e.roomId===this.room.roomId&&!this.isMobile||(this.isMobile||(this.selectedRoomId=e.roomId),this.$emit("fetch-room",{room:e}))},loadMoreRooms(){if(!this.loadingMoreRooms){if(this.roomsLoaded){this.loadingMoreRooms=!1,this.showLoader=!1;return}this.$emit("fetch-more-rooms"),this.loadingMoreRooms=!0}}}},v5={key:0,class:"vac-rooms-empty"},h5={key:1,id:"rooms-list",class:"vac-room-list"},g5=["id","onClick"],p5={key:0,id:"infinite-loader-rooms"};function _5(e,t,n,s,a,i){const o=mt("rooms-search"),r=mt("loader"),f=mt("room-content");return oa((me(),xe("div",{class:Mt(["vac-rooms-container",{"vac-rooms-container-full":n.isMobile,"vac-app-border-r":!n.isMobile}])},[We(e.$slots,"rooms-header"),We(e.$slots,"rooms-list-search",{},()=>[Ge(o,{rooms:n.rooms,"loading-rooms":n.loadingRooms,"text-messages":n.textMessages,"show-search":n.showSearch,"show-add-room":n.showAddRoom,onSearchRoom:i.searchRoom,onAddRoom:t[0]||(t[0]=u=>e.$emit("add-room"))},Wt({_:2},[Rt(e.$slots,(u,d)=>({name:d,fn:vt(c=>[We(e.$slots,d,qt(zt(c)))])}))]),1032,["rooms","loading-rooms","text-messages","show-search","show-add-room","onSearchRoom"])]),Ge(r,{show:n.loadingRooms,type:"rooms"},Wt({_:2},[Rt(e.$slots,(u,d)=>({name:d,fn:vt(c=>[We(e.$slots,d,qt(zt(c)))])}))]),1032,["show"]),!n.loadingRooms&&!n.rooms.length?(me(),xe("div",v5,[We(e.$slots,"rooms-empty",{},()=>[ra(yt(n.textMessages.ROOMS_EMPTY),1)])])):qe("",!0),n.loadingRooms?qe("",!0):(me(),xe("div",h5,[(me(!0),xe(Lt,null,Rt(a.filteredRooms,u=>(me(),xe("div",{id:u.roomId,key:u.roomId,class:Mt(["vac-room-item",{"vac-room-selected":a.selectedRoomId===u.roomId}]),onClick:d=>i.openRoom(u)},[Ge(f,{"current-user-id":n.currentUserId,room:u,"text-formatting":n.textFormatting,"link-options":n.linkOptions,"text-messages":n.textMessages,"room-actions":n.roomActions,onRoomActionHandler:t[1]||(t[1]=d=>e.$emit("room-action-handler",d))},Wt({_:2},[Rt(e.$slots,(d,c)=>({name:c,fn:vt(l=>[We(e.$slots,c,qt(zt(l)))])}))]),1032,["current-user-id","room","text-formatting","link-options","text-messages","room-actions"])],10,g5))),128)),Ge(vn,{name:"vac-fade-message"},{default:vt(()=>[n.rooms.length&&!n.loadingRooms?(me(),xe("div",p5,[Ge(r,{show:a.showLoader,infinite:!0,type:"infinite-rooms"},Wt({_:2},[Rt(e.$slots,(u,d)=>({name:d,fn:vt(c=>[We(e.$slots,d,qt(zt(c)))])}))]),1032,["show"])])):qe("",!0)]),_:3})]))],2)),[[_l,n.showRoomsList]])}var b5=Jt(m5,[["render",_5]]);const y5={name:"RoomHeader",components:{SvgIcon:An},directives:{clickOutside:wl},props:{currentUserId:{type:[String,Number],required:!0},textMessages:{type:Object,required:!0},singleRoom:{type:Boolean,required:!0},showRoomsList:{type:Boolean,required:!0},isMobile:{type:Boolean,required:!0},roomInfoEnabled:{type:Boolean,required:!0},menuActions:{type:Array,required:!0},room:{type:Object,required:!0},messageSelectionEnabled:{type:Boolean,required:!0},messageSelectionActions:{type:Array,required:!0},selectedMessagesTotal:{type:Number,required:!0}},emits:["toggle-rooms-list","room-info","menu-action-handler","cancel-message-selection","message-selection-action-handler"],data(){return{menuOpened:!1,messageSelectionAnimationEnded:!0}},computed:{typingUsers(){return ih(this.room,this.currentUserId,this.textMessages)},userStatus(){if(!this.room.users||this.room.users.length!==2)return;const e=this.room.users.find(n=>n._id!==this.currentUserId);if(!e?.status)return;let t="";return e.status.state==="online"?t=this.textMessages.IS_ONLINE:e.status.lastChanged&&(t=this.textMessages.LAST_SEEN+e.status.lastChanged),t}},watch:{messageSelectionEnabled(e){e?this.messageSelectionAnimationEnded=!1:setTimeout(()=>{this.messageSelectionAnimationEnded=!0},300)}},methods:{menuActionHandler(e){this.closeMenu(),this.$emit("menu-action-handler",e)},closeMenu(){this.menuOpened=!1},messageSelectionActionHandler(e){this.$emit("message-selection-action-handler",e)}}},w5={class:"vac-room-header vac-app-border-b"},k5={class:"vac-room-wrapper"},S5={key:0,class:"vac-room-selection"},C5=["id"],A5=["onClick"],T5={class:"vac-selection-button-count"},x5={class:"vac-text-ellipsis"},E5={class:"vac-room-name vac-text-ellipsis"},R5={key:0,class:"vac-room-info vac-text-ellipsis"},M5={key:1,class:"vac-room-info vac-text-ellipsis"},I5={key:0,class:"vac-menu-options"},B5={class:"vac-menu-list"},L5=["onClick"];function O5(e,t,n,s,a,i){const o=mt("svg-icon"),r=hl("click-outside");return me(),xe("div",w5,[We(e.$slots,"room-header",{},()=>[De("div",k5,[Ge(vn,{name:"vac-slide-up"},{default:vt(()=>[n.messageSelectionEnabled?(me(),xe("div",S5,[(me(!0),xe(Lt,null,Rt(n.messageSelectionActions,f=>(me(),xe("div",{id:f.name,key:f.name},[De("div",{class:"vac-selection-button",onClick:u=>i.messageSelectionActionHandler(f)},[ra(yt(f.title)+" ",1),De("span",T5,yt(n.selectedMessagesTotal),1)],8,A5)],8,C5))),128)),De("div",{class:"vac-selection-cancel vac-item-clickable",onClick:t[0]||(t[0]=f=>e.$emit("cancel-message-selection"))},yt(n.textMessages.CANCEL_SELECT_MESSAGE),1)])):qe("",!0)]),_:1}),!n.messageSelectionEnabled&&a.messageSelectionAnimationEnded?(me(),xe(Lt,{key:0},[n.singleRoom?qe("",!0):(me(),xe("div",{key:0,class:Mt(["vac-svg-button vac-toggle-button",{"vac-rotate-icon-init":!n.isMobile,"vac-rotate-icon":!n.showRoomsList&&!n.isMobile}]),onClick:t[1]||(t[1]=f=>e.$emit("toggle-rooms-list"))},[We(e.$slots,"toggle-icon",{},()=>[Ge(o,{name:"toggle"})])],2)),De("div",{class:Mt(["vac-info-wrapper",{"vac-item-clickable":n.roomInfoEnabled}]),onClick:t[2]||(t[2]=f=>e.$emit("room-info"))},[We(e.$slots,"room-header-avatar",{},()=>[n.room.avatar?(me(),xe("div",{key:0,class:"vac-avatar",style:nn({"background-image":`url('${n.room.avatar}')`})},null,4)):qe("",!0)]),We(e.$slots,"room-header-info",{},()=>[De("div",x5,[De("div",E5,yt(n.room.roomName),1),i.typingUsers?(me(),xe("div",R5,yt(i.typingUsers),1)):(me(),xe("div",M5,yt(i.userStatus),1))])])],2),n.room.roomId?We(e.$slots,"room-options",{key:1},()=>[n.menuActions.length?(me(),xe("div",{key:0,class:"vac-svg-button vac-room-options",onClick:t[3]||(t[3]=f=>a.menuOpened=!a.menuOpened)},[We(e.$slots,"menu-icon",{},()=>[Ge(o,{name:"menu"})])])):qe("",!0),n.menuActions.length?(me(),Ht(vn,{key:1,name:"vac-slide-left"},{default:vt(()=>[a.menuOpened?oa((me(),xe("div",I5,[De("div",B5,[(me(!0),xe(Lt,null,Rt(n.menuActions,f=>(me(),xe("div",{key:f.name},[De("div",{class:"vac-menu-item",onClick:u=>i.menuActionHandler(f)},yt(f.title),9,L5)]))),128))])])),[[r,i.closeMenu]]):qe("",!0)]),_:1})):qe("",!0)]):qe("",!0)],64)):qe("",!0)])])])}var P5=Jt(y5,[["render",O5]]);function ur(e){if(typeof e!="string"||!e)throw new Error("expected a non-empty string, got: "+e)}function ic(e){if(typeof e!="number")throw new Error("expected a number, got: "+e)}const $5=1,F5=1,mi="emoji",Pi="keyvalue",ad="favorites",D5="tokens",oh="tokens",V5="unicode",rh="count",N5="group",j5="order",lh="group-order",tu="eTag",qr="url",zf="skinTone",Hi="readonly",id="readwrite",ch="skinUnicodes",H5="skinUnicodes",z5="https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json",U5="en";function q5(e,t){const n=new Set,s=[];for(const a of e){const i=t(a);n.has(i)||(n.add(i),s.push(a))}return s}function Uf(e){return q5(e,t=>t.unicode)}function W5(e){function t(n,s,a){const i=s?e.createObjectStore(n,{keyPath:s}):e.createObjectStore(n);if(a)for(const[o,[r,f]]of Object.entries(a))i.createIndex(o,r,{multiEntry:f});return i}t(Pi),t(mi,V5,{[oh]:[D5,!0],[lh]:[[N5,j5]],[ch]:[H5,!0]}),t(ad,void 0,{[rh]:[""]})}const nu={},Ir={},Wr={};function uh(e,t,n){n.onerror=()=>t(n.error),n.onblocked=()=>t(new Error("IDB blocked")),n.onsuccess=()=>e(n.result)}async function Y5(e){const t=await new Promise((n,s)=>{const a=indexedDB.open(e,$5);nu[e]=a,a.onupgradeneeded=i=>{i.oldVersion<F5&&W5(a.result)},uh(n,s,a)});return t.onclose=()=>od(e),t}function K5(e){return Ir[e]||(Ir[e]=Y5(e)),Ir[e]}function ha(e,t,n,s){return new Promise((a,i)=>{const o=e.transaction(t,n,{durability:"relaxed"}),r=typeof t=="string"?o.objectStore(t):t.map(u=>o.objectStore(u));let f;s(r,o,u=>{f=u}),o.oncomplete=()=>a(f),o.onerror=()=>i(o.error)})}function od(e){const t=nu[e],n=t&&t.result;if(n){n.close();const s=Wr[e];if(s)for(const a of s)a()}delete nu[e],delete Ir[e],delete Wr[e]}function G5(e){return new Promise((t,n)=>{od(e);const s=indexedDB.deleteDatabase(e);uh(t,n,s)})}function X5(e,t){let n=Wr[e];n||(n=Wr[e]=[]),n.push(t)}const Z5=new Set([":D","XD",":'D","O:)",":X",":P",";P","XP",":L",":Z",":j","8D","XO","8)",":B",":O",":S",":'o","Dx","X(","D:",":C",">0)",":3","</3","<3","\\M/",":E","8#"]);function Mi(e){return e.split(/[\s_]+/).map(t=>!t.match(/\w/)||Z5.has(t)?t.toLowerCase():t.replace(/[)(:,]/g,"").replace(//g,"'").toLowerCase()).filter(Boolean)}const Q5=2;function dh(e){return e.filter(Boolean).map(t=>t.toLowerCase()).filter(t=>t.length>=Q5)}function J5(e){return e.map(({annotation:n,emoticon:s,group:a,order:i,shortcodes:o,skins:r,tags:f,emoji:u,version:d})=>{const c=[...new Set(dh([...(o||[]).map(Mi).flat(),...f.map(Mi).flat(),...Mi(n),s]))].sort(),l={annotation:n,group:a,order:i,tags:f,tokens:c,unicode:u,version:d};if(s&&(l.emoticon=s),o&&(l.shortcodes=o),r){l.skinTones=[],l.skinUnicodes=[],l.skinVersions=[];for(const{tone:m,emoji:v,version:C}of r)l.skinTones.push(m),l.skinUnicodes.push(v),l.skinVersions.push(C)}return l})}function fh(e,t,n,s){e[t](n).onsuccess=a=>s&&s(a.target.result)}function ui(e,t,n){fh(e,"get",t,n)}function mh(e,t,n){fh(e,"getAll",t,n)}function rd(e){e.commit&&e.commit()}function ew(e,t){let n=e[0];for(let s=1;s<e.length;s++){const a=e[s];t(n)>t(a)&&(n=a)}return n}function vh(e,t){const n=ew(e,a=>a.length),s=[];for(const a of n)e.some(i=>i.findIndex(o=>t(o)===t(a))===-1)||s.push(a);return s}async function tw(e){return!await ld(e,Pi,qr)}async function nw(e,t,n){const[s,a]=await Promise.all([tu,qr].map(i=>ld(e,Pi,i)));return s===n&&a===t}async function sw(e,t){return ha(e,mi,Hi,(s,a,i)=>{let o;const r=()=>{s.getAll(o&&IDBKeyRange.lowerBound(o,!0),50).onsuccess=f=>{const u=f.target.result;for(const d of u)if(o=d.unicode,t(d))return i(d);if(u.length<50)return i();r()}};r()})}async function hh(e,t,n,s){try{const a=J5(t);await ha(e,[mi,Pi],id,([i,o],r)=>{let f,u,d=0;function c(){++d===2&&l()}function l(){if(!(f===s&&u===n)){i.clear();for(const m of a)i.put(m);o.put(s,tu),o.put(n,qr),rd(r)}}ui(o,tu,m=>{f=m,c()}),ui(o,qr,m=>{u=m,c()})})}finally{}}async function aw(e,t){return ha(e,mi,Hi,(n,s,a)=>{const i=IDBKeyRange.bound([t,0],[t+1,0],!1,!0);mh(n.index(lh),i,a)})}async function gh(e,t){const n=dh(Mi(t));return n.length?ha(e,mi,Hi,(s,a,i)=>{const o=[],r=()=>{o.length===n.length&&f()},f=()=>{const u=vh(o,d=>d.unicode);i(u.sort((d,c)=>d.order<c.order?-1:1))};for(let u=0;u<n.length;u++){const d=n[u],c=u===n.length-1?IDBKeyRange.bound(d,d+"",!1,!0):IDBKeyRange.only(d);mh(s.index(oh),c,l=>{o.push(l),r()})}}):[]}async function iw(e,t){const n=await gh(e,t);return n.length?n.filter(s=>(s.shortcodes||[]).map(i=>i.toLowerCase()).includes(t.toLowerCase()))[0]||null:await sw(e,a=>(a.shortcodes||[]).includes(t.toLowerCase()))||null}async function ow(e,t){return ha(e,mi,Hi,(n,s,a)=>ui(n,t,i=>{if(i)return a(i);ui(n.index(ch),t,o=>a(o||null))}))}function ld(e,t,n){return ha(e,t,Hi,(s,a,i)=>ui(s,n,i))}function rw(e,t,n,s){return ha(e,t,id,(a,i)=>{a.put(s,n),rd(i)})}function lw(e,t){return ha(e,ad,id,(n,s)=>ui(n,t,a=>{n.put((a||0)+1,t),rd(s)}))}function cw(e,t,n){return n===0?[]:ha(e,[ad,mi],Hi,([s,a],i,o)=>{const r=[];s.index(rh).openCursor(void 0,"prev").onsuccess=f=>{const u=f.target.result;if(!u)return o(r);function d(m){if(r.push(m),r.length===n)return o(r);u.continue()}const c=u.primaryKey,l=t.byName(c);if(l)return d(l);ui(a,c,m=>{if(m)return d(m);u.continue()})}})}const dr="";function uw(e,t){const n=new Map;for(const a of e){const i=t(a);for(const o of i){let r=n;for(let u=0;u<o.length;u++){const d=o.charAt(u);let c=r.get(d);c||(c=new Map,r.set(d,c)),r=c}let f=r.get(dr);f||(f=[],r.set(dr,f)),f.push(a)}}return(a,i)=>{let o=n;for(let u=0;u<a.length;u++){const d=a.charAt(u),c=o.get(d);if(c)o=c;else return[]}if(i)return o.get(dr)||[];const r=[],f=[o];for(;f.length;){const d=[...f.shift().entries()].sort((c,l)=>c[0]<l[0]?-1:1);for(const[c,l]of d)c===dr?r.push(...l):f.push(l)}return r}}const dw=["name","url"];function fw(e){const t=e&&Array.isArray(e),n=t&&e.length&&(!e[0]||dw.some(s=>!(s in e[0])));if(!t||n)throw new Error("Custom emojis are in the wrong format")}function qf(e){fw(e);const t=(l,m)=>l.name.toLowerCase()<m.name.toLowerCase()?-1:1,n=e.sort(t),a=uw(e,l=>[...new Set((l.shortcodes||[]).map(m=>Mi(m)).flat())]),i=l=>a(l,!0),o=l=>a(l,!1),r=l=>{const m=Mi(l),v=m.map((C,b)=>(b<m.length-1?i:o)(C));return vh(v,C=>C.name).sort(t)},f=new Map,u=new Map;for(const l of e){u.set(l.name.toLowerCase(),l);for(const m of l.shortcodes||[])f.set(m.toLowerCase(),l)}return{all:n,search:r,byShortcode:l=>f.get(l.toLowerCase()),byName:l=>u.get(l.toLowerCase())}}function Zi(e){if(!e)return e;if(delete e.tokens,e.skinTones){const t=e.skinTones.length;e.skins=Array(t);for(let n=0;n<t;n++)e.skins[n]={tone:e.skinTones[n],unicode:e.skinUnicodes[n],version:e.skinVersions[n]};delete e.skinTones,delete e.skinUnicodes,delete e.skinVersions}return e}function ph(e){e||console.warn("emoji-picker-element is more efficient if the dataSource server exposes an ETag header.")}const mw=["annotation","emoji","group","order","tags","version"];function vw(e){if(!e||!Array.isArray(e)||!e[0]||typeof e[0]!="object"||mw.some(t=>!(t in e[0])))throw new Error("Emoji data is in the wrong format")}function _h(e,t){if(Math.floor(e.status/100)!==2)throw new Error("Failed to fetch: "+t+":  "+e.status)}async function hw(e){const t=await fetch(e,{method:"HEAD"});_h(t,e);const n=t.headers.get("etag");return ph(n),n}async function su(e){const t=await fetch(e);_h(t,e);const n=t.headers.get("etag");ph(n);const s=await t.json();return vw(s),[n,s]}function gw(e){for(var t="",n=new Uint8Array(e),s=n.byteLength,a=-1;++a<s;)t+=String.fromCharCode(n[a]);return t}function pw(e){for(var t=e.length,n=new ArrayBuffer(t),s=new Uint8Array(n),a=-1;++a<t;)s[a]=e.charCodeAt(a);return n}async function bh(e){const t=JSON.stringify(e),n=pw(t),s=await crypto.subtle.digest("SHA-1",n),a=gw(s);return btoa(a)}async function _w(e,t){let n,s=await hw(t);if(!s){const a=await su(t);s=a[0],n=a[1],s||(s=await bh(n))}await nw(e,t,s)||(n||(n=(await su(t))[1]),await hh(e,n,t,s))}async function bw(e,t){let[n,s]=await su(t);n||(n=await bh(s)),await hh(e,s,t,n)}class yh{constructor({dataSource:t=z5,locale:n=U5,customEmoji:s=[]}={}){this.dataSource=t,this.locale=n,this._dbName=`emoji-picker-element-${this.locale}`,this._db=void 0,this._lazyUpdate=void 0,this._custom=qf(s),this._clear=this._clear.bind(this),this._ready=this._init()}async _init(){const t=this._db=await K5(this._dbName);X5(this._dbName,this._clear);const n=this.dataSource;await tw(t)?await bw(t,n):this._lazyUpdate=_w(t,n)}async ready(){const t=async()=>(this._ready||(this._ready=this._init()),this._ready);await t(),this._db||await t()}async getEmojiByGroup(t){return ic(t),await this.ready(),Uf(await aw(this._db,t)).map(Zi)}async getEmojiBySearchQuery(t){ur(t),await this.ready();const n=this._custom.search(t),s=Uf(await gh(this._db,t)).map(Zi);return[...n,...s]}async getEmojiByShortcode(t){ur(t),await this.ready();const n=this._custom.byShortcode(t);return n||Zi(await iw(this._db,t))}async getEmojiByUnicodeOrName(t){ur(t),await this.ready();const n=this._custom.byName(t);return n||Zi(await ow(this._db,t))}async getPreferredSkinTone(){return await this.ready(),await ld(this._db,Pi,zf)||0}async setPreferredSkinTone(t){return ic(t),await this.ready(),rw(this._db,Pi,zf,t)}async incrementFavoriteEmojiCount(t){return ur(t),await this.ready(),lw(this._db,t)}async getTopFavoriteEmoji(t){return ic(t),await this.ready(),(await cw(this._db,this._custom,t)).map(Zi)}set customEmoji(t){this._custom=qf(t)}get customEmoji(){return this._custom.all}async _shutdown(){await this.ready();try{await this._lazyUpdate}catch{}}_clear(){this._db=this._ready=this._lazyUpdate=void 0}async close(){await this._shutdown(),await od(this._dbName)}async delete(){await this._shutdown(),await G5(this._dbName)}}function Eo(){}function wh(e){return e()}function Wf(){return Object.create(null)}function zo(e){e.forEach(wh)}function kh(e){return typeof e=="function"}function yw(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let fr;function Yr(e,t){return fr||(fr=document.createElement("a")),fr.href=t,e===fr.href}function ww(e){return Object.keys(e).length===0}function kw(e){return e&&kh(e.destroy)?e.destroy:Eo}function Gt(e,t){e.appendChild(t)}function Cs(e,t,n){e.insertBefore(t,n||null)}function As(e){e.parentNode.removeChild(e)}function Ut(e){return document.createElement(e)}function Ds(e){return document.createTextNode(e)}function ps(e,t,n,s){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n,s)}function be(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Vs(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function Yf(e,t){e.value=t??""}function ya(e,t,n,s){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,"")}let cd;function po(e){cd=e}const oo=[],Ai=[],Br=[],Kf=[],Sh=Promise.resolve();let au=!1;function Ch(){au||(au=!0,Sh.then(Ah))}function Sw(){return Ch(),Sh}function iu(e){Br.push(e)}const oc=new Set;let mr=0;function Ah(){const e=cd;do{for(;mr<oo.length;){const t=oo[mr];mr++,po(t),Cw(t.$$)}for(po(null),oo.length=0,mr=0;Ai.length;)Ai.pop()();for(let t=0;t<Br.length;t+=1){const n=Br[t];oc.has(n)||(oc.add(n),n())}Br.length=0}while(oo.length);for(;Kf.length;)Kf.pop()();au=!1,oc.clear(),po(e)}function Cw(e){if(e.fragment!==null){e.update(),zo(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(iu)}}const Aw=new Set;function Tw(e,t){e&&e.i&&(Aw.delete(e),e.i(t))}const xw=typeof window<"u"?window:globalThis;function ro(e,t){e.d(1),t.delete(e.key)}function lo(e,t,n,s,a,i,o,r,f,u,d,c){let l=e.length,m=i.length,v=l;const C={};for(;v--;)C[e[v].key]=v;const b=[],_=new Map,g=new Map;for(v=m;v--;){const L=c(a,i,v),I=n(L);let T=o.get(I);T?T.p(L,t):(T=u(I,L),T.c()),_.set(I,b[v]=T),I in C&&g.set(I,Math.abs(v-C[I]))}const R=new Set,P=new Set;function S(L){Tw(L,1),L.m(r,d),o.set(L.key,L),d=L.first,m--}for(;l&&m;){const L=b[m-1],I=e[l-1],T=L.key,E=I.key;L===I?(d=L.first,l--,m--):_.has(E)?!o.has(T)||R.has(T)?S(L):P.has(E)?l--:g.get(T)>g.get(E)?(P.add(T),S(L)):(R.add(E),l--):(f(I,o),l--)}for(;l--;){const L=e[l];_.has(L.key)||f(L,o)}for(;m;)S(b[m-1]);return b}function Ew(e,t,n,s){const{fragment:a,on_mount:i,on_destroy:o,after_update:r}=e.$$;a&&a.m(t,n),iu(()=>{const f=i.map(wh).filter(kh);o?o.push(...f):zo(f),e.$$.on_mount=[]}),r.forEach(iu)}function Rw(e,t){const n=e.$$;n.fragment!==null&&(zo(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Mw(e,t){e.$$.dirty[0]===-1&&(oo.push(e),Ch(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Iw(e,t,n,s,a,i,o,r=[-1]){const f=cd;po(e);const u=e.$$={fragment:null,ctx:null,props:i,update:Eo,not_equal:a,bound:Wf(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:[]),callbacks:Wf(),dirty:r,skip_bound:!1,root:t.target||f.$$.root};let d=!1;u.ctx=n?n(e,t.props||{},(c,l,...m)=>{const v=m.length?m[0]:l;return u.ctx&&a(u.ctx[c],u.ctx[c]=v)&&(!u.skip_bound&&u.bound[c]&&u.bound[c](v),d&&Mw(e,c)),l}):[],u.update(),d=!0,zo(u.before_update),u.fragment=s?s(u.ctx):!1,t.target&&(u.fragment&&u.fragment.c(),Ew(e,t.target,void 0),Ah()),po(f)}class Bw{$destroy(){Rw(this,1),this.$destroy=Eo}$on(t,n){const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(n),()=>{const a=s.indexOf(n);a!==-1&&s.splice(a,1)}}$set(t){this.$$set&&!ww(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Th=[[-1,"","custom"],[0,"","smileys-emotion"],[1,"","people-body"],[3,"","animals-nature"],[4,"","food-drink"],[5,"","travel-places"],[6,"","activities"],[7,"","objects"],[8,"","symbols"],[9,"","flags"]].map(([e,t,n])=>({id:e,emoji:t,name:n})),vr=Th.slice(1),Lw=Th[0],Ow=2,Gf=6,xh=typeof requestIdleCallback=="function"?requestIdleCallback:setTimeout;function Xf(e){return e.unicode.includes("")}const Pw={"":14,"":13.1,"":12.1,"":11,"":5,"":4,"":3,"":2,"":1,"":.7,"":.6},$w=1e3,Fw="",Dw=8,Vw=["","","","","","","","","","","","","",""],Eh='"Twemoji Mozilla","Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji","EmojiOne Color","Android Emoji",sans-serif',Nw=(e,t)=>e<t?-1:e>t?1:0,Zf=(e,t)=>{const n=document.createElement("canvas");n.width=n.height=1;const s=n.getContext("2d");return s.textBaseline="top",s.font=`100px ${Eh}`,s.fillStyle=t,s.scale(.01,.01),s.fillText(e,0,0),s.getImageData(0,0,1,1).data},jw=(e,t)=>{const n=[...e].join(","),s=[...t].join(",");return n===s&&!n.startsWith("0,0,0,")};function Hw(e){const t=Zf(e,"#000"),n=Zf(e,"#fff");return t&&n&&jw(t,n)}function zw(){const e=Object.entries(Pw);try{for(const[t,n]of e)if(Hw(t))return n}catch{}finally{}return e[0][1]}const rc=new Promise(e=>xh(()=>e(zw()))),ou=new Map,Uw="",qw="\uD83C",Ww="",Yw=127995,Kw=57339;function Gw(e,t){if(t===0)return e;const n=e.indexOf(Ww);return n!==-1?e.substring(0,n)+String.fromCodePoint(Yw+t-1)+e.substring(n):(e.endsWith(Uw)&&(e=e.substring(0,e.length-1)),e+qw+String.fromCodePoint(Kw+t-1))}function wa(e){e.preventDefault(),e.stopPropagation()}function lc(e,t,n){return t+=e?-1:1,t<0?t=n.length-1:t>=n.length&&(t=0),t}function Rh(e,t){const n=new Set,s=[];for(const a of e){const i=t(a);n.has(i)||(n.add(i),s.push(a))}return s}function Xw(e,t){const n=s=>{const a={};for(const i of s)typeof i.tone=="number"&&i.version<=t&&(a[i.tone]=i.unicode);return a};return e.map(({unicode:s,skins:a,shortcodes:i,url:o,name:r,category:f})=>({unicode:s,name:r,shortcodes:i,url:o,category:f,id:s||r,skins:a&&n(a),title:(i||[]).join(", ")}))}const Lr=requestAnimationFrame;let Zw=typeof ResizeObserver=="function";function Qw(e,t){let n;return Zw?(n=new ResizeObserver(s=>t(s[0].contentRect.width)),n.observe(e)):Lr(()=>t(e.getBoundingClientRect().width)),{destroy(){n&&n.disconnect()}}}function Qf(e){{const t=document.createRange();return t.selectNode(e.firstChild),t.getBoundingClientRect().width}}let cc;function Jw(e,t,n){for(const s of e){const a=n(s),i=Qf(a);typeof cc>"u"&&(cc=Qf(t));const o=i/1.8<cc;ou.set(s.unicode,o)}}function ek(e){return Rh(e,t=>t)}const{Map:co}=xw;function Jf(e,t,n){const s=e.slice();return s[63]=t[n],s[65]=n,s}function em(e,t,n){const s=e.slice();return s[66]=t[n],s[65]=n,s}function tm(e,t,n){const s=e.slice();return s[63]=t[n],s[65]=n,s}function nm(e,t,n){const s=e.slice();return s[69]=t[n],s}function sm(e,t,n){const s=e.slice();return s[72]=t[n],s[65]=n,s}function am(e,t){let n,s=t[72]+"",a,i,o,r,f,u;return{key:e,first:null,c(){n=Ut("div"),a=Ds(s),be(n,"id",i="skintone-"+t[65]),be(n,"class",o="emoji hide-focus "+(t[65]===t[20]?"active":"")),be(n,"aria-selected",r=t[65]===t[20]),be(n,"role","option"),be(n,"title",f=t[0].skinTones[t[65]]),be(n,"tabindex","-1"),be(n,"aria-label",u=t[0].skinTones[t[65]]),this.first=n},m(d,c){Cs(d,n,c),Gt(n,a)},p(d,c){t=d,c[0]&512&&s!==(s=t[72]+"")&&Vs(a,s),c[0]&512&&i!==(i="skintone-"+t[65])&&be(n,"id",i),c[0]&1049088&&o!==(o="emoji hide-focus "+(t[65]===t[20]?"active":""))&&be(n,"class",o),c[0]&1049088&&r!==(r=t[65]===t[20])&&be(n,"aria-selected",r),c[0]&513&&f!==(f=t[0].skinTones[t[65]])&&be(n,"title",f),c[0]&513&&u!==(u=t[0].skinTones[t[65]])&&be(n,"aria-label",u)},d(d){d&&As(n)}}}function im(e,t){let n,s,a=t[69].emoji+"",i,o,r,f,u,d,c;function l(){return t[49](t[69])}return{key:e,first:null,c(){n=Ut("button"),s=Ut("div"),i=Ds(a),be(s,"class","nav-emoji emoji"),be(n,"role","tab"),be(n,"class","nav-button"),be(n,"aria-controls",o="tab-"+t[69].id),be(n,"aria-label",r=t[0].categories[t[69].name]),be(n,"aria-selected",f=!t[4]&&t[13].id===t[69].id),be(n,"title",u=t[0].categories[t[69].name]),this.first=n},m(m,v){Cs(m,n,v),Gt(n,s),Gt(s,i),d||(c=ps(n,"click",l),d=!0)},p(m,v){t=m,v[0]&4096&&a!==(a=t[69].emoji+"")&&Vs(i,a),v[0]&4096&&o!==(o="tab-"+t[69].id)&&be(n,"aria-controls",o),v[0]&4097&&r!==(r=t[0].categories[t[69].name])&&be(n,"aria-label",r),v[0]&12304&&f!==(f=!t[4]&&t[13].id===t[69].id)&&be(n,"aria-selected",f),v[0]&4097&&u!==(u=t[0].categories[t[69].name])&&be(n,"title",u)},d(m){m&&As(n),d=!1,c()}}}function tk(e){let t,n;return{c(){t=Ut("img"),be(t,"class","custom-emoji"),Yr(t.src,n=e[63].url)||be(t,"src",n),be(t,"alt",""),be(t,"loading","lazy")},m(s,a){Cs(s,t,a)},p(s,a){a[0]&32768&&!Yr(t.src,n=s[63].url)&&be(t,"src",n)},d(s){s&&As(t)}}}function nk(e){let t=e[27](e[63],e[8])+"",n;return{c(){n=Ds(t)},m(s,a){Cs(s,n,a)},p(s,a){a[0]&33024&&t!==(t=s[27](s[63],s[8])+"")&&Vs(n,t)},d(s){s&&As(n)}}}function om(e,t){let n,s,a,i,o,r,f;function u(l,m){return l[63].unicode?nk:tk}let d=u(t),c=d(t);return{key:e,first:null,c(){n=Ut("button"),c.c(),be(n,"role",s=t[4]?"option":"menuitem"),be(n,"aria-selected",a=t[4]?t[65]==t[5]:""),be(n,"aria-label",i=t[28](t[63],t[8])),be(n,"title",o=t[63].title),be(n,"class",r="emoji "+(t[4]&&t[65]===t[5]?"active":"")),be(n,"id",f="emo-"+t[63].id),this.first=n},m(l,m){Cs(l,n,m),c.m(n,null)},p(l,m){t=l,d===(d=u(t))&&c?c.p(t,m):(c.d(1),c=d(t),c&&(c.c(),c.m(n,null))),m[0]&16&&s!==(s=t[4]?"option":"menuitem")&&be(n,"role",s),m[0]&32816&&a!==(a=t[4]?t[65]==t[5]:"")&&be(n,"aria-selected",a),m[0]&33024&&i!==(i=t[28](t[63],t[8]))&&be(n,"aria-label",i),m[0]&32768&&o!==(o=t[63].title)&&be(n,"title",o),m[0]&32816&&r!==(r="emoji "+(t[4]&&t[65]===t[5]?"active":""))&&be(n,"class",r),m[0]&32768&&f!==(f="emo-"+t[63].id)&&be(n,"id",f)},d(l){l&&As(n),c.d()}}}function rm(e,t){let n,s=(t[4]?t[0].searchResultsLabel:t[66].category?t[66].category:t[15].length>1?t[0].categories.custom:t[0].categories[t[13].name])+"",a,i,o,r,f=[],u=new co,d,c,l,m=t[66].emojis;const v=C=>C[63].id;for(let C=0;C<m.length;C+=1){let b=tm(t,m,C),_=v(b);u.set(_,f[C]=om(_,b))}return{key:e,first:null,c(){n=Ut("div"),a=Ds(s),r=Ut("div");for(let C=0;C<f.length;C+=1)f[C].c();be(n,"id",i="menu-label-"+t[65]),be(n,"class",o="category "+(t[15].length===1&&t[15][0].category===""?"gone":"")),be(n,"aria-hidden","true"),be(r,"class","emoji-menu"),be(r,"role",d=t[4]?"listbox":"menu"),be(r,"aria-labelledby",c="menu-label-"+t[65]),be(r,"id",l=t[4]?"search-results":""),this.first=n},m(C,b){Cs(C,n,b),Gt(n,a),Cs(C,r,b);for(let _=0;_<f.length;_+=1)f[_].m(r,null)},p(C,b){t=C,b[0]&40977&&s!==(s=(t[4]?t[0].searchResultsLabel:t[66].category?t[66].category:t[15].length>1?t[0].categories.custom:t[0].categories[t[13].name])+"")&&Vs(a,s),b[0]&32768&&i!==(i="menu-label-"+t[65])&&be(n,"id",i),b[0]&32768&&o!==(o="category "+(t[15].length===1&&t[15][0].category===""?"gone":""))&&be(n,"class",o),b[0]&402686256&&(m=t[66].emojis,f=lo(f,b,v,1,t,m,u,r,ro,om,null,tm)),b[0]&16&&d!==(d=t[4]?"listbox":"menu")&&be(r,"role",d),b[0]&32768&&c!==(c="menu-label-"+t[65])&&be(r,"aria-labelledby",c),b[0]&16&&l!==(l=t[4]?"search-results":"")&&be(r,"id",l)},d(C){C&&As(n),C&&As(r);for(let b=0;b<f.length;b+=1)f[b].d()}}}function sk(e){let t,n;return{c(){t=Ut("img"),be(t,"class","custom-emoji"),Yr(t.src,n=e[63].url)||be(t,"src",n),be(t,"alt",""),be(t,"loading","lazy")},m(s,a){Cs(s,t,a)},p(s,a){a[0]&1024&&!Yr(t.src,n=s[63].url)&&be(t,"src",n)},d(s){s&&As(t)}}}function ak(e){let t=e[27](e[63],e[8])+"",n;return{c(){n=Ds(t)},m(s,a){Cs(s,n,a)},p(s,a){a[0]&1280&&t!==(t=s[27](s[63],s[8])+"")&&Vs(n,t)},d(s){s&&As(n)}}}function lm(e,t){let n,s,a,i;function o(u,d){return u[63].unicode?ak:sk}let r=o(t),f=r(t);return{key:e,first:null,c(){n=Ut("button"),f.c(),be(n,"role","menuitem"),be(n,"aria-label",s=t[28](t[63],t[8])),be(n,"title",a=t[63].title),be(n,"class","emoji"),be(n,"id",i="fav-"+t[63].id),this.first=n},m(u,d){Cs(u,n,d),f.m(n,null)},p(u,d){t=u,r===(r=o(t))&&f?f.p(t,d):(f.d(1),f=r(t),f&&(f.c(),f.m(n,null))),d[0]&1280&&s!==(s=t[28](t[63],t[8]))&&be(n,"aria-label",s),d[0]&1024&&a!==(a=t[63].title)&&be(n,"title",a),d[0]&1024&&i!==(i="fav-"+t[63].id)&&be(n,"id",i)},d(u){u&&As(n),f.d()}}}function ik(e){let t,n,s,a,i,o,r,f,u,d=e[0].searchLabel+"",c,l,m=e[0].searchDescription+"",v,C,b,_,g,R,P,S=e[0].skinToneDescription+"",L,I,T=[],E=new co,y,A,w,k,M,x=[],F=new co,V,D,z,p,B,U,$,ee,re=[],G=new co,ae,X,he,we,Ie,K=[],te=new co,ve,Ce,Ae,Be,He,Fe,Ve=e[9];const Le=Te=>Te[72];for(let Te=0;Te<Ve.length;Te+=1){let Ne=sm(e,Ve,Te),pe=Le(Ne);E.set(pe,T[Te]=am(pe,Ne))}let et=e[12];const Ze=Te=>Te[69].id;for(let Te=0;Te<et.length;Te+=1){let Ne=nm(e,et,Te),pe=Ze(Ne);F.set(pe,x[Te]=im(pe,Ne))}let Xe=e[15];const at=Te=>Te[66].category;for(let Te=0;Te<Xe.length;Te+=1){let Ne=em(e,Xe,Te),pe=at(Ne);G.set(pe,re[Te]=rm(pe,Ne))}let lt=e[10];const gt=Te=>Te[63].id;for(let Te=0;Te<lt.length;Te+=1){let Ne=Jf(e,lt,Te),pe=gt(Ne);te.set(pe,K[Te]=lm(pe,Ne))}return{c(){t=Ut("section"),n=Ut("div"),s=Ut("div"),a=Ut("div"),i=Ut("input"),u=Ut("label"),c=Ds(d),l=Ut("span"),v=Ds(m),C=Ut("div"),b=Ut("button"),_=Ds(e[21]),P=Ut("span"),L=Ds(S),I=Ut("div");for(let Te=0;Te<T.length;Te+=1)T[Te].c();M=Ut("div");for(let Te=0;Te<x.length;Te+=1)x[Te].c();D=Ut("div"),z=Ut("div"),p=Ut("div"),B=Ds(e[18]),$=Ut("div"),ee=Ut("div");for(let Te=0;Te<re.length;Te+=1)re[Te].c();Ie=Ut("div");for(let Te=0;Te<K.length;Te+=1)K[Te].c();Ae=Ut("button"),Ae.textContent="",be(n,"class","pad-top"),be(i,"id","search"),be(i,"class","search"),be(i,"type","search"),be(i,"role","combobox"),be(i,"enterkeyhint","search"),be(i,"placeholder",o=e[0].searchLabel),be(i,"autocapitalize","none"),be(i,"autocomplete","off"),be(i,"spellcheck","true"),be(i,"aria-expanded",r=!!(e[4]&&e[1].length)),be(i,"aria-controls","search-results"),be(i,"aria-describedby","search-description"),be(i,"aria-autocomplete","list"),be(i,"aria-activedescendant",f=e[26]?`emo-${e[26]}`:""),be(u,"class","sr-only"),be(u,"for","search"),be(l,"id","search-description"),be(l,"class","sr-only"),be(a,"class","search-wrapper"),be(b,"id","skintone-button"),be(b,"class",g="emoji "+(e[6]?"hide-focus":"")),be(b,"aria-label",e[23]),be(b,"title",e[23]),be(b,"aria-describedby","skintone-description"),be(b,"aria-haspopup","listbox"),be(b,"aria-expanded",e[6]),be(b,"aria-controls","skintone-list"),be(C,"class",R="skintone-button-wrapper "+(e[19]?"expanded":"")),be(P,"id","skintone-description"),be(P,"class","sr-only"),be(I,"id","skintone-list"),be(I,"class",y="skintone-list "+(e[6]?"":"hidden no-animate")),ya(I,"transform","translateY("+(e[6]?0:"calc(-1 * var(--num-skintones) * var(--total-emoji-size))")+")"),be(I,"role","listbox"),be(I,"aria-label",A=e[0].skinTonesLabel),be(I,"aria-activedescendant",w="skintone-"+e[20]),be(I,"aria-hidden",k=!e[6]),be(s,"class","search-row"),be(M,"class","nav"),be(M,"role","tablist"),ya(M,"grid-template-columns","repeat("+e[12].length+", 1fr)"),be(M,"aria-label",V=e[0].categoriesLabel),be(z,"class","indicator"),ya(z,"transform","translateX("+(e[24]?-1:1)*e[11]*100+"%)"),be(D,"class","indicator-wrapper"),be(p,"class",U="message "+(e[18]?"":"gone")),be(p,"role","alert"),be(p,"aria-live","polite"),be($,"class",ae="tabpanel "+(!e[14]||e[18]?"gone":"")),be($,"role",X=e[4]?"region":"tabpanel"),be($,"aria-label",he=e[4]?e[0].searchResultsLabel:e[0].categories[e[13].name]),be($,"id",we=e[4]?"":`tab-${e[13].id}`),be($,"tabindex","0"),be(Ie,"class",ve="favorites emoji-menu "+(e[18]?"gone":"")),be(Ie,"role","menu"),be(Ie,"aria-label",Ce=e[0].favoritesLabel),ya(Ie,"padding-inline-end",e[25]+"px"),be(Ae,"aria-hidden","true"),be(Ae,"tabindex","-1"),be(Ae,"class","abs-pos hidden emoji"),be(t,"class","picker"),be(t,"aria-label",Be=e[0].regionLabel),be(t,"style",e[22])},m(Te,Ne){Cs(Te,t,Ne),Gt(t,n),Gt(t,s),Gt(s,a),Gt(a,i),Yf(i,e[2]),Gt(a,u),Gt(u,c),Gt(a,l),Gt(l,v),Gt(s,C),Gt(C,b),Gt(b,_),Gt(s,P),Gt(P,L),Gt(s,I);for(let pe=0;pe<T.length;pe+=1)T[pe].m(I,null);e[48](I),Gt(t,M);for(let pe=0;pe<x.length;pe+=1)x[pe].m(M,null);Gt(t,D),Gt(D,z),Gt(t,p),Gt(p,B),Gt(t,$),Gt($,ee);for(let pe=0;pe<re.length;pe+=1)re[pe].m(ee,null);e[50]($),Gt(t,Ie);for(let pe=0;pe<K.length;pe+=1)K[pe].m(Ie,null);Gt(t,Ae),e[51](Ae),e[52](t),He||(Fe=[ps(i,"input",e[47]),ps(i,"keydown",e[30]),ps(b,"click",e[35]),ps(I,"focusout",e[38]),ps(I,"click",e[34]),ps(I,"keydown",e[36]),ps(I,"keyup",e[37]),ps(M,"keydown",e[32]),kw(e[29].call(null,ee)),ps($,"click",e[33]),ps(Ie,"click",e[33])],He=!0)},p(Te,Ne){Ne[0]&1&&o!==(o=Te[0].searchLabel)&&be(i,"placeholder",o),Ne[0]&18&&r!==(r=!!(Te[4]&&Te[1].length))&&be(i,"aria-expanded",r),Ne[0]&67108864&&f!==(f=Te[26]?`emo-${Te[26]}`:"")&&be(i,"aria-activedescendant",f),Ne[0]&4&&Yf(i,Te[2]),Ne[0]&1&&d!==(d=Te[0].searchLabel+"")&&Vs(c,d),Ne[0]&1&&m!==(m=Te[0].searchDescription+"")&&Vs(v,m),Ne[0]&2097152&&Vs(_,Te[21]),Ne[0]&64&&g!==(g="emoji "+(Te[6]?"hide-focus":""))&&be(b,"class",g),Ne[0]&8388608&&be(b,"aria-label",Te[23]),Ne[0]&8388608&&be(b,"title",Te[23]),Ne[0]&64&&be(b,"aria-expanded",Te[6]),Ne[0]&524288&&R!==(R="skintone-button-wrapper "+(Te[19]?"expanded":""))&&be(C,"class",R),Ne[0]&1&&S!==(S=Te[0].skinToneDescription+"")&&Vs(L,S),Ne[0]&1049089&&(Ve=Te[9],T=lo(T,Ne,Le,1,Te,Ve,E,I,ro,am,null,sm)),Ne[0]&64&&y!==(y="skintone-list "+(Te[6]?"":"hidden no-animate"))&&be(I,"class",y),Ne[0]&64&&ya(I,"transform","translateY("+(Te[6]?0:"calc(-1 * var(--num-skintones) * var(--total-emoji-size))")+")"),Ne[0]&1&&A!==(A=Te[0].skinTonesLabel)&&be(I,"aria-label",A),Ne[0]&1048576&&w!==(w="skintone-"+Te[20])&&be(I,"aria-activedescendant",w),Ne[0]&64&&k!==(k=!Te[6])&&be(I,"aria-hidden",k),Ne[0]&12305|Ne[1]&1&&(et=Te[12],x=lo(x,Ne,Ze,1,Te,et,F,M,ro,im,null,nm)),Ne[0]&4096&&ya(M,"grid-template-columns","repeat("+Te[12].length+", 1fr)"),Ne[0]&1&&V!==(V=Te[0].categoriesLabel)&&be(M,"aria-label",V),Ne[0]&16779264&&ya(z,"transform","translateX("+(Te[24]?-1:1)*Te[11]*100+"%)"),Ne[0]&262144&&Vs(B,Te[18]),Ne[0]&262144&&U!==(U="message "+(Te[18]?"":"gone"))&&be(p,"class",U),Ne[0]&402694449&&(Xe=Te[15],re=lo(re,Ne,at,1,Te,Xe,G,ee,ro,rm,null,em)),Ne[0]&278528&&ae!==(ae="tabpanel "+(!Te[14]||Te[18]?"gone":""))&&be($,"class",ae),Ne[0]&16&&X!==(X=Te[4]?"region":"tabpanel")&&be($,"role",X),Ne[0]&8209&&he!==(he=Te[4]?Te[0].searchResultsLabel:Te[0].categories[Te[13].name])&&be($,"aria-label",he),Ne[0]&8208&&we!==(we=Te[4]?"":`tab-${Te[13].id}`)&&be($,"id",we),Ne[0]&402654464&&(lt=Te[10],K=lo(K,Ne,gt,1,Te,lt,te,Ie,ro,lm,null,Jf)),Ne[0]&262144&&ve!==(ve="favorites emoji-menu "+(Te[18]?"gone":""))&&be(Ie,"class",ve),Ne[0]&1&&Ce!==(Ce=Te[0].favoritesLabel)&&be(Ie,"aria-label",Ce),Ne[0]&33554432&&ya(Ie,"padding-inline-end",Te[25]+"px"),Ne[0]&1&&Be!==(Be=Te[0].regionLabel)&&be(t,"aria-label",Be),Ne[0]&4194304&&be(t,"style",Te[22])},i:Eo,o:Eo,d(Te){Te&&As(t);for(let Ne=0;Ne<T.length;Ne+=1)T[Ne].d();e[48](null);for(let Ne=0;Ne<x.length;Ne+=1)x[Ne].d();for(let Ne=0;Ne<re.length;Ne+=1)re[Ne].d();e[50](null);for(let Ne=0;Ne<K.length;Ne+=1)K[Ne].d();e[51](null),e[52](null),He=!1,zo(Fe)}}}function ok(e,t,n){let{skinToneEmoji:s}=t,{i18n:a}=t,{database:i}=t,{customEmoji:o}=t,{customCategorySorting:r}=t,f=!0,u=[],d=[],c="",l="",m,v,C,b=!1,_=-1,g,R=!1,P=!1,S,L=0,I=0,T,E,y="",A=[],w=[],k,M=Dw,x=!1,F=0,V=0,D=vr,z,p=!1,B;const U=pe=>{m.getRootNode().getElementById(pe).focus()},$=(pe,de)=>{m.dispatchEvent(new CustomEvent(pe,{detail:de,bubbles:!0,composed:!0}))},ee=(pe,de)=>de&&pe.skins&&pe.skins[de]||pe.unicode,re=(pe,de)=>ek([pe.name||ee(pe,de),...pe.shortcodes||[]]).join(", "),G=pe=>/^skintone-/.test(pe.id);rc.then(pe=>{pe||n(18,g=a.emojiUnsupportedMessage)});function ae(pe){return Qw(pe,de=>{{const O=getComputedStyle(m),N=parseInt(O.getPropertyValue("--num-columns"),10),Z=O.getPropertyValue("direction")==="rtl",oe=pe.parentElement.getBoundingClientRect().width-de;n(46,M=N),n(25,F=oe),n(24,x=Z)}})}function X(pe){const de=m.getRootNode();Jw(pe,v,N=>de.getElementById(`emo-${N.id}`)),n(1,u=u)}function he(pe){return!pe.unicode||!Xf(pe)||ou.get(pe.unicode)}async function we(pe){const de=await rc;return pe.filter(({version:O})=>!O||O<=de)}async function Ie(pe){return Xw(pe,await rc)}async function K(pe){if(typeof pe>"u")return[];const de=pe===-1?o:await i.getEmojiByGroup(pe);return Ie(await we(de))}async function te(pe){return Ie(await we(await i.getEmojiBySearchQuery(pe)))}function ve(pe){if(!b||!u.length)return;const de=O=>{wa(pe),n(5,_=lc(O,_,u))};switch(pe.key){case"ArrowDown":return de(!1);case"ArrowUp":return de(!0);case"Enter":if(_!==-1)return wa(pe),Be(u[_].id);u.length&&n(5,_=0)}}function Ce(pe){n(2,c=""),n(44,l=""),n(5,_=-1),n(11,V=D.findIndex(de=>de.id===pe.id))}function Ae(pe){const{target:de,key:O}=pe,N=Z=>{Z&&(wa(pe),Z.focus())};switch(O){case"ArrowLeft":return N(de.previousSibling);case"ArrowRight":return N(de.nextSibling);case"Home":return N(de.parentElement.firstChild);case"End":return N(de.parentElement.lastChild)}}async function Be(pe){const de=await i.getEmojiByUnicodeOrName(pe),O=[...u,...w].find(Z=>Z.id===pe),N=O.unicode&&ee(O,L);await i.incrementFavoriteEmojiCount(pe),$("emoji-click",{emoji:de,skinTone:L,...N&&{unicode:N},...O.name&&{name:O.name}})}async function He(pe){const{target:de}=pe;if(!de.classList.contains("emoji"))return;wa(pe);const O=de.id.substring(4);Be(O)}async function Fe(pe){const{target:de}=pe;if(!G(de))return;wa(pe);const O=parseInt(de.id.slice(9),10);n(8,L=O),n(6,R=!1),U("skintone-button"),$("skin-tone-change",{skinTone:O}),i.setPreferredSkinTone(O)}async function Ve(pe){n(6,R=!R),n(20,I=L),R&&(wa(pe),Lr(()=>U(`skintone-${I}`)))}function Le(pe){if(!R)return;const de=async O=>{wa(pe),n(20,I=O),await Sw(),U(`skintone-${I}`)};switch(pe.key){case"ArrowUp":return de(lc(!0,I,A));case"ArrowDown":return de(lc(!1,I,A));case"Home":return de(0);case"End":return de(A.length-1);case"Enter":return Fe(pe);case"Escape":return wa(pe),n(6,R=!1),U("skintone-button")}}function et(pe){if(R)switch(pe.key){case" ":return Fe(pe)}}async function Ze(pe){const{relatedTarget:de}=pe;(!de||!G(de))&&n(6,R=!1)}function Xe(){c=this.value,n(2,c)}function at(pe){Ai[pe?"unshift":"push"](()=>{S=pe,n(7,S)})}const lt=pe=>Ce(pe);function gt(pe){Ai[pe?"unshift":"push"](()=>{C=pe,n(3,C)})}function Te(pe){Ai[pe?"unshift":"push"](()=>{v=pe,n(17,v)})}function Ne(pe){Ai[pe?"unshift":"push"](()=>{m=pe,n(16,m)})}return e.$$set=pe=>{"skinToneEmoji"in pe&&n(40,s=pe.skinToneEmoji),"i18n"in pe&&n(0,a=pe.i18n),"database"in pe&&n(39,i=pe.database),"customEmoji"in pe&&n(41,o=pe.customEmoji),"customCategorySorting"in pe&&n(42,r=pe.customCategorySorting)},e.$$.update=()=>{if(e.$$.dirty[1]&1280&&o&&i&&n(39,i.customEmoji=o,i),e.$$.dirty[0]&1|e.$$.dirty[1]&256){async function pe(){let de=!1;const O=setTimeout(()=>{de=!0,n(18,g=a.loadingMessage)},$w);try{await i.ready(),n(14,p=!0)}catch(N){console.error(N),n(18,g=a.networkErrorMessage)}finally{clearTimeout(O),de&&(de=!1,n(18,g=""))}}i&&pe()}if(e.$$.dirty[0]&6144|e.$$.dirty[1]&1024&&(o&&o.length?n(12,D=[Lw,...vr]):D!==vr&&(V&&n(11,V--,V),n(12,D=vr))),e.$$.dirty[0]&4&&xh(()=>{n(44,l=(c||"").trim()),n(5,_=-1)}),e.$$.dirty[0]&6144&&n(13,z=D[V]),e.$$.dirty[0]&24576|e.$$.dirty[1]&8192){async function pe(){if(!p)n(1,u=[]),n(4,b=!1);else if(l.length>=Ow){const de=l,O=await te(de);de===l&&(n(1,u=O),n(4,b=!0))}else if(z){const de=z.id,O=await K(de);de===z.id&&(n(1,u=O),n(4,b=!1))}}pe()}if(e.$$.dirty[0]&4112&&n(22,E=`
  --font-family: ${Eh};
  --num-groups: ${D.length}; 
  --indicator-opacity: ${b?0:1}; 
  --num-skintones: ${Gf};`),e.$$.dirty[0]&16384|e.$$.dirty[1]&256){async function pe(){p&&n(8,L=await i.getPreferredSkinTone())}pe()}if(e.$$.dirty[1]&512&&n(9,A=Array(Gf).fill().map((pe,de)=>Gw(s,de))),e.$$.dirty[0]&768&&n(21,T=A[L]),e.$$.dirty[0]&257&&n(23,y=a.skinToneLabel.replace("{skinTone}",a.skinTones[L])),e.$$.dirty[0]&16384|e.$$.dirty[1]&256){async function pe(){n(45,k=(await Promise.all(Vw.map(de=>i.getEmojiByUnicodeOrName(de)))).filter(Boolean))}p&&pe()}if(e.$$.dirty[0]&16384|e.$$.dirty[1]&49408){async function pe(){const de=await i.getTopFavoriteEmoji(M),O=await Ie(Rh([...de,...k],N=>N.unicode||N.name).slice(0,M));n(10,w=O)}p&&k&&pe()}if(e.$$.dirty[0]&10){const pe=u.filter(de=>de.unicode).filter(de=>Xf(de)&&!ou.has(de.unicode));pe.length?Lr(()=>X(pe)):(n(1,u=u.filter(he)),Lr(()=>{(C||{}).scrollTop=0}))}e.$$.dirty[0]&1026|e.$$.dirty[1]&4096,e.$$.dirty[0]&18|e.$$.dirty[1]&2048&&n(15,d=function(){if(b)return[{category:"",emojis:u}];const de=new Map;for(const O of u){const N=O.category||"";let Z=de.get(N);Z||(Z=[],de.set(N,Z)),Z.push(O)}return[...de.entries()].map(([O,N])=>({category:O,emojis:N})).sort((O,N)=>r(O.category,N.category))}()),e.$$.dirty[0]&34&&n(26,B=_!==-1&&u[_].id),e.$$.dirty[0]&192&&(R?S.addEventListener("transitionend",()=>{n(19,P=!0)},{once:!0}):n(19,P=!1))},[a,u,c,C,b,_,R,S,L,A,w,V,D,z,p,d,m,v,g,P,I,T,E,y,x,F,B,ee,re,ae,ve,Ce,Ae,He,Fe,Ve,Le,et,Ze,i,s,o,r,f,l,k,M,Xe,at,lt,gt,Te,Ne]}class rk extends Bw{constructor(t){super(),Iw(this,t,ok,ik,yw,{skinToneEmoji:40,i18n:0,database:39,customEmoji:41,customCategorySorting:42},null,[-1,-1,-1])}}const lk="https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json",ck="en";var uk={categoriesLabel:"Categories",emojiUnsupportedMessage:"Your browser does not support color emoji.",favoritesLabel:"Favorites",loadingMessage:"Loading",networkErrorMessage:"Could not load emoji.",regionLabel:"Emoji picker",searchDescription:"When search results are available, press up or down to select and enter to choose.",searchLabel:"Search",searchResultsLabel:"Search results",skinToneDescription:"When expanded, press up or down to select and enter to choose.",skinToneLabel:"Choose a skin tone (currently {skinTone})",skinTonesLabel:"Skin tones",skinTones:["Default","Light","Medium-Light","Medium","Medium-Dark","Dark"],categories:{custom:"Custom","smileys-emotion":"Smileys and emoticons","people-body":"People and body","animals-nature":"Animals and nature","food-drink":"Food and drink","travel-places":"Travel and places",activities:"Activities",objects:"Objects",symbols:"Symbols",flags:"Flags"}};const Mh=["customEmoji","customCategorySorting","database","dataSource","i18n","locale","skinToneEmoji"];class Ih extends HTMLElement{constructor(t){super(),this.attachShadow({mode:"open"});const n=document.createElement("style");n.textContent=":host{--emoji-size:1.375rem;--emoji-padding:0.5rem;--category-emoji-size:var(--emoji-size);--category-emoji-padding:var(--emoji-padding);--indicator-height:3px;--input-border-radius:0.5rem;--input-border-size:1px;--input-font-size:1rem;--input-line-height:1.5;--input-padding:0.25rem;--num-columns:8;--outline-size:2px;--border-size:1px;--skintone-border-radius:1rem;--category-font-size:1rem;display:flex;width:min-content;height:400px}:host,:host(.light){--background:#fff;--border-color:#e0e0e0;--indicator-color:#385ac1;--input-border-color:#999;--input-font-color:#111;--input-placeholder-color:#999;--outline-color:#999;--category-font-color:#111;--button-active-background:#e6e6e6;--button-hover-background:#d9d9d9}:host(.dark){--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}@media (prefers-color-scheme:dark){:host{--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}}:host([hidden]){display:none}button{margin:0;padding:0;border:0;background:0 0;box-shadow:none;-webkit-tap-highlight-color:transparent}button::-moz-focus-inner{border:0}input{padding:0;margin:0;line-height:1.15;font-family:inherit}input[type=search]{-webkit-appearance:none}:focus{outline:var(--outline-color) solid var(--outline-size);outline-offset:calc(-1*var(--outline-size))}:host([data-js-focus-visible]) :focus:not([data-focus-visible-added]){outline:0}:focus:not(:focus-visible){outline:0}.hide-focus{outline:0}*{box-sizing:border-box}.picker{contain:content;display:flex;flex-direction:column;background:var(--background);border:var(--border-size) solid var(--border-color);width:100%;height:100%;overflow:hidden;--total-emoji-size:calc(var(--emoji-size) + (2 * var(--emoji-padding)));--total-category-emoji-size:calc(var(--category-emoji-size) + (2 * var(--category-emoji-padding)))}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.hidden{opacity:0;pointer-events:none}.abs-pos{position:absolute;left:0;top:0}.gone{display:none!important}.skintone-button-wrapper,.skintone-list{background:var(--background);z-index:3}.skintone-button-wrapper.expanded{z-index:1}.skintone-list{position:absolute;inset-inline-end:0;top:0;z-index:2;overflow:visible;border-bottom:var(--border-size) solid var(--border-color);border-radius:0 0 var(--skintone-border-radius) var(--skintone-border-radius);will-change:transform;transition:transform .2s ease-in-out;transform-origin:center 0}@media (prefers-reduced-motion:reduce){.skintone-list{transition-duration:.001s}}@supports not (inset-inline-end:0){.skintone-list{right:0}}.skintone-list.no-animate{transition:none}.tabpanel{overflow-y:auto;-webkit-overflow-scrolling:touch;will-change:transform;min-height:0;flex:1;contain:content}.emoji-menu{display:grid;grid-template-columns:repeat(var(--num-columns),var(--total-emoji-size));justify-content:space-around;align-items:flex-start;width:100%}.category{padding:var(--emoji-padding);font-size:var(--category-font-size);color:var(--category-font-color)}.custom-emoji,.emoji,button.emoji{height:var(--total-emoji-size);width:var(--total-emoji-size)}.emoji,button.emoji{font-size:var(--emoji-size);display:flex;align-items:center;justify-content:center;border-radius:100%;line-height:1;overflow:hidden;font-family:var(--font-family);cursor:pointer}@media (hover:hover) and (pointer:fine){.emoji:hover,button.emoji:hover{background:var(--button-hover-background)}}.emoji.active,.emoji:active,button.emoji.active,button.emoji:active{background:var(--button-active-background)}.custom-emoji{padding:var(--emoji-padding);object-fit:contain;pointer-events:none;background-repeat:no-repeat;background-position:center center;background-size:var(--emoji-size) var(--emoji-size)}.nav,.nav-button{align-items:center}.nav{display:grid;justify-content:space-between;contain:content}.nav-button{display:flex;justify-content:center}.nav-emoji{font-size:var(--category-emoji-size);width:var(--total-category-emoji-size);height:var(--total-category-emoji-size)}.indicator-wrapper{display:flex;border-bottom:1px solid var(--border-color)}.indicator{width:calc(100%/var(--num-groups));height:var(--indicator-height);opacity:var(--indicator-opacity);background-color:var(--indicator-color);will-change:transform,opacity;transition:opacity .1s linear,transform .25s ease-in-out}@media (prefers-reduced-motion:reduce){.indicator{will-change:opacity;transition:opacity .1s linear}}.pad-top,input.search{background:var(--background);width:100%}.pad-top{height:var(--emoji-padding);z-index:3}.search-row{display:flex;align-items:center;position:relative;padding-inline-start:var(--emoji-padding);padding-bottom:var(--emoji-padding)}.search-wrapper{flex:1;min-width:0}input.search{padding:var(--input-padding);border-radius:var(--input-border-radius);border:var(--input-border-size) solid var(--input-border-color);color:var(--input-font-color);font-size:var(--input-font-size);line-height:var(--input-line-height)}input.search::placeholder{color:var(--input-placeholder-color)}.favorites{display:flex;flex-direction:row;border-top:var(--border-size) solid var(--border-color);contain:content}.message{padding:var(--emoji-padding)}",this.shadowRoot.appendChild(n),this._ctx={locale:ck,dataSource:lk,skinToneEmoji:Fw,customCategorySorting:Nw,customEmoji:null,i18n:uk,...t};for(const s of Mh)s!=="database"&&Object.prototype.hasOwnProperty.call(this,s)&&(this._ctx[s]=this[s],delete this[s]);this._dbFlush()}connectedCallback(){this._cmp=new rk({target:this.shadowRoot,props:this._ctx})}disconnectedCallback(){this._cmp.$destroy(),this._cmp=void 0;const{database:t}=this._ctx;t&&t.close().catch(n=>console.error(n))}static get observedAttributes(){return["locale","data-source","skin-tone-emoji"]}attributeChangedCallback(t,n,s){this._set(t.replace(/-([a-z])/g,(a,i)=>i.toUpperCase()),s)}_set(t,n){this._ctx[t]=n,this._cmp&&this._cmp.$set({[t]:n}),["locale","dataSource"].includes(t)&&this._dbFlush()}_dbCreate(){const{locale:t,dataSource:n,database:s}=this._ctx;(!s||s.locale!==t||s.dataSource!==n)&&this._set("database",new yh({locale:t,dataSource:n}))}_dbFlush(){Promise.resolve().then(()=>this._dbCreate())}}const Bh={};for(const e of Mh)Bh[e]={get(){return e==="database"&&this._dbCreate(),this._ctx[e]},set(t){if(e==="database")throw new Error("database is read-only");this._set(e,t)}};Object.defineProperties(Ih.prototype,Bh);customElements.get("emoji-picker")||customElements.define("emoji-picker",Ih);function Lh(e,t){for(;e&&!e.querySelector(t);){e=e.parentNode;const n=e.querySelector(t);if(n)return n}return null}const dk={name:"EmojiPickerContainer",components:{SvgIcon:An},props:{emojiOpened:{type:Boolean,default:!1},emojiReaction:{type:Boolean,default:!1},positionTop:{type:Boolean,default:!1},positionRight:{type:Boolean,default:!1},messageId:{type:String,default:""},emojiDataSource:{type:String,default:void 0}},emits:["add-emoji","open-emoji"],data(){return{emojiPickerHeight:320,emojiPickerTop:0,emojiPickerRight:""}},watch:{emojiOpened(e){e&&setTimeout(()=>{this.addCustomStyling(),this.$refs.emojiPicker.shadowRoot.addEventListener("emoji-click",({detail:t})=>{this.$emit("add-emoji",{unicode:t.unicode})})},0)}},methods:{addCustomStyling(){const e=`.picker {
				border: none;
			}`,t=`.nav {
				overflow-x: auto;
			}`,n=`.search-wrapper {
				padding-right: 2px;
				padding-left: 2px;
			}`,s=`input.search {
				height: 32px;
				font-size: 14px;
				border-radius: 10rem;
				border: var(--chat-border-style);
				padding: 5px 10px;
				outline: none;
				background: var(--chat-bg-color-input);
				color: var(--chat-color);
			}`,a=document.createElement("style");a.textContent=e+t+n+s,this.$refs.emojiPicker.shadowRoot.appendChild(a)},openEmoji(e){this.$emit("open-emoji",!this.emojiOpened),this.setEmojiPickerPosition(e.clientY,e.view.innerWidth,e.view.innerHeight)},setEmojiPickerPosition(e,t,n){const s=t<500||n<700,a=Lh(this.$el,"#room-footer");if(!a){s&&(this.emojiPickerRight="-50px");return}s?(this.emojiPickerRight=t/2-(this.positionTop?200:150)+"px",this.emojiPickerTop=100,this.emojiPickerHeight=n-200):(a.getBoundingClientRect().top-e>this.emojiPickerHeight-50?this.emojiPickerTop=e+10:this.emojiPickerTop=e-this.emojiPickerHeight-10,this.emojiPickerRight=this.positionTop?"0px":this.positionRight?"60px":"")}}},fk={class:"vac-emoji-wrapper"};function mk(e,t,n,s,a,i){const o=mt("svg-icon"),r=mt("emoji-picker");return me(),xe("div",fk,[De("div",{class:Mt(["vac-svg-button",{"vac-emoji-reaction":n.emojiReaction}]),onClick:t[0]||(t[0]=(...f)=>i.openEmoji&&i.openEmoji(...f))},[We(e.$slots,n.messageId?"emoji-picker-reaction-icon_"+n.messageId:"emoji-picker-icon",{},()=>[Ge(o,{name:"emoji",param:n.emojiReaction?"reaction":""},null,8,["param"])])],2),n.emojiOpened?(me(),Ht(vn,{key:0,name:"vac-slide-up",appear:""},{default:vt(()=>[De("div",{class:Mt(["vac-emoji-picker",{"vac-picker-reaction":n.emojiReaction}]),style:nn({height:`${a.emojiPickerHeight}px`,top:n.positionTop?a.emojiPickerHeight:`${a.emojiPickerTop}px`,right:a.emojiPickerRight,display:a.emojiPickerTop||!n.emojiReaction?"initial":"none"})},[n.emojiOpened?(me(),Ht(r,{key:0,ref:"emojiPicker","data-source":n.emojiDataSource},null,8,["data-source"])):qe("",!0)],6)]),_:1})):qe("",!0)])}var Oh=Jt(dk,[["render",mk]]);const vk={name:"RoomFiles",components:{Loader:bl,SvgIcon:An},props:{file:{type:Object,required:!0},index:{type:Number,required:!0}},emits:["remove-file"],computed:{isImage(){return Oi(this.file)},isVideo(){return Ho(this.file)}}},hk={class:"vac-room-file-container"},gk=["src"],pk={class:"vac-text-ellipsis"},_k={key:0,class:"vac-text-ellipsis vac-text-extension"};function bk(e,t,n,s,a,i){const o=mt("loader"),r=mt("svg-icon");return me(),xe("div",hk,[Ge(o,{show:n.file.loading,type:"room-file"},Wt({_:2},[Rt(e.$slots,(f,u)=>({name:u,fn:vt(d=>[We(e.$slots,u,qt(zt(d)))])}))]),1032,["show"]),De("div",{class:"vac-svg-button vac-icon-remove",onClick:t[0]||(t[0]=f=>e.$emit("remove-file",n.index))},[We(e.$slots,"image-close-icon",{},()=>[Ge(r,{name:"close",param:"image"})])]),i.isImage?(me(),xe("div",{key:0,class:Mt(["vac-message-image",{"vac-blur-loading":n.file.loading}]),style:nn({"background-image":`url('${n.file.localUrl||n.file.url}')`})},null,6)):i.isVideo?(me(),xe("video",{key:1,controls:"",class:Mt({"vac-blur-loading":n.file.loading})},[De("source",{src:n.file.localUrl||n.file.url},null,8,gk)],2)):(me(),xe("div",{key:2,class:Mt(["vac-file-container",{"vac-blur-loading":n.file.loading}])},[De("div",null,[We(e.$slots,"file-icon",{},()=>[Ge(r,{name:"file"})])]),De("div",pk,yt(n.file.name),1),n.file.extension?(me(),xe("div",_k,yt(n.file.extension),1)):qe("",!0)],2))])}var yk=Jt(vk,[["render",bk]]);const wk={name:"RoomFiles",components:{SvgIcon:An,RoomFile:yk},props:{files:{type:Array,required:!0}},emits:["remove-file","reset-message"],computed:{}},kk={key:0,class:"vac-room-files-container"},Sk={class:"vac-files-box"},Ck={class:"vac-icon-close"};function Ak(e,t,n,s,a,i){const o=mt("room-file"),r=mt("svg-icon");return me(),Ht(vn,{name:"vac-slide-up"},{default:vt(()=>[n.files.length?(me(),xe("div",kk,[De("div",Sk,[(me(!0),xe(Lt,null,Rt(n.files,(f,u)=>(me(),xe("div",{key:u},[Ge(o,{file:f,index:u,onRemoveFile:t[0]||(t[0]=d=>e.$emit("remove-file",d))},Wt({_:2},[Rt(e.$slots,(d,c)=>({name:c,fn:vt(l=>[We(e.$slots,c,qt(zt(l)))])}))]),1032,["file","index"])]))),128))]),De("div",Ck,[De("div",{class:"vac-svg-button",onClick:t[1]||(t[1]=f=>e.$emit("reset-message"))},[We(e.$slots,"files-close-icon",{},()=>[Ge(r,{name:"close-outline"})])])])])):qe("",!0)]),_:3})}var Tk=Jt(wk,[["render",Ak]]);const xk={props:{percentage:{type:Number,default:0},messageSelectionEnabled:{type:Boolean,required:!0}},emits:["hover-audio-progress","change-linehead"],data(){return{isMouseDown:!1}},methods:{onMouseDown(e){if(this.messageSelectionEnabled)return;this.isMouseDown=!0;const t=this.calculateLineHeadPosition(e,this.$refs.progress);this.$emit("change-linehead",t),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp)},onMouseUp(e){if(this.messageSelectionEnabled)return;this.isMouseDown=!1,document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("mousemove",this.onMouseMove);const t=this.calculateLineHeadPosition(e,this.$refs.progress);this.$emit("change-linehead",t)},onMouseMove(e){if(this.messageSelectionEnabled)return;const t=this.calculateLineHeadPosition(e,this.$refs.progress);this.$emit("change-linehead",t)},calculateLineHeadPosition(e,t){const n=t.getBoundingClientRect().width,s=t.getBoundingClientRect().left;let a=(e.clientX-s)/n;return a=a<0?0:a,a=a>1?1:a,a}}},Ek={class:"vac-player-progress"},Rk={class:"vac-line-container"};function Mk(e,t,n,s,a,i){return me(),xe("div",{ref:"progress",class:"vac-player-bar",onMousedown:t[0]||(t[0]=(...o)=>i.onMouseDown&&i.onMouseDown(...o)),onMouseover:t[1]||(t[1]=o=>e.$emit("hover-audio-progress",!0)),onMouseout:t[2]||(t[2]=o=>e.$emit("hover-audio-progress",!1))},[De("div",Ek,[De("div",Rk,[De("div",{class:"vac-line-progress",style:nn({width:`${n.percentage}%`})},null,4),De("div",{class:Mt(["vac-line-dot",{"vac-line-dot__active":a.isMouseDown}]),style:nn({left:`${n.percentage}%`})},null,6)])])],544)}var Ik=Jt(xk,[["render",Mk]]);const Bk={name:"AudioPlayer",components:{SvgIcon:An,AudioControl:Ik},props:{messageId:{type:[String,Number],default:null},src:{type:String,default:null},messageSelectionEnabled:{type:Boolean,required:!0}},emits:["hover-audio-progress","update-progress-time"],data(){return{isPlaying:!1,duration:this.convertTimeMMSS(0),playedTime:this.convertTimeMMSS(0),progress:0}},computed:{playerUniqId(){return`audio-player${this.messageId}`},audioSource(){return this.src?this.src:(this.resetProgress(),null)}},mounted(){this.player=this.$el.querySelector("#"+this.playerUniqId),this.player.addEventListener("ended",()=>{this.isPlaying=!1}),this.player.addEventListener("loadeddata",()=>{this.resetProgress(),this.duration=this.convertTimeMMSS(this.player.duration),this.updateProgressTime()}),this.player.addEventListener("timeupdate",this.onTimeUpdate)},methods:{convertTimeMMSS(e){return new Date(e*1e3).toISOString().substr(14,5)},playback(){this.messageSelectionEnabled||!this.audioSource||(this.isPlaying?this.player.pause():setTimeout(()=>this.player.play()),this.isPlaying=!this.isPlaying)},resetProgress(){this.isPlaying&&this.player.pause(),this.duration=this.convertTimeMMSS(0),this.playedTime=this.convertTimeMMSS(0),this.progress=0,this.isPlaying=!1,this.updateProgressTime()},onTimeUpdate(){this.playedTime=this.convertTimeMMSS(this.player.currentTime),this.progress=this.player.currentTime/this.player.duration*100,this.updateProgressTime()},onUpdateProgress(e){e&&(this.player.currentTime=e*this.player.duration)},updateProgressTime(){this.$emit("update-progress-time",this.progress>1?this.playedTime:this.duration)}}},Lk={class:"vac-audio-player"},Ok=["id","src"];function Pk(e,t,n,s,a,i){const o=mt("svg-icon"),r=mt("audio-control");return me(),xe("div",null,[De("div",Lk,[De("div",{class:"vac-svg-button",onClick:t[0]||(t[0]=(...f)=>i.playback&&i.playback(...f))},[a.isPlaying?We(e.$slots,"audio-pause-icon_"+n.messageId,{key:0},()=>[Ge(o,{name:"audio-pause"})]):We(e.$slots,"audio-play-icon_"+n.messageId,{key:1},()=>[Ge(o,{name:"audio-play"})])]),Ge(r,{percentage:a.progress,"message-selection-enabled":n.messageSelectionEnabled,onChangeLinehead:i.onUpdateProgress,onHoverAudioProgress:t[1]||(t[1]=f=>e.$emit("hover-audio-progress",f))},null,8,["percentage","message-selection-enabled","onChangeLinehead"]),De("audio",{id:i.playerUniqId,src:i.audioSource},null,8,Ok)])])}var ud=Jt(Bk,[["render",Pk]]);const $k={name:"RoomMessageReply",components:{SvgIcon:An,FormatMessage:jo,AudioPlayer:ud},props:{room:{type:Object,required:!0},messageReply:{type:Object,default:null},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0}},emits:["reset-message"],computed:{firstFile(){var e,t;return(t=(e=this.messageReply)==null?void 0:e.files)!=null&&t.length?this.messageReply.files[0]:{}},isImage(){return Oi(this.firstFile)},isVideo(){return Ho(this.firstFile)},isAudio(){return kl(this.firstFile)},isOtherFile(){var e,t;return((t=(e=this.messageReply)==null?void 0:e.files)==null?void 0:t.length)&&!this.isAudio&&!this.isVideo&&!this.isImage}}},Fk={key:0,class:"vac-reply-container"},Dk={class:"vac-reply-box"},Vk={class:"vac-reply-info"},Nk={class:"vac-reply-username"},jk={class:"vac-reply-content"},Hk=["src"],zk={key:1,controls:"",class:"vac-image-reply"},Uk=["src"],qk={key:3,class:"vac-image-reply vac-file-container"},Wk={class:"vac-text-ellipsis"},Yk={key:0,class:"vac-text-ellipsis vac-text-extension"},Kk={class:"vac-icon-reply"};function Gk(e,t,n,s,a,i){const o=mt("format-message"),r=mt("audio-player"),f=mt("svg-icon");return me(),Ht(vn,{name:"vac-slide-up"},{default:vt(()=>[n.messageReply?(me(),xe("div",Fk,[De("div",Dk,[De("div",Vk,[De("div",Nk,yt(n.messageReply.username),1),De("div",jk,[Ge(o,{"message-id":n.messageReply._id,content:n.messageReply.content,users:n.room.users,"text-formatting":n.textFormatting,"link-options":n.linkOptions,reply:!0},null,8,["message-id","content","users","text-formatting","link-options"])])]),i.isImage?(me(),xe("img",{key:0,src:i.firstFile.url,class:"vac-image-reply"},null,8,Hk)):i.isVideo?(me(),xe("video",zk,[De("source",{src:i.firstFile.url},null,8,Uk)])):i.isAudio?(me(),Ht(r,{key:2,src:i.firstFile.url,"message-selection-enabled":!1,class:"vac-audio-reply"},Wt({_:2},[Rt(e.$slots,(u,d)=>({name:d,fn:vt(c=>[We(e.$slots,d,qt(zt(c)))])}))]),1032,["src"])):i.isOtherFile?(me(),xe("div",qk,[De("div",null,[We(e.$slots,"file-icon",{},()=>[Ge(f,{name:"file"})])]),De("div",Wk,yt(i.firstFile.name),1),i.firstFile.extension?(me(),xe("div",Yk,yt(i.firstFile.extension),1)):qe("",!0)])):qe("",!0)]),De("div",Kk,[De("div",{class:"vac-svg-button",onClick:t[0]||(t[0]=u=>e.$emit("reset-message"))},[We(e.$slots,"reply-close-icon",{},()=>[Ge(f,{name:"close-outline"})])])])])):qe("",!0)]),_:3})}var Xk=Jt($k,[["render",Gk]]);const Zk={name:"RoomUsersTag",props:{filteredUsersTag:{type:Array,required:!0},selectItem:{type:Boolean,default:null},activeUpOrDown:{type:Number,default:null}},emits:["select-user-tag","activate-item"],data(){return{activeItem:null}},watch:{filteredUsersTag(e,t){(!t.length||e.length!==t.length)&&(this.activeItem=0)},selectItem(e){e&&this.$emit("select-user-tag",this.filteredUsersTag[this.activeItem])},activeUpOrDown(){this.activeUpOrDown>0&&this.activeItem<this.filteredUsersTag.length-1?this.activeItem++:this.activeUpOrDown<0&&this.activeItem>0&&this.activeItem--,this.$emit("activate-item")}}},Qk={key:0,class:"vac-tags-container"},Jk=["onMouseover","onClick"],e9={class:"vac-tags-info"},t9={class:"vac-tags-username"};function n9(e,t,n,s,a,i){return me(),Ht(vn,{name:"vac-slide-up"},{default:vt(()=>[n.filteredUsersTag.length?(me(),xe("div",Qk,[(me(!0),xe(Lt,null,Rt(n.filteredUsersTag,(o,r)=>(me(),xe("div",{key:o._id,class:Mt(["vac-tags-box",{"vac-tags-box-active":r===a.activeItem}]),onMouseover:f=>a.activeItem=r,onClick:f=>e.$emit("select-user-tag",o)},[De("div",e9,[o.avatar?(me(),xe("div",{key:0,class:"vac-avatar vac-tags-avatar",style:nn({"background-image":`url('${o.avatar}')`})},null,4)):qe("",!0),De("div",t9,yt(o.username),1)])],42,Jk))),128))])):qe("",!0)]),_:1})}var s9=Jt(Zk,[["render",n9]]);const a9={name:"RoomEmojis",props:{filteredEmojis:{type:Array,required:!0},selectItem:{type:Boolean,default:null},activeUpOrDown:{type:Number,default:null}},emits:["select-emoji","activate-item"],data(){return{activeItem:null}},watch:{filteredEmojis(e,t){(!t.length||e.length!==t.length)&&(this.activeItem=0)},selectItem(e){e&&this.$emit("select-emoji",this.filteredEmojis[this.activeItem])},activeUpOrDown(){this.activeUpOrDown>0&&this.activeItem<this.filteredEmojis.length-1?this.activeItem++:this.activeUpOrDown<0&&this.activeItem>0&&this.activeItem--,this.$emit("activate-item")}}},i9={key:0,class:"vac-emojis-container"},o9=["onMouseover","onClick"];function r9(e,t,n,s,a,i){return me(),Ht(vn,{name:"vac-slide-up"},{default:vt(()=>[n.filteredEmojis.length?(me(),xe("div",i9,[(me(!0),xe(Lt,null,Rt(n.filteredEmojis,(o,r)=>(me(),xe("div",{key:o,class:Mt(["vac-emoji-element",{"vac-emoji-element-active":r===a.activeItem}]),onMouseover:f=>a.activeItem=r,onClick:f=>e.$emit("select-emoji",o)},yt(o),43,o9))),128))])):qe("",!0)]),_:1})}var l9=Jt(a9,[["render",r9]]);const c9={name:"RoomTemplatesText",props:{filteredTemplatesText:{type:Array,required:!0},selectItem:{type:Boolean,default:null},activeUpOrDown:{type:Number,default:null}},emits:["select-template-text","activate-item"],data(){return{activeItem:null}},watch:{filteredTemplatesText(e,t){(!t.length||e.length!==t.length)&&(this.activeItem=0)},selectItem(e){e&&this.$emit("select-template-text",this.filteredTemplatesText[this.activeItem])},activeUpOrDown(){this.activeUpOrDown>0&&this.activeItem<this.filteredTemplatesText.length-1?this.activeItem++:this.activeUpOrDown<0&&this.activeItem>0&&this.activeItem--,this.$emit("activate-item")}}},u9={key:0,class:"vac-template-container vac-app-box-shadow"},d9=["onMouseover","onClick"],f9={class:"vac-template-info"},m9={class:"vac-template-tag"},v9={class:"vac-template-text"};function h9(e,t,n,s,a,i){return me(),Ht(vn,{name:"vac-slide-up"},{default:vt(()=>[n.filteredTemplatesText.length?(me(),xe("div",u9,[(me(!0),xe(Lt,null,Rt(n.filteredTemplatesText,(o,r)=>(me(),xe("div",{key:r,class:Mt(["vac-template-box",{"vac-template-active":r===a.activeItem}]),onMouseover:f=>a.activeItem=r,onClick:f=>e.$emit("select-template-text",o)},[De("div",f9,[De("div",m9," /"+yt(o.tag),1),De("div",v9,yt(o.text),1)])],42,d9))),128))])):qe("",!0)]),_:1})}var g9=Jt(c9,[["render",h9]]);function p9(e){return new Int8Array(e)}function _9(e){return new Int16Array(e)}function Ph(e){return new Int32Array(e)}function $h(e){return new Float32Array(e)}function b9(e){return new Float64Array(e)}function Fh(e){if(e.length==1)return $h(e[0]);var t=e[0];e=e.slice(1);for(var n=[],s=0;s<t;s++)n.push(Fh(e));return n}function Dh(e){if(e.length==1)return Ph(e[0]);var t=e[0];e=e.slice(1);for(var n=[],s=0;s<t;s++)n.push(Dh(e));return n}function Vh(e){if(e.length==1)return _9(e[0]);var t=e[0];e=e.slice(1);for(var n=[],s=0;s<t;s++)n.push(Vh(e));return n}function Nh(e){if(e.length==1)return new Array(e[0]);var t=e[0];e=e.slice(1);for(var n=[],s=0;s<t;s++)n.push(Nh(e));return n}var jh={};jh.fill=function(e,t,n,s){if(arguments.length==2)for(var a=0;a<e.length;a++)e[a]=arguments[1];else for(var a=t;a<n;a++)e[a]=s};var Uo={};Uo.arraycopy=function(e,t,n,s,a){for(var i=t+a;t<i;)n[s++]=e[t++]};Uo.out={};Uo.out.println=function(e){console.log(e)};Uo.out.printf=function(){console.log.apply(console,arguments)};var Sl={};Sl.SQRT2=1.4142135623730951;Sl.FAST_LOG10=function(e){return Math.log10(e)};Sl.FAST_LOG10_X=function(e,t){return Math.log10(e)*t};function la(e){this.ordinal=e}la.short_block_allowed=new la(0);la.short_block_coupled=new la(1);la.short_block_dispensed=new la(2);la.short_block_forced=new la(3);var Hh={};Hh.MAX_VALUE=34028235e31;function es(e){this.ordinal=e}es.vbr_off=new es(0);es.vbr_mt=new es(1);es.vbr_rh=new es(2);es.vbr_abr=new es(3);es.vbr_mtrh=new es(4);es.vbr_default=es.vbr_mtrh;var y9=function(e){},Ue={System:Uo,VbrMode:es,Float:Hh,ShortBlock:la,Util:Sl,Arrays:jh,new_array_n:Nh,new_byte:p9,new_double:b9,new_float:$h,new_float_n:Fh,new_int:Ph,new_int_n:Dh,new_short_n:Vh,assert:y9},w9=Ue.System,un=Ue.Util,k9=Ue.Arrays,S9=Ue.new_float;function C9(){var e=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.035780907*un.SQRT2*.5/2384e-9,.017876148*un.SQRT2*.5/2384e-9,.003134727*un.SQRT2*.5/2384e-9,.002457142*un.SQRT2*.5/2384e-9,971317e-9*un.SQRT2*.5/2384e-9,218868e-9*un.SQRT2*.5/2384e-9,101566e-9*un.SQRT2*.5/2384e-9,13828e-9*un.SQRT2*.5/2384e-9,12804.797818791945,1945.5515939597317,313.4244966442953,20.801593959731544,1995.1556208053692,9.000838926174497,-29.20218120805369],t=[[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,940084909404969e-27,6423305872147839e-28,2382191739347918e-28,5456116108943412e-27,4878985199565852e-27,4240448995017367e-27,3559909094758252e-27,2858043359288075e-27,2156177623817898e-27,1475637723558783e-27,8371015190102974e-28,2599706096327376e-28,-5456116108943412e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758252e-27,-2858043359288076e-27,-2156177623817898e-27,-1475637723558783e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347923e-28,-6423305872147843e-28,-9400849094049696e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049694e-28,-642330587214784e-27,-2382191739347918e-28],[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,9400849094049688e-28,6423305872147841e-28,2382191739347918e-28,5456116108943413e-27,4878985199565852e-27,4240448995017367e-27,3559909094758253e-27,2858043359288075e-27,2156177623817898e-27,1475637723558782e-27,8371015190102975e-28,2599706096327376e-28,-5461314069809755e-27,-4921085770524055e-27,-4343405037091838e-27,-3732668368707687e-27,-3093523840190885e-27,-2430835727329465e-27,-1734679010007751e-27,-974825365660928e-27,-2797435120168326e-28,0,0,0,0,0,0,-2283748241799531e-28,-4037858874020686e-28,-2146547464825323e-28],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2283748241799531e-28,4037858874020686e-28,2146547464825323e-28,5461314069809755e-27,4921085770524055e-27,4343405037091838e-27,3732668368707687e-27,3093523840190885e-27,2430835727329466e-27,1734679010007751e-27,974825365660928e-27,2797435120168326e-28,-5456116108943413e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758253e-27,-2858043359288075e-27,-2156177623817898e-27,-1475637723558782e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347913e-28,-6423305872147834e-28,-9400849094049688e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049688e-28,-6423305872147841e-28,-2382191739347918e-28]],n=t[H.SHORT_TYPE],s=t[H.SHORT_TYPE],a=t[H.SHORT_TYPE],i=t[H.SHORT_TYPE],o=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];function r(d,c,l){for(var m=10,v=c+238-14-286,C=-15;C<0;C++){var b,_,g;b=e[m+-10],_=d[v+-224]*b,g=d[c+224]*b,b=e[m+-9],_+=d[v+-160]*b,g+=d[c+160]*b,b=e[m+-8],_+=d[v+-96]*b,g+=d[c+96]*b,b=e[m+-7],_+=d[v+-32]*b,g+=d[c+32]*b,b=e[m+-6],_+=d[v+32]*b,g+=d[c+-32]*b,b=e[m+-5],_+=d[v+96]*b,g+=d[c+-96]*b,b=e[m+-4],_+=d[v+160]*b,g+=d[c+-160]*b,b=e[m+-3],_+=d[v+224]*b,g+=d[c+-224]*b,b=e[m+-2],_+=d[c+-256]*b,g-=d[v+256]*b,b=e[m+-1],_+=d[c+-192]*b,g-=d[v+192]*b,b=e[m+0],_+=d[c+-128]*b,g-=d[v+128]*b,b=e[m+1],_+=d[c+-64]*b,g-=d[v+64]*b,b=e[m+2],_+=d[c+0]*b,g-=d[v+0]*b,b=e[m+3],_+=d[c+64]*b,g-=d[v+-64]*b,b=e[m+4],_+=d[c+128]*b,g-=d[v+-128]*b,b=e[m+5],_+=d[c+192]*b,g-=d[v+-192]*b,_*=e[m+6],b=g-_,l[30+C*2]=g+_,l[31+C*2]=e[m+7]*b,m+=18,c--,v++}{var _,g,R,P;g=d[c+-16]*e[m+-10],_=d[c+-32]*e[m+-2],g+=(d[c+-48]-d[c+16])*e[m+-9],_+=d[c+-96]*e[m+-1],g+=(d[c+-80]+d[c+48])*e[m+-8],_+=d[c+-160]*e[m+0],g+=(d[c+-112]-d[c+80])*e[m+-7],_+=d[c+-224]*e[m+1],g+=(d[c+-144]+d[c+112])*e[m+-6],_-=d[c+32]*e[m+2],g+=(d[c+-176]-d[c+144])*e[m+-5],_-=d[c+96]*e[m+3],g+=(d[c+-208]+d[c+176])*e[m+-4],_-=d[c+160]*e[m+4],g+=(d[c+-240]-d[c+208])*e[m+-3],_-=d[c+224],R=_-g,P=_+g,g=l[14],_=l[15]-g,l[31]=P+g,l[30]=R+_,l[15]=R-_,l[14]=P-g}{var S;S=l[28]-l[0],l[0]+=l[28],l[28]=S*e[m+-2*18+7],S=l[29]-l[1],l[1]+=l[29],l[29]=S*e[m+-2*18+7],S=l[26]-l[2],l[2]+=l[26],l[26]=S*e[m+-4*18+7],S=l[27]-l[3],l[3]+=l[27],l[27]=S*e[m+-4*18+7],S=l[24]-l[4],l[4]+=l[24],l[24]=S*e[m+-6*18+7],S=l[25]-l[5],l[5]+=l[25],l[25]=S*e[m+-6*18+7],S=l[22]-l[6],l[6]+=l[22],l[22]=S*un.SQRT2,S=l[23]-l[7],l[7]+=l[23],l[23]=S*un.SQRT2-l[7],l[7]-=l[6],l[22]-=l[7],l[23]-=l[22],S=l[6],l[6]=l[31]-S,l[31]=l[31]+S,S=l[7],l[7]=l[30]-S,l[30]=l[30]+S,S=l[22],l[22]=l[15]-S,l[15]=l[15]+S,S=l[23],l[23]=l[14]-S,l[14]=l[14]+S,S=l[20]-l[8],l[8]+=l[20],l[20]=S*e[m+-10*18+7],S=l[21]-l[9],l[9]+=l[21],l[21]=S*e[m+-10*18+7],S=l[18]-l[10],l[10]+=l[18],l[18]=S*e[m+-12*18+7],S=l[19]-l[11],l[11]+=l[19],l[19]=S*e[m+-12*18+7],S=l[16]-l[12],l[12]+=l[16],l[16]=S*e[m+-14*18+7],S=l[17]-l[13],l[13]+=l[17],l[17]=S*e[m+-14*18+7],S=-l[20]+l[24],l[20]+=l[24],l[24]=S*e[m+-12*18+7],S=-l[21]+l[25],l[21]+=l[25],l[25]=S*e[m+-12*18+7],S=l[4]-l[8],l[4]+=l[8],l[8]=S*e[m+-12*18+7],S=l[5]-l[9],l[5]+=l[9],l[9]=S*e[m+-12*18+7],S=l[0]-l[12],l[0]+=l[12],l[12]=S*e[m+-4*18+7],S=l[1]-l[13],l[1]+=l[13],l[13]=S*e[m+-4*18+7],S=l[16]-l[28],l[16]+=l[28],l[28]=S*e[m+-4*18+7],S=-l[17]+l[29],l[17]+=l[29],l[29]=S*e[m+-4*18+7],S=un.SQRT2*(l[2]-l[10]),l[2]+=l[10],l[10]=S,S=un.SQRT2*(l[3]-l[11]),l[3]+=l[11],l[11]=S,S=un.SQRT2*(-l[18]+l[26]),l[18]+=l[26],l[26]=S-l[18],S=un.SQRT2*(-l[19]+l[27]),l[19]+=l[27],l[27]=S-l[19],S=l[2],l[19]-=l[3],l[3]-=S,l[2]=l[31]-S,l[31]+=S,S=l[3],l[11]-=l[19],l[18]-=S,l[3]=l[30]-S,l[30]+=S,S=l[18],l[27]-=l[11],l[19]-=S,l[18]=l[15]-S,l[15]+=S,S=l[19],l[10]-=S,l[19]=l[14]-S,l[14]+=S,S=l[10],l[11]-=S,l[10]=l[23]-S,l[23]+=S,S=l[11],l[26]-=S,l[11]=l[22]-S,l[22]+=S,S=l[26],l[27]-=S,l[26]=l[7]-S,l[7]+=S,S=l[27],l[27]=l[6]-S,l[6]+=S,S=un.SQRT2*(l[0]-l[4]),l[0]+=l[4],l[4]=S,S=un.SQRT2*(l[1]-l[5]),l[1]+=l[5],l[5]=S,S=un.SQRT2*(l[16]-l[20]),l[16]+=l[20],l[20]=S,S=un.SQRT2*(l[17]-l[21]),l[17]+=l[21],l[21]=S,S=-un.SQRT2*(l[8]-l[12]),l[8]+=l[12],l[12]=S-l[8],S=-un.SQRT2*(l[9]-l[13]),l[9]+=l[13],l[13]=S-l[9],S=-un.SQRT2*(l[25]-l[29]),l[25]+=l[29],l[29]=S-l[25],S=-un.SQRT2*(l[24]+l[28]),l[24]-=l[28],l[28]=S-l[24],S=l[24]-l[16],l[24]=S,S=l[20]-S,l[20]=S,S=l[28]-S,l[28]=S,S=l[25]-l[17],l[25]=S,S=l[21]-S,l[21]=S,S=l[29]-S,l[29]=S,S=l[17]-l[1],l[17]=S,S=l[9]-S,l[9]=S,S=l[25]-S,l[25]=S,S=l[5]-S,l[5]=S,S=l[21]-S,l[21]=S,S=l[13]-S,l[13]=S,S=l[29]-S,l[29]=S,S=l[1]-l[0],l[1]=S,S=l[16]-S,l[16]=S,S=l[17]-S,l[17]=S,S=l[8]-S,l[8]=S,S=l[9]-S,l[9]=S,S=l[24]-S,l[24]=S,S=l[25]-S,l[25]=S,S=l[4]-S,l[4]=S,S=l[5]-S,l[5]=S,S=l[20]-S,l[20]=S,S=l[21]-S,l[21]=S,S=l[12]-S,l[12]=S,S=l[13]-S,l[13]=S,S=l[28]-S,l[28]=S,S=l[29]-S,l[29]=S,S=l[0],l[0]+=l[31],l[31]-=S,S=l[1],l[1]+=l[30],l[30]-=S,S=l[16],l[16]+=l[15],l[15]-=S,S=l[17],l[17]+=l[14],l[14]-=S,S=l[8],l[8]+=l[23],l[23]-=S,S=l[9],l[9]+=l[22],l[22]-=S,S=l[24],l[24]+=l[7],l[7]-=S,S=l[25],l[25]+=l[6],l[6]-=S,S=l[4],l[4]+=l[27],l[27]-=S,S=l[5],l[5]+=l[26],l[26]-=S,S=l[20],l[20]+=l[11],l[11]-=S,S=l[21],l[21]+=l[10],l[10]-=S,S=l[12],l[12]+=l[19],l[19]-=S,S=l[13],l[13]+=l[18],l[18]-=S,S=l[28],l[28]+=l[3],l[3]-=S,S=l[29],l[29]+=l[2],l[2]-=S}}function f(d,c){for(var l=0;l<3;l++){var m,v,C,b,_,g;b=d[c+2*3]*t[H.SHORT_TYPE][0]-d[c+5*3],m=d[c+0*3]*t[H.SHORT_TYPE][2]-d[c+3*3],v=b+m,C=b-m,b=d[c+5*3]*t[H.SHORT_TYPE][0]+d[c+2*3],m=d[c+3*3]*t[H.SHORT_TYPE][2]+d[c+0*3],_=b+m,g=-b+m,m=(d[c+1*3]*t[H.SHORT_TYPE][1]-d[c+4*3])*2069978111953089e-26,b=(d[c+4*3]*t[H.SHORT_TYPE][1]+d[c+1*3])*2069978111953089e-26,d[c+3*0]=v*190752519173728e-25+m,d[c+3*5]=-_*190752519173728e-25+b,C=C*.8660254037844387*1907525191737281e-26,_=_*.5*1907525191737281e-26+b,d[c+3*1]=C-_,d[c+3*2]=C+_,v=v*.5*1907525191737281e-26-m,g=g*.8660254037844387*1907525191737281e-26,d[c+3*3]=v+g,d[c+3*4]=v-g,c++}}function u(d,c,l){var m,v;{var C,b,_,g,R,P,S,L;C=l[17]-l[9],_=l[15]-l[11],g=l[14]-l[12],R=l[0]+l[8],P=l[1]+l[7],S=l[2]+l[6],L=l[3]+l[5],d[c+17]=R+S-L-(P-l[4]),v=(R+S-L)*s[19]+(P-l[4]),m=(C-_-g)*s[18],d[c+5]=m+v,d[c+6]=m-v,b=(l[16]-l[10])*s[18],P=P*s[19]+l[4],m=C*s[12]+b+_*s[13]+g*s[14],v=-R*s[16]+P-S*s[17]+L*s[15],d[c+1]=m+v,d[c+2]=m-v,m=C*s[13]-b-_*s[14]+g*s[12],v=-R*s[17]+P-S*s[15]+L*s[16],d[c+9]=m+v,d[c+10]=m-v,m=C*s[14]-b+_*s[12]-g*s[13],v=R*s[15]-P+S*s[16]-L*s[17],d[c+13]=m+v,d[c+14]=m-v}{var I,T,E,y,A,w,k,M;I=l[8]-l[0],E=l[6]-l[2],y=l[5]-l[3],A=l[17]+l[9],w=l[16]+l[10],k=l[15]+l[11],M=l[14]+l[12],d[c+0]=A+k+M+(w+l[13]),m=(A+k+M)*s[19]-(w+l[13]),v=(I-E+y)*s[18],d[c+11]=m+v,d[c+12]=m-v,T=(l[7]-l[1])*s[18],w=l[13]-w*s[19],m=A*s[15]-w+k*s[16]+M*s[17],v=I*s[14]+T+E*s[12]+y*s[13],d[c+3]=m+v,d[c+4]=m-v,m=-A*s[17]+w-k*s[15]-M*s[16],v=I*s[13]+T-E*s[14]-y*s[12],d[c+7]=m+v,d[c+8]=m-v,m=-A*s[16]+w-k*s[17]-M*s[15],v=I*s[12]-T+E*s[13]-y*s[14],d[c+15]=m+v,d[c+16]=m-v}}this.mdct_sub48=function(d,c,l){for(var m=c,v=286,C=0;C<d.channels_out;C++){for(var b=0;b<d.mode_gr;b++){for(var _,g=d.l3_side.tt[b][C],R=g.xr,P=0,S=d.sb_sample[C][1-b],L=0,I=0;I<18/2;I++)for(r(m,v,S[L]),r(m,v+32,S[L+1]),L+=2,v+=64,_=1;_<32;_+=2)S[L-1][_]*=-1;for(_=0;_<32;_++,P+=18){var T=g.block_type,E=d.sb_sample[C][b],y=d.sb_sample[C][1-b];if(g.mixed_block_flag!=0&&_<2&&(T=0),d.amp_filter[_]<1e-12)k9.fill(R,P+0,P+18,0);else{if(d.amp_filter[_]<1)for(var I=0;I<18;I++)y[I][o[_]]*=d.amp_filter[_];if(T==H.SHORT_TYPE){for(var I=-12/4;I<0;I++){var A=t[H.SHORT_TYPE][I+3];R[P+I*3+9]=E[9+I][o[_]]*A-E[8-I][o[_]],R[P+I*3+18]=E[14-I][o[_]]*A+E[15+I][o[_]],R[P+I*3+10]=E[15+I][o[_]]*A-E[14-I][o[_]],R[P+I*3+19]=y[2-I][o[_]]*A+y[3+I][o[_]],R[P+I*3+11]=y[3+I][o[_]]*A-y[2-I][o[_]],R[P+I*3+20]=y[8-I][o[_]]*A+y[9+I][o[_]]}f(R,P)}else{for(var w=S9(18),I=-36/4;I<0;I++){var k,M;k=t[T][I+27]*y[I+9][o[_]]+t[T][I+36]*y[8-I][o[_]],M=t[T][I+9]*E[I+9][o[_]]-t[T][I+18]*E[8-I][o[_]],w[I+9]=k-M*n[3+I+9],w[I+18]=k*n[3+I+9]+M}u(R,P,w)}}if(T!=H.SHORT_TYPE&&_!=0)for(var I=7;I>=0;--I){var x,F;x=R[P+I]*a[20+I]+R[P+-1-I]*i[28+I],F=R[P+I]*i[28+I]-R[P+-1-I]*a[20+I],R[P+-1-I]=x,R[P+I]=F}}}if(m=l,v=286,d.mode_gr==1)for(var V=0;V<18;V++)w9.arraycopy(d.sb_sample[C][1][V],0,d.sb_sample[C][0][V],0,32)}}}var A9=Ue.System,T9=Ue.new_float,x9=Ue.new_float_n;function Kr(){this.l=T9(H.SBMAX_l),this.s=x9([H.SBMAX_s,3]);var e=this;this.assign=function(t){A9.arraycopy(t.l,0,e.l,0,H.SBMAX_l);for(var n=0;n<H.SBMAX_s;n++)for(var s=0;s<3;s++)e.s[n][s]=t.s[n][s]}}function ka(){this.thm=new Kr,this.en=new Kr}function Vt(e){var t=e;this.ordinal=function(){return t}}Vt.STEREO=new Vt(0);Vt.JOINT_STEREO=new Vt(1);Vt.DUAL_CHANNEL=new Vt(2);Vt.MONO=new Vt(3);Vt.NOT_SET=new Vt(4);var cm=Ue.System,hr=Ue.VbrMode,um=Ue.new_array_n,dm=Ue.new_float,E9=Ue.new_float_n,R9=Ue.new_int,gr=Ue.assert;H.ENCDELAY=576;H.POSTDELAY=1152;H.MDCTDELAY=48;H.FFTOFFSET=224+H.MDCTDELAY;H.DECDELAY=528;H.SBLIMIT=32;H.CBANDS=64;H.SBPSY_l=21;H.SBPSY_s=12;H.SBMAX_l=22;H.SBMAX_s=13;H.PSFB21=6;H.PSFB12=6;H.BLKSIZE=1024;H.HBLKSIZE=H.BLKSIZE/2+1;H.BLKSIZE_s=256;H.HBLKSIZE_s=H.BLKSIZE_s/2+1;H.NORM_TYPE=0;H.START_TYPE=1;H.SHORT_TYPE=2;H.STOP_TYPE=3;H.MPG_MD_LR_LR=0;H.MPG_MD_LR_I=1;H.MPG_MD_MS_LR=2;H.MPG_MD_MS_I=3;H.fircoef=[-.0207887*5,-.0378413*5,-.0432472*5,-.031183*5,779609e-23*5,.0467745*5,.10091*5,.151365*5,.187098*5];function H(){var e=H.FFTOFFSET,t=H.MPG_MD_MS_LR,n=null;this.psy=null;var s=null,a=null,i=null;this.setModules=function(d,c,l,m){n=d,this.psy=c,s=c,a=m,i=l};var o=new C9;function r(d){var c,l;if(d.ATH.useAdjust==0){d.ATH.adjust=1;return}if(l=d.loudness_sq[0][0],c=d.loudness_sq[1][0],d.channels_out==2?(l+=d.loudness_sq[0][1],c+=d.loudness_sq[1][1]):(l+=l,c+=c),d.mode_gr==2&&(l=Math.max(l,c)),l*=.5,l*=d.ATH.aaSensitivityP,l>.03125)d.ATH.adjust>=1?d.ATH.adjust=1:d.ATH.adjust<d.ATH.adjustLimit&&(d.ATH.adjust=d.ATH.adjustLimit),d.ATH.adjustLimit=1;else{var m=31.98*l+625e-6;d.ATH.adjust>=m?(d.ATH.adjust*=m*.075+.925,d.ATH.adjust<m&&(d.ATH.adjust=m)):d.ATH.adjustLimit>=m?d.ATH.adjust=m:d.ATH.adjust<d.ATH.adjustLimit&&(d.ATH.adjust=d.ATH.adjustLimit),d.ATH.adjustLimit=m}}function f(d){var c,l;for(gr(d.bitrate_index>=0&&d.bitrate_index<16),gr(d.mode_ext>=0&&d.mode_ext<4),d.bitrate_stereoMode_Hist[d.bitrate_index][4]++,d.bitrate_stereoMode_Hist[15][4]++,d.channels_out==2&&(d.bitrate_stereoMode_Hist[d.bitrate_index][d.mode_ext]++,d.bitrate_stereoMode_Hist[15][d.mode_ext]++),c=0;c<d.mode_gr;++c)for(l=0;l<d.channels_out;++l){var m=d.l3_side.tt[c][l].block_type|0;d.l3_side.tt[c][l].mixed_block_flag!=0&&(m=4),d.bitrate_blockType_Hist[d.bitrate_index][m]++,d.bitrate_blockType_Hist[d.bitrate_index][5]++,d.bitrate_blockType_Hist[15][m]++,d.bitrate_blockType_Hist[15][5]++}}function u(d,c){var l=d.internal_flags,m,v;if(l.lame_encode_frame_init==0){var C,b,_=dm(2014),g=dm(2014);for(l.lame_encode_frame_init=1,C=0,b=0;C<286+576*(1+l.mode_gr);++C)C<576*l.mode_gr?(_[C]=0,l.channels_out==2&&(g[C]=0)):(_[C]=c[0][b],l.channels_out==2&&(g[C]=c[1][b]),++b);for(v=0;v<l.mode_gr;v++)for(m=0;m<l.channels_out;m++)l.l3_side.tt[v][m].block_type=H.SHORT_TYPE;o.mdct_sub48(l,_,g),gr(l.mf_size>=H.BLKSIZE+d.framesize-H.FFTOFFSET),gr(l.mf_size>=512+d.framesize-32)}}this.lame_encode_mp3_frame=function(d,c,l,m,v,C){var b,_=um([2,2]);_[0][0]=new ka,_[0][1]=new ka,_[1][0]=new ka,_[1][1]=new ka;var g=um([2,2]);g[0][0]=new ka,g[0][1]=new ka,g[1][0]=new ka,g[1][1]=new ka;var R,P=[null,null],S=d.internal_flags,L=E9([2,4]),I=[.5,.5],T=[[0,0],[0,0]],E=[[0,0],[0,0]],y,A,w;if(P[0]=c,P[1]=l,S.lame_encode_frame_init==0&&u(d,P),S.padding=0,(S.slot_lag-=S.frac_SpF)<0&&(S.slot_lag+=d.out_samplerate,S.padding=1),S.psymodel!=0){var k,M=[null,null],x=0,F=R9(2);for(w=0;w<S.mode_gr;w++){for(A=0;A<S.channels_out;A++)M[A]=P[A],x=576+w*576-H.FFTOFFSET;if(d.VBR==hr.vbr_mtrh||d.VBR==hr.vbr_mt?k=s.L3psycho_anal_vbr(d,M,x,w,_,g,T[w],E[w],L[w],F):k=s.L3psycho_anal_ns(d,M,x,w,_,g,T[w],E[w],L[w],F),k!=0)return-4;for(d.mode==Vt.JOINT_STEREO&&(I[w]=L[w][2]+L[w][3],I[w]>0&&(I[w]=L[w][3]/I[w])),A=0;A<S.channels_out;A++){var V=S.l3_side.tt[w][A];V.block_type=F[A],V.mixed_block_flag=0}}}else for(w=0;w<S.mode_gr;w++)for(A=0;A<S.channels_out;A++)S.l3_side.tt[w][A].block_type=H.NORM_TYPE,S.l3_side.tt[w][A].mixed_block_flag=0,E[w][A]=T[w][A]=700;if(r(S),o.mdct_sub48(S,P[0],P[1]),S.mode_ext=H.MPG_MD_LR_LR,d.force_ms)S.mode_ext=H.MPG_MD_MS_LR;else if(d.mode==Vt.JOINT_STEREO){var D=0,z=0;for(w=0;w<S.mode_gr;w++)for(A=0;A<S.channels_out;A++)D+=E[w][A],z+=T[w][A];if(D<=1*z){var p=S.l3_side.tt[0],B=S.l3_side.tt[S.mode_gr-1];p[0].block_type==p[1].block_type&&B[0].block_type==B[1].block_type&&(S.mode_ext=H.MPG_MD_MS_LR)}}if(S.mode_ext==t?(R=g,y=E):(R=_,y=T),d.analysis&&S.pinfo!=null)for(w=0;w<S.mode_gr;w++)for(A=0;A<S.channels_out;A++)S.pinfo.ms_ratio[w]=S.ms_ratio[w],S.pinfo.ms_ener_ratio[w]=I[w],S.pinfo.blocktype[w][A]=S.l3_side.tt[w][A].block_type,S.pinfo.pe[w][A]=y[w][A],cm.arraycopy(S.l3_side.tt[w][A].xr,0,S.pinfo.xr[w][A],0,576),S.mode_ext==t&&(S.pinfo.ers[w][A]=S.pinfo.ers[w][A+2],cm.arraycopy(S.pinfo.energy[w][A+2],0,S.pinfo.energy[w][A],0,S.pinfo.energy[w][A].length));if(d.VBR==hr.vbr_off||d.VBR==hr.vbr_abr){var U,$;for(U=0;U<18;U++)S.nsPsy.pefirbuf[U]=S.nsPsy.pefirbuf[U+1];for($=0,w=0;w<S.mode_gr;w++)for(A=0;A<S.channels_out;A++)$+=y[w][A];for(S.nsPsy.pefirbuf[18]=$,$=S.nsPsy.pefirbuf[9],U=0;U<9;U++)$+=(S.nsPsy.pefirbuf[U]+S.nsPsy.pefirbuf[18-U])*H.fircoef[U];for($=670*5*S.mode_gr*S.channels_out/$,w=0;w<S.mode_gr;w++)for(A=0;A<S.channels_out;A++)y[w][A]*=$}if(S.iteration_loop.iteration_loop(d,y,I,R),n.format_bitstream(d),b=n.copy_buffer(S,m,v,C,1),d.bWriteVbrTag&&a.addVbrFrame(d),d.analysis&&S.pinfo!=null){for(A=0;A<S.channels_out;A++){var ee;for(ee=0;ee<e;ee++)S.pinfo.pcmdata[A][ee]=S.pinfo.pcmdata[A][ee+d.framesize];for(ee=e;ee<1600;ee++)S.pinfo.pcmdata[A][ee]=P[A][ee-e]}i.set_frame_pinfo(d,R)}return f(S),b}}var fm=Ue.Util,mm=Ue.new_float;function M9(){var e=mm(H.BLKSIZE),t=mm(H.BLKSIZE_s/2),n=[.9238795325112867,.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475];function s(i,o,r){var f=0,u,d,c;r<<=1;var l=o+r;u=4;do{var m,v,C,b,_,g,R;R=u>>1,b=u,_=u<<1,g=_+b,u=_<<1,d=o,c=d+R;do{var P,S,L,I;S=i[d+0]-i[d+b],P=i[d+0]+i[d+b],I=i[d+_]-i[d+g],L=i[d+_]+i[d+g],i[d+_]=P-L,i[d+0]=P+L,i[d+g]=S-I,i[d+b]=S+I,S=i[c+0]-i[c+b],P=i[c+0]+i[c+b],I=fm.SQRT2*i[c+g],L=fm.SQRT2*i[c+_],i[c+_]=P-L,i[c+0]=P+L,i[c+g]=S-I,i[c+b]=S+I,c+=u,d+=u}while(d<l);for(v=n[f+0],m=n[f+1],C=1;C<R;C++){var T,E;T=1-2*m*m,E=2*m*v,d=o+C,c=o+b-C;do{var y,A,w,P,S,k,L,M,I,x;A=E*i[d+b]-T*i[c+b],y=T*i[d+b]+E*i[c+b],S=i[d+0]-y,P=i[d+0]+y,k=i[c+0]-A,w=i[c+0]+A,A=E*i[d+g]-T*i[c+g],y=T*i[d+g]+E*i[c+g],I=i[d+_]-y,L=i[d+_]+y,x=i[c+_]-A,M=i[c+_]+A,A=m*L-v*x,y=v*L+m*x,i[d+_]=P-y,i[d+0]=P+y,i[c+g]=k-A,i[c+b]=k+A,A=v*M-m*I,y=m*M+v*I,i[c+_]=w-y,i[c+0]=w+y,i[d+g]=S-A,i[d+b]=S+A,c+=u,d+=u}while(d<l);T=v,v=T*n[f+0]-m*n[f+1],m=T*n[f+1]+m*n[f+0]}f+=2}while(u<r)}var a=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(i,o,r,f,u){for(var d=0;d<3;d++){var c=H.BLKSIZE_s/2,l=65535&576/3*(d+1),m=H.BLKSIZE_s/8-1;do{var v,C,b,_,g,R=a[m<<2]&255;v=t[R]*f[r][u+R+l],g=t[127-R]*f[r][u+R+l+128],C=v-g,v=v+g,b=t[R+64]*f[r][u+R+l+64],g=t[63-R]*f[r][u+R+l+192],_=b-g,b=b+g,c-=4,o[d][c+0]=v+b,o[d][c+2]=v-b,o[d][c+1]=C+_,o[d][c+3]=C-_,v=t[R+1]*f[r][u+R+l+1],g=t[126-R]*f[r][u+R+l+129],C=v-g,v=v+g,b=t[R+65]*f[r][u+R+l+65],g=t[62-R]*f[r][u+R+l+193],_=b-g,b=b+g,o[d][c+H.BLKSIZE_s/2+0]=v+b,o[d][c+H.BLKSIZE_s/2+2]=v-b,o[d][c+H.BLKSIZE_s/2+1]=C+_,o[d][c+H.BLKSIZE_s/2+3]=C-_}while(--m>=0);s(o[d],c,H.BLKSIZE_s/2)}},this.fft_long=function(i,o,r,f,u){var d=H.BLKSIZE/8-1,c=H.BLKSIZE/2;do{var l,m,v,C,b,_=a[d]&255;l=e[_]*f[r][u+_],b=e[_+512]*f[r][u+_+512],m=l-b,l=l+b,v=e[_+256]*f[r][u+_+256],b=e[_+768]*f[r][u+_+768],C=v-b,v=v+b,c-=4,o[c+0]=l+v,o[c+2]=l-v,o[c+1]=m+C,o[c+3]=m-C,l=e[_+1]*f[r][u+_+1],b=e[_+513]*f[r][u+_+513],m=l-b,l=l+b,v=e[_+257]*f[r][u+_+257],b=e[_+769]*f[r][u+_+769],C=v-b,v=v+b,o[c+H.BLKSIZE/2+0]=l+v,o[c+H.BLKSIZE/2+2]=l-v,o[c+H.BLKSIZE/2+1]=m+C,o[c+H.BLKSIZE/2+3]=m-C}while(--d>=0);s(o,c,H.BLKSIZE/2)},this.init_fft=function(i){for(var o=0;o<H.BLKSIZE;o++)e[o]=.42-.5*Math.cos(2*Math.PI*(o+.5)/H.BLKSIZE)+.08*Math.cos(4*Math.PI*(o+.5)/H.BLKSIZE);for(var o=0;o<H.BLKSIZE_s/2;o++)t[o]=.5*(1-Math.cos(2*Math.PI*(o+.5)/H.BLKSIZE_s))}}var hi=Ue.VbrMode,vm=Ue.Float,gi=Ue.ShortBlock,Nn=Ue.Util,I9=Ue.Arrays,hn=Ue.new_float,os=Ue.new_float_n,Wa=Ue.new_int,Ct=Ue.assert;function uc(){var e=new M9,t=2.302585092994046,n=2,s=16,a=2,i=16,o=.34,r=1/(14752*14752)/(H.BLKSIZE/2),f=.01,u=.8,d=.6,c=.3,l=3.5,m=21,v=.2302585093;function C(O){return O}function b(O,N){for(var Z=0,ne=0;ne<H.BLKSIZE/2;++ne)Z+=O[ne]*N.ATH.eql_w[ne];return Z*=r,Z}function _(O,N,Z,ne,oe,W,le,fe,ce,ye,q){var _e=O.internal_flags;if(ce<2)e.fft_long(_e,ne[oe],ce,ye,q),e.fft_short(_e,W[le],ce,ye,q);else if(ce==2){for(var ue=H.BLKSIZE-1;ue>=0;--ue){var Oe=ne[oe+0][ue],Re=ne[oe+1][ue];ne[oe+0][ue]=(Oe+Re)*Nn.SQRT2*.5,ne[oe+1][ue]=(Oe-Re)*Nn.SQRT2*.5}for(var tt=2;tt>=0;--tt)for(var ue=H.BLKSIZE_s-1;ue>=0;--ue){var Oe=W[le+0][tt][ue],Re=W[le+1][tt][ue];W[le+0][tt][ue]=(Oe+Re)*Nn.SQRT2*.5,W[le+1][tt][ue]=(Oe-Re)*Nn.SQRT2*.5}}N[0]=ne[oe+0][0],N[0]*=N[0];for(var ue=H.BLKSIZE/2-1;ue>=0;--ue){var ge=ne[oe+0][H.BLKSIZE/2-ue],Ye=ne[oe+0][H.BLKSIZE/2+ue];N[H.BLKSIZE/2-ue]=(ge*ge+Ye*Ye)*.5}for(var tt=2;tt>=0;--tt){Z[tt][0]=W[le+0][tt][0],Z[tt][0]*=Z[tt][0];for(var ue=H.BLKSIZE_s/2-1;ue>=0;--ue){var ge=W[le+0][tt][H.BLKSIZE_s/2-ue],Ye=W[le+0][tt][H.BLKSIZE_s/2+ue];Z[tt][H.BLKSIZE_s/2-ue]=(ge*ge+Ye*Ye)*.5}}{for(var ft=0,ue=11;ue<H.HBLKSIZE;ue++)ft+=N[ue];_e.tot_ener[ce]=ft}if(O.analysis){for(var ue=0;ue<H.HBLKSIZE;ue++)_e.pinfo.energy[fe][ce][ue]=_e.pinfo.energy_save[ce][ue],_e.pinfo.energy_save[ce][ue]=N[ue];_e.pinfo.pe[fe][ce]=_e.pe[ce]}O.athaa_loudapprox==2&&ce<2&&(_e.loudness_sq[fe][ce]=_e.loudness_sq_save[ce],_e.loudness_sq_save[ce]=b(N,_e))}var g=8,R=23,P=15,S,L,I,T=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749];function E(){S=Math.pow(10,(g+1)/16),L=Math.pow(10,(R+1)/16),I=Math.pow(10,P/10)}var y=[3.3246*3.3246,3.23837*3.23837,3.15437*3.15437,3.00412*3.00412,2.86103*2.86103,2.65407*2.65407,2.46209*2.46209,2.284*2.284,2.11879*2.11879,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,1.56911*1.56911,1.46658*1.46658,1.37074*1.37074,1.31036*1.31036,1.25264*1.25264,1.20648*1.20648,1.16203*1.16203,1.12765*1.12765,1.09428*1.09428,1.0659*1.0659,1.03826*1.03826,1.01895*1.01895,1],A=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1],w=[2.35364*2.35364,2.29259*2.29259,2.23313*2.23313,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,1.49999*1.49999,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.11084*1.11084,1.03826*1.03826];function k(O,N,Z,ne,oe,W){var le;if(N>O)if(N<O*L)le=N/O;else return O+N;else{if(O>=N*L)return O+N;le=O/N}if(O+=N,ne+3<=6){if(le>=S)return O;var fe=0|Nn.FAST_LOG10_X(le,16);return O*A[fe]}var fe=0|Nn.FAST_LOG10_X(le,16);if(N=oe.ATH.cb_l[Z]*oe.ATH.adjust,O<I*N){if(O>N){var ce,ye;return ce=1,fe<=13&&(ce=w[fe]),ye=Nn.FAST_LOG10_X(O/N,10/15),O*((y[fe]-ce)*ye+ce)}return fe>13?O:O*w[fe]}return O*y[fe]}var M=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1];function x(O,N,Z){var ne;if(O<0&&(O=0),N<0&&(N=0),O<=0)return N;if(N<=0)return O;if(N>O?ne=N/O:ne=O/N,Z>=-2&&Z<=2){if(ne>=S)return O+N;var oe=0|Nn.FAST_LOG10_X(ne,16);return(O+N)*M[oe]}return ne<L?O+N:(O<N&&(O=N),O)}function F(O,N){var Z=O.internal_flags;if(Z.channels_out>1){for(var ne=0;ne<H.SBMAX_l;ne++){var oe=Z.thm[0].l[ne],W=Z.thm[1].l[ne];Z.thm[0].l[ne]+=W*N,Z.thm[1].l[ne]+=oe*N}for(var ne=0;ne<H.SBMAX_s;ne++)for(var le=0;le<3;le++){var oe=Z.thm[0].s[ne][le],W=Z.thm[1].s[ne][le];Z.thm[0].s[ne][le]+=W*N,Z.thm[1].s[ne][le]+=oe*N}}}function V(O){for(var N=0;N<H.SBMAX_l;N++)if(!(O.thm[0].l[N]>1.58*O.thm[1].l[N]||O.thm[1].l[N]>1.58*O.thm[0].l[N])){var Z=O.mld_l[N]*O.en[3].l[N],ne=Math.max(O.thm[2].l[N],Math.min(O.thm[3].l[N],Z));Z=O.mld_l[N]*O.en[2].l[N];var oe=Math.max(O.thm[3].l[N],Math.min(O.thm[2].l[N],Z));O.thm[2].l[N]=ne,O.thm[3].l[N]=oe}for(var N=0;N<H.SBMAX_s;N++)for(var W=0;W<3;W++)if(!(O.thm[0].s[N][W]>1.58*O.thm[1].s[N][W]||O.thm[1].s[N][W]>1.58*O.thm[0].s[N][W])){var Z=O.mld_s[N]*O.en[3].s[N][W],ne=Math.max(O.thm[2].s[N][W],Math.min(O.thm[3].s[N][W],Z));Z=O.mld_s[N]*O.en[2].s[N][W];var oe=Math.max(O.thm[3].s[N][W],Math.min(O.thm[2].s[N][W],Z));O.thm[2].s[N][W]=ne,O.thm[3].s[N][W]=oe}}function D(O,N,Z){var ne=N,oe=Math.pow(10,Z);N*=2,ne*=2;for(var W=0;W<H.SBMAX_l;W++){var le,fe,ce,ye;if(ye=O.ATH.cb_l[O.bm_l[W]]*oe,le=Math.min(Math.max(O.thm[0].l[W],ye),Math.max(O.thm[1].l[W],ye)),fe=Math.max(O.thm[2].l[W],ye),ce=Math.max(O.thm[3].l[W],ye),le*N<fe+ce){var q=le*ne/(fe+ce);fe*=q,ce*=q}O.thm[2].l[W]=Math.min(fe,O.thm[2].l[W]),O.thm[3].l[W]=Math.min(ce,O.thm[3].l[W])}oe*=H.BLKSIZE_s/H.BLKSIZE;for(var W=0;W<H.SBMAX_s;W++)for(var _e=0;_e<3;_e++){var le,fe,ce,ye;if(ye=O.ATH.cb_s[O.bm_s[W]]*oe,le=Math.min(Math.max(O.thm[0].s[W][_e],ye),Math.max(O.thm[1].s[W][_e],ye)),fe=Math.max(O.thm[2].s[W][_e],ye),ce=Math.max(O.thm[3].s[W][_e],ye),le*N<fe+ce){var q=le*N/(fe+ce);fe*=q,ce*=q}O.thm[2].s[W][_e]=Math.min(O.thm[2].s[W][_e],fe),O.thm[3].s[W][_e]=Math.min(O.thm[3].s[W][_e],ce)}}function z(O,N,Z,ne,oe){var W,le,fe=0,ce=0;for(W=le=0;W<H.SBMAX_s;++le,++W){for(var ye=O.bo_s[W],q=O.npart_s,_e=ye<q?ye:q;le<_e;)Ct(N[le]>=0),Ct(Z[le]>=0),fe+=N[le],ce+=Z[le],le++;if(O.en[ne].s[W][oe]=fe,O.thm[ne].s[W][oe]=ce,le>=q){++W;break}Ct(N[le]>=0),Ct(Z[le]>=0);{var ue=O.PSY.bo_s_weight[W],Oe=1-ue;fe=ue*N[le],ce=ue*Z[le],O.en[ne].s[W][oe]+=fe,O.thm[ne].s[W][oe]+=ce,fe=Oe*N[le],ce=Oe*Z[le]}}for(;W<H.SBMAX_s;++W)O.en[ne].s[W][oe]=0,O.thm[ne].s[W][oe]=0}function p(O,N,Z,ne){var oe,W,le=0,fe=0;for(oe=W=0;oe<H.SBMAX_l;++W,++oe){for(var ce=O.bo_l[oe],ye=O.npart_l,q=ce<ye?ce:ye;W<q;)Ct(N[W]>=0),Ct(Z[W]>=0),le+=N[W],fe+=Z[W],W++;if(O.en[ne].l[oe]=le,O.thm[ne].l[oe]=fe,W>=ye){++oe;break}Ct(N[W]>=0),Ct(Z[W]>=0);{var _e=O.PSY.bo_l_weight[oe],ue=1-_e;le=_e*N[W],fe=_e*Z[W],O.en[ne].l[oe]+=le,O.thm[ne].l[oe]+=fe,le=ue*N[W],fe=ue*Z[W]}}for(;oe<H.SBMAX_l;++oe)O.en[ne].l[oe]=0,O.thm[ne].l[oe]=0}function B(O,N,Z,ne,oe,W){var le=O.internal_flags,fe,ce;for(ce=fe=0;ce<le.npart_s;++ce){for(var ye=0,q=le.numlines_s[ce],_e=0;_e<q;++_e,++fe){var ue=N[W][fe];ye+=ue}Z[ce]=ye}for(Ct(ce==le.npart_s),fe=ce=0;ce<le.npart_s;ce++){var Oe=le.s3ind_s[ce][0],Re=le.s3_ss[fe++]*Z[Oe];for(++Oe;Oe<=le.s3ind_s[ce][1];)Re+=le.s3_ss[fe]*Z[Oe],++fe,++Oe;{var tt=a*le.nb_s1[oe][ce];ne[ce]=Math.min(Re,tt)}if(le.blocktype_old[oe&1]==H.SHORT_TYPE){var tt=i*le.nb_s2[oe][ce],ge=ne[ce];ne[ce]=Math.min(tt,ge)}le.nb_s2[oe][ce]=le.nb_s1[oe][ce],le.nb_s1[oe][ce]=Re,Ct(ne[ce]>=0)}for(;ce<=H.CBANDS;++ce)Z[ce]=0,ne[ce]=0}function U(O,N,Z,ne){var oe=O.internal_flags;O.short_blocks==gi.short_block_coupled&&!(N[0]!=0&&N[1]!=0)&&(N[0]=N[1]=0);for(var W=0;W<oe.channels_out;W++)ne[W]=H.NORM_TYPE,O.short_blocks==gi.short_block_dispensed&&(N[W]=1),O.short_blocks==gi.short_block_forced&&(N[W]=0),N[W]!=0?(Ct(oe.blocktype_old[W]!=H.START_TYPE),oe.blocktype_old[W]==H.SHORT_TYPE&&(ne[W]=H.STOP_TYPE)):(ne[W]=H.SHORT_TYPE,oe.blocktype_old[W]==H.NORM_TYPE&&(oe.blocktype_old[W]=H.START_TYPE),oe.blocktype_old[W]==H.STOP_TYPE&&(oe.blocktype_old[W]=H.SHORT_TYPE)),Z[W]=oe.blocktype_old[W],oe.blocktype_old[W]=ne[W]}function $(O,N,Z){return Z>=1?O:Z<=0?N:N>0?Math.pow(O/N,Z)*N:0}var ee=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130];function re(O,N){for(var Z=309.07,ne=0;ne<H.SBMAX_s-1;ne++)for(var oe=0;oe<3;oe++){var W=O.thm.s[ne][oe];if(W>0){var le=W*N,fe=O.en.s[ne][oe];fe>le&&(fe>le*1e10?Z+=ee[ne]*(10*t):Z+=ee[ne]*Nn.FAST_LOG10(fe/le))}}return Z}var G=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1];function ae(O,N){for(var Z=281.0575,ne=0;ne<H.SBMAX_l-1;ne++){var oe=O.thm.l[ne];if(oe>0){var W=oe*N,le=O.en.l[ne];le>W&&(le>W*1e10?Z+=G[ne]*(10*t):Z+=G[ne]*Nn.FAST_LOG10(le/W))}}return Z}function X(O,N,Z,ne,oe){var W,le;for(W=le=0;W<O.npart_l;++W){var fe=0,ce=0,ye;for(ye=0;ye<O.numlines_l[W];++ye,++le){var q=N[le];fe+=q,ce<q&&(ce=q)}Z[W]=fe,ne[W]=ce,oe[W]=fe*O.rnumlines_l[W],Ct(O.rnumlines_l[W]>=0),Ct(Z[W]>=0),Ct(ne[W]>=0),Ct(oe[W]>=0)}}function he(O,N,Z,ne){var oe=T.length-1,W=0,le=Z[W]+Z[W+1];if(le>0){var fe=N[W];fe<N[W+1]&&(fe=N[W+1]),Ct(O.numlines_l[W]+O.numlines_l[W+1]-1>0),le=20*(fe*2-le)/(le*(O.numlines_l[W]+O.numlines_l[W+1]-1));var ce=0|le;ce>oe&&(ce=oe),ne[W]=ce}else ne[W]=0;for(W=1;W<O.npart_l-1;W++)if(le=Z[W-1]+Z[W]+Z[W+1],le>0){var fe=N[W-1];fe<N[W]&&(fe=N[W]),fe<N[W+1]&&(fe=N[W+1]),Ct(O.numlines_l[W-1]+O.numlines_l[W]+O.numlines_l[W+1]-1>0),le=20*(fe*3-le)/(le*(O.numlines_l[W-1]+O.numlines_l[W]+O.numlines_l[W+1]-1));var ce=0|le;ce>oe&&(ce=oe),ne[W]=ce}else ne[W]=0;if(Ct(W==O.npart_l-1),le=Z[W-1]+Z[W],le>0){var fe=N[W-1];fe<N[W]&&(fe=N[W]),Ct(O.numlines_l[W-1]+O.numlines_l[W]-1>0),le=20*(fe*2-le)/(le*(O.numlines_l[W-1]+O.numlines_l[W]-1));var ce=0|le;ce>oe&&(ce=oe),ne[W]=ce}else ne[W]=0;Ct(W==O.npart_l-1)}var we=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];this.L3psycho_anal_ns=function(O,N,Z,ne,oe,W,le,fe,ce,ye){var q=O.internal_flags,_e=os([2,H.BLKSIZE]),ue=os([2,3,H.BLKSIZE_s]),Oe=hn(H.CBANDS+1),Re=hn(H.CBANDS+1),tt=hn(H.CBANDS+2),ge=Wa(2),Ye=Wa(2),ft,Pe,Qe,$e,ct,tn,Ke,pt,Et=os([2,576]),on,Wn=Wa(H.CBANDS+2),mn=Wa(H.CBANDS+2);for(I9.fill(mn,0),ft=q.channels_out,O.mode==Vt.JOINT_STEREO&&(ft=4),O.VBR==hi.vbr_off?on=q.ResvMax==0?0:q.ResvSize/q.ResvMax*.5:O.VBR==hi.vbr_rh||O.VBR==hi.vbr_mtrh||O.VBR==hi.vbr_mt?on=.6:on=1,Pe=0;Pe<q.channels_out;Pe++){var rn=N[Pe],Dn=Z+576-350-m+192;for($e=0;$e<576;$e++){var Yn,Kn;for(Yn=rn[Dn+$e+10],Kn=0,ct=0;ct<(m-1)/2-1;ct+=2)Yn+=we[ct]*(rn[Dn+$e+ct]+rn[Dn+$e+m-ct]),Kn+=we[ct+1]*(rn[Dn+$e+ct+1]+rn[Dn+$e+m-ct-1]);Et[Pe][$e]=Yn+Kn}oe[ne][Pe].en.assign(q.en[Pe]),oe[ne][Pe].thm.assign(q.thm[Pe]),ft>2&&(W[ne][Pe].en.assign(q.en[Pe+2]),W[ne][Pe].thm.assign(q.thm[Pe+2]))}for(Pe=0;Pe<ft;Pe++){var vs,hs,Tn=hn(12),Rs=[0,0,0,0],vi=hn(12),Fl=1,Ld,Od=hn(H.CBANDS),Pd=hn(H.CBANDS),ln=[0,0,0,0],$d=hn(H.HBLKSIZE),Fd=os([3,H.HBLKSIZE_s]);for(Ct(q.npart_s<=H.CBANDS),Ct(q.npart_l<=H.CBANDS),$e=0;$e<3;$e++)Tn[$e]=q.nsPsy.last_en_subshort[Pe][$e+6],Ct(q.nsPsy.last_en_subshort[Pe][$e+4]>0),vi[$e]=Tn[$e]/q.nsPsy.last_en_subshort[Pe][$e+4],Rs[0]+=Tn[$e];if(Pe==2)for($e=0;$e<576;$e++){var Dl,Vl;Dl=Et[0][$e],Vl=Et[1][$e],Et[0][$e]=Dl+Vl,Et[1][$e]=Dl-Vl}{var Dd=Et[Pe&1],qi=0;for($e=0;$e<9;$e++){for(var Rg=qi+64,yn=1;qi<Rg;qi++)yn<Math.abs(Dd[qi])&&(yn=Math.abs(Dd[qi]));q.nsPsy.last_en_subshort[Pe][$e]=Tn[$e+3]=yn,Rs[1+$e/3]+=yn,yn>Tn[$e+3-2]?(Ct(Tn[$e+3-2]>0),yn=yn/Tn[$e+3-2]):Tn[$e+3-2]>yn*10?yn=Tn[$e+3-2]/(yn*10):yn=0,vi[$e+3]=yn}}if(O.analysis){var Nl=vi[0];for($e=1;$e<12;$e++)Nl<vi[$e]&&(Nl=vi[$e]);q.pinfo.ers[ne][Pe]=q.pinfo.ers_save[Pe],q.pinfo.ers_save[Pe]=Nl}for(Ld=Pe==3?q.nsPsy.attackthre_s:q.nsPsy.attackthre,$e=0;$e<12;$e++)ln[$e/3]==0&&vi[$e]>Ld&&(ln[$e/3]=$e%3+1);for($e=1;$e<4;$e++){var jl;Rs[$e-1]>Rs[$e]?(Ct(Rs[$e]>0),jl=Rs[$e-1]/Rs[$e]):(Ct(Rs[$e-1]>0),jl=Rs[$e]/Rs[$e-1]),jl<1.7&&(ln[$e]=0,$e==1&&(ln[0]=0))}for(ln[0]!=0&&q.nsPsy.lastAttacks[Pe]!=0&&(ln[0]=0),(q.nsPsy.lastAttacks[Pe]==3||ln[0]+ln[1]+ln[2]+ln[3]!=0)&&(Fl=0,ln[1]!=0&&ln[0]!=0&&(ln[1]=0),ln[2]!=0&&ln[1]!=0&&(ln[2]=0),ln[3]!=0&&ln[2]!=0&&(ln[3]=0)),Pe<2?Ye[Pe]=Fl:Fl==0&&(Ye[0]=Ye[1]=0),ce[Pe]=q.tot_ener[Pe],hs=ue,vs=_e,_(O,$d,Fd,vs,Pe&1,hs,Pe&1,ne,Pe,N,Z),X(q,$d,Oe,Od,Pd),he(q,Od,Pd,Wn),pt=0;pt<3;pt++){var Hl,Vn;for(B(O,Fd,Re,tt,Pe,pt),z(q,Re,tt,Pe,pt),Ke=0;Ke<H.SBMAX_s;Ke++){if(Vn=q.thm[Pe].s[Ke][pt],Vn*=u,ln[pt]>=2||ln[pt+1]==1){var Wi=pt!=0?pt-1:2,yn=$(q.thm[Pe].s[Ke][Wi],Vn,d*on);Vn=Math.min(Vn,yn)}if(ln[pt]==1){var Wi=pt!=0?pt-1:2,yn=$(q.thm[Pe].s[Ke][Wi],Vn,c*on);Vn=Math.min(Vn,yn)}else if(pt!=0&&ln[pt-1]==3||pt==0&&q.nsPsy.lastAttacks[Pe]==3){var Wi=pt!=2?pt+1:0,yn=$(q.thm[Pe].s[Ke][Wi],Vn,c*on);Vn=Math.min(Vn,yn)}Hl=Tn[pt*3+3]+Tn[pt*3+4]+Tn[pt*3+5],Tn[pt*3+5]*6<Hl&&(Vn*=.5,Tn[pt*3+4]*6<Hl&&(Vn*=.5)),q.thm[Pe].s[Ke][pt]=Vn}}for(q.nsPsy.lastAttacks[Pe]=ln[2],tn=0,Qe=0;Qe<q.npart_l;Qe++){for(var Na=q.s3ind[Qe][0],zl=Oe[Na]*T[Wn[Na]],ja=q.s3_ll[tn++]*zl;++Na<=q.s3ind[Qe][1];)zl=Oe[Na]*T[Wn[Na]],ja=k(ja,q.s3_ll[tn++]*zl,Na,Na-Qe,q);ja*=.158489319246111,q.blocktype_old[Pe&1]==H.SHORT_TYPE?tt[Qe]=ja:tt[Qe]=$(Math.min(ja,Math.min(n*q.nb_1[Pe][Qe],s*q.nb_2[Pe][Qe])),ja,on),q.nb_2[Pe][Qe]=q.nb_1[Pe][Qe],q.nb_1[Pe][Qe]=ja}for(;Qe<=H.CBANDS;++Qe)Oe[Qe]=0,tt[Qe]=0;p(q,Oe,tt,Pe)}if((O.mode==Vt.STEREO||O.mode==Vt.JOINT_STEREO)&&O.interChRatio>0&&F(O,O.interChRatio),O.mode==Vt.JOINT_STEREO){var Ul;V(q),Ul=O.msfix,Math.abs(Ul)>0&&D(q,Ul,O.ATHlower*q.ATH.adjust)}for(U(O,Ye,ye,ge),Pe=0;Pe<ft;Pe++){var Yi,Ki=0,tr,nr;Pe>1?(Yi=fe,Ki=-2,tr=H.NORM_TYPE,(ye[0]==H.SHORT_TYPE||ye[1]==H.SHORT_TYPE)&&(tr=H.SHORT_TYPE),nr=W[ne][Pe-2]):(Yi=le,Ki=0,tr=ye[Pe],nr=oe[ne][Pe]),tr==H.SHORT_TYPE?Yi[Ki+Pe]=re(nr,q.masking_lower):Yi[Ki+Pe]=ae(nr,q.masking_lower),O.analysis&&(q.pinfo.pe[ne][Pe]=Yi[Ki+Pe])}return 0};function Ie(O,N,Z,ne,oe,W,le,fe){var ce=O.internal_flags;if(ne<2)e.fft_long(ce,le[fe],ne,N,Z);else if(ne==2)for(var ye=H.BLKSIZE-1;ye>=0;--ye){var q=le[fe+0][ye],_e=le[fe+1][ye];le[fe+0][ye]=(q+_e)*Nn.SQRT2*.5,le[fe+1][ye]=(q-_e)*Nn.SQRT2*.5}W[0]=le[fe+0][0],W[0]*=W[0];for(var ye=H.BLKSIZE/2-1;ye>=0;--ye){var ue=le[fe+0][H.BLKSIZE/2-ye],Oe=le[fe+0][H.BLKSIZE/2+ye];W[H.BLKSIZE/2-ye]=(ue*ue+Oe*Oe)*.5}{for(var Re=0,ye=11;ye<H.HBLKSIZE;ye++)Re+=W[ye];ce.tot_ener[ne]=Re}if(O.analysis){for(var ye=0;ye<H.HBLKSIZE;ye++)ce.pinfo.energy[oe][ne][ye]=ce.pinfo.energy_save[ne][ye],ce.pinfo.energy_save[ne][ye]=W[ye];ce.pinfo.pe[oe][ne]=ce.pe[ne]}}function K(O,N,Z,ne,oe,W,le,fe){var ce=O.internal_flags;if(oe==0&&ne<2&&e.fft_short(ce,le[fe],ne,N,Z),ne==2)for(var ye=H.BLKSIZE_s-1;ye>=0;--ye){var q=le[fe+0][oe][ye],_e=le[fe+1][oe][ye];le[fe+0][oe][ye]=(q+_e)*Nn.SQRT2*.5,le[fe+1][oe][ye]=(q-_e)*Nn.SQRT2*.5}W[oe][0]=le[fe+0][oe][0],W[oe][0]*=W[oe][0];for(var ye=H.BLKSIZE_s/2-1;ye>=0;--ye){var ue=le[fe+0][oe][H.BLKSIZE_s/2-ye],Oe=le[fe+0][oe][H.BLKSIZE_s/2+ye];W[oe][H.BLKSIZE_s/2-ye]=(ue*ue+Oe*Oe)*.5}}function te(O,N,Z,ne){var oe=O.internal_flags;O.athaa_loudapprox==2&&Z<2&&(oe.loudness_sq[N][Z]=oe.loudness_sq_save[Z],oe.loudness_sq_save[Z]=b(ne,oe))}var ve=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];function Ce(O,N,Z,ne,oe,W,le,fe,ce,ye){for(var q=os([2,576]),_e=O.internal_flags,ue=_e.channels_out,Oe=O.mode==Vt.JOINT_STEREO?4:ue,Re=0;Re<ue;Re++){firbuf=N[Re];for(var tt=Z+576-350-m+192,ge=0;ge<576;ge++){var Ye,ft;Ye=firbuf[tt+ge+10],ft=0;for(var Pe=0;Pe<(m-1)/2-1;Pe+=2)Ye+=ve[Pe]*(firbuf[tt+ge+Pe]+firbuf[tt+ge+m-Pe]),ft+=ve[Pe+1]*(firbuf[tt+ge+Pe+1]+firbuf[tt+ge+m-Pe-1]);q[Re][ge]=Ye+ft}oe[ne][Re].en.assign(_e.en[Re]),oe[ne][Re].thm.assign(_e.thm[Re]),Oe>2&&(W[ne][Re].en.assign(_e.en[Re+2]),W[ne][Re].thm.assign(_e.thm[Re+2]))}for(var Re=0;Re<Oe;Re++){var Qe=hn(12),$e=hn(12),ct=[0,0,0,0],tn=q[Re&1],Ke=0,pt=Re==3?_e.nsPsy.attackthre_s:_e.nsPsy.attackthre,Et=1;if(Re==2)for(var ge=0,Pe=576;Pe>0;++ge,--Pe){var on=q[0][ge],Wn=q[1][ge];q[0][ge]=on+Wn,q[1][ge]=on-Wn}for(var ge=0;ge<3;ge++)$e[ge]=_e.nsPsy.last_en_subshort[Re][ge+6],Ct(_e.nsPsy.last_en_subshort[Re][ge+4]>0),Qe[ge]=$e[ge]/_e.nsPsy.last_en_subshort[Re][ge+4],ct[0]+=$e[ge];for(var ge=0;ge<9;ge++){for(var mn=Ke+64,rn=1;Ke<mn;Ke++)rn<Math.abs(tn[Ke])&&(rn=Math.abs(tn[Ke]));_e.nsPsy.last_en_subshort[Re][ge]=$e[ge+3]=rn,ct[1+ge/3]+=rn,rn>$e[ge+3-2]?(Ct($e[ge+3-2]>0),rn=rn/$e[ge+3-2]):$e[ge+3-2]>rn*10?rn=$e[ge+3-2]/(rn*10):rn=0,Qe[ge+3]=rn}for(var ge=0;ge<3;++ge){var Dn=$e[ge*3+3]+$e[ge*3+4]+$e[ge*3+5],Yn=1;$e[ge*3+5]*6<Dn&&(Yn*=.5,$e[ge*3+4]*6<Dn&&(Yn*=.5)),fe[Re][ge]=Yn}if(O.analysis){for(var Kn=Qe[0],ge=1;ge<12;ge++)Kn<Qe[ge]&&(Kn=Qe[ge]);_e.pinfo.ers[ne][Re]=_e.pinfo.ers_save[Re],_e.pinfo.ers_save[Re]=Kn}for(var ge=0;ge<12;ge++)ce[Re][ge/3]==0&&Qe[ge]>pt&&(ce[Re][ge/3]=ge%3+1);for(var ge=1;ge<4;ge++){var vs=ct[ge-1],hs=ct[ge],Tn=Math.max(vs,hs);Tn<4e4&&vs<1.7*hs&&hs<1.7*vs&&(ge==1&&ce[Re][0]<=ce[Re][ge]&&(ce[Re][0]=0),ce[Re][ge]=0)}ce[Re][0]<=_e.nsPsy.lastAttacks[Re]&&(ce[Re][0]=0),(_e.nsPsy.lastAttacks[Re]==3||ce[Re][0]+ce[Re][1]+ce[Re][2]+ce[Re][3]!=0)&&(Et=0,ce[Re][1]!=0&&ce[Re][0]!=0&&(ce[Re][1]=0),ce[Re][2]!=0&&ce[Re][1]!=0&&(ce[Re][2]=0),ce[Re][3]!=0&&ce[Re][2]!=0&&(ce[Re][3]=0)),Re<2?ye[Re]=Et:Et==0&&(ye[0]=ye[1]=0),le[Re]=_e.tot_ener[Re]}}function Ae(O,N,Z){if(Z==0)for(var ne=0;ne<O.npart_s;ne++)O.nb_s2[N][ne]=O.nb_s1[N][ne],O.nb_s1[N][ne]=0}function Be(O,N){for(var Z=0;Z<O.npart_l;Z++)O.nb_2[N][Z]=O.nb_1[N][Z],O.nb_1[N][Z]=0}function He(O,N,Z,ne){var oe=T.length-1,W=0,le=Z[W]+Z[W+1];if(le>0){var fe=N[W];fe<N[W+1]&&(fe=N[W+1]),Ct(O.numlines_s[W]+O.numlines_s[W+1]-1>0),le=20*(fe*2-le)/(le*(O.numlines_s[W]+O.numlines_s[W+1]-1));var ce=0|le;ce>oe&&(ce=oe),ne[W]=ce}else ne[W]=0;for(W=1;W<O.npart_s-1;W++)if(le=Z[W-1]+Z[W]+Z[W+1],Ct(W+1<O.npart_s),le>0){var fe=N[W-1];fe<N[W]&&(fe=N[W]),fe<N[W+1]&&(fe=N[W+1]),Ct(O.numlines_s[W-1]+O.numlines_s[W]+O.numlines_s[W+1]-1>0),le=20*(fe*3-le)/(le*(O.numlines_s[W-1]+O.numlines_s[W]+O.numlines_s[W+1]-1));var ce=0|le;ce>oe&&(ce=oe),ne[W]=ce}else ne[W]=0;if(Ct(W==O.npart_s-1),le=Z[W-1]+Z[W],le>0){var fe=N[W-1];fe<N[W]&&(fe=N[W]),Ct(O.numlines_s[W-1]+O.numlines_s[W]-1>0),le=20*(fe*2-le)/(le*(O.numlines_s[W-1]+O.numlines_s[W]-1));var ce=0|le;ce>oe&&(ce=oe),ne[W]=ce}else ne[W]=0;Ct(W==O.npart_s-1)}function Fe(O,N,Z,ne,oe,W){var le=O.internal_flags,fe=new float[H.CBANDS],ce=hn(H.CBANDS),ye,q,_e,ue=new int[H.CBANDS];for(_e=q=0;_e<le.npart_s;++_e){var Oe=0,Re=0,tt=le.numlines_s[_e];for(ye=0;ye<tt;++ye,++q){var ge=N[W][q];Oe+=ge,Re<ge&&(Re=ge)}Z[_e]=Oe,fe[_e]=Re,ce[_e]=Oe/tt,Ct(ce[_e]>=0)}for(Ct(_e==le.npart_s);_e<H.CBANDS;++_e)fe[_e]=0,ce[_e]=0;for(He(le,fe,ce,ue),q=_e=0;_e<le.npart_s;_e++){var Ye=le.s3ind_s[_e][0],ft=le.s3ind_s[_e][1],Pe,Qe,$e,ct,tn;for(Pe=ue[Ye],Qe=1,ct=le.s3_ss[q]*Z[Ye]*T[ue[Ye]],++q,++Ye;Ye<=ft;)Pe+=ue[Ye],Qe+=1,$e=le.s3_ss[q]*Z[Ye]*T[ue[Ye]],ct=x(ct,$e,Ye-_e),++q,++Ye;Pe=(1+2*Pe)/(2*Qe),tn=T[Pe]*.5,ct*=tn,ne[_e]=ct,le.nb_s2[oe][_e]=le.nb_s1[oe][_e],le.nb_s1[oe][_e]=ct,$e=fe[_e],$e*=le.minval_s[_e],$e*=tn,ne[_e]>$e&&(ne[_e]=$e),le.masking_lower>1&&(ne[_e]*=le.masking_lower),ne[_e]>Z[_e]&&(ne[_e]=Z[_e]),le.masking_lower<1&&(ne[_e]*=le.masking_lower),Ct(ne[_e]>=0)}for(;_e<H.CBANDS;++_e)Z[_e]=0,ne[_e]=0}function Ve(O,N,Z,ne,oe){var W=hn(H.CBANDS),le=hn(H.CBANDS),fe=Wa(H.CBANDS+2),ce;X(O,N,Z,W,le),he(O,W,le,fe);var ye=0;for(ce=0;ce<O.npart_l;ce++){var q,_e,ue,Oe,Re=O.s3ind[ce][0],tt=O.s3ind[ce][1],ge=0,Ye=0;for(ge=fe[Re],Ye+=1,_e=O.s3_ll[ye]*Z[Re]*T[fe[Re]],++ye,++Re;Re<=tt;)ge+=fe[Re],Ye+=1,q=O.s3_ll[ye]*Z[Re]*T[fe[Re]],Oe=x(_e,q,Re-ce),_e=Oe,++ye,++Re;if(ge=(1+2*ge)/(2*Ye),ue=T[ge]*.5,_e*=ue,O.blocktype_old[oe&1]==H.SHORT_TYPE){var ft=n*O.nb_1[oe][ce];ft>0?ne[ce]=Math.min(_e,ft):ne[ce]=Math.min(_e,Z[ce]*c)}else{var Pe=s*O.nb_2[oe][ce],Qe=n*O.nb_1[oe][ce],ft;Pe<=0&&(Pe=_e),Qe<=0&&(Qe=_e),O.blocktype_old[oe&1]==H.NORM_TYPE?ft=Math.min(Qe,Pe):ft=Qe,ne[ce]=Math.min(_e,ft)}O.nb_2[oe][ce]=O.nb_1[oe][ce],O.nb_1[oe][ce]=_e,q=W[ce],q*=O.minval_l[ce],q*=ue,ne[ce]>q&&(ne[ce]=q),O.masking_lower>1&&(ne[ce]*=O.masking_lower),ne[ce]>Z[ce]&&(ne[ce]=Z[ce]),O.masking_lower<1&&(ne[ce]*=O.masking_lower),Ct(ne[ce]>=0)}for(;ce<H.CBANDS;++ce)Z[ce]=0,ne[ce]=0}function Le(O,N){var Z=O.internal_flags;O.short_blocks==gi.short_block_coupled&&!(N[0]!=0&&N[1]!=0)&&(N[0]=N[1]=0);for(var ne=0;ne<Z.channels_out;ne++)O.short_blocks==gi.short_block_dispensed&&(N[ne]=1),O.short_blocks==gi.short_block_forced&&(N[ne]=0)}function et(O,N,Z){for(var ne=O.internal_flags,oe=0;oe<ne.channels_out;oe++){var W=H.NORM_TYPE;N[oe]!=0?(Ct(ne.blocktype_old[oe]!=H.START_TYPE),ne.blocktype_old[oe]==H.SHORT_TYPE&&(W=H.STOP_TYPE)):(W=H.SHORT_TYPE,ne.blocktype_old[oe]==H.NORM_TYPE&&(ne.blocktype_old[oe]=H.START_TYPE),ne.blocktype_old[oe]==H.STOP_TYPE&&(ne.blocktype_old[oe]=H.SHORT_TYPE)),Z[oe]=ne.blocktype_old[oe],ne.blocktype_old[oe]=W}}function Ze(O,N,Z,ne,oe,W,le){for(var fe=W*2,ce=W>0?Math.pow(10,oe):1,ye,q,_e=0;_e<le;++_e){var ue=O[2][_e],Oe=O[3][_e],Re=N[0][_e],tt=N[1][_e],ge=N[2][_e],Ye=N[3][_e];if(Re<=1.58*tt&&tt<=1.58*Re){var ft=Z[_e]*Oe,Pe=Z[_e]*ue;q=Math.max(ge,Math.min(Ye,ft)),ye=Math.max(Ye,Math.min(ge,Pe))}else q=ge,ye=Ye;if(W>0){var Qe,$e,ct=ne[_e]*ce;if(Qe=Math.min(Math.max(Re,ct),Math.max(tt,ct)),ge=Math.max(q,ct),Ye=Math.max(ye,ct),$e=ge+Ye,$e>0&&Qe*fe<$e){var tn=Qe*fe/$e;ge*=tn,Ye*=tn}q=Math.min(ge,q),ye=Math.min(Ye,ye)}q>ue&&(q=ue),ye>Oe&&(ye=Oe),N[2][_e]=q,N[3][_e]=ye}}this.L3psycho_anal_vbr=function(O,N,Z,ne,oe,W,le,fe,ce,ye){var q=O.internal_flags,_e,ue,Oe=hn(H.HBLKSIZE),Re=os([3,H.HBLKSIZE_s]),tt=os([2,H.BLKSIZE]),ge=os([2,3,H.BLKSIZE_s]),Ye=os([4,H.CBANDS]),ft=os([4,H.CBANDS]),Pe=os([4,3]),Qe=.6,$e=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],ct=Wa(2),tn=O.mode==Vt.JOINT_STEREO?4:q.channels_out;Ce(O,N,Z,ne,oe,W,ce,Pe,$e,ct),Le(O,ct);{for(var Ke=0;Ke<tn;Ke++){var pt=Ke&1;_e=tt,Ie(O,N,Z,Ke,ne,Oe,_e,pt),te(O,ne,Ke,Oe),ct[pt]!=0?Ve(q,Oe,Ye[Ke],ft[Ke],Ke):Be(q,Ke)}ct[0]+ct[1]==2&&O.mode==Vt.JOINT_STEREO&&Ze(Ye,ft,q.mld_cb_l,q.ATH.cb_l,O.ATHlower*q.ATH.adjust,O.msfix,q.npart_l);for(var Ke=0;Ke<tn;Ke++){var pt=Ke&1;ct[pt]!=0&&p(q,Ye[Ke],ft[Ke],Ke)}}{for(var Et=0;Et<3;Et++){for(var Ke=0;Ke<tn;++Ke){var pt=Ke&1;ct[pt]!=0?Ae(q,Ke,Et):(ue=ge,K(O,N,Z,Ke,Et,Re,ue,pt),Fe(O,Re,Ye[Ke],ft[Ke],Ke,Et))}ct[0]+ct[1]==0&&O.mode==Vt.JOINT_STEREO&&Ze(Ye,ft,q.mld_cb_s,q.ATH.cb_s,O.ATHlower*q.ATH.adjust,O.msfix,q.npart_s);for(var Ke=0;Ke<tn;++Ke){var pt=Ke&1;ct[pt]==0&&z(q,Ye[Ke],ft[Ke],Ke,Et)}}for(var Ke=0;Ke<tn;Ke++){var pt=Ke&1;if(ct[pt]==0)for(var on=0;on<H.SBMAX_s;on++){for(var Wn=hn(3),Et=0;Et<3;Et++){var mn=q.thm[Ke].s[on][Et];if(mn*=u,$e[Ke][Et]>=2||$e[Ke][Et+1]==1){var rn=Et!=0?Et-1:2,Dn=$(q.thm[Ke].s[on][rn],mn,d*Qe);mn=Math.min(mn,Dn)}else if($e[Ke][Et]==1){var rn=Et!=0?Et-1:2,Dn=$(q.thm[Ke].s[on][rn],mn,c*Qe);mn=Math.min(mn,Dn)}else if(Et!=0&&$e[Ke][Et-1]==3||Et==0&&q.nsPsy.lastAttacks[Ke]==3){var rn=Et!=2?Et+1:0,Dn=$(q.thm[Ke].s[on][rn],mn,c*Qe);mn=Math.min(mn,Dn)}mn*=Pe[Ke][Et],Wn[Et]=mn}for(var Et=0;Et<3;Et++)q.thm[Ke].s[on][Et]=Wn[Et]}}}for(var Ke=0;Ke<tn;Ke++)q.nsPsy.lastAttacks[Ke]=$e[Ke][2];et(O,ct,ye);for(var Ke=0;Ke<tn;Ke++){var Yn,Kn,vs,hs;Ke>1?(Yn=fe,Kn=-2,vs=H.NORM_TYPE,(ye[0]==H.SHORT_TYPE||ye[1]==H.SHORT_TYPE)&&(vs=H.SHORT_TYPE),hs=W[ne][Ke-2]):(Yn=le,Kn=0,vs=ye[Ke],hs=oe[ne][Ke]),vs==H.SHORT_TYPE?Yn[Kn+Ke]=re(hs,q.masking_lower):Yn[Kn+Ke]=ae(hs,q.masking_lower),O.analysis&&(q.pinfo.pe[ne][Ke]=Yn[Kn+Ke])}return 0};function Xe(O,N){var Z=O,ne;return Z>=0?ne=-Z*27:ne=Z*N,ne<=-72?0:Math.exp(ne*v)}function at(O){var N=0,Z=0;{var ne=0,oe,W;for(ne=0;Xe(ne,O)>1e-20;ne-=1);for(oe=ne,W=0;Math.abs(W-oe)>1e-12;)ne=(W+oe)/2,Xe(ne,O)>0?W=ne:oe=ne;N=oe}{var ne=0,oe,W;for(ne=0;Xe(ne,O)>1e-20;ne+=1);for(oe=0,W=ne;Math.abs(W-oe)>1e-12;)ne=(W+oe)/2,Xe(ne,O)>0?oe=ne:W=ne;Z=W}{var le=0,fe=1e3,ce;for(ce=0;ce<=fe;++ce){var ne=N+ce*(Z-N)/fe,ye=Xe(ne,O);le+=ye}{var q=(fe+1)/(le*(Z-N));return q}}}function lt(O){var N,Z,ne,oe;return N=O,N>=0?N*=3:N*=1.5,N>=.5&&N<=2.5?(oe=N-.5,Z=8*(oe*oe-2*oe)):Z=0,N+=.474,ne=15.811389+7.5*N-17.5*Math.sqrt(1+N*N),ne<=-60?0:(N=Math.exp((Z+ne)*v),N/=.6609193,N)}function gt(O){return O<0&&(O=0),O=O*.001,13*Math.atan(.76*O)+3.5*Math.atan(O*O/(7.5*7.5))}function Te(O,N,Z,ne,oe,W,le,fe,ce,ye,q,_e){var ue=hn(H.CBANDS+1),Oe=fe/(_e>15?2*576:2*192),Re=Wa(H.HBLKSIZE),tt;fe/=ce;var ge=0,Ye=0;for(tt=0;tt<H.CBANDS;tt++){var ft,Pe;for(ft=gt(fe*ge),ue[tt]=fe*ge,Pe=ge;gt(fe*Pe)-ft<o&&Pe<=ce/2;Pe++);for(O[tt]=Pe-ge,Ye=tt+1;ge<Pe;)Re[ge++]=tt;if(ge>ce/2){ge=ce/2,++tt;break}}ue[tt]=fe*ge;for(var Qe=0;Qe<_e;Qe++){var $e,ct,tn,Ke,pt;tn=ye[Qe],Ke=ye[Qe+1],$e=0|Math.floor(.5+q*(tn-.5)),$e<0&&($e=0),ct=0|Math.floor(.5+q*(Ke-.5)),ct>ce/2&&(ct=ce/2),Z[Qe]=(Re[$e]+Re[ct])/2,N[Qe]=Re[ct];var Et=Oe*Ke;le[Qe]=(Et-ue[N[Qe]])/(ue[N[Qe]+1]-ue[N[Qe]]),le[Qe]<0?le[Qe]=0:le[Qe]>1&&(le[Qe]=1),pt=gt(fe*ye[Qe]*q),pt=Math.min(pt,15.5)/15.5,W[Qe]=Math.pow(10,1.25*(1-Math.cos(Math.PI*pt))-2.5)}ge=0;for(var on=0;on<Ye;on++){var Wn=O[on],ft,mn;ft=gt(fe*ge),mn=gt(fe*(ge+Wn-1)),ne[on]=.5*(ft+mn),ft=gt(fe*(ge-.5)),mn=gt(fe*(ge+Wn-.5)),oe[on]=mn-ft,ge+=Wn}return Ye}function Ne(O,N,Z,ne,oe,W){var le=os([H.CBANDS,H.CBANDS]),fe,ce=0;if(W)for(var ye=0;ye<N;ye++)for(fe=0;fe<N;fe++){var q=lt(Z[ye]-Z[fe])*ne[fe];le[ye][fe]=q*oe[ye]}else for(fe=0;fe<N;fe++)for(var _e=15+Math.min(21/Z[fe],12),ue=at(_e),ye=0;ye<N;ye++){var q=ue*Xe(Z[ye]-Z[fe],_e)*ne[fe];le[ye][fe]=q*oe[ye]}for(var ye=0;ye<N;ye++){for(fe=0;fe<N&&!(le[ye][fe]>0);fe++);for(O[ye][0]=fe,fe=N-1;fe>0&&!(le[ye][fe]>0);fe--);O[ye][1]=fe,ce+=O[ye][1]-O[ye][0]+1}for(var Oe=hn(ce),Re=0,ye=0;ye<N;ye++)for(fe=O[ye][0];fe<=O[ye][1];fe++)Oe[Re++]=le[ye][fe];return Oe}function pe(O){var N=gt(O);return N=Math.min(N,15.5)/15.5,Math.pow(10,1.25*(1-Math.cos(Math.PI*N))-2.5)}this.psymodel_init=function(O){var N=O.internal_flags,Z,ne=!0,oe=13,W=24,le=0,fe=0,ce=-8.25,ye=-4.5,q=hn(H.CBANDS),_e=hn(H.CBANDS),ue=hn(H.CBANDS),Oe=O.out_samplerate;switch(O.experimentalZ){default:case 0:ne=!0;break;case 1:ne=!(O.VBR==hi.vbr_mtrh||O.VBR==hi.vbr_mt);break;case 2:ne=!1;break;case 3:oe=8,le=-1.75,fe=-.0125,ce=-8.25,ye=-2.25;break}for(N.ms_ener_ratio_old=.25,N.blocktype_old[0]=N.blocktype_old[1]=H.NORM_TYPE,Z=0;Z<4;++Z){for(var ge=0;ge<H.CBANDS;++ge)N.nb_1[Z][ge]=1e20,N.nb_2[Z][ge]=1e20,N.nb_s1[Z][ge]=N.nb_s2[Z][ge]=1;for(var Re=0;Re<H.SBMAX_l;Re++)N.en[Z].l[Re]=1e20,N.thm[Z].l[Re]=1e20;for(var ge=0;ge<3;++ge){for(var Re=0;Re<H.SBMAX_s;Re++)N.en[Z].s[Re][ge]=1e20,N.thm[Z].s[Re][ge]=1e20;N.nsPsy.lastAttacks[Z]=0}for(var ge=0;ge<9;ge++)N.nsPsy.last_en_subshort[Z][ge]=10}for(N.loudness_sq_save[0]=N.loudness_sq_save[1]=0,N.npart_l=Te(N.numlines_l,N.bo_l,N.bm_l,q,_e,N.mld_l,N.PSY.bo_l_weight,Oe,H.BLKSIZE,N.scalefac_band.l,H.BLKSIZE/(2*576),H.SBMAX_l),Ct(N.npart_l<H.CBANDS),Z=0;Z<N.npart_l;Z++){var tt=le;q[Z]>=oe&&(tt=fe*(q[Z]-oe)/(W-oe)+le*(W-q[Z])/(W-oe)),ue[Z]=Math.pow(10,tt/10),N.numlines_l[Z]>0?N.rnumlines_l[Z]=1/N.numlines_l[Z]:N.rnumlines_l[Z]=0}N.s3_ll=Ne(N.s3ind,N.npart_l,q,_e,ue,ne);var ge=0;for(Z=0;Z<N.npart_l;Z++){var Ye;Ye=vm.MAX_VALUE;for(var ft=0;ft<N.numlines_l[Z];ft++,ge++){var Pe=Oe*ge/(1e3*H.BLKSIZE),Qe;Qe=this.ATHformula(Pe*1e3,O)-20,Qe=Math.pow(10,.1*Qe),Qe*=N.numlines_l[Z],Ye>Qe&&(Ye=Qe)}N.ATH.cb_l[Z]=Ye,Ye=-20+q[Z]*20/10,Ye>6&&(Ye=100),Ye<-15&&(Ye=-15),Ye-=8,N.minval_l[Z]=Math.pow(10,Ye/10)*N.numlines_l[Z]}for(N.npart_s=Te(N.numlines_s,N.bo_s,N.bm_s,q,_e,N.mld_s,N.PSY.bo_s_weight,Oe,H.BLKSIZE_s,N.scalefac_band.s,H.BLKSIZE_s/(2*192),H.SBMAX_s),Ct(N.npart_s<H.CBANDS),ge=0,Z=0;Z<N.npart_s;Z++){var Ye,tt=ce;q[Z]>=oe&&(tt=ye*(q[Z]-oe)/(W-oe)+ce*(W-q[Z])/(W-oe)),ue[Z]=Math.pow(10,tt/10),Ye=vm.MAX_VALUE;for(var ft=0;ft<N.numlines_s[Z];ft++,ge++){var Pe=Oe*ge/(1e3*H.BLKSIZE_s),Qe;Qe=this.ATHformula(Pe*1e3,O)-20,Qe=Math.pow(10,.1*Qe),Qe*=N.numlines_s[Z],Ye>Qe&&(Ye=Qe)}N.ATH.cb_s[Z]=Ye,Ye=-7+q[Z]*7/12,q[Z]>12&&(Ye*=1+Math.log(1+Ye)*3.1),q[Z]<12&&(Ye*=1+Math.log(1-Ye)*2.3),Ye<-15&&(Ye=-15),Ye-=8,N.minval_s[Z]=Math.pow(10,Ye/10)*N.numlines_s[Z]}N.s3_ss=Ne(N.s3ind_s,N.npart_s,q,_e,ue,ne),E(),e.init_fft(N),N.decay=Math.exp(-1*t/(f*Oe/192));{var $e;$e=l,(O.exp_nspsytune&2)!=0&&($e=1),Math.abs(O.msfix)>0&&($e=O.msfix),O.msfix=$e;for(var ct=0;ct<N.npart_l;ct++)N.s3ind[ct][1]>N.npart_l-1&&(N.s3ind[ct][1]=N.npart_l-1)}var tn=576*N.mode_gr/Oe;if(N.ATH.decay=Math.pow(10,-12/10*tn),N.ATH.adjust=.01,N.ATH.adjustLimit=1,Ct(N.bo_l[H.SBMAX_l-1]<=N.npart_l),Ct(N.bo_s[H.SBMAX_s-1]<=N.npart_s),O.ATHtype!=-1){var Pe,Ke=O.out_samplerate/H.BLKSIZE,pt=0;for(Pe=0,Z=0;Z<H.BLKSIZE/2;++Z)Pe+=Ke,N.ATH.eql_w[Z]=1/Math.pow(10,this.ATHformula(Pe,O)/10),pt+=N.ATH.eql_w[Z];for(pt=1/pt,Z=H.BLKSIZE/2;--Z>=0;)N.ATH.eql_w[Z]*=pt}{for(var ct=ge=0;ct<N.npart_s;++ct)for(Z=0;Z<N.numlines_s[ct];++Z)++ge;for(var ct=ge=0;ct<N.npart_l;++ct)for(Z=0;Z<N.numlines_l[ct];++Z)++ge}for(ge=0,Z=0;Z<N.npart_l;Z++){var Pe=Oe*(ge+N.numlines_l[Z]/2)/(1*H.BLKSIZE);N.mld_cb_l[Z]=pe(Pe),ge+=N.numlines_l[Z]}for(;Z<H.CBANDS;++Z)N.mld_cb_l[Z]=1;for(ge=0,Z=0;Z<N.npart_s;Z++){var Pe=Oe*(ge+N.numlines_s[Z]/2)/(1*H.BLKSIZE_s);N.mld_cb_s[Z]=pe(Pe),ge+=N.numlines_s[Z]}for(;Z<H.CBANDS;++Z)N.mld_cb_s[Z]=1;return 0};function de(O,N){O<-.3&&(O=3410),O/=1e3,O=Math.max(.1,O);var Z=3.64*Math.pow(O,-.8)-6.8*Math.exp(-.6*Math.pow(O-3.4,2))+6*Math.exp(-.15*Math.pow(O-8.7,2))+(.6+.04*N)*.001*Math.pow(O,4);return Z}this.ATHformula=function(O,N){var Z;switch(N.ATHtype){case 0:Z=de(O,9);break;case 1:Z=de(O,-1);break;case 2:Z=de(O,0);break;case 3:Z=de(O,1)+6;break;case 4:Z=de(O,N.ATHcurve);break;default:Z=de(O,0);break}return Z}}function B9(){this.class_id=0,this.num_samples=0,this.num_channels=0,this.in_samplerate=0,this.out_samplerate=0,this.scale=0,this.scale_left=0,this.scale_right=0,this.analysis=!1,this.bWriteVbrTag=!1,this.decode_only=!1,this.quality=0,this.mode=Vt.STEREO,this.force_ms=!1,this.free_format=!1,this.findReplayGain=!1,this.decode_on_the_fly=!1,this.write_id3tag_automatic=!1,this.brate=0,this.compression_ratio=0,this.copyright=0,this.original=0,this.extension=0,this.emphasis=0,this.error_protection=0,this.strict_ISO=!1,this.disable_reservoir=!1,this.quant_comp=0,this.quant_comp_short=0,this.experimentalY=!1,this.experimentalZ=0,this.exp_nspsytune=0,this.preset=0,this.VBR=null,this.VBR_q_frac=0,this.VBR_q=0,this.VBR_mean_bitrate_kbps=0,this.VBR_min_bitrate_kbps=0,this.VBR_max_bitrate_kbps=0,this.VBR_hard_min=0,this.lowpassfreq=0,this.highpassfreq=0,this.lowpasswidth=0,this.highpasswidth=0,this.maskingadjust=0,this.maskingadjust_short=0,this.ATHonly=!1,this.ATHshort=!1,this.noATH=!1,this.ATHtype=0,this.ATHcurve=0,this.ATHlower=0,this.athaa_type=0,this.athaa_loudapprox=0,this.athaa_sensitivity=0,this.short_blocks=null,this.useTemporal=!1,this.interChRatio=0,this.msfix=0,this.tune=!1,this.tune_value_a=0,this.version=0,this.encoder_delay=0,this.encoder_padding=0,this.framesize=0,this.frameNum=0,this.lame_allocated_gfp=0,this.internal_flags=null}var Ia={};Ia.SFBMAX=H.SBMAX_s*3;var L9=Ue.new_float,Ya=Ue.new_int;function Gr(){this.xr=L9(576),this.l3_enc=Ya(576),this.scalefac=Ya(Ia.SFBMAX),this.xrpow_max=0,this.part2_3_length=0,this.big_values=0,this.count1=0,this.global_gain=0,this.scalefac_compress=0,this.block_type=0,this.mixed_block_flag=0,this.table_select=Ya(3),this.subblock_gain=Ya(4),this.region0_count=0,this.region1_count=0,this.preflag=0,this.scalefac_scale=0,this.count1table_select=0,this.part2_length=0,this.sfb_lmax=0,this.sfb_smin=0,this.psy_lmax=0,this.sfbmax=0,this.psymax=0,this.sfbdivide=0,this.width=Ya(Ia.SFBMAX),this.window=Ya(Ia.SFBMAX),this.count1bits=0,this.sfb_partition_table=null,this.slen=Ya(4),this.max_nonzero_coeff=0;var e=this;function t(s){return new Int32Array(s)}function n(s){return new Float32Array(s)}this.assign=function(s){e.xr=n(s.xr),e.l3_enc=t(s.l3_enc),e.scalefac=t(s.scalefac),e.xrpow_max=s.xrpow_max,e.part2_3_length=s.part2_3_length,e.big_values=s.big_values,e.count1=s.count1,e.global_gain=s.global_gain,e.scalefac_compress=s.scalefac_compress,e.block_type=s.block_type,e.mixed_block_flag=s.mixed_block_flag,e.table_select=t(s.table_select),e.subblock_gain=t(s.subblock_gain),e.region0_count=s.region0_count,e.region1_count=s.region1_count,e.preflag=s.preflag,e.scalefac_scale=s.scalefac_scale,e.count1table_select=s.count1table_select,e.part2_length=s.part2_length,e.sfb_lmax=s.sfb_lmax,e.sfb_smin=s.sfb_smin,e.psy_lmax=s.psy_lmax,e.sfbmax=s.sfbmax,e.psymax=s.psymax,e.sfbdivide=s.sfbdivide,e.width=t(s.width),e.window=t(s.window),e.count1bits=s.count1bits,e.sfb_partition_table=s.sfb_partition_table.slice(0),e.slen=t(s.slen),e.max_nonzero_coeff=s.max_nonzero_coeff}}var hm=Ue.new_int;function O9(){this.tt=[[null,null],[null,null]],this.main_data_begin=0,this.private_bits=0,this.resvDrain_pre=0,this.resvDrain_post=0,this.scfsi=[hm(4),hm(4)];for(var e=0;e<2;e++)for(var t=0;t<2;t++)this.tt[e][t]=new Gr}var pr=Ue.System,_r=Ue.new_int;function Ps(e,t,n,s){this.l=_r(1+H.SBMAX_l),this.s=_r(1+H.SBMAX_s),this.psfb21=_r(1+H.PSFB21),this.psfb12=_r(1+H.PSFB12);var a=this.l,i=this.s;arguments.length==4&&(this.arrL=arguments[0],this.arrS=arguments[1],this.arr21=arguments[2],this.arr12=arguments[3],pr.arraycopy(this.arrL,0,a,0,Math.min(this.arrL.length,this.l.length)),pr.arraycopy(this.arrS,0,i,0,Math.min(this.arrS.length,this.s.length)),pr.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),pr.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}var dc=Ue.new_float,P9=Ue.new_float_n,$9=Ue.new_int;function F9(){this.last_en_subshort=P9([4,9]),this.lastAttacks=$9(4),this.pefirbuf=dc(19),this.longfact=dc(H.SBMAX_l),this.shortfact=dc(H.SBMAX_s),this.attackthre=0,this.attackthre_s=0}function D9(){this.sum=0,this.seen=0,this.want=0,this.pos=0,this.size=0,this.bag=null,this.nVbrNumFrames=0,this.nBytesWritten=0,this.TotalFrameSize=0}var V9=Ue.new_byte,N9=Ue.new_double,rs=Ue.new_float,Ka=Ue.new_float_n,gs=Ue.new_int,br=Ue.new_int_n;Ft.MFSIZE=3*1152+H.ENCDELAY-H.MDCTDELAY;Ft.MAX_HEADER_BUF=256;Ft.MAX_BITS_PER_CHANNEL=4095;Ft.MAX_BITS_PER_GRANULE=7680;Ft.BPC=320;function Ft(){var e=40;this.Class_ID=0,this.lame_encode_frame_init=0,this.iteration_init_init=0,this.fill_buffer_resample_init=0,this.mfbuf=Ka([2,Ft.MFSIZE]),this.mode_gr=0,this.channels_in=0,this.channels_out=0,this.resample_ratio=0,this.mf_samples_to_encode=0,this.mf_size=0,this.VBR_min_bitrate=0,this.VBR_max_bitrate=0,this.bitrate_index=0,this.samplerate_index=0,this.mode_ext=0,this.lowpass1=0,this.lowpass2=0,this.highpass1=0,this.highpass2=0,this.noise_shaping=0,this.noise_shaping_amp=0,this.substep_shaping=0,this.psymodel=0,this.noise_shaping_stop=0,this.subblock_gain=0,this.use_best_huffman=0,this.full_outer_loop=0,this.l3_side=new O9,this.ms_ratio=rs(2),this.padding=0,this.frac_SpF=0,this.slot_lag=0,this.tag_spec=null,this.nMusicCRC=0,this.OldValue=gs(2),this.CurrentStep=gs(2),this.masking_lower=0,this.bv_scf=gs(576),this.pseudohalf=gs(Ia.SFBMAX),this.sfb21_extra=!1,this.inbuf_old=new Array(2),this.blackfilt=new Array(2*Ft.BPC+1),this.itime=N9(2),this.sideinfo_len=0,this.sb_sample=Ka([2,2,18,H.SBLIMIT]),this.amp_filter=rs(32);function t(){this.write_timing=0,this.ptr=0,this.buf=V9(e)}this.header=new Array(Ft.MAX_HEADER_BUF),this.h_ptr=0,this.w_ptr=0,this.ancillary_flag=0,this.ResvSize=0,this.ResvMax=0,this.scalefac_band=new Ps,this.minval_l=rs(H.CBANDS),this.minval_s=rs(H.CBANDS),this.nb_1=Ka([4,H.CBANDS]),this.nb_2=Ka([4,H.CBANDS]),this.nb_s1=Ka([4,H.CBANDS]),this.nb_s2=Ka([4,H.CBANDS]),this.s3_ss=null,this.s3_ll=null,this.decay=0,this.thm=new Array(4),this.en=new Array(4),this.tot_ener=rs(4),this.loudness_sq=Ka([2,2]),this.loudness_sq_save=rs(2),this.mld_l=rs(H.SBMAX_l),this.mld_s=rs(H.SBMAX_s),this.bm_l=gs(H.SBMAX_l),this.bo_l=gs(H.SBMAX_l),this.bm_s=gs(H.SBMAX_s),this.bo_s=gs(H.SBMAX_s),this.npart_l=0,this.npart_s=0,this.s3ind=br([H.CBANDS,2]),this.s3ind_s=br([H.CBANDS,2]),this.numlines_s=gs(H.CBANDS),this.numlines_l=gs(H.CBANDS),this.rnumlines_l=rs(H.CBANDS),this.mld_cb_l=rs(H.CBANDS),this.mld_cb_s=rs(H.CBANDS),this.numlines_s_num1=0,this.numlines_l_num1=0,this.pe=rs(4),this.ms_ratio_s_old=0,this.ms_ratio_l_old=0,this.ms_ener_ratio_old=0,this.blocktype_old=gs(2),this.nsPsy=new F9,this.VBR_seek_table=new D9,this.ATH=null,this.PSY=null,this.nogap_total=0,this.nogap_current=0,this.decode_on_the_fly=!0,this.findReplayGain=!0,this.findPeakSample=!0,this.PeakSample=0,this.RadioGain=0,this.AudiophileGain=0,this.rgdata=null,this.noclipGainChange=0,this.noclipScale=0,this.bitrate_stereoMode_Hist=br([16,5]),this.bitrate_blockType_Hist=br([16,6]),this.pinfo=null,this.hip=null,this.in_buffer_nsamples=0,this.in_buffer_0=null,this.in_buffer_1=null,this.iteration_loop=null;for(var n=0;n<this.en.length;n++)this.en[n]=new Kr;for(var n=0;n<this.thm.length;n++)this.thm[n]=new Kr;for(var n=0;n<this.header.length;n++)this.header[n]=new t}var Ga=Ue.new_float;function j9(){this.useAdjust=0,this.aaSensitivityP=0,this.adjust=0,this.adjustLimit=0,this.decay=0,this.floor=0,this.l=Ga(H.SBMAX_l),this.s=Ga(H.SBMAX_s),this.psfb21=Ga(H.PSFB21),this.psfb12=Ga(H.PSFB12),this.cb_l=Ga(H.CBANDS),this.cb_s=Ga(H.CBANDS),this.eql_w=Ga(H.BLKSIZE/2)}var jn=Ue.System,gm=Ue.Arrays;dn.STEPS_per_dB=100;dn.MAX_dB=120;dn.GAIN_NOT_ENOUGH_SAMPLES=-24601;dn.GAIN_ANALYSIS_ERROR=0;dn.GAIN_ANALYSIS_OK=1;dn.INIT_GAIN_ANALYSIS_ERROR=0;dn.INIT_GAIN_ANALYSIS_OK=1;dn.YULE_ORDER=10;dn.MAX_ORDER=dn.YULE_ORDER;dn.MAX_SAMP_FREQ=48e3;dn.RMS_WINDOW_TIME_NUMERATOR=1;dn.RMS_WINDOW_TIME_DENOMINATOR=20;dn.MAX_SAMPLES_PER_WINDOW=dn.MAX_SAMP_FREQ*dn.RMS_WINDOW_TIME_NUMERATOR/dn.RMS_WINDOW_TIME_DENOMINATOR+1;function dn(){var e=64.82,t=.95,n=dn.RMS_WINDOW_TIME_NUMERATOR,s=dn.RMS_WINDOW_TIME_DENOMINATOR,a=[[.038575994352,-3.84664617118067,-.02160367184185,7.81501653005538,-.00123395316851,-11.34170355132042,-9291677959e-14,13.05504219327545,-.01655260341619,-12.28759895145294,.02161526843274,9.4829380631979,-.02074045215285,-5.87257861775999,.00594298065125,2.75465861874613,.00306428023191,-.86984376593551,.00012025322027,.13919314567432,.00288463683916],[.0541865640643,-3.47845948550071,-.02911007808948,6.36317777566148,-.00848709379851,-8.54751527471874,-.00851165645469,9.4769360780128,-.00834990904936,-8.81498681370155,.02245293253339,6.85401540936998,-.02596338512915,-4.39470996079559,.01624864962975,2.19611684890774,-.00240879051584,-.75104302451432,.00674613682247,.13149317958808,-.00187763777362],[.15457299681924,-2.37898834973084,-.09331049056315,2.84868151156327,-.06247880153653,-2.64577170229825,.02163541888798,2.23697657451713,-.05588393329856,-1.67148153367602,.04781476674921,1.00595954808547,.00222312597743,-.45953458054983,.03174092540049,.16378164858596,-.01390589421898,-.05032077717131,.00651420667831,.0234789740702,-.00881362733839],[.30296907319327,-1.61273165137247,-.22613988682123,1.0797749225997,-.08587323730772,-.2565625775407,.03282930172664,-.1627671912044,-.00915702933434,-.22638893773906,-.02364141202522,.39120800788284,-.00584456039913,-.22138138954925,.06276101321749,.04500235387352,-828086748e-14,.02005851806501,.00205861885564,.00302439095741,-.02950134983287],[.33642304856132,-1.49858979367799,-.2557224142557,.87350271418188,-.11828570177555,.12205022308084,.11921148675203,-.80774944671438,-.07834489609479,.47854794562326,-.0046997791438,-.12453458140019,-.0058950022444,-.04067510197014,.05724228140351,.08333755284107,.00832043980773,-.04237348025746,-.0163538138454,.02977207319925,-.0176017656815],[.4491525660845,-.62820619233671,-.14351757464547,.29661783706366,-.22784394429749,-.372563729424,-.01419140100551,.00213767857124,.04078262797139,-.42029820170918,-.12398163381748,.22199650564824,.04097565135648,.00613424350682,.10478503600251,.06747620744683,-.01863887810927,.05784820375801,-.03193428438915,.03222754072173,.00541907748707],[.56619470757641,-1.04800335126349,-.75464456939302,.29156311971249,.1624213774223,-.26806001042947,.16744243493672,.00819999645858,-.18901604199609,.45054734505008,.3093178284183,-.33032403314006,-.27562961986224,.0673936833311,.00647310677246,-.04784254229033,.08647503780351,.01639907836189,-.0378898455484,.01807364323573,-.00588215443421],[.58100494960553,-.51035327095184,-.53174909058578,-.31863563325245,-.14289799034253,-.20256413484477,.17520704835522,.1472815413433,.02377945217615,.38952639978999,.15558449135573,-.23313271880868,-.25344790059353,-.05246019024463,.01628462406333,-.02505961724053,.06920467763959,.02442357316099,-.03721611395801,.01818801111503,-.00749618797172],[.53648789255105,-.2504987195602,-.42163034350696,-.43193942311114,-.00275953611929,-.03424681017675,.04267842219415,-.04678328784242,-.10214864179676,.26408300200955,.14590772289388,.15113130533216,-.02459864859345,-.17556493366449,-.11202315195388,-.18823009262115,-.04060034127,.05477720428674,.0478866554818,.0470440968812,-.02217936801134]],i=[[.98621192462708,-1.97223372919527,-1.97242384925416,.97261396931306,.98621192462708],[.98500175787242,-1.96977855582618,-1.97000351574484,.9702284756635,.98500175787242],[.97938932735214,-1.95835380975398,-1.95877865470428,.95920349965459,.97938932735214],[.97531843204928,-1.95002759149878,-1.95063686409857,.95124613669835,.97531843204928],[.97316523498161,-1.94561023566527,-1.94633046996323,.94705070426118,.97316523498161],[.96454515552826,-1.92783286977036,-1.92909031105652,.93034775234268,.96454515552826],[.96009142950541,-1.91858953033784,-1.92018285901082,.92177618768381,.96009142950541],[.95856916599601,-1.9154210807478,-1.91713833199203,.91885558323625,.95856916599601],[.94597685600279,-1.88903307939452,-1.89195371200558,.89487434461664,.94597685600279]];function o(c,l,m,v,C,b){for(;C--!=0;)m[v]=1e-10+c[l+0]*b[0]-m[v-1]*b[1]+c[l-1]*b[2]-m[v-2]*b[3]+c[l-2]*b[4]-m[v-3]*b[5]+c[l-3]*b[6]-m[v-4]*b[7]+c[l-4]*b[8]-m[v-5]*b[9]+c[l-5]*b[10]-m[v-6]*b[11]+c[l-6]*b[12]-m[v-7]*b[13]+c[l-7]*b[14]-m[v-8]*b[15]+c[l-8]*b[16]-m[v-9]*b[17]+c[l-9]*b[18]-m[v-10]*b[19]+c[l-10]*b[20],++v,++l}function r(c,l,m,v,C,b){for(;C--!=0;)m[v]=c[l+0]*b[0]-m[v-1]*b[1]+c[l-1]*b[2]-m[v-2]*b[3]+c[l-2]*b[4],++v,++l}function f(c,l){for(var m=0;m<MAX_ORDER;m++)c.linprebuf[m]=c.lstepbuf[m]=c.loutbuf[m]=c.rinprebuf[m]=c.rstepbuf[m]=c.routbuf[m]=0;switch(0|l){case 48e3:c.reqindex=0;break;case 44100:c.reqindex=1;break;case 32e3:c.reqindex=2;break;case 24e3:c.reqindex=3;break;case 22050:c.reqindex=4;break;case 16e3:c.reqindex=5;break;case 12e3:c.reqindex=6;break;case 11025:c.reqindex=7;break;case 8e3:c.reqindex=8;break;default:return INIT_GAIN_ANALYSIS_ERROR}return c.sampleWindow=0|(l*n+s-1)/s,c.lsum=0,c.rsum=0,c.totsamp=0,gm.ill(c.A,0),INIT_GAIN_ANALYSIS_OK}this.InitGainAnalysis=function(c,l){return f(c,l)!=INIT_GAIN_ANALYSIS_OK?INIT_GAIN_ANALYSIS_ERROR:(c.linpre=MAX_ORDER,c.rinpre=MAX_ORDER,c.lstep=MAX_ORDER,c.rstep=MAX_ORDER,c.lout=MAX_ORDER,c.rout=MAX_ORDER,gm.fill(c.B,0),INIT_GAIN_ANALYSIS_OK)};function u(c){return c*c}this.AnalyzeSamples=function(c,l,m,v,C,b,_){var g,R,P,S,L,I,T;if(b==0)return GAIN_ANALYSIS_OK;switch(T=0,L=b,_){case 1:v=l,C=m;break;case 2:break;default:return GAIN_ANALYSIS_ERROR}for(b<MAX_ORDER?(jn.arraycopy(l,m,c.linprebuf,MAX_ORDER,b),jn.arraycopy(v,C,c.rinprebuf,MAX_ORDER,b)):(jn.arraycopy(l,m,c.linprebuf,MAX_ORDER,MAX_ORDER),jn.arraycopy(v,C,c.rinprebuf,MAX_ORDER,MAX_ORDER));L>0;){I=L>c.sampleWindow-c.totsamp?c.sampleWindow-c.totsamp:L,T<MAX_ORDER?(g=c.linpre+T,R=c.linprebuf,P=c.rinpre+T,S=c.rinprebuf,I>MAX_ORDER-T&&(I=MAX_ORDER-T)):(g=m+T,R=l,P=C+T,S=v),o(R,g,c.lstepbuf,c.lstep+c.totsamp,I,a[c.reqindex]),o(S,P,c.rstepbuf,c.rstep+c.totsamp,I,a[c.reqindex]),r(c.lstepbuf,c.lstep+c.totsamp,c.loutbuf,c.lout+c.totsamp,I,i[c.reqindex]),r(c.rstepbuf,c.rstep+c.totsamp,c.routbuf,c.rout+c.totsamp,I,i[c.reqindex]),g=c.lout+c.totsamp,R=c.loutbuf,P=c.rout+c.totsamp,S=c.routbuf;for(var E=I%8;E--!=0;)c.lsum+=u(R[g++]),c.rsum+=u(S[P++]);for(E=I/8;E--!=0;)c.lsum+=u(R[g+0])+u(R[g+1])+u(R[g+2])+u(R[g+3])+u(R[g+4])+u(R[g+5])+u(R[g+6])+u(R[g+7]),g+=8,c.rsum+=u(S[P+0])+u(S[P+1])+u(S[P+2])+u(S[P+3])+u(S[P+4])+u(S[P+5])+u(S[P+6])+u(S[P+7]),P+=8;if(L-=I,T+=I,c.totsamp+=I,c.totsamp==c.sampleWindow){var y=dn.STEPS_per_dB*10*Math.log10((c.lsum+c.rsum)/c.totsamp*.5+1e-37),A=y<=0?0:0|y;A>=c.A.length&&(A=c.A.length-1),c.A[A]++,c.lsum=c.rsum=0,jn.arraycopy(c.loutbuf,c.totsamp,c.loutbuf,0,MAX_ORDER),jn.arraycopy(c.routbuf,c.totsamp,c.routbuf,0,MAX_ORDER),jn.arraycopy(c.lstepbuf,c.totsamp,c.lstepbuf,0,MAX_ORDER),jn.arraycopy(c.rstepbuf,c.totsamp,c.rstepbuf,0,MAX_ORDER),c.totsamp=0}if(c.totsamp>c.sampleWindow)return GAIN_ANALYSIS_ERROR}return b<MAX_ORDER?(jn.arraycopy(c.linprebuf,b,c.linprebuf,0,MAX_ORDER-b),jn.arraycopy(c.rinprebuf,b,c.rinprebuf,0,MAX_ORDER-b),jn.arraycopy(l,m,c.linprebuf,MAX_ORDER-b,b),jn.arraycopy(v,C,c.rinprebuf,MAX_ORDER-b,b)):(jn.arraycopy(l,m+b-MAX_ORDER,c.linprebuf,0,MAX_ORDER),jn.arraycopy(v,C+b-MAX_ORDER,c.rinprebuf,0,MAX_ORDER)),GAIN_ANALYSIS_OK};function d(c,l){var m,v=0;for(m=0;m<l;m++)v+=c[m];if(v==0)return GAIN_NOT_ENOUGH_SAMPLES;var C=0|Math.ceil(v*(1-t));for(m=l;m-- >0&&!((C-=c[m])<=0););return e-m/dn.STEPS_per_dB}this.GetTitleGain=function(c){for(var l=d(c.A,c.A.length),m=0;m<c.A.length;m++)c.B[m]+=c.A[m],c.A[m]=0;for(var m=0;m<MAX_ORDER;m++)c.linprebuf[m]=c.lstepbuf[m]=c.loutbuf[m]=c.rinprebuf[m]=c.rstepbuf[m]=c.routbuf[m]=0;return c.totsamp=0,c.lsum=c.rsum=0,l}}var pi=Ue.new_float,pm=Ue.new_int;function H9(){this.linprebuf=pi(void 0*2),this.linpre=0,this.lstepbuf=pi(void 0+void 0),this.lstep=0,this.loutbuf=pi(void 0+void 0),this.lout=0,this.rinprebuf=pi(void 0*2),this.rinpre=0,this.rstepbuf=pi(void 0+void 0),this.rstep=0,this.routbuf=pi(void 0+void 0),this.rout=0,this.sampleWindow=0,this.totsamp=0,this.lsum=0,this.rsum=0,this.freqindex=0,this.first=0,this.A=pm(0|void 0*void 0),this.B=pm(0|void 0*void 0)}function zh(e){this.bits=e}var _m=Ue.new_float,z9=Ue.new_int,bm=Ue.assert;function U9(e){var t=e;this.quantize=t,this.iteration_loop=function(n,s,a,i){var o=n.internal_flags,r=_m(Ia.SFBMAX),f=_m(576),u=z9(2),d=0,c,l=o.l3_side,m=new zh(d);this.quantize.rv.ResvFrameBegin(n,m),d=m.bits;for(var v=0;v<o.mode_gr;v++){c=this.quantize.qupvt.on_pe(n,s,u,d,v,v),o.mode_ext==H.MPG_MD_MS_LR&&(this.quantize.ms_convert(o.l3_side,v),this.quantize.qupvt.reduce_side(u,a[v],d,c));for(var C=0;C<o.channels_out;C++){var b,_,g=l.tt[v][C];g.block_type!=H.SHORT_TYPE?(b=0,_=o.PSY.mask_adjust-b):(b=0,_=o.PSY.mask_adjust_short-b),o.masking_lower=Math.pow(10,_*.1),this.quantize.init_outer_loop(o,g),this.quantize.init_xrpow(o,g,f)&&(this.quantize.qupvt.calc_xmin(n,i[v][C],g,r),this.quantize.outer_loop(n,g,r,f,C,u[C])),this.quantize.iteration_finish_one(o,v,C),bm(g.part2_3_length<=Ft.MAX_BITS_PER_CHANNEL),bm(g.part2_3_length<=u[C])}}this.quantize.rv.ResvFrameEnd(o,d)}}function Ot(e,t,n,s){this.xlen=e,this.linmax=t,this.table=n,this.hlen=s}var ke={};ke.t1HB=[1,1,1,0];ke.t2HB=[1,2,1,3,1,1,3,2,0];ke.t3HB=[3,2,1,1,1,1,3,2,0];ke.t5HB=[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0];ke.t6HB=[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0];ke.t7HB=[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0];ke.t8HB=[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0];ke.t9HB=[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0];ke.t10HB=[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0];ke.t11HB=[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0];ke.t12HB=[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0];ke.t13HB=[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1];ke.t15HB=[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0];ke.t16HB=[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3];ke.t24HB=[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3];ke.t32HB=[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16];ke.t33HB=[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0];ke.t1l=[1,4,3,5];ke.t2l=[1,4,7,4,5,7,6,7,8];ke.t3l=[2,3,7,4,4,7,6,7,8];ke.t5l=[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10];ke.t6l=[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9];ke.t7l=[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12];ke.t8l=[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13];ke.t9l=[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11];ke.t10l=[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13];ke.t11l=[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12];ke.t12l=[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12];ke.t13l=[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18];ke.t15l=[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15];ke.t16_5l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12];ke.t16l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10];ke.t24l=[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6];ke.t32l=[1,5,5,7,5,8,7,9,5,7,7,9,7,9,9,10];ke.t33l=[4,5,5,6,5,6,6,7,5,6,6,7,6,7,7,8];ke.ht=[new Ot(0,0,null,null),new Ot(2,0,ke.t1HB,ke.t1l),new Ot(3,0,ke.t2HB,ke.t2l),new Ot(3,0,ke.t3HB,ke.t3l),new Ot(0,0,null,null),new Ot(4,0,ke.t5HB,ke.t5l),new Ot(4,0,ke.t6HB,ke.t6l),new Ot(6,0,ke.t7HB,ke.t7l),new Ot(6,0,ke.t8HB,ke.t8l),new Ot(6,0,ke.t9HB,ke.t9l),new Ot(8,0,ke.t10HB,ke.t10l),new Ot(8,0,ke.t11HB,ke.t11l),new Ot(8,0,ke.t12HB,ke.t12l),new Ot(16,0,ke.t13HB,ke.t13l),new Ot(0,0,null,ke.t16_5l),new Ot(16,0,ke.t15HB,ke.t15l),new Ot(1,1,ke.t16HB,ke.t16l),new Ot(2,3,ke.t16HB,ke.t16l),new Ot(3,7,ke.t16HB,ke.t16l),new Ot(4,15,ke.t16HB,ke.t16l),new Ot(6,63,ke.t16HB,ke.t16l),new Ot(8,255,ke.t16HB,ke.t16l),new Ot(10,1023,ke.t16HB,ke.t16l),new Ot(13,8191,ke.t16HB,ke.t16l),new Ot(4,15,ke.t24HB,ke.t24l),new Ot(5,31,ke.t24HB,ke.t24l),new Ot(6,63,ke.t24HB,ke.t24l),new Ot(7,127,ke.t24HB,ke.t24l),new Ot(8,255,ke.t24HB,ke.t24l),new Ot(9,511,ke.t24HB,ke.t24l),new Ot(11,2047,ke.t24HB,ke.t24l),new Ot(13,8191,ke.t24HB,ke.t24l),new Ot(0,0,ke.t32HB,ke.t32l),new Ot(0,0,ke.t33HB,ke.t33l)];ke.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366];ke.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296];ke.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369];ke.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]];ke.samplerate_table=[[22050,24e3,16e3,-1],[44100,48e3,32e3,-1],[11025,12e3,8e3,-1]];ke.scfsi_band=[0,6,11,16,21];var Xa=Ue.VbrMode,yr=Ue.Float,fc=Ue.Util,Za=Ue.new_float,q9=Ue.new_int,Qi=Ue.assert;xn.Q_MAX=257;xn.Q_MAX2=116;xn.LARGE_BITS=1e5;xn.IXMAX_VAL=8206;function xn(){var e=null,t=null,n=null;this.setModules=function(g,R,P){e=g,t=R,n=P};function s(g){return c[g+xn.Q_MAX2]}this.IPOW20=function(g){return l[g]};var a=2220446049250313e-31,i=xn.IXMAX_VAL,o=i+2,r=xn.Q_MAX,f=xn.Q_MAX2,u=100;this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var d=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=d,this.sfBandIndex=[new Ps([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Ps([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Ps([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Ps([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Ps([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Ps([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Ps([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Ps([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Ps([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0/3,24/3,48/3,72/3,108/3,156/3,216/3,288/3,372/3,480/3,486/3,492/3,498/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var c=Za(r+f+1),l=Za(r),m=Za(o),v=Za(o);this.adj43=v;function C(g,R){var P=n.ATHformula(R,g);return P-=u,P=Math.pow(10,P/10+g.ATHlower),P}function b(g){for(var R=g.internal_flags.ATH.l,P=g.internal_flags.ATH.psfb21,S=g.internal_flags.ATH.s,L=g.internal_flags.ATH.psfb12,I=g.internal_flags,T=g.out_samplerate,E=0;E<H.SBMAX_l;E++){var y=I.scalefac_band.l[E],A=I.scalefac_band.l[E+1];R[E]=yr.MAX_VALUE;for(var w=y;w<A;w++){var k=w*T/1152,M=C(g,k);R[E]=Math.min(R[E],M)}}for(var E=0;E<H.PSFB21;E++){var y=I.scalefac_band.psfb21[E],A=I.scalefac_band.psfb21[E+1];P[E]=yr.MAX_VALUE;for(var w=y;w<A;w++){var k=w*T/1152,M=C(g,k);P[E]=Math.min(P[E],M)}}for(var E=0;E<H.SBMAX_s;E++){var y=I.scalefac_band.s[E],A=I.scalefac_band.s[E+1];S[E]=yr.MAX_VALUE;for(var w=y;w<A;w++){var k=w*T/384,M=C(g,k);S[E]=Math.min(S[E],M)}S[E]*=I.scalefac_band.s[E+1]-I.scalefac_band.s[E]}for(var E=0;E<H.PSFB12;E++){var y=I.scalefac_band.psfb12[E],A=I.scalefac_band.psfb12[E+1];L[E]=yr.MAX_VALUE;for(var w=y;w<A;w++){var k=w*T/384,M=C(g,k);L[E]=Math.min(L[E],M)}L[E]*=I.scalefac_band.s[13]-I.scalefac_band.s[12]}if(g.noATH){for(var E=0;E<H.SBMAX_l;E++)R[E]=1e-20;for(var E=0;E<H.PSFB21;E++)P[E]=1e-20;for(var E=0;E<H.SBMAX_s;E++)S[E]=1e-20;for(var E=0;E<H.PSFB12;E++)L[E]=1e-20}I.ATH.floor=10*Math.log10(C(g,-1))}this.iteration_init=function(g){var R=g.internal_flags,P=R.l3_side,S;if(R.iteration_init_init==0){for(R.iteration_init_init=1,P.main_data_begin=0,b(g),m[0]=0,S=1;S<o;S++)m[S]=Math.pow(S,4/3);for(S=0;S<o-1;S++)v[S]=S+1-Math.pow(.5*(m[S]+m[S+1]),.75);for(v[S]=.5,S=0;S<r;S++)l[S]=Math.pow(2,(S-210)*-.1875);for(S=0;S<=r+f;S++)c[S]=Math.pow(2,(S-210-f)*.25);e.huffman_init(R);{var L,I,T,E;for(S=g.exp_nspsytune>>2&63,S>=32&&(S-=64),L=Math.pow(10,S/4/10),S=g.exp_nspsytune>>8&63,S>=32&&(S-=64),I=Math.pow(10,S/4/10),S=g.exp_nspsytune>>14&63,S>=32&&(S-=64),T=Math.pow(10,S/4/10),S=g.exp_nspsytune>>20&63,S>=32&&(S-=64),E=T*Math.pow(10,S/4/10),S=0;S<H.SBMAX_l;S++){var y;S<=6?y=L:S<=13?y=I:S<=20?y=T:y=E,R.nsPsy.longfact[S]=y}for(S=0;S<H.SBMAX_s;S++){var y;S<=5?y=L:S<=10?y=I:S<=11?y=T:y=E,R.nsPsy.shortfact[S]=y}}}},this.on_pe=function(g,R,P,S,L,I){var T=g.internal_flags,E=0,y,A=q9(2),w,k=new zh(E),M=t.ResvMaxBits(g,S,k,I);E=k.bits;var x=E+M;for(x>Ft.MAX_BITS_PER_GRANULE&&(x=Ft.MAX_BITS_PER_GRANULE),y=0,w=0;w<T.channels_out;++w)P[w]=Math.min(Ft.MAX_BITS_PER_CHANNEL,E/T.channels_out),A[w]=0|P[w]*R[L][w]/700-P[w],A[w]>S*3/4&&(A[w]=S*3/4),A[w]<0&&(A[w]=0),A[w]+P[w]>Ft.MAX_BITS_PER_CHANNEL&&(A[w]=Math.max(0,Ft.MAX_BITS_PER_CHANNEL-P[w])),y+=A[w];if(y>M)for(w=0;w<T.channels_out;++w)A[w]=M*A[w]/y;for(w=0;w<T.channels_out;++w)P[w]+=A[w],M-=A[w];for(y=0,w=0;w<T.channels_out;++w)y+=P[w];if(y>Ft.MAX_BITS_PER_GRANULE){var F=0;for(w=0;w<T.channels_out;++w)P[w]*=Ft.MAX_BITS_PER_GRANULE,P[w]/=y,F+=P[w]}return x},this.reduce_side=function(g,R,P,S){Qi(g[0]+g[1]<=Ft.MAX_BITS_PER_GRANULE);var L=.33*(.5-R)/.5;L<0&&(L=0),L>.5&&(L=.5);var I=0|L*.5*(g[0]+g[1]);I>Ft.MAX_BITS_PER_CHANNEL-g[0]&&(I=Ft.MAX_BITS_PER_CHANNEL-g[0]),I<0&&(I=0),g[1]>=125&&(g[1]-I>125?(g[0]<P&&(g[0]+=I),g[1]-=I):(g[0]+=g[1]-125,g[1]=125)),I=g[0]+g[1],I>S&&(g[0]=S*g[0]/I,g[1]=S*g[1]/I),Qi(g[0]<=Ft.MAX_BITS_PER_CHANNEL),Qi(g[1]<=Ft.MAX_BITS_PER_CHANNEL),Qi(g[0]+g[1]<=Ft.MAX_BITS_PER_GRANULE)},this.athAdjust=function(g,R,P){var S=90.30873362,L=94.82444863,I=fc.FAST_LOG10_X(R,10),T=g*g,E=0;return I-=P,T>1e-20&&(E=1+fc.FAST_LOG10_X(T,10/S)),E<0&&(E=0),I*=E,I+=P+S-L,Math.pow(10,.1*I)},this.calc_xmin=function(g,R,P,S){var L=0,I=g.internal_flags,T,E=0,y=0,A=I.ATH,w=P.xr,k=g.VBR==Xa.vbr_mtrh?1:0,M=I.masking_lower;for((g.VBR==Xa.vbr_mtrh||g.VBR==Xa.vbr_mt)&&(M=1),T=0;T<P.psy_lmax;T++){var x,F,V,D,z,p;g.VBR==Xa.vbr_rh||g.VBR==Xa.vbr_mtrh?F=athAdjust(A.adjust,A.l[T],A.floor):F=A.adjust*A.l[T],z=P.width[T],V=F/z,D=a,p=z>>1,x=0;do{var B,U;B=w[E]*w[E],x+=B,D+=B<V?B:V,E++,U=w[E]*w[E],x+=U,D+=U<V?U:V,E++}while(--p>0);if(x>F&&y++,T==H.SBPSY_l){var $=F*I.nsPsy.longfact[T];D<$&&(D=$)}if(k!=0&&(F=D),!g.ATHonly){var ee=R.en.l[T];if(ee>0){var $;$=x*R.thm.l[T]*M/ee,k!=0&&($*=I.nsPsy.longfact[T]),F<$&&(F=$)}}k!=0?S[L++]=F:S[L++]=F*I.nsPsy.longfact[T]}var re=575;if(P.block_type!=H.SHORT_TYPE)for(var G=576;G--!=0&&ls.EQ(w[G],0);)re=G;P.max_nonzero_coeff=re;for(var ae=P.sfb_smin;T<P.psymax;ae++,T+=3){var z,X,he;for(g.VBR==Xa.vbr_rh||g.VBR==Xa.vbr_mtrh?he=athAdjust(A.adjust,A.s[ae],A.floor):he=A.adjust*A.s[ae],z=P.width[T],X=0;X<3;X++){var x=0,F,V,D,p=z>>1;V=he/z,D=a;do{var B,U;B=w[E]*w[E],x+=B,D+=B<V?B:V,E++,U=w[E]*w[E],x+=U,D+=U<V?U:V,E++}while(--p>0);if(x>he&&y++,ae==H.SBPSY_s){var $=he*I.nsPsy.shortfact[ae];D<$&&(D=$)}if(k!=0?F=D:F=he,!g.ATHonly&&!g.ATHshort){var ee=R.en.s[ae][X];if(ee>0){var $;$=x*R.thm.s[ae][X]*M/ee,k!=0&&($*=I.nsPsy.shortfact[ae]),F<$&&(F=$)}}k!=0?S[L++]=F:S[L++]=F*I.nsPsy.shortfact[ae]}g.useTemporal&&(S[L-3]>S[L-3+1]&&(S[L-3+1]+=(S[L-3]-S[L-3+1])*I.decay),S[L-3+1]>S[L-3+2]&&(S[L-3+2]+=(S[L-3+1]-S[L-3+2])*I.decay))}return y};function _(g){this.s=g}this.calc_noise_core=function(g,R,P,S){var L=0,I=R.s,T=g.l3_enc;if(I>g.count1)for(;P--!=0;){var E;E=g.xr[I],I++,L+=E*E,E=g.xr[I],I++,L+=E*E}else if(I>g.big_values){var y=Za(2);for(y[0]=0,y[1]=S;P--!=0;){var E;E=Math.abs(g.xr[I])-y[T[I]],I++,L+=E*E,E=Math.abs(g.xr[I])-y[T[I]],I++,L+=E*E}}else for(;P--!=0;){var E;E=Math.abs(g.xr[I])-m[T[I]]*S,I++,L+=E*E,E=Math.abs(g.xr[I])-m[T[I]]*S,I++,L+=E*E}return R.s=I,L},this.calc_noise=function(g,R,P,S,L){var I=0,T=0,E,y,A=0,w=0,k=0,M=-20,x=0,F=g.scalefac,V=0;for(S.over_SSD=0,E=0;E<g.psymax;E++){var D=g.global_gain-(F[V++]+(g.preflag!=0?d[E]:0)<<g.scalefac_scale+1)-g.subblock_gain[g.window[E]]*8,z=0;if(L!=null&&L.step[E]==D)z=L.noise[E],x+=g.width[E],P[I++]=z/R[T++],z=L.noise_log[E];else{var p=s(D);if(y=g.width[E]>>1,x+g.width[E]>g.max_nonzero_coeff){var B;B=g.max_nonzero_coeff-x+1,B>0?y=B>>1:y=0}var U=new _(x);z=this.calc_noise_core(g,U,y,p),x=U.s,L!=null&&(L.step[E]=D,L.noise[E]=z),z=P[I++]=z/R[T++],z=fc.FAST_LOG10(Math.max(z,1e-20)),L!=null&&(L.noise_log[E]=z)}if(L!=null&&(L.global_gain=g.global_gain),k+=z,z>0){var $;$=Math.max(0|z*10+.5,1),S.over_SSD+=$*$,A++,w+=z}M=Math.max(M,z)}return S.over_count=A,S.tot_noise=k,S.over_noise=w,S.max_noise=M,A},this.set_pinfo=function(g,R,P,S,L){var I=g.internal_flags,T,E,y,A,w,k=R.scalefac_scale==0?.5:1,M=R.scalefac,x=Za(L3Side.SFBMAX),F=Za(L3Side.SFBMAX),V=new CalcNoiseResult;calc_xmin(g,P,R,x),calc_noise(R,x,F,V,null);var D=0;for(E=R.sfb_lmax,R.block_type!=H.SHORT_TYPE&&R.mixed_block_flag==0&&(E=22),T=0;T<E;T++){var z=I.scalefac_band.l[T],p=I.scalefac_band.l[T+1],B=p-z;for(A=0;D<p;D++)A+=R.xr[D]*R.xr[D];A/=B,w=1e15,I.pinfo.en[S][L][T]=w*A,I.pinfo.xfsf[S][L][T]=w*x[T]*F[T]/B,P.en.l[T]>0&&!g.ATHonly?A=A/P.en.l[T]:A=0,I.pinfo.thr[S][L][T]=w*Math.max(A*P.thm.l[T],I.ATH.l[T]),I.pinfo.LAMEsfb[S][L][T]=0,R.preflag!=0&&T>=11&&(I.pinfo.LAMEsfb[S][L][T]=-k*d[T]),T<H.SBPSY_l&&(Qi(M[T]>=0),I.pinfo.LAMEsfb[S][L][T]-=k*M[T])}if(R.block_type==H.SHORT_TYPE)for(E=T,T=R.sfb_smin;T<H.SBMAX_s;T++)for(var z=I.scalefac_band.s[T],p=I.scalefac_band.s[T+1],B=p-z,U=0;U<3;U++){for(A=0,y=z;y<p;y++)A+=R.xr[D]*R.xr[D],D++;A=Math.max(A/B,1e-20),w=1e15,I.pinfo.en_s[S][L][3*T+U]=w*A,I.pinfo.xfsf_s[S][L][3*T+U]=w*x[E]*F[E]/B,P.en.s[T][U]>0?A=A/P.en.s[T][U]:A=0,(g.ATHonly||g.ATHshort)&&(A=0),I.pinfo.thr_s[S][L][3*T+U]=w*Math.max(A*P.thm.s[T][U],I.ATH.s[T]),I.pinfo.LAMEsfb_s[S][L][3*T+U]=-2*R.subblock_gain[U],T<H.SBPSY_s&&(I.pinfo.LAMEsfb_s[S][L][3*T+U]-=k*M[E]),E++}I.pinfo.LAMEqss[S][L]=R.global_gain,I.pinfo.LAMEmainbits[S][L]=R.part2_3_length+R.part2_length,I.pinfo.LAMEsfbits[S][L]=R.part2_length,I.pinfo.over[S][L]=V.over_count,I.pinfo.max_noise[S][L]=V.max_noise*10,I.pinfo.over_noise[S][L]=V.over_noise*10,I.pinfo.tot_noise[S][L]=V.tot_noise*10,I.pinfo.over_SSD[S][L]=V.over_SSD}}var W9=Ue.System,Y9=Ue.Arrays,Ji=Ue.new_int,mc=Ue.assert;function Ro(){var e=null;this.qupvt=null,this.setModules=function(y){this.qupvt=y,e=y};function t(y){this.bits=0|y}var n=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]];function s(y,A,w,k,M,x){var F=.5946/A;for(y=y>>1;y--!=0;)M[x++]=F>w[k++]?0:1,M[x++]=F>w[k++]?0:1}function a(y,A,w,k,M,x){y=y>>1;var F=y%2;for(y=y>>1;y--!=0;){var V,D,z,p,B,U,$,ee;V=w[k++]*A,D=w[k++]*A,B=0|V,z=w[k++]*A,U=0|D,p=w[k++]*A,$=0|z,V+=e.adj43[B],ee=0|p,D+=e.adj43[U],M[x++]=0|V,z+=e.adj43[$],M[x++]=0|D,p+=e.adj43[ee],M[x++]=0|z,M[x++]=0|p}if(F!=0){var V,D,B,U;V=w[k++]*A,D=w[k++]*A,B=0|V,U=0|D,V+=e.adj43[B],D+=e.adj43[U],M[x++]=0|V,M[x++]=0|D}}function i(y,A,w,k,M){var x,F,V=0,D,z=0,p=0,B=0,U=A,$=0,ee=U,re=0,G=y,ae=0;for(D=M!=null&&k.global_gain==M.global_gain,k.block_type==H.SHORT_TYPE?F=38:F=21,x=0;x<=F;x++){var X=-1;if((D||k.block_type==H.NORM_TYPE)&&(X=k.global_gain-(k.scalefac[x]+(k.preflag!=0?e.pretab[x]:0)<<k.scalefac_scale+1)-k.subblock_gain[k.window[x]]*8),mc(k.width[x]>=0),D&&M.step[x]==X)z!=0&&(a(z,w,G,ae,ee,re),z=0),p!=0&&(s(p,w,G,ae,ee,re),p=0);else{var he=k.width[x];if(V+k.width[x]>k.max_nonzero_coeff){var we;we=k.max_nonzero_coeff-V+1,Y9.fill(A,k.max_nonzero_coeff,576,0),he=we,he<0&&(he=0),x=F+1}if(z==0&&p==0&&(ee=U,re=$,G=y,ae=B),M!=null&&M.sfb_count1>0&&x>=M.sfb_count1&&M.step[x]>0&&X>=M.step[x]?(z!=0&&(a(z,w,G,ae,ee,re),z=0,ee=U,re=$,G=y,ae=B),p+=he):(p!=0&&(s(p,w,G,ae,ee,re),p=0,ee=U,re=$,G=y,ae=B),z+=he),he<=0){p!=0&&(s(p,w,G,ae,ee,re),p=0),z!=0&&(a(z,w,G,ae,ee,re),z=0);break}}x<=F&&($+=k.width[x],B+=k.width[x],V+=k.width[x])}z!=0&&(a(z,w,G,ae,ee,re),z=0),p!=0&&(s(p,w,G,ae,ee,re),p=0)}function o(y,A,w){var k=0,M=0;do{var x=y[A++],F=y[A++];k<x&&(k=x),M<F&&(M=F)}while(A<w);return k<M&&(k=M),k}function r(y,A,w,k,M,x){var F=ke.ht[k].xlen*65536+ke.ht[M].xlen,V=0,D;do{var z=y[A++],p=y[A++];z!=0&&(z>14&&(z=15,V+=F),z*=16),p!=0&&(p>14&&(p=15,V+=F),z+=p),V+=ke.largetbl[z]}while(A<w);return D=V&65535,V>>=16,V>D&&(V=D,k=M),x.bits+=V,k}function f(y,A,w,k){var M=0,x=ke.ht[1].hlen;do{var F=y[A+0]*2+y[A+1];A+=2,M+=x[F]}while(A<w);return k.bits+=M,1}function u(y,A,w,k,M){var x=0,F,V=ke.ht[k].xlen,D;k==2?D=ke.table23:D=ke.table56;do{var z=y[A+0]*V+y[A+1];A+=2,x+=D[z]}while(A<w);return F=x&65535,x>>=16,x>F&&(x=F,k++),M.bits+=x,k}function d(y,A,w,k,M){var x=0,F=0,V=0,D=ke.ht[k].xlen,z=ke.ht[k].hlen,p=ke.ht[k+1].hlen,B=ke.ht[k+2].hlen;do{var U=y[A+0]*D+y[A+1];A+=2,x+=z[U],F+=p[U],V+=B[U]}while(A<w);var $=k;return x>F&&(x=F,$++),x>V&&(x=V,$=k+2),M.bits+=x,$}var c=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];function l(y,A,w,k){var M=o(y,A,w);switch(M){case 0:return M;case 1:return f(y,A,w,k);case 2:case 3:return u(y,A,w,c[M-1],k);case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return d(y,A,w,c[M-1],k);default:if(M>xn.IXMAX_VAL)return k.bits=xn.LARGE_BITS,-1;M-=15;var x;for(x=24;x<32&&!(ke.ht[x].linmax>=M);x++);var F;for(F=x-8;F<24&&!(ke.ht[F].linmax>=M);F++);return r(y,A,w,F,x,k)}}this.noquant_count_bits=function(y,A,w){var k=A.l3_enc,M=Math.min(576,A.max_nonzero_coeff+2>>1<<1);for(w!=null&&(w.sfb_count1=0);M>1&&(k[M-1]|k[M-2])==0;M-=2);A.count1=M;for(var x=0,F=0;M>3;M-=4){var V;if(((k[M-1]|k[M-2]|k[M-3]|k[M-4])&2147483647)>1)break;V=((k[M-4]*2+k[M-3])*2+k[M-2])*2+k[M-1],x+=ke.t32l[V],F+=ke.t33l[V]}var D=x;if(A.count1table_select=0,x>F&&(D=F,A.count1table_select=1),A.count1bits=D,A.big_values=M,M==0)return D;if(A.block_type==H.SHORT_TYPE)x=3*y.scalefac_band.s[3],x>A.big_values&&(x=A.big_values),F=A.big_values;else if(A.block_type==H.NORM_TYPE){if(x=A.region0_count=y.bv_scf[M-2],F=A.region1_count=y.bv_scf[M-1],F=y.scalefac_band.l[x+F+2],x=y.scalefac_band.l[x+1],F<M){var z=new t(D);A.table_select[2]=l(k,F,M,z),D=z.bits}}else A.region0_count=7,A.region1_count=H.SBMAX_l-1-7-1,x=y.scalefac_band.l[8],F=M,x>F&&(x=F);if(x=Math.min(x,M),F=Math.min(F,M),x>0){var z=new t(D);A.table_select[0]=l(k,0,x,z),D=z.bits}if(x<F){var z=new t(D);A.table_select[1]=l(k,x,F,z),D=z.bits}if(y.use_best_huffman==2&&(A.part2_3_length=D,best_huffman_divide(y,A),D=A.part2_3_length),w!=null&&A.block_type==H.NORM_TYPE){for(var p=0;y.scalefac_band.l[p]<A.big_values;)p++;w.sfb_count1=p}return D},this.count_bits=function(y,A,w,k){var M=w.l3_enc,x=xn.IXMAX_VAL/e.IPOW20(w.global_gain);if(w.xrpow_max>x)return xn.LARGE_BITS;if(i(A,M,e.IPOW20(w.global_gain),w,k),(y.substep_shaping&2)!=0)for(var F=0,V=w.global_gain+w.scalefac_scale,D=.634521682242439/e.IPOW20(V),z=0;z<w.sfbmax;z++){var p=w.width[z];if(y.pseudohalf[z]==0)F+=p;else{var B;for(B=F,F+=p;B<F;++B)M[B]=A[B]>=D?M[B]:0}}return this.noquant_count_bits(y,w,k)};function m(y,A,w,k,M,x,F){for(var V=A.big_values,D=0;D<=22;D++)k[D]=xn.LARGE_BITS;for(var D=0;D<16;D++){var z=y.scalefac_band.l[D+1];if(z>=V)break;var p=0,B=new t(p),U=l(w,0,z,B);p=B.bits;for(var $=0;$<8;$++){var ee=y.scalefac_band.l[D+$+2];if(ee>=V)break;var re=p;B=new t(re);var G=l(w,z,ee,B);re=B.bits,k[D+$]>re&&(k[D+$]=re,M[D+$]=D,x[D+$]=U,F[D+$]=G)}}}function v(y,A,w,k,M,x,F,V){for(var D=A.big_values,z=2;z<H.SBMAX_l+1;z++){var p=y.scalefac_band.l[z];if(p>=D)break;var B=M[z-2]+A.count1bits;if(w.part2_3_length<=B)break;var U=new t(B),$=l(k,p,D,U);B=U.bits,!(w.part2_3_length<=B)&&(w.assign(A),w.part2_3_length=B,w.region0_count=x[z-2],w.region1_count=z-2-x[z-2],w.table_select[0]=F[z-2],w.table_select[1]=V[z-2],w.table_select[2]=$)}}this.best_huffman_divide=function(y,A){var w=new Gr,k=A.l3_enc,M=Ji(23),x=Ji(23),F=Ji(23),V=Ji(23);if(!(A.block_type==H.SHORT_TYPE&&y.mode_gr==1)){w.assign(A),A.block_type==H.NORM_TYPE&&(m(y,A,k,M,x,F,V),v(y,w,A,k,M,x,F,V));var D=w.big_values;if(!(D==0||(k[D-2]|k[D-1])>1)&&(D=A.count1+2,!(D>576))){w.assign(A),w.count1=D;for(var z=0,p=0;D>w.big_values;D-=4){var B=((k[D-4]*2+k[D-3])*2+k[D-2])*2+k[D-1];z+=ke.t32l[B],p+=ke.t33l[B]}if(w.big_values=D,w.count1table_select=0,z>p&&(z=p,w.count1table_select=1),w.count1bits=z,w.block_type==H.NORM_TYPE)v(y,w,A,k,M,x,F,V);else{if(w.part2_3_length=z,z=y.scalefac_band.l[8],z>D&&(z=D),z>0){var U=new t(w.part2_3_length);w.table_select[0]=l(k,0,z,U),w.part2_3_length=U.bits}if(D>z){var U=new t(w.part2_3_length);w.table_select[1]=l(k,z,D,U),w.part2_3_length=U.bits}A.part2_3_length>w.part2_3_length&&A.assign(w)}}}};var C=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],b=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],_=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],g=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];Ro.slen1_tab=_,Ro.slen2_tab=g;function R(y,A){for(var w,k=A.tt[1][y],M=A.tt[0][y],x=0;x<ke.scfsi_band.length-1;x++){for(w=ke.scfsi_band[x];w<ke.scfsi_band[x+1]&&!(M.scalefac[w]!=k.scalefac[w]&&k.scalefac[w]>=0);w++);if(w==ke.scfsi_band[x+1]){for(w=ke.scfsi_band[x];w<ke.scfsi_band[x+1];w++)k.scalefac[w]=-1;A.scfsi[y][x]=1}}var F=0,V=0;for(w=0;w<11;w++)k.scalefac[w]!=-1&&(V++,F<k.scalefac[w]&&(F=k.scalefac[w]));for(var D=0,z=0;w<H.SBPSY_l;w++)k.scalefac[w]!=-1&&(z++,D<k.scalefac[w]&&(D=k.scalefac[w]));for(var x=0;x<16;x++)if(F<C[x]&&D<b[x]){var p=_[x]*V+g[x]*z;k.part2_length>p&&(k.part2_length=p,k.scalefac_compress=x)}}this.best_scalefac_store=function(y,A,w,k){var M=k.tt[A][w],x,F,V,D,z=0;for(V=0,x=0;x<M.sfbmax;x++){var p=M.width[x];for(V+=p,D=-p;D<0&&M.l3_enc[D+V]==0;D++);D==0&&(M.scalefac[x]=z=-2)}if(M.scalefac_scale==0&&M.preflag==0){var B=0;for(x=0;x<M.sfbmax;x++)M.scalefac[x]>0&&(B|=M.scalefac[x]);if((B&1)==0&&B!=0){for(x=0;x<M.sfbmax;x++)M.scalefac[x]>0&&(M.scalefac[x]>>=1);M.scalefac_scale=z=1}}if(M.preflag==0&&M.block_type!=H.SHORT_TYPE&&y.mode_gr==2){for(x=11;x<H.SBPSY_l&&!(M.scalefac[x]<e.pretab[x]&&M.scalefac[x]!=-2);x++);if(x==H.SBPSY_l){for(x=11;x<H.SBPSY_l;x++)M.scalefac[x]>0&&(M.scalefac[x]-=e.pretab[x]);M.preflag=z=1}}for(F=0;F<4;F++)k.scfsi[w][F]=0;for(y.mode_gr==2&&A==1&&k.tt[0][w].block_type!=H.SHORT_TYPE&&k.tt[1][w].block_type!=H.SHORT_TYPE&&(R(w,k),z=0),x=0;x<M.sfbmax;x++)M.scalefac[x]==-2&&(M.scalefac[x]=0);z!=0&&(y.mode_gr==2?this.scale_bitcount(M):this.scale_bitcount_lsf(y,M))};function P(y,A){for(var w=0;w<A;++w)if(y[w]<0)return!1;return!0}var S=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],L=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],I=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(y){var A,w,k=0,M=0,x,F=y.scalefac;if(mc(P(F,y.sfbmax)),y.block_type==H.SHORT_TYPE)x=S,y.mixed_block_flag!=0&&(x=L);else if(x=I,y.preflag==0){for(w=11;w<H.SBPSY_l&&!(F[w]<e.pretab[w]);w++);if(w==H.SBPSY_l)for(y.preflag=1,w=11;w<H.SBPSY_l;w++)F[w]-=e.pretab[w]}for(w=0;w<y.sfbdivide;w++)k<F[w]&&(k=F[w]);for(;w<y.sfbmax;w++)M<F[w]&&(M=F[w]);for(y.part2_length=xn.LARGE_BITS,A=0;A<16;A++)k<C[A]&&M<b[A]&&y.part2_length>x[A]&&(y.part2_length=x[A],y.scalefac_compress=A);return y.part2_length==xn.LARGE_BITS};var T=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(y,A){var w,k,M,x,F,V,D,z,p=Ji(4),B=A.scalefac;for(A.preflag!=0?w=2:w=0,D=0;D<4;D++)p[D]=0;if(A.block_type==H.SHORT_TYPE){k=1;var U=e.nr_of_sfb_block[w][k];for(z=0,M=0;M<4;M++)for(x=U[M]/3,D=0;D<x;D++,z++)for(F=0;F<3;F++)B[z*3+F]>p[M]&&(p[M]=B[z*3+F])}else{k=0;var U=e.nr_of_sfb_block[w][k];for(z=0,M=0;M<4;M++)for(x=U[M],D=0;D<x;D++,z++)B[z]>p[M]&&(p[M]=B[z])}for(V=!1,M=0;M<4;M++)p[M]>T[w][M]&&(V=!0);if(!V){var $,ee,re,G;for(A.sfb_partition_table=e.nr_of_sfb_block[w][k],M=0;M<4;M++)A.slen[M]=E[p[M]];switch($=A.slen[0],ee=A.slen[1],re=A.slen[2],G=A.slen[3],w){case 0:A.scalefac_compress=($*5+ee<<4)+(re<<2)+G;break;case 1:A.scalefac_compress=400+($*5+ee<<2)+re;break;case 2:A.scalefac_compress=500+$*3+ee;break;default:W9.err.printf(`intensity stereo not implemented yet
`);break}}if(!V)for(mc(A.sfb_partition_table!=null),A.part2_length=0,M=0;M<4;M++)A.part2_length+=A.slen[M]*A.sfb_partition_table[M];return V};var E=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(y){for(var A=2;A<=576;A+=2){for(var w=0,k;y.scalefac_band.l[++w]<A;);for(k=n[w][0];y.scalefac_band.l[k+1]>A;)k--;for(k<0&&(k=n[w][0]),y.bv_scf[A-2]=k,k=n[w][1];y.scalefac_band.l[k+y.bv_scf[A-2]+2]>A;)k--;k<0&&(k=n[w][1]),y.bv_scf[A-1]=k}}}var Is=Ue.System,K9=Ue.Arrays,G9=Ue.new_byte,X9=Ue.new_float_n,Z9=Ue.new_int,gn=Ue.assert;ls.EQ=function(e,t){return Math.abs(e)>Math.abs(t)?Math.abs(e-t)<=Math.abs(e)*1e-6:Math.abs(e-t)<=Math.abs(t)*1e-6};ls.NEQ=function(e,t){return!ls.EQ(e,t)};function ls(){var e=this,t=32773,n=null,s=null,a=null,i=null;this.setModules=function(T,E,y,A){n=T,s=E,a=y,i=A};var o=null,r=0,f=0,u=0;this.getframebits=function(T){var E=T.internal_flags,y;E.bitrate_index!=0?y=ke.bitrate_table[T.version][E.bitrate_index]:y=T.brate;var A=0|(T.version+1)*72e3*y/T.out_samplerate+E.padding;return 8*A};function d(T){Is.arraycopy(T.header[T.w_ptr].buf,0,o,f,T.sideinfo_len),f+=T.sideinfo_len,r+=T.sideinfo_len*8,T.w_ptr=T.w_ptr+1&Ft.MAX_HEADER_BUF-1}function c(T,E,y){for(;y>0;){var A;u==0&&(u=8,f++,gn(T.header[T.w_ptr].write_timing>=r),T.header[T.w_ptr].write_timing==r&&d(T),o[f]=0),A=Math.min(y,u),y-=A,u-=A,o[f]|=E>>y<<u,r+=A}}function l(T,E,y){for(;y>0;){var A;u==0&&(u=8,f++,o[f]=0),A=Math.min(y,u),y-=A,u-=A,o[f]|=E>>y<<u,r+=A}}function m(T,E){var y=T.internal_flags,A;if(E>=8&&(c(y,76,8),E-=8),E>=8&&(c(y,65,8),E-=8),E>=8&&(c(y,77,8),E-=8),E>=8&&(c(y,69,8),E-=8),E>=32){var w=a.getLameShortVersion();if(E>=32)for(A=0;A<w.length&&E>=8;++A)E-=8,c(y,w.charAt(A),8)}for(;E>=1;E-=1)c(y,y.ancillary_flag,1),y.ancillary_flag^=T.disable_reservoir?0:1}function v(T,E,y){for(var A=T.header[T.h_ptr].ptr;y>0;){var w=Math.min(y,8-(A&7));y-=w,T.header[T.h_ptr].buf[A>>3]|=E>>y<<8-(A&7)-w,A+=w}T.header[T.h_ptr].ptr=A}function C(T,E){T<<=8;for(var y=0;y<8;y++)T<<=1,E<<=1,((E^T)&65536)!=0&&(E^=t);return E}this.CRC_writeheader=function(T,E){var y=65535;y=C(E[2]&255,y),y=C(E[3]&255,y);for(var A=6;A<T.sideinfo_len;A++)y=C(E[A]&255,y);E[4]=byte(y>>8),E[5]=byte(y&255)};function b(T,E){var y=T.internal_flags,A,w,k;if(A=y.l3_side,y.header[y.h_ptr].ptr=0,K9.fill(y.header[y.h_ptr].buf,0,y.sideinfo_len,0),T.out_samplerate<16e3?v(y,4094,12):v(y,4095,12),v(y,T.version,1),v(y,1,2),v(y,T.error_protection?0:1,1),v(y,y.bitrate_index,4),v(y,y.samplerate_index,2),v(y,y.padding,1),v(y,T.extension,1),v(y,T.mode.ordinal(),2),v(y,y.mode_ext,2),v(y,T.copyright,1),v(y,T.original,1),v(y,T.emphasis,2),T.error_protection&&v(y,0,16),T.version==1){for(gn(A.main_data_begin>=0),v(y,A.main_data_begin,9),y.channels_out==2?v(y,A.private_bits,3):v(y,A.private_bits,5),k=0;k<y.channels_out;k++){var M;for(M=0;M<4;M++)v(y,A.scfsi[k][M],1)}for(w=0;w<2;w++)for(k=0;k<y.channels_out;k++){var x=A.tt[w][k];v(y,x.part2_3_length+x.part2_length,12),v(y,x.big_values/2,9),v(y,x.global_gain,8),v(y,x.scalefac_compress,4),x.block_type!=H.NORM_TYPE?(v(y,1,1),v(y,x.block_type,2),v(y,x.mixed_block_flag,1),x.table_select[0]==14&&(x.table_select[0]=16),v(y,x.table_select[0],5),x.table_select[1]==14&&(x.table_select[1]=16),v(y,x.table_select[1],5),v(y,x.subblock_gain[0],3),v(y,x.subblock_gain[1],3),v(y,x.subblock_gain[2],3)):(v(y,0,1),x.table_select[0]==14&&(x.table_select[0]=16),v(y,x.table_select[0],5),x.table_select[1]==14&&(x.table_select[1]=16),v(y,x.table_select[1],5),x.table_select[2]==14&&(x.table_select[2]=16),v(y,x.table_select[2],5),gn(x.region0_count>=0&&x.region0_count<16),gn(x.region1_count>=0&&x.region1_count<8),v(y,x.region0_count,4),v(y,x.region1_count,3)),v(y,x.preflag,1),v(y,x.scalefac_scale,1),v(y,x.count1table_select,1)}}else for(gn(A.main_data_begin>=0),v(y,A.main_data_begin,8),v(y,A.private_bits,y.channels_out),w=0,k=0;k<y.channels_out;k++){var x=A.tt[w][k];v(y,x.part2_3_length+x.part2_length,12),v(y,x.big_values/2,9),v(y,x.global_gain,8),v(y,x.scalefac_compress,9),x.block_type!=H.NORM_TYPE?(v(y,1,1),v(y,x.block_type,2),v(y,x.mixed_block_flag,1),x.table_select[0]==14&&(x.table_select[0]=16),v(y,x.table_select[0],5),x.table_select[1]==14&&(x.table_select[1]=16),v(y,x.table_select[1],5),v(y,x.subblock_gain[0],3),v(y,x.subblock_gain[1],3),v(y,x.subblock_gain[2],3)):(v(y,0,1),x.table_select[0]==14&&(x.table_select[0]=16),v(y,x.table_select[0],5),x.table_select[1]==14&&(x.table_select[1]=16),v(y,x.table_select[1],5),x.table_select[2]==14&&(x.table_select[2]=16),v(y,x.table_select[2],5),gn(x.region0_count>=0&&x.region0_count<16),gn(x.region1_count>=0&&x.region1_count<8),v(y,x.region0_count,4),v(y,x.region1_count,3)),v(y,x.scalefac_scale,1),v(y,x.count1table_select,1)}T.error_protection&&CRC_writeheader(y,y.header[y.h_ptr].buf);{var F=y.h_ptr;gn(y.header[F].ptr==y.sideinfo_len*8),y.h_ptr=F+1&Ft.MAX_HEADER_BUF-1,y.header[y.h_ptr].write_timing=y.header[F].write_timing+E,y.h_ptr==y.w_ptr&&Is.err.println(`Error: MAX_HEADER_BUF too small in bitstream.c 
`)}}function _(T,E){var y=ke.ht[E.count1table_select+32],A,w=0,k=E.big_values,M=E.big_values;for(gn(E.count1table_select<2),A=(E.count1-E.big_values)/4;A>0;--A){var x=0,F=0,V;V=E.l3_enc[k+0],V!=0&&(F+=8,E.xr[M+0]<0&&x++),V=E.l3_enc[k+1],V!=0&&(F+=4,x*=2,E.xr[M+1]<0&&x++),V=E.l3_enc[k+2],V!=0&&(F+=2,x*=2,E.xr[M+2]<0&&x++),V=E.l3_enc[k+3],V!=0&&(F++,x*=2,E.xr[M+3]<0&&x++),k+=4,M+=4,c(T,x+y.table[F],y.hlen[F]),w+=y.hlen[F]}return w}function g(T,E,y,A,w){var k=ke.ht[E],M=0;if(E==0)return M;for(var x=y;x<A;x+=2){var F=0,V=0,D=k.xlen,z=k.xlen,p=0,B=w.l3_enc[x],U=w.l3_enc[x+1];if(B!=0&&(w.xr[x]<0&&p++,F--),E>15){if(B>14){var $=B-15;gn($<=k.linmax),p|=$<<1,V=D,B=15}if(U>14){var ee=U-15;gn(ee<=k.linmax),p<<=D,p|=ee,V+=D,U=15}z=16}U!=0&&(p<<=1,w.xr[x+1]<0&&p++,F--),B=B*z+U,V-=F,F+=k.hlen[B],c(T,k.table[B],F),c(T,p,V),M+=F+V}return M}function R(T,E){var y=3*T.scalefac_band.s[3];y>E.big_values&&(y=E.big_values);var A=g(T,E.table_select[0],0,y,E);return A+=g(T,E.table_select[1],y,E.big_values,E),A}function P(T,E){var y,A,w,k;y=E.big_values;var M=E.region0_count+1;return gn(M<T.scalefac_band.l.length),w=T.scalefac_band.l[M],M+=E.region1_count+1,gn(M<T.scalefac_band.l.length),k=T.scalefac_band.l[M],w>y&&(w=y),k>y&&(k=y),A=g(T,E.table_select[0],0,w,E),A+=g(T,E.table_select[1],w,k,E),A+=g(T,E.table_select[2],k,y,E),A}function S(T){var E,y,A,w,k=0,M=T.internal_flags,x=M.l3_side;if(T.version==1)for(E=0;E<2;E++)for(y=0;y<M.channels_out;y++){var F=x.tt[E][y],V=Ro.slen1_tab[F.scalefac_compress],D=Ro.slen2_tab[F.scalefac_compress];for(w=0,A=0;A<F.sfbdivide;A++)F.scalefac[A]!=-1&&(c(M,F.scalefac[A],V),w+=V);for(;A<F.sfbmax;A++)F.scalefac[A]!=-1&&(c(M,F.scalefac[A],D),w+=D);gn(w==F.part2_length),F.block_type==H.SHORT_TYPE?w+=R(M,F):w+=P(M,F),w+=_(M,F),gn(w==F.part2_3_length+F.part2_length),k+=w}else for(E=0,y=0;y<M.channels_out;y++){var F=x.tt[E][y],z,p,B=0;if(gn(F.sfb_partition_table!=null),w=0,A=0,p=0,F.block_type==H.SHORT_TYPE){for(;p<4;p++){var U=F.sfb_partition_table[p]/3,$=F.slen[p];for(z=0;z<U;z++,A++)c(M,Math.max(F.scalefac[A*3+0],0),$),c(M,Math.max(F.scalefac[A*3+1],0),$),c(M,Math.max(F.scalefac[A*3+2],0),$),B+=3*$}w+=R(M,F)}else{for(;p<4;p++){var U=F.sfb_partition_table[p],$=F.slen[p];for(z=0;z<U;z++,A++)c(M,Math.max(F.scalefac[A],0),$),B+=$}w+=P(M,F)}w+=_(M,F),gn(w==F.part2_3_length),gn(B==F.part2_length),k+=B+w}return k}function L(){this.total=0}function I(T,E){var y=T.internal_flags,A,w,k,M,x;return x=y.w_ptr,M=y.h_ptr-1,M==-1&&(M=Ft.MAX_HEADER_BUF-1),A=y.header[M].write_timing-r,E.total=A,A>=0&&(w=1+M-x,M<x&&(w=1+M-x+Ft.MAX_HEADER_BUF),A-=w*8*y.sideinfo_len),k=e.getframebits(T),A+=k,E.total+=k,E.total%8!=0?E.total=1+E.total/8:E.total=E.total/8,E.total+=f+1,A<0&&Is.err.println(`strange error flushing buffer ... 
`),A}this.flush_bitstream=function(T){var E=T.internal_flags,y,A,w=E.h_ptr-1;if(w==-1&&(w=Ft.MAX_HEADER_BUF-1),y=E.l3_side,!((A=I(T,new L))<0)){if(m(T,A),gn(E.header[w].write_timing+this.getframebits(T)==r),E.ResvSize=0,y.main_data_begin=0,E.findReplayGain){var k=n.GetTitleGain(E.rgdata);gn(NEQ(k,GainAnalysis.GAIN_NOT_ENOUGH_SAMPLES)),E.RadioGain=Math.floor(k*10+.5)|0}E.findPeakSample&&(E.noclipGainChange=Math.ceil(Math.log10(E.PeakSample/32767)*20*10)|0,E.noclipGainChange>0&&(EQ(T.scale,1)||EQ(T.scale,0))?E.noclipScale=Math.floor(32767/E.PeakSample*100)/100:E.noclipScale=-1)}},this.add_dummy_byte=function(T,E,y){for(var A=T.internal_flags,w;y-- >0;)for(l(A,E,8),w=0;w<Ft.MAX_HEADER_BUF;++w)A.header[w].write_timing+=8},this.format_bitstream=function(T){var E=T.internal_flags,y;y=E.l3_side;var A=this.getframebits(T);m(T,y.resvDrain_pre),b(T,A);var w=8*E.sideinfo_len;if(w+=S(T),m(T,y.resvDrain_post),w+=y.resvDrain_post,y.main_data_begin+=(A-w)/8,I(T,new L)!=E.ResvSize&&Is.err.println("Internal buffer inconsistency. flushbits <> ResvSize"),y.main_data_begin*8!=E.ResvSize&&(Is.err.printf(`bit reservoir error: 
l3_side.main_data_begin: %d 
Resvoir size:             %d 
resv drain (post)         %d 
resv drain (pre)          %d 
header and sideinfo:      %d 
data bits:                %d 
total bits:               %d (remainder: %d) 
bitsperframe:             %d 
`,8*y.main_data_begin,E.ResvSize,y.resvDrain_post,y.resvDrain_pre,8*E.sideinfo_len,w-y.resvDrain_post-8*E.sideinfo_len,w,w%8,A),Is.err.println("This is a fatal error.  It has several possible causes:"),Is.err.println("90%%  LAME compiled with buggy version of gcc using advanced optimizations"),Is.err.println(" 9%%  Your system is overclocked"),Is.err.println(" 1%%  bug in LAME encoding library"),E.ResvSize=y.main_data_begin*8),r>1e9){var k;for(k=0;k<Ft.MAX_HEADER_BUF;++k)E.header[k].write_timing-=r;r=0}return 0},this.copy_buffer=function(T,E,y,A,w){var k=f+1;if(k<=0)return 0;if(A!=0&&k>A)return-1;if(Is.arraycopy(o,0,E,y,k),f=-1,u=0,w!=0){var M=Z9(1);if(M[0]=T.nMusicCRC,i.updateMusicCRC(M,E,y,k),T.nMusicCRC=M[0],k>0&&(T.VBR_seek_table.nBytesWritten+=k),T.decode_on_the_fly){for(var x=X9([2,1152]),F=k,V=-1,D;V!=0;)if(V=s.hip_decode1_unclipped(T.hip,E,y,F,x[0],x[1]),F=0,V==-1&&(V=0),V>0){if(T.findPeakSample){for(D=0;D<V;D++)x[0][D]>T.PeakSample?T.PeakSample=x[0][D]:-x[0][D]>T.PeakSample&&(T.PeakSample=-x[0][D]);if(T.channels_out>1)for(D=0;D<V;D++)x[1][D]>T.PeakSample?T.PeakSample=x[1][D]:-x[1][D]>T.PeakSample&&(T.PeakSample=-x[1][D])}if(T.findReplayGain&&n.AnalyzeSamples(T.rgdata,x[0],0,x[1],0,V,T.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6}}}return k},this.init_bit_stream_w=function(T){o=G9(bt.LAME_MAXMP3BUFFER),T.h_ptr=T.w_ptr=0,T.header[T.h_ptr].write_timing=0,f=-1,u=0,r=0}}var Q9=Ue.System,Kt=Ue.VbrMode,vc=Ue.ShortBlock,Qa=Ue.new_float,ym=Ue.new_int_n,J9=Ue.new_short_n,Sa=Ue.assert;function bt(){var e=this,t=128*1024;bt.V9=410,bt.V8=420,bt.V7=430,bt.V6=440,bt.V5=450,bt.V4=460,bt.V3=470,bt.V2=480,bt.V1=490,bt.V0=500,bt.R3MIX=1e3,bt.STANDARD=1001,bt.EXTREME=1002,bt.INSANE=1003,bt.STANDARD_FAST=1004,bt.EXTREME_FAST=1005,bt.MEDIUM=1006,bt.MEDIUM_FAST=1007;var n=16384+t;bt.LAME_MAXMP3BUFFER=n;var s,a,i,o,r,f=new uc,u,d,c;this.enc=new H,this.setModules=function(p,B,U,$,ee,re,G,ae,X){s=p,a=B,i=U,o=$,r=ee,u=re,d=ae,c=X,this.enc.setModules(a,f,o,u)};function l(){this.mask_adjust=0,this.mask_adjust_short=0,this.bo_l_weight=Qa(H.SBMAX_l),this.bo_s_weight=Qa(H.SBMAX_s)}function m(){this.lowerlimit=0}function v(p,B){this.lowpass=B}var C=4294479419;function b(p){var B;return p.class_id=C,B=p.internal_flags=new Ft,p.mode=Vt.NOT_SET,p.original=1,p.in_samplerate=44100,p.num_channels=2,p.num_samples=-1,p.bWriteVbrTag=!0,p.quality=-1,p.short_blocks=null,B.subblock_gain=-1,p.lowpassfreq=0,p.highpassfreq=0,p.lowpasswidth=-1,p.highpasswidth=-1,p.VBR=Kt.vbr_off,p.VBR_q=4,p.ATHcurve=-1,p.VBR_mean_bitrate_kbps=128,p.VBR_min_bitrate_kbps=0,p.VBR_max_bitrate_kbps=0,p.VBR_hard_min=0,B.VBR_min_bitrate=1,B.VBR_max_bitrate=13,p.quant_comp=-1,p.quant_comp_short=-1,p.msfix=-1,B.resample_ratio=1,B.OldValue[0]=180,B.OldValue[1]=180,B.CurrentStep[0]=4,B.CurrentStep[1]=4,B.masking_lower=1,B.nsPsy.attackthre=-1,B.nsPsy.attackthre_s=-1,p.scale=-1,p.athaa_type=-1,p.ATHtype=-1,p.athaa_loudapprox=-1,p.athaa_sensitivity=0,p.useTemporal=null,p.interChRatio=-1,B.mf_samples_to_encode=H.ENCDELAY+H.POSTDELAY,p.encoder_padding=0,B.mf_size=H.ENCDELAY-H.MDCTDELAY,p.findReplayGain=!1,p.decode_on_the_fly=!1,B.decode_on_the_fly=!1,B.findReplayGain=!1,B.findPeakSample=!1,B.RadioGain=0,B.AudiophileGain=0,B.noclipGainChange=0,B.noclipScale=-1,p.preset=0,p.write_id3tag_automatic=!0,0}this.lame_init=function(){var p=new B9;return b(p),p.lame_allocated_gfp=1,p};function _(p){return p>1?0:p<=0?1:Math.cos(Math.PI/2*p)}this.nearestBitrateFullIndex=function(p){var B=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320],U=0,$=0,ee=0,re=0;re=B[16],ee=16,$=B[16],U=16;for(var G=0;G<16;G++)if(Math.max(p,B[G+1])!=p){re=B[G+1],ee=G+1,$=B[G],U=G;break}return re-p>p-$?U:ee};function g(p,B){var U=44100;return B>=48e3?U=48e3:B>=44100?U=44100:B>=32e3?U=32e3:B>=24e3?U=24e3:B>=22050?U=22050:B>=16e3?U=16e3:B>=12e3?U=12e3:B>=11025?U=11025:B>=8e3&&(U=8e3),p==-1?U:(p<=15960&&(U=44100),p<=15250&&(U=32e3),p<=11220&&(U=24e3),p<=9970&&(U=22050),p<=7230&&(U=16e3),p<=5420&&(U=12e3),p<=4510&&(U=11025),p<=3970&&(U=8e3),B<U?B>44100?48e3:B>32e3?44100:B>24e3?32e3:B>22050?24e3:B>16e3?22050:B>12e3?16e3:B>11025?12e3:B>8e3?11025:8e3:U)}function R(p,B){switch(p){case 44100:return B.version=1,0;case 48e3:return B.version=1,1;case 32e3:return B.version=1,2;case 22050:return B.version=0,0;case 24e3:return B.version=0,1;case 16e3:return B.version=0,2;case 11025:return B.version=0,0;case 12e3:return B.version=0,1;case 8e3:return B.version=0,2;default:return B.version=0,-1}}function P(p,B,U){U<16e3&&(B=2);for(var $=ke.bitrate_table[B][1],ee=2;ee<=14;ee++)ke.bitrate_table[B][ee]>0&&Math.abs(ke.bitrate_table[B][ee]-p)<Math.abs($-p)&&($=ke.bitrate_table[B][ee]);return $}function S(p,B,U){U<16e3&&(B=2);for(var $=0;$<=14;$++)if(ke.bitrate_table[B][$]>0&&ke.bitrate_table[B][$]==p)return $;return-1}function L(p,B){var U=[new v(8,2e3),new v(16,3700),new v(24,3900),new v(32,5500),new v(40,7e3),new v(48,7500),new v(56,1e4),new v(64,11e3),new v(80,13500),new v(96,15100),new v(112,15600),new v(128,17e3),new v(160,17500),new v(192,18600),new v(224,19400),new v(256,19700),new v(320,20500)],$=e.nearestBitrateFullIndex(B);p.lowerlimit=U[$].lowpass}function I(p){var B=p.internal_flags,U=32,$=-1;if(B.lowpass1>0){for(var ee=999,re=0;re<=31;re++){var G=re/31;G>=B.lowpass2&&(U=Math.min(U,re)),B.lowpass1<G&&G<B.lowpass2&&(ee=Math.min(ee,re))}ee==999?B.lowpass1=(U-.75)/31:B.lowpass1=(ee-.75)/31,B.lowpass2=U/31}if(B.highpass2>0&&B.highpass2<.9*(.75/31)&&(B.highpass1=0,B.highpass2=0,Q9.err.println(`Warning: highpass filter disabled.  highpass frequency too small
`)),B.highpass2>0){for(var ae=-1,re=0;re<=31;re++){var G=re/31;G<=B.highpass1&&($=Math.max($,re)),B.highpass1<G&&G<B.highpass2&&(ae=Math.max(ae,re))}B.highpass1=$/31,ae==-1?B.highpass2=($+.75)/31:B.highpass2=(ae+.75)/31}for(var re=0;re<32;re++){var X,he,G=re/31;B.highpass2>B.highpass1?X=_((B.highpass2-G)/(B.highpass2-B.highpass1+1e-20)):X=1,B.lowpass2>B.lowpass1?he=_((G-B.lowpass1)/(B.lowpass2-B.lowpass1+1e-20)):he=1,B.amp_filter[re]=X*he}}function T(p){var B=p.internal_flags;switch(p.quality){default:case 9:B.psymodel=0,B.noise_shaping=0,B.noise_shaping_amp=0,B.noise_shaping_stop=0,B.use_best_huffman=0,B.full_outer_loop=0;break;case 8:p.quality=7;case 7:B.psymodel=1,B.noise_shaping=0,B.noise_shaping_amp=0,B.noise_shaping_stop=0,B.use_best_huffman=0,B.full_outer_loop=0;break;case 6:B.psymodel=1,B.noise_shaping==0&&(B.noise_shaping=1),B.noise_shaping_amp=0,B.noise_shaping_stop=0,B.subblock_gain==-1&&(B.subblock_gain=1),B.use_best_huffman=0,B.full_outer_loop=0;break;case 5:B.psymodel=1,B.noise_shaping==0&&(B.noise_shaping=1),B.noise_shaping_amp=0,B.noise_shaping_stop=0,B.subblock_gain==-1&&(B.subblock_gain=1),B.use_best_huffman=0,B.full_outer_loop=0;break;case 4:B.psymodel=1,B.noise_shaping==0&&(B.noise_shaping=1),B.noise_shaping_amp=0,B.noise_shaping_stop=0,B.subblock_gain==-1&&(B.subblock_gain=1),B.use_best_huffman=1,B.full_outer_loop=0;break;case 3:B.psymodel=1,B.noise_shaping==0&&(B.noise_shaping=1),B.noise_shaping_amp=1,B.noise_shaping_stop=1,B.subblock_gain==-1&&(B.subblock_gain=1),B.use_best_huffman=1,B.full_outer_loop=0;break;case 2:B.psymodel=1,B.noise_shaping==0&&(B.noise_shaping=1),B.substep_shaping==0&&(B.substep_shaping=2),B.noise_shaping_amp=1,B.noise_shaping_stop=1,B.subblock_gain==-1&&(B.subblock_gain=1),B.use_best_huffman=1,B.full_outer_loop=0;break;case 1:B.psymodel=1,B.noise_shaping==0&&(B.noise_shaping=1),B.substep_shaping==0&&(B.substep_shaping=2),B.noise_shaping_amp=2,B.noise_shaping_stop=1,B.subblock_gain==-1&&(B.subblock_gain=1),B.use_best_huffman=1,B.full_outer_loop=0;break;case 0:B.psymodel=1,B.noise_shaping==0&&(B.noise_shaping=1),B.substep_shaping==0&&(B.substep_shaping=2),B.noise_shaping_amp=2,B.noise_shaping_stop=1,B.subblock_gain==-1&&(B.subblock_gain=1),B.use_best_huffman=1,B.full_outer_loop=0;break}}function E(p){var B=p.internal_flags;p.frameNum=0,p.write_id3tag_automatic&&d.id3tag_write_v2(p),B.bitrate_stereoMode_Hist=ym([16,5]),B.bitrate_blockType_Hist=ym([16,6]),B.PeakSample=0,p.bWriteVbrTag&&u.InitVbrTag(p)}this.lame_init_params=function(p){var B=p.internal_flags;if(B.Class_ID=0,B.ATH==null&&(B.ATH=new j9),B.PSY==null&&(B.PSY=new l),B.rgdata==null&&(B.rgdata=new H9),B.channels_in=p.num_channels,B.channels_in==1&&(p.mode=Vt.MONO),B.channels_out=p.mode==Vt.MONO?1:2,B.mode_ext=H.MPG_MD_MS_LR,p.mode==Vt.MONO&&(p.force_ms=!1),p.VBR==Kt.vbr_off&&p.VBR_mean_bitrate_kbps!=128&&p.brate==0&&(p.brate=p.VBR_mean_bitrate_kbps),p.VBR==Kt.vbr_off||p.VBR==Kt.vbr_mtrh||p.VBR==Kt.vbr_mt||(p.free_format=!1),p.VBR==Kt.vbr_off&&p.brate==0&&ls.EQ(p.compression_ratio,0)&&(p.compression_ratio=11.025),p.VBR==Kt.vbr_off&&p.compression_ratio>0&&(p.out_samplerate==0&&(p.out_samplerate=map2MP3Frequency(int(.97*p.in_samplerate))),p.brate=0|p.out_samplerate*16*B.channels_out/(1e3*p.compression_ratio),B.samplerate_index=R(p.out_samplerate,p),p.free_format||(p.brate=P(p.brate,p.version,p.out_samplerate))),p.out_samplerate!=0&&(p.out_samplerate<16e3?(p.VBR_mean_bitrate_kbps=Math.max(p.VBR_mean_bitrate_kbps,8),p.VBR_mean_bitrate_kbps=Math.min(p.VBR_mean_bitrate_kbps,64)):p.out_samplerate<32e3?(p.VBR_mean_bitrate_kbps=Math.max(p.VBR_mean_bitrate_kbps,8),p.VBR_mean_bitrate_kbps=Math.min(p.VBR_mean_bitrate_kbps,160)):(p.VBR_mean_bitrate_kbps=Math.max(p.VBR_mean_bitrate_kbps,32),p.VBR_mean_bitrate_kbps=Math.min(p.VBR_mean_bitrate_kbps,320))),p.lowpassfreq==0){var U=16e3;switch(p.VBR){case Kt.vbr_off:{var $=new m;L($,p.brate),U=$.lowerlimit;break}case Kt.vbr_abr:{var $=new m;L($,p.VBR_mean_bitrate_kbps),U=$.lowerlimit;break}case Kt.vbr_rh:{var ee=[19500,19e3,18600,18e3,17500,16e3,15600,14900,12500,1e4,3950];if(p.VBR_q>=0&&p.VBR_q<=9){var re=ee[p.VBR_q],G=ee[p.VBR_q+1],ae=p.VBR_q_frac;U=linear_int(re,G,ae)}else U=19500;break}default:{var ee=[19500,19e3,18500,18e3,17500,16500,15500,14500,12500,9500,3950];if(p.VBR_q>=0&&p.VBR_q<=9){var re=ee[p.VBR_q],G=ee[p.VBR_q+1],ae=p.VBR_q_frac;U=linear_int(re,G,ae)}else U=19500}}p.mode==Vt.MONO&&(p.VBR==Kt.vbr_off||p.VBR==Kt.vbr_abr)&&(U*=1.5),p.lowpassfreq=U|0}if(p.out_samplerate==0&&(2*p.lowpassfreq>p.in_samplerate&&(p.lowpassfreq=p.in_samplerate/2),p.out_samplerate=g(p.lowpassfreq|0,p.in_samplerate)),p.lowpassfreq=Math.min(20500,p.lowpassfreq),p.lowpassfreq=Math.min(p.out_samplerate/2,p.lowpassfreq),p.VBR==Kt.vbr_off&&(p.compression_ratio=p.out_samplerate*16*B.channels_out/(1e3*p.brate)),p.VBR==Kt.vbr_abr&&(p.compression_ratio=p.out_samplerate*16*B.channels_out/(1e3*p.VBR_mean_bitrate_kbps)),p.bWriteVbrTag||(p.findReplayGain=!1,p.decode_on_the_fly=!1,B.findPeakSample=!1),B.findReplayGain=p.findReplayGain,B.decode_on_the_fly=p.decode_on_the_fly,B.decode_on_the_fly&&(B.findPeakSample=!0),B.findReplayGain&&s.InitGainAnalysis(B.rgdata,p.out_samplerate)==GainAnalysis.INIT_GAIN_ANALYSIS_ERROR)return p.internal_flags=null,-6;switch(B.decode_on_the_fly&&!p.decode_only&&(B.hip!=null&&c.hip_decode_exit(B.hip),B.hip=c.hip_decode_init()),B.mode_gr=p.out_samplerate<=24e3?1:2,p.framesize=576*B.mode_gr,p.encoder_delay=H.ENCDELAY,B.resample_ratio=p.in_samplerate/p.out_samplerate,p.VBR){case Kt.vbr_mt:case Kt.vbr_rh:case Kt.vbr_mtrh:{var X=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5];p.compression_ratio=X[p.VBR_q]}break;case Kt.vbr_abr:p.compression_ratio=p.out_samplerate*16*B.channels_out/(1e3*p.VBR_mean_bitrate_kbps);break;default:p.compression_ratio=p.out_samplerate*16*B.channels_out/(1e3*p.brate);break}if(p.mode==Vt.NOT_SET&&(p.mode=Vt.JOINT_STEREO),p.highpassfreq>0?(B.highpass1=2*p.highpassfreq,p.highpasswidth>=0?B.highpass2=2*(p.highpassfreq+p.highpasswidth):B.highpass2=1*2*p.highpassfreq,B.highpass1/=p.out_samplerate,B.highpass2/=p.out_samplerate):(B.highpass1=0,B.highpass2=0),p.lowpassfreq>0?(B.lowpass2=2*p.lowpassfreq,p.lowpasswidth>=0?(B.lowpass1=2*(p.lowpassfreq-p.lowpasswidth),B.lowpass1<0&&(B.lowpass1=0)):B.lowpass1=1*2*p.lowpassfreq,B.lowpass1/=p.out_samplerate,B.lowpass2/=p.out_samplerate):(B.lowpass1=0,B.lowpass2=0),I(p),B.samplerate_index=R(p.out_samplerate,p),B.samplerate_index<0)return p.internal_flags=null,-1;if(p.VBR==Kt.vbr_off){if(p.free_format)B.bitrate_index=0;else if(p.brate=P(p.brate,p.version,p.out_samplerate),B.bitrate_index=S(p.brate,p.version,p.out_samplerate),B.bitrate_index<=0)return p.internal_flags=null,-1}else B.bitrate_index=1;p.analysis&&(p.bWriteVbrTag=!1),B.pinfo!=null&&(p.bWriteVbrTag=!1),a.init_bit_stream_w(B);for(var he=B.samplerate_index+3*p.version+6*(p.out_samplerate<16e3?1:0),we=0;we<H.SBMAX_l+1;we++)B.scalefac_band.l[we]=o.sfBandIndex[he].l[we];for(var we=0;we<H.PSFB21+1;we++){var Ie=(B.scalefac_band.l[22]-B.scalefac_band.l[21])/H.PSFB21,K=B.scalefac_band.l[21]+we*Ie;B.scalefac_band.psfb21[we]=K}B.scalefac_band.psfb21[H.PSFB21]=576;for(var we=0;we<H.SBMAX_s+1;we++)B.scalefac_band.s[we]=o.sfBandIndex[he].s[we];for(var we=0;we<H.PSFB12+1;we++){var Ie=(B.scalefac_band.s[13]-B.scalefac_band.s[12])/H.PSFB12,K=B.scalefac_band.s[12]+we*Ie;B.scalefac_band.psfb12[we]=K}B.scalefac_band.psfb12[H.PSFB12]=192,p.version==1?B.sideinfo_len=B.channels_out==1?21:36:B.sideinfo_len=B.channels_out==1?13:21,p.error_protection&&(B.sideinfo_len+=2),E(p),B.Class_ID=C;{var te;for(te=0;te<19;te++)B.nsPsy.pefirbuf[te]=700*B.mode_gr*B.channels_out;p.ATHtype==-1&&(p.ATHtype=4)}switch(Sa(p.VBR_q<=9),Sa(p.VBR_q>=0),p.VBR){case Kt.vbr_mt:p.VBR=Kt.vbr_mtrh;case Kt.vbr_mtrh:{p.useTemporal==null&&(p.useTemporal=!1),i.apply_preset(p,500-p.VBR_q*10,0),p.quality<0&&(p.quality=LAME_DEFAULT_QUALITY),p.quality<5&&(p.quality=0),p.quality>5&&(p.quality=5),B.PSY.mask_adjust=p.maskingadjust,B.PSY.mask_adjust_short=p.maskingadjust_short,p.experimentalY?B.sfb21_extra=!1:B.sfb21_extra=p.out_samplerate>44e3,B.iteration_loop=new VBRNewIterationLoop(r);break}case Kt.vbr_rh:{i.apply_preset(p,500-p.VBR_q*10,0),B.PSY.mask_adjust=p.maskingadjust,B.PSY.mask_adjust_short=p.maskingadjust_short,p.experimentalY?B.sfb21_extra=!1:B.sfb21_extra=p.out_samplerate>44e3,p.quality>6&&(p.quality=6),p.quality<0&&(p.quality=LAME_DEFAULT_QUALITY),B.iteration_loop=new VBROldIterationLoop(r);break}default:{var ve;B.sfb21_extra=!1,p.quality<0&&(p.quality=LAME_DEFAULT_QUALITY),ve=p.VBR,ve==Kt.vbr_off&&(p.VBR_mean_bitrate_kbps=p.brate),i.apply_preset(p,p.VBR_mean_bitrate_kbps,0),p.VBR=ve,B.PSY.mask_adjust=p.maskingadjust,B.PSY.mask_adjust_short=p.maskingadjust_short,ve==Kt.vbr_off?B.iteration_loop=new U9(r):B.iteration_loop=new ABRIterationLoop(r);break}}if(Sa(p.scale>=0),p.VBR!=Kt.vbr_off){if(B.VBR_min_bitrate=1,B.VBR_max_bitrate=14,p.out_samplerate<16e3&&(B.VBR_max_bitrate=8),p.VBR_min_bitrate_kbps!=0&&(p.VBR_min_bitrate_kbps=P(p.VBR_min_bitrate_kbps,p.version,p.out_samplerate),B.VBR_min_bitrate=S(p.VBR_min_bitrate_kbps,p.version,p.out_samplerate),B.VBR_min_bitrate<0)||p.VBR_max_bitrate_kbps!=0&&(p.VBR_max_bitrate_kbps=P(p.VBR_max_bitrate_kbps,p.version,p.out_samplerate),B.VBR_max_bitrate=S(p.VBR_max_bitrate_kbps,p.version,p.out_samplerate),B.VBR_max_bitrate<0))return-1;p.VBR_min_bitrate_kbps=ke.bitrate_table[p.version][B.VBR_min_bitrate],p.VBR_max_bitrate_kbps=ke.bitrate_table[p.version][B.VBR_max_bitrate],p.VBR_mean_bitrate_kbps=Math.min(ke.bitrate_table[p.version][B.VBR_max_bitrate],p.VBR_mean_bitrate_kbps),p.VBR_mean_bitrate_kbps=Math.max(ke.bitrate_table[p.version][B.VBR_min_bitrate],p.VBR_mean_bitrate_kbps)}return p.tune&&(B.PSY.mask_adjust+=p.tune_value_a,B.PSY.mask_adjust_short+=p.tune_value_a),T(p),Sa(p.scale>=0),p.athaa_type<0?B.ATH.useAdjust=3:B.ATH.useAdjust=p.athaa_type,B.ATH.aaSensitivityP=Math.pow(10,p.athaa_sensitivity/-10),p.short_blocks==null&&(p.short_blocks=vc.short_block_allowed),p.short_blocks==vc.short_block_allowed&&(p.mode==Vt.JOINT_STEREO||p.mode==Vt.STEREO)&&(p.short_blocks=vc.short_block_coupled),p.quant_comp<0&&(p.quant_comp=1),p.quant_comp_short<0&&(p.quant_comp_short=0),p.msfix<0&&(p.msfix=0),p.exp_nspsytune=p.exp_nspsytune|1,p.internal_flags.nsPsy.attackthre<0&&(p.internal_flags.nsPsy.attackthre=uc.NSATTACKTHRE),p.internal_flags.nsPsy.attackthre_s<0&&(p.internal_flags.nsPsy.attackthre_s=uc.NSATTACKTHRE_S),Sa(p.scale>=0),p.scale<0&&(p.scale=1),p.ATHtype<0&&(p.ATHtype=4),p.ATHcurve<0&&(p.ATHcurve=4),p.athaa_loudapprox<0&&(p.athaa_loudapprox=2),p.interChRatio<0&&(p.interChRatio=0),p.useTemporal==null&&(p.useTemporal=!0),B.slot_lag=B.frac_SpF=0,p.VBR==Kt.vbr_off&&(B.slot_lag=B.frac_SpF=(p.version+1)*72e3*p.brate%p.out_samplerate|0),o.iteration_init(p),f.psymodel_init(p),Sa(p.scale>=0),0};function y(p,B){(p.in_buffer_0==null||p.in_buffer_nsamples<B)&&(p.in_buffer_0=Qa(B),p.in_buffer_1=Qa(B),p.in_buffer_nsamples=B)}this.lame_encode_flush=function(p,B,U,$){var ee=p.internal_flags,re=J9([2,1152]),G=0,ae,X,he,we,Ie=ee.mf_samples_to_encode-H.POSTDELAY,K=A(p);if(ee.mf_samples_to_encode<1)return 0;for(ae=0,p.in_samplerate!=p.out_samplerate&&(Ie+=16*p.out_samplerate/p.in_samplerate),he=p.framesize-Ie%p.framesize,he<576&&(he+=p.framesize),p.encoder_padding=he,we=(Ie+he)/p.framesize;we>0&&G>=0;){var te=K-ee.mf_size,ve=p.frameNum;te*=p.in_samplerate,te/=p.out_samplerate,te>1152&&(te=1152),te<1&&(te=1),X=$-ae,$==0&&(X=0),G=this.lame_encode_buffer(p,re[0],re[1],te,B,U,X),U+=G,ae+=G,we-=ve!=p.frameNum?1:0}if(ee.mf_samples_to_encode=0,G<0||(X=$-ae,$==0&&(X=0),a.flush_bitstream(p),G=a.copy_buffer(ee,B,U,X,1),G<0))return G;if(U+=G,ae+=G,X=$-ae,$==0&&(X=0),p.write_id3tag_automatic){if(d.id3tag_write_v1(p),G=a.copy_buffer(ee,B,U,X,0),G<0)return G;ae+=G}return ae},this.lame_encode_buffer=function(p,B,U,$,ee,re,G){var ae=p.internal_flags,X=[null,null];if(ae.Class_ID!=C)return-3;if($==0)return 0;y(ae,$),X[0]=ae.in_buffer_0,X[1]=ae.in_buffer_1;for(var he=0;he<$;he++)X[0][he]=B[he],ae.channels_in>1&&(X[1][he]=U[he]);return w(p,X[0],X[1],$,ee,re,G)};function A(p){var B=H.BLKSIZE+p.framesize-H.FFTOFFSET;return B=Math.max(B,512+p.framesize-32),B}function w(p,B,U,$,ee,re,G){var ae=p.internal_flags,X=0,he,we,Ie,K,te,ve=[null,null],Ce=[null,null];if(ae.Class_ID!=C)return-3;if($==0)return 0;if(te=a.copy_buffer(ae,ee,re,G,0),te<0)return te;if(re+=te,X+=te,Ce[0]=B,Ce[1]=U,ls.NEQ(p.scale,0)&&ls.NEQ(p.scale,1))for(we=0;we<$;++we)Ce[0][we]*=p.scale,ae.channels_out==2&&(Ce[1][we]*=p.scale);if(ls.NEQ(p.scale_left,0)&&ls.NEQ(p.scale_left,1))for(we=0;we<$;++we)Ce[0][we]*=p.scale_left;if(ls.NEQ(p.scale_right,0)&&ls.NEQ(p.scale_right,1))for(we=0;we<$;++we)Ce[1][we]*=p.scale_right;if(p.num_channels==2&&ae.channels_out==1)for(we=0;we<$;++we)Ce[0][we]=.5*(Ce[0][we]+Ce[1][we]),Ce[1][we]=0;K=A(p),ve[0]=ae.mfbuf[0],ve[1]=ae.mfbuf[1];for(var Ae=0;$>0;){var Be=[null,null],He=0,Fe=0;Be[0]=Ce[0],Be[1]=Ce[1];var Ve=new M;if(z(p,ve,Be,Ae,$,Ve),He=Ve.n_in,Fe=Ve.n_out,ae.findReplayGain&&!ae.decode_on_the_fly&&s.AnalyzeSamples(ae.rgdata,ve[0],ae.mf_size,ve[1],ae.mf_size,Fe,ae.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6;if($-=He,Ae+=He,ae.channels_out==2,ae.mf_size+=Fe,Sa(ae.mf_size<=Ft.MFSIZE),ae.mf_samples_to_encode<1&&(ae.mf_samples_to_encode=H.ENCDELAY+H.POSTDELAY),ae.mf_samples_to_encode+=Fe,ae.mf_size>=K){var Le=G-X;if(G==0&&(Le=0),he=k(p,ve[0],ve[1],ee,re,Le),he<0)return he;for(re+=he,X+=he,ae.mf_size-=p.framesize,ae.mf_samples_to_encode-=p.framesize,Ie=0;Ie<ae.channels_out;Ie++)for(we=0;we<ae.mf_size;we++)ve[Ie][we]=ve[Ie][we+p.framesize]}}return X}function k(p,B,U,$,ee,re){var G=e.enc.lame_encode_mp3_frame(p,B,U,$,ee,re);return p.frameNum++,G}function M(){this.n_in=0,this.n_out=0}function x(){this.num_used=0}function F(p,B){return B!=0?F(B,p%B):p}function V(p,B,U){var $=Math.PI*B;p/=U,p<0&&(p=0),p>1&&(p=1);var ee=p-.5,re=.42-.5*Math.cos(2*p*Math.PI)+.08*Math.cos(4*p*Math.PI);return Math.abs(ee)<1e-9?$/Math.PI:re*Math.sin(U*$*ee)/(Math.PI*U*ee)}function D(p,B,U,$,ee,re,G,ae,X){var he=p.internal_flags,we,Ie=0,K,te=p.out_samplerate/F(p.out_samplerate,p.in_samplerate);te>Ft.BPC&&(te=Ft.BPC);var ve=Math.abs(he.resample_ratio-Math.floor(.5+he.resample_ratio))<1e-4?1:0,Ce=1/he.resample_ratio;Ce>1&&(Ce=1);var Ae=31;Ae%2==0&&--Ae,Ae+=ve;var Be=Ae+1;if(he.fill_buffer_resample_init==0){for(he.inbuf_old[0]=Qa(Be),he.inbuf_old[1]=Qa(Be),we=0;we<=2*te;++we)he.blackfilt[we]=Qa(Be);for(he.itime[0]=0,he.itime[1]=0,Ie=0;Ie<=2*te;Ie++){var He=0,Fe=(Ie-te)/(2*te);for(we=0;we<=Ae;we++)He+=he.blackfilt[Ie][we]=V(we-Fe,Ce,Ae);for(we=0;we<=Ae;we++)he.blackfilt[Ie][we]/=He}he.fill_buffer_resample_init=1}var Ve=he.inbuf_old[X];for(K=0;K<$;K++){var Le,et;if(Le=K*he.resample_ratio,Ie=0|Math.floor(Le-he.itime[X]),Ae+Ie-Ae/2>=G)break;var Fe=Le-he.itime[X]-(Ie+.5*(Ae%2));et=0|Math.floor(Fe*2*te+te+.5);var Ze=0;for(we=0;we<=Ae;++we){var Xe=0|we+Ie-Ae/2,at;at=Xe<0?Ve[Be+Xe]:ee[re+Xe],Ze+=at*he.blackfilt[et][we]}B[U+K]=Ze}if(ae.num_used=Math.min(G,Ae+Ie-Ae/2),he.itime[X]+=ae.num_used-K*he.resample_ratio,ae.num_used>=Be)for(we=0;we<Be;we++)Ve[we]=ee[re+ae.num_used+we-Be];else{var lt=Be-ae.num_used;for(we=0;we<lt;++we)Ve[we]=Ve[we+ae.num_used];for(Ie=0;we<Be;++we,++Ie)Ve[we]=ee[re+Ie];Sa(Ie==ae.num_used)}return K}function z(p,B,U,$,ee,re){var G=p.internal_flags;if(G.resample_ratio<.9999||G.resample_ratio>1.0001)for(var ae=0;ae<G.channels_out;ae++){var X=new x;re.n_out=D(p,B[ae],G.mf_size,p.framesize,U[ae],$,ee,X,ae),re.n_in=X.num_used}else{re.n_out=Math.min(p.framesize,ee),re.n_in=re.n_out;for(var he=0;he<re.n_out;++he)B[0][G.mf_size+he]=U[0][$+he],G.channels_out==2&&(B[1][G.mf_size+he]=U[1][$+he])}}}var Bs=Ue.VbrMode;function eS(){function e(u,d,c,l,m,v,C,b,_,g,R,P,S,L,I){this.vbr_q=u,this.quant_comp=d,this.quant_comp_s=c,this.expY=l,this.st_lrm=m,this.st_s=v,this.masking_adj=C,this.masking_adj_short=b,this.ath_lower=_,this.ath_curve=g,this.ath_sensitivity=R,this.interch=P,this.safejoint=S,this.sfb21mod=L,this.msfix=I}function t(u,d,c,l,m,v,C,b,_,g,R,P,S,L){this.quant_comp=d,this.quant_comp_s=c,this.safejoint=l,this.nsmsfix=m,this.st_lrm=v,this.st_s=C,this.nsbass=b,this.scale=_,this.masking_adj=g,this.ath_lower=R,this.ath_curve=P,this.interch=S,this.sfscale=L}var n;this.setModules=function(u){n=u};var s=[new e(0,9,9,0,5.2,125,-4.2,-6.3,4.8,1,0,0,2,21,.97),new e(1,9,9,0,5.3,125,-3.6,-5.6,4.5,1.5,0,0,2,21,1.35),new e(2,9,9,0,5.6,125,-2.2,-3.5,2.8,2,0,0,2,21,1.49),new e(3,9,9,1,5.8,130,-1.8,-2.8,2.6,3,-4,0,2,20,1.64),new e(4,9,9,1,6,135,-.7,-1.1,1.1,3.5,-8,0,2,0,1.79),new e(5,9,9,1,6.4,140,.5,.4,-7.5,4,-12,2e-4,0,0,1.95),new e(6,9,9,1,6.6,145,.67,.65,-14.7,6.5,-19,4e-4,0,0,2.3),new e(7,9,9,1,6.6,145,.8,.75,-19.7,8,-22,6e-4,0,0,2.7),new e(8,9,9,1,6.6,145,1.2,1.15,-27.5,10,-23,7e-4,0,0,0),new e(9,9,9,1,6.6,145,1.6,1.6,-36,11,-25,8e-4,0,0,0),new e(10,9,9,1,6.6,145,2,2,-36,12,-25,8e-4,0,0,0)],a=[new e(0,9,9,0,4.2,25,-7,-4,7.5,1,0,0,2,26,.97),new e(1,9,9,0,4.2,25,-5.6,-3.6,4.5,1.5,0,0,2,21,1.35),new e(2,9,9,0,4.2,25,-4.4,-1.8,2,2,0,0,2,18,1.49),new e(3,9,9,1,4.2,25,-3.4,-1.25,1.1,3,-4,0,2,15,1.64),new e(4,9,9,1,4.2,25,-2.2,.1,0,3.5,-8,0,2,0,1.79),new e(5,9,9,1,4.2,25,-1,1.65,-7.7,4,-12,2e-4,0,0,1.95),new e(6,9,9,1,4.2,25,-0,2.47,-7.7,6.5,-19,4e-4,0,0,2),new e(7,9,9,1,4.2,25,.5,2,-14.5,8,-22,6e-4,0,0,2),new e(8,9,9,1,4.2,25,1,2.4,-22,10,-23,7e-4,0,0,2),new e(9,9,9,1,4.2,25,1.5,2.95,-30,11,-25,8e-4,0,0,2),new e(10,9,9,1,4.2,25,2,2.95,-36,12,-30,8e-4,0,0,2)];function i(u,d,c){var l=u.VBR==Bs.vbr_rh?s:a,m=u.VBR_q_frac,v=l[d],C=l[d+1],b=v;v.st_lrm=v.st_lrm+m*(C.st_lrm-v.st_lrm),v.st_s=v.st_s+m*(C.st_s-v.st_s),v.masking_adj=v.masking_adj+m*(C.masking_adj-v.masking_adj),v.masking_adj_short=v.masking_adj_short+m*(C.masking_adj_short-v.masking_adj_short),v.ath_lower=v.ath_lower+m*(C.ath_lower-v.ath_lower),v.ath_curve=v.ath_curve+m*(C.ath_curve-v.ath_curve),v.ath_sensitivity=v.ath_sensitivity+m*(C.ath_sensitivity-v.ath_sensitivity),v.interch=v.interch+m*(C.interch-v.interch),v.msfix=v.msfix+m*(C.msfix-v.msfix),f(u,b.vbr_q),c!=0?u.quant_comp=b.quant_comp:Math.abs(u.quant_comp- -1)>0||(u.quant_comp=b.quant_comp),c!=0?u.quant_comp_short=b.quant_comp_s:Math.abs(u.quant_comp_short- -1)>0||(u.quant_comp_short=b.quant_comp_s),b.expY!=0&&(u.experimentalY=b.expY!=0),c!=0?u.internal_flags.nsPsy.attackthre=b.st_lrm:Math.abs(u.internal_flags.nsPsy.attackthre- -1)>0||(u.internal_flags.nsPsy.attackthre=b.st_lrm),c!=0?u.internal_flags.nsPsy.attackthre_s=b.st_s:Math.abs(u.internal_flags.nsPsy.attackthre_s- -1)>0||(u.internal_flags.nsPsy.attackthre_s=b.st_s),c!=0?u.maskingadjust=b.masking_adj:Math.abs(u.maskingadjust-0)>0||(u.maskingadjust=b.masking_adj),c!=0?u.maskingadjust_short=b.masking_adj_short:Math.abs(u.maskingadjust_short-0)>0||(u.maskingadjust_short=b.masking_adj_short),c!=0?u.ATHlower=-b.ath_lower/10:Math.abs(-u.ATHlower*10-0)>0||(u.ATHlower=-b.ath_lower/10),c!=0?u.ATHcurve=b.ath_curve:Math.abs(u.ATHcurve- -1)>0||(u.ATHcurve=b.ath_curve),c!=0?u.athaa_sensitivity=b.ath_sensitivity:Math.abs(u.athaa_sensitivity- -1)>0||(u.athaa_sensitivity=b.ath_sensitivity),b.interch>0&&(c!=0?u.interChRatio=b.interch:Math.abs(u.interChRatio- -1)>0||(u.interChRatio=b.interch)),b.safejoint>0&&(u.exp_nspsytune=u.exp_nspsytune|b.safejoint),b.sfb21mod>0&&(u.exp_nspsytune=u.exp_nspsytune|b.sfb21mod<<20),c!=0?u.msfix=b.msfix:Math.abs(u.msfix- -1)>0||(u.msfix=b.msfix),c==0&&(u.VBR_q=d,u.VBR_q_frac=m)}var o=[new t(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new t(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new t(24,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new t(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),new t(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new t(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new t(56,9,9,0,0,6.6,145,0,.95,0,-6,11,8e-4,1),new t(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8e-4,1),new t(80,9,9,0,0,6.6,145,0,.95,0,0,8,7e-4,1),new t(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6e-4,1),new t(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5e-4,1),new t(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2e-4,1),new t(160,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new t(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new t(224,9,9,1,1.25,5.2,125,0,.98,-6,9,2,0,0),new t(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new t(320,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];function r(u,d,c){var l=d,m=n.nearestBitrateFullIndex(d);if(u.VBR=Bs.vbr_abr,u.VBR_mean_bitrate_kbps=l,u.VBR_mean_bitrate_kbps=Math.min(u.VBR_mean_bitrate_kbps,320),u.VBR_mean_bitrate_kbps=Math.max(u.VBR_mean_bitrate_kbps,8),u.brate=u.VBR_mean_bitrate_kbps,u.VBR_mean_bitrate_kbps>320&&(u.disable_reservoir=!0),o[m].safejoint>0&&(u.exp_nspsytune=u.exp_nspsytune|2),o[m].sfscale>0&&(u.internal_flags.noise_shaping=2),Math.abs(o[m].nsbass)>0){var v=int(o[m].nsbass*4);v<0&&(v+=64),u.exp_nspsytune=u.exp_nspsytune|v<<2}return c!=0?u.quant_comp=o[m].quant_comp:Math.abs(u.quant_comp- -1)>0||(u.quant_comp=o[m].quant_comp),c!=0?u.quant_comp_short=o[m].quant_comp_s:Math.abs(u.quant_comp_short- -1)>0||(u.quant_comp_short=o[m].quant_comp_s),c!=0?u.msfix=o[m].nsmsfix:Math.abs(u.msfix- -1)>0||(u.msfix=o[m].nsmsfix),c!=0?u.internal_flags.nsPsy.attackthre=o[m].st_lrm:Math.abs(u.internal_flags.nsPsy.attackthre- -1)>0||(u.internal_flags.nsPsy.attackthre=o[m].st_lrm),c!=0?u.internal_flags.nsPsy.attackthre_s=o[m].st_s:Math.abs(u.internal_flags.nsPsy.attackthre_s- -1)>0||(u.internal_flags.nsPsy.attackthre_s=o[m].st_s),c!=0?u.scale=o[m].scale:Math.abs(u.scale- -1)>0||(u.scale=o[m].scale),c!=0?u.maskingadjust=o[m].masking_adj:Math.abs(u.maskingadjust-0)>0||(u.maskingadjust=o[m].masking_adj),o[m].masking_adj>0?c!=0?u.maskingadjust_short=o[m].masking_adj*.9:Math.abs(u.maskingadjust_short-0)>0||(u.maskingadjust_short=o[m].masking_adj*.9):c!=0?u.maskingadjust_short=o[m].masking_adj*1.1:Math.abs(u.maskingadjust_short-0)>0||(u.maskingadjust_short=o[m].masking_adj*1.1),c!=0?u.ATHlower=-o[m].ath_lower/10:Math.abs(-u.ATHlower*10-0)>0||(u.ATHlower=-o[m].ath_lower/10),c!=0?u.ATHcurve=o[m].ath_curve:Math.abs(u.ATHcurve- -1)>0||(u.ATHcurve=o[m].ath_curve),c!=0?u.interChRatio=o[m].interch:Math.abs(u.interChRatio- -1)>0||(u.interChRatio=o[m].interch),d}this.apply_preset=function(u,d,c){switch(d){case bt.R3MIX:{d=bt.V3,u.VBR=Bs.vbr_mtrh;break}case bt.MEDIUM:{d=bt.V4,u.VBR=Bs.vbr_rh;break}case bt.MEDIUM_FAST:{d=bt.V4,u.VBR=Bs.vbr_mtrh;break}case bt.STANDARD:{d=bt.V2,u.VBR=Bs.vbr_rh;break}case bt.STANDARD_FAST:{d=bt.V2,u.VBR=Bs.vbr_mtrh;break}case bt.EXTREME:{d=bt.V0,u.VBR=Bs.vbr_rh;break}case bt.EXTREME_FAST:{d=bt.V0,u.VBR=Bs.vbr_mtrh;break}case bt.INSANE:return d=320,u.preset=d,r(u,d,c),u.VBR=Bs.vbr_off,d}switch(u.preset=d,d){case bt.V9:return i(u,9,c),d;case bt.V8:return i(u,8,c),d;case bt.V7:return i(u,7,c),d;case bt.V6:return i(u,6,c),d;case bt.V5:return i(u,5,c),d;case bt.V4:return i(u,4,c),d;case bt.V3:return i(u,3,c),d;case bt.V2:return i(u,2,c),d;case bt.V1:return i(u,1,c),d;case bt.V0:return i(u,0,c),d}return d>=8&&d<=320?r(u,d,c):(u.preset=0,d)};function f(u,d){var c=0;return d<0&&(c=-1,d=0),d>9&&(c=-1,d=9),u.VBR_q=d,u.VBR_q_frac=0,c}}function tS(){this.setModules=function(e,t){}}function hc(){this.over_noise=0,this.tot_noise=0,this.max_noise=0,this.over_count=0,this.over_SSD=0,this.bits=0}var wm=Ue.new_float,nS=Ue.new_int;function sS(){this.global_gain=0,this.sfb_count1=0,this.step=nS(39),this.noise=wm(39),this.noise_log=wm(39)}var Ca=Ue.System,km=Ue.VbrMode,gc=Ue.Util,_i=Ue.Arrays,eo=Ue.new_float,to=Ue.assert;function aS(){var e;this.rv=null;var t;this.qupvt=null;var n,s=new tS,a;this.setModules=function(_,g,R,P){e=_,t=g,this.rv=g,n=R,this.qupvt=R,a=P,s.setModules(n,a)},this.ms_convert=function(_,g){for(var R=0;R<576;++R){var P=_.tt[g][0].xr[R],S=_.tt[g][1].xr[R];_.tt[g][0].xr[R]=(P+S)*(gc.SQRT2*.5),_.tt[g][1].xr[R]=(P-S)*(gc.SQRT2*.5)}};function i(_,g,R,P){P=0;for(var S=0;S<=R;++S){var L=Math.abs(_.xr[S]);P+=L,g[S]=Math.sqrt(L*Math.sqrt(L)),g[S]>_.xrpow_max&&(_.xrpow_max=g[S])}return P}this.init_xrpow=function(_,g,R){var P=0,S=0|g.max_nonzero_coeff;if(g.xrpow_max=0,_i.fill(R,S,576,0),P=i(g,R,S,P),P>1e-20){var L=0;(_.substep_shaping&2)!=0&&(L=1);for(var I=0;I<g.psymax;I++)_.pseudohalf[I]=L;return!0}return _i.fill(g.l3_enc,0,576,0),!1};function o(_,g){var R=_.ATH,P=g.xr;if(g.block_type!=H.SHORT_TYPE)for(var S=!1,L=H.PSFB21-1;L>=0&&!S;L--){var I=_.scalefac_band.psfb21[L],T=_.scalefac_band.psfb21[L+1],E=n.athAdjust(R.adjust,R.psfb21[L],R.floor);_.nsPsy.longfact[21]>1e-12&&(E*=_.nsPsy.longfact[21]);for(var y=T-1;y>=I;y--)if(Math.abs(P[y])<E)P[y]=0;else{S=!0;break}}else for(var A=0;A<3;A++)for(var S=!1,L=H.PSFB12-1;L>=0&&!S;L--){var I=_.scalefac_band.s[12]*3+(_.scalefac_band.s[13]-_.scalefac_band.s[12])*A+(_.scalefac_band.psfb12[L]-_.scalefac_band.psfb12[0]),T=I+(_.scalefac_band.psfb12[L+1]-_.scalefac_band.psfb12[L]),w=n.athAdjust(R.adjust,R.psfb12[L],R.floor);_.nsPsy.shortfact[12]>1e-12&&(w*=_.nsPsy.shortfact[12]);for(var y=T-1;y>=I;y--)if(Math.abs(P[y])<w)P[y]=0;else{S=!0;break}}}this.init_outer_loop=function(_,g){g.part2_3_length=0,g.big_values=0,g.count1=0,g.global_gain=210,g.scalefac_compress=0,g.table_select[0]=0,g.table_select[1]=0,g.table_select[2]=0,g.subblock_gain[0]=0,g.subblock_gain[1]=0,g.subblock_gain[2]=0,g.subblock_gain[3]=0,g.region0_count=0,g.region1_count=0,g.preflag=0,g.scalefac_scale=0,g.count1table_select=0,g.part2_length=0,g.sfb_lmax=H.SBPSY_l,g.sfb_smin=H.SBPSY_s,g.psy_lmax=_.sfb21_extra?H.SBMAX_l:H.SBPSY_l,g.psymax=g.psy_lmax,g.sfbmax=g.sfb_lmax,g.sfbdivide=11;for(var R=0;R<H.SBMAX_l;R++)g.width[R]=_.scalefac_band.l[R+1]-_.scalefac_band.l[R],g.window[R]=3;if(g.block_type==H.SHORT_TYPE){var P=eo(576);g.sfb_smin=0,g.sfb_lmax=0,g.mixed_block_flag!=0&&(g.sfb_smin=3,g.sfb_lmax=_.mode_gr*2+4),g.psymax=g.sfb_lmax+3*((_.sfb21_extra?H.SBMAX_s:H.SBPSY_s)-g.sfb_smin),g.sfbmax=g.sfb_lmax+3*(H.SBPSY_s-g.sfb_smin),g.sfbdivide=g.sfbmax-18,g.psy_lmax=g.sfb_lmax;var S=_.scalefac_band.l[g.sfb_lmax];Ca.arraycopy(g.xr,0,P,0,576);for(var R=g.sfb_smin;R<H.SBMAX_s;R++)for(var L=_.scalefac_band.s[R],I=_.scalefac_band.s[R+1],T=0;T<3;T++)for(var E=L;E<I;E++)g.xr[S++]=P[3*E+T];for(var y=g.sfb_lmax,R=g.sfb_smin;R<H.SBMAX_s;R++)g.width[y]=g.width[y+1]=g.width[y+2]=_.scalefac_band.s[R+1]-_.scalefac_band.s[R],g.window[y]=0,g.window[y+1]=1,g.window[y+2]=2,y+=3}g.count1bits=0,g.sfb_partition_table=n.nr_of_sfb_block[0][0],g.slen[0]=0,g.slen[1]=0,g.slen[2]=0,g.slen[3]=0,g.max_nonzero_coeff=575,_i.fill(g.scalefac,0),o(_,g)};function r(_){this.ordinal=_}r.BINSEARCH_NONE=new r(0),r.BINSEARCH_UP=new r(1),r.BINSEARCH_DOWN=new r(2);function f(_,g,R,P,S){var L,I=_.CurrentStep[P],T=!1,E=_.OldValue[P],y=r.BINSEARCH_NONE;for(g.global_gain=E,R-=g.part2_length;;){var A;if(L=a.count_bits(_,S,g,null),I==1||L==R)break;L>R?(y==r.BINSEARCH_DOWN&&(T=!0),T&&(I/=2),y=r.BINSEARCH_UP,A=I):(y==r.BINSEARCH_UP&&(T=!0),T&&(I/=2),y=r.BINSEARCH_DOWN,A=-I),g.global_gain+=A,g.global_gain<0&&(g.global_gain=0,T=!0),g.global_gain>255&&(g.global_gain=255,T=!0)}for(to(g.global_gain>=0),to(g.global_gain<256);L>R&&g.global_gain<255;)g.global_gain++,L=a.count_bits(_,S,g,null);return _.CurrentStep[P]=E-g.global_gain>=4?4:2,_.OldValue[P]=g.global_gain,g.part2_3_length=L,L}this.trancate_smallspectrums=function(_,g,R,P){var S=eo(Ia.SFBMAX);if(!((_.substep_shaping&4)==0&&g.block_type==H.SHORT_TYPE||(_.substep_shaping&128)!=0)){n.calc_noise(g,R,S,new hc,null);for(var I=0;I<576;I++){var L=0;g.l3_enc[I]!=0&&(L=Math.abs(g.xr[I])),P[I]=L}var I=0,T=8;g.block_type==H.SHORT_TYPE&&(T=6);do{var E,y,A,w,k=g.width[T];if(I+=k,!(S[T]>=1)&&(_i.sort(P,I-k,k),!BitStream.EQ(P[I-1],0))){E=(1-S[T])*R[T],y=0,w=0;do{var M;for(A=1;w+A<k&&!BitStream.NEQ(P[w+I-k],P[w+I+A-k]);A++);if(M=P[w+I-k]*P[w+I-k]*A,E<M){w!=0&&(y=P[w+I-k-1]);break}E-=M,w+=A}while(w<k);if(!BitStream.EQ(y,0))do Math.abs(g.xr[I-k])<=y&&(g.l3_enc[I-k]=0);while(--k>0)}}while(++T<g.psymax);g.part2_3_length=a.noquant_count_bits(_,g,null)}};function u(_){for(var g=0;g<_.sfbmax;g++)if(_.scalefac[g]+_.subblock_gain[_.window[g]]==0)return!1;return!0}function d(_){return gc.FAST_LOG10(.368+.632*_*_*_)}function c(_,g){for(var R=1e-37,P=0;P<g.psymax;P++)R+=d(_[P]);return Math.max(1e-20,R)}function l(_,g,R,P,S){var L;switch(_){default:case 9:{g.over_count>0?(L=R.over_SSD<=g.over_SSD,R.over_SSD==g.over_SSD&&(L=R.bits<g.bits)):L=R.max_noise<0&&R.max_noise*10+R.bits<=g.max_noise*10+g.bits;break}case 0:L=R.over_count<g.over_count||R.over_count==g.over_count&&R.over_noise<g.over_noise||R.over_count==g.over_count&&BitStream.EQ(R.over_noise,g.over_noise)&&R.tot_noise<g.tot_noise;break;case 8:R.max_noise=c(S,P);case 1:L=R.max_noise<g.max_noise;break;case 2:L=R.tot_noise<g.tot_noise;break;case 3:L=R.tot_noise<g.tot_noise&&R.max_noise<g.max_noise;break;case 4:L=R.max_noise<=0&&g.max_noise>.2||R.max_noise<=0&&g.max_noise<0&&g.max_noise>R.max_noise-.2&&R.tot_noise<g.tot_noise||R.max_noise<=0&&g.max_noise>0&&g.max_noise>R.max_noise-.2&&R.tot_noise<g.tot_noise+g.over_noise||R.max_noise>0&&g.max_noise>-.05&&g.max_noise>R.max_noise-.1&&R.tot_noise+R.over_noise<g.tot_noise+g.over_noise||R.max_noise>0&&g.max_noise>-.1&&g.max_noise>R.max_noise-.15&&R.tot_noise+R.over_noise+R.over_noise<g.tot_noise+g.over_noise+g.over_noise;break;case 5:L=R.over_noise<g.over_noise||BitStream.EQ(R.over_noise,g.over_noise)&&R.tot_noise<g.tot_noise;break;case 6:L=R.over_noise<g.over_noise||BitStream.EQ(R.over_noise,g.over_noise)&&(R.max_noise<g.max_noise||BitStream.EQ(R.max_noise,g.max_noise)&&R.tot_noise<=g.tot_noise);break;case 7:L=R.over_count<g.over_count||R.over_noise<g.over_noise;break}return g.over_count==0&&(L=L&&R.bits<g.bits),L}function m(_,g,R,P,S){var L=_.internal_flags,I;g.scalefac_scale==0?I=1.2968395546510096:I=1.6817928305074292;for(var T=0,E=0;E<g.sfbmax;E++)T<R[E]&&(T=R[E]);var y=L.noise_shaping_amp;switch(y==3&&(S?y=2:y=1),y){case 2:break;case 1:T>1?T=Math.pow(T,.5):T*=.95;break;case 0:default:T>1?T=1:T*=.95;break}for(var A=0,E=0;E<g.sfbmax;E++){var w=g.width[E],k;if(A+=w,!(R[E]<T)){if((L.substep_shaping&2)!=0&&(L.pseudohalf[E]=L.pseudohalf[E]==0?1:0,L.pseudohalf[E]==0&&L.noise_shaping_amp==2))return;for(g.scalefac[E]++,k=-w;k<0;k++)P[A+k]*=I,P[A+k]>g.xrpow_max&&(g.xrpow_max=P[A+k]);if(L.noise_shaping_amp==2)return}}}function v(_,g){for(var R=1.2968395546510096,P=0,S=0;S<_.sfbmax;S++){var L=_.width[S],I=_.scalefac[S];if(_.preflag!=0&&(I+=n.pretab[S]),P+=L,(I&1)!=0){I++;for(var T=-L;T<0;T++)g[P+T]*=R,g[P+T]>_.xrpow_max&&(_.xrpow_max=g[P+T])}_.scalefac[S]=I>>1}_.preflag=0,_.scalefac_scale=1}function C(_,g,R){var P,S=g.scalefac;for(P=0;P<g.sfb_lmax;P++)if(S[P]>=16)return!0;for(var L=0;L<3;L++){var I=0,T=0;for(P=g.sfb_lmax+L;P<g.sfbdivide;P+=3)I<S[P]&&(I=S[P]);for(;P<g.sfbmax;P+=3)T<S[P]&&(T=S[P]);if(!(I<16&&T<8)){if(g.subblock_gain[L]>=7)return!0;g.subblock_gain[L]++;var E=_.scalefac_band.l[g.sfb_lmax];for(P=g.sfb_lmax+L;P<g.sfbmax;P+=3){var y,A=g.width[P],w=S[P];if(w=w-(4>>g.scalefac_scale),w>=0){S[P]=w,E+=A*3;continue}S[P]=0;{var k=210+(w<<g.scalefac_scale+1);y=n.IPOW20(k)}E+=A*(L+1);for(var M=-A;M<0;M++)R[E+M]*=y,R[E+M]>g.xrpow_max&&(g.xrpow_max=R[E+M]);E+=A*(3-L-1)}{var y=n.IPOW20(202);E+=g.width[P]*(L+1);for(var M=-g.width[P];M<0;M++)R[E+M]*=y,R[E+M]>g.xrpow_max&&(g.xrpow_max=R[E+M])}}}return!1}function b(_,g,R,P,S){var L=_.internal_flags;m(_,g,R,P,S);var I=u(g);return I?!1:(L.mode_gr==2?I=a.scale_bitcount(g):I=a.scale_bitcount_lsf(L,g),I?(L.noise_shaping>1&&(_i.fill(L.pseudohalf,0),g.scalefac_scale==0?(v(g,P),I=!1):g.block_type==H.SHORT_TYPE&&L.subblock_gain>0&&(I=C(L,g,P)||u(g))),I||(L.mode_gr==2?I=a.scale_bitcount(g):I=a.scale_bitcount_lsf(L,g)),!I):!0)}this.outer_loop=function(_,g,R,P,S,L){var I=_.internal_flags,T=new Gr,E=eo(576),y=eo(Ia.SFBMAX),A=new hc,w,k=new sS,M=9999999,x=!1,F=!1,V=0;if(f(I,g,L,S,P),I.noise_shaping==0)return 100;n.calc_noise(g,R,y,A,k),A.bits=g.part2_3_length,T.assign(g);var D=0;for(Ca.arraycopy(P,0,E,0,576);!x;){do{var z=new hc,p,B=255;if((I.substep_shaping&2)!=0?p=20:p=3,I.sfb21_extra&&(y[T.sfbmax]>1||T.block_type==H.SHORT_TYPE&&(y[T.sfbmax+1]>1||y[T.sfbmax+2]>1))||!b(_,T,y,P,F))break;T.scalefac_scale!=0&&(B=254);var U=L-T.part2_length;if(U<=0)break;for(;(T.part2_3_length=a.count_bits(I,P,T,k))>U&&T.global_gain<=B;)T.global_gain++;if(T.global_gain>B)break;if(A.over_count==0){for(;(T.part2_3_length=a.count_bits(I,P,T,k))>M&&T.global_gain<=B;)T.global_gain++;if(T.global_gain>B)break}if(n.calc_noise(T,R,y,z,k),z.bits=T.part2_3_length,g.block_type!=H.SHORT_TYPE?w=_.quant_comp:w=_.quant_comp_short,w=l(w,A,z,T,y)?1:0,w!=0)M=g.part2_3_length,A=z,g.assign(T),D=0,Ca.arraycopy(P,0,E,0,576);else if(I.full_outer_loop==0&&(++D>p&&A.over_count==0||I.noise_shaping_amp==3&&F&&D>30||I.noise_shaping_amp==3&&F&&T.global_gain-V>15))break}while(T.global_gain+T.scalefac_scale<255);I.noise_shaping_amp==3?F?x=!0:(T.assign(g),Ca.arraycopy(E,0,P,0,576),D=0,V=T.global_gain,F=!0):x=!0}return to(g.global_gain+g.scalefac_scale<=255),_.VBR==km.vbr_rh||_.VBR==km.vbr_mtrh?Ca.arraycopy(E,0,P,0,576):(I.substep_shaping&1)!=0&&trancate_smallspectrums(I,g,R,P),A.over_count},this.iteration_finish_one=function(_,g,R){var P=_.l3_side,S=P.tt[g][R];a.best_scalefac_store(_,g,R,P),_.use_best_huffman==1&&a.best_huffman_divide(_,S),t.ResvAdjust(_,S)},this.VBR_encode_granule=function(_,g,R,P,S,L,I){var T=_.internal_flags,E=new Gr,y=eo(576),A=I,w=I+1,k=(I+L)/2,M,x,F=0,V=T.sfb21_extra;to(A<=LameInternalFlags.MAX_BITS_PER_CHANNEL),_i.fill(E.l3_enc,0);do k>A-42?T.sfb21_extra=!1:T.sfb21_extra=V,x=outer_loop(_,g,R,P,S,k),x<=0?(F=1,w=g.part2_3_length,E.assign(g),Ca.arraycopy(P,0,y,0,576),I=w-32,M=I-L,k=(I+L)/2):(L=k+32,M=I-L,k=(I+L)/2,F!=0&&(F=2,g.assign(E),Ca.arraycopy(y,0,P,0,576)));while(M>12);T.sfb21_extra=V,F==2&&Ca.arraycopy(E.l3_enc,0,g.l3_enc,0,576),to(g.part2_3_length<=A)},this.get_framebits=function(_,g){var R=_.internal_flags;R.bitrate_index=R.VBR_min_bitrate;var P=e.getframebits(_);R.bitrate_index=1,P=e.getframebits(_);for(var S=1;S<=R.VBR_max_bitrate;S++){R.bitrate_index=S;var L=new MeanBits(P);g[S]=t.ResvFrameBegin(_,L),P=L.bits}},this.VBR_old_prepare=function(_,g,R,P,S,L,I,T,E){var y=_.internal_flags,A,w=0,k=1,M=0;y.bitrate_index=y.VBR_max_bitrate;var x=t.ResvFrameBegin(_,new MeanBits(0))/y.mode_gr;get_framebits(_,L);for(var F=0;F<y.mode_gr;F++){var V=n.on_pe(_,g,T[F],x,F,0);y.mode_ext==H.MPG_MD_MS_LR&&(ms_convert(y.l3_side,F),n.reduce_side(T[F],R[F],x,V));for(var D=0;D<y.channels_out;++D){var z=y.l3_side.tt[F][D];z.block_type!=H.SHORT_TYPE?(w=1.28/(1+Math.exp(3.5-g[F][D]/300))-.05,A=y.PSY.mask_adjust-w):(w=2.56/(1+Math.exp(3.5-g[F][D]/300))-.14,A=y.PSY.mask_adjust_short-w),y.masking_lower=Math.pow(10,A*.1),init_outer_loop(y,z),E[F][D]=n.calc_xmin(_,P[F][D],z,S[F][D]),E[F][D]!=0&&(k=0),I[F][D]=126,M+=T[F][D]}}for(var F=0;F<y.mode_gr;F++)for(var D=0;D<y.channels_out;D++)M>L[y.VBR_max_bitrate]&&(T[F][D]*=L[y.VBR_max_bitrate],T[F][D]/=M),I[F][D]>T[F][D]&&(I[F][D]=T[F][D]);return k},this.bitpressure_strategy=function(_,g,R,P){for(var S=0;S<_.mode_gr;S++)for(var L=0;L<_.channels_out;L++){for(var I=_.l3_side.tt[S][L],T=g[S][L],E=0,y=0;y<I.psy_lmax;y++)T[E++]*=1+.029*y*y/H.SBMAX_l/H.SBMAX_l;if(I.block_type==H.SHORT_TYPE)for(var y=I.sfb_smin;y<H.SBMAX_s;y++)T[E++]*=1+.029*y*y/H.SBMAX_s/H.SBMAX_s,T[E++]*=1+.029*y*y/H.SBMAX_s/H.SBMAX_s,T[E++]*=1+.029*y*y/H.SBMAX_s/H.SBMAX_s;P[S][L]=0|Math.max(R[S][L],.9*P[S][L])}},this.VBR_new_prepare=function(_,g,R,P,S,L){var I=_.internal_flags,T=1,E=0,y=0,A;if(_.free_format){I.bitrate_index=0;var w=new MeanBits(E);A=t.ResvFrameBegin(_,w),E=w.bits,S[0]=A}else{I.bitrate_index=I.VBR_max_bitrate;var w=new MeanBits(E);t.ResvFrameBegin(_,w),E=w.bits,get_framebits(_,S),A=S[I.VBR_max_bitrate]}for(var k=0;k<I.mode_gr;k++){n.on_pe(_,g,L[k],E,k,0),I.mode_ext==H.MPG_MD_MS_LR&&ms_convert(I.l3_side,k);for(var M=0;M<I.channels_out;++M){var x=I.l3_side.tt[k][M];I.masking_lower=Math.pow(10,I.PSY.mask_adjust*.1),init_outer_loop(I,x),n.calc_xmin(_,R[k][M],x,P[k][M])!=0&&(T=0),y+=L[k][M]}}for(var k=0;k<I.mode_gr;k++)for(var M=0;M<I.channels_out;M++)y>A&&(L[k][M]*=A,L[k][M]/=y);return T},this.calc_target_bits=function(_,g,R,P,S,L){var I=_.internal_flags,T=I.l3_side,E,y,A,w,k=0;I.bitrate_index=I.VBR_max_bitrate;var M=new MeanBits(k);for(L[0]=t.ResvFrameBegin(_,M),k=M.bits,I.bitrate_index=1,k=e.getframebits(_)-I.sideinfo_len*8,S[0]=k/(I.mode_gr*I.channels_out),k=_.VBR_mean_bitrate_kbps*_.framesize*1e3,(I.substep_shaping&1)!=0&&(k*=1.09),k/=_.out_samplerate,k-=I.sideinfo_len*8,k/=I.mode_gr*I.channels_out,E=.93+.07*(11-_.compression_ratio)/(11-5.5),E<.9&&(E=.9),E>1&&(E=1),y=0;y<I.mode_gr;y++){var x=0;for(A=0;A<I.channels_out;A++){if(P[y][A]=int(E*k),g[y][A]>700){var F=int((g[y][A]-700)/1.4),V=T.tt[y][A];P[y][A]=int(E*k),V.block_type==H.SHORT_TYPE&&F<k/2&&(F=k/2),F>k*3/2?F=k*3/2:F<0&&(F=0),P[y][A]+=F}P[y][A]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(P[y][A]=LameInternalFlags.MAX_BITS_PER_CHANNEL),x+=P[y][A]}if(x>LameInternalFlags.MAX_BITS_PER_GRANULE)for(A=0;A<I.channels_out;++A)P[y][A]*=LameInternalFlags.MAX_BITS_PER_GRANULE,P[y][A]/=x}if(I.mode_ext==H.MPG_MD_MS_LR)for(y=0;y<I.mode_gr;y++)n.reduce_side(P[y],R[y],k*I.channels_out,LameInternalFlags.MAX_BITS_PER_GRANULE);for(w=0,y=0;y<I.mode_gr;y++)for(A=0;A<I.channels_out;A++)P[y][A]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(P[y][A]=LameInternalFlags.MAX_BITS_PER_CHANNEL),w+=P[y][A];if(w>L[0])for(y=0;y<I.mode_gr;y++)for(A=0;A<I.channels_out;A++)P[y][A]*=L[0],P[y][A]/=w}}var Sm=Ue.assert;function iS(){var e;this.setModules=function(t){e=t},this.ResvFrameBegin=function(t,n){var s=t.internal_flags,a,i=s.l3_side,o=e.getframebits(t);n.bits=(o-s.sideinfo_len*8)/s.mode_gr;var r=8*256*s.mode_gr-8;t.brate>320?a=8*int(t.brate*1e3/(t.out_samplerate/1152)/8+.5):(a=8*1440,t.strict_ISO&&(a=8*int(32e4/(t.out_samplerate/1152)/8+.5))),s.ResvMax=a-o,s.ResvMax>r&&(s.ResvMax=r),(s.ResvMax<0||t.disable_reservoir)&&(s.ResvMax=0);var f=n.bits*s.mode_gr+Math.min(s.ResvSize,s.ResvMax);return f>a&&(f=a),Sm(s.ResvMax%8==0),Sm(s.ResvMax>=0),i.resvDrain_pre=0,s.pinfo!=null&&(s.pinfo.mean_bits=n.bits/2,s.pinfo.resvsize=s.ResvSize),f},this.ResvMaxBits=function(t,n,s,a){var i=t.internal_flags,o,r=i.ResvSize,f=i.ResvMax;a!=0&&(r+=n),(i.substep_shaping&1)!=0&&(f*=.9),s.bits=n,r*10>f*9?(o=r-f*9/10,s.bits+=o,i.substep_shaping|=128):(o=0,i.substep_shaping&=127,!t.disable_reservoir&&(i.substep_shaping&1)==0&&(s.bits-=.1*n));var u=r<i.ResvMax*6/10?r:i.ResvMax*6/10;return u-=o,u<0&&(u=0),u},this.ResvAdjust=function(t,n){t.ResvSize-=n.part2_3_length+n.part2_length},this.ResvFrameEnd=function(t,n){var s,a=t.l3_side;t.ResvSize+=n*t.mode_gr;var i=0;a.resvDrain_post=0,a.resvDrain_pre=0,(s=t.ResvSize%8)!=0&&(i+=s),s=t.ResvSize-i-t.ResvMax,s>0&&(i+=s);{var o=Math.min(a.main_data_begin*8,i)/8;a.resvDrain_pre+=8*o,i-=8*o,t.ResvSize-=8*o,a.main_data_begin-=o}a.resvDrain_post+=i,t.ResvSize-=i}}function oS(){var e="http://www.mp3dev.org/",t=3,n=98,s=4,a=0,i=93;this.getLameVersion=function(){return t+"."+n+"."+s},this.getLameShortVersion=function(){return t+"."+n+"."+s},this.getLameVeryShortVersion=function(){return"LAME"+t+"."+n+"r"},this.getPsyVersion=function(){return a+"."+i},this.getLameUrl=function(){return e},this.getLameOsBitness=function(){return"32bits"}}var rS=Ue.System,pc=Ue.VbrMode,Cm=Ue.ShortBlock,lS=Ue.Arrays,wr=Ue.new_byte,cS=Ue.assert;Mo.NUMTOCENTRIES=100;Mo.MAXFRAMESIZE=2880;function Mo(){var e,t,n;this.setModules=function(k,M,x){e=k,t=M,n=x};var s=1,a=2,i=4,o=8,r=Mo.NUMTOCENTRIES,f=Mo.MAXFRAMESIZE,u=r+4+4+4+4+4,d=u+9+1+1+8+1+1+3+1+1+2+4+2+2,c=128,l=64,m=32,v=null,C="Xing",b="Info",_=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];function g(k,M){if(k.nVbrNumFrames++,k.sum+=M,k.seen++,!(k.seen<k.want)&&(k.pos<k.size&&(k.bag[k.pos]=k.sum,k.pos++,k.seen=0),k.pos==k.size)){for(var x=1;x<k.size;x+=2)k.bag[x/2]=k.bag[x];k.want*=2,k.pos/=2}}function R(k,M){if(!(k.pos<=0))for(var x=1;x<r;++x){var F=x/r,V,D,z=0|Math.floor(F*k.pos);z>k.pos-1&&(z=k.pos-1),V=k.bag[z],D=k.sum;var p=0|256*V/D;p>255&&(p=255),M[x]=255&p}}this.addVbrFrame=function(k){var M=k.internal_flags,x=Tables.bitrate_table[k.version][M.bitrate_index];cS(M.VBR_seek_table.bag!=null),g(M.VBR_seek_table,x)};function P(k,M){var x=k[M+0]&255;return x<<=8,x|=k[M+1]&255,x<<=8,x|=k[M+2]&255,x<<=8,x|=k[M+3]&255,x}function S(k,M,x){k[M+0]=255&(x>>24&255),k[M+1]=255&(x>>16&255),k[M+2]=255&(x>>8&255),k[M+3]=255&(x&255)}function L(k,M,x){k[M+0]=255&(x>>8&255),k[M+1]=255&(x&255)}function I(k,M){return new String(k,M,C.length(),v).equals(C)||new String(k,M,b.length(),v).equals(b)}function T(k,M,x){return 255&(k<<M|x&~(-1<<M))}function E(k,M){var x=k.internal_flags;M[0]=T(M[0],8,255),M[1]=T(M[1],3,7),M[1]=T(M[1],1,k.out_samplerate<16e3?0:1),M[1]=T(M[1],1,k.version),M[1]=T(M[1],2,1),M[1]=T(M[1],1,k.error_protection?0:1),M[2]=T(M[2],4,x.bitrate_index),M[2]=T(M[2],2,x.samplerate_index),M[2]=T(M[2],1,0),M[2]=T(M[2],1,k.extension),M[3]=T(M[3],2,k.mode.ordinal()),M[3]=T(M[3],2,x.mode_ext),M[3]=T(M[3],1,k.copyright),M[3]=T(M[3],1,k.original),M[3]=T(M[3],2,k.emphasis),M[0]=255;var F=255&(M[1]&241),V;k.version==1?V=c:k.out_samplerate<16e3?V=m:V=l,k.VBR==pc.vbr_off&&(V=k.brate);var D;k.free_format?D=0:D=255&16*e.BitrateIndex(V,k.version,k.out_samplerate),k.version==1?(M[1]=255&(F|10),F=255&(M[2]&13),M[2]=255&(D|F)):(M[1]=255&(F|2),F=255&(M[2]&13),M[2]=255&(D|F))}this.getVbrTag=function(k){var M=new VBRTagData,x=0;M.flags=0;var F=k[x+1]>>3&1,V=k[x+2]>>2&3,D=k[x+3]>>6&3,z=k[x+2]>>4&15;if(z=Tables.bitrate_table[F][z],k[x+1]>>4==14?M.samprate=Tables.samplerate_table[2][V]:M.samprate=Tables.samplerate_table[F][V],F!=0?D!=3?x+=36:x+=21:D!=3?x+=21:x+=13,!I(k,x))return null;x+=4,M.hId=F;var p=M.flags=P(k,x);if(x+=4,(p&s)!=0&&(M.frames=P(k,x),x+=4),(p&a)!=0&&(M.bytes=P(k,x),x+=4),(p&i)!=0){if(M.toc!=null)for(var B=0;B<r;B++)M.toc[B]=k[x+B];x+=r}M.vbrScale=-1,(p&o)!=0&&(M.vbrScale=P(k,x),x+=4),M.headersize=(F+1)*72e3*z/M.samprate,x+=21;var U=k[x+0]<<4;U+=k[x+1]>>4;var $=(k[x+1]&15)<<8;return $+=k[x+2]&255,(U<0||U>3e3)&&(U=-1),($<0||$>3e3)&&($=-1),M.encDelay=U,M.encPadding=$,M},this.InitVbrTag=function(k){var M=k.internal_flags,x;k.version==1?x=c:k.out_samplerate<16e3?x=m:x=l,k.VBR==pc.vbr_off&&(x=k.brate);var F=(k.version+1)*72e3*x/k.out_samplerate,V=M.sideinfo_len+d;if(M.VBR_seek_table.TotalFrameSize=F,F<V||F>f){k.bWriteVbrTag=!1;return}M.VBR_seek_table.nVbrNumFrames=0,M.VBR_seek_table.nBytesWritten=0,M.VBR_seek_table.sum=0,M.VBR_seek_table.seen=0,M.VBR_seek_table.want=1,M.VBR_seek_table.pos=0,M.VBR_seek_table.bag==null&&(M.VBR_seek_table.bag=new int[400],M.VBR_seek_table.size=400);var D=wr(f);E(k,D);for(var z=M.VBR_seek_table.TotalFrameSize,p=0;p<z;++p)t.add_dummy_byte(k,D[p]&255,1)};function y(k,M){var x=M^k;return M=M>>8^_[x&255],M}this.updateMusicCRC=function(k,M,x,F){for(var V=0;V<F;++V)k[0]=y(M[x+V],k[0])};function A(k,M,x,F,V){var D=k.internal_flags,z=0,p=k.encoder_delay,B=k.encoder_padding,U=100-10*k.VBR_q-k.quality,$=n.getLameVeryShortVersion(),ee,re=0,G,ae=[1,5,3,2,4,0,3],X=0|(k.lowpassfreq/100+.5>255?255:k.lowpassfreq/100+.5),he=0,we=0,Ie=0,K=k.internal_flags.noise_shaping,te=0,ve=0,Ce=0,Ae=0,Be=0,He=(k.exp_nspsytune&1)!=0,Fe=(k.exp_nspsytune&2)!=0,Ve=!1,Le=!1,et=k.internal_flags.nogap_total,Ze=k.internal_flags.nogap_current,Xe=k.ATHtype,at=0,lt;switch(k.VBR){case vbr_abr:lt=k.VBR_mean_bitrate_kbps;break;case vbr_off:lt=k.brate;break;default:lt=k.VBR_min_bitrate_kbps}switch(k.VBR.ordinal()<ae.length?ee=ae[k.VBR.ordinal()]:ee=0,G=16*re+ee,D.findReplayGain&&(D.RadioGain>510&&(D.RadioGain=510),D.RadioGain<-510&&(D.RadioGain=-510),we=8192,we|=3072,D.RadioGain>=0?we|=D.RadioGain:(we|=512,we|=-D.RadioGain)),D.findPeakSample&&(he=Math.abs(0|D.PeakSample/32767*Math.pow(2,23)+.5)),et!=-1&&(Ze>0&&(Le=!0),Ze<et-1&&(Ve=!0)),at=Xe+((He?1:0)<<4)+((Fe?1:0)<<5)+((Ve?1:0)<<6)+((Le?1:0)<<7),U<0&&(U=0),k.mode){case MONO:te=0;break;case STEREO:te=1;break;case DUAL_CHANNEL:te=2;break;case JOINT_STEREO:k.force_ms?te=4:te=3;break;case NOT_SET:default:te=7;break}k.in_samplerate<=32e3?Ce=0:k.in_samplerate==48e3?Ce=2:k.in_samplerate>48e3?Ce=3:Ce=1,(k.short_blocks==Cm.short_block_forced||k.short_blocks==Cm.short_block_dispensed||k.lowpassfreq==-1&&k.highpassfreq==-1||k.scale_left<k.scale_right||k.scale_left>k.scale_right||k.disable_reservoir&&k.brate<320||k.noATH||k.ATHonly||Xe==0||k.in_samplerate<=32e3)&&(ve=1),Ae=K+(te<<2)+(ve<<5)+(Ce<<6),Be=D.nMusicCRC,S(x,F+z,U),z+=4;for(var gt=0;gt<9;gt++)x[F+z+gt]=255&$.charAt(gt);z+=9,x[F+z]=255&G,z++,x[F+z]=255&X,z++,S(x,F+z,he),z+=4,L(x,F+z,we),z+=2,L(x,F+z,Ie),z+=2,x[F+z]=255&at,z++,lt>=255?x[F+z]=255:x[F+z]=255&lt,z++,x[F+z]=255&p>>4,x[F+z+1]=255&(p<<4)+(B>>8),x[F+z+2]=255&B,z+=3,x[F+z]=255&Ae,z++,x[F+z++]=0,L(x,F+z,k.preset),z+=2,S(x,F+z,M),z+=4,L(x,F+z,Be),z+=2;for(var Te=0;Te<z;Te++)V=y(x[F+Te],V);return L(x,F+z,V),z+=2,z}function w(k){k.seek(0);var M=wr(10);k.readFully(M);var x;return new String(M,"ISO-8859-1").startsWith("ID3")?x=0:x=((M[6]&127)<<21|(M[7]&127)<<14|(M[8]&127)<<7|M[9]&127)+M.length,x}this.getLameTagFrame=function(k,M){var x=k.internal_flags;if(!k.bWriteVbrTag||x.Class_ID!=Lame.LAME_ID||x.VBR_seek_table.pos<=0)return 0;if(M.length<x.VBR_seek_table.TotalFrameSize)return x.VBR_seek_table.TotalFrameSize;lS.fill(M,0,x.VBR_seek_table.TotalFrameSize,0),E(k,M);var F=wr(r);if(k.free_format)for(var V=1;V<r;++V)F[V]=255&255*V/100;else R(x.VBR_seek_table,F);var D=x.sideinfo_len;k.error_protection&&(D-=2),k.VBR==pc.vbr_off?(M[D++]=255&b.charAt(0),M[D++]=255&b.charAt(1),M[D++]=255&b.charAt(2),M[D++]=255&b.charAt(3)):(M[D++]=255&C.charAt(0),M[D++]=255&C.charAt(1),M[D++]=255&C.charAt(2),M[D++]=255&C.charAt(3)),S(M,D,s+a+i+o),D+=4,S(M,D,x.VBR_seek_table.nVbrNumFrames),D+=4;var z=x.VBR_seek_table.nBytesWritten+x.VBR_seek_table.TotalFrameSize;S(M,D,0|z),D+=4,rS.arraycopy(F,0,M,D,F.length),D+=F.length,k.error_protection&&t.CRC_writeheader(x,M);for(var p=0,V=0;V<D;V++)p=y(M[V],p);return D+=A(k,z,M,D,p),x.VBR_seek_table.TotalFrameSize},this.putVbrTag=function(k,M){var x=k.internal_flags;if(x.VBR_seek_table.pos<=0||(M.seek(M.length()),M.length()==0))return-1;var F=w(M);M.seek(F);var V=wr(f),D=getLameTagFrame(k,V);return D>V.length?-1:(D<1||M.write(V,0,D),0)}}var Am=Ue.new_byte,uS=Ue.assert;function dS(){this.setModules=function(e,t){}}function fS(){this.setModules=function(e,t,n){}}function mS(){}function vS(){this.setModules=function(e,t){}}function hS(e,t,n){arguments.length!=3&&(console.error("WARN: Mp3Encoder(channels, samplerate, kbps) not specified"),e=1,t=44100,n=128);var s=new bt,a=new dS,i=new dn,o=new ls,r=new eS,f=new xn,u=new aS,d=new Mo,c=new oS,l=new vS,m=new iS,v=new Ro,C=new fS,b=new mS;s.setModules(i,o,r,f,u,d,c,l,b),o.setModules(i,b,c,d),l.setModules(o,c),r.setModules(s),u.setModules(o,m,f,v),f.setModules(v,m,s.enc.psy),m.setModules(o),v.setModules(f),d.setModules(s,o,c),a.setModules(C,b),C.setModules(c,l,r);var _=s.lame_init();_.num_channels=e,_.in_samplerate=t,_.brate=n,_.mode=Vt.STEREO,_.quality=3,_.bWriteVbrTag=!1,_.disable_reservoir=!0,_.write_id3tag_automatic=!1,s.lame_init_params(_);var g=1152,R=0|1.25*g+7200,P=Am(R);this.encodeBuffer=function(S,L){e==1&&(L=S),uS(S.length==L.length),S.length>g&&(g=S.length,R=0|1.25*g+7200,P=Am(R));var I=s.lame_encode_buffer(_,S,L,S.length,P,0,R);return new Int8Array(P.subarray(0,I))},this.flush=function(){var S=s.lame_encode_flush(_,P,0,R);return new Int8Array(P.subarray(0,S))}}function Cl(e){return e.charCodeAt(0)<<24|e.charCodeAt(1)<<16|e.charCodeAt(2)<<8|e.charCodeAt(3)}Cl("RIFF");Cl("WAVE");Cl("fmt ");Cl("data");class gS{constructor(t){this.bitRate=t.bitRate,this.sampleRate=t.sampleRate,this.dataBuffer=[],this.encoder=new hS(1,this.sampleRate,this.bitRate)}encode(t){const s=this._convertBuffer(t);let a=s.length;for(let i=0;a>=0;i+=1152){const o=s.subarray(i,i+1152),r=this.encoder.encodeBuffer(o);this.dataBuffer.push(new Int8Array(r)),a-=1152}}finish(){this.dataBuffer.push(this.encoder.flush());const t=new Blob(this.dataBuffer,{type:"audio/mp3"});return this.dataBuffer=[],{id:Date.now(),blob:t,url:URL.createObjectURL(t)}}_floatTo16BitPCM(t,n){for(let s=0;s<t.length;s++){const a=Math.max(-1,Math.min(1,t[s]));n[s]=a<0?a*32768:a*32767}}_convertBuffer(t){const n=new Float32Array(t),s=new Int16Array(t.length);return this._floatTo16BitPCM(n,s),s}}class pS{constructor(t={}){this.beforeRecording=t.beforeRecording,this.pauseRecording=t.pauseRecording,this.afterRecording=t.afterRecording,this.micFailed=t.micFailed,this.encoderOptions={bitRate:t.bitRate,sampleRate:t.sampleRate},this.bufferSize=4096,this.records=[],this.isPause=!1,this.isRecording=!1,this.duration=0,this.volume=0,this._duration=0}start(){const t={video:!1,audio:{channelCount:1,echoCancellation:!1}};this.beforeRecording&&this.beforeRecording("start recording"),navigator.mediaDevices.getUserMedia(t).then(this._micCaptured.bind(this)).catch(this._micError.bind(this)),this.isPause=!1,this.isRecording=!0,this.lameEncoder||(this.lameEncoder=new gS(this.encoderOptions))}stop(){this.stream.getTracks().forEach(n=>n.stop()),this.input.disconnect(),this.processor.disconnect(),this.context.close();let t=null;t=this.lameEncoder.finish(),t.duration=this.duration,this.records.push(t),this._duration=0,this.duration=0,this.isPause=!1,this.isRecording=!1,this.afterRecording&&this.afterRecording(t)}pause(){this.stream.getTracks().forEach(t=>t.stop()),this.input.disconnect(),this.processor.disconnect(),this._duration=this.duration,this.isPause=!0,this.pauseRecording&&this.pauseRecording("pause recording")}_micCaptured(t){this.context=new(window.AudioContext||window.webkitAudioContext),this.duration=this._duration,this.input=this.context.createMediaStreamSource(t),this.processor=this.context.createScriptProcessor(this.bufferSize,1,1),this.stream=t,this.processor.onaudioprocess=n=>{const s=n.inputBuffer.getChannelData(0);let a=0;this.lameEncoder&&this.lameEncoder.encode(s);for(let i=0;i<s.length;++i)a+=s[i]*s[i];this.duration=parseFloat(this._duration)+parseFloat(this.context.currentTime.toFixed(2)),this.volume=Math.sqrt(a/s.length).toFixed(2)},this.input.connect(this.processor),this.processor.connect(this.context.destination)}_micError(t){this.micFailed&&this.micFailed(t)}}var Tm=window.chrome,dd=window.navigator,_S=dd.vendor,bS=typeof window.opr<"u",yS=dd.userAgent.indexOf("Edg")>-1,wS=dd.userAgent.match("CriOS");function kS(){return wS?!0:Tm!==null&&typeof Tm<"u"&&_S==="Google Inc."&&bS===!1&&yS===!1}function xm(){var e=SS(),t=e.substr(0,4);return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw(n|u)|c55\/|capi|ccwa|cdm|cell|chtm|cldc|cmd|co(mp|nd)|craw|da(it|ll|ng)|dbte|dcs|devi|dica|dmob|do(c|p)o|ds(12|d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(|_)|g1 u|g560|gene|gf5|gmo|go(\.w|od)|gr(ad|un)|haie|hcit|hd(m|p|t)|hei|hi(pt|ta)|hp( i|ip)|hsc|ht(c(| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i(20|go|ma)|i230|iac( ||\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|[a-w])|libw|lynx|m1w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|mcr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|([1-8]|c))|phil|pire|pl(ay|uc)|pn2|po(ck|rt|se)|prox|psio|ptg|qaa|qc(07|12|21|32|60|[2-7]|i)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h|oo|p)|sdk\/|se(c(|0|1)|47|mc|nd|ri)|sgh|shar|sie(|m)|sk0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h|v|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl|tdg|tel(i|m)|tim|tmo|to(pl|sh)|ts(70|m|m3|m5)|tx9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas|your|zeto|zte/i.test(t)}function SS(){var e=navigator.userAgent||navigator.vendor||window.opera||null;if(!e)throw new Error("Failed to look for user agent information.");return e}const CS={name:"RoomFooter",components:{SvgIcon:An,EmojiPickerContainer:Oh,RoomFiles:Tk,RoomMessageReply:Xk,RoomUsersTag:s9,RoomEmojis:l9,RoomTemplatesText:g9},directives:{clickOutside:wl},props:{room:{type:Object,required:!0},roomId:{type:[String,Number],required:!0},roomMessage:{type:String,default:null},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},textMessages:{type:Object,required:!0},showSendIcon:{type:Boolean,required:!0},showFiles:{type:Boolean,required:!0},showAudio:{type:Boolean,required:!0},showEmojis:{type:Boolean,required:!0},showFooter:{type:Boolean,required:!0},acceptedFiles:{type:String,required:!0},multipleFiles:{type:Boolean,default:!0},captureFiles:{type:String,required:!0},textareaActionEnabled:{type:Boolean,required:!0},textareaAutoFocus:{type:Boolean,required:!0},userTagsEnabled:{type:Boolean,required:!0},emojisSuggestionEnabled:{type:Boolean,required:!0},templatesText:{type:Array,default:null},audioBitRate:{type:Number,required:!0},audioSampleRate:{type:Number,required:!0},initReplyMessage:{type:Object,default:null},initEditMessage:{type:Object,default:null},droppedFiles:{type:Array,default:null},emojiDataSource:{type:String,default:void 0}},emits:["edit-message","send-message","update-edited-message-id","textarea-action-handler","typing-message"],data(){return{message:"",editedMessage:{},messageReply:null,cursorRangePosition:null,files:[],fileDialog:!1,selectUsersTagItem:null,selectEmojiItem:null,selectTemplatesTextItem:null,format:"mp3",activeUpOrDownEmojis:null,activeUpOrDownUsersTag:null,activeUpOrDownTemplatesText:null,emojisDB:new yh({dataSource:this.emojiDataSource}),emojiOpened:!1,keepKeyboardOpen:!1,filteredEmojis:[],filteredUsersTag:[],selectedUsersTag:[],filteredTemplatesText:[],recorder:this.initRecorder(),isRecording:!1}},computed:{isMessageEmpty(){return!this.files.length&&!this.message.trim()},isFileLoading(){return this.files.some(e=>e.loading)},recordedTime(){return new Date(this.recorder.duration*1e3).toISOString().substr(14,5)},shadowFooter(){return!!this.filteredEmojis.length||!!this.filteredUsersTag.length||!!this.filteredTemplatesText.length||!!this.files.length||!!this.messageReply}},watch:{roomId(){this.resetMessage(!0,!0),this.roomMessage&&(this.message=this.roomMessage,setTimeout(()=>this.onChangeInput()))},message(e){this.getTextareaRef().value=e},roomMessage:{immediate:!0,handler(e){e&&(this.message=this.roomMessage)}},editedMessage(e){this.$emit("update-edited-message-id",e._id)},initReplyMessage(e){e&&this.replyMessage(e)},initEditMessage(e){e&&this.editMessage(e)},droppedFiles(e){e&&this.onFileChange(e)}},mounted(){const e=xm();let t=!0;this.getTextareaRef().addEventListener("keyup",n=>{n.key==="Enter"&&!n.shiftKey&&!this.fileDialog&&(e?(this.message=this.message+`
`,setTimeout(()=>this.onChangeInput())):t&&!this.filteredEmojis.length&&!this.filteredUsersTag.length&&!this.filteredTemplatesText.length&&this.sendMessage()),t=!n.isComposing,setTimeout(()=>{this.updateFooterLists()},60)}),this.getTextareaRef().addEventListener("click",()=>{e&&(this.keepKeyboardOpen=!0),this.updateFooterLists()}),this.getTextareaRef().addEventListener("blur",()=>{setTimeout(()=>{this.resetFooterList()},100),e&&setTimeout(()=>this.keepKeyboardOpen=!1)})},beforeUnmount(){this.stopRecorder()},methods:{getTextareaRef(){return this.$refs.roomTextarea},focusTextarea(e){xm()&&e||this.getTextareaRef()&&(this.getTextareaRef().focus(),this.cursorRangePosition&&setTimeout(()=>{const t=kS()?0:1;this.getTextareaRef().setSelectionRange(this.cursorRangePosition+t,this.cursorRangePosition+t),this.cursorRangePosition=null}))},onChangeInput(){var e,t,n;((e=this.getTextareaRef())!=null&&e.value||((t=this.getTextareaRef())==null?void 0:t.value)==="")&&(this.message=(n=this.getTextareaRef())==null?void 0:n.value),this.keepKeyboardOpen=!0,this.resizeTextarea(),this.$emit("typing-message",this.message)},resizeTextarea(){const e=this.getTextareaRef();if(!e)return;const t=window.getComputedStyle(e,null).getPropertyValue("padding-top").replace("px","");e.style.height=0,e.style.height=e.scrollHeight-t*2+"px"},escapeTextarea(){this.filteredEmojis.length?this.filteredEmojis=[]:this.filteredUsersTag.length?this.filteredUsersTag=[]:this.filteredTemplatesText.length?this.filteredTemplatesText=[]:this.resetMessage()},onPasteImage(e){var t;const n=(t=e.clipboardData)==null?void 0:t.items;n&&Array.from(n).forEach(s=>{if(s.type.includes("image")){const a=s.getAsFile();this.onFileChange([a])}})},updateActiveUpOrDown(e,t){this.filteredEmojis.length?(this.activeUpOrDownEmojis=t,e.preventDefault()):this.filteredUsersTag.length?(this.activeUpOrDownUsersTag=t,e.preventDefault()):this.filteredTemplatesText.length&&(this.activeUpOrDownTemplatesText=t,e.preventDefault())},selectItem(){this.filteredEmojis.length?this.selectEmojiItem=!0:this.filteredUsersTag.length?this.selectUsersTagItem=!0:this.filteredTemplatesText.length&&(this.selectTemplatesTextItem=!0)},selectEmoji(e){if(this.selectEmojiItem=!1,!e)return;const{position:t,endPosition:n}=this.getCharPosition(":");this.message=this.message.substr(0,t-1)+e+this.message.substr(n,this.message.length-1),this.cursorRangePosition=t,this.focusTextarea()},selectTemplateText(e){if(this.selectTemplatesTextItem=!1,!e)return;const{position:t,endPosition:n}=this.getCharPosition("/"),s=this.message.substr(n,n).length?"":" ";this.message=this.message.substr(0,t-1)+e.text+s+this.message.substr(n,this.message.length-1),this.cursorRangePosition=t+e.text.length+s.length+1,this.focusTextarea()},addEmoji(e){this.message+=e.unicode,this.focusTextarea(!0)},launchFilePicker(){this.$refs.file.value="",this.$refs.file.click()},async onFileChange(e){this.fileDialog=!0,this.focusTextarea(),Array.from(e).forEach(async t=>{const n=URL.createObjectURL(t),s=t.name.lastIndexOf(".");this.files.push({loading:!0,name:t.name.substring(0,s),size:t.size,type:t.type,extension:t.name.substring(s+1),localUrl:n});const a=await fetch(n).then(o=>o.blob());let i=this.files.find(o=>o.localUrl===n);i&&(i.blob=a,i.loading=!1,delete i.loading)}),setTimeout(()=>this.fileDialog=!1,500)},removeFile(e){this.files.splice(e,1),this.focusTextarea()},toggleRecorder(e){if(this.isRecording=e,!this.recorder.isRecording)setTimeout(()=>this.recorder.start(),200);else try{this.recorder.stop();const t=this.recorder.records[0];this.files.push({blob:t.blob,name:`audio.${this.format}`,size:t.blob.size,duration:t.duration,type:t.blob.type,audio:!0,localUrl:URL.createObjectURL(t.blob)}),this.recorder=this.initRecorder(),this.sendMessage()}catch{setTimeout(()=>this.stopRecorder(),100)}},stopRecorder(){if(this.recorder.isRecording)try{this.recorder.stop(),this.recorder=this.initRecorder()}catch{setTimeout(()=>this.stopRecorder(),100)}},textareaActionHandler(){this.$emit("textarea-action-handler",this.message)},sendMessage(){var e;let t=this.message.trim();if(!this.files.length&&!t||this.isFileLoading)return;this.selectedUsersTag.forEach(s=>{t=t.replace(`@${s.username}`,`<usertag>${s._id}</usertag>`)});const n=this.files.length?this.files:null;this.editedMessage._id?(this.editedMessage.content!==t||(e=this.editedMessage.files)!=null&&e.length||this.files.length)&&this.$emit("edit-message",{messageId:this.editedMessage._id,newContent:t,files:n,replyMessage:this.messageReply,usersTag:this.selectedUsersTag}):this.$emit("send-message",{content:t,files:n,replyMessage:this.messageReply,usersTag:this.selectedUsersTag}),this.resetMessage(!0)},editMessage(e){this.resetMessage(),this.editedMessage={...e};let t=e.content;const n=t,s="<usertag>",a="</usertag>";[...t.matchAll(new RegExp(s,"gi"))].map(o=>o.index).forEach(o=>{const r=n.substring(o+s.length,n.indexOf(a,o)),f=this.room.users.find(u=>u._id===r);t=t.replace(`${s}${r}${a}`,`@${f?.username||"unknown"}`),this.selectUserTag(f,!0)}),this.message=t,e.files&&(this.files=[...e.files]),setTimeout(()=>this.resizeTextarea())},replyMessage(e){this.editedMessage={},this.messageReply=e,this.focusTextarea()},updateFooterLists(){this.updateFooterList("@"),this.updateFooterList(":"),this.updateFooterList("/")},updateFooterList(e){if(!this.getTextareaRef()||e===":"&&!this.emojisSuggestionEnabled||e==="@"&&(!this.userTagsEnabled||!this.room.users)||e==="/"&&!this.templatesText)return;const t=this.getTextareaRef().selectionStart;let n=t;for(;n>0&&this.message.charAt(n-1)!==e&&(this.message.charAt(n-1)!==" "||e!==":");)n--;const s=this.message.charAt(n-2),a=!s.match(/^[0-9a-zA-Z]+$/);if(this.message.charAt(n-1)===e&&(!s||s===" "||a)){const i=this.message.substring(n,t);e===":"?this.updateEmojis(i):e==="@"?this.updateShowUsersTag(i):e==="/"&&this.updateShowTemplatesText(i)}else this.resetFooterList(e)},updateShowUsersTag(e){this.filteredUsersTag=eu(this.room.users,"username",e,!0).filter(t=>t._id!==this.currentUserId)},selectUserTag(e,t=!1){if(this.selectUsersTagItem=!1,!e)return;const{position:n,endPosition:s}=this.getCharPosition("@"),a=this.message.substr(s,s).length?"":" ";this.message=this.message.substr(0,n)+e.username+a+this.message.substr(s,this.message.length-1),this.selectedUsersTag=[...this.selectedUsersTag,{...e}],t||(this.cursorRangePosition=n+e.username.length+a.length+1),this.focusTextarea()},updateShowTemplatesText(e){this.filteredTemplatesText=eu(this.templatesText,"tag",e,!0)},getCharPosition(e){let n=this.getTextareaRef().selectionStart;for(;n>0&&this.message.charAt(n-1)!==e;)n--;const s=this.getTextareaRef().selectionEnd;return{position:n,endPosition:s}},async updateEmojis(e){if(!e)return;const t=await this.emojisDB.getEmojiBySearchQuery(e);this.filteredEmojis=t.map(n=>n.unicode)},resetFooterList(e=null){e===":"?this.filteredEmojis=[]:e==="@"?this.filteredUsersTag=[]:e==="/"?this.filteredTemplatesText=[]:(this.filteredEmojis=[],this.filteredUsersTag=[],this.filteredTemplatesText=[])},resetMessage(e=!1,t=!1){t||this.$emit("typing-message",null),this.selectedUsersTag=[],this.resetFooterList(),this.resetTextareaSize(),this.message="",this.editedMessage={},this.messageReply=null,this.files=[],this.emojiOpened=!1,this.preventKeyboardFromClosing(),(this.textareaAutoFocus||!t)&&setTimeout(()=>this.focusTextarea(e))},resetTextareaSize(){this.getTextareaRef()&&(this.getTextareaRef().style.height="20px")},preventKeyboardFromClosing(){this.keepKeyboardOpen&&this.getTextareaRef().focus()},initRecorder(){return this.isRecording=!1,new pS({bitRate:Number(this.audioBitRate),sampleRate:Number(this.audioSampleRate),beforeRecording:null,afterRecording:null,pauseRecording:null,micFailed:this.micFailed})},micFailed(){this.isRecording=!1,this.recorder=this.initRecorder()}}},AS={key:0,class:"vac-icon-textarea-left"},TS=De("div",{class:"vac-dot-audio-record"},null,-1),xS={class:"vac-dot-audio-record-time"},ES=["placeholder"],RS={class:"vac-icon-textarea"},MS={key:1},IS=["multiple","accept","capture"];function BS(e,t,n,s,a,i){const o=mt("room-emojis"),r=mt("room-users-tag"),f=mt("room-templates-text"),u=mt("room-message-reply"),d=mt("room-files"),c=mt("svg-icon"),l=mt("emoji-picker-container"),m=hl("click-outside");return oa((me(),xe("div",{id:"room-footer",class:Mt(["vac-room-footer",{"vac-app-box-shadow":i.shadowFooter}])},[Ge(o,{"filtered-emojis":a.filteredEmojis,"select-item":a.selectEmojiItem,"active-up-or-down":a.activeUpOrDownEmojis,onSelectEmoji:t[0]||(t[0]=v=>i.selectEmoji(v)),onActivateItem:t[1]||(t[1]=v=>a.activeUpOrDownEmojis=0)},null,8,["filtered-emojis","select-item","active-up-or-down"]),Ge(r,{"filtered-users-tag":a.filteredUsersTag,"select-item":a.selectUsersTagItem,"active-up-or-down":a.activeUpOrDownUsersTag,onSelectUserTag:t[2]||(t[2]=v=>i.selectUserTag(v)),onActivateItem:t[3]||(t[3]=v=>a.activeUpOrDownUsersTag=0)},null,8,["filtered-users-tag","select-item","active-up-or-down"]),Ge(f,{"filtered-templates-text":a.filteredTemplatesText,"select-item":a.selectTemplatesTextItem,"active-up-or-down":a.activeUpOrDownTemplatesText,onSelectTemplateText:t[4]||(t[4]=v=>i.selectTemplateText(v)),onActivateItem:t[5]||(t[5]=v=>a.activeUpOrDownTemplatesText=0)},null,8,["filtered-templates-text","select-item","active-up-or-down"]),Ge(u,{room:n.room,"message-reply":a.messageReply,"text-formatting":n.textFormatting,"link-options":n.linkOptions,onResetMessage:i.resetMessage},Wt({_:2},[Rt(e.$slots,(v,C)=>({name:C,fn:vt(b=>[We(e.$slots,C,qt(zt(b)))])}))]),1032,["room","message-reply","text-formatting","link-options","onResetMessage"]),Ge(d,{files:a.files,onRemoveFile:i.removeFile,onResetMessage:i.resetMessage},Wt({_:2},[Rt(e.$slots,(v,C)=>({name:C,fn:vt(b=>[We(e.$slots,C,qt(zt(b)))])}))]),1032,["files","onRemoveFile","onResetMessage"]),De("div",{class:Mt(["vac-box-footer",{"vac-box-footer-border":!a.files.length}])},[n.showAudio&&!a.files.length?(me(),xe("div",AS,[a.isRecording?(me(),xe(Lt,{key:0},[De("div",{class:"vac-svg-button vac-icon-audio-stop",onClick:t[6]||(t[6]=(...v)=>i.stopRecorder&&i.stopRecorder(...v))},[We(e.$slots,"audio-stop-icon",{},()=>[Ge(c,{name:"close-outline"})])]),TS,De("div",xS,yt(i.recordedTime),1),De("div",{class:"vac-svg-button vac-icon-audio-confirm",onClick:t[7]||(t[7]=v=>i.toggleRecorder(!1))},[We(e.$slots,"audio-check-icon",{},()=>[Ge(c,{name:"checkmark"})])])],64)):(me(),xe("div",{key:1,class:"vac-svg-button",onClick:t[8]||(t[8]=v=>i.toggleRecorder(!0))},[We(e.$slots,"microphone-icon",{},()=>[Ge(c,{name:"microphone",class:"vac-icon-microphone"})])]))])):qe("",!0),De("textarea",{id:"roomTextarea",ref:"roomTextarea",placeholder:n.textMessages.TYPE_MESSAGE,class:Mt(["vac-textarea",{"vac-textarea-outline":a.editedMessage._id}]),style:{"min-height":"20px","padding-left":"12px"},onInput:t[9]||(t[9]=(...v)=>i.onChangeInput&&i.onChangeInput(...v)),onKeydown:[t[10]||(t[10]=ei((...v)=>i.escapeTextarea&&i.escapeTextarea(...v),["esc"])),t[11]||(t[11]=ei(Ns((...v)=>i.selectItem&&i.selectItem(...v),["exact","prevent"]),["enter"])),t[13]||(t[13]=ei(Ns(()=>{},["exact","prevent"]),["tab"])),t[14]||(t[14]=ei((...v)=>i.selectItem&&i.selectItem(...v),["tab"])),t[15]||(t[15]=ei(v=>i.updateActiveUpOrDown(v,-1),["up"])),t[16]||(t[16]=ei(v=>i.updateActiveUpOrDown(v,1),["down"]))],onPaste:t[12]||(t[12]=(...v)=>i.onPasteImage&&i.onPasteImage(...v))},null,42,ES),De("div",RS,[a.editedMessage._id?(me(),xe("div",{key:0,class:"vac-svg-button",onClick:t[17]||(t[17]=(...v)=>i.resetMessage&&i.resetMessage(...v))},[We(e.$slots,"edit-close-icon",{},()=>[Ge(c,{name:"close-outline"})])])):qe("",!0),n.showEmojis?oa((me(),xe("div",MS,[We(e.$slots,"emoji-picker",Gu({emojiOpened:a.emojiOpened},{addEmoji:i.addEmoji}),()=>[Ge(l,{"emoji-opened":a.emojiOpened,"position-top":!0,"emoji-data-source":n.emojiDataSource,onAddEmoji:i.addEmoji,onOpenEmoji:t[18]||(t[18]=v=>a.emojiOpened=v)},{"emoji-picker-icon":vt(()=>[We(e.$slots,"emoji-picker-icon")]),_:3},8,["emoji-opened","emoji-data-source","onAddEmoji"])])])),[[m,()=>a.emojiOpened=!1]]):qe("",!0),n.showFiles?(me(),xe("div",{key:2,class:"vac-svg-button",onClick:t[19]||(t[19]=(...v)=>i.launchFilePicker&&i.launchFilePicker(...v))},[We(e.$slots,"paperclip-icon",{},()=>[Ge(c,{name:"paperclip"})])])):qe("",!0),n.textareaActionEnabled?(me(),xe("div",{key:3,class:"vac-svg-button",onClick:t[20]||(t[20]=(...v)=>i.textareaActionHandler&&i.textareaActionHandler(...v))},[We(e.$slots,"custom-action-icon",{},()=>[Ge(c,{name:"deleted"})])])):qe("",!0),n.showFiles?(me(),xe("input",{key:4,ref:"file",type:"file",multiple:n.multipleFiles?!0:null,accept:n.acceptedFiles,capture:n.captureFiles,style:{display:"none"},onChange:t[21]||(t[21]=v=>i.onFileChange(v.target.files))},null,40,IS)):qe("",!0),n.showSendIcon?(me(),xe("div",{key:5,class:Mt(["vac-svg-button",{"vac-send-disabled":i.isMessageEmpty}]),onClick:t[22]||(t[22]=(...v)=>i.sendMessage&&i.sendMessage(...v))},[We(e.$slots,"send-icon",{},()=>[Ge(c,{name:"send",param:i.isMessageEmpty||i.isFileLoading?"disabled":""},null,8,["param"])])],2)):qe("",!0)])],2)],2)),[[_l,Object.keys(n.room).length&&n.showFooter]])}var LS=Jt(CS,[["render",BS]]);const OS={name:"MessageReply",components:{AudioPlayer:ud,SvgIcon:An,FormatMessage:jo},props:{message:{type:Object,required:!0},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},roomUsers:{type:Array,required:!0}},computed:{replyUsername(){const{senderId:e}=this.message.replyMessage,t=this.roomUsers.find(n=>n._id===e);return t?t.username:""},firstFile(){var e,t;return(t=(e=this.message.replyMessage)==null?void 0:e.files)!=null&&t.length?this.message.replyMessage.files[0]:{}},isAudio(){return kl(this.firstFile)},isImage(){return Oi(this.firstFile)},isVideo(){return Ho(this.firstFile)},isOtherFile(){var e;return((e=this.message.replyMessage.files)==null?void 0:e.length)&&!this.isAudio&&!this.isVideo&&!this.isImage}}},PS={class:"vac-reply-message"},$S={class:"vac-reply-username"},FS={key:0,class:"vac-image-reply-container"},DS={key:1,class:"vac-video-reply-container"},VS={controls:""},NS=["src"],jS={key:3,class:"vac-file-container"},HS={class:"vac-text-ellipsis"},zS={key:0,class:"vac-text-ellipsis vac-text-extension"},US={class:"vac-reply-content"};function qS(e,t,n,s,a,i){const o=mt("audio-player"),r=mt("svg-icon"),f=mt("format-message");return me(),xe("div",PS,[De("div",$S,yt(i.replyUsername),1),i.isImage?(me(),xe("div",FS,[De("div",{class:"vac-message-image vac-message-image-reply",style:nn({"background-image":`url('${i.firstFile.url}')`})},null,4)])):i.isVideo?(me(),xe("div",DS,[De("video",VS,[De("source",{src:i.firstFile.url},null,8,NS)])])):i.isAudio?(me(),Ht(o,{key:2,src:i.firstFile.url,"message-selection-enabled":!1,onUpdateProgressTime:t[0]||(t[0]=u=>e.progressTime=u),onHoverAudioProgress:t[1]||(t[1]=u=>e.hoverAudioProgress=u)},Wt({_:2},[Rt(e.$slots,(u,d)=>({name:d,fn:vt(c=>[We(e.$slots,d,qt(zt(c)))])}))]),1032,["src"])):i.isOtherFile?(me(),xe("div",jS,[De("div",null,[We(e.$slots,"file-icon",{},()=>[Ge(r,{name:"file"})])]),De("div",HS,yt(i.firstFile.name),1),i.firstFile.extension?(me(),xe("div",zS,yt(i.firstFile.extension),1)):qe("",!0)])):qe("",!0),De("div",US,[Ge(f,{"message-id":n.message.replyMessage._id,content:n.message.replyMessage.content,users:n.roomUsers,"text-formatting":n.textFormatting,"link-options":n.linkOptions,reply:!0},null,8,["message-id","content","users","text-formatting","link-options"])])])}var WS=Jt(OS,[["render",qS]]);const YS={name:"ProgressBar",props:{progress:{type:Number,default:0}},data(){return{radius:35,stroke:4,normalizedRadius:27,circumference:54*Math.PI}},computed:{strokeDashoffset(){return this.circumference-this.progress/100*this.circumference}}},KS={ref:"progress",class:"vac-progress-wrapper"},GS=["height","width"],XS=["stroke-dasharray","stroke-width","r","cx","cy"],ZS={class:"vac-progress-text"},QS=De("span",{class:"vac-progress-pourcent"},"%",-1);function JS(e,t,n,s,a,i){return me(),Ht(vn,{name:"vac-fade-spinner",appear:""},{default:vt(()=>[De("div",KS,[(me(),xe("svg",{height:a.radius*2,width:a.radius*2},[De("circle",{stroke:"rgba(255, 255, 255, 0.7)","stroke-dasharray":a.circumference+" "+a.circumference,style:nn({strokeDashoffset:i.strokeDashoffset,strokeLinecap:"round"}),"stroke-width":a.stroke,fill:"transparent",r:a.normalizedRadius,cx:a.radius,cy:a.radius},null,12,XS)],8,GS)),De("div",{class:"vac-progress-content",style:nn({height:a.radius*2-19+"px",width:a.radius*2-19+"px"})},[De("div",ZS,[ra(yt(n.progress),1),QS])],4)],512)]),_:1})}var Uh=Jt(YS,[["render",JS]]);const e8={name:"MessageFile",components:{SvgIcon:An,Loader:bl,ProgressBar:Uh},props:{currentUserId:{type:[String,Number],required:!0},message:{type:Object,required:!0},file:{type:Object,required:!0},index:{type:Number,required:!0},messageSelectionEnabled:{type:Boolean,required:!0}},emits:["open-file"],data(){return{imageResponsive:"",imageLoading:!1,imageHover:!1}},computed:{isImageLoading(){return this.file.url.indexOf("blob:http")!==-1||this.imageLoading},isImage(){return Oi(this.file)},isVideo(){return Ho(this.file)}},watch:{file:{immediate:!0,handler(){this.checkImgLoad()}}},mounted(){const e=this.$refs["imageRef"+this.index];e&&(this.imageResponsive={maxHeight:e.clientWidth-18,loaderTop:e.clientHeight/2-9})},methods:{checkImgLoad(){if(!Oi(this.file))return;this.imageLoading=!0;const e=new Image;e.src=this.file.url,e.addEventListener("load",()=>this.imageLoading=!1)},openFile(e,t){this.messageSelectionEnabled||(e.stopPropagation(),this.$emit("open-file",{file:this.file,action:t}))}}},t8={class:"vac-message-file-container"},n8={key:0,class:"vac-image-buttons"},s8={controls:""},a8=["src"];function i8(e,t,n,s,a,i){const o=mt("progress-bar"),r=mt("loader"),f=mt("svg-icon");return me(),xe("div",t8,[i.isImage?(me(),xe("div",{key:0,ref:"imageRef"+n.index,class:"vac-message-image-container",onMouseover:t[2]||(t[2]=u=>a.imageHover=!0),onMouseleave:t[3]||(t[3]=u=>a.imageHover=!1),onClick:t[4]||(t[4]=u=>i.openFile(u,"preview"))},[n.file.progress>=0?(me(),Ht(o,{key:0,progress:n.file.progress,style:nn({top:`${a.imageResponsive.loaderTop}px`})},null,8,["progress","style"])):(me(),Ht(r,{key:1,show:i.isImageLoading,type:"message-file","message-id":n.message._id,style:nn({top:`${a.imageResponsive.loaderTop}px`})},Wt({_:2},[Rt(e.$slots,(u,d)=>({name:d,fn:vt(c=>[We(e.$slots,d,qt(zt(c)))])}))]),1032,["show","message-id","style"])),De("div",{class:Mt(["vac-message-image",{"vac-blur-loading":i.isImageLoading&&n.message.senderId===n.currentUserId}]),style:nn({"background-image":`url('${i.isImageLoading&&n.file.preview||n.file.url}')`,"max-height":`${a.imageResponsive.maxHeight}px`})},[Ge(vn,{name:"vac-fade-image"},{default:vt(()=>[!n.messageSelectionEnabled&&a.imageHover&&!i.isImageLoading?(me(),xe("div",n8,[De("div",{class:"vac-svg-button vac-button-view",onClick:t[0]||(t[0]=u=>i.openFile(u,"preview"))},[We(e.$slots,"eye-icon_"+n.message._id,{},()=>[Ge(f,{name:"eye"})])]),De("div",{class:"vac-svg-button vac-button-download",onClick:t[1]||(t[1]=u=>i.openFile(u,"download"))},[We(e.$slots,"document-icon_"+n.message._id,{},()=>[Ge(f,{name:"document"})])])])):qe("",!0)]),_:3})],6)],544)):i.isVideo?(me(),xe("div",{key:1,class:"vac-video-container",onClick:t[5]||(t[5]=Ns(u=>i.openFile(u,"preview"),["prevent"]))},[n.file.progress>=0?(me(),Ht(o,{key:0,progress:n.file.progress},null,8,["progress"])):qe("",!0),De("video",s8,[De("source",{src:n.file.url},null,8,a8)])])):qe("",!0)])}var o8=Jt(e8,[["render",i8]]);const r8={name:"MessageFiles",components:{SvgIcon:An,FormatMessage:jo,ProgressBar:Uh,MessageFile:o8},props:{currentUserId:{type:[String,Number],required:!0},message:{type:Object,required:!0},roomUsers:{type:Array,required:!0},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},messageSelectionEnabled:{type:Boolean,required:!0}},emits:["open-file","open-user-tag"],computed:{imageVideoFiles(){return this.message.files.filter(e=>Hf(e))},otherFiles(){return this.message.files.filter(e=>!Hf(e))}},methods:{openFile(e,t,n){this.messageSelectionEnabled||(e.stopPropagation(),this.$emit("open-file",{file:t,action:n}))}}},l8={class:"vac-message-files-container"},c8=["onClick"],u8={class:"vac-svg-button"},d8={class:"vac-text-ellipsis"},f8={key:0,class:"vac-text-ellipsis vac-text-extension"};function m8(e,t,n,s,a,i){const o=mt("message-file"),r=mt("progress-bar"),f=mt("svg-icon"),u=mt("format-message");return me(),xe("div",l8,[(me(!0),xe(Lt,null,Rt(i.imageVideoFiles,(d,c)=>(me(),xe("div",{key:c+"iv"},[Ge(o,{file:d,"current-user-id":n.currentUserId,message:n.message,index:c,"message-selection-enabled":n.messageSelectionEnabled,onOpenFile:t[0]||(t[0]=l=>e.$emit("open-file",l))},Wt({_:2},[Rt(e.$slots,(l,m)=>({name:m,fn:vt(v=>[We(e.$slots,m,qt(zt(v)))])}))]),1032,["file","current-user-id","message","index","message-selection-enabled"])]))),128)),(me(!0),xe(Lt,null,Rt(i.otherFiles,(d,c)=>(me(),xe("div",{key:c+"a",class:"vac-file-wrapper"},[d.progress>=0?(me(),Ht(r,{key:0,progress:d.progress,style:{top:"44px"}},null,8,["progress"])):qe("",!0),De("div",{class:Mt(["vac-file-container",{"vac-file-container-progress":d.progress>=0}]),onClick:l=>i.openFile(l,d,"download")},[De("div",u8,[We(e.$slots,"document-icon",{},()=>[Ge(f,{name:"document"})])]),De("div",d8,yt(d.name),1),d.extension?(me(),xe("div",f8,yt(d.extension),1)):qe("",!0)],10,c8)]))),128)),Ge(u,{"message-id":n.message._id,content:n.message.content,users:n.roomUsers,"text-formatting":n.textFormatting,"link-options":n.linkOptions,onOpenUserTag:t[1]||(t[1]=d=>e.$emit("open-user-tag",d))},null,8,["message-id","content","users","text-formatting","link-options"])])}var v8=Jt(r8,[["render",m8]]);const h8={name:"MessageActions",components:{SvgIcon:An,EmojiPickerContainer:Oh},directives:{clickOutside:wl},props:{currentUserId:{type:[String,Number],required:!0},message:{type:Object,required:!0},messageActions:{type:Array,required:!0},showReactionEmojis:{type:Boolean,required:!0},messageHover:{type:Boolean,required:!0},hoverMessageId:{type:[String,Number],default:null},hoverAudioProgress:{type:Boolean,required:!0},emojiDataSource:{type:String,default:void 0}},emits:["update-emoji-opened","update-options-opened","update-message-hover","message-action-handler","send-message-reaction"],data(){return{menuOptionsTop:0,optionsOpened:!1,optionsClosing:!1,emojiOpened:!1}},computed:{isMessageActions(){return this.filteredMessageActions.length&&this.messageHover&&!this.message.deleted&&!this.message.disableActions&&!this.hoverAudioProgress},isMessageReactions(){return this.showReactionEmojis&&this.messageHover&&!this.message.deleted&&!this.message.disableReactions&&!this.hoverAudioProgress},filteredMessageActions(){return this.message.senderId===this.currentUserId?this.messageActions:this.messageActions.filter(e=>!e.onlyMe)}},watch:{emojiOpened(e){this.$emit("update-emoji-opened",e),e&&(this.optionsOpened=!1)},optionsOpened(e){this.$emit("update-options-opened",e)}},methods:{openOptions(){this.optionsClosing||(this.optionsOpened=!this.optionsOpened,this.optionsOpened&&setTimeout(()=>{const e=Lh(this.$el,"#room-footer");if(!e||!this.$refs.menuOptions||!this.$refs.actionIcon)return;const t=this.$refs.menuOptions.getBoundingClientRect().height,n=this.$refs.actionIcon.getBoundingClientRect().top;e.getBoundingClientRect().top-n>t+50?this.menuOptionsTop=30:this.menuOptionsTop=-t}))},closeOptions(){this.optionsOpened=!1,this.optionsClosing=!0,this.updateMessageHover(),setTimeout(()=>this.optionsClosing=!1,100)},openEmoji(){this.emojiOpened=!this.emojiOpened},closeEmoji(){this.emojiOpened=!1,this.updateMessageHover()},updateMessageHover(){this.hoverMessageId!==this.message._id&&this.$emit("update-message-hover",!1)},messageActionHandler(e){this.closeOptions(),this.$emit("message-action-handler",e)},sendMessageReaction(e,t){this.$emit("send-message-reaction",{emoji:e,reaction:t}),this.closeEmoji()}}},g8={class:"vac-message-actions-wrapper"},p8={key:"3"},_8={class:"vac-menu-list"},b8=["onClick"];function y8(e,t,n,s,a,i){const o=mt("svg-icon"),r=mt("emoji-picker-container"),f=hl("click-outside");return me(),xe("div",g8,[De("div",{class:"vac-options-container",style:nn({display:n.hoverAudioProgress?"none":"initial",width:i.filteredMessageActions.length&&n.showReactionEmojis?"70px":"45px"})},[Ge(Qu,{name:"vac-slide-left",tag:"span"},{default:vt(()=>[i.isMessageActions||i.isMessageReactions?(me(),xe("div",{key:"1",class:Mt(["vac-blur-container",{"vac-options-me":n.message.senderId===n.currentUserId}])},null,2)):qe("",!0),i.isMessageActions?(me(),xe("div",{ref:"actionIcon",key:"2",class:"vac-svg-button vac-message-options",onClick:t[0]||(t[0]=(...u)=>i.openOptions&&i.openOptions(...u))},[We(e.$slots,"dropdown-icon_"+n.message._id,{},()=>[Ge(o,{name:"dropdown",param:"message"})])],512)):qe("",!0),i.isMessageReactions?oa((me(),xe("div",p8,[We(e.$slots,"emoji-picker",Gu({emojiOpened:a.emojiOpened},{addEmoji:i.sendMessageReaction}),()=>[Ge(r,{class:"vac-message-emojis",style:nn({right:i.isMessageActions?"30px":"5px"}),"emoji-opened":a.emojiOpened,"emoji-reaction":!0,"position-right":n.message.senderId===n.currentUserId,"message-id":n.message._id,"emoji-data-source":n.emojiDataSource,onAddEmoji:i.sendMessageReaction,onOpenEmoji:i.openEmoji},Wt({_:2},[Rt(e.$slots,(u,d)=>({name:d,fn:vt(c=>[We(e.$slots,d,qt(zt(c)))])}))]),1032,["style","emoji-opened","position-right","message-id","emoji-data-source","onAddEmoji","onOpenEmoji"])])])),[[f,i.closeEmoji]]):qe("",!0)]),_:3})],4),i.filteredMessageActions.length?(me(),Ht(vn,{key:0,name:n.message.senderId===n.currentUserId?"vac-slide-left":"vac-slide-right"},{default:vt(()=>[a.optionsOpened?oa((me(),xe("div",{key:0,ref:"menuOptions",class:Mt(["vac-menu-options",{"vac-menu-left":n.message.senderId!==n.currentUserId}]),style:nn({top:`${a.menuOptionsTop}px`})},[De("div",_8,[(me(!0),xe(Lt,null,Rt(i.filteredMessageActions,u=>(me(),xe("div",{key:u.name},[De("div",{class:"vac-menu-item",onClick:d=>i.messageActionHandler(u)},yt(u.title),9,b8)]))),128))])],6)),[[f,i.closeOptions]]):qe("",!0)]),_:1},8,["name"])):qe("",!0)])}var w8=Jt(h8,[["render",y8]]);const k8={name:"MessageReactions",props:{currentUserId:{type:[String,Number],required:!0},message:{type:Object,required:!0}},emits:["send-message-reaction"],methods:{sendMessageReaction(e,t){this.$emit("send-message-reaction",{emoji:e,reaction:t})}}},S8=["onClick"];function C8(e,t,n,s,a,i){return n.message.deleted?qe("",!0):(me(),Ht(Qu,{key:0,name:"vac-slide-left",tag:"span"},{default:vt(()=>[(me(!0),xe(Lt,null,Rt(n.message.reactions,(o,r)=>oa((me(),xe("button",{key:r+0,class:Mt(["vac-button-reaction",{"vac-reaction-me":o.indexOf(n.currentUserId)!==-1}]),style:nn({float:n.message.senderId===n.currentUserId?"right":"left"}),onClick:f=>i.sendMessageReaction({unicode:r},o)},[ra(yt(r),1),De("span",null,yt(o.length),1)],14,S8)),[[_l,o.length]])),128))]),_:1}))}var A8=Jt(k8,[["render",C8]]);function T8(e){if(!((s,a)=>a.every(i=>{let o=!1;return(i.type[0]==="array"&&Array.isArray(s[i.key])||i.type.find(r=>r===typeof s[i.key]))&&(o=!0),o&&fd(s,i.key)}))(e,[{key:"roomId",type:["string","number"]},{key:"roomName",type:["string"]},{key:"users",type:["array"]}]))throw new Error("Rooms object is not valid! Must contain at least roomId[String, Number], roomName[String] and users[Array]")}function x8(e){if(!((s,a)=>a.every(i=>i.type.find(r=>r===typeof s[i.key])&&fd(s,i.key)))(e,[{key:"_id",type:["string","number"]},{key:"username",type:["string"]}]))throw new Error("Participants object is not valid! Must contain at least _id[String, Number] and username[String]")}function E8(e){if(!((s,a)=>a.every(i=>i.type.find(r=>r===typeof s[i.key])&&fd(s,i.key)))(e,[{key:"_id",type:["string","number"]},{key:"senderId",type:["string","number"]}]))throw new Error("Messages object is not valid! Must contain at least _id[String, Number] and senderId[String, Number]")}function fd(e,t){return Object.prototype.hasOwnProperty.call(e,t)&&e[t]!==null&&e[t]!==void 0}const R8={name:"RoomMessage",components:{SvgIcon:An,FormatMessage:jo,AudioPlayer:ud,MessageReply:WS,MessageFiles:v8,MessageActions:w8,MessageReactions:A8},props:{currentUserId:{type:[String,Number],required:!0},textMessages:{type:Object,required:!0},index:{type:Number,required:!0},message:{type:Object,required:!0},messages:{type:Array,required:!0},editedMessageId:{type:[String,Number],default:null},roomUsers:{type:Array,default:()=>[]},messageActions:{type:Array,required:!0},newMessages:{type:Array,default:()=>[]},showReactionEmojis:{type:Boolean,required:!0},showNewMessagesDivider:{type:Boolean,required:!0},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},usernameOptions:{type:Object,required:!0},messageSelectionEnabled:{type:Boolean,required:!0},selectedMessages:{type:Array,default:()=>[]},emojiDataSource:{type:String,default:void 0}},emits:["message-added","open-file","open-user-tag","open-failed-message","message-action-handler","send-message-reaction","select-message","unselect-message"],data(){return{hoverMessageId:null,messageHover:!1,optionsOpened:!1,emojiOpened:!1,newMessage:{},progressTime:"- : -",hoverAudioProgress:!1}},computed:{showUsername(){return!this.usernameOptions.currentUser&&this.message.senderId===this.currentUserId?!1:this.roomUsers.length>=this.usernameOptions.minUsers},showDate(){return this.index>0&&this.message.date!==this.messages[this.index-1].date},messageOffset(){return this.index>0&&this.message.senderId!==this.messages[this.index-1].senderId},isMessageHover(){return this.editedMessageId===this.message._id||this.hoverMessageId===this.message._id},isAudio(){var e;return(e=this.message.files)==null?void 0:e.some(t=>kl(t))},isCheckmarkVisible(){return this.message.senderId===this.currentUserId&&!this.message.deleted&&(this.message.saved||this.message.distributed||this.message.seen)},hasCurrentUserAvatar(){return this.messages.some(e=>e.senderId===this.currentUserId&&e.avatar)},hasSenderUserAvatar(){return this.messages.some(e=>e.senderId!==this.currentUserId&&e.avatar)},isMessageSelected(){return this.messageSelectionEnabled&&!!this.selectedMessages.find(e=>e._id===this.message._id)}},watch:{newMessages:{immediate:!0,deep:!0,handler(e){if(!e.length||!this.showNewMessagesDivider){this.newMessage={};return}this.newMessage=e.reduce((t,n)=>n.index<t.index?n:t)}},messageSelectionEnabled(){this.resetMessageHover()}},mounted(){E8(this.message),this.$emit("message-added",{message:this.message,index:this.index,ref:this.$refs.message})},methods:{onHoverMessage(){this.messageSelectionEnabled||(this.messageHover=!0,this.canEditMessage()&&(this.hoverMessageId=this.message._id))},canEditMessage(){return!this.message.deleted},onLeaveMessage(){this.messageSelectionEnabled||(!this.optionsOpened&&!this.emojiOpened&&(this.messageHover=!1),this.hoverMessageId=null)},resetMessageHover(){this.messageHover=!1,this.hoverMessageId=null},openFile(e){this.$emit("open-file",{message:this.message,file:e})},openUserTag(e){this.$emit("open-user-tag",{user:e})},messageActionHandler(e){this.resetMessageHover(),setTimeout(()=>{this.$emit("message-action-handler",{action:e,message:this.message})},300)},sendMessageReaction({emoji:e,reaction:t}){this.$emit("send-message-reaction",{messageId:this.message._id,reaction:e,remove:t&&t.indexOf(this.currentUserId)!==-1}),this.messageHover=!1},selectMessage(){this.messageSelectionEnabled&&(this.isMessageSelected?this.$emit("unselect-message",this.message._id):this.$emit("select-message",this.message))}}},M8=["id"],I8={key:0,class:"vac-card-info vac-card-date"},B8={key:1,class:"vac-line-new"},L8={key:2,class:"vac-card-info vac-card-system"},O8={key:1,class:"vac-avatar-offset"},P8={key:0,class:"vac-progress-time"},$8={class:"vac-text-timestamp"},F8={key:0,class:"vac-icon-edited"},D8={key:1},V8=De("div",{class:"vac-failure-text"},"!",-1),N8=[V8],j8={key:3,class:"vac-avatar-current-offset"};function H8(e,t,n,s,a,i){const o=mt("format-message"),r=mt("message-reply"),f=mt("message-files"),u=mt("audio-player"),d=mt("svg-icon"),c=mt("message-actions"),l=mt("message-reactions");return me(),xe("div",{id:n.message._id,ref:"message",class:"vac-message-wrapper"},[i.showDate?(me(),xe("div",I8,yt(n.message.date),1)):qe("",!0),a.newMessage._id===n.message._id?(me(),xe("div",B8,yt(n.textMessages.NEW_MESSAGES),1)):qe("",!0),n.message.system?(me(),xe("div",L8,[We(e.$slots,"message_"+n.message._id,{},()=>[Ge(o,{"message-id":n.message._id,content:n.message.content,deleted:!!n.message.deleted,users:n.roomUsers,"text-messages":n.textMessages,"text-formatting":n.textFormatting,"link-options":n.linkOptions,onOpenUserTag:i.openUserTag},Wt({_:2},[Rt(e.$slots,(m,v)=>({name:v,fn:vt(C=>[We(e.$slots,v,qt(zt(C)))])}))]),1032,["message-id","content","deleted","users","text-messages","text-formatting","link-options","onOpenUserTag"])])])):(me(),xe("div",{key:3,class:Mt(["vac-message-box",{"vac-offset-current":n.message.senderId===n.currentUserId}]),onClick:t[8]||(t[8]=(...m)=>i.selectMessage&&i.selectMessage(...m))},[We(e.$slots,"message_"+n.message._id,{},()=>[n.message.senderId!==n.currentUserId?We(e.$slots,"message-avatar_"+n.message._id,{key:0},()=>[n.message.avatar?(me(),xe("div",{key:0,class:"vac-avatar",style:nn({"background-image":`url('${n.message.avatar}')`})},null,4)):qe("",!0)]):qe("",!0),i.hasSenderUserAvatar&&!n.message.avatar?(me(),xe("div",O8)):qe("",!0),De("div",{class:Mt(["vac-message-container",{"vac-message-container-offset":i.messageOffset}])},[De("div",{class:Mt(["vac-message-card",{"vac-message-highlight":i.isMessageHover,"vac-message-current":n.message.senderId===n.currentUserId,"vac-message-deleted":n.message.deleted,"vac-item-clickable":n.messageSelectionEnabled,"vac-message-selected":i.isMessageSelected}]),onMouseover:t[5]||(t[5]=(...m)=>i.onHoverMessage&&i.onHoverMessage(...m)),onMouseleave:t[6]||(t[6]=(...m)=>i.onLeaveMessage&&i.onLeaveMessage(...m))},[i.showUsername?(me(),xe("div",{key:0,class:Mt(["vac-text-username",{"vac-username-reply":!n.message.deleted&&n.message.replyMessage}])},[De("span",null,yt(n.message.username),1)],2)):qe("",!0),!n.message.deleted&&n.message.replyMessage?(me(),Ht(r,{key:1,message:n.message,"room-users":n.roomUsers,"text-formatting":n.textFormatting,"link-options":n.linkOptions},Wt({_:2},[Rt(e.$slots,(m,v)=>({name:v,fn:vt(C=>[We(e.$slots,v,qt(zt(C)))])}))]),1032,["message","room-users","text-formatting","link-options"])):qe("",!0),n.message.deleted||!n.message.files||!n.message.files.length?(me(),Ht(o,{key:2,"message-id":n.message._id,content:n.message.content,deleted:!!n.message.deleted,users:n.roomUsers,"text-formatting":n.textFormatting,"text-messages":n.textMessages,"link-options":n.linkOptions,onOpenUserTag:i.openUserTag},Wt({_:2},[Rt(e.$slots,(m,v)=>({name:v,fn:vt(C=>[We(e.$slots,v,qt(zt(C)))])}))]),1032,["message-id","content","deleted","users","text-formatting","text-messages","link-options","onOpenUserTag"])):!i.isAudio||n.message.files.length>1?(me(),Ht(f,{key:3,"current-user-id":n.currentUserId,message:n.message,"room-users":n.roomUsers,"text-formatting":n.textFormatting,"link-options":n.linkOptions,"message-selection-enabled":n.messageSelectionEnabled,onOpenFile:i.openFile,onOpenUserTag:i.openUserTag},Wt({_:2},[Rt(e.$slots,(m,v)=>({name:v,fn:vt(C=>[We(e.$slots,v,qt(zt(C)))])}))]),1032,["current-user-id","message","room-users","text-formatting","link-options","message-selection-enabled","onOpenFile","onOpenUserTag"])):(me(),xe(Lt,{key:4},[Ge(u,{"message-id":n.message._id,src:n.message.files[0].url,"message-selection-enabled":n.messageSelectionEnabled,onUpdateProgressTime:t[0]||(t[0]=m=>a.progressTime=m),onHoverAudioProgress:t[1]||(t[1]=m=>a.hoverAudioProgress=m)},Wt({_:2},[Rt(e.$slots,(m,v)=>({name:v,fn:vt(C=>[We(e.$slots,v,qt(zt(C)))])}))]),1032,["message-id","src","message-selection-enabled"]),n.message.deleted?qe("",!0):(me(),xe("div",P8,yt(a.progressTime),1))],64)),De("div",$8,[n.message.edited&&!n.message.deleted?(me(),xe("div",F8,[We(e.$slots,"pencil-icon_"+n.message._id,{},()=>[Ge(d,{name:"pencil"})])])):qe("",!0),De("span",null,yt(n.message.timestamp),1),i.isCheckmarkVisible?(me(),xe("span",D8,[We(e.$slots,"checkmark-icon_"+n.message._id,{},()=>[Ge(d,{name:n.message.distributed?"double-checkmark":"checkmark",param:n.message.seen?"seen":"",class:"vac-icon-check"},null,8,["name","param"])])])):qe("",!0)]),Ge(c,{"current-user-id":n.currentUserId,message:n.message,"message-actions":n.messageActions,"show-reaction-emojis":n.showReactionEmojis,"message-hover":a.messageHover,"hover-message-id":a.hoverMessageId,"hover-audio-progress":a.hoverAudioProgress,"emoji-data-source":n.emojiDataSource,onUpdateMessageHover:t[2]||(t[2]=m=>a.messageHover=m),onUpdateOptionsOpened:t[3]||(t[3]=m=>a.optionsOpened=m),onUpdateEmojiOpened:t[4]||(t[4]=m=>a.emojiOpened=m),onMessageActionHandler:i.messageActionHandler,onSendMessageReaction:i.sendMessageReaction},Wt({_:2},[Rt(e.$slots,(m,v)=>({name:v,fn:vt(C=>[We(e.$slots,v,qt(zt(C)))])}))]),1032,["current-user-id","message","message-actions","show-reaction-emojis","message-hover","hover-message-id","hover-audio-progress","emoji-data-source","onMessageActionHandler","onSendMessageReaction"])],34),Ge(l,{"current-user-id":n.currentUserId,message:n.message,onSendMessageReaction:i.sendMessageReaction},null,8,["current-user-id","message","onSendMessageReaction"])],2),We(e.$slots,"message-failure_"+n.message._id,{},()=>[n.message.failure&&n.message.senderId===n.currentUserId?(me(),xe("div",{key:0,class:Mt(["vac-failure-container vac-svg-button",{"vac-failure-container-avatar":n.message.avatar&&n.message.senderId===n.currentUserId}]),onClick:t[7]||(t[7]=m=>e.$emit("open-failed-message",{message:n.message}))},N8,2)):qe("",!0)]),n.message.senderId===n.currentUserId?We(e.$slots,"message-avatar_"+n.message._id,{key:2},()=>[n.message.avatar?(me(),xe("div",{key:0,class:"vac-avatar vac-avatar-current",style:nn({"background-image":`url('${n.message.avatar}')`})},null,4)):qe("",!0)]):qe("",!0),i.hasCurrentUserAvatar&&!n.message.avatar?(me(),xe("div",j8)):qe("",!0)])],2))],8,M8)}var z8=Jt(R8,[["render",H8]]);const U8={name:"ChatRoom",components:{Loader:bl,SvgIcon:An,RoomHeader:P5,RoomFooter:LS,RoomMessage:z8},props:{currentUserId:{type:[String,Number],required:!0},textMessages:{type:Object,required:!0},singleRoom:{type:Boolean,required:!0},showRoomsList:{type:Boolean,required:!0},isMobile:{type:Boolean,required:!0},rooms:{type:Array,required:!0},roomId:{type:[String,Number],required:!0},loadFirstRoom:{type:Boolean,required:!0},messages:{type:Array,required:!0},roomMessage:{type:String,default:null},messagesLoaded:{type:Boolean,required:!0},menuActions:{type:Array,required:!0},messageActions:{type:Array,required:!0},messageSelectionActions:{type:Array,required:!0},autoScroll:{type:Object,required:!0},showSendIcon:{type:Boolean,required:!0},showFiles:{type:Boolean,required:!0},showAudio:{type:Boolean,required:!0},audioBitRate:{type:Number,required:!0},audioSampleRate:{type:Number,required:!0},showEmojis:{type:Boolean,required:!0},showReactionEmojis:{type:Boolean,required:!0},showNewMessagesDivider:{type:Boolean,required:!0},showFooter:{type:Boolean,required:!0},acceptedFiles:{type:String,required:!0},captureFiles:{type:String,required:!0},multipleFiles:{type:Boolean,default:!0},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},loadingRooms:{type:Boolean,required:!0},roomInfoEnabled:{type:Boolean,required:!0},textareaActionEnabled:{type:Boolean,required:!0},textareaAutoFocus:{type:Boolean,required:!0},userTagsEnabled:{type:Boolean,required:!0},emojisSuggestionEnabled:{type:Boolean,required:!0},scrollDistance:{type:Number,required:!0},templatesText:{type:Array,default:null},usernameOptions:{type:Object,required:!0},emojiDataSource:{type:String,default:void 0}},emits:["toggle-rooms-list","room-info","menu-action-handler","message-selection-action-handler","edit-message","send-message","delete-message","message-action-handler","fetch-messages","send-message-reaction","typing-message","open-file","open-user-tag","open-failed-message","textarea-action-handler"],data(){return{editedMessageId:null,initReplyMessage:null,initEditMessage:null,loadingMessages:!1,observer:null,showLoader:!0,loadingMoreMessages:!1,scrollIcon:!1,scrollMessagesCount:0,newMessages:[],messageSelectionEnabled:!1,selectedMessages:[],droppedFiles:[]}},computed:{room(){return this.rooms.find(e=>e.roomId===this.roomId)||{}},showNoMessages(){return this.roomId&&!this.messages.length&&!this.loadingMessages&&!this.loadingRooms},showNoRoom(){const e=!this.rooms.length&&!this.loadingRooms||!this.roomId&&!this.loadFirstRoom;return e&&this.updateLoadingMessages(!1),e},showMessagesStarted(){return this.messages.length&&this.messagesLoaded}},watch:{roomId:{immediate:!0,handler(){this.onRoomChanged()}},messages:{deep:!0,handler(e,t){e.forEach((n,s)=>{this.showNewMessagesDivider&&!n.seen&&n.senderId!==this.currentUserId&&this.newMessages.push({_id:n._id,index:s})}),t?.length===e?.length-1&&(this.newMessages=[]),setTimeout(()=>this.loadingMoreMessages=!1)}},messagesLoaded(e){e&&this.updateLoadingMessages(!1)}},mounted(){this.newMessages=[]},methods:{updateLoadingMessages(e){this.loadingMessages=e,e||setTimeout(()=>this.initIntersectionObserver())},initIntersectionObserver(){this.observer&&(this.showLoader=!0,this.observer.disconnect());const e=this.$el.querySelector("#infinite-loader-messages");if(e){const t={root:this.$el.querySelector("#messages-list"),rootMargin:`${this.scrollDistance}px`,threshold:0};this.observer=new IntersectionObserver(n=>{n[0].isIntersecting&&this.loadMoreMessages()},t),this.observer.observe(e)}},preventTopScroll(){const e=this.$refs.scrollContainer,t=e.scrollHeight,n=new ResizeObserver(a=>{e.scrollHeight!==t&&this.$refs.scrollContainer&&(this.$refs.scrollContainer.scrollTo({top:e.scrollHeight-t}),n.disconnect())});for(var s=0;s<e.children.length;s++)n.observe(e.children[s])},touchStart(e){if(!this.singleRoom&&e.changedTouches.length===1){const t=e.changedTouches[0].clientX,n=e.changedTouches[0].clientY;addEventListener("touchend",s=>this.touchEnd(s,t,n),{once:!0})}},touchEnd(e,t,n){if(e.changedTouches.length===1){const s=e.changedTouches[0].clientX,a=e.changedTouches[0].clientY,i=s-t>100,o=Math.abs(a-n)>50;i&&!o&&this.$emit("toggle-rooms-list")}},onRoomChanged(){this.updateLoadingMessages(!0),this.scrollIcon=!1,this.scrollMessagesCount=0,this.resetMessageSelection();const e=this.$watch(()=>this.messages,t=>{if(!t||!t.length)return;const n=this.$refs.scrollContainer;n&&(e(),setTimeout(()=>{n.scrollTo({top:n.scrollHeight}),this.updateLoadingMessages(!1)}))})},resetMessageSelection(){this.messageSelectionEnabled=!1,this.selectedMessages=[]},selectMessage(e){this.selectedMessages.push(e)},unselectMessage(e){this.selectedMessages=this.selectedMessages.filter(t=>t._id!==e)},onMessageAdded({message:e,index:t,ref:n}){if(t!==this.messages.length-1)return;const s=n.offsetHeight+60;setTimeout(()=>{const a=this.$refs.scrollContainer;let i=!1;a&&(i=this.getBottomScroll(a)>s),e.senderId===this.currentUserId?i?this.autoScroll.send.newAfterScrollUp&&this.scrollToBottom():this.autoScroll.send.new&&this.scrollToBottom():i?this.autoScroll.receive.newAfterScrollUp?this.scrollToBottom():(this.scrollIcon=!0,this.scrollMessagesCount++):this.autoScroll.receive.new?this.scrollToBottom():(this.scrollIcon=!0,this.scrollMessagesCount++)})},onContainerScroll(e){if(!e.target)return;const t=this.getBottomScroll(e.target);t<60&&(this.scrollMessagesCount=0),this.scrollIcon=t>500||this.scrollMessagesCount},loadMoreMessages(){this.loadingMessages||setTimeout(()=>{if(!this.loadingMoreMessages){if(this.messagesLoaded||!this.roomId){this.loadingMoreMessages=!1,this.showLoader=!1;return}this.preventTopScroll(),this.$emit("fetch-messages"),this.loadingMoreMessages=!0}},500)},messageActionHandler({action:e,message:t}){switch(e.name){case"replyMessage":this.initReplyMessage=t,setTimeout(()=>{this.initReplyMessage=null});return;case"editMessage":this.initEditMessage=t,setTimeout(()=>{this.initEditMessage=null});return;case"deleteMessage":return this.$emit("delete-message",t);case"selectMessages":this.selectedMessages=[t],this.messageSelectionEnabled=!0;return;default:return this.$emit("message-action-handler",{action:e,message:t})}},messageSelectionActionHandler(e){this.$emit("message-selection-action-handler",{action:e,messages:this.selectedMessages}),this.resetMessageSelection()},sendMessageReaction(e){this.$emit("send-message-reaction",e)},getBottomScroll(e){const{scrollHeight:t,clientHeight:n,scrollTop:s}=e;return t-n-s},scrollToBottom(){setTimeout(()=>{const e=this.$refs.scrollContainer;e&&(e.classList.add("vac-scroll-smooth"),e.scrollTo({top:e.scrollHeight,behavior:"smooth"}),setTimeout(()=>e.classList.remove("vac-scroll-smooth")))},50)},openFile({message:e,file:t}){this.$emit("open-file",{message:e,file:t})},openUserTag(e){this.$emit("open-user-tag",e)},onDropFiles(e){this.showFiles&&(this.droppedFiles=e.dataTransfer.files)}}},q8={class:"vac-container-center vac-room-empty"},W8={class:"vac-messages-container"},Y8={key:0,class:"vac-text-started"},K8={key:1,class:"vac-text-started"},G8={key:0,id:"infinite-loader-messages"},X8={key:2},Z8={key:0,class:"vac-badge-counter vac-messages-count"};function Q8(e,t,n,s,a,i){const o=mt("room-header"),r=mt("loader"),f=mt("room-message"),u=mt("svg-icon"),d=mt("room-footer");return oa((me(),xe("div",{class:"vac-col-messages",onDrop:t[12]||(t[12]=Ns((...c)=>i.onDropFiles&&i.onDropFiles(...c),["prevent"])),onDragenter:t[13]||(t[13]=Ns(()=>{},["prevent"])),onDragover:t[14]||(t[14]=Ns(()=>{},["prevent"])),onDragleave:t[15]||(t[15]=Ns(()=>{},["prevent"])),onTouchstart:t[16]||(t[16]=(...c)=>i.touchStart&&i.touchStart(...c))},[i.showNoRoom?We(e.$slots,"no-room-selected",{key:0},()=>[De("div",q8,[De("div",null,yt(n.textMessages.ROOM_EMPTY),1)])]):(me(),Ht(o,{key:1,"current-user-id":n.currentUserId,"text-messages":n.textMessages,"single-room":n.singleRoom,"show-rooms-list":n.showRoomsList,"is-mobile":n.isMobile,"room-info-enabled":n.roomInfoEnabled,"menu-actions":n.menuActions,room:i.room,"message-selection-enabled":a.messageSelectionEnabled,"message-selection-actions":n.messageSelectionActions,"selected-messages-total":a.selectedMessages.length,onToggleRoomsList:t[0]||(t[0]=c=>e.$emit("toggle-rooms-list")),onRoomInfo:t[1]||(t[1]=c=>e.$emit("room-info")),onMenuActionHandler:t[2]||(t[2]=c=>e.$emit("menu-action-handler",c)),onMessageSelectionActionHandler:i.messageSelectionActionHandler,onCancelMessageSelection:t[3]||(t[3]=c=>a.messageSelectionEnabled=!1)},Wt({_:2},[Rt(e.$slots,(c,l)=>({name:l,fn:vt(m=>[We(e.$slots,l,qt(zt(m)))])}))]),1032,["current-user-id","text-messages","single-room","show-rooms-list","is-mobile","room-info-enabled","menu-actions","room","message-selection-enabled","message-selection-actions","selected-messages-total","onMessageSelectionActionHandler"])),De("div",{id:"messages-list",ref:"scrollContainer",class:"vac-container-scroll",onScroll:t[5]||(t[5]=(...c)=>i.onContainerScroll&&i.onContainerScroll(...c))},[Ge(r,{show:a.loadingMessages,type:"messages"},Wt({_:2},[Rt(e.$slots,(c,l)=>({name:l,fn:vt(m=>[We(e.$slots,l,qt(zt(m)))])}))]),1032,["show"]),De("div",W8,[De("div",{class:Mt({"vac-messages-hidden":a.loadingMessages})},[Ge(vn,{name:"vac-fade-message"},{default:vt(()=>[De("div",null,[i.showNoMessages?(me(),xe("div",Y8,[We(e.$slots,"messages-empty",{},()=>[ra(yt(n.textMessages.MESSAGES_EMPTY),1)])])):qe("",!0),i.showMessagesStarted?(me(),xe("div",K8,yt(n.textMessages.CONVERSATION_STARTED)+" "+yt(n.messages[0].date),1)):qe("",!0)])]),_:3}),n.messages.length&&!n.messagesLoaded?(me(),xe("div",G8,[Ge(r,{show:!0,infinite:!0,type:"infinite-messages"},Wt({_:2},[Rt(e.$slots,(c,l)=>({name:l,fn:vt(m=>[We(e.$slots,l,qt(zt(m)))])}))]),1024)])):qe("",!0),(me(),Ht(Qu,{key:n.roomId,name:"vac-fade-message",tag:"span"},{default:vt(()=>[(me(!0),xe(Lt,null,Rt(n.messages,(c,l)=>(me(),xe("div",{key:c.indexId||c._id},[Ge(f,{"current-user-id":n.currentUserId,message:c,index:l,messages:n.messages,"edited-message-id":a.editedMessageId,"message-actions":n.messageActions,"room-users":i.room.users,"text-messages":n.textMessages,"new-messages":a.newMessages,"show-reaction-emojis":n.showReactionEmojis,"show-new-messages-divider":n.showNewMessagesDivider,"text-formatting":n.textFormatting,"link-options":n.linkOptions,"username-options":n.usernameOptions,"message-selection-enabled":a.messageSelectionEnabled,"selected-messages":a.selectedMessages,"emoji-data-source":n.emojiDataSource,onMessageAdded:i.onMessageAdded,onMessageActionHandler:i.messageActionHandler,onOpenFile:i.openFile,onOpenUserTag:i.openUserTag,onOpenFailedMessage:t[4]||(t[4]=m=>e.$emit("open-failed-message",m)),onSendMessageReaction:i.sendMessageReaction,onSelectMessage:i.selectMessage,onUnselectMessage:i.unselectMessage},Wt({_:2},[Rt(e.$slots,(m,v)=>({name:v,fn:vt(C=>[We(e.$slots,v,qt(zt(C)))])}))]),1032,["current-user-id","message","index","messages","edited-message-id","message-actions","room-users","text-messages","new-messages","show-reaction-emojis","show-new-messages-divider","text-formatting","link-options","username-options","message-selection-enabled","selected-messages","emoji-data-source","onMessageAdded","onMessageActionHandler","onOpenFile","onOpenUserTag","onSendMessageReaction","onSelectMessage","onUnselectMessage"])]))),128))]),_:3}))],2)])],544),a.loadingMessages?qe("",!0):(me(),xe("div",X8,[Ge(vn,{name:"vac-bounce"},{default:vt(()=>[a.scrollIcon?(me(),xe("div",{key:0,class:"vac-icon-scroll",onClick:t[6]||(t[6]=(...c)=>i.scrollToBottom&&i.scrollToBottom(...c))},[Ge(vn,{name:"vac-bounce"},{default:vt(()=>[a.scrollMessagesCount?(me(),xe("div",Z8,yt(a.scrollMessagesCount),1)):qe("",!0)]),_:1}),We(e.$slots,"scroll-icon",{},()=>[Ge(u,{name:"dropdown",param:"scroll"})])])):qe("",!0)]),_:3})])),Ge(d,{room:i.room,"room-id":n.roomId,"room-message":n.roomMessage,"text-messages":n.textMessages,"show-send-icon":n.showSendIcon,"show-files":n.showFiles,"show-audio":n.showAudio,"show-emojis":n.showEmojis,"show-footer":n.showFooter,"accepted-files":n.acceptedFiles,"capture-files":n.captureFiles,"multiple-files":n.multipleFiles,"textarea-action-enabled":n.textareaActionEnabled,"textarea-auto-focus":n.textareaAutoFocus,"user-tags-enabled":n.userTagsEnabled,"emojis-suggestion-enabled":n.emojisSuggestionEnabled,"templates-text":n.templatesText,"text-formatting":n.textFormatting,"link-options":n.linkOptions,"audio-bit-rate":n.audioBitRate,"audio-sample-rate":n.audioSampleRate,"init-reply-message":a.initReplyMessage,"init-edit-message":a.initEditMessage,"dropped-files":a.droppedFiles,"emoji-data-source":n.emojiDataSource,onUpdateEditedMessageId:t[7]||(t[7]=c=>a.editedMessageId=c),onEditMessage:t[8]||(t[8]=c=>e.$emit("edit-message",c)),onSendMessage:t[9]||(t[9]=c=>e.$emit("send-message",c)),onTypingMessage:t[10]||(t[10]=c=>e.$emit("typing-message",c)),onTextareaActionHandler:t[11]||(t[11]=c=>e.$emit("textarea-action-handler",c))},Wt({_:2},[Rt(e.$slots,(c,l)=>({name:l,fn:vt(m=>[We(e.$slots,l,qt(zt(m)))])}))]),1032,["room","room-id","room-message","text-messages","show-send-icon","show-files","show-audio","show-emojis","show-footer","accepted-files","capture-files","multiple-files","textarea-action-enabled","textarea-auto-focus","user-tags-enabled","emojis-suggestion-enabled","templates-text","text-formatting","link-options","audio-bit-rate","audio-sample-rate","init-reply-message","init-edit-message","dropped-files","emoji-data-source"])],544)),[[_l,n.isMobile&&!n.showRoomsList||!n.isMobile||n.singleRoom]])}var J8=Jt(U8,[["render",Q8]]);const e6={name:"MediaPreview",components:{SvgIcon:An},props:{file:{type:Object,required:!0}},emits:["close-media-preview"],computed:{isImage(){return Oi(this.file)},isVideo(){return Ho(this.file)}},mounted(){this.$refs.modal.focus()},methods:{closeModal(){this.$emit("close-media-preview")}}},t6={key:0,class:"vac-media-preview-container"},n6={key:1,class:"vac-media-preview-container"},s6={controls:"",autoplay:""},a6=["src"],i6={class:"vac-svg-button"};function o6(e,t,n,s,a,i){const o=mt("svg-icon");return me(),xe("div",{ref:"modal",tabindex:"0",class:"vac-media-preview",onClick:t[0]||(t[0]=Ns((...r)=>i.closeModal&&i.closeModal(...r),["stop"])),onKeydown:t[1]||(t[1]=ei((...r)=>i.closeModal&&i.closeModal(...r),["esc"]))},[Ge(vn,{name:"vac-bounce-preview",appear:""},{default:vt(()=>[i.isImage?(me(),xe("div",t6,[De("div",{class:"vac-image-preview",style:nn({"background-image":`url('${n.file.url}')`})},null,4)])):i.isVideo?(me(),xe("div",n6,[De("video",s6,[De("source",{src:n.file.url},null,8,a6)])])):qe("",!0)]),_:1}),De("div",i6,[We(e.$slots,"preview-close-icon",{},()=>[Ge(o,{name:"close-outline",param:"preview"})])])],544)}var r6=Jt(e6,[["render",o6]]),l6={ROOMS_EMPTY:"No rooms",ROOM_EMPTY:"No room selected",NEW_MESSAGES:"New Messages",MESSAGE_DELETED:"This message was deleted",MESSAGES_EMPTY:"No messages",CONVERSATION_STARTED:"Conversation started on:",TYPE_MESSAGE:"Type message",SEARCH:"Search",IS_ONLINE:"is online",LAST_SEEN:"last seen ",IS_TYPING:"is writing...",CANCEL_SELECT_MESSAGE:"Cancel"};const c6={light:{general:{color:"#0a0a0a",colorButtonClear:"#1976d2",colorButton:"#fff",backgroundColorButton:"#1976d2",backgroundInput:"#fff",colorPlaceholder:"#9ca6af",colorCaret:"#1976d2",colorSpinner:"#333",borderStyle:"1px solid #e1e4e8",backgroundScrollIcon:"#fff"},container:{border:"none",borderRadius:"4px",boxShadow:"0px 1px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)"},header:{background:"#fff",colorRoomName:"#0a0a0a",colorRoomInfo:"#9ca6af",position:"absolute",width:"100%"},footer:{background:"#f8f9fa",borderStyleInput:"1px solid #e1e4e8",borderInputSelected:"#1976d2",backgroundReply:"#e5e5e6",backgroundTagActive:"#e5e5e6",backgroundTag:"#f8f9fa"},content:{background:"#f8f9fa"},sidemenu:{background:"#fff",backgroundHover:"#f6f6f6",backgroundActive:"#e5effa",colorActive:"#1976d2",borderColorSearch:"#e1e5e8"},dropdown:{background:"#fff",backgroundHover:"#f6f6f6"},message:{background:"#fff",backgroundMe:"#ccf2cf",color:"#0a0a0a",colorStarted:"#9ca6af",backgroundDeleted:"#dadfe2",backgroundSelected:"#c2dcf2",colorDeleted:"#757e85",colorUsername:"#9ca6af",colorTimestamp:"#828c94",backgroundDate:"#e5effa",colorDate:"#505a62",backgroundSystem:"#e5effa",colorSystem:"#505a62",backgroundMedia:"rgba(0, 0, 0, 0.15)",backgroundReply:"rgba(0, 0, 0, 0.08)",colorReplyUsername:"#0a0a0a",colorReply:"#6e6e6e",colorTag:"#0d579c",backgroundImage:"#ddd",colorNewMessages:"#1976d2",backgroundScrollCounter:"#0696c7",colorScrollCounter:"#fff",backgroundReaction:"#eee",borderStyleReaction:"1px solid #eee",backgroundReactionHover:"#fff",borderStyleReactionHover:"1px solid #ddd",colorReactionCounter:"#0a0a0a",backgroundReactionMe:"#cfecf5",borderStyleReactionMe:"1px solid #3b98b8",backgroundReactionHoverMe:"#cfecf5",borderStyleReactionHoverMe:"1px solid #3b98b8",colorReactionCounterMe:"#0b59b3",backgroundAudioRecord:"#eb4034",backgroundAudioLine:"rgba(0, 0, 0, 0.15)",backgroundAudioProgress:"#455247",backgroundAudioProgressSelector:"#455247",colorFileExtension:"#757e85"},markdown:{background:"rgba(239, 239, 239, 0.7)",border:"rgba(212, 212, 212, 0.9)",color:"#e01e5a",colorMulti:"#0a0a0a"},room:{colorUsername:"#0a0a0a",colorMessage:"#67717a",colorTimestamp:"#a2aeb8",colorStateOnline:"#4caf50",colorStateOffline:"#9ca6af",backgroundCounterBadge:"#0696c7",colorCounterBadge:"#fff"},emoji:{background:"#fff"},icons:{search:"#9ca6af",add:"#1976d2",toggle:"#0a0a0a",menu:"#0a0a0a",close:"#9ca6af",closeImage:"#fff",file:"#1976d2",paperclip:"#1976d2",closeOutline:"#000",closePreview:"#fff",send:"#1976d2",sendDisabled:"#9ca6af",emoji:"#1976d2",emojiReaction:"rgba(0, 0, 0, 0.3)",document:"#1976d2",pencil:"#9e9e9e",checkmark:"#9e9e9e",checkmarkSeen:"#0696c7",eye:"#fff",dropdownMessage:"#fff",dropdownMessageBackground:"rgba(0, 0, 0, 0.25)",dropdownRoom:"#9e9e9e",dropdownScroll:"#0a0a0a",microphone:"#1976d2",audioPlay:"#455247",audioPause:"#455247",audioCancel:"#eb4034",audioConfirm:"#1ba65b"}},dark:{general:{color:"#fff",colorButtonClear:"#fff",colorButton:"#fff",backgroundColorButton:"#1976d2",backgroundInput:"#202223",colorPlaceholder:"#596269",colorCaret:"#fff",colorSpinner:"#fff",borderStyle:"none",backgroundScrollIcon:"#fff"},container:{border:"none",borderRadius:"4px",boxShadow:"0px 1px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)"},header:{background:"#181a1b",colorRoomName:"#fff",colorRoomInfo:"#9ca6af",position:"absolute",width:"100%"},footer:{background:"#131415",borderStyleInput:"none",borderInputSelected:"#1976d2",backgroundReply:"#1b1c1c",backgroundTagActive:"#1b1c1c",backgroundTag:"#131415"},content:{background:"#131415"},sidemenu:{background:"#181a1b",backgroundHover:"#202224",backgroundActive:"#151617",colorActive:"#fff",borderColorSearch:"#181a1b"},dropdown:{background:"#2a2c33",backgroundHover:"#26282e"},message:{background:"#22242a",backgroundMe:"#1f7e80",color:"#fff",colorStarted:"#9ca6af",backgroundDeleted:"#1b1c21",backgroundSelected:"#c2dcf2",colorDeleted:"#a2a5a8",colorUsername:"#b3bac9",colorTimestamp:"#ebedf2",backgroundDate:"rgba(0, 0, 0, 0.3)",colorDate:"#bec5cc",backgroundSystem:"rgba(0, 0, 0, 0.3)",colorSystem:"#bec5cc",backgroundMedia:"rgba(0, 0, 0, 0.18)",backgroundReply:"rgba(0, 0, 0, 0.18)",colorReplyUsername:"#fff",colorReply:"#d6d6d6",colorTag:"#f0c60a",backgroundImage:"#ddd",colorNewMessages:"#fff",backgroundScrollCounter:"#1976d2",colorScrollCounter:"#fff",backgroundReaction:"none",borderStyleReaction:"none",backgroundReactionHover:"#202223",borderStyleReactionHover:"none",colorReactionCounter:"#fff",backgroundReactionMe:"#4e9ad1",borderStyleReactionMe:"none",backgroundReactionHoverMe:"#4e9ad1",borderStyleReactionHoverMe:"none",colorReactionCounterMe:"#fff",backgroundAudioRecord:"#eb4034",backgroundAudioLine:"rgba(255, 255, 255, 0.15)",backgroundAudioProgress:"#b7d4d3",backgroundAudioProgressSelector:"#b7d4d3",colorFileExtension:"#a2a5a8"},markdown:{background:"rgba(239, 239, 239, 0.7)",border:"rgba(212, 212, 212, 0.9)",color:"#e01e5a",colorMulti:"#0a0a0a"},room:{colorUsername:"#fff",colorMessage:"#6c7278",colorTimestamp:"#6c7278",colorStateOnline:"#4caf50",colorStateOffline:"#596269",backgroundCounterBadge:"#1976d2",colorCounterBadge:"#fff"},emoji:{background:"#343740"},icons:{search:"#596269",add:"#fff",toggle:"#fff",menu:"#fff",close:"#9ca6af",closeImage:"#fff",file:"#1976d2",paperclip:"#fff",closeOutline:"#fff",closePreview:"#fff",send:"#fff",sendDisabled:"#646a70",emoji:"#fff",emojiReaction:"#fff",document:"#1976d2",pencil:"#ebedf2",checkmark:"#ebedf2",checkmarkSeen:"#f0d90a",eye:"#fff",dropdownMessage:"#fff",dropdownMessageBackground:"rgba(0, 0, 0, 0.25)",dropdownRoom:"#fff",dropdownScroll:"#0a0a0a",microphone:"#fff",audioPlay:"#b7d4d3",audioPause:"#b7d4d3",audioCancel:"#eb4034",audioConfirm:"#1ba65b"}}},u6=({general:e,container:t,header:n,footer:s,sidemenu:a,content:i,dropdown:o,message:r,markdown:f,room:u,emoji:d,icons:c})=>({"--chat-color":e.color,"--chat-color-button-clear":e.colorButtonClear,"--chat-color-button":e.colorButton,"--chat-bg-color-button":e.backgroundColorButton,"--chat-bg-color-input":e.backgroundInput,"--chat-color-spinner":e.colorSpinner,"--chat-color-placeholder":e.colorPlaceholder,"--chat-color-caret":e.colorCaret,"--chat-border-style":e.borderStyle,"--chat-bg-scroll-icon":e.backgroundScrollIcon,"--chat-container-border":t.border,"--chat-container-border-radius":t.borderRadius,"--chat-container-box-shadow":t.boxShadow,"--chat-header-bg-color":n.background,"--chat-header-color-name":n.colorRoomName,"--chat-header-color-info":n.colorRoomInfo,"--chat-header-position":n.position,"--chat-header-width":n.width,"--chat-footer-bg-color":s.background,"--chat-border-style-input":s.borderStyleInput,"--chat-border-color-input-selected":s.borderInputSelected,"--chat-footer-bg-color-reply":s.backgroundReply,"--chat-footer-bg-color-tag-active":s.backgroundTagActive,"--chat-footer-bg-color-tag":s.backgroundTag,"--chat-content-bg-color":i.background,"--chat-sidemenu-bg-color":a.background,"--chat-sidemenu-bg-color-hover":a.backgroundHover,"--chat-sidemenu-bg-color-active":a.backgroundActive,"--chat-sidemenu-color-active":a.colorActive,"--chat-sidemenu-border-color-search":a.borderColorSearch,"--chat-dropdown-bg-color":o.background,"--chat-dropdown-bg-color-hover":o.backgroundHover,"--chat-message-bg-color":r.background,"--chat-message-bg-color-me":r.backgroundMe,"--chat-message-color-started":r.colorStarted,"--chat-message-bg-color-deleted":r.backgroundDeleted,"--chat-message-bg-color-selected":r.backgroundSelected,"--chat-message-color-deleted":r.colorDeleted,"--chat-message-color-username":r.colorUsername,"--chat-message-color-timestamp":r.colorTimestamp,"--chat-message-bg-color-date":r.backgroundDate,"--chat-message-color-date":r.colorDate,"--chat-message-bg-color-system":r.backgroundSystem,"--chat-message-color-system":r.colorSystem,"--chat-message-color":r.color,"--chat-message-bg-color-media":r.backgroundMedia,"--chat-message-bg-color-reply":r.backgroundReply,"--chat-message-color-reply-username":r.colorReplyUsername,"--chat-message-color-reply-content":r.colorReply,"--chat-message-color-tag":r.colorTag,"--chat-message-bg-color-image":r.backgroundImage,"--chat-message-color-new-messages":r.colorNewMessages,"--chat-message-bg-color-scroll-counter":r.backgroundScrollCounter,"--chat-message-color-scroll-counter":r.colorScrollCounter,"--chat-message-bg-color-reaction":r.backgroundReaction,"--chat-message-border-style-reaction":r.borderStyleReaction,"--chat-message-bg-color-reaction-hover":r.backgroundReactionHover,"--chat-message-border-style-reaction-hover":r.borderStyleReactionHover,"--chat-message-color-reaction-counter":r.colorReactionCounter,"--chat-message-bg-color-reaction-me":r.backgroundReactionMe,"--chat-message-border-style-reaction-me":r.borderStyleReactionMe,"--chat-message-bg-color-reaction-hover-me":r.backgroundReactionHoverMe,"--chat-message-border-style-reaction-hover-me":r.borderStyleReactionHoverMe,"--chat-message-color-reaction-counter-me":r.colorReactionCounterMe,"--chat-message-bg-color-audio-record":r.backgroundAudioRecord,"--chat-message-bg-color-audio-line":r.backgroundAudioLine,"--chat-message-bg-color-audio-progress":r.backgroundAudioProgress,"--chat-message-bg-color-audio-progress-selector":r.backgroundAudioProgressSelector,"--chat-message-color-file-extension":r.colorFileExtension,"--chat-markdown-bg":f.background,"--chat-markdown-border":f.border,"--chat-markdown-color":f.color,"--chat-markdown-color-multi":f.colorMulti,"--chat-room-color-username":u.colorUsername,"--chat-room-color-message":u.colorMessage,"--chat-room-color-timestamp":u.colorTimestamp,"--chat-room-color-online":u.colorStateOnline,"--chat-room-color-offline":u.colorStateOffline,"--chat-room-bg-color-badge":u.backgroundCounterBadge,"--chat-room-color-badge":u.colorCounterBadge,"--chat-emoji-bg-color":d.background,"--chat-icon-color-search":c.search,"--chat-icon-color-add":c.add,"--chat-icon-color-toggle":c.toggle,"--chat-icon-color-menu":c.menu,"--chat-icon-color-close":c.close,"--chat-icon-color-close-image":c.closeImage,"--chat-icon-color-file":c.file,"--chat-icon-color-paperclip":c.paperclip,"--chat-icon-color-close-outline":c.closeOutline,"--chat-icon-color-close-preview":c.closePreview,"--chat-icon-color-send":c.send,"--chat-icon-color-send-disabled":c.sendDisabled,"--chat-icon-color-emoji":c.emoji,"--chat-icon-color-emoji-reaction":c.emojiReaction,"--chat-icon-color-document":c.document,"--chat-icon-color-pencil":c.pencil,"--chat-icon-color-checkmark":c.checkmark,"--chat-icon-color-checkmark-seen":c.checkmarkSeen,"--chat-icon-color-eye":c.eye,"--chat-icon-color-dropdown-message":c.dropdownMessage,"--chat-icon-bg-dropdown-message":c.dropdownMessageBackground,"--chat-icon-color-dropdown-room":c.dropdownRoom,"--chat-icon-color-dropdown-scroll":c.dropdownScroll,"--chat-icon-color-microphone":c.microphone,"--chat-icon-color-audio-play":c.audioPlay,"--chat-icon-color-audio-pause":c.audioPause,"--chat-icon-color-audio-cancel":c.audioCancel,"--chat-icon-color-audio-confirm":c.audioConfirm});var d6=`.vac-fade-spinner-enter-from{opacity:0}.vac-fade-spinner-enter-active{transition:opacity .8s}.vac-fade-spinner-leave-active{transition:opacity .2s;opacity:0}.vac-fade-image-enter-from{opacity:0}.vac-fade-image-enter-active{transition:opacity 1s}.vac-fade-image-leave-active{transition:opacity .5s;opacity:0}.vac-fade-message-enter-from{opacity:0}.vac-fade-message-enter-active{transition:opacity .5s}.vac-fade-message-leave-active{transition:opacity .2s;opacity:0}.vac-slide-left-enter-active,.vac-slide-right-enter-active{transition:all .3s ease;transition-property:transform,opacity}.vac-slide-left-leave-active,.vac-slide-right-leave-active{transition:all .2s cubic-bezier(1,.5,.8,1)!important;transition-property:transform,opacity}.vac-slide-left-enter-from,.vac-slide-left-leave-to{transform:translate(10px);opacity:0}.vac-slide-right-enter-from,.vac-slide-right-leave-to{transform:translate(-10px);opacity:0}.vac-slide-up-enter-active{transition:all .3s ease}.vac-slide-up-leave-active{transition:all .2s cubic-bezier(1,.5,.8,1)}.vac-slide-up-enter-from,.vac-slide-up-leave-to{transform:translateY(10px);opacity:0}.vac-bounce-enter-active{animation:vac-bounce-in .5s}.vac-bounce-leave-active{animation:vac-bounce-in .3s reverse}@keyframes vac-bounce-in{0%{transform:scale(0)}50%{transform:scale(1.05)}to{transform:scale(1)}}.vac-fade-preview-enter{opacity:0}.vac-fade-preview-enter-active{transition:opacity .1s}.vac-fade-preview-leave-active{transition:opacity .2s;opacity:0}.vac-bounce-preview-enter-active{animation:vac-bounce-image-in .4s}.vac-bounce-preview-leave-active{animation:vac-bounce-image-in .3s reverse}@keyframes vac-bounce-image-in{0%{transform:scale(.6)}to{transform:scale(1)}}.vac-menu-list{border-radius:4px;display:block;cursor:pointer;background:var(--chat-dropdown-bg-color);padding:6px 0}.vac-menu-list :hover{background:var(--chat-dropdown-bg-color-hover);transition:background-color .3s cubic-bezier(.25,.8,.5,1)}.vac-menu-list :not(:hover){transition:background-color .3s cubic-bezier(.25,.8,.5,1)}.vac-menu-item{-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-ms-flex:1 1 100%;flex:1 1 100%;min-height:30px;padding:5px 16px;position:relative;white-space:nowrap;line-height:30px}.vac-menu-options{position:absolute;right:10px;top:20px;z-index:9999;min-width:150px;display:inline-block;border-radius:4px;font-size:14px;color:var(--chat-color);overflow-y:auto;overflow-x:hidden;contain:content;box-shadow:0 2px 2px -4px #0000001a,0 2px 2px 1px #0000001f,0 1px 8px 1px #0000001f}.vac-app-border{border:var(--chat-border-style)}.vac-app-border-t{border-top:var(--chat-border-style)}.vac-app-border-r{border-right:var(--chat-border-style)}.vac-app-border-b{border-bottom:var(--chat-border-style)}.vac-app-box-shadow{transition:all .5s;box-shadow:0 2px 2px -4px #0000001a,0 2px 2px 1px #0000001f,0 1px 8px 1px #0000001f}.vac-item-clickable{cursor:pointer}.vac-vertical-center{display:flex;align-items:center;height:100%}.vac-vertical-center .vac-vertical-container{width:100%;text-align:center}.vac-svg-button{max-height:30px;display:flex;cursor:pointer;transition:all .2s}.vac-svg-button:hover{transform:scale(1.1);opacity:.7}.vac-avatar{background-size:cover;background-position:center center;background-repeat:no-repeat;background-color:#ddd;height:42px;width:42px;min-height:42px;min-width:42px;margin-right:15px;border-radius:50%}.vac-blur-loading{filter:blur(3px)}.vac-badge-counter{height:13px;width:auto;min-width:13px;border-radius:50%;display:flex;align-items:center;justify-content:center;padding:3px;font-size:11px;font-weight:500}.vac-text-ellipsis{width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.vac-text-tag{color:var(--chat-message-color-tag);cursor:pointer}.vac-file-container{display:flex;align-content:center;justify-content:center;flex-wrap:wrap;text-align:center;background:var(--chat-bg-color-input);border:var(--chat-border-style-input);border-radius:4px;padding:10px}.vac-file-container svg{height:28px;width:28px}.vac-file-container .vac-text-extension{font-size:12px;color:var(--chat-message-color-file-extension);margin-top:-2px}.markdown p{margin:0}.markdown ol{display:flex;flex-direction:column;list-style-position:inside}.markdown ul{display:flex;flex-direction:column}.markdown code{display:block;font-size:12px;color:var(--chat-markdown-color-multi);background:var(--chat-markdown-bg);border:1px solid var(--chat-markdown-border);border-radius:3px;margin:4px 0;padding:7px}.markdown p code{display:inline-block;font-size:12px;color:var(--chat-markdown-color);background:var(--chat-markdown-bg);border:1px solid var(--chat-markdown-border);border-radius:3px;margin:2px 0;padding:2px 3px}.vac-card-window{width:100%;display:block;max-width:100%;background:var(--chat-content-bg-color);color:var(--chat-color);overflow-wrap:break-word;white-space:normal;border:var(--chat-container-border);border-radius:var(--chat-container-border-radius);box-shadow:var(--chat-container-box-shadow);-webkit-tap-highlight-color:transparent}.vac-card-window *{font-family:inherit}.vac-card-window a{color:#0d579c;font-weight:500}.vac-card-window .vac-chat-container{height:100%;display:flex}.vac-card-window .vac-chat-container input{min-width:10px}.vac-card-window .vac-chat-container textarea,.vac-card-window .vac-chat-container input[type=text],.vac-card-window .vac-chat-container input[type=search]{-webkit-appearance:none}.vac-media-preview{position:fixed;top:0;left:0;z-index:99;width:100vw;height:100vh;display:flex;align-items:center;background-color:#000c;outline:none}.vac-media-preview .vac-media-preview-container{height:calc(100% - 140px);width:calc(100% - 80px);padding:70px 40px;margin:0 auto}.vac-media-preview .vac-image-preview{width:100%;height:100%;background-size:contain;background-repeat:no-repeat;background-position:center}.vac-media-preview video{width:100%;height:100%}.vac-media-preview .vac-svg-button{position:absolute;top:30px;right:30px;transform:scale(1.4)}@media only screen and (max-width: 768px){.vac-media-preview .vac-svg-button{top:20px;right:20px;transform:scale(1.2)}.vac-media-preview .vac-media-preview-container{width:calc(100% - 40px);padding:70px 20px}}.vac-col-messages{position:relative;height:100%;flex:1;overflow:hidden;display:flex;flex-flow:column}.vac-col-messages .vac-container-center{height:100%;width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center}.vac-col-messages .vac-room-empty{font-size:14px;color:#9ca6af;font-style:italic;line-height:20px;white-space:pre-line}.vac-col-messages .vac-room-empty div{padding:0 10%}.vac-col-messages .vac-container-scroll{background:var(--chat-content-bg-color);flex:1;overflow-y:auto;margin-right:1px;margin-top:65px;-webkit-overflow-scrolling:touch}.vac-col-messages .vac-container-scroll.vac-scroll-smooth{scroll-behavior:smooth}.vac-col-messages .vac-messages-container{padding:0 5px 5px}.vac-col-messages .vac-text-started{font-size:14px;color:var(--chat-message-color-started);font-style:italic;text-align:center;margin-top:25px;margin-bottom:20px}.vac-col-messages .vac-icon-scroll{position:absolute;bottom:80px;right:20px;padding:8px;background:var(--chat-bg-scroll-icon);border-radius:50%;box-shadow:0 1px 1px -1px #0003,0 1px 1px #00000024,0 1px 2px #0000001f;display:flex;cursor:pointer;z-index:10}.vac-col-messages .vac-icon-scroll svg{height:25px;width:25px}.vac-col-messages .vac-messages-count{position:absolute;top:-8px;left:11px;background-color:var(--chat-message-bg-color-scroll-counter);color:var(--chat-message-color-scroll-counter)}.vac-col-messages .vac-messages-hidden{opacity:0}@media only screen and (max-width: 768px){.vac-col-messages .vac-container-scroll{margin-top:50px}.vac-col-messages .vac-text-started{margin-top:20px}.vac-col-messages .vac-icon-scroll{bottom:70px}}.vac-room-header{position:var(--chat-header-position);display:flex;align-items:center;height:64px;width:var(--chat-header-width);z-index:10;margin-right:1px;background:var(--chat-header-bg-color);border-top-right-radius:var(--chat-container-border-radius)}.vac-room-header .vac-room-wrapper{display:flex;align-items:center;min-width:0;height:100%;width:100%;padding:0 16px}.vac-room-header .vac-toggle-button{margin-right:15px}.vac-room-header .vac-toggle-button svg{height:26px;width:26px}.vac-room-header .vac-rotate-icon{transform:rotate(180deg)!important}.vac-room-header .vac-rotate-icon-init{transform:rotate(360deg)}.vac-room-header .vac-info-wrapper,.vac-room-header .vac-room-selection{display:flex;align-items:center;min-width:0;width:100%;height:100%}.vac-room-header .vac-room-selection .vac-selection-button{padding:8px 16px;color:var(--chat-color-button);background-color:var(--chat-bg-color-button);border-radius:4px;margin-right:10px;cursor:pointer;transition:all .2s}.vac-room-header .vac-room-selection .vac-selection-button:hover{opacity:.7}.vac-room-header .vac-room-selection .vac-selection-button:active{opacity:.9}.vac-room-header .vac-room-selection .vac-selection-button .vac-selection-button-count{margin-left:6px;opacity:.9}.vac-room-header .vac-room-selection .vac-selection-cancel{display:flex;align-items:center;margin-left:auto;white-space:nowrap;color:var(--chat-color-button-clear);transition:all .2s}.vac-room-header .vac-room-selection .vac-selection-cancel:hover{opacity:.7}.vac-room-header .vac-room-name{font-size:17px;font-weight:500;line-height:22px;color:var(--chat-header-color-name)}.vac-room-header .vac-room-info{font-size:13px;line-height:18px;color:var(--chat-header-color-info)}.vac-room-header .vac-room-options{margin-left:auto}@media only screen and (max-width: 768px){.vac-room-header{height:50px}.vac-room-header .vac-room-wrapper{padding:0 10px}.vac-room-header .vac-room-name{font-size:16px;line-height:22px}.vac-room-header .vac-room-info{font-size:12px;line-height:16px}.vac-room-header .vac-avatar{height:37px;width:37px;min-height:37px;min-width:37px}}.vac-room-footer{width:100%;border-bottom-right-radius:4px;z-index:10}.vac-box-footer{display:flex;position:relative;background:var(--chat-footer-bg-color);padding:10px 8px}.vac-textarea{max-height:300px;overflow-y:auto;height:20px;width:100%;line-height:20px;outline:0;resize:none;border-radius:20px;padding:12px 16px;box-sizing:content-box;font-size:16px;background:var(--chat-bg-color-input);color:var(--chat-color);caret-color:var(--chat-color-caret);border:var(--chat-border-style-input)}.vac-textarea::placeholder{color:var(--chat-color-placeholder);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.vac-textarea-outline{border:1px solid var(--chat-border-color-input-selected);box-shadow:inset 0 0 0 1px var(--chat-border-color-input-selected)}.vac-icon-textarea,.vac-icon-textarea-left{display:flex;align-items:center}.vac-icon-textarea svg,.vac-icon-textarea .vac-wrapper,.vac-icon-textarea-left svg,.vac-icon-textarea-left .vac-wrapper{margin:0 7px}.vac-icon-textarea{margin-left:5px}.vac-icon-textarea-left{display:flex;align-items:center;margin-right:5px}.vac-icon-textarea-left svg,.vac-icon-textarea-left .vac-wrapper{margin:0 7px}.vac-icon-textarea-left .vac-icon-microphone{fill:var(--chat-icon-color-microphone);margin:0 7px}.vac-icon-textarea-left .vac-dot-audio-record{height:15px;width:15px;border-radius:50%;background-color:var(--chat-message-bg-color-audio-record);animation:vac-scaling .8s ease-in-out infinite alternate}@keyframes vac-scaling{0%{transform:scale(1);opacity:.4}to{transform:scale(1.1);opacity:1}}.vac-icon-textarea-left .vac-dot-audio-record-time{font-size:16px;color:var(--chat-color);margin-left:8px;width:45px}.vac-icon-textarea-left .vac-icon-audio-stop,.vac-icon-textarea-left .vac-icon-audio-confirm{min-height:28px;min-width:28px}.vac-icon-textarea-left .vac-icon-audio-stop svg,.vac-icon-textarea-left .vac-icon-audio-confirm svg{min-height:28px;min-width:28px}.vac-icon-textarea-left .vac-icon-audio-stop{margin-right:20px}.vac-icon-textarea-left .vac-icon-audio-stop #vac-icon-close-outline{fill:var(--chat-icon-color-audio-cancel)}.vac-icon-textarea-left .vac-icon-audio-confirm{margin-right:3px;margin-left:12px}.vac-icon-textarea-left .vac-icon-audio-confirm #vac-icon-checkmark{fill:var(--chat-icon-color-audio-confirm)}.vac-send-disabled,.vac-send-disabled svg{cursor:none!important;pointer-events:none!important;transform:none!important}@media only screen and (max-width: 768px){.vac-room-footer{width:100%}.vac-box-footer{padding:7px 2px 7px 7px}.vac-box-footer.vac-box-footer-border{border-top:var(--chat-border-style-input)}.vac-textarea{padding:7px;line-height:18px}.vac-textarea::placeholder{color:transparent}.vac-icon-textarea svg,.vac-icon-textarea .vac-wrapper,.vac-icon-textarea-left svg,.vac-icon-textarea-left .vac-wrapper{margin:0 5px!important}}@media only screen and (max-height: 768px){.vac-textarea{max-height:120px}}.vac-emojis-container{width:calc(100% - 16px);padding:10px 8px;background:var(--chat-footer-bg-color);display:flex;align-items:center;overflow:auto}.vac-emojis-container .vac-emoji-element{padding:0 8px;font-size:30px;border-radius:4px;cursor:pointer;background:var(--chat-footer-bg-color-tag);transition:background-color .3s cubic-bezier(.25,.8,.5,1)}.vac-emojis-container .vac-emoji-element-active{background:var(--chat-footer-bg-color-tag-active)}@media only screen and (max-width: 768px){.vac-emojis-container{width:calc(100% - 10px);padding:7px 5px}.vac-emojis-container .vac-emoji-element{padding:0 7px;font-size:26px}}.vac-reply-container{display:flex;padding:10px 10px 0;background:var(--chat-footer-bg-color);align-items:center;width:calc(100% - 20px)}.vac-reply-container .vac-reply-box{width:100%;overflow:hidden;background:var(--chat-footer-bg-color-reply);border-radius:4px;padding:8px 10px}.vac-reply-container .vac-reply-info{overflow:hidden}.vac-reply-container .vac-reply-username{color:var(--chat-message-color-reply-username);font-size:12px;line-height:15px;margin-bottom:2px}.vac-reply-container .vac-reply-content{font-size:12px;color:var(--chat-message-color-reply-content);white-space:pre-line}.vac-reply-container .vac-icon-reply{margin-left:10px}.vac-reply-container .vac-icon-reply svg{height:20px;width:20px}.vac-reply-container .vac-image-reply{max-height:100px;max-width:200px;margin:4px 10px 0 0;border-radius:4px}.vac-reply-container .vac-audio-reply{margin-right:10px}.vac-reply-container .vac-file-container{max-width:80px}@media only screen and (max-width: 768px){.vac-reply-container{padding:5px 8px;width:calc(100% - 16px)}}.vac-room-files-container{display:flex;align-items:center;padding:10px 6px 0;background:var(--chat-footer-bg-color)}.vac-room-files-container .vac-files-box{display:flex;overflow:auto;width:calc(100% - 30px)}.vac-room-files-container video{height:100px;border:var(--chat-border-style-input);border-radius:4px}.vac-room-files-container .vac-icon-close{margin-left:auto}.vac-room-files-container .vac-icon-close svg{height:20px;width:20px}@media only screen and (max-width: 768px){.vac-files-container{padding:6px 4px 4px 2px}}.vac-room-file-container{display:flex;position:relative;margin:0 4px}.vac-room-file-container .vac-message-image{position:relative;background-color:var(--chat-message-bg-color-image)!important;background-size:cover!important;background-position:center center!important;background-repeat:no-repeat!important;height:100px;width:100px;border:var(--chat-border-style-input);border-radius:4px}.vac-room-file-container .vac-file-container{height:80px;width:80px}.vac-room-file-container .vac-icon-remove{position:absolute;top:6px;left:6px;z-index:10}.vac-room-file-container .vac-icon-remove svg{height:20px;width:20px;border-radius:50%}.vac-room-file-container .vac-icon-remove:before{content:" ";position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);border-radius:50%;z-index:-1}.vac-tags-container{display:flex;flex-direction:column;align-items:center;width:100%}.vac-tags-container .vac-tags-box{display:flex;width:100%;height:54px;overflow:hidden;cursor:pointer;background:var(--chat-footer-bg-color-tag);transition:background-color .3s cubic-bezier(.25,.8,.5,1)}.vac-tags-container .vac-tags-box-active{background:var(--chat-footer-bg-color-tag-active)}.vac-tags-container .vac-tags-info{display:flex;overflow:hidden;padding:0 20px;align-items:center}.vac-tags-container .vac-tags-avatar{height:34px;width:34px;min-height:34px;min-width:34px}.vac-tags-container .vac-tags-username{font-size:14px}@media only screen and (max-width: 768px){.vac-tags-container .vac-tags-box{height:50px}.vac-tags-container .vac-tags-info{padding:0 12px}}.vac-template-container{display:flex;flex-direction:column;align-items:center;width:100%}.vac-template-container .vac-template-box{display:flex;width:100%;height:54px;overflow:hidden;cursor:pointer;background:var(--chat-footer-bg-color-tag);transition:background-color .3s cubic-bezier(.25,.8,.5,1)}.vac-template-container .vac-template-active{background:var(--chat-footer-bg-color-tag-active)}.vac-template-container .vac-template-info{display:flex;overflow:hidden;padding:0 20px;align-items:center}.vac-template-container .vac-template-tag{font-size:14px;font-weight:700;margin-right:10px}.vac-template-container .vac-template-text{font-size:14px}@media only screen and (max-width: 768px){.vac-template-container .vac-template-box{height:50px}.vac-template-container .vac-template-info{padding:0 12px}}.vac-rooms-container{display:flex;flex-flow:column;flex:0 0 25%;min-width:260px;max-width:500px;position:relative;background:var(--chat-sidemenu-bg-color);height:100%;border-top-left-radius:var(--chat-container-border-radius);border-bottom-left-radius:var(--chat-container-border-radius)}.vac-rooms-container.vac-rooms-container-full{flex:0 0 100%;max-width:100%}.vac-rooms-container .vac-rooms-empty{font-size:14px;color:#9ca6af;font-style:italic;text-align:center;margin:40px 0;line-height:20px;white-space:pre-line}.vac-rooms-container .vac-room-list{flex:1;position:relative;max-width:100%;padding:0 10px 5px;overflow-y:auto}.vac-rooms-container .vac-room-item{border-radius:8px;align-items:center;display:flex;flex:1 1 100%;margin-bottom:5px;padding:0 14px;position:relative;min-height:71px;transition:background-color .3s cubic-bezier(.25,.8,.5,1)}.vac-rooms-container .vac-room-item:hover{background:var(--chat-sidemenu-bg-color-hover)}.vac-rooms-container .vac-room-item:not(.vac-room-selected){cursor:pointer}.vac-rooms-container .vac-room-selected{color:var(--chat-sidemenu-color-active)!important;background:var(--chat-sidemenu-bg-color-active)!important}.vac-rooms-container .vac-room-selected:hover{background:var(--chat-sidemenu-bg-color-active)!important}@media only screen and (max-width: 768px){.vac-rooms-container .vac-room-list{padding:0 7px 5px}.vac-rooms-container .vac-room-item{min-height:60px;padding:0 8px}}.vac-room-container{display:flex;flex:1;align-items:center;width:100%}.vac-room-container .vac-name-container{flex:1}.vac-room-container .vac-title-container{display:flex;align-items:center;line-height:25px}.vac-room-container .vac-state-circle{width:9px;height:9px;border-radius:50%;background-color:var(--chat-room-color-offline);margin-right:6px;transition:.3s}.vac-room-container .vac-state-online{background-color:var(--chat-room-color-online)}.vac-room-container .vac-room-name{flex:1;color:var(--chat-room-color-username);font-weight:500}.vac-room-container .vac-text-date{margin-left:5px;font-size:11px;color:var(--chat-room-color-timestamp)}.vac-room-container .vac-text-last{display:flex;align-items:center;font-size:12px;line-height:19px;color:var(--chat-room-color-message)}.vac-room-container .vac-message-new{color:var(--chat-room-color-username);font-weight:500}.vac-room-container .vac-icon-check{display:flex;vertical-align:middle;height:14px;width:14px;margin-top:-2px;margin-right:2px}.vac-room-container .vac-icon-microphone{height:15px;width:15px;vertical-align:middle;margin:-3px 1px 0 -2px;fill:var(--chat-room-color-message)}.vac-room-container .vac-room-options-container{display:flex;margin-left:auto}.vac-room-container .vac-room-badge{background-color:var(--chat-room-bg-color-badge);color:var(--chat-room-color-badge);margin-left:5px}.vac-room-container .vac-list-room-options{height:19px;width:19px;align-items:center;margin-left:5px}.vac-box-empty{margin-top:10px}@media only screen and (max-width: 768px){.vac-box-empty{margin-top:7px}}.vac-box-search{position:sticky;display:flex;align-items:center;height:64px;padding:0 15px}.vac-box-search .vac-icon-search{display:flex;position:absolute;left:30px}.vac-box-search .vac-icon-search svg{width:18px;height:18px}.vac-box-search .vac-input{height:38px;width:100%;background:var(--chat-bg-color-input);color:var(--chat-color);font-size:15px;outline:0;caret-color:var(--chat-color-caret);padding:10px 10px 10px 40px;border:1px solid var(--chat-sidemenu-border-color-search);border-radius:20px}.vac-box-search .vac-input::placeholder{color:var(--chat-color-placeholder)}.vac-box-search .vac-add-icon{margin-left:auto;padding-left:10px}@media only screen and (max-width: 768px){.vac-box-search{height:58px}}.vac-message-wrapper .vac-card-info{border-radius:4px;text-align:center;margin:10px auto;font-size:12px;padding:4px;display:block;overflow-wrap:break-word;position:relative;white-space:normal;box-shadow:0 1px 1px -1px #0000001a,0 1px 1px -1px #0000001c,0 1px 2px -1px #0000001c}.vac-message-wrapper .vac-card-date{max-width:150px;font-weight:500;text-transform:uppercase;color:var(--chat-message-color-date);background-color:var(--chat-message-bg-color-date)}.vac-message-wrapper .vac-card-system{max-width:250px;padding:8px 4px;color:var(--chat-message-color-system);background-color:var(--chat-message-bg-color-system)}.vac-message-wrapper .vac-line-new{color:var(--chat-message-color-new-messages);position:relative;text-align:center;font-size:13px;padding:10px 0}.vac-message-wrapper .vac-line-new:after,.vac-message-wrapper .vac-line-new:before{border-top:1px solid var(--chat-message-color-new-messages);content:"";left:0;position:absolute;top:50%;width:calc(50% - 60px)}.vac-message-wrapper .vac-line-new:before{left:auto;right:0}.vac-message-wrapper .vac-message-box{display:flex;flex:0 0 50%;max-width:50%;justify-content:flex-start;line-height:1.4}.vac-message-wrapper .vac-avatar{height:28px;width:28px;min-height:28px;min-width:28px;margin:0 0 2px;align-self:flex-end}.vac-message-wrapper .vac-avatar-current-offset{margin-right:28px}.vac-message-wrapper .vac-avatar-offset{margin-left:28px}.vac-message-wrapper .vac-failure-container{position:relative;align-self:flex-end;height:20px;width:20px;margin:0 0 2px -4px;border-radius:50%;background-color:#f44336}.vac-message-wrapper .vac-failure-container.vac-failure-container-avatar{margin-right:6px}.vac-message-wrapper .vac-failure-container .vac-failure-text{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;font-size:15px;font-weight:700}.vac-message-wrapper .vac-message-container{position:relative;padding:2px 10px;align-items:end;min-width:100px;box-sizing:content-box}.vac-message-wrapper .vac-message-container-offset{margin-top:10px}.vac-message-wrapper .vac-offset-current{margin-left:50%;justify-content:flex-end}.vac-message-wrapper .vac-message-card{background-color:var(--chat-message-bg-color);color:var(--chat-message-color);border-radius:8px;font-size:14px;padding:6px 9px 3px;white-space:pre-line;max-width:100%;-webkit-transition-property:box-shadow,opacity;transition-property:box-shadow,opacity;transition:box-shadow .28s cubic-bezier(.4,0,.2,1);will-change:box-shadow;box-shadow:0 1px 1px -1px #0000001a,0 1px 1px -1px #0000001c,0 1px 2px -1px #0000001c}.vac-message-wrapper .vac-message-highlight{box-shadow:0 1px 2px -1px #0000001a,0 1px 2px -1px #0000001c,0 1px 5px -1px #0000001c}.vac-message-wrapper .vac-message-current{background-color:var(--chat-message-bg-color-me)!important}.vac-message-wrapper .vac-message-deleted{color:var(--chat-message-color-deleted)!important;font-size:13px!important;font-style:italic!important;background-color:var(--chat-message-bg-color-deleted)!important}.vac-message-wrapper .vac-message-selected{background-color:var(--chat-message-bg-color-selected)!important;transition:background-color .2s}.vac-message-wrapper .vac-message-image{position:relative;background-color:var(--chat-message-bg-color-image)!important;background-size:cover!important;background-position:center center!important;background-repeat:no-repeat!important;height:250px;width:250px;max-width:100%;border-radius:4px;margin:4px auto 5px;transition:.4s filter linear}.vac-message-wrapper .vac-text-username{font-size:13px;color:var(--chat-message-color-username);margin-bottom:2px}.vac-message-wrapper .vac-username-reply{margin-bottom:5px}.vac-message-wrapper .vac-text-timestamp{font-size:10px;color:var(--chat-message-color-timestamp);text-align:right}.vac-message-wrapper .vac-progress-time{float:left;margin:-2px 0 0 40px;color:var(--chat-color);font-size:12px}.vac-message-wrapper .vac-icon-edited{-webkit-box-align:center;align-items:center;display:-webkit-inline-box;display:inline-flex;justify-content:center;letter-spacing:normal;line-height:1;text-indent:0;vertical-align:middle;margin:0 4px 2px}.vac-message-wrapper .vac-icon-edited svg{height:12px;width:12px}.vac-message-wrapper .vac-icon-check{height:14px;width:14px;vertical-align:middle;margin:-3px -3px 0 3px}@media only screen and (max-width: 768px){.vac-message-wrapper .vac-message-container{padding:2px 3px 1px}.vac-message-wrapper .vac-message-container-offset{margin-top:10px}.vac-message-wrapper .vac-message-box{flex:0 0 80%;max-width:80%}.vac-message-wrapper .vac-avatar{height:25px;width:25px;min-height:25px;min-width:25px;margin:0 6px 1px 0}.vac-message-wrapper .vac-avatar.vac-avatar-current{margin:0 0 1px 6px}.vac-message-wrapper .vac-avatar-current-offset{margin-right:31px}.vac-message-wrapper .vac-avatar-offset{margin-left:31px}.vac-message-wrapper .vac-failure-container{margin-left:2px}.vac-message-wrapper .vac-failure-container.vac-failure-container-avatar{margin-right:0}.vac-message-wrapper .vac-offset-current{margin-left:20%}.vac-message-wrapper .vac-progress-time{margin-left:37px}}.vac-audio-player{display:flex;margin:8px 0 5px}.vac-audio-player .vac-svg-button{max-width:18px;margin-left:7px}@media only screen and (max-width: 768px){.vac-audio-player{margin:4px 0 0}.vac-audio-player .vac-svg-button{max-width:16px;margin-left:5px}}.vac-player-bar{display:flex;align-items:center;max-width:calc(100% - 18px);margin-right:7px;margin-left:20px}.vac-player-bar .vac-player-progress{width:190px}.vac-player-bar .vac-player-progress .vac-line-container{position:relative;height:4px;border-radius:5px;background-color:var(--chat-message-bg-color-audio-line)}.vac-player-bar .vac-player-progress .vac-line-container .vac-line-progress{position:absolute;height:inherit;background-color:var(--chat-message-bg-color-audio-progress);border-radius:inherit}.vac-player-bar .vac-player-progress .vac-line-container .vac-line-dot{position:absolute;top:-5px;margin-left:-7px;height:14px;width:14px;border-radius:50%;background-color:var(--chat-message-bg-color-audio-progress-selector);transition:transform .25s}.vac-player-bar .vac-player-progress .vac-line-container .vac-line-dot__active{transform:scale(1.2)}@media only screen and (max-width: 768px){.vac-player-bar{margin-right:5px}.vac-player-bar .vac-player-progress .vac-line-container{height:3px}.vac-player-bar .vac-player-progress .vac-line-container .vac-line-dot{height:12px;width:12px;top:-5px;margin-left:-5px}}.vac-message-actions-wrapper .vac-options-container{position:absolute;top:2px;right:10px;height:40px;width:70px;overflow:hidden;border-top-right-radius:8px}.vac-message-actions-wrapper .vac-blur-container{position:absolute;height:100%;width:100%;left:8px;bottom:10px;background:var(--chat-message-bg-color);filter:blur(3px);border-bottom-left-radius:8px}.vac-message-actions-wrapper .vac-options-me{background:var(--chat-message-bg-color-me)}.vac-message-actions-wrapper .vac-message-options{background:var(--chat-icon-bg-dropdown-message);border-radius:50%;position:absolute;top:7px;right:7px}.vac-message-actions-wrapper .vac-message-options svg{height:17px;width:17px;padding:5px;margin:-5px}.vac-message-actions-wrapper .vac-message-emojis{position:absolute;top:6px;right:30px}.vac-message-actions-wrapper .vac-menu-options{right:15px}.vac-message-actions-wrapper .vac-menu-left{right:-118px}@media only screen and (max-width: 768px){.vac-message-actions-wrapper .vac-options-container{right:3px}.vac-message-actions-wrapper .vac-menu-left{right:-50px}}.vac-message-files-container .vac-file-wrapper{position:relative;width:fit-content}.vac-message-files-container .vac-file-wrapper .vac-file-container{height:60px;width:60px;margin:3px 0 5px;cursor:pointer;transition:all .6s}.vac-message-files-container .vac-file-wrapper .vac-file-container:hover{opacity:.85}.vac-message-files-container .vac-file-wrapper .vac-file-container svg{height:30px;width:30px}.vac-message-files-container .vac-file-wrapper .vac-file-container.vac-file-container-progress{background-color:#0000004d}.vac-message-file-container{position:relative;z-index:0}.vac-message-file-container .vac-message-image-container{cursor:pointer}.vac-message-file-container .vac-image-buttons{position:absolute;width:100%;height:100%;border-radius:4px;background:linear-gradient(to bottom,rgba(0,0,0,0) 55%,rgba(0,0,0,.02) 60%,rgba(0,0,0,.05) 65%,rgba(0,0,0,.1) 70%,rgba(0,0,0,.2) 75%,rgba(0,0,0,.3) 80%,rgba(0,0,0,.5) 85%,rgba(0,0,0,.6) 90%,rgba(0,0,0,.7) 95%,rgba(0,0,0,.8) 100%)}.vac-message-file-container .vac-image-buttons svg{height:26px;width:26px}.vac-message-file-container .vac-image-buttons .vac-button-view,.vac-message-file-container .vac-image-buttons .vac-button-download{position:absolute;bottom:6px;left:7px}.vac-message-file-container .vac-image-buttons :first-child{left:40px}.vac-message-file-container .vac-image-buttons .vac-button-view{max-width:18px;bottom:8px}.vac-message-file-container .vac-video-container{width:350px;max-width:100%;margin:4px auto 5px;cursor:pointer}.vac-message-file-container .vac-video-container video{width:100%;height:100%;border-radius:4px}.vac-button-reaction{display:inline-flex;align-items:center;border:var(--chat-message-border-style-reaction);outline:none;background:var(--chat-message-bg-color-reaction);border-radius:4px;margin:4px 2px 0;transition:.3s;padding:0 5px;font-size:18px;line-height:23px}.vac-button-reaction span{font-size:11px;font-weight:500;min-width:7px;color:var(--chat-message-color-reaction-counter)}.vac-button-reaction:hover{border:var(--chat-message-border-style-reaction-hover);background:var(--chat-message-bg-color-reaction-hover);cursor:pointer}.vac-button-reaction.vac-reaction-me{border:var(--chat-message-border-style-reaction-me);background:var(--chat-message-bg-color-reaction-me)}.vac-button-reaction.vac-reaction-me span{color:var(--chat-message-color-reaction-counter-me)}.vac-button-reaction.vac-reaction-me:hover{border:var(--chat-message-border-style-reaction-hover-me);background:var(--chat-message-bg-color-reaction-hover-me)}.vac-reply-message{background:var(--chat-message-bg-color-reply);border-radius:4px;margin:-1px -5px 8px;padding:8px 10px}.vac-reply-message .vac-reply-username{color:var(--chat-message-color-reply-username);font-size:12px;line-height:15px;margin-bottom:2px}.vac-reply-message .vac-image-reply-container{width:70px}.vac-reply-message .vac-image-reply-container .vac-message-image-reply{height:70px;width:70px;margin:4px auto 3px}.vac-reply-message .vac-video-reply-container{width:200px;max-width:100%}.vac-reply-message .vac-video-reply-container video{width:100%;height:100%;border-radius:4px}.vac-reply-message .vac-reply-content{font-size:12px;color:var(--chat-message-color-reply-content)}.vac-reply-message .vac-file-container{height:60px;width:60px}.vac-emoji-wrapper{position:relative;display:flex}.vac-emoji-wrapper .vac-emoji-reaction svg{height:19px;width:19px}.vac-emoji-wrapper .vac-emoji-picker{position:absolute;z-index:9999;bottom:32px;right:10px;width:300px;padding-top:4px;overflow:scroll;box-sizing:border-box;border-radius:.5rem;background:var(--chat-emoji-bg-color);box-shadow:0 1px 2px -2px #0000001a,0 1px 2px -1px #0000001a,0 1px 2px 1px #0000001a;scrollbar-width:none}.vac-emoji-wrapper .vac-emoji-picker::-webkit-scrollbar{display:none}.vac-emoji-wrapper .vac-emoji-picker.vac-picker-reaction{position:fixed;top:initial;right:initial}.vac-emoji-wrapper .vac-emoji-picker emoji-picker{height:100%;width:100%;--emoji-size: 1.2rem;--background: var(--chat-emoji-bg-color);--emoji-padding: .4rem;--border-color: var(--chat-sidemenu-border-color-search);--button-hover-background: var(--chat-sidemenu-bg-color-hover);--button-active-background: var(--chat-sidemenu-bg-color-hover)}.vac-format-message-wrapper .vac-format-container{display:inline}.vac-format-message-wrapper .vac-icon-deleted{height:14px;width:14px;vertical-align:middle;margin:-2px 2px 0 0;fill:var(--chat-message-color-deleted)}.vac-format-message-wrapper .vac-icon-deleted.vac-icon-deleted-room{margin:-3px 1px 0 0;fill:var(--chat-room-color-message)}.vac-format-message-wrapper .vac-image-link-container{background-color:var(--chat-message-bg-color-media);padding:8px;margin:2px auto;border-radius:4px}.vac-format-message-wrapper .vac-image-link{position:relative;background-color:var(--chat-message-bg-color-image)!important;background-size:contain;background-position:center center!important;background-repeat:no-repeat!important;height:150px;width:150px;max-width:100%;border-radius:4px;margin:0 auto}.vac-format-message-wrapper .vac-image-link-message{max-width:166px;font-size:12px}.vac-loader-wrapper.vac-container-center{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);z-index:9}.vac-loader-wrapper.vac-container-top{padding:21px}.vac-loader-wrapper.vac-container-top #vac-circle{height:20px;width:20px}.vac-loader-wrapper #vac-circle{margin:auto;height:28px;width:28px;border:3px rgba(0,0,0,.25) solid;border-top:3px var(--chat-color-spinner) solid;border-right:3px var(--chat-color-spinner) solid;border-bottom:3px var(--chat-color-spinner) solid;border-radius:50%;-webkit-animation:vac-spin 1s infinite linear;animation:vac-spin 1s infinite linear}@media only screen and (max-width: 768px){.vac-loader-wrapper #vac-circle{height:24px;width:24px}.vac-loader-wrapper.vac-container-top{padding:18px}.vac-loader-wrapper.vac-container-top #vac-circle{height:16px;width:16px}}@-webkit-keyframes vac-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}@keyframes vac-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}#vac-icon-search{fill:var(--chat-icon-color-search)}#vac-icon-add{fill:var(--chat-icon-color-add)}#vac-icon-toggle{fill:var(--chat-icon-color-toggle)}#vac-icon-menu{fill:var(--chat-icon-color-menu)}#vac-icon-close{fill:var(--chat-icon-color-close)}#vac-icon-close-image{fill:var(--chat-icon-color-close-image)}#vac-icon-file{fill:var(--chat-icon-color-file)}#vac-icon-paperclip{fill:var(--chat-icon-color-paperclip)}#vac-icon-close-outline{fill:var(--chat-icon-color-close-outline)}#vac-icon-close-outline-preview{fill:var(--chat-icon-color-close-preview)}#vac-icon-send{fill:var(--chat-icon-color-send)}#vac-icon-send-disabled{fill:var(--chat-icon-color-send-disabled)}#vac-icon-emoji{fill:var(--chat-icon-color-emoji)}#vac-icon-emoji-reaction{fill:var(--chat-icon-color-emoji-reaction)}#vac-icon-document{fill:var(--chat-icon-color-document)}#vac-icon-pencil{fill:var(--chat-icon-color-pencil)}#vac-icon-checkmark,#vac-icon-double-checkmark{fill:var(--chat-icon-color-checkmark)}#vac-icon-checkmark-seen,#vac-icon-double-checkmark-seen{fill:var(--chat-icon-color-checkmark-seen)}#vac-icon-eye{fill:var(--chat-icon-color-eye)}#vac-icon-dropdown-message{fill:var(--chat-icon-color-dropdown-message)}#vac-icon-dropdown-room{fill:var(--chat-icon-color-dropdown-room)}#vac-icon-dropdown-scroll{fill:var(--chat-icon-color-dropdown-scroll)}#vac-icon-audio-play{fill:var(--chat-icon-color-audio-play)}#vac-icon-audio-pause{fill:var(--chat-icon-color-audio-pause)}.vac-progress-wrapper{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);z-index:9}.vac-progress-wrapper circle{transition:stroke-dashoffset .35s;transform:rotate(-90deg);transform-origin:50% 50%}.vac-progress-wrapper .vac-progress-content{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);z-index:-1;margin-top:-2px;background-color:#000000b3;border-radius:50%}.vac-progress-wrapper .vac-progress-content .vac-progress-text{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);font-weight:700;color:#fff}.vac-progress-wrapper .vac-progress-content .vac-progress-text .vac-progress-pourcent{font-size:9px;font-weight:400}
`;const f6={name:"ChatContainer",components:{RoomsList:b5,Room:J8,MediaPreview:r6},props:{height:{type:String,default:"600px"},theme:{type:String,default:"light"},styles:{type:[Object,String],default:()=>({})},responsiveBreakpoint:{type:Number,default:900},singleRoom:{type:[Boolean,String],default:!1},roomsListOpened:{type:[Boolean,String],default:!0},textMessages:{type:[Object,String],default:()=>({})},currentUserId:{type:String,default:""},rooms:{type:[Array,String],default:()=>[]},roomsOrder:{type:String,default:"desc"},loadingRooms:{type:[Boolean,String],default:!1},roomsLoaded:{type:[Boolean,String],default:!1},roomId:{type:String,default:null},loadFirstRoom:{type:[Boolean,String],default:!0},messages:{type:[Array,String],default:()=>[]},messagesLoaded:{type:[Boolean,String],default:!1},roomActions:{type:[Array,String],default:()=>[]},menuActions:{type:[Array,String],default:()=>[]},messageActions:{type:[Array,String],default:()=>[{name:"replyMessage",title:"Reply"},{name:"editMessage",title:"Edit Message",onlyMe:!0},{name:"deleteMessage",title:"Delete Message",onlyMe:!0},{name:"selectMessages",title:"Select"}]},messageSelectionActions:{type:[Array,String],default:()=>[]},autoScroll:{type:[Object,String],default:()=>({send:{new:!0,newAfterScrollUp:!0},receive:{new:!0,newAfterScrollUp:!1}})},customSearchRoomEnabled:{type:[Boolean,String],default:!1},showSearch:{type:[Boolean,String],default:!0},showAddRoom:{type:[Boolean,String],default:!0},showSendIcon:{type:[Boolean,String],default:!0},showFiles:{type:[Boolean,String],default:!0},showAudio:{type:[Boolean,String],default:!0},audioBitRate:{type:Number,default:128},audioSampleRate:{type:Number,default:new(window.AudioContext||window.webkitAudioContext)().sampleRate},showEmojis:{type:[Boolean,String],default:!0},showReactionEmojis:{type:[Boolean,String],default:!0},showNewMessagesDivider:{type:[Boolean,String],default:!0},showFooter:{type:[Boolean,String],default:!0},textFormatting:{type:[Object,String],default:()=>({disabled:!1})},linkOptions:{type:[Object,String],default:()=>({disabled:!1,target:"_blank",rel:null})},roomInfoEnabled:{type:[Boolean,String],default:!1},textareaActionEnabled:{type:[Boolean,String],default:!1},textareaAutoFocus:{type:[Boolean,String],default:!0},userTagsEnabled:{type:[Boolean,String],default:!0},emojisSuggestionEnabled:{type:[Boolean,String],default:!0},roomMessage:{type:String,default:""},scrollDistance:{type:Number,default:60},acceptedFiles:{type:String,default:"*"},captureFiles:{type:String,default:""},multipleFiles:{type:[Boolean,String],default:!0},templatesText:{type:[Array,String],default:()=>[]},mediaPreviewEnabled:{type:[Boolean,String],default:!0},usernameOptions:{type:[Object,String],default:()=>({minUsers:3,currentUser:!1})},emojiDataSource:{type:String,default:void 0}},emits:["toggle-rooms-list","room-info","fetch-messages","send-message","edit-message","delete-message","open-file","open-user-tag","open-failed-message","menu-action-handler","message-action-handler","send-message-reaction","typing-message","textarea-action-handler","fetch-more-rooms","add-room","search-room","room-action-handler","message-selection-action-handler"],data(){return{slots:[],room:{},loadingMoreRooms:!1,showRoomsList:!0,isMobile:!1,showMediaPreview:!1,previewFile:{}}},computed:{t(){return{...l6,...this.textMessagesCasted}},cssVars(){const e=c6[this.theme],t={};return Object.keys(e).map(n=>{t[n]={...e[n],...this.stylesCasted[n]||{}}}),u6(t)},orderedRooms(){return this.roomsCasted.slice().sort((e,t)=>{const n=e.index||0,s=t.index||0;return this.roomsOrder==="asc"?n<s?-1:s<n?1:0:n>s?-1:s>n?1:0})},singleRoomCasted(){return this.castBoolean(this.singleRoom)},roomsListOpenedCasted(){return this.castBoolean(this.roomsListOpened)},loadingRoomsCasted(){return this.castBoolean(this.loadingRooms)},roomsLoadedCasted(){return this.castBoolean(this.roomsLoaded)},loadFirstRoomCasted(){return this.castBoolean(this.loadFirstRoom)},messagesLoadedCasted(){return this.castBoolean(this.messagesLoaded)},multipleFilesCasted(){return this.castBoolean(this.multipleFiles)},showSearchCasted(){return this.castBoolean(this.showSearch)},showAddRoomCasted(){return this.castBoolean(this.showAddRoom)},showSendIconCasted(){return this.castBoolean(this.showSendIcon)},showFilesCasted(){return this.castBoolean(this.showFiles)},showAudioCasted(){return this.castBoolean(this.showAudio)},showEmojisCasted(){return this.castBoolean(this.showEmojis)},showReactionEmojisCasted(){return this.castBoolean(this.showReactionEmojis)},showNewMessagesDividerCasted(){return this.castBoolean(this.showNewMessagesDivider)},showFooterCasted(){return this.castBoolean(this.showFooter)},roomInfoEnabledCasted(){return this.castBoolean(this.roomInfoEnabled)},textareaActionEnabledCasted(){return this.castBoolean(this.textareaActionEnabled)},textareaAutoFocusCasted(){return this.castBoolean(this.textareaAutoFocus)},userTagsEnabledCasted(){return this.castBoolean(this.userTagsEnabled)},emojisSuggestionEnabledCasted(){return this.castBoolean(this.emojisSuggestionEnabled)},mediaPreviewEnabledCasted(){return this.castBoolean(this.mediaPreviewEnabled)},roomsCasted(){return this.castArray(this.rooms)},messagesCasted(){return this.castArray(this.messages)},roomActionsCasted(){return this.castArray(this.roomActions)},menuActionsCasted(){return this.castArray(this.menuActions)},messageActionsCasted(){return this.castArray(this.messageActions)},messageSelectionActionsCasted(){return this.castArray(this.messageSelectionActions)},templatesTextCasted(){return this.castArray(this.templatesText)},stylesCasted(){return this.castObject(this.styles)},textMessagesCasted(){return this.castObject(this.textMessages)},autoScrollCasted(){return this.castObject(this.autoScroll)},textFormattingCasted(){return this.castObject(this.textFormatting)},linkOptionsCasted(){return this.castObject(this.linkOptions)},usernameOptionsCasted(){return this.castObject(this.usernameOptions)}},watch:{roomsCasted:{immediate:!0,deep:!0,handler(e,t){if((!e[0]||!e.find(n=>n.roomId===this.room.roomId))&&(this.showRoomsList=!0),!this.loadingMoreRooms&&this.loadFirstRoomCasted&&e[0]&&(!t||e.length!==t.length))if(this.roomId){const n=e.find(s=>s.roomId===this.roomId)||{};this.fetchRoom({room:n})}else!this.isMobile||this.singleRoomCasted?this.fetchRoom({room:this.orderedRooms[0]}):this.showRoomsList=!0}},loadingRoomsCasted(e){e&&(this.room={})},roomId:{immediate:!0,handler(e,t){if(e&&!this.loadingRoomsCasted&&this.roomsCasted.length){const n=this.roomsCasted.find(s=>s.roomId===e);this.fetchRoom({room:n})}else t&&!e&&(this.room={})}},room(e){!e||Object.entries(e).length===0||(T8(e),e.users.forEach(t=>{x8(t)}))},roomsListOpenedCasted:{immediate:!0,handler(e){this.showRoomsList=e}}},created(){this.updateResponsive(),window.addEventListener("resize",e=>{e.isTrusted&&this.updateResponsive()})},updated(){const e=document.querySelectorAll("[slot]");this.slots.length!==e.length&&(this.slots=e)},methods:{castBoolean(e){return e==="true"||e===!0},castArray(e){return e?Array.isArray(e)?e:JSON.parse(e):[]},castObject(e){return e?typeof e=="object"?e:JSON.parse(e):{}},updateResponsive(){this.isMobile=window.innerWidth<Number(this.responsiveBreakpoint)},toggleRoomsList(){this.showRoomsList=!this.showRoomsList,this.isMobile&&(this.room={}),this.$emit("toggle-rooms-list",{opened:this.showRoomsList})},fetchRoom({room:e}){this.room=e,this.fetchMessages({reset:!0}),this.isMobile&&(this.showRoomsList=!1)},fetchMoreRooms(){this.$emit("fetch-more-rooms")},roomInfo(){this.$emit("room-info",this.room)},addRoom(){this.$emit("add-room")},searchRoom(e){this.$emit("search-room",{value:e,roomId:this.room.roomId})},fetchMessages(e){this.$emit("fetch-messages",{room:this.room,options:e})},sendMessage(e){this.$emit("send-message",{...e,roomId:this.room.roomId})},editMessage(e){this.$emit("edit-message",{...e,roomId:this.room.roomId})},deleteMessage(e){this.$emit("delete-message",{message:e,roomId:this.room.roomId})},openFile({message:e,file:t}){this.mediaPreviewEnabledCasted&&t.action==="preview"?(this.previewFile=t.file,this.showMediaPreview=!0):this.$emit("open-file",{message:e,file:t})},openUserTag({user:e}){this.$emit("open-user-tag",{user:e})},openFailedMessage({message:e}){this.$emit("open-failed-message",{message:e,roomId:this.room.roomId})},menuActionHandler(e){this.$emit("menu-action-handler",{action:e,roomId:this.room.roomId})},roomActionHandler({action:e,roomId:t}){this.$emit("room-action-handler",{action:e,roomId:t})},messageActionHandler(e){this.$emit("message-action-handler",{...e,roomId:this.room.roomId})},messageSelectionActionHandler(e){this.$emit("message-selection-action-handler",{...e,roomId:this.room.roomId})},sendMessageReaction(e){this.$emit("send-message-reaction",{...e,roomId:this.room.roomId})},typingMessage(e){this.$emit("typing-message",{message:e,roomId:this.room.roomId})},textareaActionHandler(e){this.$emit("textarea-action-handler",{message:e,roomId:this.room.roomId})}}},m6={class:"vac-chat-container"};function v6(e,t,n,s,a,i){const o=mt("rooms-list"),r=mt("room"),f=mt("media-preview");return me(),xe("div",{class:"vac-card-window",style:nn([{height:n.height},i.cssVars])},[De("div",m6,[i.singleRoomCasted?qe("",!0):(me(),Ht(o,{key:0,"current-user-id":n.currentUserId,rooms:i.orderedRooms,"loading-rooms":i.loadingRoomsCasted,"rooms-loaded":i.roomsLoadedCasted,room:a.room,"room-actions":i.roomActionsCasted,"custom-search-room-enabled":n.customSearchRoomEnabled,"text-messages":i.t,"show-search":i.showSearchCasted,"show-add-room":i.showAddRoomCasted,"show-rooms-list":a.showRoomsList&&i.roomsListOpenedCasted,"text-formatting":i.textFormattingCasted,"link-options":i.linkOptionsCasted,"is-mobile":a.isMobile,"scroll-distance":n.scrollDistance,onFetchRoom:i.fetchRoom,onFetchMoreRooms:i.fetchMoreRooms,onLoadingMoreRooms:t[0]||(t[0]=u=>a.loadingMoreRooms=u),onAddRoom:i.addRoom,onSearchRoom:i.searchRoom,onRoomActionHandler:i.roomActionHandler},Wt({_:2},[Rt(a.slots,u=>({name:u.slot,fn:vt(d=>[We(e.$slots,u.slot,qt(zt(d)))])}))]),1032,["current-user-id","rooms","loading-rooms","rooms-loaded","room","room-actions","custom-search-room-enabled","text-messages","show-search","show-add-room","show-rooms-list","text-formatting","link-options","is-mobile","scroll-distance","onFetchRoom","onFetchMoreRooms","onAddRoom","onSearchRoom","onRoomActionHandler"])),Ge(r,{"current-user-id":n.currentUserId,rooms:i.roomsCasted,"room-id":a.room.roomId||"","load-first-room":i.loadFirstRoomCasted,messages:i.messagesCasted,"room-message":n.roomMessage,"messages-loaded":i.messagesLoadedCasted,"menu-actions":i.menuActionsCasted,"message-actions":i.messageActionsCasted,"message-selection-actions":i.messageSelectionActionsCasted,"auto-scroll":i.autoScrollCasted,"show-send-icon":i.showSendIconCasted,"show-files":i.showFilesCasted,"show-audio":i.showAudioCasted,"audio-bit-rate":n.audioBitRate,"audio-sample-rate":n.audioSampleRate,"show-emojis":i.showEmojisCasted,"show-reaction-emojis":i.showReactionEmojisCasted,"show-new-messages-divider":i.showNewMessagesDividerCasted,"show-footer":i.showFooterCasted,"text-messages":i.t,"single-room":i.singleRoomCasted,"show-rooms-list":a.showRoomsList&&i.roomsListOpenedCasted,"text-formatting":i.textFormattingCasted,"link-options":i.linkOptionsCasted,"is-mobile":a.isMobile,"loading-rooms":i.loadingRoomsCasted,"room-info-enabled":i.roomInfoEnabledCasted,"textarea-action-enabled":i.textareaActionEnabledCasted,"textarea-auto-focus":i.textareaAutoFocusCasted,"user-tags-enabled":i.userTagsEnabledCasted,"emojis-suggestion-enabled":i.emojisSuggestionEnabledCasted,"scroll-distance":n.scrollDistance,"accepted-files":n.acceptedFiles,"capture-files":n.captureFiles,"multiple-files":i.multipleFilesCasted,"templates-text":i.templatesTextCasted,"username-options":i.usernameOptionsCasted,"emoji-data-source":n.emojiDataSource,onToggleRoomsList:i.toggleRoomsList,onRoomInfo:i.roomInfo,onFetchMessages:i.fetchMessages,onSendMessage:i.sendMessage,onEditMessage:i.editMessage,onDeleteMessage:i.deleteMessage,onOpenFile:i.openFile,onOpenUserTag:i.openUserTag,onOpenFailedMessage:i.openFailedMessage,onMenuActionHandler:i.menuActionHandler,onMessageActionHandler:i.messageActionHandler,onMessageSelectionActionHandler:i.messageSelectionActionHandler,onSendMessageReaction:i.sendMessageReaction,onTypingMessage:i.typingMessage,onTextareaActionHandler:i.textareaActionHandler},Wt({_:2},[Rt(a.slots,u=>({name:u.slot,fn:vt(d=>[We(e.$slots,u.slot,qt(zt(d)))])}))]),1032,["current-user-id","rooms","room-id","load-first-room","messages","room-message","messages-loaded","menu-actions","message-actions","message-selection-actions","auto-scroll","show-send-icon","show-files","show-audio","audio-bit-rate","audio-sample-rate","show-emojis","show-reaction-emojis","show-new-messages-divider","show-footer","text-messages","single-room","show-rooms-list","text-formatting","link-options","is-mobile","loading-rooms","room-info-enabled","textarea-action-enabled","textarea-auto-focus","user-tags-enabled","emojis-suggestion-enabled","scroll-distance","accepted-files","capture-files","multiple-files","templates-text","username-options","emoji-data-source","onToggleRoomsList","onRoomInfo","onFetchMessages","onSendMessage","onEditMessage","onDeleteMessage","onOpenFile","onOpenUserTag","onOpenFailedMessage","onMenuActionHandler","onMessageActionHandler","onMessageSelectionActionHandler","onSendMessageReaction","onTypingMessage","onTextareaActionHandler"])]),Ge(vn,{name:"vac-fade-preview",appear:""},{default:vt(()=>[a.showMediaPreview?(me(),Ht(f,{key:0,file:a.previewFile,onCloseMediaPreview:t[1]||(t[1]=u=>a.showMediaPreview=!1)},Wt({_:2},[Rt(a.slots,u=>({name:u.slot,fn:vt(d=>[We(e.$slots,u.slot,qt(zt(d)))])}))]),1032,["file"])):qe("",!0)]),_:3})],4)}var h6=Jt(f6,[["render",v6],["styles",[d6]]]);const g6=n2(h6),Em="vue-advanced-chat";function p6(){customElements.get(Em)||customElements.define(Em,g6)}const Xs=$a("aetherTerminalService",()=>{const e=ie({isConnected:!1,isConnecting:!1,isReconnecting:!1,reconnectAttempts:0,maxReconnectAttempts:5,latency:0}),t=ie(null),n=ie({id:"",isActive:!1,isPaused:!1,isReconnecting:!1,lastActivity:new Date,supervisorControlled:!1,aiMonitoring:!0}),s=ie([]),a=ie([]),i=ie([]),o=ie(!1),r=ie({isActive:!0,monitoringRules:["System file modification detection","Privilege escalation monitoring","Network configuration changes","Service management operations","Data destruction prevention"],currentProcedure:"System maintenance checklist",procedureStep:1,totalSteps:5,lastAnalysis:new Date,riskAssessment:"low",suggestedActions:[]}),f=ie([]),u=ie({onShellOutput:[],onChatMessage:[],onAskAI:[]}),d=se(()=>s.value.length>0),c=se(()=>n.value.isPaused||n.value.isReconnecting||d.value||!e.value.isConnected),l=se(()=>s.value.filter($=>$.riskLevel==="critical")),m=se(()=>e.value.isConnected?"connected":e.value.isConnecting?"connecting":e.value.isReconnecting?"reconnecting":"disconnected"),v=$=>{t.value=$,console.log("Setting socket value:",$)},C=()=>{if(!t.value)return;const $=t.value;$.on("connect",()=>{console.log(" STORE: Socket connected successfully!"),console.log(" STORE: Socket ID:",$.id),e.value.isConnected=!0,e.value.isConnecting=!1,e.value.isReconnecting=!1,e.value.reconnectAttempts=0,e.value.lastConnected=new Date,e.value.connectionError=void 0,U("[SYSTEM] Connected to AetherTerm service"),console.log(" STORE: Emitting create_terminal event..."),$.emit("create_terminal",{session:n.value.id||"",user:"",path:""}),console.log(" STORE: create_terminal event sent")}),$.on("disconnect",ee=>{e.value.isConnected=!1,e.value.lastDisconnected=new Date,e.value.connectionError=ee,U(`[SYSTEM] Disconnected from AetherTerm service: ${ee}`),ee!=="io client disconnect"&&b()}),$.on("reconnect",ee=>{e.value.isReconnecting=!1,e.value.reconnectAttempts=ee,U(`[SYSTEM] Reconnected after ${ee} attempts`)}),$.on("reconnect_attempt",ee=>{e.value.reconnectAttempts=ee,U(`[SYSTEM] Reconnection attempt ${ee}`)}),$.on("reconnect_failed",()=>{e.value.isReconnecting=!1,e.value.connectionError="Max reconnection attempts reached",U("[SYSTEM] Failed to reconnect after maximum attempts")}),$.on("connect_error",ee=>{e.value.connectionError=ee.message,U(`[SYSTEM] Connection error: ${ee.message}`)}),$.on("terminal_output",ee=>{console.log("Received terminal_output:",ee),ee&&ee.data&&u.value.onShellOutput.forEach(re=>re(ee.data))}),$.on("terminal_ready",ee=>{console.log(" STORE: Terminal ready event received:",ee),console.log(" STORE: Setting session ID to:",ee.session),n.value.id=ee.session||"",n.value.isActive=!0,console.log(" STORE: Session updated:",{id:n.value.id,isActive:n.value.isActive})}),$.on("terminal_error",ee=>{console.log("Terminal error:",ee),U(`[ERROR] ${ee.error||"Unknown terminal error"}`)}),$.on("terminal_closed",ee=>{console.log("Terminal closed:",ee),n.value.isActive=!1,U("[SYSTEM] Terminal session closed")}),$.on("shell_output",ee=>{console.log("Received shell_output:",ee),u.value.onShellOutput.forEach(re=>re(ee))}),$.on("admin_pause_terminal",ee=>{console.log("Received admin_pause_terminal event",ee),k(ee.reason)}),$.on("admin_resume_terminal",()=>{console.log("Received admin_resume_terminal event"),M()}),$.on("command_approval",ee=>{ee.approved?D(ee.commandId):z(ee.commandId,ee.reason||"Rejected by admin")}),$.on("chat_message",ee=>{u.value.onChatMessage.forEach(re=>re(ee))})},b=()=>{e.value.reconnectAttempts>=e.value.maxReconnectAttempts||(e.value.isReconnecting=!0,n.value.isReconnecting=!0,U("[SYSTEM] Starting reconnection process..."))},_=()=>{if(console.log(" STORE: Connect function called"),console.log(" STORE: Current state:",{isConnected:e.value.isConnected,isConnecting:e.value.isConnecting,socketExists:!!t.value,socketConnected:t.value?.connected}),e.value.isConnected||e.value.isConnecting){console.log(" STORE: Already connected or connecting, returning");return}e.value.isConnecting=!0,U("[SYSTEM] Connecting to AetherTerm service..."),console.log(" STORE: Setting connecting state to true"),t.value?(console.log(" STORE: Socket exists, setting up listeners..."),C(),t.value.connected?console.log(" STORE: Socket already connected"):(console.log(" STORE: Socket not connected, initiating connection..."),t.value.connect())):console.error(" STORE: No socket available!")},g=$=>{u.value.onShellOutput.push($)},R=$=>{u.value.onChatMessage.push($)},P=$=>{if($){const ee=u.value.onShellOutput.indexOf($);ee!==-1&&u.value.onShellOutput.splice(ee,1)}else u.value.onShellOutput=[]},S=$=>{if($){const ee=u.value.onChatMessage.indexOf($);ee!==-1&&u.value.onChatMessage.splice(ee,1)}else u.value.onChatMessage=[]},L=ie(new Map),I=($,ee)=>{L.value.has($)||L.value.set($,[]),L.value.get($)?.push(ee),console.log(" STORE: Added terminal output callback for session:",$)},T=($,ee)=>{const re=L.value.get($);if(re){const G=re.indexOf(ee);G!==-1&&(re.splice(G,1),console.log(" STORE: Removed terminal output callback for session:",$)),re.length===0&&L.value.delete($)}},E=$=>{u.value.onAskAI.push($)},y=$=>{if($){const ee=u.value.onAskAI.indexOf($);ee!==-1&&u.value.onAskAI.splice(ee,1)}else u.value.onAskAI=[]},A=$=>{console.log("AetherTerminalServiceStore: Triggering Ask AI with text:",$),u.value.onAskAI.forEach(ee=>ee($))},w=$=>{n.value.id=$,n.value.isActive=!0,n.value.lastActivity=new Date,U(`[SYSTEM] Terminal session initialized: ${$}`)},k=$=>{n.value.isPaused=!0,o.value=!0,U(`[SYSTEM] Terminal paused: ${$}`)},M=()=>{n.value.isPaused=!1,o.value=!1,U("[SYSTEM] Terminal resumed")},x=$=>{const ee=Date.now().toString();let re="low",G="";return f.value.some(X=>$.toLowerCase().includes(X.toLowerCase()))?(re="critical",G="This command may cause system damage or data loss. Consider using safer alternatives."):$.includes("sudo")?(re="high",G="This command requires elevated privileges. Ensure you understand its implications."):($.includes("chmod")||$.includes("chown"))&&(re="medium",G="This command modifies file permissions. Verify the target files and permissions."),{id:ee,command:$,timestamp:new Date,status:re==="critical"?"pending":"approved",riskLevel:re,aiSuggestion:G,source:"user"}},F=$=>{const ee=x($);return ee.status==="pending"?(s.value.push(ee),U(`[AI] Command blocked for review: ${$}`),U(`[AI] Reason: ${ee.aiSuggestion}`),t.value&&t.value.emit("command_review_required",{commandId:ee.id,command:ee.command,riskLevel:ee.riskLevel,aiSuggestion:ee.aiSuggestion}),!1):(a.value.push(ee),n.value.lastActivity=new Date,t.value&&t.value.emit("terminal_command",{command:ee.command,commandId:ee.id}),!0)},V=$=>{n.value.lastActivity=new Date,t.value&&t.value.emit("terminal_input",{session:n.value.id,data:$})},D=$=>{const ee=s.value.findIndex(re=>re.id===$);if(ee!==-1){const re=s.value[ee];return re.status="approved",a.value.push(re),s.value.splice(ee,1),U(`[ADMIN] Command approved: ${re.command}`),t.value&&t.value.emit("terminal_command",{command:re.command,commandId:re.id}),re}return null},z=($,ee)=>{const re=s.value.findIndex(G=>G.id===$);if(re!==-1){const G=s.value[re];G.status="rejected",G.rejectionReason=ee,a.value.push(G),s.value.splice(re,1),U(`[ADMIN] Command rejected: ${G.command}`),U(`[ADMIN] Reason: ${ee}`)}},p=$=>{t.value&&t.value.emit("chat_message",$)},B=($,ee)=>{t.value&&n.value.id&&(console.log(`Sending terminal resize: ${$}x${ee} for session ${n.value.id}`),t.value.emit("terminal_resize",{session:n.value.id,cols:$,rows:ee}))},U=$=>{console.log("addToOutput called with:",$),i.value.push(`[${new Date().toLocaleTimeString()}] ${$}`),i.value.length>1e3&&(i.value=i.value.slice(-1e3))};return{connectionState:e,socket:t,session:n,pendingCommands:s,commandHistory:a,outputBuffer:i,isSupervisorLocked:o,dangerousCommands:f,aiMonitoring:r,hasPendingCommands:d,isTerminalBlocked:c,criticalCommandsPending:l,connectionStatus:m,connect:_,startReconnection:b,onShellOutput:g,onChatMessage:R,onAskAI:E,offShellOutput:P,offChatMessage:S,offAskAI:y,triggerAskAI:A,initializeSession:w,pauseTerminal:k,resumeTerminal:M,analyzeCommand:x,submitCommand:F,sendInput:V,approveCommand:D,rejectCommand:z,sendChatMessage:p,sendResize:B,addToOutput:U,setSocket:v,addTerminalOutputCallback:I,removeTerminalOutputCallback:T}}),_6="modulepreload",b6=function(e,t){return new URL(e,t).href},Rm={},qh=function(t,n,s){let a=Promise.resolve();if(n&&n.length>0){let o=function(d){return Promise.all(d.map(c=>Promise.resolve(c).then(l=>({status:"fulfilled",value:l}),l=>({status:"rejected",reason:l}))))};const r=document.getElementsByTagName("link"),f=document.querySelector("meta[property=csp-nonce]"),u=f?.nonce||f?.getAttribute("nonce");a=o(n.map(d=>{if(d=b6(d,s),d in Rm)return;Rm[d]=!0;const c=d.endsWith(".css"),l=c?'[rel="stylesheet"]':"";if(!!s)for(let C=r.length-1;C>=0;C--){const b=r[C];if(b.href===d&&(!c||b.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${l}`))return;const v=document.createElement("link");if(v.rel=c?"stylesheet":_6,c||(v.as="script"),v.crossOrigin="",v.href=d,u&&v.setAttribute("nonce",u),document.head.appendChild(v),c)return new Promise((C,b)=>{v.addEventListener("load",C),v.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(o){const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=o,window.dispatchEvent(r),!r.defaultPrevented)throw o}return a.then(o=>{for(const r of o||[])r.status==="rejected"&&i(r.reason);return t().catch(i)})},Al=$a("aetherTerminal",()=>{const e=Ii({isConnected:!1,isConnecting:!1}),t=ie(null),n=ie(new Map),s=ie(new Map),a=async()=>{if(e.isConnected||e.isConnecting)return e.isConnected;console.log(" AETHER_TERMINAL: Connecting to socket..."),e.isConnecting=!0,e.error=void 0;try{const{WorkspaceTokenManager:b}=await qh(async()=>{const{WorkspaceTokenManager:g}=await import("./workspaceToken.DvVMQcJB.js");return{WorkspaceTokenManager:g}},[],import.meta.url),_=b.getOrCreateToken();return t.value=uv("http://localhost:57575",{transports:["websocket","polling"],timeout:1e4,forceNew:!0,auth:{workspaceToken:_}}),i(),new Promise(g=>{const R=setTimeout(()=>{e.isConnecting=!1,e.error="Connection timeout",g(!1)},1e4);t.value?.on("connect",()=>{clearTimeout(R),e.isConnected=!0,e.isConnecting=!1,e.lastConnected=new Date,console.log(" AETHER_TERMINAL: Connected successfully with token:",_),g(!0)}),t.value?.on("connect_error",P=>{clearTimeout(R),e.isConnecting=!1,e.error=P.message,console.error(" AETHER_TERMINAL: Connection error:",P),g(!1)})})}catch(b){return e.isConnecting=!1,e.error=b instanceof Error?b.message:"Unknown error",console.error(" AETHER_TERMINAL: Failed to connect:",b),!1}},i=()=>{t.value&&(t.value.on("disconnect",b=>{e.isConnected=!1,e.error=b,console.log(" AETHER_TERMINAL: Disconnected:",b)}),t.value.on("terminal_output",b=>{if(b?.session&&b?.data){const _=s.value.get(b.session);_&&_(b.data)}}),t.value.on("terminal_ready",b=>{b?.session&&console.log(" AETHER_TERMINAL: Terminal ready:",b.session)}))},o=async b=>t.value?.connected?(console.log(" AETHER_TERMINAL: Attempting to reconnect to session:",b),new Promise(_=>{const g=P=>{P.session===b&&(t.value?.off("session_reconnected",g),t.value?.off("session_not_found",R),P.success?(n.value.set(b,{id:b,type:P.type||"pane",terminalId:P.terminalId||b,isActive:!0,createdAt:new Date}),console.log(" AETHER_TERMINAL: Successfully reconnected to session:",b),_(!0)):_(!1))},R=P=>{P.session===b&&(t.value?.off("session_reconnected",g),t.value?.off("session_not_found",R),console.log(" AETHER_TERMINAL: Session not found on server:",b),_(!1))};t.value?.on("session_reconnected",g),t.value?.on("session_not_found",R),t.value?.emit("reconnect_session",{session:b}),setTimeout(()=>{t.value?.off("session_reconnected",g),t.value?.off("session_not_found",R),_(!1)},3e3)})):!1,r=async(b,_,g="pure")=>{if(!t.value?.connected)return console.error(" AETHER_TERMINAL: Cannot request session - no connection"),null;const R=`aether_${_}_${b}`,P=n.value.get(R);return P&&P.isActive?(console.log(" AETHER_TERMINAL: Using existing session:",R),R):await o(R)?(console.log(" AETHER_TERMINAL: Successfully reconnected to existing session:",R),R):(console.log(" AETHER_TERMINAL: Requesting new session:",R),new Promise(L=>{const I=T=>{T.session&&T.session===R&&(n.value.set(T.session,{id:T.session,type:_,terminalId:b,isActive:!0,createdAt:new Date}),t.value?.off("terminal_ready",I),L(T.session))};t.value?.on("terminal_ready",I),t.value?.emit("create_terminal",{session:R,user:"",path:"",cols:80,rows:24,[_==="pane"?"paneId":"tabId"]:b,subType:g,reconnect:!!P}),setTimeout(()=>{t.value?.off("terminal_ready",I),L(null)},5e3)}))},f=(b,_)=>{if(!t.value?.connected){console.warn(" AETHER_TERMINAL: Cannot send input - no connection");return}t.value.emit("terminal_input",{session:b,data:_})},u=(b,_)=>{s.value.set(b,_),console.log(" AETHER_TERMINAL: Registered output callback for session:",b)},d=b=>{s.value.delete(b),console.log(" AETHER_TERMINAL: Unregistered output callback for session:",b)},c=b=>{n.value.delete(b),d(b),console.log(" AETHER_TERMINAL: Closed session:",b)},l=()=>{t.value&&(t.value.disconnect(),t.value=null),e.isConnected=!1,n.value.clear(),s.value.clear(),console.log(" AETHER_TERMINAL: Disconnected and cleaned up")},m=b=>new Promise(_=>{if(!t.value?.connected){console.warn(" AETHER_TERMINAL: Cannot reconnect - no connection"),_(!1);return}console.log(" AETHER_TERMINAL: Attempting to reconnect to session:",b);const g=P=>{P.session===b&&(t.value?.off("terminal_ready",g),t.value?.off("terminal_error",R),console.log(" AETHER_TERMINAL: Reconnected to session:",b),_(!0))},R=P=>{t.value?.off("terminal_ready",g),t.value?.off("terminal_error",R),console.error(" AETHER_TERMINAL: Failed to reconnect:",P.error),_(!1)};t.value.on("terminal_ready",g),t.value.on("terminal_error",R),t.value.emit("reconnect_session",{session:b}),setTimeout(()=>{t.value?.off("terminal_ready",g),t.value?.off("terminal_error",R),_(!1)},5e3)}),v=b=>new Promise(_=>{if(!t.value?.connected){_({error:"Not connected"});return}const g=R=>{t.value?.off("session_info",g),_(R)};t.value.on("session_info",g),t.value.emit("get_session_info",{session:b}),setTimeout(()=>{t.value?.off("session_info",g),_({error:"Timeout"})},2e3)}),C=()=>t.value;return{connectionState:e,socket:se(()=>t.value),sessions:n,connect:a,disconnect:l,requestSession:r,closeSession:c,reconnectSession:m,sendInput:f,registerOutputCallback:u,unregisterOutputCallback:d,getSocket:C,getSessionInfo:v}});function Tl(e){try{const t=e.split(".");if(t.length!==3)return null;const n=t[1],s=atob(n.replace(/-/g,"+").replace(/_/g,"/"));return JSON.parse(s)}catch(t){return console.error("Failed to decode JWT:",t),null}}function Wh(e){return e.exp?Date.now()>=e.exp*1e3:!0}function xl(){const e=localStorage.getItem("jwt_token")||localStorage.getItem("auth_token");if(e)return e;const t=sessionStorage.getItem("jwt_token")||sessionStorage.getItem("auth_token");if(t)return t;const s=new URLSearchParams(window.location.search).get("token");if(s)return s;const a=document.cookie.split(";");for(const i of a){const[o,r]=i.trim().split("=");if(o==="jwt_token"||o==="auth_token")return decodeURIComponent(r)}return null}function Yh(){const e=xl();if(!e)return!1;const t=Tl(e);return!t||Wh(t)?!1:!!(t.isSupervisor===!0||t.roles?.includes("supervisor")||t.roles?.includes("admin")||t.permissions?.includes("terminal:supervise")||t.permissions?.includes("admin:all"))}function y6(){const e=xl();if(!e)return null;const t=Tl(e);return!t||Wh(t)?null:{email:t.email,roles:t.roles,isSupervisor:Yh()}}const w6={key:0,class:"supervisor-control-panel"},k6={class:"panel-header"},S6={class:"control-section priority"},C6={class:"status-grid"},A6={class:"status-item"},T6={class:"value"},x6={class:"status-item"},E6={class:"status-item"},R6={class:"status-item"},M6={class:"control-section"},I6={class:"supervisord-controls"},B6={class:"control-buttons"},L6=["disabled"],O6=["disabled"],P6=["disabled"],$6={key:0,class:"process-list"},F6={class:"process-info"},D6={class:"process-name"},V6={class:"process-state"},N6={key:0,class:"process-pid"},j6={class:"process-actions"},H6=["onClick","disabled"],z6=["onClick","disabled"],U6=["onClick","disabled"],q6=["onClick","disabled"],W6={key:1,class:"no-processes"},Y6={class:"control-section"},K6={class:"ai-status"},G6={key:0,class:"current-procedure"},X6={class:"procedure-info"},Z6={class:"procedure-name"},Q6={class:"procedure-progress"},J6={class:"progress-bar"},e7={class:"progress-text"},t7={class:"monitoring-rules"},n7={class:"rules-list"},s7={key:1,class:"suggested-actions"},a7={class:"suggestions-list"},i7={class:"control-section"},o7={class:"control-buttons"},r7={key:0,class:"control-section"},l7={class:"pending-commands-list"},c7={class:"command-info"},u7={class:"command-header"},d7={class:"command-text"},f7={class:"command-meta"},m7={class:"timestamp"},v7={key:0,class:"ai-analysis"},h7={class:"analysis-content"},g7={class:"interactive-dialog"},p7={class:"dialog-options"},_7=["onClick"],b7=["onClick"],y7={class:"control-section"},w7={class:"command-history"},k7={class:"command-text"},S7={class:"command-meta"},C7={class:"timestamp"},A7={key:0,class:"rejection-reason"},T7={class:"logs-container"},x7={class:"logs-content"},E7={class:"modal-actions"},R7=["disabled"],M7={class:"command-to-reject"},I7={class:"form-group"},B7={key:1,class:"access-denied"},L7={class:"access-denied-content"},O7={key:0,class:"auth-error"},P7={key:1,class:"privilege-error"},$7={class:"user-info"},F7=kt({__name:"SupervisorControlPanel",setup(e){const t=Xs(),n=Al(),s=ie(null),a=ie([]),i=ie({mcp_server_running:!1,supervisord_url:"",config_path:""}),o=ie(!1),r=ie(!1),f=ie(!1),u=ie(null),d=ie("");sn(async()=>{s.value=y6(),console.log("=== JWT Authentication Debug ==="),console.log("User info loaded:",s.value);const V=xl();if(V){console.log("JWT token found:",V.substring(0,50)+"...");const D=Tl(V);console.log("JWT payload:",D),console.log("Is supervisor?",Yh())}else console.log("No JWT token found");console.log("================================="),s.value?.isSupervisor&&(await L(),await I())});const c=ie(!1),l=ie(null),m=ie(""),v=se(()=>{switch(t.connectionStatus){case"connected":return"status-connected";case"connecting":return"status-connecting";case"reconnecting":return"status-reconnecting";default:return"status-disconnected"}}),C=se(()=>t.commandHistory.slice(-10).reverse()),b=()=>{t.session.isPaused?t.resumeTerminal():t.pauseTerminal("Paused by supervisor")},_=V=>{t.approveCommand(V)},g=V=>{l.value=V,m.value="",c.value=!0},R=()=>{c.value=!1,l.value=null,m.value=""},P=()=>{l.value&&m.value.trim()&&(t.rejectCommand(l.value.id,m.value.trim()),R())},S=V=>new Date(V).toLocaleTimeString(),L=async()=>{try{if(!n.socket)return;const V=await new Promise(D=>{n.socket.emit("get_supervisord_status",{},D)});V?.status==="ok"&&(i.value=V.supervisord)}catch(V){console.error("Failed to get supervisord status:",V)}},I=async()=>{o.value=!0;try{if(!n.socket)return;const V=await new Promise(D=>{n.socket.emit("get_processes_list",{},D)});V?.status==="ok"&&(a.value=V.processes||[])}catch(V){console.error("Failed to get processes:",V)}finally{o.value=!1}},T=async V=>{try{if(!n.socket)return;(await new Promise(z=>{n.socket.emit("start_process",{name:V},z)}))?.status==="ok"&&await I()}catch(D){console.error(`Failed to start process ${V}:`,D)}},E=async V=>{try{if(!n.socket)return;(await new Promise(z=>{n.socket.emit("stop_process",{name:V},z)}))?.status==="ok"&&await I()}catch(D){console.error(`Failed to stop process ${V}:`,D)}},y=async V=>{try{if(!n.socket)return;(await new Promise(z=>{n.socket.emit("restart_process",{name:V},z)}))?.status==="ok"&&await I()}catch(D){console.error(`Failed to restart process ${V}:`,D)}},A=async()=>{const V=a.value.filter(D=>D.state==="STOPPED");for(const D of V)await T(D.name)},w=async()=>{const V=a.value.filter(D=>D.state==="RUNNING");for(const D of V)await E(D.name)},k=async V=>{u.value=V,f.value=!0,await M()},M=async()=>{if(!(!u.value||!n.socket)){r.value=!0;try{const V=await new Promise(D=>{n.socket.emit("get_process_logs",{name:u.value.name,lines:200},D)});V?.status==="ok"?d.value=V.logs||"No logs available":d.value="Failed to load logs"}catch(V){console.error("Failed to get process logs:",V),d.value="Error loading logs"}finally{r.value=!1}}},x=()=>{f.value=!1,u.value=null,d.value=""},F=V=>{switch(V){case"RUNNING":return"process-running";case"STOPPED":return"process-stopped";case"STARTING":return"process-starting";case"STOPPING":return"process-stopping";default:return"process-unknown"}};return(V,D)=>s.value?.isSupervisor?(Y(),J("div",w6,[h("div",k6,[D[3]||(D[3]=h("h3",null,"Supervisor Control Panel",-1)),h("div",{class:Se(["connection-status",v.value])},Q(At(t).connectionStatus),3)]),h("div",S6,[D[8]||(D[8]=h("h4",null,"System Status",-1)),h("div",C6,[h("div",A6,[D[4]||(D[4]=h("span",{class:"label"},"Session ID:",-1)),h("span",T6,Q(At(t).session.id),1)]),h("div",x6,[D[5]||(D[5]=h("span",{class:"label"},"Supervisor Control:",-1)),h("span",{class:Se(["value",{active:At(t).session.supervisorControlled}])},Q(At(t).session.supervisorControlled?"Enabled":"Disabled"),3)]),h("div",E6,[D[6]||(D[6]=h("span",{class:"label"},"AI Risk:",-1)),h("span",{class:Se(["value",`risk-${At(t).aiMonitoring.riskAssessment}`])},Q(At(t).aiMonitoring.riskAssessment.toUpperCase()),3)]),h("div",R6,[D[7]||(D[7]=h("span",{class:"label"},"Supervisord MCP:",-1)),h("span",{class:Se(["value",{active:i.value.mcp_server_running}])},Q(i.value.mcp_server_running?"Running":"Stopped"),3)])])]),h("div",M6,[D[9]||(D[9]=h("h4",null,"Process Management (Supervisord)",-1)),h("div",I6,[h("div",B6,[h("button",{onClick:I,disabled:o.value,class:"control-btn refresh-btn"},Q(o.value?"Loading...":"Refresh Processes"),9,L6),h("button",{onClick:A,disabled:o.value,class:"control-btn start-btn"}," Start All ",8,O6),h("button",{onClick:w,disabled:o.value,class:"control-btn stop-btn"}," Stop All ",8,P6)]),a.value.length>0?(Y(),J("div",$6,[(Y(!0),J(Je,null,wt(a.value,z=>(Y(),J("div",{key:z.name,class:Se(["process-item",F(z.state)])},[h("div",F6,[h("div",D6,Q(z.name),1),h("div",V6,Q(z.state),1),z.pid?(Y(),J("div",N6,"PID: "+Q(z.pid),1)):Me("",!0)]),h("div",j6,[h("button",{onClick:p=>T(z.name),disabled:z.state==="RUNNING"||o.value,class:"action-btn start-btn-small"}," Start ",8,H6),h("button",{onClick:p=>E(z.name),disabled:z.state==="STOPPED"||o.value,class:"action-btn stop-btn-small"}," Stop ",8,z6),h("button",{onClick:p=>y(z.name),disabled:o.value,class:"action-btn restart-btn-small"}," Restart ",8,U6),h("button",{onClick:p=>k(z),disabled:o.value,class:"action-btn logs-btn-small"}," Logs ",8,q6)])],2))),128))])):o.value?Me("",!0):(Y(),J("div",W6," No processes found. Check supervisord configuration. "))])]),h("div",Y6,[D[16]||(D[16]=h("h4",null,"AI Monitoring Status",-1)),h("div",K6,[h("div",{class:Se(["monitoring-indicator",{active:At(t).aiMonitoring.isActive}])},[D[10]||(D[10]=h("span",{class:"indicator-dot"},null,-1)),nt(" "+Q(At(t).aiMonitoring.isActive?"Active":"Inactive"),1)],2),At(t).aiMonitoring.currentProcedure?(Y(),J("div",G6,[D[11]||(D[11]=h("h5",null,"Current Procedure",-1)),h("div",X6,[h("div",Z6,Q(At(t).aiMonitoring.currentProcedure),1),h("div",Q6,[h("div",J6,[h("div",{class:"progress-fill",style:it({width:At(t).aiMonitoring.procedureStep/At(t).aiMonitoring.totalSteps*100+"%"})},null,4)]),h("span",e7," Step "+Q(At(t).aiMonitoring.procedureStep)+" of "+Q(At(t).aiMonitoring.totalSteps),1)])])])):Me("",!0),h("div",t7,[D[13]||(D[13]=h("h5",null,"Active Monitoring Rules",-1)),h("div",n7,[(Y(!0),J(Je,null,wt(At(t).aiMonitoring.monitoringRules,z=>(Y(),J("div",{key:z,class:"rule-item"},[D[12]||(D[12]=h("span",{class:"rule-indicator"},"",-1)),nt(" "+Q(z),1)]))),128))])]),At(t).aiMonitoring.suggestedActions.length>0?(Y(),J("div",s7,[D[15]||(D[15]=h("h5",null,"AI Suggestions",-1)),h("div",a7,[(Y(!0),J(Je,null,wt(At(t).aiMonitoring.suggestedActions,z=>(Y(),J("div",{key:z,class:"suggestion-item"},[D[14]||(D[14]=h("span",{class:"suggestion-icon"},"",-1)),nt(" "+Q(z),1)]))),128))])])):Me("",!0)])]),h("div",i7,[D[17]||(D[17]=h("h4",null,"Terminal Control",-1)),h("div",o7,[h("button",{onClick:b,class:Se([{active:At(t).session.isPaused},"control-btn pause-btn"])},Q(At(t).session.isPaused?"Resume":"Pause")+" Terminal ",3)])]),At(t).hasPendingCommands?(Y(),J("div",r7,[h("h4",null,"AI Command Review ("+Q(At(t).pendingCommands.length)+")",1),h("div",l7,[(Y(!0),J(Je,null,wt(At(t).pendingCommands,z=>(Y(),J("div",{key:z.id,class:"pending-command-item"},[h("div",c7,[h("div",u7,[h("div",d7,[h("code",null,Q(z.command),1)]),h("div",f7,[h("span",{class:Se(["risk-level",z.riskLevel])},Q(z.riskLevel.toUpperCase()),3),h("span",m7,Q(S(z.timestamp)),1)])]),z.aiSuggestion?(Y(),J("div",v7,[D[18]||(D[18]=h("div",{class:"analysis-header"},[h("span",{class:"ai-icon"},""),h("strong",null,"AI Analysis & Recommendation")],-1)),h("div",h7,Q(z.aiSuggestion),1)])):Me("",!0),h("div",g7,[D[19]||(D[19]=h("div",{class:"dialog-question"},[h("strong",null,"Do you want to proceed with this command?")],-1)),h("div",p7,[h("button",{onClick:p=>_(z.id),class:"action-btn approve-btn"},"  Yes, Execute ",8,_7),h("button",{onClick:p=>g(z),class:"action-btn reject-btn"},"  No, Block ",8,b7)])])])]))),128))])])):Me("",!0),h("div",y7,[D[21]||(D[21]=h("h4",null,"Recent Commands",-1)),h("div",w7,[(Y(!0),J(Je,null,wt(C.value,z=>(Y(),J("div",{key:z.id,class:Se(["history-item",z.status])},[h("div",k7,[h("code",null,Q(z.command),1)]),h("div",S7,[h("span",{class:Se(["status",z.status])},Q(z.status.toUpperCase()),3),h("span",C7,Q(S(z.timestamp)),1)]),z.rejectionReason?(Y(),J("div",A7,[D[20]||(D[20]=h("strong",null,"Rejected:",-1)),nt(" "+Q(z.rejectionReason),1)])):Me("",!0)],2))),128))])]),f.value?(Y(),J("div",{key:1,class:"modal-overlay",onClick:x},[h("div",{class:"modal-content logs-modal",onClick:D[0]||(D[0]=Sn(()=>{},["stop"]))},[h("h3",null,Q(u.value?.name)+" Logs",1),h("div",T7,[h("pre",x7,Q(d.value),1)]),h("div",E7,[h("button",{onClick:M,disabled:r.value,class:"action-btn refresh-btn"},Q(r.value?"Loading...":"Refresh"),9,R7),h("button",{onClick:x,class:"action-btn cancel-btn"},"Close")])])])):Me("",!0),c.value?(Y(),J("div",{key:2,class:"modal-overlay",onClick:R},[h("div",{class:"modal-content",onClick:D[2]||(D[2]=Sn(()=>{},["stop"]))},[D[23]||(D[23]=h("h3",null,"Reject Command",-1)),h("div",M7,[h("code",null,Q(l.value?.command),1)]),h("div",I7,[D[22]||(D[22]=h("label",null,"Rejection Reason:",-1)),an(h("textarea",{"onUpdate:modelValue":D[1]||(D[1]=z=>m.value=z),placeholder:"Enter reason for rejection...",rows:"3"},null,512),[[Di,m.value]])]),h("div",{class:"modal-actions"},[h("button",{onClick:P,class:"action-btn reject-btn"}," Reject Command "),h("button",{onClick:R,class:"action-btn cancel-btn"},"Cancel")])])])):Me("",!0)])):(Y(),J("div",B7,[h("div",L7,[s.value?(Y(),J("div",P7,[D[27]||(D[27]=h("h3",null," Access Restricted",-1)),D[28]||(D[28]=h("p",null,"Supervisor privileges required to access this panel.",-1)),h("div",$7,[h("p",null,[D[25]||(D[25]=h("strong",null,"Current user:",-1)),nt(" "+Q(s.value.email||"Unknown"),1)]),h("p",null,[D[26]||(D[26]=h("strong",null,"Roles:",-1)),nt(" "+Q(s.value.roles?.join(", ")||"None"),1)])]),D[29]||(D[29]=h("div",{class:"privilege-requirements"},[h("h4",null,"Required privileges (any of):"),h("ul",null,[h("li",null,[h("code",null,"isSupervisor: true")]),h("li",null,[h("code",null,'roles: ["supervisor", "admin"]')]),h("li",null,[h("code",null,'permissions: ["terminal:supervise", "admin:all"]')])])],-1))])):(Y(),J("div",O7,D[24]||(D[24]=[h("h3",null," Authentication Required",-1),h("p",null,"Please log in to access the Supervisor Control Panel.",-1),h("div",{class:"auth-details"},[h("p",null,"No valid JWT token found."),h("small",null,"Token sources checked: localStorage, sessionStorage, URL params, cookies")],-1)])))])]))}}),xt=(e,t)=>{const n=e.__vccOpts||e;for(const[s,a]of t)n[s]=a;return n},Kh=xt(F7,[["__scopeId","data-v-177c9395"]]),D7=$a("chat",()=>{const e=ie({id:"1",username:"User",role:"user",status:"online",permissions:{canControlTerminal:!1,canApproveCommands:!1,canViewLogs:!0},lastSeen:new Date}),t=ie([{id:"general",name:"General Chat",type:"general",participants:[],unreadCount:0,isActive:!0,permissions:{canSendMessages:!0,canControlTerminal:!1,canViewHistory:!0}},{id:"terminal-control",name:"Terminal Control",type:"terminal-control",participants:[],unreadCount:0,isActive:!0,permissions:{canSendMessages:!0,canControlTerminal:!0,canViewHistory:!0}},{id:"ai-assistance",name:"AI Assistant",type:"ai-assistance",participants:[],unreadCount:0,isActive:!0,permissions:{canSendMessages:!0,canControlTerminal:!1,canViewHistory:!0}}]),n=ie(new Map),s=ie("general"),a=ie(!1),i=ie(!1),o=ie(new Map);t.value.forEach(w=>{n.value.set(w.id,[])});const r=se(()=>t.value.find(w=>w.id===s.value)),f=se(()=>n.value.get(s.value)||[]),u=se(()=>t.value.reduce((w,k)=>w+k.unreadCount,0)),d=se(()=>t.value.flatMap(w=>w.participants).filter(w=>w.status==="online")),c=se(()=>t.value.flatMap(w=>w.participants).filter(w=>w.role==="admin")),l=w=>{Object.assign(e.value,w)},m=w=>{a.value=w,w&&(i.value=!1)},v=w=>{i.value=w},C=w=>{const k=t.value.find(M=>M.id===w);k&&(s.value=w,k.unreadCount=0)},b=(w,k)=>{const M={...k,id:Date.now().toString()+Math.random().toString(36).substr(2,9),timestamp:new Date},x=n.value.get(w)||[];x.push(M),n.value.set(w,x);const F=t.value.find(V=>V.id===w);return F&&(F.lastMessage=M,w!==s.value&&k.senderId!==e.value.id&&F.unreadCount++),M},_=(w,k="text",M)=>b(s.value,{content:w,senderId:e.value.id,username:e.value.username,avatar:e.value.avatar,roomId:s.value,type:k,status:"sending",metadata:M}),g=(w,k)=>{for(const[M,x]of n.value.entries()){const F=x.find(V=>V.id===w);if(F){F.status=k;break}}},R=(w,k,M)=>b(w,{content:k,senderId:"system",username:"System",roomId:w,type:"system",status:"sent",metadata:M});return{currentUser:e,rooms:t,messages:n,activeRoomId:s,isConnected:a,isReconnecting:i,typingUsers:o,activeRoom:r,activeMessages:f,totalUnreadCount:u,onlineUsers:d,adminUsers:c,setCurrentUser:l,setConnectionStatus:m,setReconnecting:v,switchRoom:C,addMessage:b,sendMessage:_,updateMessageStatus:g,addSystemMessage:R,addCommandMessage:(w,k,M)=>b(w,{content:`Command: ${k}`,senderId:e.value.id,username:e.value.username,roomId:w,type:"command",status:"sent",metadata:{commandId:M}}),addUserToRoom:(w,k)=>{const M=t.value.find(x=>x.id===w);if(M){const x=M.participants.find(F=>F.id===k.id);x?Object.assign(x,k):(M.participants.push(k),R(w,`${k.username} joined the room`))}},removeUserFromRoom:(w,k)=>{const M=t.value.find(x=>x.id===w);if(M){const x=M.participants.findIndex(F=>F.id===k);if(x!==-1){const F=M.participants[x];M.participants.splice(x,1),R(w,`${F.username} left the room`)}}},updateUserStatus:(w,k)=>{t.value.forEach(M=>{const x=M.participants.find(F=>F.id===w);x&&(x.status=k,x.lastSeen=new Date)})},setUserTyping:(w,k,M)=>{const x=o.value.get(w)||[];if(M)x.includes(k)||x.push(k);else{const F=x.indexOf(k);F!==-1&&x.splice(F,1)}o.value.set(w,x)},getTypingUsers:w=>{const k=o.value.get(w)||[],M=t.value.find(x=>x.id===w);return M?k.map(x=>M.participants.find(F=>F.id===x)).filter(x=>x&&x.id!==e.value.id):[]},clearMessages:w=>{n.value.set(w,[])},markAllAsRead:w=>{const k=t.value.find(M=>M.id===w);k&&(k.unreadCount=0)}}}),V7={class:"simple-chat-container"},N7={class:"chat-header"},j7={class:"status-info"},H7={key:0,class:"ai-info"},z7={class:"provider"},U7={key:0,class:"model"},q7={class:"message-header"},W7={class:"username"},Y7={class:"timestamp"},K7={class:"message-content"},G7={key:0,class:"streaming-content"},X7={key:1},Z7={key:0,class:"command-suggestions"},Q7={class:"commands-list"},J7={class:"command-text"},eC=["onClick","title"],tC={key:0,class:"ai-typing"},nC={key:1,class:"no-messages"},sC={class:"chat-input"},aC=["onKeydown","placeholder","disabled"],iC={class:"input-actions"},oC={class:"input-help"},rC=["disabled"],lC=kt({__name:"SimpleChatComponent",setup(e,{expose:t}){const n=Xs(),s=ie([]),a=ie(""),i=ie(null),o=ie(null),r=ie({provider:"unknown",model:"unknown",available:!1,status:"disconnected"}),f=se(()=>n.connectionState.isConnected&&r.value.available),u=se(()=>n.connectionState.isConnected?r.value.available?"Type a message... (Ctrl+Enter to send)":"AI unavailable - please wait for connection":"Terminal disconnected - cannot send messages"),d=se(()=>n.connectionState.isConnected?r.value.available?"Ctrl+Enter to send":"Waiting for AI connection":"Connect to terminal first"),c=(I,T,E="user")=>{const y={id:Date.now().toString(),username:I,content:T,timestamp:new Date,type:E};return s.value.push(y),Yt(()=>{i.value&&(i.value.scrollTop=i.value.scrollHeight)}),y},l=()=>{if(!a.value.trim()||!f.value){n.connectionState.isConnected?r.value.available||c("System","Cannot send message: AI service unavailable","system"):c("System","Cannot send message: Terminal not connected","system");return}const I=a.value.trim();c("You",I,"user"),C(I),a.value="",Yt(()=>{o.value?.focus()})},m=ie(!1),v=ie(""),C=async I=>{if(!n.socket||!n.connectionState.isConnected){console.warn("Socket not available for AI chat"),c("System","Cannot send message: Terminal connection unavailable","system");return}if(!r.value.available){console.warn("AI service not available"),c("System","Cannot send message: AI service unavailable. Please wait for AI to connect.","system");return}const T=Date.now().toString()+Math.random().toString(36).substr(2,9);v.value=T;const E=c("Aether AI","","ai");E.streaming=!0,E.messageId=T,m.value=!0,n.socket.emit("ai_chat_message",{message:I,message_id:T,terminal_session:n.session.id})},b=I=>{console.log("SimpleChatComponent: Received external message:",I),c("Terminal Selection",I,"user"),C(I)};t({handleExternalMessage:b}),sn(()=>{c("Aether AI","Welcome to Aether Assistant! I am your AI assistant for terminal operations, troubleshooting, and guidance.","system"),n.onChatMessage(A=>{console.log("Received chat message:",A),c(A.username||"Unknown User",A.message||A.content,"user")}),n.onAskAI(A=>{console.log("SimpleChatComponent: Received Ask AI event:",A);const w=`Please analyze this terminal output: "${A}"`;b(w)});const I=()=>{n.socket&&(n.socket.off("ai_chat_typing"),n.socket.off("ai_chat_chunk"),n.socket.off("ai_chat_complete"),n.socket.off("ai_chat_error"),n.socket.off("ai_info_response"),n.socket.on("ai_chat_typing",A=>{m.value=A.typing}),n.socket.on("ai_chat_chunk",A=>{const w=A.message_id,k=A.chunk,M=s.value.find(x=>x.messageId===w);M&&(M.content+=k,Yt(()=>{i.value&&(i.value.scrollTop=i.value.scrollHeight)}))}),n.socket.on("ai_chat_complete",A=>{const w=A.message_id,k=A.full_response,M=s.value.find(x=>x.messageId===w);M&&(M.content=k,M.streaming=!1),m.value=!1,v.value=""}),n.socket.on("ai_chat_error",A=>{const w=A.message_id,k=A.error,M=s.value.find(x=>x.messageId===w);M&&(M.content=`Sorry, I encountered an error: ${k}`,M.streaming=!1,M.type="system"),m.value=!1,v.value=""}),n.socket.on("ai_info_response",A=>{r.value={provider:A.provider||"unknown",model:A.model||"unknown",available:A.available||!1,status:A.status||"disconnected",error:A.error},console.log("AI Info received:",r.value)}))};I();let T=!1;const y=setInterval(()=>{n.connectionState.isConnected&&n.socket&&!T&&(I(),R(),T=!0)},1e3);Fa(()=>{clearInterval(y),n.offChatMessage(),n.offAskAI(),n.socket&&(n.socket.off("ai_chat_typing"),n.socket.off("ai_chat_chunk"),n.socket.off("ai_chat_complete"),n.socket.off("ai_chat_error"),n.socket.off("ai_info_response"))})});const _=I=>I.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),g=()=>n.connectionState.isConnected?r.value.available?"Connected":"AI Unavailable":"Terminal Disconnected",R=()=>{n.socket&&n.connectionState.isConnected&&n.socket.emit("ai_get_info",{})},P=I=>{if(!I)return[];const T=[],E=/```(?:bash|shell|sh)?\s*\n?(.*?)\n?```/gis,y=I.match(E);y&&y.forEach(k=>{const M=k.replace(/```(?:bash|shell|sh)?\s*\n?|\n?```/gi,"").trim();if(M&&S(M)){const x=M.split(`
`).map(F=>F.trim()).filter(F=>F);T.push(...x)}});const A=/`([^`]+)`/g;let w;for(;(w=A.exec(I))!==null;){const k=w[1].trim();S(k)&&!T.includes(k)&&T.push(k)}return T.slice(0,5)},S=I=>{if(!I||I.length<2||I.length>200)return!1;const T=["ls","cd","pwd","mkdir","rmdir","rm","cp","mv","touch","cat","less","more","grep","find","which","whereis","locate","du","df","ps","top","htop","kill","killall","jobs","nohup","screen","tmux","chmod","chown","chgrp","tar","gzip","gunzip","zip","unzip","wget","curl","ssh","scp","rsync","git","docker","npm","yarn","pip","apt","yum","brew","systemctl","service","sudo","su","whoami","id","groups","history","echo","printf","date","uptime","uname","hostname","w","who","last","crontab","at","watch"],E=I.split(/\s+/)[0].toLowerCase();return T.some(y=>E.startsWith(y))||/^[a-zA-Z][a-zA-Z0-9_-]*(\s|$)/.test(I)||/^\.\/[a-zA-Z0-9_.-]+/.test(I)||/^~?\/[a-zA-Z0-9_.-/]+/.test(I)},L=I=>{if(!n.connectionState.isConnected){c("System","Cannot send command: Terminal not connected","system");return}const T=I+"\r";n.sendInput(T),c("System",`Command sent to terminal: ${I}`,"system"),console.log("Command sent to terminal:",I)};return(I,T)=>(Y(),J("div",V7,[h("div",N7,[T[1]||(T[1]=h("h3",null,"Aether Assistant",-1)),h("div",j7,[r.value.provider&&r.value.provider!=="unknown"?(Y(),J("div",H7,[h("span",z7,Q(r.value.provider),1),r.value.model&&r.value.model!=="unknown"?(Y(),J("span",U7,Q(r.value.model),1)):Me("",!0)])):Me("",!0),h("div",{class:Se(["connection-status",{connected:At(n).connectionState.isConnected&&r.value.available}])},Q(g()),3)])]),h("div",{class:"chat-messages",ref_key:"messagesContainer",ref:i},[(Y(!0),J(Je,null,wt(s.value,E=>(Y(),J("div",{key:E.id,class:Se(["message",E.type])},[h("div",q7,[h("span",W7,Q(E.username),1),h("span",Y7,Q(_(E.timestamp)),1)]),h("div",K7,[E.streaming?(Y(),J("span",G7,[nt(Q(E.content),1),T[2]||(T[2]=h("span",{class:"cursor"},"|",-1))])):(Y(),J("div",X7,[nt(Q(E.content)+" ",1),E.type==="ai"&&P(E.content).length>0?(Y(),J("div",Z7,[T[3]||(T[3]=h("div",{class:"commands-header"},[h("span",null," Suggested Commands:")],-1)),h("div",Q7,[(Y(!0),J(Je,null,wt(P(E.content),(y,A)=>(Y(),J("div",{key:A,class:"command-item"},[h("code",J7,Q(y),1),h("button",{onClick:w=>L(y),class:"send-command-btn",title:`Send '${y}' to terminal`},"  Send ",8,eC)]))),128))])])):Me("",!0)]))])],2))),128)),m.value?(Y(),J("div",tC,T[4]||(T[4]=[h("div",{class:"typing-indicator"},[h("span",{class:"username"},"Aether AI"),h("div",{class:"typing-dots"},[h("span"),h("span"),h("span")])],-1)]))):Me("",!0),s.value.length===0?(Y(),J("div",nC,T[5]||(T[5]=[h("p",null,"No messages yet. Start a conversation with Aether AI!",-1)]))):Me("",!0)],512),h("div",sC,[an(h("textarea",{"onUpdate:modelValue":T[0]||(T[0]=E=>a.value=E),onKeydown:[_o(Sn(l,["ctrl"]),["enter"]),_o(Sn(l,["meta"]),["enter"])],placeholder:u.value,disabled:!f.value,class:"message-input",rows:"3",ref_key:"messageTextarea",ref:o},null,40,aC),[[Di,a.value]]),h("div",iC,[h("div",oC,[h("small",null,Q(d.value),1)]),h("button",{onClick:l,disabled:!a.value.trim()||!f.value,class:"send-button"}," Send ",8,rC)])])]))}}),cC=xt(lC,[["__scopeId","data-v-74ea40b9"]]),kr={mode:"dark",colorScheme:"default",customColors:{},fontFamily:"Monaco, 'Courier New', monospace",fontSize:14,lineHeight:1.2,cursorStyle:"block",cursorBlink:!0},qo=$a("theme",()=>{const e=ie({...kr}),t=ie({modes:["light","dark","auto"],colorSchemes:["default","solarized-dark","dracula","nord"],schemePreviews:{}}),n=ie(null),s=ie(!1),a=se(()=>e.value.mode==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:e.value.mode==="dark"),i=se(()=>{if(!n.value)return"";const b=n.value,_=e.value,g={"--terminal-background":b.background,"--terminal-foreground":b.foreground,"--terminal-cursor":b.cursor,"--terminal-selection":b.selection,"--terminal-black":b.black,"--terminal-red":b.red,"--terminal-green":b.green,"--terminal-yellow":b.yellow,"--terminal-blue":b.blue,"--terminal-magenta":b.magenta,"--terminal-cyan":b.cyan,"--terminal-white":b.white,"--terminal-bright-black":b.bright_black,"--terminal-bright-red":b.bright_red,"--terminal-bright-green":b.bright_green,"--terminal-bright-yellow":b.bright_yellow,"--terminal-bright-blue":b.bright_blue,"--terminal-bright-magenta":b.bright_magenta,"--terminal-bright-cyan":b.bright_cyan,"--terminal-bright-white":b.bright_white,"--terminal-font-family":_.fontFamily,"--terminal-font-size":`${_.fontSize}px`,"--terminal-line-height":_.lineHeight.toString(),"--terminal-cursor-style":_.cursorStyle,"--theme-mode":_.mode,"--ui-background":a.value?b.background:"#ffffff","--ui-surface":a.value?b.bright_black:"#f5f5f5","--ui-primary":b.blue,"--ui-text":a.value?b.foreground:b.black,"--ui-text-secondary":a.value?b.bright_black:b.bright_white,"--ui-border":a.value?b.bright_black:"#e0e0e0"};return Object.entries(g).map(([R,P])=>`${R}: ${P}`).join("; ")}),o=async()=>{s.value=!0;try{const b=localStorage.getItem("aetherterm-theme-config");if(b){const _=JSON.parse(b);e.value={...kr,..._}}await f()}catch(b){console.error("Failed to load theme config:",b),e.value={...kr},await f()}finally{s.value=!1}},r=async()=>{try{localStorage.setItem("aetherterm-theme-config",JSON.stringify(e.value)),await f()}catch(b){console.error("Failed to save theme config:",b)}},f=async()=>{try{const b={default:{background:"#1e1e1e",foreground:"#d4d4d4",cursor:"#ffffff",selection:"#264f78",black:"#000000",red:"#cd3131",green:"#0dbc79",yellow:"#e5e510",blue:"#2472c8",magenta:"#bc3fbc",cyan:"#11a8cd",white:"#e5e5e5",bright_black:"#666666",bright_red:"#f14c4c",bright_green:"#23d18b",bright_yellow:"#f5f543",bright_blue:"#3b8eea",bright_magenta:"#d670d6",bright_cyan:"#29b8db",bright_white:"#e5e5e5"},"solarized-dark":{background:"#002b36",foreground:"#839496",cursor:"#93a1a1",selection:"#073642",black:"#073642",red:"#dc322f",green:"#859900",yellow:"#b58900",blue:"#268bd2",magenta:"#d33682",cyan:"#2aa198",white:"#eee8d5",bright_black:"#002b36",bright_red:"#cb4b16",bright_green:"#586e75",bright_yellow:"#657b83",bright_blue:"#839496",bright_magenta:"#6c71c4",bright_cyan:"#93a1a1",bright_white:"#fdf6e3"},"solarized-light":{background:"#fdf6e3",foreground:"#657b83",cursor:"#586e75",selection:"#eee8d5",black:"#073642",red:"#dc322f",green:"#859900",yellow:"#b58900",blue:"#268bd2",magenta:"#d33682",cyan:"#2aa198",white:"#eee8d5",bright_black:"#002b36",bright_red:"#cb4b16",bright_green:"#586e75",bright_yellow:"#657b83",bright_blue:"#839496",bright_magenta:"#6c71c4",bright_cyan:"#93a1a1",bright_white:"#fdf6e3"},dracula:{background:"#282a36",foreground:"#f8f8f2",cursor:"#f8f8f0",selection:"#44475a",black:"#21222c",red:"#ff5555",green:"#50fa7b",yellow:"#f1fa8c",blue:"#bd93f9",magenta:"#ff79c6",cyan:"#8be9fd",white:"#f8f8f2",bright_black:"#6272a4",bright_red:"#ff6e6e",bright_green:"#69ff94",bright_yellow:"#ffffa5",bright_blue:"#d6acff",bright_magenta:"#ff92df",bright_cyan:"#a4ffff",bright_white:"#ffffff"},nord:{background:"#2e3440",foreground:"#d8dee9",cursor:"#d8dee9",selection:"#4c566a",black:"#3b4252",red:"#bf616a",green:"#a3be8c",yellow:"#ebcb8b",blue:"#81a1c1",magenta:"#b48ead",cyan:"#88c0d0",white:"#e5e9f0",bright_black:"#4c566a",bright_red:"#bf616a",bright_green:"#a3be8c",bright_yellow:"#ebcb8b",bright_blue:"#81a1c1",bright_magenta:"#b48ead",bright_cyan:"#8fbcbb",bright_white:"#eceff4"},monokai:{background:"#272822",foreground:"#f8f8f2",cursor:"#f8f8f0",selection:"#49483e",black:"#272822",red:"#f92672",green:"#a6e22e",yellow:"#f4bf75",blue:"#66d9ef",magenta:"#ae81ff",cyan:"#a1efe4",white:"#f8f8f2",bright_black:"#75715e",bright_red:"#f92672",bright_green:"#a6e22e",bright_yellow:"#f4bf75",bright_blue:"#66d9ef",bright_magenta:"#ae81ff",bright_cyan:"#a1efe4",bright_white:"#f9f8f5"},"gruvbox-dark":{background:"#282828",foreground:"#ebdbb2",cursor:"#ebdbb2",selection:"#3c3836",black:"#282828",red:"#cc241d",green:"#98971a",yellow:"#d79921",blue:"#458588",magenta:"#b16286",cyan:"#689d6a",white:"#a89984",bright_black:"#928374",bright_red:"#fb4934",bright_green:"#b8bb26",bright_yellow:"#fabd2f",bright_blue:"#83a598",bright_magenta:"#d3869b",bright_cyan:"#8ec07c",bright_white:"#ebdbb2"},"gruvbox-light":{background:"#fbf1c7",foreground:"#3c3836",cursor:"#3c3836",selection:"#ebdbb2",black:"#fbf1c7",red:"#cc241d",green:"#98971a",yellow:"#d79921",blue:"#458588",magenta:"#b16286",cyan:"#689d6a",white:"#7c6f64",bright_black:"#928374",bright_red:"#9d0006",bright_green:"#79740e",bright_yellow:"#b57614",bright_blue:"#076678",bright_magenta:"#8f3f71",bright_cyan:"#427b58",bright_white:"#3c3836"}};n.value=b[e.value.colorScheme]||b.default,e.value.customColors&&(n.value={...n.value,...e.value.customColors})}catch(b){console.error("Failed to load colors:",b)}},u=async b=>{e.value.mode=b,await r()},d=async b=>{e.value.colorScheme=b,await r()},c=async b=>{e.value.fontFamily=b,await r()},l=async b=>{e.value.fontSize=Math.max(8,Math.min(72,b)),await r()},m=async(b,_)=>{e.value.customColors[b]=_,await r()},v=async()=>{e.value={...kr},await r()},C=()=>{const b=document.documentElement,_=i.value;_&&_.split("; ").forEach(R=>{const[P,S]=R.split(": ");P&&S&&b.style.setProperty(P.trim(),S.trim())}),document.body.className=document.body.className.replace(/theme-\w+/g,""),document.body.classList.add(`theme-${a.value?"dark":"light"}`)};return rt(i,C,{immediate:!0}),rt(()=>e.value.mode,()=>{e.value.mode==="auto"&&window.matchMedia("(prefers-color-scheme: dark)").addListener(C)}),{themeConfig:e,availableThemes:t,currentColors:n,isLoading:s,isDarkMode:a,cssVariables:i,loadThemeConfig:o,saveThemeConfig:r,loadColors:f,setThemeMode:u,setColorScheme:d,setFontFamily:c,setFontSize:l,setCustomColor:m,resetTheme:v,applyTheme:C}}),Ls="aetherterm_workspaces",_c="aetherterm_current_workspace";class no{static persist(t,n){try{const s={...t,tabs:t.tabs.map(a=>({...a,panes:a.panes.map(i=>({...i,sessionId:i.sessionId,lastActivity:i.lastActivity?.toISOString()})),lastActivity:a.lastActivity?.toISOString()})),lastAccessed:t.lastAccessed.toISOString()};localStorage.setItem(`${Ls}_${t.id}`,JSON.stringify(s)),localStorage.setItem(Ls,JSON.stringify(n)),console.log(" WORKSPACE: Persisted workspace to localStorage:",t.id)}catch(s){console.error(" WORKSPACE: Failed to persist workspace:",s)}}static saveCurrentWorkspaceId(t){try{localStorage.setItem(_c,t)}catch(n){console.error(" WORKSPACE: Failed to save current workspace ID:",n)}}static loadAll(){try{const t=JSON.parse(localStorage.getItem(Ls)||"[]"),n=[];for(const s of t){const a=localStorage.getItem(`${Ls}_${s}`);if(a){const i=JSON.parse(a),o={...i,lastAccessed:new Date(i.lastAccessed),tabs:i.tabs.map(r=>({...r,panes:r.panes.map(f=>({...f,lastActivity:f.lastActivity?new Date(f.lastActivity):new Date})),lastActivity:r.lastActivity?new Date(r.lastActivity):new Date}))};n.push(o)}}return console.log(" WORKSPACE: Loaded",n.length,"workspaces from localStorage"),n}catch(t){return console.error(" WORKSPACE: Failed to load workspaces:",t),[]}}static getLastWorkspaceId(){try{return localStorage.getItem(_c)}catch{return null}}static clearAll(){try{const t=JSON.parse(localStorage.getItem(Ls)||"[]");for(const n of t)localStorage.removeItem(`${Ls}_${n}`);localStorage.removeItem(Ls),localStorage.removeItem(_c),console.log(" WORKSPACE: Cleared all workspace data from localStorage")}catch(t){console.error(" WORKSPACE: Failed to clear workspace data:",t)}}static remove(t){try{localStorage.removeItem(`${Ls}_${t}`);const s=JSON.parse(localStorage.getItem(Ls)||"[]").filter(a=>a!==t);localStorage.setItem(Ls,JSON.stringify(s)),console.log(" WORKSPACE: Removed workspace from localStorage:",t)}catch(n){console.error(" WORKSPACE: Failed to remove workspace:",n)}}}class uC{listeners=new Map;on(t,n){this.listeners.has(t)||this.listeners.set(t,new Set),this.listeners.get(t).add(n)}off(t,n){const s=this.listeners.get(t);s&&s.delete(n)}emit(t,...n){const s=this.listeners.get(t);s&&s.forEach(a=>{try{a(...n)}catch(i){console.error(`Error in event handler for ${t}:`,i)}})}emitTabCreated(t){this.emit("tabCreated",t)}emitTabClosed(t){this.emit("tabClosed",t)}emitTabActivated(t){this.emit("tabActivated",t)}emitPaneCreated(t){this.emit("paneCreated",t)}emitPaneClosed(t){this.emit("paneClosed",t)}}const ri=new uC;class ru{static createPane(t,n,s){return{id:`pane_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:t,sessionId:s,title:n,isActive:!0}}static createTerminalPane(t,n){return this.createPane("terminal",t,n)}static createAiChatPane(t="AI Chat"){return this.createPane("ai-chat",t)}static createLogViewerPane(t="Logs"){return this.createPane("log-viewer",t)}}const ca=$a("terminalTab",()=>{const e=ie([]),t=ie(null),n=ie(1),s=ie(null),a=se(()=>e.value.filter(x=>x.isActive)),i=se(()=>e.value.filter(x=>x.isActive)),o=se(()=>t.value==="log-monitor-fixed"?s.value:e.value.find(x=>x.id===t.value)||null),r=se(()=>e.value.filter(x=>x.type==="terminal")),f=se(()=>e.value.filter(x=>x.type==="ai-agent")),u=se(()=>e.value.filter(x=>x.type==="log-monitor")),d=se(()=>t.value==="log-monitor-fixed"),c=(x,F,V,D)=>{console.log(" STORE: createTab called with:",{type:x,title:F,subType:V,serverContext:D});const z=`tab-${n.value++}`;let p="";x==="terminal"?p=`Terminal ${r.value.length+1}`:x==="ai-agent"?p=`AI Chat ${f.value.length+1}`:x==="log-monitor"&&(p="Log Monitor"),x==="terminal"&&V==="inventory"&&D&&(p=`${D.name}`);const B={id:z,title:F||p,type:x,subType:V,isActive:!0,lastActivity:new Date,status:"connecting",serverContext:D};console.log(" STORE: Created new tab:",B),e.value.push(B),t.value=z,console.log(" STORE: Tab added to store, total tabs:",e.value.length),console.log(" STORE: Active tab ID set to:",z);const U={id:z,title:F||p,type:x,subType:V,isActive:!0,panes:x==="terminal"?[ru.createTerminalPane(F||p)]:[],layout:"single",lastActivity:new Date};return ri.emitTabCreated(U),B},l=x=>e.value.find(V=>V.id===x)?.sessionId,m=(x,F)=>{const V=e.value.find(D=>D.id===x);V&&(V.sessionId=F,console.log(" STORE: Set session for tab:",x,"-> session:",F))},v=x=>{const F=e.value.findIndex(D=>D.id===x);if(F===-1)return;const V=e.value[F];if(V.isActive=!1,t.value===x){const D=e.value.filter(z=>z.isActive&&z.id!==x);t.value=D.length>0?D[D.length-1].id:null}ri.emitTabClosed(x),setTimeout(()=>{const D=e.value.findIndex(z=>z.id===x);D!==-1&&e.value.splice(D,1)},100)},C=x=>{if(x==="log-monitor-fixed"){t.value=x,s.value&&(s.value.lastActivity=new Date);return}const F=e.value.find(V=>V.id===x);F&&(t.value=x,F.lastActivity=new Date,e.value.forEach(V=>{V.isActive=!1}),F.isActive=!0,ri.emitTabActivated(x))},b=()=>{t.value="log-monitor-fixed",s.value&&(s.value.lastActivity=new Date)},_=(x,F)=>{const V=e.value.find(D=>D.id===x);V&&(V.title=F)},g=(x,F)=>{const V=e.value.find(D=>D.id===x);V&&(V.status=F)},R=x=>{const F=e.value.find(V=>V.id===x);F&&(F.commandsExecuted=!0)},P=x=>e.value.find(V=>V.id===x)?.preExecutionCommands||[],S=x=>{const F=e.value.find(V=>V.id===x);return!!(F&&F.preExecutionCommands&&!F.commandsExecuted)},L=(x,F)=>{const V=e.value.find(D=>D.id===x);V&&(V.sessionId=F)},I=(x,F)=>{const V={id:x,title:`${F==="main-agent"?"Main Agent":"Sub Agent"}`,type:"terminal",subType:F,status:"connecting",isActive:!1,order:e.value.length+1e3,sessionId:x,lastActivity:new Date};e.value.push(V),console.log(`Created terminal session: ${x} (${F})`)},T=x=>{const F=e.value.findIndex(V=>V.id===x);F>-1&&(e.value.splice(F,1),console.log(`Closed terminal session: ${x}`))},E=x=>{const F=c("terminal",void 0,"inventory",x);return F.preExecutionCommands=A(x),F.commandsExecuted=!1,F},y=()=>{const x=u.value.find(F=>F.isActive);if(x)return C(x.id),x;{if(s.value)return b(),s.value;const F={id:`tab-${n.value++}`,title:"Log Monitor",type:"log-monitor",isActive:!0,lastActivity:new Date,status:"active"};return e.value.push(F),t.value=F.id,F}},A=x=>{const F=[],V=w(x.name);if(F.push({id:"welcome",command:`echo "=== Connecting to ${V} Server: ${x.name} ==="\r`,description:"Display welcome message",order:1}),F.push({id:"server-info",command:`echo "Server: ${x.name} (${x.ip})"\r`,description:"Display server information",order:2}),F.push({id:"os-info",command:`echo "OS: ${x.os}"\r`,description:"Display OS information",order:3}),F.push({id:"status-info",command:`echo "Status: ${x.status.toUpperCase()}"\r`,description:"Display server status",order:4}),(x.status==="warning"||x.status==="maintenance")&&F.push({id:"warning",command:`echo "  WARNING: Server has ${x.status} status"\r`,description:"Display warning message",order:5}),x.cpu||x.memory||x.disk){const z=[];x.cpu&&x.cpu>80&&z.push("HIGH CPU"),x.memory&&x.memory>80&&z.push("HIGH MEMORY"),x.disk&&x.disk>80&&z.push("HIGH DISK"),F.push({id:"resources",command:`echo "Resources - CPU: ${x.cpu}% | Memory: ${x.memory}% | Disk: ${x.disk}%${z.length>0?"   "+z.join(", "):""}"\r`,description:"Display resource usage",order:6})}return k(V).forEach(z=>F.push(z)),F.push({id:"separator",command:'echo "=== Initiating SSH Connection ==="\r',description:"Display connection separator",order:9}),F.push({id:"ssh-connect",command:`ssh ${x.name}@${x.ip}\r`,description:"Connect via SSH",order:10}),F.sort((z,p)=>z.order-p.order)},w=x=>{const F=x.toLowerCase();return F.includes("database")||F.includes("db")?"Database":F.includes("web")?"Web":F.includes("api")?"API":F.includes("load-balancer")||F.includes("lb")?"Load Balancer":F.includes("monitoring")||F.includes("monitor")?"Monitoring":"General"},k=(x,F)=>{const V=[];switch(x){case"Database":V.push({id:"db-check",command:'echo "Checking database services..."\r',description:"Database service check",order:7});break;case"Web":V.push({id:"web-check",command:'echo "Checking web server status..."\r',description:"Web server status check",order:7});break;case"API":V.push({id:"api-check",command:'echo "Checking API endpoints..."\r',description:"API endpoint check",order:7});break;case"Load Balancer":V.push({id:"lb-check",command:'echo "Checking load balancer configuration..."\r',description:"Load balancer check",order:7});break;case"Monitoring":V.push({id:"monitor-check",command:'echo "Checking monitoring services..."\r',description:"Monitoring service check",order:7});break;default:V.push({id:"general-check",command:'echo "Performing general system check..."\r',description:"General system check",order:7})}return V};return{tabs:e,activeTabId:t,logMonitorTab:s,activeTabs:a,displayTabs:i,activeTab:o,terminalTabs:r,aiChatTabs:f,logMonitorTabs:u,isLogMonitorActive:d,createTab:c,createInventoryTerminal:E,createLogMonitorTab:y,createTerminalSession:I,closeTerminalSession:T,closeTab:v,switchToTab:C,switchToLogMonitor:b,updateTabTitle:_,updateTabStatus:g,updateTabSessionId:L,initializeDefaultTab:()=>{if(Wo().currentWorkspace){console.log(" TAB STORE: Skipping legacy tab initialization - workspace mode is active");return}if(e.value.length===0&&c("terminal","Terminal 1"),!s.value){const F={id:"log-monitor-fixed",title:"Log Monitor",type:"log-monitor",isActive:!0,lastActivity:new Date,status:"active"};s.value=F}},markCommandsExecuted:R,getTabCommands:P,hasUnexecutedCommands:S,getTabSession:l,setTabSession:m,getServerType:w}}),$i=$a("terminalPane",()=>{const e=ie([]),t=ie([]),n=ie(null),s=se(()=>e.value.filter(m=>m.isActive)),a=se(()=>e.value.find(m=>m.id===n.value)||null),i=m=>e.value.filter(v=>v.tabId===m),o=(m,v,C,b,_)=>{const g=`pane-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,R={id:g,title:C||`${v} ${e.value.length+1}`,type:v,subType:b,tabId:m,isActive:!0,lastActivity:new Date,status:"connecting",position:_||{x:0,y:0,width:100,height:100}};e.value.push(R),n.value=g;let P=t.value.find(S=>S.id===m);return P||(P={id:m,title:`Tab ${t.value.length+1}`,isActive:!0,panes:[],layout:"single",lastActivity:new Date},t.value.push(P)),P.panes.push(R),console.log(" PANE: Created pane:",R),R};return{panes:e,tabsWithPanes:t,activePaneId:n,activePanes:s,activePane:a,getPanesByTab:i,createPane:o,setPaneSession:(m,v)=>{const C=e.value.find(b=>b.id===m);C&&(C.sessionId=v,console.log(" PANE: Set session for pane:",m,"-> session:",v))},getPaneSession:m=>e.value.find(C=>C.id===m)?.sessionId,splitPane:(m,v)=>{const C=e.value.find(_=>_.id===m);return!C||!t.value.find(_=>_.id===C.tabId)?null:v==="horizontal"?(C.position.width=50,o(C.tabId,"terminal",void 0,"pure",{x:50,y:C.position.y,width:50,height:C.position.height})):(C.position.height=50,o(C.tabId,"terminal",void 0,"pure",{x:C.position.x,y:50,width:C.position.width,height:50}))},closePane:m=>{const v=e.value.findIndex(_=>_.id===m);if(v===-1)return;const C=e.value[v];C.isActive=!1;const b=t.value.find(_=>_.id===C.tabId);if(b&&(b.panes=b.panes.filter(_=>_.id!==m),n.value===m)){const _=b.panes.filter(g=>g.isActive);n.value=_.length>0?_[0].id:null}setTimeout(()=>{const _=e.value.findIndex(g=>g.id===m);_!==-1&&e.value.splice(_,1)},100)},switchToPane:m=>{const v=e.value.find(C=>C.id===m);v&&v.isActive&&(n.value=m,v.lastActivity=new Date)},updatePaneLayout:(m,v)=>{const C=t.value.find(b=>b.id===m);C&&(C.layout=v,console.log(" PANE: Updated layout for tab:",m,"to:",v))}}});class Mm{static async resumeWorkspace(t,n){return n?(console.log(" SESSION_MANAGER: Resuming workspace:",t.name,"with",t.tabs.length,"tabs"),new Promise(s=>{const a={workspaceId:t.id,tabs:t.tabs.map(r=>({id:r.id,title:r.title,type:r.type||"terminal",subType:r.subType,layout:r.layout,panes:r.panes.map(f=>({id:f.id,sessionId:f.sessionId,type:f.type,subType:f.subType,title:f.title,position:f.position}))}))};console.log(" SESSION_MANAGER: Sending resume_workspace event:",a);const i=r=>{if(console.log(" SESSION_MANAGER: Received workspace_resumed:",r),n.off("workspace_resumed",i),n.off("workspace_error",o),r.workspaceId===t.id){const f=$i(),u=ca();(r.resumedTabs||[]).concat(r.createdTabs||[]).forEach(c=>{c.panes&&c.panes.forEach(l=>{f.setPaneSession(l.paneId,l.sessionId)}),c.sessionId&&u.setTabSession(c.tabId,c.sessionId)}),console.log(" SESSION_MANAGER: Workspace resumed successfully"),s({success:!0,message:r.message})}},o=r=>{console.error(" SESSION_MANAGER: Workspace resume error:",r),n.off("workspace_resumed",i),n.off("workspace_error",o),s({success:!1,error:r.error||"Failed to resume workspace"})};n.on("workspace_resumed",i),n.on("workspace_error",o),n.emit("resume_workspace",a),setTimeout(()=>{n.off("workspace_resumed",i),n.off("workspace_error",o),s({success:!1,error:"Workspace resume timeout"})},1e4)})):{success:!1,error:"No socket connection"}}static async reconnectStoredSessions(t){console.log(" SESSION_MANAGER: Reconnecting stored sessions for workspace:",t.name);const n=ca(),s=$i();t.tabs.forEach(a=>{n.tabs.push({id:a.id,title:a.title,type:a.type||"terminal",subType:a.subType||"pure",isActive:a.isActive,sessionId:void 0,serverContext:void 0,lastActivity:new Date,status:"disconnected"}),a.panes.forEach(i=>{i.sessionId&&s.setPaneSession(i.id,i.sessionId);const o=s.panes.findIndex(r=>r.id===i.id);o>=0?s.panes[o]=i:s.panes.push(i)})}),console.log(" SESSION_MANAGER: Reconstructed workspace structure with stored sessions")}}class dC{constructor(t="aetherterm_workspace_sync"){this.channelName=t,this.initialize()}channel=null;listeners=new Map;initialize(){if(typeof BroadcastChannel>"u"){console.warn("BroadcastChannel API not supported");return}try{this.channel=new BroadcastChannel(this.channelName),this.channel.onmessage=t=>{const n=t.data;console.log(" CROSS-TAB: Received sync message:",n.type),this.listeners.forEach(s=>{try{s(n)}catch(a){console.error(" CROSS-TAB: Error in listener:",a)}})},console.log(" CROSS-TAB: BroadcastChannel initialized")}catch(t){console.error(" CROSS-TAB: Failed to initialize BroadcastChannel:",t)}}broadcastUpdate(t){if(this.channel)try{const s={type:"workspace_update",workspace:this.toSerializable(t),timestamp:Date.now()};this.channel.postMessage(s),console.log(" CROSS-TAB: Broadcasted workspace update")}catch(n){console.error(" CROSS-TAB: Failed to broadcast workspace update:",n)}}toSerializable(t){return JSON.parse(JSON.stringify(t,(n,s)=>s instanceof Date?s.toISOString():typeof s=="function"||s===void 0?null:s))}broadcastSwitch(t){if(!this.channel)return;const n={type:"workspace_switch",workspaceId:t,timestamp:Date.now()};this.channel.postMessage(n),console.log(" CROSS-TAB: Broadcasted workspace switch")}broadcastDelete(t){if(!this.channel)return;const n={type:"workspace_delete",workspaceId:t,timestamp:Date.now()};this.channel.postMessage(n),console.log(" CROSS-TAB: Broadcasted workspace delete")}broadcastTabClose(t,n){if(!this.channel)return;const s={type:"tab_close",workspaceId:t,tabId:n,timestamp:Date.now()};this.channel.postMessage(s),console.log(" CROSS-TAB: Broadcasted tab close")}addListener(t,n){this.listeners.set(t,n)}removeListener(t){this.listeners.delete(t)}close(){this.channel&&(this.channel.close(),this.channel=null,this.listeners.clear(),console.log(" CROSS-TAB: BroadcastChannel closed"))}}let bc=null;function Gh(){return bc||(bc=new dC),bc}const Wo=$a("workspace",()=>{const e=ie(null),t=ie([]),n=ie(!1),s=ie(null),a=ie(!0),i=ie(null),o=Al(),r=Gh(),f=se(()=>!!e.value),u=se(()=>t.value.length),d=async T=>{const E=t.value.map(y=>y.id);no.persist(T,E),e.value?.id===T.id&&no.saveCurrentWorkspaceId(T.id),a.value&&await c(T)},c=async T=>{try{const E=o.getSocket();return!E||!E.connected?(console.warn(" WORKSPACE: No socket connection for server sync"),!1):new Promise(y=>{const A=k=>{E.off("workspace_saved",A),E.off("workspace_error",w),k.success?(i.value=new Date,console.log(" WORKSPACE: Saved to server:",k.workspace?.id),y(!0)):(console.error(" WORKSPACE: Server save failed:",k.error),y(!1))},w=k=>{E.off("workspace_saved",A),E.off("workspace_error",w),console.error(" WORKSPACE: Server save error:",k.error),y(!1)};E.on("workspace_saved",A),E.on("workspace_error",w),E.emit("save_workspace",{workspace:{...T,lastAccessed:T.lastAccessed.toISOString(),tabs:T.tabs.map(k=>({...k,lastActivity:k.lastActivity.toISOString()}))}}),setTimeout(()=>{E.off("workspace_saved",A),E.off("workspace_error",w),y(!1)},5e3)})}catch(E){return console.error(" WORKSPACE: Error saving to server:",E),!1}},l=async T=>{try{const E=o.getSocket();return!E||!E.connected?(console.warn(" WORKSPACE: No socket connection for server load"),null):new Promise(y=>{const A=k=>{if(E.off("workspace_loaded",A),E.off("workspace_error",w),k.success&&k.workspace){const M={...k.workspace,lastAccessed:new Date(k.workspace.lastAccessed),tabs:k.workspace.tabs.map(x=>({...x,lastActivity:new Date(x.lastActivity)}))};console.log(" WORKSPACE: Loaded from server:",M.id),y(M)}else console.warn(" WORKSPACE: Server load returned no workspace"),y(null)},w=k=>{E.off("workspace_loaded",A),E.off("workspace_error",w),console.error(" WORKSPACE: Server load error:",k.error),y(null)};E.on("workspace_loaded",A),E.on("workspace_error",w),E.emit("load_workspace",{workspaceId:T}),setTimeout(()=>{E.off("workspace_loaded",A),E.off("workspace_error",w),y(null)},5e3)})}catch(E){return console.error(" WORKSPACE: Error loading from server:",E),null}},m=async()=>{try{const T=o.getSocket();return!T||!T.connected?(console.warn(" WORKSPACE: No socket connection for server list"),[]):new Promise(E=>{const y=w=>{if(T.off("workspaces_listed",y),T.off("workspace_error",A),w.success&&w.workspaces){const k=w.workspaces.map(M=>({...M,lastAccessed:new Date(M.lastAccessed),tabs:M.tabs.map(x=>({...x,lastActivity:new Date(x.lastActivity)}))}));console.log(" WORKSPACE: Listed from server:",k.length,"workspaces"),E(k)}else E([])},A=w=>{T.off("workspaces_listed",y),T.off("workspace_error",A),console.error(" WORKSPACE: Server list error:",w.error),E([])};T.on("workspaces_listed",y),T.on("workspace_error",A),T.emit("list_workspaces",{}),setTimeout(()=>{T.off("workspaces_listed",y),T.off("workspace_error",A),E([])},5e3)})}catch(T){return console.error(" WORKSPACE: Error listing from server:",T),[]}},v=T=>{const y={id:`workspace_${Date.now()}`,name:T||`Workspace ${t.value.length+1}`,lastAccessed:new Date,tabs:[],isActive:!0,layout:{type:"tabs",configuration:{}}};return t.value.push(y),e.value=y,console.log(" WORKSPACE: Created workspace:",y),y},C=T=>{const E=t.value.find(y=>y.id===T);E&&(e.value&&(e.value.isActive=!1),E.isActive=!0,E.lastAccessed=new Date,e.value=E,r.broadcastSwitch(T),console.log(" WORKSPACE: Switched to workspace:",E.name))},b=async()=>{if(!e.value){console.warn(" WORKSPACE: No current workspace to save");return}e.value.tabs.forEach(T=>{T.lastActivity=new Date}),e.value.lastAccessed=new Date,await d(e.value),r.broadcastUpdate(e.value),console.log(" WORKSPACE: Saved workspace with",e.value.tabs.length,"tabs and panes")},_=async T=>{try{n.value=!0,s.value=null;let E=null;if(T?E=t.value.find(k=>k.id===T)||null:E=t.value.filter(k=>k.tabs.length>0).sort((k,M)=>M.lastAccessed.getTime()-k.lastAccessed.getTime())[0]||null,!E)return console.log(" WORKSPACE: No workspace to resume, creating default"),await g(),!0;o.getSocket()||(console.log(" WORKSPACE: No socket connection, connecting first..."),await o.connect());const A=o.getSocket();if(!A)throw new Error("Failed to establish socket connection");const w=await Mm.resumeWorkspace(E,A);if(w.success){if(e.value=E,E.isActive=!0,E.lastAccessed=new Date,E.tabs.length===0){console.log(" WORKSPACE: Workspace has no tabs, creating default terminal tab");const k=`tab-${Date.now()}`;S(k,"Terminal","terminal","pure")&&console.log(" WORKSPACE: Created default terminal tab")}return console.log(" WORKSPACE: Workspace resumed successfully:",w.message),!0}else return s.value=w.error||"Failed to resume workspace",!1}catch(E){return console.error(" WORKSPACE: Error resuming workspace:",E),s.value=E instanceof Error?E.message:"Unknown error",!1}finally{n.value=!1}},g=async()=>{const T=v("Default Workspace"),E=`tab-${Date.now()}`,y=ru.createTerminalPane("Terminal 1"),A={id:E,title:"Main",type:"terminal",isActive:!0,panes:[y],layout:"single",lastActivity:new Date};T.tabs=[A],T.layout={type:"tabs",configuration:{}},e.value=T,t.value.push(T),await d(T),console.log(" WORKSPACE: Created default workspace with pane structure")},R=async()=>{if(console.log(" WORKSPACE: Initializing workspace system..."),a.value){const y=o.getSocket();if(y&&y.connected){const A=await m();A.length>0&&(t.value=A,console.log(" WORKSPACE: Loaded",A.length,"workspaces from server"),A.forEach(w=>{no.persist(w,t.value.map(k=>k.id))}))}}if(t.value.length===0){const y=no.loadAll();if(y.length>0&&(t.value=y,console.log(" WORKSPACE: Loaded",y.length,"workspaces from localStorage"),a.value))for(const A of y)await c(A)}a.value&&setInterval(async()=>{e.value&&o.connectionState.isConnected&&await c(e.value)},3e4),r.addListener("workspace-store",I);const T=no.getLastWorkspaceId();if(!await _(T||void 0)&&!e.value)if(t.value.length>0){const y=t.value.sort((A,w)=>w.lastAccessed.getTime()-A.lastAccessed.getTime())[0];if(e.value=y,await Mm.reconnectStoredSessions(y),y.tabs.length===0){console.log(" WORKSPACE: Most recent workspace has no tabs, creating default terminal tab");const A=`tab-${Date.now()}`;S(A,"Terminal","terminal","pure")&&console.log(" WORKSPACE: Created default terminal tab")}}else await g();if(e.value&&e.value.tabs.length===0){console.log(" WORKSPACE: Current workspace has no tabs after initialization, creating default terminal tab");const y=`tab-${Date.now()}`;S(y,"Terminal","terminal","pure")&&console.log(" WORKSPACE: Created default terminal tab")}console.log(" WORKSPACE: Workspace system initialized")},P=async()=>{e.value&&await b()},S=(T,E,y="terminal",A="pure")=>{if(!e.value)return console.error(" WORKSPACE: No active workspace to add tab"),null;const w=ru.createTerminalPane(E),k={id:T,title:E,type:y,subType:A,isActive:!0,panes:[w],layout:"single",lastActivity:new Date};return e.value.tabs.forEach(M=>{M.isActive=!1}),e.value.tabs.push(k),b(),console.log(" WORKSPACE: Created terminal tab with pane:",k),k},L=(T,E,y)=>{if(!e.value)return console.error(" WORKSPACE: No active workspace to add tab"),null;const A={id:T,title:E,type:y,isActive:!0,panes:[],layout:"single",lastActivity:new Date};return e.value.tabs.forEach(w=>{w.isActive=!1}),e.value.tabs.push(A),ri.emitTabCreated(A),b(),console.log(" WORKSPACE: Created special tab:",A),A},I=T=>{switch(T.type){case"workspace_update":if(T.workspace&&e.value?.id===T.workspace.id){const E={...T.workspace,lastAccessed:new Date(T.workspace.lastAccessed),tabs:T.workspace.tabs.map(y=>({...y,lastActivity:new Date(y.lastActivity)}))};e.value=E,console.log(" CROSS-TAB: Updated workspace from another tab")}break;case"workspace_switch":T.workspaceId&&T.workspaceId!==e.value?.id&&console.log(" CROSS-TAB: Another tab switched to workspace:",T.workspaceId);break;case"workspace_delete":if(T.workspaceId&&(t.value=t.value.filter(E=>E.id!==T.workspaceId),e.value?.id===T.workspaceId)){const E=t.value[0];E?C(E.id):g()}break;case"tab_close":T.workspaceId===e.value?.id&&T.tabId&&e.value&&(e.value.tabs=e.value.tabs.filter(E=>E.id!==T.tabId));break}};return ri.on("tabCreated",()=>{P()}),ri.on("tabClosed",()=>{P()}),ri.on("tabActivated",()=>{P()}),{currentWorkspace:e,workspaces:t,isResuming:n,resumeError:s,serverSyncEnabled:a,lastServerSync:i,hasCurrentWorkspace:f,workspaceCount:u,createWorkspace:v,switchToWorkspace:C,saveCurrentWorkspace:b,resumeWorkspace:_,createDefaultWorkspace:g,initializeWorkspace:R,updateWorkspaceFromTabs:P,createTabWithPane:S,createSpecialTab:L,saveWorkspaceToServer:c,loadWorkspaceFromServer:l,listWorkspacesFromServer:m}}),fC={class:"status-content"},mC={class:"status-indicator"},vC={class:"status-text"},hC={key:0,class:"brand-section"},gC={key:1,class:"actions"},pC=kt({__name:"ConnectionStatusBanner",setup(e){const t=Xs(),n=se(()=>t.connectionStatus),s=se(()=>t.connectionState.isReconnecting),a=se(()=>n.value!=="connected"),i=se(()=>`status-${n.value}`),o=se(()=>`dot-${n.value}`),r=se(()=>{switch(n.value){case"connected":return"";case"connecting":return"...";case"reconnecting":return"...";case"disconnected":default:return""}}),f=()=>{t.connect()};return(u,d)=>{const c=Tt("v-icon"),l=Tt("v-btn");return a.value?(Y(),J("div",{key:0,class:Se(["connection-status-banner",i.value])},[h("div",fC,[h("div",mC,[h("div",{class:Se(["status-dot",o.value])},null,2),h("span",vC,Q(r.value),1)]),n.value==="disconnected"?(Y(),J("div",hC,d[0]||(d[0]=[rv('<div class="aether-logo" data-v-a3349699><svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-a3349699><path d="M16 2L28 8V24L16 30L4 24V8L16 2Z" stroke="currentColor" stroke-width="2" fill="none" data-v-a3349699></path><path d="M16 8L22 12V20L16 24L10 20V12L16 8Z" stroke="currentColor" stroke-width="1.5" fill="none" data-v-a3349699></path><circle cx="16" cy="16" r="3" fill="currentColor" data-v-a3349699></circle></svg></div><div class="brand-text" data-v-a3349699><div class="brand-name" data-v-a3349699>AetherTerm</div><div class="brand-subtitle" data-v-a3349699>AI Terminal Platform</div></div>',2)]))):Me("",!0),n.value==="disconnected"?(Y(),J("div",gC,[j(l,{color:"primary",variant:"outlined",size:"small",onClick:f,loading:s.value},{default:Ee(()=>[j(c,{start:""},{default:Ee(()=>d[1]||(d[1]=[nt("mdi-connection")])),_:1,__:[1]}),d[2]||(d[2]=nt("  "))]),_:1,__:[2]},8,["loading"])])):Me("",!0)])],2)):Me("",!0)}}}),_C=xt(pC,[["__scopeId","data-v-a3349699"]]),bC={class:"add-tab-container"},yC=kt({__name:"TabCreationMenu",emits:["add-tab"],setup(e,{emit:t}){const n=t,s=ie(!1),a=ie({top:0,left:0}),i=ie(null),o=async()=>{if(console.log(" Toggle menu clicked, current state:",s.value),s.value=!s.value,console.log(" Menu state after toggle:",s.value),s.value&&i.value){const c=i.value.getBoundingClientRect();a.value={top:c.bottom+2,left:c.right-180},console.log(" Calculated menu position:",a.value)}await Yt();const d=document.querySelector(".add-tab-menu");if(console.log(" Menu element in DOM:",d),d){const c=d.getBoundingClientRect();console.log(" Menu actual position:",{top:c.top,left:c.left,width:c.width,height:c.height})}},r=d=>{console.log(" Add tab clicked, type:",d),n("add-tab",d),s.value=!1},f=d=>{d.target.closest(".add-tab-container")||(s.value=!1)},u=d=>{d.key==="Escape"&&s.value&&(s.value=!1)};return sn(()=>{document.addEventListener("click",f),document.addEventListener("keydown",u)}),Fa(()=>{document.removeEventListener("click",f),document.removeEventListener("keydown",u)}),(d,c)=>(Y(),J("div",bC,[h("button",{ref_key:"buttonRef",ref:i,onClick:o,class:Se(["add-tab-btn",{"menu-open":s.value}]),title:"Add New Tab"}," + ",2),s.value?(Y(),J("div",{key:0,class:"add-tab-menu",onClick:c[2]||(c[2]=Sn(()=>{},["stop"])),style:it({top:a.value.top+"px",left:a.value.left+"px"})},[h("button",{onClick:c[0]||(c[0]=l=>r("terminal")),class:"menu-item terminal-item"},c[4]||(c[4]=[h("span",{class:"menu-icon"},"",-1),h("span",{class:"menu-text"},"Terminal",-1)])),h("button",{onClick:c[1]||(c[1]=l=>r("ai-agent")),class:"menu-item ai-agent-item"},c[5]||(c[5]=[h("span",{class:"menu-icon"},"",-1),h("span",{class:"menu-text"},"AI Agent",-1)]))],4)):Me("",!0),s.value?(Y(),J("div",{key:1,onClick:c[3]||(c[3]=l=>s.value=!1),class:"menu-overlay"})):Me("",!0)]))}}),wC=xt(yC,[["__scopeId","data-v-0cf4da26"]]),kC=["data-sidebar-state"],SC={class:"tab-list"},CC=["onClick"],AC={class:"tab-content"},TC={class:"tab-icon"},xC={class:"tab-title"},EC=["onClick"],RC=["onClick"],MC={class:"tab-content"},IC={class:"tab-icon"},BC={class:"tab-title"},LC=["onClick"],OC=kt({__name:"TabBarContainer",setup(e){const t=ca(),n=Wo(),s=l=>{n.currentWorkspace&&(n.currentWorkspace.tabs.forEach(m=>{m.isActive=m.id===l}),n.saveCurrentWorkspace(),console.log(" SWITCHED TO WORKSPACE TAB:",l))},a=l=>{if(!n.currentWorkspace)return;const m=n.currentWorkspace.tabs.findIndex(b=>b.id===l);if(m===-1)return;const v=n.currentWorkspace.tabs[m].isActive;if(n.currentWorkspace.tabs.splice(m,1),v&&n.currentWorkspace.tabs.length>0){const b=n.currentWorkspace.tabs[n.currentWorkspace.tabs.length-1];b.isActive=!0}n.saveCurrentWorkspace(),Gh().broadcastTabClose(n.currentWorkspace.id,l),console.log(" CLOSED WORKSPACE TAB:",l)};lv();const i=ie(!1),o=()=>{if(typeof window<"u"){const m=document.getElementById("supervisor-container")!==null;m!==i.value&&(i.value=m)}},r=se(()=>i.value),f=se(()=>t.isLogMonitorActive),u=()=>{t.switchToLogMonitor()},d=l=>{if(console.log(" ADD NEW TAB CALLED:",{type:l}),n.currentWorkspace){const m=`tab-${Date.now()}`;if(l==="terminal"){const v=n.createTabWithPane(m,"Terminal","terminal","pure");console.log(" NEW TERMINAL TAB WITH PANE CREATED:",v)}else if(l==="ai-agent"){const v=n.createSpecialTab(m,"AI Agent","ai-agent");console.log(" NEW AI AGENT TAB CREATED:",v)}}else{const m=t.createTab(l);console.log(" NEW TAB CREATED (legacy):",m)}};let c=null;return sn(async()=>{t.initializeDefaultTab(),await Yt(),o(),c=new MutationObserver(()=>{o()}),c.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["id","class"]})}),Fa(()=>{c&&c.disconnect()}),(l,m)=>(Y(),J("div",{class:Se(["terminal-tab-bar",{"sidebar-closed":!r.value,"sidebar-open":r.value}]),onContextmenu:m[0]||(m[0]=Sn(()=>{},["prevent"])),"data-sidebar-state":r.value?"open":"closed"},[h("div",SC,[(Y(!0),J(Je,null,wt(At(n).currentWorkspace?.tabs||[],v=>(Y(),J("div",{key:`ws-${v.id}`,class:Se(["terminal-tab",{active:v.isActive,terminal:!v.type||v.type==="terminal","ai-agent":v.type==="ai-agent","log-monitor":v.type==="log-monitor"}]),onClick:C=>s(v.id)},[h("div",AC,[h("span",TC,Q(!v.type||v.type==="terminal"?"":v.type==="ai-agent"?"":""),1),h("span",xC,Q(v.title),1)]),h("button",{onClick:Sn(C=>a(v.id),["stop"]),class:"tab-close"},"",8,EC)],10,CC))),128)),At(n).currentWorkspace?Me("",!0):(Y(!0),J(Je,{key:0},wt(At(t).displayTabs,v=>(Y(),J("div",{key:v.id,class:Se(["terminal-tab",{active:v.id===At(t).activeTabId,terminal:v.type==="terminal","ai-agent":v.type==="ai-agent","log-monitor":v.type==="log-monitor",connecting:v.status==="connecting",error:v.status==="error"}]),onClick:C=>At(t).switchToTab(v.id)},[h("div",MC,[h("span",IC,Q(v.type==="terminal"?"":v.type==="ai-agent"?"":""),1),h("span",BC,Q(v.title),1),h("span",{class:Se(["tab-status-indicator",v.status])},null,2)]),At(t).displayTabs.length>1?(Y(),J("button",{key:0,onClick:Sn(C=>At(t).closeTab(v.id),["stop"]),class:"tab-close-btn",title:"Close Tab"},"  ",8,LC)):Me("",!0)],10,RC))),128))]),j(wC,{onAddTab:d}),h("div",{class:Se(["terminal-tab fixed-tab log-monitor-tab",{active:f.value}]),onClick:u},m[1]||(m[1]=[h("div",{class:"tab-content"},[h("span",{class:"tab-icon"},""),h("span",{class:"tab-title"},"Log Monitor")],-1)]),2)],42,kC))}}),PC=xt(OC,[["__scopeId","data-v-15f4a6cf"]]),$C={class:"context-menu-header"},FC={class:"selected-text-preview"},DC={class:"text-length"},VC=kt({__name:"SelectionActionPopup",props:{show:{type:Boolean},position:{},selectedText:{}},emits:["copy","hide","sendToAi"],setup(e,{emit:t}){const n=e,s=t,a=Xs(),i=se(()=>{const u=n.selectedText.trim();return u.length<=50?u:u.substring(0,47)+"..."}),o=async()=>{try{await navigator.clipboard.writeText(n.selectedText),console.log("Text copied to clipboard:",n.selectedText),s("copy"),s("hide")}catch(u){console.error("Failed to copy text to clipboard:",u);const d=document.createElement("textarea");d.value=n.selectedText,document.body.appendChild(d),d.select(),document.execCommand("copy"),document.body.removeChild(d),s("copy"),s("hide")}},r=()=>{console.log("Sending text to side panel AI:",n.selectedText),a.triggerAskAI(n.selectedText),s("hide")},f=()=>{s("hide")};return(u,d)=>(Y(),J(Je,null,[u.show?(Y(),J("div",{key:0,class:"selection-context-menu",style:it({top:u.position.y+"px",left:u.position.x+"px"}),onClick:d[0]||(d[0]=Sn(()=>{},["stop"]))},[h("div",$C,[h("span",FC,Q(i.value),1),h("span",DC,"("+Q(u.selectedText.length)+" chars)",1)]),d[3]||(d[3]=h("div",{class:"menu-divider"},null,-1)),h("button",{class:"menu-item",onClick:o},d[1]||(d[1]=[h("span",{class:"icon"},"",-1),h("span",{class:"label"},"Copy Text",-1)])),d[4]||(d[4]=h("div",{class:"menu-divider"},null,-1)),h("button",{class:"menu-item ai-item",onClick:r},d[2]||(d[2]=[h("span",{class:"icon"},"",-1),h("span",{class:"label"},"Ask AI",-1)]))],4)):Me("",!0),u.show?(Y(),J("div",{key:1,class:"context-menu-backdrop",onClick:f})):Me("",!0)],64))}}),NC=xt(VC,[["__scopeId","data-v-00408c87"]]);var yc={exports:{}},Im;function jC(){return Im||(Im=1,function(e,t){(function(n,s){e.exports=s()})(self,()=>(()=>{var n={};return(()=>{var s=n;Object.defineProperty(s,"__esModule",{value:!0}),s.FitAddon=void 0,s.FitAddon=class{activate(a){this._terminal=a}dispose(){}fit(){const a=this.proposeDimensions();if(!a||!this._terminal||isNaN(a.cols)||isNaN(a.rows))return;const i=this._terminal._core;this._terminal.rows===a.rows&&this._terminal.cols===a.cols||(i._renderService.clear(),this._terminal.resize(a.cols,a.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const a=this._terminal._core,i=a._renderService.dimensions;if(i.css.cell.width===0||i.css.cell.height===0)return;const o=this._terminal.options.scrollback===0?0:a.viewport.scrollBarWidth,r=window.getComputedStyle(this._terminal.element.parentElement),f=parseInt(r.getPropertyValue("height")),u=Math.max(0,parseInt(r.getPropertyValue("width"))),d=window.getComputedStyle(this._terminal.element),c=f-(parseInt(d.getPropertyValue("padding-top"))+parseInt(d.getPropertyValue("padding-bottom"))),l=u-(parseInt(d.getPropertyValue("padding-right"))+parseInt(d.getPropertyValue("padding-left")))-o;return{cols:Math.max(2,Math.floor(l/i.css.cell.width)),rows:Math.max(1,Math.floor(c/i.css.cell.height))}}}})(),n})())}(yc)),yc.exports}var HC=jC(),wc={exports:{}},Bm;function zC(){return Bm||(Bm=1,function(e,t){(function(n,s){e.exports=s()})(self,()=>(()=>{var n={345:(o,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.runAndSubscribe=r.forwardEvent=r.EventEmitter=void 0,r.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=f=>(this._listeners.push(f),{dispose:()=>{if(!this._disposed){for(let u=0;u<this._listeners.length;u++)if(this._listeners[u]===f)return void this._listeners.splice(u,1)}}})),this._event}fire(f,u){const d=[];for(let c=0;c<this._listeners.length;c++)d.push(this._listeners[c]);for(let c=0;c<d.length;c++)d[c].call(void 0,f,u)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},r.forwardEvent=function(f,u){return f(d=>u.fire(d))},r.runAndSubscribe=function(f,u){return u(void 0),f(d=>u(d))}},859:(o,r)=>{function f(u){for(const d of u)d.dispose();u.length=0}Object.defineProperty(r,"__esModule",{value:!0}),r.getDisposeArrayDisposable=r.disposeArray=r.toDisposable=r.MutableDisposable=r.Disposable=void 0,r.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const u of this._disposables)u.dispose();this._disposables.length=0}register(u){return this._disposables.push(u),u}unregister(u){const d=this._disposables.indexOf(u);d!==-1&&this._disposables.splice(d,1)}},r.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(u){this._isDisposed||u===this._value||(this._value?.dispose(),this._value=u)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}},r.toDisposable=function(u){return{dispose:u}},r.disposeArray=f,r.getDisposeArrayDisposable=function(u){return{dispose:()=>f(u)}}}},s={};function a(o){var r=s[o];if(r!==void 0)return r.exports;var f=s[o]={exports:{}};return n[o](f,f.exports,a),f.exports}var i={};return(()=>{var o=i;Object.defineProperty(o,"__esModule",{value:!0}),o.SearchAddon=void 0;const r=a(345),f=a(859),u=" ~!@#$%^&*()+`-=[]{}|\\;:\"',./<>?";class d extends f.Disposable{constructor(l){super(),this._highlightedLines=new Set,this._highlightDecorations=[],this._selectedDecoration=this.register(new f.MutableDisposable),this._linesCacheTimeoutId=0,this._linesCacheDisposables=new f.MutableDisposable,this._onDidChangeResults=this.register(new r.EventEmitter),this.onDidChangeResults=this._onDidChangeResults.event,this._highlightLimit=l?.highlightLimit??1e3}activate(l){this._terminal=l,this.register(this._terminal.onWriteParsed(()=>this._updateMatches())),this.register(this._terminal.onResize(()=>this._updateMatches())),this.register((0,f.toDisposable)(()=>this.clearDecorations()))}_updateMatches(){this._highlightTimeout&&window.clearTimeout(this._highlightTimeout),this._cachedSearchTerm&&this._lastSearchOptions?.decorations&&(this._highlightTimeout=setTimeout(()=>{const l=this._cachedSearchTerm;this._cachedSearchTerm=void 0,this.findPrevious(l,{...this._lastSearchOptions,incremental:!0,noScroll:!0})},200))}clearDecorations(l){this._selectedDecoration.clear(),(0,f.disposeArray)(this._highlightDecorations),this._highlightDecorations=[],this._highlightedLines.clear(),l||(this._cachedSearchTerm=void 0)}clearActiveDecoration(){this._selectedDecoration.clear()}findNext(l,m){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");const v=!this._lastSearchOptions||this._didOptionsChange(this._lastSearchOptions,m);this._lastSearchOptions=m,m?.decorations&&(this._cachedSearchTerm===void 0||l!==this._cachedSearchTerm||v)&&this._highlightAllMatches(l,m);const C=this._findNextAndSelect(l,m);return this._fireResults(m),this._cachedSearchTerm=l,C}_highlightAllMatches(l,m){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");if(!l||l.length===0)return void this.clearDecorations();m=m||{},this.clearDecorations(!0);const v=[];let C,b=this._find(l,0,0,m);for(;b&&(C?.row!==b.row||C?.col!==b.col)&&!(v.length>=this._highlightLimit);)C=b,v.push(C),b=this._find(l,C.col+C.term.length>=this._terminal.cols?C.row+1:C.row,C.col+C.term.length>=this._terminal.cols?0:C.col+1,m);for(const _ of v){const g=this._createResultDecoration(_,m.decorations);g&&(this._highlightedLines.add(g.marker.line),this._highlightDecorations.push({decoration:g,match:_,dispose(){g.dispose()}}))}}_find(l,m,v,C){if(!this._terminal||!l||l.length===0)return this._terminal?.clearSelection(),void this.clearDecorations();if(v>this._terminal.cols)throw new Error(`Invalid col: ${v} to search in terminal of ${this._terminal.cols} cols`);let b;this._initLinesCache();const _={startRow:m,startCol:v};if(b=this._findInLine(l,_,C),!b)for(let g=m+1;g<this._terminal.buffer.active.baseY+this._terminal.rows&&(_.startRow=g,_.startCol=0,b=this._findInLine(l,_,C),!b);g++);return b}_findNextAndSelect(l,m){if(!this._terminal||!l||l.length===0)return this._terminal?.clearSelection(),this.clearDecorations(),!1;const v=this._terminal.getSelectionPosition();this._terminal.clearSelection();let C=0,b=0;v&&(this._cachedSearchTerm===l?(C=v.end.x,b=v.end.y):(C=v.start.x,b=v.start.y)),this._initLinesCache();const _={startRow:b,startCol:C};let g=this._findInLine(l,_,m);if(!g)for(let R=b+1;R<this._terminal.buffer.active.baseY+this._terminal.rows&&(_.startRow=R,_.startCol=0,g=this._findInLine(l,_,m),!g);R++);if(!g&&b!==0)for(let R=0;R<b&&(_.startRow=R,_.startCol=0,g=this._findInLine(l,_,m),!g);R++);return!g&&v&&(_.startRow=v.start.y,_.startCol=0,g=this._findInLine(l,_,m)),this._selectResult(g,m?.decorations,m?.noScroll)}findPrevious(l,m){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");const v=!this._lastSearchOptions||this._didOptionsChange(this._lastSearchOptions,m);this._lastSearchOptions=m,m?.decorations&&(this._cachedSearchTerm===void 0||l!==this._cachedSearchTerm||v)&&this._highlightAllMatches(l,m);const C=this._findPreviousAndSelect(l,m);return this._fireResults(m),this._cachedSearchTerm=l,C}_didOptionsChange(l,m){return!!m&&(l.caseSensitive!==m.caseSensitive||l.regex!==m.regex||l.wholeWord!==m.wholeWord)}_fireResults(l){if(l?.decorations){let m=-1;if(this._selectedDecoration.value){const v=this._selectedDecoration.value.match;for(let C=0;C<this._highlightDecorations.length;C++){const b=this._highlightDecorations[C].match;if(b.row===v.row&&b.col===v.col&&b.size===v.size){m=C;break}}}this._onDidChangeResults.fire({resultIndex:m,resultCount:this._highlightDecorations.length})}}_findPreviousAndSelect(l,m){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");if(!this._terminal||!l||l.length===0)return this._terminal?.clearSelection(),this.clearDecorations(),!1;const v=this._terminal.getSelectionPosition();this._terminal.clearSelection();let C=this._terminal.buffer.active.baseY+this._terminal.rows-1,b=this._terminal.cols;const _=!0;this._initLinesCache();const g={startRow:C,startCol:b};let R;if(v&&(g.startRow=C=v.start.y,g.startCol=b=v.start.x,this._cachedSearchTerm!==l&&(R=this._findInLine(l,g,m,!1),R||(g.startRow=C=v.end.y,g.startCol=b=v.end.x))),R||(R=this._findInLine(l,g,m,_)),!R){g.startCol=Math.max(g.startCol,this._terminal.cols);for(let P=C-1;P>=0&&(g.startRow=P,R=this._findInLine(l,g,m,_),!R);P--);}if(!R&&C!==this._terminal.buffer.active.baseY+this._terminal.rows-1)for(let P=this._terminal.buffer.active.baseY+this._terminal.rows-1;P>=C&&(g.startRow=P,R=this._findInLine(l,g,m,_),!R);P--);return this._selectResult(R,m?.decorations,m?.noScroll)}_initLinesCache(){const l=this._terminal;this._linesCache||(this._linesCache=new Array(l.buffer.active.length),this._linesCacheDisposables.value=(0,f.getDisposeArrayDisposable)([l.onLineFeed(()=>this._destroyLinesCache()),l.onCursorMove(()=>this._destroyLinesCache()),l.onResize(()=>this._destroyLinesCache())])),window.clearTimeout(this._linesCacheTimeoutId),this._linesCacheTimeoutId=window.setTimeout(()=>this._destroyLinesCache(),15e3)}_destroyLinesCache(){this._linesCache=void 0,this._linesCacheDisposables.clear(),this._linesCacheTimeoutId&&(window.clearTimeout(this._linesCacheTimeoutId),this._linesCacheTimeoutId=0)}_isWholeWord(l,m,v){return(l===0||u.includes(m[l-1]))&&(l+v.length===m.length||u.includes(m[l+v.length]))}_findInLine(l,m,v={},C=!1){const b=this._terminal,_=m.startRow,g=m.startCol;if(b.buffer.active.getLine(_)?.isWrapped)return C?void(m.startCol+=b.cols):(m.startRow--,m.startCol+=b.cols,this._findInLine(l,m,v));let P=this._linesCache?.[_];P||(P=this._translateBufferLineToStringWithWrap(_,!0),this._linesCache&&(this._linesCache[_]=P));const[S,L]=P,I=this._bufferColsToStringOffset(_,g),T=v.caseSensitive?l:l.toLowerCase(),E=v.caseSensitive?S:S.toLowerCase();let y=-1;if(v.regex){const A=RegExp(T,"g");let w;if(C)for(;w=A.exec(E.slice(0,I));)y=A.lastIndex-w[0].length,l=w[0],A.lastIndex-=l.length-1;else w=A.exec(E.slice(I)),w&&w[0].length>0&&(y=I+(A.lastIndex-w[0].length),l=w[0])}else C?I-T.length>=0&&(y=E.lastIndexOf(T,I-T.length)):y=E.indexOf(T,I);if(y>=0){if(v.wholeWord&&!this._isWholeWord(y,E,l))return;let A=0;for(;A<L.length-1&&y>=L[A+1];)A++;let w=A;for(;w<L.length-1&&y+l.length>=L[w+1];)w++;const k=y-L[A],M=y+l.length-L[w],x=this._stringLengthToBufferSize(_+A,k);return{term:l,col:x,row:_+A,size:this._stringLengthToBufferSize(_+w,M)-x+b.cols*(w-A)}}}_stringLengthToBufferSize(l,m){const v=this._terminal.buffer.active.getLine(l);if(!v)return 0;for(let C=0;C<m;C++){const b=v.getCell(C);if(!b)break;const _=b.getChars();_.length>1&&(m-=_.length-1);const g=v.getCell(C+1);g&&g.getWidth()===0&&m++}return m}_bufferColsToStringOffset(l,m){const v=this._terminal;let C=l,b=0,_=v.buffer.active.getLine(C);for(;m>0&&_;){for(let g=0;g<m&&g<v.cols;g++){const R=_.getCell(g);if(!R)break;R.getWidth()&&(b+=R.getCode()===0?1:R.getChars().length)}if(C++,_=v.buffer.active.getLine(C),_&&!_.isWrapped)break;m-=v.cols}return b}_translateBufferLineToStringWithWrap(l,m){const v=this._terminal,C=[],b=[0];let _=v.buffer.active.getLine(l);for(;_;){const g=v.buffer.active.getLine(l+1),R=!!g&&g.isWrapped;let P=_.translateToString(!R&&m);if(R&&g){const S=_.getCell(_.length-1);S&&S.getCode()===0&&S.getWidth()===1&&g.getCell(0)?.getWidth()===2&&(P=P.slice(0,-1))}if(C.push(P),!R)break;b.push(b[b.length-1]+P.length),l++,_=g}return[C.join(""),b]}_selectResult(l,m,v){const C=this._terminal;if(this._selectedDecoration.clear(),!l)return C.clearSelection(),!1;if(C.select(l.col,l.row,l.size),m){const b=C.registerMarker(-C.buffer.active.baseY-C.buffer.active.cursorY+l.row);if(b){const _=C.registerDecoration({marker:b,x:l.col,width:l.size,backgroundColor:m.activeMatchBackground,layer:"top",overviewRulerOptions:{color:m.activeMatchColorOverviewRuler}});if(_){const g=[];g.push(b),g.push(_.onRender(R=>this._applyStyles(R,m.activeMatchBorder,!0))),g.push(_.onDispose(()=>(0,f.disposeArray)(g))),this._selectedDecoration.value={decoration:_,match:l,dispose(){_.dispose()}}}}}if(!v&&(l.row>=C.buffer.active.viewportY+C.rows||l.row<C.buffer.active.viewportY)){let b=l.row-C.buffer.active.viewportY;b-=Math.floor(C.rows/2),C.scrollLines(b)}return!0}_applyStyles(l,m,v){l.classList.contains("xterm-find-result-decoration")||(l.classList.add("xterm-find-result-decoration"),m&&(l.style.outline=`1px solid ${m}`)),v&&l.classList.add("xterm-find-active-result-decoration")}_createResultDecoration(l,m){const v=this._terminal,C=v.registerMarker(-v.buffer.active.baseY-v.buffer.active.cursorY+l.row);if(!C)return;const b=v.registerDecoration({marker:C,x:l.col,width:l.size,backgroundColor:m.matchBackground,overviewRulerOptions:this._highlightedLines.has(C.line)?void 0:{color:m.matchOverviewRuler,position:"center"}});if(b){const _=[];_.push(C),_.push(b.onRender(g=>this._applyStyles(g,m.matchBorder,!1))),_.push(b.onDispose(()=>(0,f.disposeArray)(_)))}return b}}o.SearchAddon=d})(),i})())}(wc)),wc.exports}var UC=zC(),kc={exports:{}},Lm;function qC(){return Lm||(Lm=1,function(e,t){(function(n,s){e.exports=s()})(self,()=>(()=>{var n={6:(o,r)=>{function f(d){try{const c=new URL(d),l=c.password&&c.username?`${c.protocol}//${c.username}:${c.password}@${c.host}`:c.username?`${c.protocol}//${c.username}@${c.host}`:`${c.protocol}//${c.host}`;return d.toLocaleLowerCase().startsWith(l.toLocaleLowerCase())}catch{return!1}}Object.defineProperty(r,"__esModule",{value:!0}),r.LinkComputer=r.WebLinkProvider=void 0,r.WebLinkProvider=class{constructor(d,c,l,m={}){this._terminal=d,this._regex=c,this._handler=l,this._options=m}provideLinks(d,c){const l=u.computeLink(d,this._regex,this._terminal,this._handler);c(this._addCallbacks(l))}_addCallbacks(d){return d.map(c=>(c.leave=this._options.leave,c.hover=(l,m)=>{if(this._options.hover){const{range:v}=c;this._options.hover(l,m,v)}},c))}};class u{static computeLink(c,l,m,v){const C=new RegExp(l.source,(l.flags||"")+"g"),[b,_]=u._getWindowedLineStrings(c-1,m),g=b.join("");let R;const P=[];for(;R=C.exec(g);){const S=R[0];if(!f(S))continue;const[L,I]=u._mapStrIdx(m,_,0,R.index),[T,E]=u._mapStrIdx(m,L,I,S.length);if(L===-1||I===-1||T===-1||E===-1)continue;const y={start:{x:I+1,y:L+1},end:{x:E,y:T+1}};P.push({range:y,text:S,activate:v})}return P}static _getWindowedLineStrings(c,l){let m,v=c,C=c,b=0,_="";const g=[];if(m=l.buffer.active.getLine(c)){const R=m.translateToString(!0);if(m.isWrapped&&R[0]!==" "){for(b=0;(m=l.buffer.active.getLine(--v))&&b<2048&&(_=m.translateToString(!0),b+=_.length,g.push(_),m.isWrapped&&_.indexOf(" ")===-1););g.reverse()}for(g.push(R),b=0;(m=l.buffer.active.getLine(++C))&&m.isWrapped&&b<2048&&(_=m.translateToString(!0),b+=_.length,g.push(_),_.indexOf(" ")===-1););}return[g,v]}static _mapStrIdx(c,l,m,v){const C=c.buffer.active,b=C.getNullCell();let _=m;for(;v;){const g=C.getLine(l);if(!g)return[-1,-1];for(let R=_;R<g.length;++R){g.getCell(R,b);const P=b.getChars();if(b.getWidth()&&(v-=P.length||1,R===g.length-1&&P==="")){const S=C.getLine(l+1);S&&S.isWrapped&&(S.getCell(0,b),b.getWidth()===2&&(v+=1))}if(v<0)return[l,R]}l++,_=0}return[l,_]}}r.LinkComputer=u}},s={};function a(o){var r=s[o];if(r!==void 0)return r.exports;var f=s[o]={exports:{}};return n[o](f,f.exports,a),f.exports}var i={};return(()=>{var o=i;Object.defineProperty(o,"__esModule",{value:!0}),o.WebLinksAddon=void 0;const r=a(6),f=/(https?|HTTPS?):[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function u(d,c){const l=window.open();if(l){try{l.opener=null}catch{}l.location.href=c}else console.warn("Opening link blocked as opener could not be cleared")}o.WebLinksAddon=class{constructor(d=u,c={}){this._handler=d,this._options=c}activate(d){this._terminal=d;const c=this._options,l=c.urlRegex||f;this._linkProvider=this._terminal.registerLinkProvider(new r.WebLinkProvider(this._terminal,l,this._handler,c))}dispose(){this._linkProvider?.dispose()}}})(),i})())}(kc)),kc.exports}var WC=qC(),YC=qg();const Xh=$a("screenBuffer",{state:()=>({buffers:{}}),getters:{getBuffer:e=>t=>(e.buffers[t]||(e.buffers[t]={lines:[],maxLines:5e3,currentLine:0,savedStates:{}}),e.buffers[t]),getBufferLines:e=>(t,n,s)=>{const a=e.buffers[t];if(!a)return[];const i=n??0,o=s??a.lines.length;return a.lines.slice(i,o)},getBufferStats:e=>t=>{const n=e.buffers[t];return n?{totalLines:n.lines.length,currentLine:n.currentLine,maxLines:n.maxLines}:{totalLines:0,currentLine:0,maxLines:0}}},actions:{addLine(e,t,n="output"){const s=this.getBuffer(e),a={content:t,timestamp:Date.now(),type:n};if(s.lines.push(a),s.currentLine=s.lines.length-1,s.lines.length>s.maxLines){const i=s.lines.length-s.maxLines;s.lines.splice(0,i),s.currentLine=Math.max(0,s.currentLine-i)}this.persistSession(e)},persistSession(e){try{const t=this.buffers[e];if(t){const n=JSON.stringify({lines:t.lines,currentLine:t.currentLine,timestamp:Date.now()});localStorage.setItem(`screen_buffer_${e}`,n)}}catch(t){console.warn("Failed to persist screen buffer:",t)}},restoreSession(e){try{const t=localStorage.getItem(`screen_buffer_${e}`);if(t){const n=JSON.parse(t),s=this.getBuffer(e);return s.lines=n.lines||[],s.currentLine=n.currentLine||0,console.log(` SCREEN_BUFFER: Restored ${s.lines.length} lines for session ${e}`),!0}}catch(t){console.warn("Failed to restore screen buffer:",t)}return!1},clearBuffer(e){const t=this.getBuffer(e);t.lines=[],t.currentLine=0},saveBufferState(e,t){const n=this.getBuffer(e);n.savedStates[t]=JSON.parse(JSON.stringify(n.lines))},restoreBufferState(e,t){const n=this.getBuffer(e),s=n.savedStates[t];return s?(n.lines=JSON.parse(JSON.stringify(s)),n.currentLine=n.lines.length-1,!0):!1},deleteBufferState(e,t){const n=this.getBuffer(e);delete n.savedStates[t]},setMaxBufferLines(e,t){const n=this.getBuffer(e);if(n.maxLines=Math.max(100,t),n.lines.length>n.maxLines){const s=n.lines.length-n.maxLines;n.lines.splice(0,s),n.currentLine=Math.max(0,n.currentLine-s)}},exportBuffer(e,t="text"){const n=this.getBuffer(e);return t==="json"?JSON.stringify({sessionId:e,exportTime:new Date().toISOString(),lines:n.lines},null,2):n.lines.map(s=>`[${new Date(s.timestamp).toISOString()}] ${s.type.toUpperCase()}: ${s.content}`).join(`
`)},importBuffer(e,t,n="json"){try{if(n==="json"){const s=JSON.parse(t);if(s.lines&&Array.isArray(s.lines)){const a=this.getBuffer(e);return a.lines=s.lines,a.currentLine=a.lines.length-1,!0}}return!1}catch{return!1}},searchBuffer(e,t,n=!1){const s=this.getBuffer(e),a=n?t:t.toLowerCase();return s.lines.map((i,o)=>({lineIndex:o,line:i})).filter(({line:i})=>(n?i.content:i.content.toLowerCase()).includes(a))},removeSession(e){delete this.buffers[e]}}}),KC=["id"],GC=kt({__name:"AetherTerminalComponent",props:{id:{},mode:{default:"pane"},subType:{default:"pure"}},emits:["click","terminal-initialized"],setup(e,{expose:t,emit:n}){const s=e,a=n,i=ie(null),o=ie(null),r=ie(null),f=ie(null),u=ie(null),d=ie(null),c=Al(),l=ca(),m=$i(),v=qo(),C=Xh(),b=ie(null),_=ie(!1),g=se(()=>`aether-${s.mode}-${s.id}`),R=se(()=>{const X=v.currentColors;return X?{background:X.background,foreground:X.foreground,cursor:X.cursor,selection:X.selection,black:X.black,red:X.red,green:X.green,yellow:X.yellow,blue:X.blue,magenta:X.magenta,cyan:X.cyan,white:X.white,brightBlack:X.bright_black,brightRed:X.bright_red,brightGreen:X.bright_green,brightYellow:X.bright_yellow,brightBlue:X.bright_blue,brightMagenta:X.bright_magenta,brightCyan:X.bright_cyan,brightWhite:X.bright_white}:{background:"#1e1e1e",foreground:"#d4d4d4",cursor:"#ffffff",selection:"#264f78",black:"#000000",red:"#cd3131",green:"#0dbc79",yellow:"#e5e510",blue:"#2472c8",magenta:"#bc3fbc",cyan:"#11a8cd",white:"#e5e5e5",brightBlack:"#666666",brightRed:"#f14c4c",brightGreen:"#23d18b",brightYellow:"#f5f543",brightBlue:"#3b8eea",brightMagenta:"#d670d6",brightCyan:"#29b8db",brightWhite:"#e5e5e5"}}),P=()=>{if(s.mode==="pane"){const X=m.getPaneSession(s.id);return X&&console.log(` AETHER_TERMINAL: Found existing pane session for ${s.id}: ${X}`),X}else{const X=l.getTabSession(s.id);return X&&console.log(` AETHER_TERMINAL: Found existing tab session for ${s.id}: ${X}`),X}},S=X=>{s.mode==="pane"?m.setPaneSession(s.id,X):l.setTabSession(s.id,X),b.value=X},L=async()=>{if(console.log(` AETHER_TERMINAL: Initializing ${s.mode}:`,s.id),await Yt(),!o.value){console.error(" AETHER_TERMINAL: Terminal ref not found");return}r.value=new YC.Terminal({cursorBlink:!1,theme:R.value,fontSize:v.themeConfig.fontSize,fontFamily:v.themeConfig.fontFamily,scrollback:5e3,fastScrollModifier:"shift",rightClickSelectsWord:!1}),f.value=new HC.FitAddon,u.value=new UC.SearchAddon,d.value=new WC.WebLinksAddon,r.value.loadAddon(f.value),r.value.loadAddon(u.value),r.value.loadAddon(d.value),r.value.open(o.value);let X=null;(()=>{X&&clearTimeout(X),X=setTimeout(()=>{f.value?.fit(),X=null},100)})(),I(),await T(),_.value=!0,a("terminal-initialized"),console.log(` AETHER_TERMINAL: Initialized ${s.mode}:`,s.id)},I=()=>{r.value&&(r.value.onData(X=>{b.value?(X.length>0&&!X.match(/^\x1b/)&&C.addLine(b.value,X,"input"),c.sendInput(b.value,X)):console.warn(` AETHER_TERMINAL: No session for ${s.mode}:`,s.id)}),r.value.attachCustomKeyEventHandler(X=>X.ctrlKey&&X.shiftKey&&X.key==="F"?(X.preventDefault(),B(),!1):X.ctrlKey&&X.shiftKey&&X.key==="C"?(X.preventDefault(),ee(),!1):X.ctrlKey&&X.shiftKey&&X.key==="V"?(X.preventDefault(),re(),!1):!0))},T=async()=>{const X=P();if(X){if(console.log(` AETHER_TERMINAL: Using existing session for ${s.mode}:`,s.id,X),b.value=X,E(),await c.reconnectSession(X)){console.log(` AETHER_TERMINAL: Successfully reconnected to backend session ${X}`);const K=await c.getSessionInfo(X);console.log(" AETHER_TERMINAL: Session info:",K)}else{console.log(` AETHER_TERMINAL: Could not reconnect to backend session ${X}, session might be expired`);const K=await c.getSessionInfo(X);console.log(" AETHER_TERMINAL: Session info (failed reconnect):",K)}if(C.restoreSession(X)){console.log(` AETHER_TERMINAL: Restoring terminal content from localStorage for session ${X}`);const K=C.getBuffer(X);await Yt(),A(K)}else console.log(` AETHER_TERMINAL: No localStorage data for session ${X}, waiting for backend history`);return}console.log(` AETHER_TERMINAL: No existing session for ${s.mode}:`,s.id),console.log(" AETHER_TERMINAL: Creating new session...");const he=await c.requestSession(s.id,s.mode,s.subType||"pure");if(he){console.log(" AETHER_TERMINAL: Created new session:",he),S(he),E();const we=await c.getSessionInfo(he);console.log(" AETHER_TERMINAL: Session info:",we)}else console.error(` AETHER_TERMINAL: Failed to create session for ${s.mode}:`,s.id)},E=()=>{if(!b.value||!r.value)return;let X="",he=null;const we=Ie=>{X+=Ie,he&&clearTimeout(he),he=setTimeout(()=>{if(X&&r.value&&b.value){try{r.value.write(X),y(b.value,X)}catch(K){console.error(" AETHER_TERMINAL: Error writing to terminal:",K);const te=X.replace(/[\x7F]/g,"");if(te!==X){console.warn(" AETHER_TERMINAL: Filtered out problematic characters");try{r.value.write(te),y(b.value,te)}catch(ve){console.error(" AETHER_TERMINAL: Failed even after filtering:",ve)}}}X=""}he=null},16)};c.registerOutputCallback(b.value,we),console.log(` AETHER_TERMINAL: Output setup for ${s.mode}:`,s.id)},y=(X,he)=>{if(he.length>1e3&&he.includes(`
`)){const Ie=he.split(`
`);Ie.forEach((K,te)=>{(K.trim()||te<Ie.length-1)&&C.addLine(X,K+(te<Ie.length-1?`
`:""),"output")}),console.log(` SCREEN_BUFFER: Processed ${Ie.length} history lines for session ${X}`)}else C.addLine(X,he,"output");C.persistSession(X)},A=X=>{!r.value||!X||X.lines.length===0||(console.log(` AETHER_TERMINAL: Restoring ${X.lines.length} lines from buffer`),r.value.clear(),X.lines.forEach(he=>{he.content&&r.value&&r.value.write(he.content)}),console.log(" AETHER_TERMINAL: Restored terminal content from buffer"))},w=()=>{r.value&&(console.log(` AETHER_TERMINAL: Updating theme for ${s.mode}:`,s.id,v.themeConfig.colorScheme),r.value.options.theme=R.value,r.value.options.fontSize=v.themeConfig.fontSize,r.value.options.fontFamily=v.themeConfig.fontFamily,r.value.options.cursorBlink=v.themeConfig.cursorBlink,r.value.refresh(0,r.value.rows-1))},k=()=>{a("click"),r.value?.focus()};rt(()=>c.connectionState.isConnected,X=>{X&&!b.value&&(console.log(` AETHER_TERMINAL: Connection restored, requesting session for ${s.mode}:`,s.id),T())});let M=null;const x=()=>{M&&clearTimeout(M),M=setTimeout(()=>{w(),f.value&&f.value.fit(),M=null},50)};ds(()=>{v.currentColors,v.themeConfig.fontSize,v.themeConfig.fontFamily,r.value&&x()}),sn(async()=>{console.log(` AETHER_TERMINAL: Mounted ${s.mode}:`,s.id),c.connectionState.isConnected||await c.connect(),L()}),qn(()=>{if(console.log(` AETHER_TERMINAL: Unmounting ${s.mode}:`,s.id),b.value&&c.unregisterOutputCallback(b.value),r.value)try{r.value.dispose()}catch(X){console.warn(" AETHER_TERMINAL: Error disposing terminal:",X)}r.value=null,f.value=null,u.value=null,d.value=null});const F=()=>{b.value&&(C.clearBuffer(b.value),r.value?.clear())},V=X=>{b.value&&C.saveBufferState(b.value,X)},D=X=>{if(b.value){const he=C.restoreBufferState(b.value,X);return he&&r.value&&(r.value.clear(),C.getBufferLines(b.value).forEach(Ie=>{r.value?.write(Ie.content)})),he}return!1},z=(X="text")=>b.value?C.exportBuffer(b.value,X):"",p=()=>b.value?C.getBufferStats(b.value):{totalLines:0,currentLine:0,maxLines:0},B=()=>{if(!u.value)return;const X=prompt("Search terminal:");X&&u.value.findNext(X)},U=X=>{u.value&&u.value.findNext(X)},$=X=>{u.value&&u.value.findPrevious(X)},ee=()=>{if(!r.value)return;const X=r.value.getSelection();X&&navigator.clipboard.writeText(X).then(()=>{console.log(" TERMINAL: Text copied to clipboard")}).catch(he=>{console.error(" TERMINAL: Failed to copy text",he)})},re=async()=>{if(!(!r.value||!b.value))try{const X=await navigator.clipboard.readText();X&&(c.sendInput(b.value,X),console.log(" TERMINAL: Text pasted from clipboard"))}catch(X){console.error(" TERMINAL: Failed to paste text",X)}};return t({terminal:r,sessionId:b,focus:()=>r.value?.focus(),fit:()=>f.value?.fit(),clear:()=>r.value?.clear(),write:X=>r.value?.write(X),clearScreenBuffer:F,saveBufferState:V,restoreBufferState:D,exportBuffer:z,getBufferStats:p,openSearch:B,searchNext:U,searchPrevious:$,copySelection:ee,pasteFromClipboard:re,selectAll:()=>{r.value&&r.value.selectAll()},clearSelection:()=>{r.value&&r.value.clearSelection()}}),(X,he)=>(Y(),J("div",{class:"aether-terminal-container",onClick:k,ref_key:"containerRef",ref:i},[h("div",{id:g.value,class:"aether-terminal",ref_key:"terminalRef",ref:o},null,8,KC)],512))}}),uo=xt(GC,[["__scopeId","data-v-c203780d"]]),XC={class:"ai-agent-tab-container"},ZC={class:"agent-terminals-pane"},QC={class:"agents-header"},JC={class:"agents-scroll-container"},eA={class:"agent-header"},tA={class:"agent-name"},nA={class:"agent-terminal"},sA={class:"main-agent-header"},aA={class:"main-agent-terminal"},iA=kt({__name:"AIAgentTab",props:{tabId:{}},setup(e){const t=e,n=ca(),s=ie([]),a=ie(""),i=ie("inactive"),o=ie("40%"),r=ie(!1),f=se(()=>s.value.length+1),u=()=>{console.log(" Adding new agent terminal...");const b=`agent-${t.tabId}-${Date.now()}`,_=`terminal-${b}`,g={id:b,name:`Agent ${f.value}`,terminalId:_,status:"inactive"};console.log("Creating agent:",g),s.value.push(g),console.log("Creating terminal session:",_),n.createTerminalSession(_,"agent"),console.log(" Agent terminal added successfully")},d=b=>{const _=s.value.findIndex(g=>g.id===b);if(_>-1){const g=s.value[_];n.closeTerminalSession(g.terminalId),s.value.splice(_,1)}},c=b=>{const _=s.value.find(g=>g.id===b);_&&(_.status="active",console.log(`Agent ${_.name} terminal initialized`))},l=()=>{i.value="active",console.log("Main agent terminal initialized")},m=b=>{r.value=!0,document.addEventListener("mousemove",v),document.addEventListener("mouseup",C),b.preventDefault()},v=b=>{if(!r.value)return;const _=document.querySelector(".ai-agent-tab-container");if(!_)return;const g=_.getBoundingClientRect(),R=(g.bottom-b.clientY)/g.height*100,P=Math.max(20,Math.min(70,R));o.value=`${P}%`},C=()=>{r.value=!1,document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",C)};return sn(()=>{a.value=`main-agent-${t.tabId}`,n.createTerminalSession(a.value,"main-agent"),u()}),(b,_)=>{const g=Tt("v-btn"),R=Tt("AetherTerminalComponent"),P=Tt("v-icon"),S=Tt("v-chip");return Y(),J("div",XC,[h("div",ZC,[h("div",QC,[_[1]||(_[1]=h("h3",null,"Sub Agents",-1)),j(g,{size:"small",icon:"mdi-plus",onClick:u,class:"add-agent-btn"})]),h("div",JC,[(Y(!0),J(Je,null,wt(s.value,L=>(Y(),J("div",{key:L.id,class:"agent-terminal-card"},[h("div",eA,[h("span",tA,Q(L.name),1),j(g,{size:"x-small",icon:"mdi-close",onClick:I=>d(L.id),class:"close-btn"},null,8,["onClick"])]),h("div",nA,[j(R,{id:L.terminalId,mode:"pane","sub-type":"agent",onTerminalInitialized:()=>c(L.id)},null,8,["id","onTerminalInitialized"])])]))),128)),h("div",{class:"add-agent-card",onClick:u},[j(P,{size:"48",color:"primary"},{default:Ee(()=>_[2]||(_[2]=[nt("mdi-plus-circle-outline")])),_:1,__:[2]}),_[3]||(_[3]=h("span",null,"Add Agent",-1))])])]),h("div",{class:"pane-divider",onMousedown:m},_[4]||(_[4]=[h("div",{class:"resize-handle"},null,-1)]),32),h("div",{class:"main-agent-pane",style:it({height:o.value})},[h("div",sA,[_[5]||(_[5]=h("h3",null,"Main Agent",-1)),j(S,{color:i.value==="active"?"success":"warning",size:"small"},{default:Ee(()=>[nt(Q(i.value),1)]),_:1},8,["color"])]),h("div",aA,[j(R,{id:a.value,mode:"pane","sub-type":"main-agent",onTerminalInitialized:_[0]||(_[0]=()=>l())},null,8,["id"])])],4)])}}}),Om=xt(iA,[["__scopeId","data-v-9b519f5d"]]),oA={class:"terminal-log-monitor-panel"},rA={class:"panel-header"},lA={class:"refresh-controls"},cA={class:"monitor-section"},uA={class:"memory-status-grid"},dA={class:"memory-header"},fA={class:"memory-status"},mA={key:0,class:"memory-info"},vA={class:"info-item"},hA={class:"info-item"},gA={class:"memory-header"},pA={class:"memory-status"},_A={key:0,class:"memory-info"},bA={class:"info-item"},yA={class:"info-item"},wA={key:1,class:"memory-warning"},kA={class:"monitor-section"},SA={class:"overview-grid"},CA={class:"metric-card"},AA={class:"metric-value"},TA={class:"metric-card"},xA={class:"metric-value"},EA={class:"metric-card"},RA={class:"metric-value"},MA={class:"metric-card"},IA={class:"monitor-section"},BA={class:"unprocessed-grid"},LA={class:"unprocessed-card"},OA={class:"unprocessed-card"},PA={class:"unprocessed-card"},$A={class:"unprocessed-card total"},FA={class:"unprocessed-value total-value"},DA={class:"unprocessed-label"},VA={class:"monitor-section"},NA={class:"pattern-ranking"},jA={class:"ranking-tabs"},HA={class:"pattern-list"},zA={class:"pattern-rank"},UA={class:"pattern-matches"},qA={class:"matches-number"},WA={class:"matches-frequency"},YA={class:"pattern-trend"},KA={class:"pattern-content"},GA={class:"error-pattern-summary"},XA={class:"error-stats-grid"},ZA={class:"error-stat-card"},QA={class:"stat-value error"},JA={class:"error-stat-card"},eT={class:"stat-value warning"},tT={class:"error-stat-card"},nT={class:"stat-value critical"},sT={class:"error-stat-card"},aT={class:"stat-value total"},iT={class:"error-pattern-list"},oT={class:"error-pattern-header"},rT={class:"error-matches"},lT={class:"error-severity"},cT={class:"error-pattern-content"},uT={class:"error-pattern-details"},dT={class:"detail-item"},fT={class:"detail-item"},mT={class:"detail-item"},vT={class:"command-pattern-list"},hT={class:"command-pattern-header"},gT={class:"command-type"},pT={class:"command-frequency"},_T={class:"command-content"},bT={class:"command-stats"},yT={class:"stat-item"},wT={class:"stat-item"},kT={class:"stat-item"},ST={class:"monitor-section"},CT={class:"terminal-list"},AT=["onClick"],TT={class:"terminal-header"},xT={class:"terminal-id"},ET={class:"terminal-metrics"},RT={class:"metric"},MT={class:"metric-value"},IT={class:"metric"},BT={class:"metric-value"},LT={class:"metric"},OT={class:"metric-value error"},PT={class:"metric"},$T={class:"metric-value"},FT={class:"log-volume-chart"},DT={class:"volume-bars"},VT=["title"],NT={key:0,class:"monitor-section"},jT={class:"terminal-details"},HT={class:"detail-tabs"},zT={class:"log-entries"},UT={class:"log-header"},qT={class:"log-timestamp"},WT={class:"log-level"},YT={class:"log-type"},KT={class:"log-content"},GT={key:0,class:"log-command"},XT={class:"log-output"},ZT={class:"error-summary"},QT={class:"error-header"},JT={class:"error-count"},ex={class:"error-time"},tx={class:"error-message"},nx={class:"pattern-analysis"},sx={class:"pattern-header"},ax={class:"pattern-type"},ix={class:"pattern-frequency"},ox={class:"pattern-score"},rx={class:"pattern-content"},lx={class:"monitor-section"},cx={class:"search-interface"},ux={class:"search-controls"},dx={class:"search-input-group"},fx={class:"search-filters"},mx={key:0,class:"search-results"},vx={class:"results-header"},hx={class:"results-controls"},gx={key:0,class:"timeline-view"},px={class:"timeline-container"},_x={class:"timeline-date-header"},bx={class:"date-count"},yx={class:"timeline-events"},wx={class:"timeline-content"},kx={class:"timeline-header"},Sx={class:"timeline-time"},Cx={class:"timeline-terminal"},Ax={class:"timeline-body"},Tx={key:0,class:"timeline-command"},xx={class:"timeline-text"},Ex={key:1,class:"list-view"},Rx={class:"results-tabs"},Mx={class:"search-result-list"},Ix={class:"result-header"},Bx={class:"result-terminal"},Lx={class:"result-timestamp"},Ox={class:"result-type"},Px={class:"result-content"},$x=["innerHTML"],Fx={class:"search-result-list"},Dx={class:"result-header"},Vx={class:"result-terminal"},Nx={class:"result-timestamp"},jx={class:"result-type"},Hx={class:"result-content"},zx={key:0,class:"result-command"},Ux=["innerHTML"],qx={class:"result-output"},Wx=["innerHTML"],Yx={class:"search-result-list"},Kx={class:"result-header"},Gx={class:"result-frequency"},Xx={class:"result-similarity"},Zx={class:"result-terminals"},Qx={class:"result-content"},Jx=["innerHTML"],eE={class:"pattern-metadata"},tE={key:0,class:"metadata-item"},nE={key:1,class:"metadata-item"},sE={key:2,class:"metadata-item"},aE={key:1,class:"no-results"},iE={key:2,class:"search-help"},oE={class:"monitor-section"},rE={class:"pipeline-status"},lE={__name:"TerminalLogMonitorPanel",setup(e){const t=Xs(),n=ie(!1),s=ie(!0),a=ie(null),i=ie(!1),o=ie("recent"),r=ie({}),f=ie({}),u=ie([]),d=ie([]),c=ie([]),l=ie({}),m=ie("matches"),v=ie([]),C=ie([]),b=ie([]),_=ie({}),g=ie(!1),R=ie(!1),P=ie({}),S=ie({});let L=null;const I=se(()=>{const de=f.value;let O=0;return Object.values(de).forEach(N=>{O+=N.total_entries||0}),O.toLocaleString()}),T=se(()=>({"status-active":r.value.system_status?.processing_active,"status-inactive":!r.value.system_status?.processing_active})),E=se(()=>{const de=l.value.redis_pending||0,O=l.value.sql_pending||0,N=l.value.vector_pending||0;return de+O+N}),y=async()=>{if(!n.value){n.value=!0;try{try{const O=await fetch("/api/log-processing/statistics");O.ok?r.value=await O.json():(console.warn("System statistics not available, using mock data"),r.value=$())}catch{console.warn("System statistics API not available, using mock data"),r.value=$()}const de=r.value.activeTerminals?.terminal_ids||[];if(de.length>0){const O=de.map(async Z=>{try{const ne=await fetch(`/api/log-processing/terminal/${Z}/statistics`);if(ne.ok){const oe=await ne.json();return{[Z]:oe}}}catch{console.warn(`Failed to get statistics for terminal ${Z}, using mock data`)}return{[Z]:ee(Z)}}),N=await Promise.all(O);f.value=Object.assign({},...N)}else f.value=re();try{l.value=await G()}catch{console.warn("Processing queue not available, using mock data"),l.value=G()}await ae(),a.value&&await w(a.value)}catch(de){console.error("Failed to refresh statistics:",de),r.value=$(),f.value=re(),l.value=G()}finally{n.value=!1}}},A=async de=>{a.value=de,await w(de)},w=async de=>{try{const O=await fetch(`/api/log-processing/terminal/${de}/logs?limit=20`);O.ok&&(u.value=await O.json());const N=await fetch(`/api/log-processing/terminal/${de}/errors`);N.ok&&(d.value=await N.json());const Z=await fetch(`/api/log-processing/terminal/${de}/patterns`);Z.ok&&(c.value=await Z.json())}catch(O){console.error(`Failed to refresh details for terminal ${de}:`,O)}},k=de=>f.value[de]?.total_entries||0,M=de=>f.value[de]?.total_bytes||0,x=de=>0,F=de=>f.value[de]?.last_update||null,V=de=>{const O=f.value[de];return{"status-active":O&&O.last_update,"status-inactive":!O||!O.last_update}},D=de=>Array.from({length:24},()=>Math.floor(Math.random()*100)),z=de=>{if(de===0)return"0 B";const O=1024,N=["B","KB","MB","GB"],Z=Math.floor(Math.log(de)/Math.log(O));return parseFloat((de/Math.pow(O,Z)).toFixed(1))+" "+N[Z]},p=de=>de?new Date(de).toLocaleString():"N/A",B=(de,O)=>de?de.length>O?de.substring(0,O)+"...":de:"",U=de=>({"log-error":de==="ERROR","log-warning":de==="WARNING","log-info":de==="INFO","log-debug":de==="DEBUG"}),$=()=>({activeTerminals:{count:3,terminal_ids:["terminal-1","terminal-2","terminal-dev"]},pattern_analysis:{vector_storage:{total_documents:247}},system_status:{processing_active:!0,background_tasks:2}}),ee=de=>({total_entries:Math.floor(Math.random()*1e3)+100,total_bytes:Math.floor(Math.random()*1e6)+5e4,last_update:new Date().toISOString()}),re=()=>({"terminal-1":ee(),"terminal-2":ee(),"terminal-dev":ee()}),G=()=>({redis_pending:Math.floor(Math.random()*50),sql_pending:Math.floor(Math.random()*20),vector_pending:Math.floor(Math.random()*10),processing_rate:Math.floor(Math.random()*100)+50}),ae=async()=>{v.value=[{id:"1",type:"ERROR",matches:45,frequency:78,trend:"up",content:"FileNotFoundError: [Errno 2] No such file or directory"},{id:"2",type:"COMMAND",matches:32,frequency:156,trend:"stable",content:"npm install express"},{id:"3",type:"WARNING",matches:28,frequency:43,trend:"down",content:"DeprecationWarning: Use of deprecated function"}],C.value=[{id:"1",error_level:"ERROR",matches_24h:15,severity_score:.8,content:"Connection timeout to database server",terminal_count:2,total_frequency:45,first_seen:new Date(Date.now()-864e5).toISOString()}],b.value=[{id:"1",command_type:"NPM",frequency:25,success_rate:.92,content:"npm run build",error_count:2,risk_score:.1,last_seen:new Date().toISOString()}],_.value={total_error_patterns:12,total_warning_patterns:8,critical_errors:3,total_error_matches:67}},X=de=>{const O=l.value[`${de}_pending`]||0;return O>100?"queue-high":O>50?"queue-medium":"queue-normal"},he=de=>{switch(de){case"up":return"";case"down":return"";default:return""}},we=de=>({"success-high":de>.9,"success-medium":de>.7,"success-low":de<=.7}),Ie=ie(""),K=ie({dataSource:"all",terminalId:null,logLevel:null,timeRange:"24h"}),te=ie([]),ve=ie("recent"),Ce=ie(!1),Ae=ie(!1),Be=ie(!1),He=[{title:"All Sources",value:"all"},{title:"Recent Logs",value:"recent"},{title:"Structured Logs",value:"structured"},{title:"Patterns",value:"patterns"}],Fe=se(()=>[{title:"All Terminals",value:null},...Object.keys(f.value).map(de=>({title:de,value:de}))]),Ve=[{title:"All Levels",value:null},{title:"ERROR",value:"ERROR"},{title:"WARNING",value:"WARNING"},{title:"INFO",value:"INFO"},{title:"DEBUG",value:"DEBUG"}],Le=[{title:"Last Hour",value:"1h"},{title:"Last 24 Hours",value:"24h"},{title:"Last 7 Days",value:"7d"},{title:"Last 30 Days",value:"30d"}],et=async()=>{if(Ie.value.trim()){Ae.value=!0,Ce.value=!0;try{te.value=[{id:"1",source:"recent",terminal_id:"terminal-1",timestamp:new Date().toISOString(),raw_output:`Error: ${Ie.value} not found in system logs`,content:`Error: ${Ie.value} not found in system logs`},{id:"2",source:"structured",terminal_id:"terminal-2",timestamp:new Date(Date.now()-36e5).toISOString(),log_type:"COMMAND",error_level:"INFO",command:`search ${Ie.value}`,output_text:`Searching for ${Ie.value}...`}],Ie.value.toLowerCase().includes("error")&&te.value.push({id:"3",source:"patterns",pattern_type:"ERROR",frequency:15,similarity:.85,content:`Pattern match for error: ${Ie.value}`,terminal_count:2,severity_score:.7})}catch(de){console.error("Search failed:",de)}finally{Ae.value=!1}}},Ze=se(()=>{const de={};return te.value.forEach(O=>{const N=new Date(O.timestamp).toDateString();de[N]||(de[N]=[]),de[N].push(O)}),de}),Xe=(de,O)=>{if(!de||!O)return de;const N=new RegExp(`(${O})`,"gi");return de.replace(N,"<mark>$1</mark>")},at=de=>({"timeline-error":de.error_level==="ERROR","timeline-warning":de.error_level==="WARNING","timeline-pattern":de.source==="patterns"}),lt=de=>({"marker-error":de.error_level==="ERROR","marker-warning":de.error_level==="WARNING","marker-pattern":de.source==="patterns"}),gt=de=>new Date(de).toLocaleDateString(),Te=de=>new Date(de).toLocaleTimeString(),Ne=()=>{if(!t.service||!t.service.socket){console.warn("Socket.IO not available for log monitoring");return}const de=t.service.socket;de.on("log_system_stats",O=>{r.value=O.stats}),de.on("log_terminal_stats",O=>{O.terminal_id&&O.stats&&(f.value[O.terminal_id]=O.stats)}),de.on("log_monitor_subscribed",O=>{console.log("Subscribed to log monitoring:",O),i.value=!0}),de.on("log_monitor_error",O=>{console.error("Log monitor error:",O.error),i.value=!1}),de.on("log_search_results",O=>{O.query===Ie.value&&(te.value=O.results)}),de.emit("log_monitor_subscribe",{terminal_id:"all"}),i.value=!0},pe=()=>{if(!t.service||!t.service.socket)return;const de=t.service.socket;de.emit("log_monitor_unsubscribe",{terminal_id:"all"}),de.off("log_system_stats"),de.off("log_terminal_stats"),de.off("log_monitor_subscribed"),de.off("log_monitor_error"),de.off("log_search_results"),i.value=!1};return sn(()=>{y(),Ne(),s.value&&!i.value&&(L=setInterval(y,1e4))}),Fa(()=>{L&&clearInterval(L),pe()}),rt(s,de=>{L&&(clearInterval(L),L=null),de&&!i.value&&(L=setInterval(y,1e4))}),rt(i,de=>{de&&L?(clearInterval(L),L=null):!de&&s.value&&(L=setInterval(y,1e4))}),(de,O)=>{const N=Tt("v-btn"),Z=Tt("v-switch"),ne=Tt("v-icon"),oe=Tt("v-tab"),W=Tt("v-tabs"),le=Tt("v-tabs-window-item"),fe=Tt("v-tabs-window"),ce=Tt("v-text-field"),ye=Tt("v-select");return Y(),J("div",oA,[h("div",rA,[O[13]||(O[13]=h("h3",null,"Terminal Log Monitor",-1)),h("div",lA,[j(N,{size:"small",icon:"mdi-refresh",onClick:y,loading:n.value},null,8,["loading"]),j(Z,{modelValue:s.value,"onUpdate:modelValue":O[0]||(O[0]=q=>s.value=q),label:"Auto Refresh",density:"compact","hide-details":""},null,8,["modelValue"])])]),h("div",cA,[O[22]||(O[22]=h("h4",null,"Memory Systems",-1)),h("div",uA,[h("div",{class:Se(["memory-card redis-memory",{connected:g.value,disconnected:!g.value}])},[h("div",dA,[j(ne,{color:g.value?"success":"error"},{default:Ee(()=>[nt(Q(g.value?"mdi-database-check":"mdi-database-remove"),1)]),_:1},8,["color"]),O[14]||(O[14]=h("span",{class:"memory-title"},"Short-term Memory (Redis)",-1))]),h("div",fA,[h("div",{class:Se(["status-indicator",{active:g.value}])},Q(g.value?"Connected":"Disconnected"),3),g.value?(Y(),J("div",mA,[h("div",vA,[O[15]||(O[15]=h("span",null,"Used Memory:",-1)),h("span",null,Q(P.value.used_memory||"N/A"),1)]),h("div",hA,[O[16]||(O[16]=h("span",null,"Keys:",-1)),h("span",null,Q(P.value.total_keys||0),1)])])):Me("",!0)])],2),h("div",{class:Se(["memory-card controlserver-memory",{connected:R.value,disconnected:!R.value}])},[h("div",gA,[j(ne,{color:R.value?"success":"warning"},{default:Ee(()=>[nt(Q(R.value?"mdi-server-network":"mdi-server-network-off"),1)]),_:1},8,["color"]),O[17]||(O[17]=h("span",{class:"memory-title"},"Long-term Memory (ControlServer)",-1))]),h("div",pA,[h("div",{class:Se(["status-indicator",{active:R.value}])},Q(R.value?"Connected":"Unavailable"),3),R.value?(Y(),J("div",_A,[h("div",bA,[O[18]||(O[18]=h("span",null,"Vector Store:",-1)),h("span",null,Q(S.value.vector_documents||0)+" docs",1)]),h("div",yA,[O[19]||(O[19]=h("span",null,"Summaries:",-1)),h("span",null,Q(S.value.log_summaries||0),1)])])):(Y(),J("div",wA,[j(ne,{color:"warning",size:"small"},{default:Ee(()=>O[20]||(O[20]=[nt("mdi-alert")])),_:1,__:[20]}),O[21]||(O[21]=h("span",null,"Limited functionality without ControlServer",-1))]))])],2)])]),h("div",kA,[O[27]||(O[27]=h("h4",null,"System Overview",-1)),h("div",SA,[h("div",CA,[h("div",AA,Q(r.value.activeTerminals?.count||0),1),O[23]||(O[23]=h("div",{class:"metric-label"},"Active Terminals",-1))]),h("div",TA,[h("div",xA,Q(I.value),1),O[24]||(O[24]=h("div",{class:"metric-label"},"Total Log Volume",-1))]),h("div",EA,[h("div",RA,Q(r.value.pattern_analysis?.vector_storage?.total_documents||0),1),O[25]||(O[25]=h("div",{class:"metric-label"},"Stored Patterns",-1))]),h("div",MA,[h("div",{class:Se(["metric-value",T.value])},Q(r.value.system_status?.processing_active?"Active":"Inactive"),3),O[26]||(O[26]=h("div",{class:"metric-label"},"Processing Status",-1))])])]),h("div",IA,[O[35]||(O[35]=h("h4",null,"Unprocessed Logs",-1)),h("div",BA,[h("div",LA,[O[28]||(O[28]=h("div",{class:"unprocessed-header"},[h("span",{class:"stage-icon"},""),h("span",{class:"stage-name"},"Redis Queue")],-1)),h("div",{class:Se(["unprocessed-value",X("redis")])},Q(l.value.redis_pending||0),3),O[29]||(O[29]=h("div",{class:"unprocessed-label"},"Pending logs in Redis buffer",-1))]),h("div",OA,[O[30]||(O[30]=h("div",{class:"unprocessed-header"},[h("span",{class:"stage-icon"},""),h("span",{class:"stage-name"},"SQL Processing")],-1)),h("div",{class:Se(["unprocessed-value",X("sql")])},Q(l.value.sql_pending||0),3),O[31]||(O[31]=h("div",{class:"unprocessed-label"},"Waiting for SQL processing",-1))]),h("div",PA,[O[32]||(O[32]=h("div",{class:"unprocessed-header"},[h("span",{class:"stage-icon"},""),h("span",{class:"stage-name"},"Vector Processing")],-1)),h("div",{class:Se(["unprocessed-value",X("vector")])},Q(l.value.vector_pending||0),3),O[33]||(O[33]=h("div",{class:"unprocessed-label"},"Awaiting pattern extraction",-1))]),h("div",$A,[O[34]||(O[34]=h("div",{class:"unprocessed-header"},[h("span",{class:"stage-icon"},""),h("span",{class:"stage-name"},"Total Unprocessed")],-1)),h("div",FA,Q(E.value),1),h("div",DA,Q(l.value.processing_rate||0)+" logs/min processing rate",1)])])]),h("div",VA,[O[44]||(O[44]=h("h4",null,"Pattern Analysis & Ranking",-1)),h("div",NA,[h("div",jA,[j(W,{modelValue:m.value,"onUpdate:modelValue":O[1]||(O[1]=q=>m.value=q),density:"compact"},{default:Ee(()=>[j(oe,{value:"matches"},{default:Ee(()=>O[36]||(O[36]=[nt("Top Matches")])),_:1,__:[36]}),j(oe,{value:"errors"},{default:Ee(()=>O[37]||(O[37]=[nt("Error Patterns")])),_:1,__:[37]}),j(oe,{value:"commands"},{default:Ee(()=>O[38]||(O[38]=[nt("Command Patterns")])),_:1,__:[38]})]),_:1},8,["modelValue"])]),j(fe,{modelValue:m.value,"onUpdate:modelValue":O[2]||(O[2]=q=>m.value=q)},{default:Ee(()=>[j(le,{value:"matches"},{default:Ee(()=>[h("div",HA,[O[39]||(O[39]=h("div",{class:"pattern-header-row"},[h("span",{class:"pattern-col-rank"},"#"),h("span",{class:"pattern-col-type"},"Type"),h("span",{class:"pattern-col-matches"},"Matches (24h)"),h("span",{class:"pattern-col-trend"},"Trend"),h("span",{class:"pattern-col-content"},"Pattern")],-1)),(Y(!0),J(Je,null,wt(v.value,(q,_e)=>(Y(),J("div",{key:q.id,class:Se(["pattern-ranking-item",{"high-activity":q.matches>50}])},[h("span",zA,Q(_e+1),1),h("span",{class:Se(["pattern-type",`type-${q.type.toLowerCase()}`])},Q(q.type),3),h("span",UA,[h("span",qA,Q(q.matches),1),h("span",WA,Q(q.frequency)+"x total",1)]),h("span",YA,[h("div",{class:Se(["trend-indicator",q.trend])},Q(he(q.trend)),3)]),h("span",KA,Q(B(q.content,80)),1)],2))),128))])]),_:1}),j(le,{value:"errors"},{default:Ee(()=>[h("div",GA,[h("div",XA,[h("div",ZA,[h("div",QA,Q(_.value.total_error_patterns||0),1),O[40]||(O[40]=h("div",{class:"stat-label"},"Error Patterns",-1))]),h("div",JA,[h("div",eT,Q(_.value.total_warning_patterns||0),1),O[41]||(O[41]=h("div",{class:"stat-label"},"Warning Patterns",-1))]),h("div",tT,[h("div",nT,Q(_.value.critical_errors||0),1),O[42]||(O[42]=h("div",{class:"stat-label"},"Critical Errors (24h)",-1))]),h("div",sT,[h("div",aT,Q(_.value.total_error_matches||0),1),O[43]||(O[43]=h("div",{class:"stat-label"},"Total Error Matches",-1))])]),h("div",iT,[(Y(!0),J(Je,null,wt(C.value,q=>(Y(),J("div",{key:q.id,class:Se(["error-pattern-item",`severity-${q.severity_level}`])},[h("div",oT,[h("span",{class:Se(["error-level",`level-${q.error_level.toLowerCase()}`])},Q(q.error_level),3),h("span",rT,Q(q.matches_24h)+" matches today",1),h("span",lT," Severity: "+Q((q.severity_score*10).toFixed(1))+"/10 ",1)]),h("div",cT,Q(B(q.content,120)),1),h("div",uT,[h("span",dT,"Terminals: "+Q(q.terminal_count),1),h("span",fT,"Total: "+Q(q.total_frequency)+"x",1),h("span",mT,"First: "+Q(p(q.first_seen)),1)])],2))),128))])])]),_:1}),j(le,{value:"commands"},{default:Ee(()=>[h("div",vT,[(Y(!0),J(Je,null,wt(b.value,q=>(Y(),J("div",{key:q.id,class:Se(["command-pattern-item",{"high-risk":q.risk_score>.7}])},[h("div",hT,[h("span",gT,Q(q.command_type||"GENERAL"),1),h("span",pT,Q(q.frequency)+"x executed",1),h("span",{class:Se(["command-success-rate",we(q.success_rate)])},Q((q.success_rate*100).toFixed(1))+"% success ",3)]),h("div",_T,[h("code",null,Q(B(q.content,100)),1)]),h("div",bT,[h("span",yT,"Errors: "+Q(q.error_count),1),h("span",wT,"Risk: "+Q((q.risk_score*10).toFixed(1))+"/10",1),h("span",kT,"Last: "+Q(p(q.last_seen)),1)])],2))),128))])]),_:1})]),_:1},8,["modelValue"])])]),h("div",ST,[O[51]||(O[51]=h("h4",null,"Terminal Activity",-1)),h("div",CT,[(Y(!0),J(Je,null,wt(r.value.activeTerminals?.terminal_ids||[],q=>(Y(),J("div",{key:q,class:Se(["terminal-item",{selected:a.value===q}]),onClick:_e=>A(q)},[h("div",TT,[h("div",xT,Q(q),1),h("div",{class:Se(["terminal-status",V(q)])},O[45]||(O[45]=[h("span",{class:"status-dot"},null,-1),nt(" Active ")]),2)]),h("div",ET,[h("div",RT,[O[46]||(O[46]=h("span",{class:"metric-name"},"Logs:",-1)),h("span",MT,Q(k(q)),1)]),h("div",IT,[O[47]||(O[47]=h("span",{class:"metric-name"},"Bytes:",-1)),h("span",BT,Q(z(M(q))),1)]),h("div",LT,[O[48]||(O[48]=h("span",{class:"metric-name"},"Errors:",-1)),h("span",OT,Q(x()),1)]),h("div",PT,[O[49]||(O[49]=h("span",{class:"metric-name"},"Last Update:",-1)),h("span",$T,Q(p(F(q))),1)])]),h("div",FT,[O[50]||(O[50]=h("div",{class:"chart-title"},"Recent Activity (1h)",-1)),h("div",DT,[(Y(!0),J(Je,null,wt(D(),(_e,ue)=>(Y(),J("div",{key:ue,class:"volume-bar",style:it({height:`${Math.min(_e/100,100)}%`}),title:`${_e} logs`},null,12,VT))),128))])])],10,AT))),128))])]),a.value?(Y(),J("div",NT,[h("h4",null,"Terminal Details: "+Q(a.value),1),h("div",jT,[h("div",HT,[j(W,{modelValue:o.value,"onUpdate:modelValue":O[3]||(O[3]=q=>o.value=q),density:"compact"},{default:Ee(()=>[j(oe,{value:"recent"},{default:Ee(()=>O[52]||(O[52]=[nt("Recent Logs")])),_:1,__:[52]}),j(oe,{value:"errors"},{default:Ee(()=>O[53]||(O[53]=[nt("Errors")])),_:1,__:[53]}),j(oe,{value:"patterns"},{default:Ee(()=>O[54]||(O[54]=[nt("Patterns")])),_:1,__:[54]})]),_:1},8,["modelValue"])]),j(fe,{modelValue:o.value,"onUpdate:modelValue":O[4]||(O[4]=q=>o.value=q)},{default:Ee(()=>[j(le,{value:"recent"},{default:Ee(()=>[h("div",zT,[(Y(!0),J(Je,null,wt(u.value,q=>(Y(),J("div",{key:q.timestamp,class:Se(["log-entry",U(q.error_level)])},[h("div",UT,[h("span",qT,Q(p(q.timestamp)),1),h("span",WT,Q(q.error_level),1),h("span",YT,Q(q.log_type),1)]),h("div",KT,[q.command?(Y(),J("div",GT,"$ "+Q(q.command),1)):Me("",!0),h("div",XT,Q(B(q.output_text,200)),1)])],2))),128))])]),_:1}),j(le,{value:"errors"},{default:Ee(()=>[h("div",ZT,[(Y(!0),J(Je,null,wt(d.value,q=>(Y(),J("div",{key:q.id,class:"error-item"},[h("div",QT,[h("span",{class:Se(["error-level",U(q.error_level)])},Q(q.error_level),3),h("span",JT,Q(q.count)+"x",1),h("span",ex,Q(p(q.last_seen)),1)]),h("div",tx,Q(B(q.output_text,150)),1)]))),128))])]),_:1}),j(le,{value:"patterns"},{default:Ee(()=>[h("div",nx,[(Y(!0),J(Je,null,wt(c.value,q=>(Y(),J("div",{key:q.id,class:"pattern-item"},[h("div",sx,[h("span",ax,Q(q.pattern_type),1),h("span",ix,Q(q.frequency)+"x",1),h("span",ox,"Score: "+Q(q.severity_score?.toFixed(2)),1)]),h("div",rx,Q(B(q.content,100)),1)]))),128))])]),_:1})]),_:1},8,["modelValue"])])])):Me("",!0),h("div",lx,[O[60]||(O[60]=h("h4",null,"Log Search & Analysis",-1)),h("div",cx,[h("div",ux,[h("div",dx,[j(ce,{modelValue:Ie.value,"onUpdate:modelValue":O[5]||(O[5]=q=>Ie.value=q),label:"Search logs, patterns, or commands","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"compact",onKeyup:_o(et,["enter"]),clearable:""},null,8,["modelValue"]),j(N,{color:"primary",onClick:et,loading:Ae.value,size:"large"},{default:Ee(()=>O[55]||(O[55]=[nt(" Search ")])),_:1,__:[55]},8,["loading"])]),h("div",fx,[j(ye,{modelValue:K.value.dataSource,"onUpdate:modelValue":O[6]||(O[6]=q=>K.value.dataSource=q),items:He,label:"Data Source",variant:"outlined",density:"compact",style:{"max-width":"200px"}},null,8,["modelValue"]),j(ye,{modelValue:K.value.terminalId,"onUpdate:modelValue":O[7]||(O[7]=q=>K.value.terminalId=q),items:Fe.value,label:"Terminal",variant:"outlined",density:"compact",style:{"max-width":"200px"},clearable:""},null,8,["modelValue","items"]),j(ye,{modelValue:K.value.logLevel,"onUpdate:modelValue":O[8]||(O[8]=q=>K.value.logLevel=q),items:Ve,label:"Log Level",variant:"outlined",density:"compact",style:{"max-width":"150px"},clearable:""},null,8,["modelValue"]),j(ye,{modelValue:K.value.timeRange,"onUpdate:modelValue":O[9]||(O[9]=q=>K.value.timeRange=q),items:Le,label:"Time Range",variant:"outlined",density:"compact",style:{"max-width":"150px"}},null,8,["modelValue"])])]),te.value.length>0||Ce.value?(Y(),J("div",mx,[h("div",vx,[h("h5",null,"Search Results ("+Q(te.value.length)+")",1),h("div",hx,[j(N,{size:"small",variant:"outlined",onClick:O[10]||(O[10]=q=>Be.value=!Be.value),color:Be.value?"primary":"default"},{default:Ee(()=>[nt(Q(Be.value?"List View":"Timeline View"),1)]),_:1},8,["color"])])]),Be.value?(Y(),J("div",gx,[h("div",px,[O[56]||(O[56]=h("div",{class:"timeline-line"},null,-1)),(Y(!0),J(Je,null,wt(Ze.value,(q,_e)=>(Y(),J("div",{key:_e,class:"timeline-day-group"},[h("div",_x,[h("h6",null,Q(gt(_e)),1),h("span",bx,Q(q.length)+" events",1)]),h("div",yx,[(Y(!0),J(Je,null,wt(q,ue=>(Y(),J("div",{key:`timeline-${ue.source}-${ue.id}`,class:Se(["timeline-event",at(ue)])},[h("div",{class:Se(["timeline-marker",lt(ue)])},null,2),h("div",wx,[h("div",kx,[h("span",Sx,Q(Te(ue.timestamp)),1),h("span",Cx,Q(ue.terminal_id),1),h("span",{class:Se(["timeline-type",`type-${ue.source}`])},Q(ue.source),3),ue.error_level?(Y(),J("span",{key:0,class:Se(["timeline-level",U(ue.error_level)])},Q(ue.error_level),3)):Me("",!0)]),h("div",Ax,[ue.command?(Y(),J("div",Tx,[h("code",null,Q(B(ue.command,60)),1)])):Me("",!0),h("div",xx,Q(B(ue.content||ue.output_text||ue.raw_output,100)),1)])])],2))),128))])]))),128))])])):(Y(),J("div",Ex,[h("div",Rx,[j(W,{modelValue:ve.value,"onUpdate:modelValue":O[11]||(O[11]=q=>ve.value=q),density:"compact"},{default:Ee(()=>[j(oe,{value:"recent"},{default:Ee(()=>[nt("Recent Logs ("+Q(te.value.filter(q=>q.source==="recent").length)+")",1)]),_:1}),j(oe,{value:"structured"},{default:Ee(()=>[nt("Structured ("+Q(te.value.filter(q=>q.source==="structured").length)+")",1)]),_:1}),j(oe,{value:"patterns"},{default:Ee(()=>[nt("Patterns ("+Q(te.value.filter(q=>q.source==="patterns").length)+")",1)]),_:1})]),_:1},8,["modelValue"])]),j(fe,{modelValue:ve.value,"onUpdate:modelValue":O[12]||(O[12]=q=>ve.value=q)},{default:Ee(()=>[j(le,{value:"recent"},{default:Ee(()=>[h("div",Mx,[(Y(!0),J(Je,null,wt(te.value.filter(q=>q.source==="recent"),q=>(Y(),J("div",{key:`recent-${q.id}`,class:"search-result-item"},[h("div",Ix,[h("span",Bx,Q(q.terminal_id),1),h("span",Lx,Q(p(q.timestamp)),1),h("span",Ox,Q(q.raw_output?"Raw Output":"Processed Log"),1)]),h("div",Px,[h("div",{innerHTML:Xe(q.content||q.raw_output,Ie.value)},null,8,$x)])]))),128))])]),_:1}),j(le,{value:"structured"},{default:Ee(()=>[h("div",Fx,[(Y(!0),J(Je,null,wt(te.value.filter(q=>q.source==="structured"),q=>(Y(),J("div",{key:`structured-${q.id}`,class:Se(["search-result-item structured",U(q.error_level)])},[h("div",Dx,[h("span",Vx,Q(q.terminal_id),1),h("span",Nx,Q(p(q.timestamp)),1),h("span",{class:Se(["result-level",U(q.error_level)])},Q(q.error_level),3),h("span",jx,Q(q.log_type),1)]),h("div",Hx,[q.command?(Y(),J("div",zx,[O[57]||(O[57]=h("strong",null,"Command:",-1)),h("code",{innerHTML:Xe(q.command,Ie.value)},null,8,Ux)])):Me("",!0),h("div",qx,[h("div",{innerHTML:Xe(q.output_text,Ie.value)},null,8,Wx)])])],2))),128))])]),_:1}),j(le,{value:"patterns"},{default:Ee(()=>[h("div",Yx,[(Y(!0),J(Je,null,wt(te.value.filter(q=>q.source==="patterns"),q=>(Y(),J("div",{key:`pattern-${q.id}`,class:"search-result-item pattern"},[h("div",Kx,[h("span",{class:Se(["result-type pattern-type",`type-${q.pattern_type?.toLowerCase()}`])},Q(q.pattern_type||"UNKNOWN"),3),h("span",Gx,Q(q.frequency)+"x occurrences",1),h("span",Xx,Q((q.similarity*100).toFixed(1))+"% match",1),h("span",Zx,Q(q.terminal_count||0)+" terminals",1)]),h("div",Qx,[h("div",{innerHTML:Xe(q.content,Ie.value)},null,8,Jx)]),h("div",eE,[q.severity_score?(Y(),J("span",tE," Severity: "+Q((q.severity_score*10).toFixed(1))+"/10 ",1)):Me("",!0),q.risk_score?(Y(),J("span",nE," Risk: "+Q((q.risk_score*10).toFixed(1))+"/10 ",1)):Me("",!0),q.first_seen?(Y(),J("span",sE," First seen: "+Q(p(q.first_seen)),1)):Me("",!0)])]))),128))])]),_:1})]),_:1},8,["modelValue"])]))])):Ce.value&&te.value.length===0?(Y(),J("div",aE,O[58]||(O[58]=[h("div",{class:"no-results-icon"},"",-1),h("div",{class:"no-results-text"},[h("h6",null,"No results found"),h("p",null,"Try adjusting your search query or filters")],-1)]))):(Y(),J("div",iE,O[59]||(O[59]=[rv('<h6 data-v-b0ca4063>Search across all log data</h6><div class="search-tips" data-v-b0ca4063><div class="tip-section" data-v-b0ca4063><strong data-v-b0ca4063>Data Sources:</strong><ul data-v-b0ca4063><li data-v-b0ca4063><strong data-v-b0ca4063>Recent Logs:</strong> Raw terminal output from Redis buffer</li><li data-v-b0ca4063><strong data-v-b0ca4063>Structured:</strong> Processed logs with command/output separation</li><li data-v-b0ca4063><strong data-v-b0ca4063>Patterns:</strong> Extracted patterns from Vector DB</li></ul></div><div class="tip-section" data-v-b0ca4063><strong data-v-b0ca4063>Search Tips:</strong><ul data-v-b0ca4063><li data-v-b0ca4063>Use quotes for exact phrases: &quot;error message&quot;</li><li data-v-b0ca4063>Search for error types, commands, or file names</li><li data-v-b0ca4063>Combine filters to narrow down results</li></ul></div></div>',2)])))])]),h("div",oE,[O[66]||(O[66]=h("h4",null,"Processing Pipeline",-1)),h("div",rE,[h("div",{class:Se(["pipeline-stage",{active:r.value.system_status?.processing_active}])},O[61]||(O[61]=[h("div",{class:"stage-icon"},"",-1),h("div",{class:"stage-name"},"Log Capture",-1),h("div",{class:"stage-status"},"Redis Buffer",-1)]),2),O[64]||(O[64]=h("div",{class:"pipeline-arrow"},"",-1)),h("div",{class:Se(["pipeline-stage",{active:r.value.system_status?.processing_active}])},O[62]||(O[62]=[h("div",{class:"stage-icon"},"",-1),h("div",{class:"stage-name"},"Processing",-1),h("div",{class:"stage-status"},"SQL Storage",-1)]),2),O[65]||(O[65]=h("div",{class:"pipeline-arrow"},"",-1)),h("div",{class:Se(["pipeline-stage",{active:r.value.system_status?.processing_active}])},O[63]||(O[63]=[h("div",{class:"stage-icon"},"",-1),h("div",{class:"stage-name"},"Pattern Analysis",-1),h("div",{class:"stage-status"},"Vector DB",-1)]),2)])])])}}},Zh=xt(lE,[["__scopeId","data-v-b0ca4063"]]),cE={class:"log-monitor-tab-container"},uE=kt({__name:"LogMonitorTab",setup(e){return(t,n)=>(Y(),J("div",cE,[j(Zh)]))}}),dE=xt(uE,[["__scopeId","data-v-dc4ec93b"]]),fE={key:1,class:"title-text"},mE={class:"status-indicator"},vE={key:0,class:"buffer-status"},hE={class:"buffer-lines"},gE={class:"pane-actions"},pE={class:"info-table"},_E={class:"dialog-actions"},bE=kt({__name:"PaneHeader",props:{pane:{}},emits:["split","close","rename","clear-buffer","save-buffer","restore-buffer","export-buffer","open-search","copy-selection","paste-clipboard","select-all"],setup(e,{emit:t}){const n=e,s=t,a=$i(),i=Xh(),o=ie(!1),r=ie(""),f=ie(),u=ie(!1),d=se(()=>{switch(n.pane.status){case"active":return"mdi-check-circle";case"connecting":return"mdi-loading";case"disconnected":return"mdi-close-circle";case"error":return"mdi-alert-circle";default:return"mdi-help-circle"}}),c=se(()=>{switch(n.pane.status){case"active":return"success";case"connecting":return"warning";case"disconnected":return"error";case"error":return"error";default:return"grey"}}),l=se(()=>n.pane.sessionId?i.getBufferStats(n.pane.sessionId):{totalLines:0,currentLine:0,maxLines:0}),m=async()=>{o.value=!0,r.value=n.pane.title,await Yt(),f.value&&(f.value.focus(),f.value.select())},v=()=>{r.value.trim()&&r.value!==n.pane.title&&s("rename",n.pane.id,r.value.trim()),o.value=!1},C=()=>{r.value=n.pane.title,o.value=!1},b=()=>{console.log(" PANE: Duplicating pane:",n.pane.id);const w=a.createPane(n.pane.tabId,n.pane.type,`${n.pane.title} (Copy)`,n.pane.subType,{x:n.pane.position.x+5,y:n.pane.position.y+5,width:n.pane.position.width,height:n.pane.position.height});console.log(" PANE: Created duplicate pane:",w.id)},_=()=>{s("close",n.pane.id)},g=()=>{u.value=!0},R=w=>new Intl.DateTimeFormat("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(w),P=()=>{s("clear-buffer",n.pane.id)},S=()=>{s("save-buffer",n.pane.id)},L=()=>{s("restore-buffer",n.pane.id)},I=()=>{s("export-buffer",n.pane.id)},T=()=>{s("open-search",n.pane.id)},E=()=>{s("copy-selection",n.pane.id)},y=()=>{s("paste-clipboard",n.pane.id)},A=()=>{s("select-all",n.pane.id)};return(w,k)=>{const M=Tt("v-icon"),x=Tt("v-btn"),F=Tt("v-list-item-title"),V=Tt("v-list-item"),D=Tt("v-divider"),z=Tt("v-list"),p=Tt("v-menu"),B=Tt("v-card-title"),U=Tt("v-card-text"),$=Tt("v-card"),ee=Tt("v-dialog");return Y(),J("div",{class:Se(["pane-header",{active:w.pane.isActive}])},[h("div",{class:"pane-title",onDblclick:m},[o.value?an((Y(),J("input",{key:0,"onUpdate:modelValue":k[0]||(k[0]=re=>r.value=re),ref_key:"titleInput",ref:f,class:"title-input",onBlur:v,onKeyup:[_o(v,["enter"]),_o(C,["escape"])]},null,544)),[[Di,r.value]]):(Y(),J("span",fE,Q(w.pane.title),1))],32),h("div",mE,[j(M,{icon:d.value,color:c.value,size:"small"},null,8,["icon","color"])]),l.value.totalLines>0?(Y(),J("div",vE,[h("span",hE,Q(l.value.totalLines)+" lines",1)])):Me("",!0),h("div",gE,[j(x,{icon:"",size:"x-small",variant:"text",onClick:T,title:"Search Terminal (Ctrl+Shift+F)"},{default:Ee(()=>[j(M,null,{default:Ee(()=>k[5]||(k[5]=[nt("mdi-magnify")])),_:1,__:[5]})]),_:1}),j(x,{icon:"",size:"x-small",variant:"text",onClick:P,title:"Clear Buffer"},{default:Ee(()=>[j(M,null,{default:Ee(()=>k[6]||(k[6]=[nt("mdi-broom")])),_:1,__:[6]})]),_:1}),j(x,{icon:"",size:"x-small",variant:"text",onClick:k[1]||(k[1]=re=>w.$emit("split",w.pane.id,"horizontal")),title:"Split Horizontally"},{default:Ee(()=>[j(M,null,{default:Ee(()=>k[7]||(k[7]=[nt("mdi-view-column")])),_:1,__:[7]})]),_:1}),j(x,{icon:"",size:"x-small",variant:"text",onClick:k[2]||(k[2]=re=>w.$emit("split",w.pane.id,"vertical")),title:"Split Vertically"},{default:Ee(()=>[j(M,null,{default:Ee(()=>k[8]||(k[8]=[nt("mdi-view-agenda")])),_:1,__:[8]})]),_:1}),j(p,null,{activator:Ee(({props:re})=>[j(x,ot({icon:"",size:"x-small",variant:"text"},re,{title:"More Options"}),{default:Ee(()=>[j(M,null,{default:Ee(()=>k[9]||(k[9]=[nt("mdi-dots-vertical")])),_:1,__:[9]})]),_:2},1040)]),default:Ee(()=>[j(z,null,{default:Ee(()=>[j(V,{onClick:E},{default:Ee(()=>[j(F,null,{default:Ee(()=>[j(M,{start:""},{default:Ee(()=>k[10]||(k[10]=[nt("mdi-content-copy")])),_:1,__:[10]}),k[11]||(k[11]=nt(" Copy Selection "))]),_:1,__:[11]})]),_:1}),j(V,{onClick:y},{default:Ee(()=>[j(F,null,{default:Ee(()=>[j(M,{start:""},{default:Ee(()=>k[12]||(k[12]=[nt("mdi-content-paste")])),_:1,__:[12]}),k[13]||(k[13]=nt(" Paste "))]),_:1,__:[13]})]),_:1}),j(V,{onClick:A},{default:Ee(()=>[j(F,null,{default:Ee(()=>[j(M,{start:""},{default:Ee(()=>k[14]||(k[14]=[nt("mdi-select-all")])),_:1,__:[14]}),k[15]||(k[15]=nt(" Select All "))]),_:1,__:[15]})]),_:1}),j(D),j(V,{onClick:S},{default:Ee(()=>[j(F,null,{default:Ee(()=>[j(M,{start:""},{default:Ee(()=>k[16]||(k[16]=[nt("mdi-content-save")])),_:1,__:[16]}),k[17]||(k[17]=nt(" Save Buffer "))]),_:1,__:[17]})]),_:1}),j(V,{onClick:L},{default:Ee(()=>[j(F,null,{default:Ee(()=>[j(M,{start:""},{default:Ee(()=>k[18]||(k[18]=[nt("mdi-restore")])),_:1,__:[18]}),k[19]||(k[19]=nt(" Restore Buffer "))]),_:1,__:[19]})]),_:1}),j(V,{onClick:I},{default:Ee(()=>[j(F,null,{default:Ee(()=>[j(M,{start:""},{default:Ee(()=>k[20]||(k[20]=[nt("mdi-download")])),_:1,__:[20]}),k[21]||(k[21]=nt(" Export Buffer "))]),_:1,__:[21]})]),_:1}),j(D),j(V,{onClick:b},{default:Ee(()=>[j(F,null,{default:Ee(()=>[j(M,{start:""},{default:Ee(()=>k[22]||(k[22]=[nt("mdi-content-duplicate")])),_:1,__:[22]}),k[23]||(k[23]=nt(" Duplicate Pane "))]),_:1,__:[23]})]),_:1}),j(V,{onClick:m},{default:Ee(()=>[j(F,null,{default:Ee(()=>[j(M,{start:""},{default:Ee(()=>k[24]||(k[24]=[nt("mdi-pencil")])),_:1,__:[24]}),k[25]||(k[25]=nt(" Rename "))]),_:1,__:[25]})]),_:1}),j(V,{onClick:g},{default:Ee(()=>[j(F,null,{default:Ee(()=>[j(M,{start:""},{default:Ee(()=>k[26]||(k[26]=[nt("mdi-information")])),_:1,__:[26]}),k[27]||(k[27]=nt(" Pane Info "))]),_:1,__:[27]})]),_:1}),j(D),j(V,{onClick:_,class:"text-error"},{default:Ee(()=>[j(F,null,{default:Ee(()=>[j(M,{start:""},{default:Ee(()=>k[28]||(k[28]=[nt("mdi-close")])),_:1,__:[28]}),k[29]||(k[29]=nt(" Close Pane "))]),_:1,__:[29]})]),_:1})]),_:1})]),_:1})]),j(ee,{modelValue:u.value,"onUpdate:modelValue":k[4]||(k[4]=re=>u.value=re),"max-width":"400"},{default:Ee(()=>[j($,null,{default:Ee(()=>[j(B,null,{default:Ee(()=>k[30]||(k[30]=[nt("Pane Information")])),_:1,__:[30]}),j(U,null,{default:Ee(()=>[h("table",pE,[h("tbody",null,[h("tr",null,[k[31]||(k[31]=h("td",null,[h("strong",null,"ID:")],-1)),h("td",null,Q(w.pane.id),1)]),h("tr",null,[k[32]||(k[32]=h("td",null,[h("strong",null,"Type:")],-1)),h("td",null,Q(w.pane.type),1)]),h("tr",null,[k[33]||(k[33]=h("td",null,[h("strong",null,"Sub Type:")],-1)),h("td",null,Q(w.pane.subType||"N/A"),1)]),h("tr",null,[k[34]||(k[34]=h("td",null,[h("strong",null,"Session ID:")],-1)),h("td",null,Q(w.pane.sessionId||"N/A"),1)]),h("tr",null,[k[35]||(k[35]=h("td",null,[h("strong",null,"Status:")],-1)),h("td",null,Q(w.pane.status),1)]),h("tr",null,[k[36]||(k[36]=h("td",null,[h("strong",null,"Position:")],-1)),h("td",null,Q(`${w.pane.position.x}%, ${w.pane.position.y}%`),1)]),h("tr",null,[k[37]||(k[37]=h("td",null,[h("strong",null,"Size:")],-1)),h("td",null,Q(`${w.pane.position.width}%  ${w.pane.position.height}%`),1)]),h("tr",null,[k[38]||(k[38]=h("td",null,[h("strong",null,"Last Activity:")],-1)),h("td",null,Q(R(w.pane.lastActivity)),1)]),h("tr",null,[k[39]||(k[39]=h("td",null,[h("strong",null,"Buffer Lines:")],-1)),h("td",null,Q(l.value.totalLines)+" / "+Q(l.value.maxLines),1)]),h("tr",null,[k[40]||(k[40]=h("td",null,[h("strong",null,"Current Position:")],-1)),h("td",null,Q(l.value.currentLine+1),1)])])])]),_:1}),h("div",_E,[k[42]||(k[42]=h("div",{class:"spacer"},null,-1)),j(x,{onClick:k[3]||(k[3]=re=>u.value=!1)},{default:Ee(()=>k[41]||(k[41]=[nt("Close")])),_:1,__:[41]})])]),_:1})]),_:1},8,["modelValue"])],2)}}}),Sr=xt(bE,[["__scopeId","data-v-fd09ec53"]]),yE={key:0,class:"single-pane"},wE={class:"pane-content"},kE={key:1,class:"horizontal-split"},SE={class:"pane-content"},CE=["onMousedown"],AE={key:2,class:"vertical-split"},TE={class:"pane-content"},xE=["onMousedown"],EE={key:3,class:"grid-layout"},RE={class:"pane-content"},ME=kt({__name:"PaneContainer",props:{tabId:{},layout:{}},emits:["layout-changed","pane-created","pane-closed"],setup(e,{emit:t}){const n=e,s=t,a=$i(),i=ie(new Map),o=se(()=>a.getPanesByTab(n.tabId)),r=ie(!1),f=ie(null),u=(E,y)=>{console.log(" PANE: Splitting pane:",E,"direction:",y);const A=a.splitPane(E,y);if(A){s("pane-created",A);const w=y==="horizontal"?"horizontal":"vertical";a.updatePaneLayout(n.tabId,w),s("layout-changed",w)}},d=E=>{console.log(" PANE: Closing pane:",E),a.closePane(E),s("pane-closed",E),a.getPanesByTab(n.tabId).length<=1&&(a.updatePaneLayout(n.tabId,"single"),s("layout-changed","single"))},c=(E,y)=>{const A=o.value.find(w=>w.id===E);A&&(A.title=y,console.log(" PANE: Renamed pane:",E,"to:",y))},l=(E,y)=>{y?i.value.set(E,y):i.value.delete(E)},m=E=>{const y=i.value.get(E);y&&(y.clearScreenBuffer(),console.log(" BUFFER: Cleared buffer for pane:",E))},v=E=>{const y=i.value.get(E);if(y){const w=`save_${new Date().toISOString().replace(/[:.]/g,"-")}`;y.saveBufferState(w),console.log(" BUFFER: Saved buffer state for pane:",E,"as:",w)}},C=E=>{i.value.get(E)&&console.log(" BUFFER: Restore buffer for pane:",E)},b=E=>{const y=i.value.get(E);if(y){const A=y.exportBuffer("text"),w=new Blob([A],{type:"text/plain"}),k=URL.createObjectURL(w),M=document.createElement("a");M.href=k,M.download=`terminal_buffer_${E}_${new Date().toISOString()}.txt`,document.body.appendChild(M),M.click(),document.body.removeChild(M),URL.revokeObjectURL(k),console.log(" BUFFER: Exported buffer for pane:",E)}},_=E=>{const y=i.value.get(E);y&&(y.openSearch(),console.log(" SEARCH: Opened search for pane:",E))},g=E=>{const y=i.value.get(E);y&&(y.copySelection(),console.log(" COPY: Copied selection for pane:",E))},R=E=>{const y=i.value.get(E);y&&(y.pasteFromClipboard(),console.log(" PASTE: Pasted clipboard for pane:",E))},P=E=>{const y=i.value.get(E);y&&(y.selectAll(),console.log(" SELECT: Selected all for pane:",E))},S=()=>{console.log(" PANE: Terminal initialized for pane")},L=(E,y,A)=>{E.preventDefault(),r.value=!0,f.value={startX:E.clientX,startY:E.clientY,paneIndex:y,direction:A},document.addEventListener("mousemove",I),document.addEventListener("mouseup",T)},I=E=>{if(!r.value||!f.value)return;const{startX:y,startY:A,paneIndex:w,direction:k}=f.value,M=document.querySelector(".pane-container")?.getBoundingClientRect();if(!M)return;const x=o.value;if(!(w>=x.length-1))if(k==="horizontal"){const V=(E.clientX-y)/M.width*100,D=x[w],z=x[w+1],p=Math.max(10,Math.min(90,D.position.width+V)),B=Math.max(10,Math.min(90,z.position.width-V));D.position.width=p,z.position.width=B,f.value.startX=E.clientX}else{const V=(E.clientY-A)/M.height*100,D=x[w],z=x[w+1],p=Math.max(10,Math.min(90,D.position.height+V)),B=Math.max(10,Math.min(90,z.position.height-V));D.position.height=p,z.position.height=B,f.value.startY=E.clientY}},T=()=>{r.value=!1,f.value=null,document.removeEventListener("mousemove",I),document.removeEventListener("mouseup",T)};return sn(()=>{if(a.getPanesByTab(n.tabId).length===0){const y=a.createPane(n.tabId,"terminal","Terminal 1","pure");s("pane-created",y)}}),Fa(()=>{document.removeEventListener("mousemove",I),document.removeEventListener("mouseup",T)}),(E,y)=>(Y(),J("div",{class:Se(["pane-container",`layout-${E.layout}`])},[E.layout==="single"&&o.value.length>0?(Y(),J("div",yE,[j(Sr,{pane:o.value[0],onSplit:u,onClose:d,onRename:c,onClearBuffer:m,onSaveBuffer:v,onRestoreBuffer:C,onExportBuffer:b,onOpenSearch:_,onCopySelection:g,onPasteClipboard:R,onSelectAll:P},null,8,["pane"]),h("div",wE,[j(uo,{id:o.value[0].id,mode:"pane","sub-type":o.value[0].subType,onTerminalInitialized:S,ref:A=>l(o.value[0].id,A)},null,8,["id","sub-type"])])])):E.layout==="horizontal"?(Y(),J("div",kE,[(Y(!0),J(Je,null,wt(o.value,(A,w)=>(Y(),J("div",{key:A.id,class:"horizontal-pane",style:it({width:`${A.position.width}%`})},[j(Sr,{pane:A,onSplit:u,onClose:d,onRename:c,onClearBuffer:m,onSaveBuffer:v,onRestoreBuffer:C,onExportBuffer:b},null,8,["pane"]),h("div",SE,[j(uo,{id:A.id,mode:"pane","sub-type":A.subType,ref_for:!0,ref:k=>l(A.id,k)},null,8,["id","sub-type"])]),w<o.value.length-1?(Y(),J("div",{key:0,class:"resize-handle vertical",onMousedown:k=>L(k,w,"horizontal")},null,40,CE)):Me("",!0)],4))),128))])):E.layout==="vertical"?(Y(),J("div",AE,[(Y(!0),J(Je,null,wt(o.value,(A,w)=>(Y(),J("div",{key:A.id,class:"vertical-pane",style:it({height:`${A.position.height}%`})},[j(Sr,{pane:A,onSplit:u,onClose:d,onRename:c,onClearBuffer:m,onSaveBuffer:v,onRestoreBuffer:C,onExportBuffer:b},null,8,["pane"]),h("div",TE,[j(uo,{id:A.id,mode:"pane","sub-type":A.subType,ref_for:!0,ref:k=>l(A.id,k)},null,8,["id","sub-type"])]),w<o.value.length-1?(Y(),J("div",{key:0,class:"resize-handle horizontal",onMousedown:k=>L(k,w,"vertical")},null,40,xE)):Me("",!0)],4))),128))])):E.layout==="grid"?(Y(),J("div",EE,[(Y(!0),J(Je,null,wt(o.value,A=>(Y(),J("div",{key:A.id,class:"grid-pane",style:it({left:`${A.position.x}%`,top:`${A.position.y}%`,width:`${A.position.width}%`,height:`${A.position.height}%`})},[j(Sr,{pane:A,onSplit:u,onClose:d,onRename:c,onClearBuffer:m,onSaveBuffer:v,onRestoreBuffer:C,onExportBuffer:b},null,8,["pane"]),h("div",RE,[j(uo,{id:A.id,mode:"pane","sub-type":A.subType,ref_for:!0,ref:w=>l(A.id,w)},null,8,["id","sub-type"])])],4))),128))])):Me("",!0)],2))}}),IE=xt(ME,[["__scopeId","data-v-d0f3592b"]]),BE=kt({__name:"CommandQueueManager",props:{activeTab:{}},setup(e,{expose:t}){const n=e,s=ie([]),a=ie(!1),i=ie(!1),o=ca(),r=Xs();rt(i,C=>{C&&!a.value&&u()}),rt(()=>r.session.id,C=>{C&&!i.value&&setTimeout(()=>{i.value||(i.value=!0)},200)}),rt(()=>n.activeTab,(C,b)=>{C&&C.id!==b?.id&&(i.value=!1,s.value=[],C.subType==="inventory"&&C.serverContext&&f(C))});const f=C=>{if(!C||C.subType!=="inventory"||!C.serverContext)return;s.value=s.value.filter(_=>_.tabId!==C.id),o.getTabCommands(C.id).forEach(_=>{s.value.push({id:`${C.id}-${_.id}`,command:_.command,timestamp:new Date,executed:!1,tabId:C.id})}),i.value&&u()},u=async()=>{if(!n.activeTab||a.value)return;const C=s.value.filter(b=>b.tabId===n.activeTab.id&&!b.executed);if(C.length!==0){a.value=!0;try{r.session.id||await d(),await new Promise(b=>setTimeout(b,300));for(const b of C)r.session.id&&(await c(b.command),b.executed=!0);n.activeTab.id&&o.markCommandsExecuted(n.activeTab.id)}catch(b){console.error("Error executing queued commands:",b)}finally{a.value=!1,s.value=s.value.filter(b=>!b.executed)}}},d=()=>new Promise((C,b)=>{const _=setTimeout(()=>{b(new Error("Terminal session timeout"))},1e4),g=()=>{r.session.id?(clearTimeout(_),C()):setTimeout(g,100)};g()}),c=C=>new Promise(b=>{r.sendInput(C);const _=C.includes("ssh ")?1e3:300;setTimeout(b,_)});return t({commandQueue:s,isExecutingQueue:a,terminalReady:i,queueInventoryCommands:f,executeQueuedCommands:u,getStatusClass:()=>r.session.id?a.value?"executing":i.value?"ready":"waiting":"connecting",getStatusText:()=>r.session.id?a.value?"Executing commands...":i.value&&s.value.length>0?"Ready to execute":i.value?"Terminal ready":"Waiting for terminal...":"Connecting to terminal...",getProgressPercentage:()=>{if(s.value.length===0)return 0;const C=s.value.filter(b=>b.executed).length;return Math.round(C/s.value.length*100)}}),(C,b)=>null}}),LE={style:{display:"none"}},OE=kt({__name:"SelectionPopupManager",setup(e,{expose:t}){const n=ie(!1),s=ie({x:0,y:0}),a=ie(""),i=ca(),o=Xs(),r=()=>{n.value=!1,a.value=""},f=async()=>{await d()?console.log("Text copied successfully"):console.warn("Failed to copy text to clipboard")},u=(c,l)=>{console.log("Sending text to AI:",c,"with prompt:",l);const m=i.createTab("ai-agent","AI Analysis");i.switchToTab(m.id);const C={type:"user",message:l||`Please analyze this terminal output: ${c}`,timestamp:new Date,source:"terminal_selection",terminalOutput:c};o.sendChatMessage(C)},d=async()=>{if(a.value)try{return await navigator.clipboard.writeText(a.value),console.log("Text copied to clipboard"),!0}catch(c){return console.warn("Failed to copy to clipboard:",c),!1}return!1};return t({showSelectionPopup:n,popupPosition:s,selectedText:a,hideSelectionPopup:r,onCopyAction:f,onSendToAI:u,copySelection:d}),(c,l)=>(Y(),J("div",LE))}}),PE={key:0,class:"command-execution-overlay"},$E={class:"execution-status"},FE={class:"progress-info"},DE={key:1,class:"tab-content"},VE={key:2,class:"unknown-tab-content"},NE={class:"unknown-message"},jE={key:2,class:"no-tabs-message"},HE=kt({__name:"TabContentArea",props:{isTerminalPaused:{type:Boolean},isSupervisorLocked:{type:Boolean}},emits:["terminal-initialized"],setup(e){const t=ie(null),n=ie(null),s=ca(),a=Wo(),i=$i(),o=se(()=>s.activeTab),r=se(()=>a.currentWorkspace?.tabs&&a.currentWorkspace.tabs.length>0),f=se(()=>t.value?.isExecutingQueue||!1),u=se(()=>t.value?.commandQueue||[]),d=se(()=>n.value?.showSelectionPopup||!1),c=se(()=>n.value?.popupPosition||{x:0,y:0}),l=se(()=>n.value?.selectedText||"");sn(async()=>{console.log("TerminalView mounted")});const m=()=>{n.value?.hideSelectionPopup()},v=(_,g)=>{console.log(" TAB_CONTENT: Layout changed for tab:",_,"to:",g),i.updatePaneLayout(_,g),a.saveCurrentWorkspace()},C=_=>{console.log(" TAB_CONTENT: Pane created:",_.id),a.saveCurrentWorkspace()},b=_=>{console.log(" TAB_CONTENT: Pane closed:",_),a.saveCurrentWorkspace()};return(_,g)=>(Y(),J("div",{class:"terminal-view",onContextmenu:g[0]||(g[0]=Sn(()=>{},["prevent"]))},[f.value&&At(s).activeTab?.subType==="inventory"?(Y(),J("div",PE,[h("div",$E,[g[1]||(g[1]=h("div",{class:"spinner"},null,-1)),h("h3",null,"Initializing "+Q(At(s).activeTab?.serverContext?.name)+"...",1),g[2]||(g[2]=h("p",null,"Executing pre-configured commands",-1)),h("div",FE,Q(u.value.filter(R=>R.executed).length)+" / "+Q(u.value.length)+" commands completed ",1)])])):Me("",!0),At(s).isLogMonitorActive?(Y(),J("div",DE,[j(dE)])):Me("",!0),(Y(!0),J(Je,null,wt(At(a).currentWorkspace?.tabs||[],R=>an((Y(),J("div",{key:R.id,class:"tab-content"},[!R.type||R.type==="terminal"?(Y(),Rn(IE,{key:0,"tab-id":R.id,layout:R.layout,onLayoutChanged:P=>v(R.id,P),onPaneCreated:C,onPaneClosed:b},null,8,["tab-id","layout","onLayoutChanged"])):R.type==="ai-agent"?(Y(),Rn(Om,{key:1,"tab-id":R.id},null,8,["tab-id"])):Me("",!0)])),[[js,R.isActive&&!At(s).isLogMonitorActive]])),128)),(Y(!0),J(Je,null,wt(At(s).tabs,R=>an((Y(),J("div",{key:`legacy-${R.id}`,class:"tab-content"},[R.type==="terminal"?(Y(),Rn(uo,{key:0,id:R.id,"sub-type":R.subType,onClick:m},null,8,["id","sub-type"])):R.type==="ai-agent"?(Y(),Rn(Om,{key:1,"tab-id":R.id},null,8,["tab-id"])):(Y(),J("div",VE,[h("div",NE,[h("h4",null,"Unknown tab type: "+Q(R.type),1),g[3]||(g[3]=h("p",null,"This tab type is not supported.",-1))])]))])),[[js,R.isActive&&!At(s).isLogMonitorActive&&!r.value]])),128)),At(s).tabs.length===0?(Y(),J("div",jE,g[4]||(g[4]=[h("h3",null,"No active sessions",-1),h("p",null,"Click the + button to create a new terminal or AI chat session.",-1)]))):Me("",!0),j(NC,{show:d.value,position:c.value,"selected-text":l.value,onCopy:n.value?.onCopyAction,onSendToAi:n.value?.onSendToAI,onHide:n.value?.hideSelectionPopup},null,8,["show","position","selected-text","onCopy","onSendToAi","onHide"]),j(BE,{ref_key:"commandQueueManagerRef",ref:t,"active-tab":o.value,style:{display:"none"}},null,8,["active-tab"]),j(OE,{ref_key:"selectionPopupManagerRef",ref:n,style:{display:"none"}},null,512)],32))}}),zE=xt(HE,[["__scopeId","data-v-d8acc9e4"]]),UE={class:"terminal-area"},qE={key:0,class:"sidebar-panels"},WE={key:0,class:"sidebar-panel admin-panel"},YE={class:"panel-header"},KE={class:"panel-content"},GE={key:1,class:"sidebar-panel debug-panel"},XE={class:"panel-header"},ZE={class:"panel-content"},QE=kt({__name:"MainContentView",props:{isTerminalPaused:{type:Boolean},isSupervisorLocked:{type:Boolean}},emits:["terminal-initialized"],setup(e){const t=ie(!1),n=ie(!1),s=se(()=>t.value||n.value);return(a,i)=>{const o=Tt("v-btn");return Y(),J("div",{class:"main-content-view",onContextmenu:i[3]||(i[3]=Sn(()=>{},["prevent"]))},[h("div",UE,[j(zE,{"is-terminal-paused":a.isTerminalPaused,"is-supervisor-locked":a.isSupervisorLocked,onTerminalInitialized:i[0]||(i[0]=r=>a.$emit("terminal-initialized"))},null,8,["is-terminal-paused","is-supervisor-locked"])]),s.value?(Y(),J("div",qE,[t.value?(Y(),J("div",WE,[h("div",YE,[i[4]||(i[4]=h("h3",null,"Admin Panel",-1)),j(o,{size:"x-small",icon:"mdi-close",onClick:i[1]||(i[1]=r=>t.value=!1)})]),h("div",KE,[j(Kh)])])):Me("",!0),n.value?(Y(),J("div",GE,[h("div",XE,[i[5]||(i[5]=h("h3",null,"Debug Panel",-1)),j(o,{size:"x-small",icon:"mdi-close",onClick:i[2]||(i[2]=r=>n.value=!1)})]),h("div",ZE,[j(Zh)])])):Me("",!0)])):Me("",!0)],32)}}}),JE=xt(QE,[["__scopeId","data-v-909217e0"]]),eR=kt({__name:"MainContainer",emits:["open-s3-browser"],setup(e,{expose:t,emit:n}){const s=n,a=Al(),i=Xs(),o=qo(),r=Wo(),f=ie(!1),u=se(()=>i.isSupervisorLocked),d=()=>{f.value=!1},c=()=>{f.value=!0},l=()=>{console.log("Terminal initialized in container")},m=()=>{s("open-s3-browser")};return sn(async()=>{console.log("MainContainer mounted"),await a.connect(),await r.initializeWorkspace()}),ds(()=>{o.currentColors&&console.log(" THEME: Theme applied to terminal container:",o.themeConfig.colorScheme)}),t({pauseTerminal:c,resumeTerminal:d}),(v,C)=>(Y(),J("div",{class:Se(["main-container",[`theme-${At(o).isDarkMode?"dark":"light"}`,`scheme-${At(o).themeConfig.colorScheme}`]]),onContextmenu:C[0]||(C[0]=Sn(()=>{},["prevent"]))},[j(PC,{onOpenS3Browser:m}),j(JE,{"is-terminal-paused":f.value,"is-supervisor-locked":u.value,onTerminalInitialized:l},null,8,["is-terminal-paused","is-supervisor-locked"]),j(_C)],34))}}),tR=xt(eR,[["__scopeId","data-v-e18056ac"]]),nR=kt({__name:"TerminalComponent",setup(e){return(t,n)=>(Y(),Rn(tR))}}),Qh=xt(nR,[["__scopeId","data-v-8545aa50"]]),sR={class:"dev-jwt-register"},aR={class:"user-options"},iR={class:"user-type-buttons"},oR=["disabled"],rR=["disabled"],lR={key:0,class:"current-auth"},cR={class:"auth-info"},uR={class:"auth-field"},dR={class:"value"},fR={class:"auth-field"},mR={class:"auth-field"},vR={class:"value"},hR={class:"auth-field"},gR={class:"value"},pR={key:2,class:"jwt-display"},_R={class:"jwt-token"},bR=kt({__name:"DevJWTRegister",setup(e){const t=ie(!1),n=ie(""),s=ie("success"),a=ie(""),i=ie(null),o=v=>{const C={alg:"HS256",typ:"JWT"},b=Math.floor(Date.now()/1e3),_=b+24*60*60,g=v==="supervisor"?{sub:"dev-supervisor-001",email:"supervisor@aetherterm.dev",name:"Development Supervisor",isSupervisor:!0,roles:["supervisor","admin"],permissions:["terminal:supervise","admin:all"],iat:b,exp:_,iss:"aetherterm-dev"}:{sub:"dev-user-001",email:"user@aetherterm.dev",name:"Development User",isSupervisor:!1,roles:["user"],permissions:["terminal:access"],iat:b,exp:_,iss:"aetherterm-dev"},R=I=>btoa(JSON.stringify(I)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,""),P=R(C),S=R(g);return`${P}.${S}.dev-signature-not-verified`},r=async v=>{t.value=!0,n.value="";try{const C=o(v);localStorage.setItem("jwt_token",C),a.value=C,d(),n.value=`Successfully registered as ${v==="supervisor"?"Supervisor":"General User"}! Token stored in localStorage.`,s.value="success",setTimeout(()=>{window.location.reload()},2e3)}catch(C){console.error("Registration failed:",C),n.value="Registration failed. Please try again.",s.value="error"}finally{t.value=!1}},f=()=>{localStorage.removeItem("jwt_token"),sessionStorage.removeItem("jwt_token"),localStorage.removeItem("auth_token"),sessionStorage.removeItem("auth_token"),document.cookie="jwt_token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",document.cookie="auth_token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",a.value="",i.value=null,n.value="Authentication cleared. Page will refresh...",s.value="success",setTimeout(()=>{window.location.reload()},1500)},u=()=>{d()},d=()=>{const v=xl();if(v){const C=Tl(v);C&&(i.value=C)}else i.value=null},c=v=>v?new Date(v*1e3).toLocaleString():"Not set",l=v=>{v.target.select()},m=async()=>{try{await navigator.clipboard.writeText(a.value),n.value="JWT token copied to clipboard!",s.value="success",setTimeout(()=>{n.value=""},3e3)}catch(v){console.error("Failed to copy to clipboard:",v),n.value="Failed to copy to clipboard",s.value="error"}};return sn(()=>{d()}),(v,C)=>(Y(),J("div",sR,[C[10]||(C[10]=h("div",{class:"register-header"},[h("h3",null," Development JWT Registration"),h("div",{class:"dev-notice"},[h("small",null," This is for development only and should be disabled in production")])],-1)),h("div",aR,[h("div",iR,[h("button",{onClick:C[0]||(C[0]=b=>r("general")),class:"register-btn general-user",disabled:t.value},"  Register as General User ",8,oR),h("button",{onClick:C[1]||(C[1]=b=>r("supervisor")),class:"register-btn supervisor-user",disabled:t.value},"  Register as Supervisor ",8,rR)]),h("div",{class:"quick-actions"},[h("button",{onClick:f,class:"clear-btn"}," Clear Authentication"),h("button",{onClick:u,class:"show-auth-btn"}," Show Current Auth")])]),i.value?(Y(),J("div",lR,[C[7]||(C[7]=h("h4",null,"Current Authentication",-1)),h("div",cR,[h("div",uR,[C[3]||(C[3]=h("span",{class:"label"},"Email:",-1)),h("span",dR,Q(i.value.email||"Not set"),1)]),h("div",fR,[C[4]||(C[4]=h("span",{class:"label"},"User Type:",-1)),h("span",{class:Se(["value",{supervisor:i.value.isSupervisor}])},Q(i.value.isSupervisor?"Supervisor":"General User"),3)]),h("div",mR,[C[5]||(C[5]=h("span",{class:"label"},"Roles:",-1)),h("span",vR,Q(i.value.roles?.join(", ")||"None"),1)]),h("div",hR,[C[6]||(C[6]=h("span",{class:"label"},"Token Expires:",-1)),h("span",gR,Q(c(i.value.exp)),1)])])])):Me("",!0),n.value?(Y(),J("div",{key:1,class:Se(["registration-message",s.value])},Q(n.value),3)):Me("",!0),a.value?(Y(),J("div",pR,[C[8]||(C[8]=h("h4",null,"Generated JWT Token",-1)),h("div",_R,[an(h("textarea",{"onUpdate:modelValue":C[2]||(C[2]=b=>a.value=b),readonly:"",rows:"8",class:"jwt-textarea",onClick:l},null,512),[[Di,a.value]]),h("button",{onClick:m,class:"copy-btn"}," Copy Token")]),C[9]||(C[9]=h("div",{class:"jwt-info"},[h("small",null,"This token has been automatically stored in localStorage as 'jwt_token'")],-1))])):Me("",!0)]))}}),yR=xt(bR,[["__scopeId","data-v-41184933"]]),bi=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||window.location.hostname.includes("dev")||window.location.port!=="",Jh={isDevelopment:bi,isProduction:!bi,enableDevTools:bi,enableJWTDevRegister:bi,apiBaseUrl:bi?"http://localhost:57575":"",socketUrl:bi?"http://localhost:57575":""},{isDevelopment:wR,enableJWTDevRegister:kR,apiBaseUrl:e0,socketUrl:SR}=Jh;wR&&(console.log(" AetherTerm Environment Configuration:",Jh),console.log(" Current location:",{hostname:window.location.hostname,port:window.location.port,protocol:window.location.protocol,href:window.location.href}),console.log(" Vite Environment:",{DEV:!1,PROD:!0,MODE:"production"}));class CR{baseUrl;constructor(){this.baseUrl=`${e0}/api/inventory`}async makeRequest(t,n={}){const s=`${this.baseUrl}${t}`;try{const a=await fetch(s,{headers:{"Content-Type":"application/json",...n.headers},...n});if(!a.ok){const i=await a.json().catch(()=>({detail:"Unknown error"}));throw new Error(`HTTP ${a.status}: ${i.detail||i.message||"Request failed"}`)}return await a.json()}catch(a){throw console.error(`Inventory API request failed [${t}]:`,a),a}}async healthCheck(){return this.makeRequest("/health")}async getServiceStatus(){return this.makeRequest("/status")}async getInventorySummary(){return this.makeRequest("/summary")}async getResources(t={}){const n=new URLSearchParams;t.limit&&n.append("limit",t.limit.toString()),t.provider&&n.append("provider",t.provider),t.resource_type&&n.append("resource_type",t.resource_type);const s=`/resources${n.toString()?`?${n.toString()}`:""}`;return this.makeRequest(s)}async searchInventory(t){return this.makeRequest("/search",{method:"POST",body:JSON.stringify(t)})}async executeQuery(t){return this.makeRequest("/query",{method:"POST",body:JSON.stringify(t)})}async listConnections(){return this.makeRequest("/connections")}async addConnection(t){return this.makeRequest("/connections",{method:"POST",body:JSON.stringify(t)})}async removeConnection(t){return this.makeRequest(`/connections/${encodeURIComponent(t)}`,{method:"DELETE"})}async getSupportedProviders(){return this.makeRequest("/providers")}async syncInventory(){return this.makeRequest("/sync",{method:"POST"})}convertToLegacyFormat(t){return t.map(n=>({id:n.resource_id,title:n.name,description:`${n.resource_type} from ${n.provider}`,type:this.mapResourceTypeToLegacyType(n.resource_type),icon:this.getIconForResourceType(n.resource_type),location:n.location,status:this.mapStatusToLegacyStatus(n.status),command:this.generateCommandForResource(n),aiAnalysisPrompt:`Analyze ${n.resource_type} ${n.name} from ${n.provider}`,metadata:n.metadata,provider:n.provider,resource_type:n.resource_type,last_updated:n.last_updated}))}mapResourceTypeToLegacyType(t){return{ec2_instance:"server",azure_compute_virtual_machine:"server",gcp_compute_instance:"server",kubernetes_node:"server",vsphere_virtual_machine:"server",docker_container:"container",kubernetes_pod:"container",rds_db_instance:"database",azure_sql_database:"database",gcp_sql_database_instance:"database",s3_bucket:"file",azure_storage_account:"file",gcp_storage_bucket:"file",lambda_function:"service",azure_function_app:"service",gcp_cloud_function:"service"}[t]||"service"}getIconForResourceType(t){return{ec2_instance:"",azure_compute_virtual_machine:"",gcp_compute_instance:"",kubernetes_node:"",vsphere_virtual_machine:"",docker_container:"",kubernetes_pod:"",rds_db_instance:"",azure_sql_database:"",gcp_sql_database_instance:"",s3_bucket:"",azure_storage_account:"",gcp_storage_bucket:"",lambda_function:"",azure_function_app:"",gcp_cloud_function:"",load_balancer:"",security_group:"",vpc:"",subnet:""}[t]||""}mapStatusToLegacyStatus(t){return{running:"running",stopped:"stopped",pending:"unknown",terminated:"error",error:"error",available:"running",unavailable:"stopped"}[t.toLowerCase()]||"unknown"}generateCommandForResource(t){const n=t.resource_type.toLowerCase();return n.includes("instance")||n.includes("virtual_machine")?`# Connect to ${t.name}
echo "Server: ${t.name} (${t.provider})"
echo "Status: ${t.status}"`:n.includes("container")||n.includes("pod")?`# Container info for ${t.name}
echo "Container: ${t.name}"
echo "Provider: ${t.provider}"`:n.includes("database")?`# Database info for ${t.name}
echo "Database: ${t.name}"
echo "Status: ${t.status}"`:n.includes("bucket")||n.includes("storage")?`# Storage info for ${t.name}
echo "Storage: ${t.name}"
echo "Location: ${t.location}"`:`# Resource info for ${t.name}
echo "Resource: ${t.name} (${t.resource_type})"
echo "Provider: ${t.provider}"`}}const Pm=new CR,AR={class:"search-container"},TR={class:"search-input-wrapper"},xR=["placeholder"],ER={key:0,class:"search-info"},RR={class:"search-results-count"},MR=kt({__name:"SearchInput",props:{placeholder:{default:"Type to search..."},resultsCount:{default:0}},emits:["search","clear","key-down","jump-to-results"],setup(e,{expose:t,emit:n}){const s=e,a=n,i=ie(),o=ie(""),r=()=>{a("search",o.value)},f=()=>{o.value="",a("clear"),i.value?.focus()},u=c=>{a("key-down",c)},d=()=>{i.value?.focus()};return rt(()=>s.resultsCount,()=>{}),t({focus:d,clearSearch:f}),(c,l)=>(Y(),J("div",AR,[h("div",TR,[l[2]||(l[2]=h("div",{class:"search-icon"},"",-1)),an(h("input",{ref_key:"searchInput",ref:i,"onUpdate:modelValue":l[0]||(l[0]=m=>o.value=m),onInput:r,onKeydown:u,placeholder:c.placeholder,class:"search-input",autocomplete:"off"},null,40,xR),[[Di,o.value]]),o.value?(Y(),J("div",{key:0,class:"search-clear",onClick:f},"")):Me("",!0)]),o.value?(Y(),J("div",ER,[h("span",RR,Q(c.resultsCount)+" result"+Q(c.resultsCount!==1?"s":"")+" found ",1),c.resultsCount>0?(Y(),J("button",{key:0,onClick:l[1]||(l[1]=m=>c.$emit("jump-to-results")),class:"jump-to-results"}," Jump to Results  ")):Me("",!0)])):Me("",!0)]))}}),IR=xt(MR,[["__scopeId","data-v-f4776bd8"]]),BR={class:"search-results-container"},LR={key:0,class:"search-results"},OR={class:"search-results-list"},PR=["onClick"],$R={class:"result-content"},FR=["innerHTML"],DR={class:"result-details"},VR=["innerHTML"],NR={key:1,class:"result-region"},jR={key:2,class:"result-layer"},HR={key:0,class:"result-description"},zR={class:"result-actions"},UR=["onClick"],qR=["onClick"],WR={key:1,class:"no-search-results"},YR=kt({__name:"SearchResults",props:{results:{},searchQuery:{},selectedIndex:{}},emits:["select-result","terminal-action","ai-action"],setup(e,{emit:t}){const n=t,s=f=>{n("select-result",f)},a=f=>{n("terminal-action",f)},i=f=>{n("ai-action",f)},o=(f,u)=>{if(!u.trim())return f;const d=new RegExp(`(${r(u)})`,"gi");return f.replace(d,'<mark class="search-highlight">$1</mark>')},r=f=>f.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return(f,u)=>(Y(),J("div",BR,[f.results.length>0?(Y(),J("div",LR,[u[0]||(u[0]=h("h4",null,"Search Results",-1)),h("div",OR,[(Y(!0),J(Je,null,wt(f.results,(d,c)=>(Y(),J("div",{key:d.id,onClick:l=>s(d),class:Se(["search-result-item",{highlighted:c===f.selectedIndex}])},[h("div",{class:Se(["result-type-badge",d.type])},Q(d.type),3),h("div",$R,[h("div",{class:"result-name",innerHTML:o(d.name,f.searchQuery)},null,8,FR),h("div",DR,[d.ip?(Y(),J("span",{key:0,class:"result-ip",innerHTML:o(d.ip,f.searchQuery)},null,8,VR)):Me("",!0),d.region?(Y(),J("span",NR,Q(d.region),1)):Me("",!0),d.layer?(Y(),J("span",jR,Q(d.layer),1)):Me("",!0)]),d.description?(Y(),J("div",HR,Q(d.description),1)):Me("",!0)]),h("div",zR,[h("button",{onClick:Sn(l=>a(d),["stop"]),class:"result-action-btn terminal"},"",8,UR),h("button",{onClick:Sn(l=>i(d),["stop"]),class:"result-action-btn ai"},"",8,qR)])],10,PR))),128))])])):f.searchQuery?(Y(),J("div",WR,[u[1]||(u[1]=h("div",{class:"no-results-icon"},"",-1)),u[2]||(u[2]=h("h4",null,"No results found",-1)),h("p",null,'No items match "'+Q(f.searchQuery)+'"',1),u[3]||(u[3]=h("div",{class:"search-suggestions"},[h("p",null,"Try searching for:"),h("ul",null,[h("li",null,"Server names (web-server-01, api-server)"),h("li",null,"IP addresses (10.0.1.10, 192.168)"),h("li",null,"Regions (us-east, europe, tokyo)"),h("li",null,"Server types (web, database, api)")])],-1))])):Me("",!0)]))}}),KR=xt(YR,[["__scopeId","data-v-ff752dd5"]]),GR={class:"wizard-step"},XR={class:"step-header"},ZR={class:"step-progress"},QR={class:"step-indicator"},JR={key:0,class:"quick-access"},eM={class:"step-content"},tM={key:0,class:"step-navigation"},nM=kt({__name:"WizardStep",props:{title:{},currentStep:{},totalSteps:{},hasSelection:{type:Boolean,default:!1},showQuickAccess:{type:Boolean,default:!0},showNavigation:{type:Boolean,default:!0}},emits:["previous","next","quick-access"],setup(e){return(t,n)=>(Y(),J("div",GR,[h("div",XR,[h("h4",null,Q(t.title),1),h("div",ZR,[h("div",QR," Step "+Q(t.currentStep+1)+" of "+Q(t.totalSteps),1),t.showQuickAccess?(Y(),J("div",JR,[h("button",{onClick:n[0]||(n[0]=s=>t.$emit("quick-access")),class:"quick-access-btn"}," Quick Access ")])):Me("",!0)])]),h("div",eM,[Mg(t.$slots,"default",{},void 0)]),t.showNavigation?(Y(),J("div",tM,[t.currentStep>0?(Y(),J("button",{key:0,onClick:n[1]||(n[1]=s=>t.$emit("previous")),class:"nav-btn secondary"},"  Previous ")):Me("",!0),n[3]||(n[3]=h("div",{class:"nav-spacer"},null,-1)),t.currentStep<t.totalSteps-1&&t.hasSelection?(Y(),J("button",{key:1,onClick:n[2]||(n[2]=s=>t.$emit("next")),class:"nav-btn primary"}," Next  ")):Me("",!0)])):Me("",!0)]))}}),Cr=xt(nM,[["__scopeId","data-v-d7643d13"]]),sM={class:"layer-selection"},aM={class:"layer-grid"},iM=["onClick"],oM={class:"layer-icon"},rM={class:"layer-title"},lM={class:"layer-description"},cM={class:"layer-count"},uM=kt({__name:"LayerSelection",props:{layers:{},selectedLayer:{}},emits:["select"],setup(e,{emit:t}){const n=t,s=a=>{n("select",a)};return(a,i)=>(Y(),J("div",sM,[h("div",aM,[(Y(!0),J(Je,null,wt(a.layers,o=>(Y(),J("button",{key:o.id,onClick:r=>s(o),class:Se(["layer-card",{selected:a.selectedLayer?.id===o.id}])},[h("div",oM,Q(o.icon),1),h("div",rM,Q(o.title),1),h("div",lM,Q(o.description),1),h("div",cM,Q(o.count)+" items",1)],10,iM))),128))])]))}}),dM=xt(uM,[["__scopeId","data-v-542d546b"]]),fM={class:"region-selection"},mM={class:"region-grid"},vM=["onClick"],hM={class:"region-flag"},gM={class:"region-name"},pM={class:"region-code"},_M={class:"region-count"},bM=kt({__name:"RegionSelection",props:{regions:{},selectedRegion:{}},emits:["select"],setup(e,{emit:t}){const n=t,s=a=>{n("select",a)};return(a,i)=>(Y(),J("div",fM,[h("div",mM,[(Y(!0),J(Je,null,wt(a.regions,o=>(Y(),J("button",{key:o.id,onClick:r=>s(o),class:Se(["region-card",{selected:a.selectedRegion?.id===o.id}])},[h("div",hM,Q(o.flag),1),h("div",gM,Q(o.name),1),h("div",pM,Q(o.code),1),h("div",{class:Se(["region-status",o.status])},Q(o.status),3),h("div",_M,Q(o.serverCount)+" servers",1)],10,vM))),128))])]))}}),yM=xt(bM,[["__scopeId","data-v-d77af1dc"]]),wM={class:"server-type-selection"},kM={class:"type-grid"},SM=["onClick"],CM={class:"type-icon"},AM={class:"type-title"},TM={class:"type-description"},xM={class:"type-specs"},EM={class:"type-count"},RM=kt({__name:"ServerTypeSelection",props:{serverTypes:{},selectedServerType:{}},emits:["select"],setup(e,{emit:t}){const n=t,s=a=>{n("select",a)};return(a,i)=>(Y(),J("div",wM,[h("div",kM,[(Y(!0),J(Je,null,wt(a.serverTypes,o=>(Y(),J("button",{key:o.id,onClick:r=>s(o),class:Se(["type-card",{selected:a.selectedServerType?.id===o.id}])},[h("div",CM,Q(o.icon),1),h("div",AM,Q(o.title),1),h("div",TM,Q(o.description),1),h("div",xM,Q(o.specs),1),h("div",EM,Q(o.count)+" instances",1)],10,SM))),128))])]))}}),MM=xt(RM,[["__scopeId","data-v-f73130c4"]]),IM={class:"server-selection"},BM={class:"server-list"},LM=["onClick"],OM={class:"server-content"},PM={class:"server-name"},$M={class:"server-details"},FM={class:"server-ip"},DM={class:"server-os"},VM={class:"server-uptime"},NM={class:"server-metrics"},jM={class:"metric"},HM={class:"metric-bar"},zM={class:"metric-value"},UM={class:"metric"},qM={class:"metric-bar"},WM={class:"metric-value"},YM={class:"metric"},KM={class:"metric-bar"},GM={class:"metric-value"},XM={class:"server-actions"},ZM=["onClick"],QM=["onClick"],JM=kt({__name:"ServerSelection",props:{servers:{}},emits:["select","terminal-action","ai-action"],setup(e,{emit:t}){const n=t,s=o=>{n("select",o)},a=o=>{n("terminal-action",o)},i=o=>{n("ai-action",o)};return(o,r)=>(Y(),J("div",IM,[h("div",BM,[(Y(!0),J(Je,null,wt(o.servers,f=>(Y(),J("div",{key:f.id,onClick:u=>s(f),class:Se(["server-item",f.status])},[r[3]||(r[3]=h("div",{class:"server-icon"},"",-1)),h("div",OM,[h("div",PM,Q(f.name),1),h("div",$M,[h("span",FM,Q(f.ip),1),h("span",DM,Q(f.os),1),h("span",VM,"Uptime: "+Q(f.uptime),1)]),h("div",NM,[h("div",jM,[r[0]||(r[0]=h("span",{class:"metric-label"},"CPU",-1)),h("div",HM,[h("div",{class:"metric-fill",style:it({width:f.cpu+"%"})},null,4)]),h("span",zM,Q(f.cpu)+"%",1)]),h("div",UM,[r[1]||(r[1]=h("span",{class:"metric-label"},"RAM",-1)),h("div",qM,[h("div",{class:"metric-fill",style:it({width:f.memory+"%"})},null,4)]),h("span",WM,Q(f.memory)+"%",1)]),h("div",YM,[r[2]||(r[2]=h("span",{class:"metric-label"},"Disk",-1)),h("div",KM,[h("div",{class:"metric-fill",style:it({width:f.disk+"%"})},null,4)]),h("span",GM,Q(f.disk)+"%",1)])])]),h("div",{class:Se(["server-status",f.status])},Q(f.status),3),h("div",XM,[h("button",{onClick:Sn(u=>a(f),["stop"]),class:"action-btn terminal"},"",8,ZM),h("button",{onClick:Sn(u=>i(f),["stop"]),class:"action-btn ai"},"",8,QM)])],10,LM))),128))])]))}}),eI=xt(JM,[["__scopeId","data-v-7d466e16"]]),tI={class:"server-inventory-container"},nI={class:"inventory-header"},sI={class:"header-actions"},aI={class:"server-stats"},iI={class:"stat"},oI={class:"stat"},rI={class:"stat"},lI={class:"breadcrumb"},cI=["onClick"],uI={key:0,class:"breadcrumb-separator"},dI={class:"inventory-content"},fI={key:0,class:"loading-state"},mI={key:1,class:"error-state"},yi=4,vI=kt({__name:"ServerInventoryContainer",setup(e){const t=ca(),n=ie(0),s=ie(""),a=ie(0),i=ie(!1),o=ie(null),r=ie([]),f=ie(null),u=ie(null),d=ie(null),c=ie([]),l=ie([]),m=ie([]),v=ie([]),C=se(()=>{const G=["Infrastructure"];return f.value&&G.push(f.value.title),u.value&&G.push(u.value.name),d.value&&G.push(d.value.title),G}),b=se(()=>c.value),_=se(()=>l.value),g=se(()=>m.value),R=se(()=>v.value),P=se(()=>{if(!s.value.trim())return[];const G=s.value.toLowerCase(),ae=[];return v.value.forEach(X=>{(X.name.toLowerCase().includes(G)||X.ip.toLowerCase().includes(G))&&ae.push({id:X.id,name:X.name,type:"server",ip:X.ip,description:`${X.os} - ${X.status}`,data:X})}),r.value.forEach(X=>{(X.name.toLowerCase().includes(G)||X.resource_type.toLowerCase().includes(G)||X.provider.toLowerCase().includes(G))&&ae.push({id:X.resource_id,name:X.name,type:"resource",description:`${X.resource_type} from ${X.provider}`,data:X})}),c.value.forEach(X=>{(X.title.toLowerCase().includes(G)||X.description.toLowerCase().includes(G))&&ae.push({id:X.id,name:X.title,type:"layer",description:X.description,data:X})}),l.value.forEach(X=>{(X.name.toLowerCase().includes(G)||X.code.toLowerCase().includes(G))&&ae.push({id:X.id,name:X.name,type:"region",region:X.code,description:`${X.serverCount} servers`,data:X})}),m.value.forEach(X=>{(X.title.toLowerCase().includes(G)||X.description.toLowerCase().includes(G))&&ae.push({id:X.id,name:X.title,type:"serverType",description:X.description,data:X})}),ae}),S=async G=>{if(s.value=G,a.value=0,!!G.trim())try{const ae=await Pm.searchInventory({search_term:G});r.value=ae,v.value=U(ae),console.log("Server search performed:",{query:G,resultCount:ae.length,searchTime:new Date().toISOString()})}catch(ae){console.error("Search failed:",ae),o.value=ae instanceof Error?ae.message:"Search failed"}},L=()=>{s.value="",a.value=0},I=G=>{if(P.value.length)switch(G.key){case"ArrowDown":G.preventDefault(),a.value=Math.min(a.value+1,P.value.length-1);break;case"ArrowUp":G.preventDefault(),a.value=Math.max(a.value-1,0);break;case"Enter":G.preventDefault(),P.value[a.value]&&E(P.value[a.value]);break;case"Escape":L();break}},T=()=>{a.value=0},E=G=>{G.type==="server"?D(G):(L(),G.type==="layer"?(n.value=0,M(G.data)):G.type==="region"?(n.value=1,x(G.data)):G.type==="serverType"&&(n.value=2,F(G.data)))},y=()=>{n.value<yi-1&&n.value++},A=()=>{n.value>0&&n.value--},w=G=>{G>=0&&G<C.value.length&&(n.value=G)},k=()=>{n.value=yi-1},M=G=>{f.value=G},x=G=>{u.value=G},F=G=>{d.value=G},V=G=>{p(G)},D=G=>{const ae=G.data;console.log("Opening terminal for server:",ae.name);const X={id:ae.id,name:ae.name,ip:ae.ip,os:ae.os,uptime:ae.uptime,status:ae.status,cpu:ae.cpu,memory:ae.memory,disk:ae.disk},he=t.createInventoryTerminal(X);t.switchToTab(he.id),console.log(`Created inventory terminal for ${ae.name} with ${he.preExecutionCommands?.length||0} pre-configured commands`)},z=G=>{const ae=G.data;console.log("Opening AI chat for server:",ae.name);const X=t.createTab("ai-agent",`AI: ${ae.name}`);t.switchToTab(X.id);const he=`Server Information:
- Name: ${ae.name}
- IP: ${ae.ip}
- OS: ${ae.os}
- Status: ${ae.status}
- Uptime: ${ae.uptime}
- Resources: CPU ${ae.cpu}%, Memory ${ae.memory}%, Disk ${ae.disk}%

Please analyze this server and provide recommendations.`;console.log("AI Chat initialized with server context:",he)},p=G=>{console.log("Opening terminal for server:",G.name);const ae={id:G.id,name:G.name,ip:G.ip,os:G.os,uptime:G.uptime,status:G.status,cpu:G.cpu,memory:G.memory,disk:G.disk},X=t.createInventoryTerminal(ae);t.switchToTab(X.id),console.log(`Created enhanced inventory terminal for ${G.name}:`,{serverType:G.name.includes("database")?"Database":G.name.includes("web")?"Web":G.name.includes("api")?"API":"General",commands:X.preExecutionCommands?.length||0,status:G.status})},B=G=>{console.log("Opening AI chat for server:",G.name);const ae=t.createTab("ai-agent",`AI: ${G.name}`);t.switchToTab(ae.id);const X=G.name.includes("database")?"Database":G.name.includes("web")?"Web":G.name.includes("api")?"API":G.name.includes("load-balancer")?"Load Balancer":G.name.includes("monitoring")?"Monitoring":"General";`${X}${G.name}${G.ip}${G.os}${G.status.toUpperCase()}${G.uptime}${G.cpu}${G.memory}${G.disk}`,G.status,G.cpu>80,G.memory>80,G.disk>80,console.log("Enhanced AI context prepared:",{serverType:X,hasWarnings:G.status==="warning"})},U=G=>G.filter(ae=>ae.resource_type.toLowerCase().includes("instance")||ae.resource_type.toLowerCase().includes("virtual_machine")||ae.resource_type.toLowerCase().includes("server")).map(ae=>({id:ae.resource_id,name:ae.name,ip:ae.metadata.public_ip||ae.metadata.private_ip||ae.location,os:ae.metadata.operating_system||ae.metadata.platform||"Unknown",uptime:ae.metadata.uptime||"Unknown",status:$(ae.status),cpu:parseInt(ae.metadata.cpu_utilization)||Math.floor(Math.random()*100),memory:parseInt(ae.metadata.memory_utilization)||Math.floor(Math.random()*100),disk:parseInt(ae.metadata.disk_utilization)||Math.floor(Math.random()*100)})),$=G=>({running:"online",available:"online",stopped:"offline",terminated:"offline",error:"warning",pending:"warning",stopping:"maintenance",starting:"maintenance"})[G.toLowerCase()]||"offline",ee=async()=>{i.value=!0,o.value=null;try{const G=await Pm.getResources({limit:1e3});r.value=G,v.value=U(G);const ae=new Set(G.map(Ie=>Ie.resource_type));c.value=Array.from(ae).slice(0,5).map((Ie,K)=>({id:`layer-${K}`,title:Ie.replace(/_/g," ").replace(/\b\w/g,te=>te.toUpperCase()),description:`All ${Ie} resources`,icon:re(Ie),count:G.filter(te=>te.resource_type===Ie).length}));const X=new Set(G.map(Ie=>Ie.location).filter(Boolean));l.value=Array.from(X).slice(0,5).map((Ie,K)=>({id:`region-${K}`,name:Ie,code:Ie.toLowerCase().replace(/[^a-z0-9]/g,"-"),flag:"",status:"online",serverCount:G.filter(te=>te.location===Ie).length}));const he=G.filter(Ie=>Ie.resource_type.toLowerCase().includes("instance")||Ie.resource_type.toLowerCase().includes("virtual_machine")||Ie.resource_type.toLowerCase().includes("server")).map(Ie=>Ie.resource_type),we=new Set(he);m.value=Array.from(we).map((Ie,K)=>({id:`type-${K}`,title:Ie.replace(/_/g," ").replace(/\b\w/g,te=>te.toUpperCase()),description:`${Ie} servers`,icon:re(Ie),specs:"Variable specs",count:G.filter(te=>te.resource_type===Ie).length})),console.log(`Loaded ${G.length} inventory items, ${v.value.length} servers`)}catch(G){console.error("Failed to load inventory data:",G),o.value=G instanceof Error?G.message:"Failed to load inventory"}finally{i.value=!1}},re=G=>({ec2_instance:"",azure_compute_virtual_machine:"",gcp_compute_instance:"",docker_container:"",kubernetes_pod:"",rds_db_instance:"",lambda_function:"",s3_bucket:"",load_balancer:""})[G]||"";return sn(async()=>{await ee()}),(G,ae)=>(Y(),J("div",tI,[h("div",nI,[ae[0]||(ae[0]=h("h3",null," Server Inventory",-1)),h("div",sI,[h("div",aI,[h("span",iI,Q(v.value.length)+" servers",1),h("span",oI,Q(v.value.filter(X=>X.status==="online").length)+" online",1),h("span",rI,Q(v.value.filter(X=>X.status==="warning").length)+" warnings",1)])]),h("div",lI,[(Y(!0),J(Je,null,wt(C.value,(X,he)=>(Y(),J("span",{key:he,class:"breadcrumb-item"},[h("button",{onClick:we=>w(he),class:"breadcrumb-btn"},Q(X),9,cI),he<C.value.length-1?(Y(),J("span",uI,"")):Me("",!0)]))),128))])]),j(IR,{placeholder:"Type to search servers, IPs, regions, types...","results-count":P.value.length,onSearch:S,onClear:L,onKeyDown:I,onJumpToResults:T},null,8,["results-count"]),h("div",dI,[i.value?(Y(),J("div",fI,ae[1]||(ae[1]=[h("div",{class:"loading-spinner"},null,-1),h("span",null,"Loading inventory data...",-1)]))):o.value?(Y(),J("div",mI,[ae[2]||(ae[2]=h("span",{class:"error-icon"},"",-1)),h("p",null,"Error: "+Q(o.value),1),h("button",{onClick:ee,class:"retry-btn"},"Retry")])):s.value?(Y(),Rn(KR,{key:2,results:P.value,"search-query":s.value,"selected-index":a.value,onSelectResult:E,onTerminalAction:D,onAiAction:z},null,8,["results","search-query","selected-index"])):(Y(),J(Je,{key:3},[n.value===0?(Y(),Rn(Cr,{key:0,title:"Select Infrastructure Layer","current-step":n.value,"total-steps":yi,"has-selection":!!f.value,onNext:y,onQuickAccess:k},{default:Ee(()=>[j(dM,{layers:b.value,"selected-layer":f.value,onSelect:M},null,8,["layers","selected-layer"])]),_:1},8,["current-step","has-selection"])):Me("",!0),n.value===1?(Y(),Rn(Cr,{key:1,title:"Select Region","current-step":n.value,"total-steps":yi,"has-selection":!!u.value,onPrevious:A,onNext:y,onQuickAccess:k},{default:Ee(()=>[j(yM,{regions:_.value,"selected-region":u.value,onSelect:x},null,8,["regions","selected-region"])]),_:1},8,["current-step","has-selection"])):Me("",!0),n.value===2?(Y(),Rn(Cr,{key:2,title:"Select Server Type","current-step":n.value,"total-steps":yi,"has-selection":!!d.value,onPrevious:A,onNext:y,onQuickAccess:k},{default:Ee(()=>[j(MM,{"server-types":g.value,"selected-server-type":d.value,onSelect:F},null,8,["server-types","selected-server-type"])]),_:1},8,["current-step","has-selection"])):Me("",!0),n.value===3?(Y(),Rn(Cr,{key:3,title:"Select Server","current-step":n.value,"total-steps":yi,"show-navigation":!1,onPrevious:A,onQuickAccess:k},{default:Ee(()=>[j(eI,{servers:R.value,onSelect:V,onTerminalAction:p,onAiAction:B},null,8,["servers"])]),_:1},8,["current-step"])):Me("",!0)],64))])]))}}),hI=xt(vI,[["__scopeId","data-v-7081cd18"]]),gI=kt({__name:"ServerInventoryPanel",setup(e){return(t,n)=>(Y(),Rn(hI))}}),pI=xt(gI,[["__scopeId","data-v-8189ed0c"]]),_I={class:"color-preview mr-3"},bI=kt({__name:"ThemeSelector",setup(e){const t=qo(),n=ie(!1),s=ie(""),a=se({get:()=>t.themeConfig.mode,set:v=>t.setThemeMode(v)}),i=se({get:()=>t.themeConfig.colorScheme,set:v=>t.setColorScheme(v)}),o=se({get:()=>t.themeConfig.fontFamily,set:v=>t.setFontFamily(v)}),r=se({get:()=>t.themeConfig.fontSize,set:v=>t.setFontSize(v)}),f=se(()=>[{name:"Default",value:"default",preview:{background:"#1e1e1e",foreground:"#d4d4d4"}},{name:"Solarized Dark",value:"solarized-dark",preview:{background:"#002b36",foreground:"#839496"}},{name:"Solarized Light",value:"solarized-light",preview:{background:"#fdf6e3",foreground:"#657b83"}},{name:"Dracula",value:"dracula",preview:{background:"#282a36",foreground:"#f8f8f2"}},{name:"Nord",value:"nord",preview:{background:"#2e3440",foreground:"#d8dee9"}},{name:"Monokai",value:"monokai",preview:{background:"#272822",foreground:"#f8f8f2"}},{name:"Gruvbox Dark",value:"gruvbox-dark",preview:{background:"#282828",foreground:"#ebdbb2"}},{name:"Gruvbox Light",value:"gruvbox-light",preview:{background:"#fbf1c7",foreground:"#3c3836"}}]),u=["Monaco, 'Courier New', monospace","'Fira Code', 'Courier New', monospace","'Source Code Pro', 'Courier New', monospace","'JetBrains Mono', 'Courier New', monospace","'Cascadia Code', 'Courier New', monospace","'SF Mono', 'Courier New', monospace","'Consolas', 'Courier New', monospace","'Ubuntu Mono', 'Courier New', monospace"],d=se(()=>{const v=t.currentColors;return v?{backgroundColor:v.background,color:v.foreground,fontFamily:t.themeConfig.fontFamily,fontSize:`${t.themeConfig.fontSize}px`,lineHeight:t.themeConfig.lineHeight,border:`1px solid ${v.bright_black}`,borderRadius:"4px",padding:"12px",fontWeight:"normal"}:{}}),c=async()=>{await t.resetTheme()},l=()=>{const v=JSON.stringify(t.themeConfig,null,2),C=new Blob([v],{type:"application/json"}),b=URL.createObjectURL(C),_=document.createElement("a");_.href=b,_.download="aetherterm-theme.json",_.click(),URL.revokeObjectURL(b)},m=async()=>{try{const v=JSON.parse(s.value);t.themeConfig={...t.themeConfig,...v},await t.saveThemeConfig(),n.value=!1,s.value=""}catch(v){console.error("Failed to import theme:",v)}};return t.loadThemeConfig(),(v,C)=>{const b=Tt("v-icon"),_=Tt("v-card-title"),g=Tt("v-label"),R=Tt("v-btn"),P=Tt("v-btn-toggle"),S=Tt("v-col"),L=Tt("v-row"),I=Tt("v-list-item"),T=Tt("v-select"),E=Tt("v-text-field"),y=Tt("v-card-text"),A=Tt("v-textarea"),w=Tt("v-spacer"),k=Tt("v-card-actions"),M=Tt("v-card"),x=Tt("v-dialog");return Y(),Rn(M,{class:"theme-selector"},{default:Ee(()=>[j(_,null,{default:Ee(()=>[j(b,{class:"mr-2"},{default:Ee(()=>C[8]||(C[8]=[nt("mdi-palette")])),_:1,__:[8]}),C[9]||(C[9]=nt(" Theme Settings "))]),_:1,__:[9]}),j(y,null,{default:Ee(()=>[j(L,{class:"mb-4"},{default:Ee(()=>[j(S,{cols:"12"},{default:Ee(()=>[j(g,{class:"text-subtitle-2 mb-2"},{default:Ee(()=>C[10]||(C[10]=[nt("Theme Mode")])),_:1,__:[10]}),j(P,{modelValue:a.value,"onUpdate:modelValue":C[0]||(C[0]=F=>a.value=F),mandatory:"",variant:"outlined",divided:"",class:"w-100"},{default:Ee(()=>[j(R,{value:"light",size:"small"},{default:Ee(()=>[j(b,null,{default:Ee(()=>C[11]||(C[11]=[nt("mdi-white-balance-sunny")])),_:1,__:[11]}),C[12]||(C[12]=h("span",{class:"ml-1"},"Light",-1))]),_:1,__:[12]}),j(R,{value:"dark",size:"small"},{default:Ee(()=>[j(b,null,{default:Ee(()=>C[13]||(C[13]=[nt("mdi-moon-waning-crescent")])),_:1,__:[13]}),C[14]||(C[14]=h("span",{class:"ml-1"},"Dark",-1))]),_:1,__:[14]}),j(R,{value:"auto",size:"small"},{default:Ee(()=>[j(b,null,{default:Ee(()=>C[15]||(C[15]=[nt("mdi-brightness-auto")])),_:1,__:[15]}),C[16]||(C[16]=h("span",{class:"ml-1"},"Auto",-1))]),_:1,__:[16]})]),_:1},8,["modelValue"])]),_:1})]),_:1}),j(L,{class:"mb-4"},{default:Ee(()=>[j(S,{cols:"12"},{default:Ee(()=>[j(g,{class:"text-subtitle-2 mb-2"},{default:Ee(()=>C[17]||(C[17]=[nt("Color Scheme")])),_:1,__:[17]}),j(T,{modelValue:i.value,"onUpdate:modelValue":C[1]||(C[1]=F=>i.value=F),items:f.value,"item-title":"name","item-value":"value",variant:"outlined",density:"compact"},{item:Ee(({props:F,item:V})=>[j(I,Ig(Bg(F)),{prepend:Ee(()=>[h("div",_I,[h("div",{class:"color-preview-bg",style:it({backgroundColor:V.raw.preview.background})},[h("div",{class:"color-preview-text",style:it({color:V.raw.preview.foreground})}," Aa ",4)],4)])]),_:2},1040)]),_:1},8,["modelValue","items"])]),_:1})]),_:1}),j(L,{class:"mb-4"},{default:Ee(()=>[j(S,{cols:"12"},{default:Ee(()=>[j(g,{class:"text-subtitle-2 mb-2"},{default:Ee(()=>C[18]||(C[18]=[nt("Font Settings")])),_:1,__:[18]})]),_:1}),j(S,{cols:"12",md:"6"},{default:Ee(()=>[j(T,{modelValue:o.value,"onUpdate:modelValue":C[2]||(C[2]=F=>o.value=F),items:u,label:"Font Family",variant:"outlined",density:"compact"},null,8,["modelValue"])]),_:1}),j(S,{cols:"12",md:"6"},{default:Ee(()=>[j(E,{modelValue:r.value,"onUpdate:modelValue":C[3]||(C[3]=F=>r.value=F),modelModifiers:{number:!0},label:"Font Size",type:"number",min:"8",max:"72",variant:"outlined",density:"compact",suffix:"px"},null,8,["modelValue"])]),_:1})]),_:1}),j(L,{class:"mb-4"},{default:Ee(()=>[j(S,{cols:"12"},{default:Ee(()=>[j(g,{class:"text-subtitle-2 mb-2"},{default:Ee(()=>C[19]||(C[19]=[nt("Preview")])),_:1,__:[19]}),h("div",{class:"terminal-preview",style:it(d.value)},C[20]||(C[20]=[h("div",{class:"terminal-line"},[h("span",{class:"terminal-prompt"},"user@aetherterm:~$"),h("span",{class:"terminal-command"},"ls -la")],-1),h("div",{class:"terminal-line"},[h("span",{class:"terminal-output"},"drwxr-xr-x 10 user user 4096 Jan 01 12:00"),h("span",{class:"terminal-filename"},".")],-1),h("div",{class:"terminal-line"},[h("span",{class:"terminal-output"},"-rw-r--r-- 1 user user 123 Jan 01 12:00"),h("span",{class:"terminal-filename"},"example.txt")],-1),h("div",{class:"terminal-line"},[h("span",{class:"terminal-cursor"},"")],-1)]),4)]),_:1})]),_:1}),j(L,null,{default:Ee(()=>[j(S,{cols:"12"},{default:Ee(()=>[j(R,{onClick:c,variant:"outlined",size:"small",class:"mr-2"},{default:Ee(()=>C[21]||(C[21]=[nt(" Reset to Default ")])),_:1,__:[21]}),j(R,{onClick:l,variant:"outlined",size:"small",class:"mr-2"},{default:Ee(()=>C[22]||(C[22]=[nt(" Export ")])),_:1,__:[22]}),j(R,{onClick:C[4]||(C[4]=F=>n.value=!0),variant:"outlined",size:"small"},{default:Ee(()=>C[23]||(C[23]=[nt(" Import ")])),_:1,__:[23]})]),_:1})]),_:1})]),_:1}),j(x,{modelValue:n.value,"onUpdate:modelValue":C[7]||(C[7]=F=>n.value=F),"max-width":"500"},{default:Ee(()=>[j(M,null,{default:Ee(()=>[j(_,null,{default:Ee(()=>C[24]||(C[24]=[nt("Import Theme")])),_:1,__:[24]}),j(y,null,{default:Ee(()=>[j(A,{modelValue:s.value,"onUpdate:modelValue":C[5]||(C[5]=F=>s.value=F),label:"Paste theme JSON",rows:"10",variant:"outlined"},null,8,["modelValue"])]),_:1}),j(k,null,{default:Ee(()=>[j(w),j(R,{onClick:C[6]||(C[6]=F=>n.value=!1)},{default:Ee(()=>C[25]||(C[25]=[nt("Cancel")])),_:1,__:[25]}),j(R,{onClick:m,color:"primary"},{default:Ee(()=>C[26]||(C[26]=[nt("Import")])),_:1,__:[26]})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}}),yI=xt(bI,[["__scopeId","data-v-fe67ae24"]]);function wI(){const e=qo(),t=se(()=>e.isDarkMode),n=se(()=>e.currentColors),s=se(()=>e.themeConfig),a=se(()=>({background:n.value?.background||"#1e1e1e",foreground:n.value?.foreground||"#d4d4d4",cursor:n.value?.cursor||"#ffffff",selection:n.value?.selection||"#264f78"})),i=se(()=>({background:t.value?n.value?.background||"#1e1e1e":"#ffffff",surface:t.value?n.value?.bright_black||"#333333":"#f5f5f5",primary:n.value?.blue||"#2472c8",text:t.value?n.value?.foreground||"#d4d4d4":n.value?.black||"#000000",textSecondary:t.value?n.value?.bright_black||"#666666":n.value?.bright_white||"#999999",border:t.value?n.value?.bright_black||"#333333":"#e0e0e0"})),o=se(()=>({fontFamily:s.value.fontFamily,fontSize:`${s.value.fontSize}px`,lineHeight:s.value.lineHeight})),r=se(()=>({backgroundColor:a.value.background,color:a.value.foreground,fontFamily:o.value.fontFamily,fontSize:o.value.fontSize,lineHeight:o.value.lineHeight,cursor:s.value.cursorStyle==="block"?"block":"text"})),f=se(()=>({backgroundColor:i.value.background,color:i.value.text,borderColor:i.value.border})),u=()=>{const P=s.value.mode;P==="light"?e.setThemeMode("dark"):P==="dark"?e.setThemeMode("auto"):e.setThemeMode("light")},d=()=>e.setThemeMode("dark"),c=()=>e.setThemeMode("light"),l=()=>e.setThemeMode("auto"),m=P=>{e.setColorScheme(P)},v=()=>{e.setFontSize(Math.min(72,s.value.fontSize+1))},C=()=>{e.setFontSize(Math.max(8,s.value.fontSize-1))},b=()=>{e.setFontSize(14)},_=se(()=>e.cssVariables);return{isDark:t,colors:n,config:s,terminalColors:a,uiColors:i,fontSettings:o,terminalStyle:r,containerStyle:f,cssVariables:_,toggleTheme:u,setDarkMode:d,setLightMode:c,setAutoMode:l,changeColorScheme:m,increaseFontSize:v,decreaseFontSize:C,resetFontSize:b,applyToDocument:()=>{e.applyTheme()},initialize:async()=>{await e.loadThemeConfig()},store:e}}const kI={class:"sidebar-header"},SI={class:"sidebar-controls"},CI=["disabled"],AI=kt({__name:"S3Header",props:{loading:{type:Boolean}},emits:["refresh"],setup(e){return(t,n)=>(Y(),J("div",kI,[n[1]||(n[1]=h("div",{class:"sidebar-title"},[h("span",{class:"sidebar-icon"},""),h("span",{class:"title-text"},"S3 Browser")],-1)),h("div",SI,[h("button",{onClick:n[0]||(n[0]=s=>t.$emit("refresh")),disabled:t.loading,class:"control-btn",title:"Refresh"},"  ",8,CI)])]))}}),TI=xt(AI,[["__scopeId","data-v-0d76782f"]]),xI={key:0,class:"auth-status"},EI=kt({__name:"S3AuthStatus",props:{isAuthenticated:{type:Boolean}},setup(e){return(t,n)=>t.isAuthenticated?Me("",!0):(Y(),J("div",xI,n[0]||(n[0]=[h("div",{class:"status-icon"},"",-1),h("div",{class:"status-text"},[h("p",null,"Authentication required"),h("small",null,"Login to JupyterHub")],-1)])))}}),RI=xt(EI,[["__scopeId","data-v-66af95ab"]]),MI=kt({__name:"S3StatusIndicator",props:{s3Status:{}},setup(e){return(t,n)=>t.s3Status.message?(Y(),J("div",{key:0,class:Se(["s3-status",t.s3Status.status])},[h("div",{class:Se(["status-indicator",{online:t.s3Status.aws_available}])},null,2),h("span",null,Q(t.s3Status.aws_available?"AWS Connected":"AWS Disconnected"),1)],2)):Me("",!0)}}),II=xt(MI,[["__scopeId","data-v-2afb6759"]]),BI={key:0,class:"bucket-section"},LI={class:"section-header"},OI={class:"bucket-count"},PI={class:"bucket-list"},$I=["onClick","title"],FI={class:"bucket-name"},DI={class:"bucket-date"},VI=kt({__name:"S3BucketList",props:{isAuthenticated:{type:Boolean},buckets:{},selectedBucket:{}},emits:["selectBucket"],setup(e){const t=(s,a)=>s.length>a?s.substring(0,a)+"...":s,n=s=>{try{return new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric"})}catch{return""}};return(s,a)=>s.isAuthenticated?(Y(),J("div",BI,[h("div",LI,[a[0]||(a[0]=h("h4",null,"Buckets",-1)),h("span",OI,"("+Q(s.buckets.length)+")",1)]),h("div",PI,[(Y(!0),J(Je,null,wt(s.buckets,i=>(Y(),J("div",{key:i.name,onClick:o=>s.$emit("selectBucket",i.name),class:Se(["bucket-item",{active:s.selectedBucket===i.name}]),title:i.name},[a[1]||(a[1]=h("span",{class:"bucket-icon"},"",-1)),h("span",FI,Q(t(i.name,20)),1),h("span",DI,Q(n(i.created)),1)],10,$I))),128))])])):Me("",!0)}}),NI=xt(VI,[["__scopeId","data-v-0246e373"]]),jI={key:0,class:"files-section"},HI={class:"section-header"},zI={class:"file-count"},UI={class:"file-actions"},qI={key:0,class:"current-path"},WI={class:"path-text"},YI={class:"file-list"},KI=["onClick","title"],GI={class:"file-icon"},XI={class:"file-details"},ZI={class:"file-name"},QI={class:"file-meta"},JI={key:0,class:"file-size"},eB={key:1,class:"file-date"},tB=["onClick"],nB={key:0,class:"empty-state"},sB=kt({__name:"S3FileList",props:{selectedBucket:{},currentPath:{},currentPathDisplay:{},files:{}},emits:["uploadFiles","createFolder","navigateUp","navigateToFolder","downloadFile"],setup(e,{emit:t}){const n=t,s=(f,u)=>f.length>u?f.substring(0,u)+"...":f,a=f=>{if(!f)return"";switch(f.split(".").pop()?.toLowerCase()){case"jpg":case"jpeg":case"png":case"gif":return"";case"pdf":return"";case"txt":case"md":return"";case"zip":case"tar":case"gz":return"";case"mp3":case"wav":return"";case"mp4":case"avi":return"";default:return""}},i=f=>{if(f===0)return"0 B";const u=1024,d=["B","KB","MB","GB"],c=Math.floor(Math.log(f)/Math.log(u));return parseFloat((f/Math.pow(u,c)).toFixed(1))+" "+d[c]},o=f=>{try{return new Date(f).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return""}},r=f=>{f.type==="folder"&&n("navigateToFolder",f)};return(f,u)=>f.selectedBucket?(Y(),J("div",jI,[h("div",HI,[u[3]||(u[3]=h("h4",null,"Files",-1)),h("span",zI,"("+Q(f.files.length)+")",1),h("div",UI,[h("button",{onClick:u[0]||(u[0]=d=>n("uploadFiles")),class:"action-btn",title:"Upload"},"  "),h("button",{onClick:u[1]||(u[1]=d=>n("createFolder")),class:"action-btn",title:"New Folder"},"  ")])]),f.currentPath?(Y(),J("div",qI,[u[4]||(u[4]=h("span",{class:"path-icon"},"",-1)),h("span",WI,Q(f.currentPathDisplay),1),h("button",{onClick:u[2]||(u[2]=d=>n("navigateUp")),class:"path-btn",title:"Go Up"},"  ")])):Me("",!0),h("div",YI,[(Y(!0),J(Je,null,wt(f.files,d=>(Y(),J("div",{key:d.key||d.name,class:Se(["file-item",{folder:d.type==="folder"}]),onClick:c=>r(d),title:d.key||d.name},[h("span",GI,Q(d.type==="folder"?"":a(d.name||d.key||"")),1),h("div",XI,[h("div",ZI,Q(s(d.name||d.key||"",25)),1),h("div",QI,[d.size?(Y(),J("span",JI,Q(i(d.size)),1)):Me("",!0),d.last_modified?(Y(),J("span",eB,Q(o(d.last_modified)),1)):Me("",!0)])]),d.type!=="folder"?(Y(),J("button",{key:0,onClick:Sn(c=>n("downloadFile",d),["stop"]),class:"download-btn",title:"Download"},"  ",8,tB)):Me("",!0)],10,KI))),128)),f.files.length===0?(Y(),J("div",nB,u[5]||(u[5]=[h("span",{class:"empty-icon"},"",-1),h("span",{class:"empty-text"},"No files in this location",-1)]))):Me("",!0)])])):Me("",!0)}}),aB=xt(sB,[["__scopeId","data-v-06b616a0"]]),iB={class:"modal-header"},oB={class:"modal-content"},rB={class:"upload-area"},lB={key:0,class:"upload-progress"},cB={class:"upload-info"},uB={class:"upload-name"},dB={class:"upload-percent"},fB={class:"progress-bar"},mB=kt({__name:"S3UploadModal",props:{visible:{type:Boolean},uploads:{}},emits:["close","uploadFiles"],setup(e,{emit:t}){const n=t,s=ie(),a=i=>{const r=i.target.files;r&&n("uploadFiles",r)};return(i,o)=>i.visible?(Y(),J("div",{key:0,class:"modal-overlay",onClick:o[2]||(o[2]=r=>n("close"))},[h("div",{class:"upload-modal",onClick:o[1]||(o[1]=Sn(()=>{},["stop"]))},[h("div",iB,[o[3]||(o[3]=h("h3",null,"Upload Files",-1)),h("button",{onClick:o[0]||(o[0]=r=>n("close")),class:"modal-close"},"")]),h("div",oB,[h("div",rB,[h("input",{ref_key:"fileInput",ref:s,type:"file",multiple:"",onChange:a,class:"file-input",id:"file-upload"},null,544),o[4]||(o[4]=h("label",{for:"file-upload",class:"upload-label"},[h("div",{class:"upload-icon"},""),h("div",{class:"upload-text"},[h("p",null,"Click to select files"),h("small",null,"or drag and drop")])],-1))]),i.uploads.length>0?(Y(),J("div",lB,[o[5]||(o[5]=h("h4",null,"Upload Progress",-1)),(Y(!0),J(Je,null,wt(i.uploads,r=>(Y(),J("div",{key:r.name,class:"upload-item"},[h("div",cB,[h("span",uB,Q(r.name),1),h("span",dB,Q(r.progress)+"%",1)]),h("div",fB,[h("div",{class:"progress-fill",style:it({width:r.progress+"%"})},null,4)])]))),128))])):Me("",!0)])])])):Me("",!0)}}),vB=xt(mB,[["__scopeId","data-v-922ae35b"]]),hB={class:"s3-sidebar"},gB={class:"sidebar-content"},pB={key:0,class:"loading-indicator"},_B=kt({__name:"S3BrowserSidebar",setup(e){const t=ie(!1),n=ie([]),s=ie(""),a=ie(""),i=ie([]),o=ie(!1),r=ie([]),f=ie({status:"",aws_available:!1,message:""}),u=se(()=>!0),d=se(()=>a.value?`${s.value}/${a.value}`:s.value),c=async(T,E={})=>{const y={"Content-Type":"application/json",...E.headers},A=await fetch(T,{...E,headers:y});if(!A.ok){const w=await A.text();throw new Error(`API Error: ${A.status} - ${w}`)}return A.json()},l=async()=>{try{const E=await(await fetch("/api/s3/status")).json();f.value=E}catch(T){console.error("Failed to check S3 status:",T),f.value={status:"error",aws_available:!1,message:"Failed to check S3 status"}}},m=async()=>{t.value=!0;try{const T=await c("/api/s3/buckets");n.value=T.buckets||[]}catch(T){console.error("Failed to load buckets:",T),n.value=[]}finally{t.value=!1}},v=async T=>{s.value=T,a.value="",await C()},C=async()=>{if(s.value){t.value=!0;try{const T=a.value?`?prefix=${encodeURIComponent(a.value)}`:"",E=await c(`/api/s3/files/${s.value}${T}`);i.value=E.files||[]}catch(T){console.error("Failed to load files:",T),i.value=[]}finally{t.value=!1}}},b=T=>{if(T.type==="folder"){const E=T.key||T.name;a.value=a.value?`${a.value}/${E}`:E,C()}},_=()=>{const T=a.value.split("/");T.pop(),a.value=T.join("/"),C()},g=async T=>{try{const E=T.key||T.name,y=await fetch(`/api/s3/download/${s.value}?key=${encodeURIComponent(E)}`);if(y.ok){const A=await y.blob(),w=window.URL.createObjectURL(A),k=document.createElement("a");k.href=w,k.download=E.split("/").pop()||"download",document.body.appendChild(k),k.click(),window.URL.revokeObjectURL(w),document.body.removeChild(k)}}catch(E){console.error("Download error:",E)}},R=()=>{o.value=!0},P=()=>{o.value=!1,r.value=[]},S=async T=>{const E=Array.from(T);for(const y of E){const A={name:y.name,progress:0};r.value.push(A);try{const w=new FormData;w.append("file",y);const k=a.value?`${a.value}/${y.name}`:y.name;(await fetch(`/api/s3/upload/${s.value}?key=${encodeURIComponent(k)}`,{method:"POST",body:w})).ok&&(A.progress=100,setTimeout(()=>C(),1e3))}catch(w){console.error("Upload error:",w)}}},L=async()=>{const T=prompt("Enter folder name:");if(T)try{const E=a.value?`${a.value}/${T}/`:`${T}/`;(await fetch(`/api/s3/create-folder/${s.value}?key=${encodeURIComponent(E)}`,{method:"POST"})).ok&&await C()}catch(E){console.error("Create folder error:",E)}},I=()=>{l(),u.value&&(m(),s.value&&C())};return sn(()=>{I()}),(T,E)=>(Y(),J("div",hB,[j(TI,{loading:t.value,onRefresh:I},null,8,["loading"]),h("div",gB,[j(RI,{"is-authenticated":u.value},null,8,["is-authenticated"]),j(II,{"s3-status":f.value},null,8,["s3-status"]),j(NI,{"is-authenticated":u.value,buckets:n.value,"selected-bucket":s.value,onSelectBucket:v},null,8,["is-authenticated","buckets","selected-bucket"]),j(aB,{"selected-bucket":s.value,"current-path":a.value,"current-path-display":d.value,files:i.value,onUploadFiles:R,onCreateFolder:L,onNavigateUp:_,onNavigateToFolder:b,onDownloadFile:g},null,8,["selected-bucket","current-path","current-path-display","files"])]),t.value?(Y(),J("div",pB,E[0]||(E[0]=[h("div",{class:"spinner"},"",-1)]))):Me("",!0),j(vB,{visible:o.value,uploads:r.value,onClose:P,onUploadFiles:S},null,8,["visible","uploads"])]))}}),bB=xt(_B,[["__scopeId","data-v-12d2d689"]]),yB={key:0,class:"recent-activity"},wB={class:"activity-list"},kB={class:"activity-date"},SB={class:"activity-cost"},CB={class:"activity-requests"},AB=kt({__name:"CostActivity",props:{dailyData:{}},setup(e){const t=n=>{try{const s=new Date(n),a=new Date,i=new Date(a);return i.setDate(i.getDate()-1),s.toDateString()===a.toDateString()?"Today":s.toDateString()===i.toDateString()?"Yesterday":s.toLocaleDateString("en-US",{month:"short",day:"numeric"})}catch{return n}};return(n,s)=>n.dailyData.length>0?(Y(),J("div",yB,[s[0]||(s[0]=h("h4",null,"Recent Activity",-1)),h("div",wB,[(Y(!0),J(Je,null,wt(n.dailyData.slice(0,5),a=>(Y(),J("div",{key:a.date,class:"activity-item"},[h("div",kB,Q(t(a.date)),1),h("div",SB,"$"+Q(a.cost.toFixed(4)),1),h("div",CB,Q(a.requests)+" req",1)]))),128))])])):Me("",!0)}}),TB=xt(AB,[["__scopeId","data-v-5d2b1c23"]]),xB={class:"cost-controls"},EB={class:"control-group"},RB=["value"],MB={key:0,class:"model-breakdown"},IB={class:"model-list"},BB={class:"model-name"},LB={class:"model-cost"},OB={class:"model-usage"},PB=kt({__name:"CostControls",props:{selectedPeriod:{},modelData:{}},emits:["updatePeriod"],setup(e){const t=n=>n.length>15?n.substring(0,12)+"...":n;return(n,s)=>(Y(),J("div",xB,[h("div",EB,[s[2]||(s[2]=h("label",{class:"control-label"},"Period:",-1)),h("select",{value:n.selectedPeriod,onChange:s[0]||(s[0]=a=>n.$emit("updatePeriod",Number(a.target.value))),class:"period-select"},s[1]||(s[1]=[h("option",{value:"7"},"7 days",-1),h("option",{value:"30"},"30 days",-1),h("option",{value:"90"},"90 days",-1)]),40,RB)]),n.modelData.length>0?(Y(),J("div",MB,[s[3]||(s[3]=h("h4",null,"By Model",-1)),h("div",IB,[(Y(!0),J(Je,null,wt(n.modelData.slice(0,3),a=>(Y(),J("div",{key:a.model,class:"model-item"},[h("div",BB,Q(t(a.model)),1),h("div",LB,"$"+Q(a.cost.toFixed(4)),1),h("div",OB,Q(a.requests)+" req",1)]))),128))])])):Me("",!0)]))}}),$B=xt(PB,[["__scopeId","data-v-59c4d068"]]),FB={class:"sidebar-header"},DB={class:"sidebar-title"},VB={key:0,class:"cost-badge"},NB={class:"sidebar-controls"},jB=["disabled"],HB=kt({__name:"CostHeader",props:{loading:{type:Boolean},costData:{}},emits:["refresh"],setup(e){return(t,n)=>(Y(),J("div",FB,[h("div",DB,[n[1]||(n[1]=h("span",{class:"sidebar-icon"},"",-1)),n[2]||(n[2]=h("span",{class:"title-text"},"AI Costs",-1)),t.costData.available?(Y(),J("span",VB," $"+Q(t.costData.total_cost.toFixed(4)),1)):Me("",!0)]),h("div",NB,[h("button",{onClick:n[0]||(n[0]=s=>t.$emit("refresh")),disabled:t.loading,class:"control-btn",title:"Refresh"},"  ",8,jB)])]))}}),zB=xt(HB,[["__scopeId","data-v-2cff3a13"]]),UB={key:0,class:"cost-overview"},qB={class:"total-cost"},WB={class:"cost-amount"},YB={class:"cost-period"},KB={key:0,class:"usage-stats"},GB={class:"stat-grid"},XB={key:0,class:"stat-item"},ZB={class:"stat-value"},QB={key:1,class:"stat-item"},JB={class:"stat-value"},eL={key:2,class:"stat-item"},tL={class:"stat-value"},nL={key:0,class:"token-usage"},sL={class:"token-bars"},aL={class:"token-row"},iL={class:"bar-container"},oL={class:"token-row"},rL={class:"bar-container"},lL={key:1,class:"cost-metrics"},cL={key:0,class:"metric-row"},uL={class:"metric-value"},dL={key:1,class:"metric-row"},fL={class:"metric-value"},mL={key:2,class:"metric-row"},vL={class:"metric-value"},hL=kt({__name:"CostMetrics",props:{costData:{},selectedPeriod:{}},setup(e){const t=e,n=i=>i>=1e6?(i/1e6).toFixed(1)+"M":i>=1e3?(i/1e3).toFixed(1)+"K":i.toString(),s=se(()=>{if(!t.costData.input_tokens||!t.costData.output_tokens)return 0;const i=t.costData.input_tokens+t.costData.output_tokens;return t.costData.input_tokens/i*100}),a=se(()=>{if(!t.costData.input_tokens||!t.costData.output_tokens)return 0;const i=t.costData.input_tokens+t.costData.output_tokens;return t.costData.output_tokens/i*100});return(i,o)=>i.costData.available?(Y(),J("div",UB,[h("div",qB,[h("div",WB,"$"+Q(i.costData.total_cost.toFixed(4)),1),h("div",YB,Q(i.selectedPeriod)+" days",1)]),i.costData.requests||i.costData.input_tokens||i.costData.output_tokens?(Y(),J("div",KB,[h("div",GB,[i.costData.requests?(Y(),J("div",XB,[o[0]||(o[0]=h("div",{class:"stat-label"},"Requests",-1)),h("div",ZB,Q(n(i.costData.requests)),1)])):Me("",!0),i.costData.input_tokens?(Y(),J("div",QB,[o[1]||(o[1]=h("div",{class:"stat-label"},"Input Tokens",-1)),h("div",JB,Q(n(i.costData.input_tokens)),1)])):Me("",!0),i.costData.output_tokens?(Y(),J("div",eL,[o[2]||(o[2]=h("div",{class:"stat-label"},"Output Tokens",-1)),h("div",tL,Q(n(i.costData.output_tokens)),1)])):Me("",!0)]),i.costData.input_tokens&&i.costData.output_tokens?(Y(),J("div",nL,[o[5]||(o[5]=h("div",{class:"usage-header"},"Token Distribution",-1)),h("div",sL,[h("div",aL,[o[3]||(o[3]=h("span",{class:"token-label"},"Input",-1)),h("div",iL,[h("div",{class:"bar-fill input-bar",style:it({width:s.value+"%"})},null,4)])]),h("div",oL,[o[4]||(o[4]=h("span",{class:"token-label"},"Output",-1)),h("div",rL,[h("div",{class:"bar-fill output-bar",style:it({width:a.value+"%"})},null,4)])])])])):Me("",!0)])):Me("",!0),i.costData.average_cost_per_request||i.costData.total_cost>0?(Y(),J("div",lL,[i.costData.average_cost_per_request?(Y(),J("div",cL,[o[6]||(o[6]=h("span",{class:"metric-label"},"Avg/req:",-1)),h("span",uL,"$"+Q(i.costData.average_cost_per_request.toFixed(4)),1)])):Me("",!0),i.costData.cost_per_1k_tokens?(Y(),J("div",dL,[o[7]||(o[7]=h("span",{class:"metric-label"},"$/1K tok:",-1)),h("span",fL,"$"+Q(i.costData.cost_per_1k_tokens.toFixed(4)),1)])):Me("",!0),i.costData.total_cost>0?(Y(),J("div",mL,[o[8]||(o[8]=h("span",{class:"metric-label"},"Period:",-1)),h("span",vL,Q(i.selectedPeriod)+"d",1)])):Me("",!0)])):Me("",!0)])):Me("",!0)}}),gL=xt(hL,[["__scopeId","data-v-28232a6e"]]),pL={class:"cost-realtime"},_L={class:"realtime-header"},bL={key:0,class:"burn-rate"},yL={class:"rate-item"},wL={class:"value"},kL={class:"rate-item"},SL={class:"value"},CL={class:"rate-item"},AL={class:"value"},TL={key:1,class:"time-windows"},xL={class:"window-label"},EL={class:"window-cost"},RL={class:"window-rate"},ML={key:2,class:"billing-blocks"},IL={class:"block-time"},BL={class:"block-cost"},LL={class:"block-requests"},OL={class:"last-update"},PL=kt({__name:"CostRealtime",setup(e){const t=ie(!1),n=ie({available:!1,hourly_rate:0,daily_projection:0,monthly_projection:0}),s=ie([]),a=ie(new Date);let i=null;const o=async v=>{const C=await fetch(v);if(!C.ok)throw new Error(`API Error: ${C.status}`);return C.json()},r=async()=>{try{const v=await o("/api/ai/costs/burn-rate");n.value=v,a.value=new Date}catch(v){console.error("Failed to load burn rate:",v)}},f=async()=>{try{const v=await o("/api/ai/costs/blocks?hours=24");s.value=v.billing_blocks||[]}catch(v){console.error("Failed to load billing blocks:",v)}},u=()=>{r(),f(),i=window.setInterval(()=>{r(),f()},3e4)},d=()=>{i!==null&&(clearInterval(i),i=null)},c=()=>{t.value=!t.value,t.value?u():d()},l=v=>v.toLocaleTimeString(),m=v=>new Date(v).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return sn(()=>{r(),f()}),Fa(()=>{d()}),(v,C)=>(Y(),J("div",pL,[h("div",_L,[h("span",{class:Se(["status-indicator",{active:t.value}])},null,2),C[0]||(C[0]=h("span",{class:"title"},"Real-time Monitor",-1)),h("button",{onClick:c,class:"monitor-btn"},Q(t.value?"":""),1)]),n.value.available?(Y(),J("div",bL,[h("div",yL,[C[1]||(C[1]=h("span",{class:"label"},"Current Rate:",-1)),h("span",wL,"$"+Q(n.value.hourly_rate)+"/hr",1)]),h("div",kL,[C[2]||(C[2]=h("span",{class:"label"},"Daily Projection:",-1)),h("span",SL,"$"+Q(n.value.daily_projection),1)]),h("div",CL,[C[3]||(C[3]=h("span",{class:"label"},"Monthly Projection:",-1)),h("span",AL,"$"+Q(n.value.monthly_projection),1)])])):Me("",!0),n.value.time_windows?(Y(),J("div",TL,[C[4]||(C[4]=h("h4",null,"Time Windows",-1)),(Y(!0),J(Je,null,wt(n.value.time_windows,b=>(Y(),J("div",{key:b.window,class:"window-item"},[h("span",xL,Q(b.window)+":",1),h("span",EL,"$"+Q(b.cost),1),h("span",RL,"("+Q(b.rate_per_hour)+"/hr)",1)]))),128))])):Me("",!0),s.value.length>0?(Y(),J("div",ML,[C[5]||(C[5]=h("h4",null,"5-Hour Billing Blocks",-1)),(Y(!0),J(Je,null,wt(s.value.slice(0,3),b=>(Y(),J("div",{key:b.block_start,class:"block-item"},[h("span",IL,Q(m(b.block_start)),1),h("span",BL,"$"+Q(b.cost),1),h("span",LL,Q(b.requests)+" req",1)]))),128))])):Me("",!0),h("div",OL," Last update: "+Q(l(a.value)),1)]))}}),$L=xt(PL,[["__scopeId","data-v-ce884def"]]),FL={class:"status-icon"},DL={class:"status-text"},VL=kt({__name:"CostStatus",props:{costData:{}},setup(e){const t=e,n=se(()=>t.costData.error?"error":t.costData.available&&t.costData.total_cost>0?"success":"info"),s=se(()=>t.costData.error?"":t.costData.available&&t.costData.total_cost>0?"":""),a=se(()=>t.costData.error?`Error: ${t.costData.error}`:t.costData.available&&t.costData.total_cost>0?"Cost data available":t.costData.message||"No cost data available");return(i,o)=>(Y(),J("div",{class:Se(["cost-status",n.value])},[h("span",FL,Q(s.value),1),h("span",DL,Q(a.value),1)],2))}}),NL=xt(VL,[["__scopeId","data-v-0d94271d"]]),jL={class:"terminal-header"},HL={class:"command"},zL={class:"view-switcher"},UL=["onClick"],qL={class:"terminal-output"},WL={key:0,class:"ccusage-table"},YL={class:"table-wrapper"},KL={key:0,class:"border-top"},GL={key:1,class:"border-top"},XL={key:0,class:"header right"},ZL={key:1,class:"header right"},QL={key:0,class:"border-mid"},JL={key:1,class:"border-mid"},eO={class:"right"},tO={class:"right"},nO={key:0,class:"right"},sO={key:1,class:"right"},aO={class:"right"},iO={class:"right cost"},oO={key:0,class:"border-sep"},rO={key:1,class:"border-sep"},lO={class:"total-row"},cO={class:"right"},uO={class:"right"},dO={key:0,class:"right"},fO={key:1,class:"right"},mO={class:"right"},vO={class:"right cost"},hO={key:0,class:"border-bottom"},gO={key:1,class:"border-bottom"},pO={key:0,class:"compact-notice"},_O={key:1,class:"terminal-table"},bO={class:"model-name"},yO={class:"right"},wO={class:"right cost"},kO={class:"right"},SO={key:2,class:"terminal-table"},CO={class:"right"},AO={class:"right"},TO={class:"right cost"},xO={key:3,class:"empty-state"},EO={class:"terminal-footer"},RO={class:"info"},MO=kt({__name:"CostTerminalTable",props:{dailyData:{default:()=>[]},modelData:{default:()=>[]}},emits:["export"],setup(e,{emit:t}){const n=e,s=t,a=ie(),i=ie("daily"),o=["daily","model","session"],r=ie([]),f=ie(80);se(()=>n.dailyData.reduce((_,g)=>_+g.requests,0)),se(()=>n.dailyData.reduce((_,g)=>_+(g.tokens||0),0));const u=se(()=>n.dailyData.reduce((_,g)=>_+g.cost,0)),d=async()=>{try{const g=await(await fetch("/api/ai/costs/blocks?hours=24")).json();r.value=g.billing_blocks||[]}catch(_){console.error("Failed to load billing blocks:",_)}},c=_=>new Date(_).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:f.value>60?"numeric":"2-digit"}),l=_=>f.value<60?_.replace("claude-3-","c3-").replace("claude-3-5-","c3.5-").replace("-20240229","").replace("-20241022","").replace("-20240307",""):_,m=_=>new Date(_).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1}),v=()=>{const _=i.value;return _==="daily"?`${n.dailyData.length} days | $${u.value.toFixed(2)} total`:_==="model"?`${n.modelData.length} models | $${u.value.toFixed(2)} total`:`${r.value.length} blocks | 5-hour billing windows`},C=()=>{s("export","json")},b=()=>{if(a.value){const _=a.value.offsetWidth;f.value=Math.floor(_/8)}};return sn(()=>{d(),b(),window.addEventListener("resize",b)}),Fa(()=>{window.removeEventListener("resize",b)}),(_,g)=>(Y(),J("div",{class:"cost-terminal-table",ref_key:"tableContainer",ref:a},[h("div",jL,[g[0]||(g[0]=h("span",{class:"prompt"},"$",-1)),h("span",HL,"ccusage "+Q(i.value),1),h("div",zL,[(Y(),J(Je,null,wt(o,R=>h("button",{key:R,onClick:P=>i.value=R,class:Se([{active:i.value===R},"mode-btn"])},Q(R),11,UL)),64))])]),h("div",qL,[i.value==="daily"&&_.enhancedDailyData.length>0?(Y(),J("div",WL,[h("div",YL,[h("table",null,[h("thead",null,[h("tr",null,[g[1]||(g[1]=h("th",{class:"border-top"},"",-1)),g[2]||(g[2]=h("th",{class:"border-top"},"",-1)),g[3]||(g[3]=h("th",{class:"border-top"},"",-1)),g[4]||(g[4]=h("th",{class:"border-top"},"",-1)),_.compactMode?Me("",!0):(Y(),J("th",KL,"")),_.compactMode?Me("",!0):(Y(),J("th",GL,"")),g[5]||(g[5]=h("th",{class:"border-top"},"",-1)),g[6]||(g[6]=h("th",{class:"border-top"},"",-1))]),h("tr",null,[g[7]||(g[7]=h("th",{class:"header"}," Date ",-1)),g[8]||(g[8]=h("th",{class:"header"}," Models ",-1)),g[9]||(g[9]=h("th",{class:"header right"}," Input ",-1)),g[10]||(g[10]=h("th",{class:"header right"}," Output ",-1)),_.compactMode?Me("",!0):(Y(),J("th",XL," Cache Create ")),_.compactMode?Me("",!0):(Y(),J("th",ZL," Cache Read ")),g[11]||(g[11]=h("th",{class:"header right"}," Total Tokens ",-1)),g[12]||(g[12]=h("th",{class:"header right"}," Cost (USD) ",-1))]),h("tr",null,[g[13]||(g[13]=h("th",{class:"border-mid"},"",-1)),g[14]||(g[14]=h("th",{class:"border-mid"},"",-1)),g[15]||(g[15]=h("th",{class:"border-mid"},"",-1)),g[16]||(g[16]=h("th",{class:"border-mid"},"",-1)),_.compactMode?Me("",!0):(Y(),J("th",QL,"")),_.compactMode?Me("",!0):(Y(),J("th",JL,"")),g[17]||(g[17]=h("th",{class:"border-mid"},"",-1)),g[18]||(g[18]=h("th",{class:"border-mid"},"",-1))])]),h("tbody",null,[(Y(!0),J(Je,null,wt(_.enhancedDailyData,R=>(Y(),J("tr",{key:R.date},[h("td",null," "+Q(c(R.date)),1),h("td",null," "+Q(_.formatModels(R.models)),1),h("td",eO," "+Q(_.formatNumber(R.input_tokens)),1),h("td",tO," "+Q(_.formatNumber(R.output_tokens)),1),_.compactMode?Me("",!0):(Y(),J("td",nO," "+Q(_.formatNumber(R.cache_creation)),1)),_.compactMode?Me("",!0):(Y(),J("td",sO," "+Q(_.formatNumber(R.cache_read)),1)),h("td",aO," "+Q(_.formatNumber(R.total_tokens)),1),h("td",iO," "+Q(_.formatCost(R.cost))+" ",1)]))),128))]),h("tfoot",null,[h("tr",null,[g[19]||(g[19]=h("td",{class:"border-sep"},"",-1)),g[20]||(g[20]=h("td",{class:"border-sep"},"",-1)),g[21]||(g[21]=h("td",{class:"border-sep"},"",-1)),g[22]||(g[22]=h("td",{class:"border-sep"},"",-1)),_.compactMode?Me("",!0):(Y(),J("td",oO,"")),_.compactMode?Me("",!0):(Y(),J("td",rO,"")),g[23]||(g[23]=h("td",{class:"border-sep"},"",-1)),g[24]||(g[24]=h("td",{class:"border-sep"},"",-1))]),h("tr",lO,[g[25]||(g[25]=h("td",null," TOTAL ",-1)),g[26]||(g[26]=h("td",null," ",-1)),h("td",cO," "+Q(_.formatNumber(_.totals.input)),1),h("td",uO," "+Q(_.formatNumber(_.totals.output)),1),_.compactMode?Me("",!0):(Y(),J("td",dO," "+Q(_.formatNumber(_.totals.cache_creation)),1)),_.compactMode?Me("",!0):(Y(),J("td",fO," "+Q(_.formatNumber(_.totals.cache_read)),1)),h("td",mO," "+Q(_.formatNumber(_.totals.total)),1),h("td",vO," "+Q(_.formatCost(_.totals.cost))+" ",1)]),h("tr",null,[g[27]||(g[27]=h("td",{class:"border-bottom"},"",-1)),g[28]||(g[28]=h("td",{class:"border-bottom"},"",-1)),g[29]||(g[29]=h("td",{class:"border-bottom"},"",-1)),g[30]||(g[30]=h("td",{class:"border-bottom"},"",-1)),_.compactMode?Me("",!0):(Y(),J("td",hO,"")),_.compactMode?Me("",!0):(Y(),J("td",gO,"")),g[31]||(g[31]=h("td",{class:"border-bottom"},"",-1)),g[32]||(g[32]=h("td",{class:"border-bottom"},"",-1))])])])]),_.compactMode?(Y(),J("div",pO,"  Terminal width < 100 chars. Showing compact view. Resize for full details. ")):Me("",!0)])):i.value==="model"&&_.modelData.length>0?(Y(),J("table",_O,[g[33]||(g[33]=h("thead",null,[h("tr",null,[h("th",null,"Model"),h("th",{class:"right"},"Usage"),h("th",{class:"right"},"Cost"),h("th",{class:"right"},"%")])],-1)),h("tbody",null,[(Y(!0),J(Je,null,wt(_.modelData,R=>(Y(),J("tr",{key:R.model},[h("td",bO,Q(l(R.model)),1),h("td",yO,Q(R.requests)+" req",1),h("td",wO,"$"+Q(R.cost.toFixed(4)),1),h("td",kO,Q(R.percentage)+"%",1)]))),128))])])):i.value==="session"&&r.value.length>0?(Y(),J("table",SO,[g[34]||(g[34]=h("thead",null,[h("tr",null,[h("th",null,"Block Start"),h("th",{class:"right"},"Duration"),h("th",{class:"right"},"Requests"),h("th",{class:"right"},"Cost")])],-1)),h("tbody",null,[(Y(!0),J(Je,null,wt(r.value,R=>(Y(),J("tr",{key:R.block_start,class:Se({active:R.active})},[h("td",null,Q(m(R.block_start)),1),h("td",CO,Q(R.duration_hours)+"h",1),h("td",AO,Q(R.requests),1),h("td",TO,"$"+Q(R.cost.toFixed(4)),1)],2))),128))])])):(Y(),J("div",xO,[h("pre",null,"No data available for "+Q(i.value)+" view",1)]))]),h("div",EO,[h("span",RO,Q(v()),1),h("button",{onClick:C,class:"export-btn",title:"Export data"},"  ")])],512))}}),IO=xt(MO,[["__scopeId","data-v-aa75eb57"]]),BO={class:"ai-cost-sidebar"},LO={class:"sidebar-content"},OO={key:4,class:"error-state"},PO={key:0,class:"error-message"},$O={key:1,class:"info-message"},FO={key:0,class:"loading-indicator"},DO=kt({__name:"AICostSidebar",setup(e){const t=ie(!1),n=ie(30),s=ie({total_cost:0,available:!1,requests:0,input_tokens:0,output_tokens:0,message:"Loading cost data..."}),a=ie([]),i=ie([]),o=async(c,l={})=>{const m={"Content-Type":"application/json",...l.headers},v=await fetch(c,{...l,headers:m});if(!v.ok){const C=await v.text();throw new Error(`API Error: ${v.status} - ${C}`)}return v.json()},r=async()=>{t.value=!0;try{const c=await o(`/api/ai/costs?days=${n.value}`);s.value={...c,available:!0};const l=await o(`/api/ai/costs/daily?days=${n.value}`);a.value=l.daily_breakdown||[];const m=await o(`/api/ai/costs/models?days=${n.value}`);i.value=m.model_breakdown||[]}catch(c){console.error("Failed to load cost data:",c),s.value={total_cost:0,available:!1,error:c instanceof Error?c.message:"Unknown error",message:"Failed to load cost data"}}finally{t.value=!1}},f=async c=>{n.value=c,await r()},u=()=>{r()},d=async c=>{try{const l=await o(`/api/ai/costs/export?days=${n.value}&format=${c}`);if(c==="json"){const m=new Blob([JSON.stringify(l,null,2)],{type:"application/json"}),v=URL.createObjectURL(m),C=document.createElement("a");C.href=v,C.download=`claude-usage-${new Date().toISOString().split("T")[0]}.json`,C.click(),URL.revokeObjectURL(v)}else if(c==="csv"&&l.csv){const m=new Blob([l.csv],{type:"text/csv"}),v=URL.createObjectURL(m),C=document.createElement("a");C.href=v,C.download=`claude-usage-${new Date().toISOString().split("T")[0]}.csv`,C.click(),URL.revokeObjectURL(v)}}catch(l){console.error("Export failed:",l)}};return sn(()=>{r()}),(c,l)=>(Y(),J("div",BO,[j(zB,{loading:t.value,"cost-data":s.value,onRefresh:u},null,8,["loading","cost-data"]),h("div",LO,[j(NL,{"cost-data":s.value},null,8,["cost-data"]),s.value.available?(Y(),Rn($L,{key:0})):Me("",!0),s.value.available?(Y(),Rn(gL,{key:1,"cost-data":s.value,"selected-period":n.value},null,8,["cost-data","selected-period"])):Me("",!0),s.value.available?(Y(),Rn(IO,{key:2,"daily-data":a.value,"model-data":i.value,onExport:d},null,8,["daily-data","model-data"])):Me("",!0),a.value.length>0?(Y(),Rn(TB,{key:3,"daily-data":a.value},null,8,["daily-data"])):Me("",!0),j($B,{"selected-period":n.value,"model-data":i.value,onUpdatePeriod:f},null,8,["selected-period","model-data"]),s.value.available?Me("",!0):(Y(),J("div",OO,[s.value.error?(Y(),J("div",PO,[nt("  "+Q(s.value.error)+" ",1),h("button",{onClick:r,class:"retry-btn"}," Retry ")])):(Y(),J("div",$O,[nt("  "+Q(s.value.message||"No AI cost data available")+" ",1),l[0]||(l[0]=h("div",{class:"info-sub"}," Start using AI features to see usage statistics. ",-1))]))]))]),t.value?(Y(),J("div",FO,l[1]||(l[1]=[h("div",{class:"spinner"},"",-1)]))):Me("",!0)]))}}),VO=xt(DO,[["__scopeId","data-v-59979695"]]),NO={id:"app-container"},jO={class:"main-content"},HO={id:"terminal-container"},zO={key:0,class:"resize-handle-container"},UO={class:"tab-navigation"},qO={key:1,class:"tab-content chat-tab"},WO={key:2,class:"tab-content inventory-tab"},YO={key:3,class:"tab-content s3-tab"},KO={key:4,class:"tab-content cost-tab"},GO={key:5,class:"tab-content supervisor-tab"},XO={key:6,class:"tab-content theme-tab"},ZO={key:7,class:"tab-content debug-tab"},QO={class:"sidebar"},JO={class:"sidebar-content"},eP=["title"],$m="aetherterm-panel-width",Fm="aetherterm-panel-visible",tP=kt({__name:"App",setup(e){const t=D7(),n=Xs(),{initialize:s}=wI();lv();const a=ie("chat"),i=ie(!1),o=ie(!1),r=ie(320),f=ie(!1),u=ie(0),d=ie(0),c=ie(!1),l=ie({x:0,y:0}),m=ie({x:20,y:60}),v=y=>{if(!c.value)return;const A=y.clientX-l.value.x,w=y.clientY-l.value.y,k=window.innerWidth-300,M=window.innerHeight-400;m.value={x:Math.max(0,Math.min(A,k)),y:Math.max(0,Math.min(w,M))}},C=()=>{c.value=!1,document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",C)};let b=0;const _=y=>{i.value||(f.value=!0,u.value=y.clientX,d.value=r.value,document.addEventListener("mousemove",g),document.addEventListener("mouseup",R),y.preventDefault())},g=y=>{f.value&&(b&&cancelAnimationFrame(b),b=requestAnimationFrame(()=>{const A=u.value-y.clientX,w=d.value+A,k=250,M=Math.min(600,window.innerWidth*.4);r.value=Math.max(k,Math.min(w,M)),b=0}))},R=()=>{f.value=!1,document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",R),S()},P=()=>{const y=localStorage.getItem($m);if(y){const A=parseInt(y,10);A>=250&&A<=600&&(r.value=A)}},S=()=>{localStorage.setItem($m,r.value.toString())},L=()=>{const y=localStorage.getItem(Fm);y!==null&&(o.value=y==="true")},I=()=>{localStorage.setItem(Fm,o.value.toString())},T=()=>{o.value=!o.value,I()},E=()=>{a.value="s3",o.value=!0,I()};return sn(async()=>{P(),L(),await s(),n.onAskAI(y=>{console.log("App.vue: Ask AI triggered, showing side panel and switching to assistant tab"),a.value="chat",o.value=!0})}),Fa(()=>{document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",C),document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",R),n.offAskAI()}),rt(t.activeMessages,y=>{y.length>0&&a.value!=="chat"&&(a.value="chat")}),(y,A)=>(Y(),J("div",NO,[h("div",jO,[h("div",HO,[j(Qh,{onOpenS3Browser:E})])]),o.value?(Y(),J("div",{key:0,id:"supervisor-container",class:Se({"supervisor-floating":i.value,"supervisor-fixed":!i.value,dragging:c.value,resizing:f.value}),style:it(i.value?{top:m.value.y+"px",right:"auto",left:m.value.x+"px"}:{width:r.value+"px"})},[i.value?Me("",!0):(Y(),J("div",zO,[h("div",{class:Se(["resize-handle-button",{active:f.value}]),onMousedown:_},null,34)])),h("div",UO,[h("button",{onClick:T,class:"panel-close-btn",title:"Close Panel"},"  "),h("button",{class:Se({active:a.value==="chat"}),onClick:A[0]||(A[0]=w=>a.value="chat")},"Assistant",2),h("button",{class:Se({active:a.value==="inventory"}),onClick:A[1]||(A[1]=w=>a.value="inventory")},"  Inventory ",2),h("button",{class:Se({active:a.value==="s3"}),onClick:A[2]||(A[2]=w=>a.value="s3")},"  S3 ",2),h("button",{class:Se({active:a.value==="cost"}),onClick:A[3]||(A[3]=w=>a.value="cost")},"  AI Costs ",2),h("button",{class:Se({active:a.value==="supervisor"}),onClick:A[4]||(A[4]=w=>a.value="supervisor")},"  Admin ",2),h("button",{class:Se({active:a.value==="theme"}),onClick:A[5]||(A[5]=w=>a.value="theme")},"  Theme ",2),At(kR)?(Y(),J("button",{key:0,class:Se([{active:a.value==="debug"},"debug-tab"]),onClick:A[6]||(A[6]=w=>a.value="debug")},"  Debug ",2)):Me("",!0)]),a.value==="chat"?(Y(),J("div",qO,[j(cC)])):Me("",!0),a.value==="inventory"?(Y(),J("div",WO,[j(pI)])):Me("",!0),a.value==="s3"?(Y(),J("div",YO,[j(bB)])):Me("",!0),a.value==="cost"?(Y(),J("div",KO,[j(VO)])):Me("",!0),a.value==="supervisor"?(Y(),J("div",GO,[j(Kh)])):Me("",!0),a.value==="theme"?(Y(),J("div",XO,[j(yI)])):Me("",!0),a.value==="debug"?(Y(),J("div",ZO,[j(yR)])):Me("",!0)],6)):Me("",!0),an(h("div",QO,[h("div",JO,[h("button",{onClick:T,class:"sidebar-toggle-btn",title:o.value?"Hide Panel":"Show Panel"},Q(o.value?"":""),9,eP),h("button",{onClick:A[7]||(A[7]=w=>{a.value="chat",o.value=!0}),class:Se(["sidebar-tab-btn",{active:a.value==="chat"&&o.value}]),title:"Open Assistant"},"  ",2),h("button",{onClick:A[8]||(A[8]=w=>{a.value="inventory",o.value=!0}),class:Se(["sidebar-tab-btn",{active:a.value==="inventory"&&o.value}]),title:"Open Server Inventory"},"  ",2),h("button",{onClick:A[9]||(A[9]=w=>{a.value="s3",o.value=!0}),class:Se(["sidebar-tab-btn",{active:a.value==="s3"&&o.value}]),title:"Open S3 Browser"},"  ",2),h("button",{onClick:A[10]||(A[10]=w=>{a.value="cost",o.value=!0}),class:Se(["sidebar-tab-btn",{active:a.value==="cost"&&o.value}]),title:"AI Costs"},"  ",2),h("button",{onClick:A[11]||(A[11]=w=>{a.value="supervisor",o.value=!0}),class:Se(["sidebar-tab-btn",{active:a.value==="supervisor"&&o.value}]),title:"Admin Panel"},"  ",2),h("button",{onClick:A[12]||(A[12]=w=>{a.value="theme",o.value=!0}),class:Se(["sidebar-tab-btn",{active:a.value==="theme"&&o.value}]),title:"Theme Settings"},"  ",2)])],512),[[js,!o.value]]),Me("",!0)]))}}),nP=xt(tP,[["__scopeId","data-v-b7cbdbe6"]]),sP=Lg({history:Og("./"),routes:[{path:"/",name:"terminal",component:Qh},{path:"/debug/workspace",name:"workspace-debug",component:()=>qh(()=>import("./WorkspaceDebugPage.B4q9gyVG.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url)},{path:"/:pathMatch(.*)*",redirect:"/"}]}),aP=ze({...St(),...Yg({fullHeight:!0}),...fn()},"VApp"),iP=st()({name:"VApp",props:aP(),setup(e,t){let{slots:n}=t;const s=bn(e),{layoutClasses:a,getLayoutItem:i,items:o,layoutRef:r}=Wg(e),{rtlClasses:f}=fs();return ut(()=>h("div",{ref:r,class:Se(["v-application",s.themeClasses.value,a.value,f.value,e.class]),style:it([e.style])},[h("div",{class:"v-application__wrap"},[n.default?.()])])),{getLayoutItem:i,items:o,theme:s}}}),en=ze({tag:{type:[String,Object,Function],default:"div"}},"tag"),oP=ze({text:String,...St(),...en()},"VToolbarTitle"),t0=st()({name:"VToolbarTitle",props:oP(),setup(e,t){let{slots:n}=t;return ut(()=>{const s=!!(n.default||n.text||e.text);return j(e.tag,{class:Se(["v-toolbar-title",e.class]),style:it(e.style)},{default:()=>[s&&h("div",{class:"v-toolbar-title__placeholder"},[n.text?n.text():e.text,n.default?.()])]})}),{}}}),rP=ze({disabled:Boolean,group:Boolean,hideOnLeave:Boolean,leaveAbsolute:Boolean,mode:String,origin:String},"transition");function ns(e,t,n){return st()({name:e,props:rP({mode:n,origin:t}),setup(s,a){let{slots:i}=a;const o={onBeforeEnter(r){s.origin&&(r.style.transformOrigin=s.origin)},onLeave(r){if(s.leaveAbsolute){const{offsetTop:f,offsetLeft:u,offsetWidth:d,offsetHeight:c}=r;r._transitionInitialStyles={position:r.style.position,top:r.style.top,left:r.style.left,width:r.style.width,height:r.style.height},r.style.position="absolute",r.style.top=`${f}px`,r.style.left=`${u}px`,r.style.width=`${d}px`,r.style.height=`${c}px`}s.hideOnLeave&&r.style.setProperty("display","none","important")},onAfterLeave(r){if(s.leaveAbsolute&&r?._transitionInitialStyles){const{position:f,top:u,left:d,width:c,height:l}=r._transitionInitialStyles;delete r._transitionInitialStyles,r.style.position=f||"",r.style.top=u||"",r.style.left=d||"",r.style.width=c||"",r.style.height=l||""}}};return()=>{const r=s.group?bu:Ba;return Fo(r,{name:s.disabled?"":e,css:!s.disabled,...s.group?void 0:{mode:s.mode},...s.disabled?{}:o},i.default)}}})}function n0(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"in-out";return st()({name:e,props:{mode:{type:String,default:n},disabled:Boolean,group:Boolean},setup(s,a){let{slots:i}=a;const o=s.group?bu:Ba;return()=>Fo(o,{name:s.disabled?"":e,css:!s.disabled,...s.disabled?{}:t},i.default)}})}function s0(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const n=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)?"width":"height",s=Pg(`offset-${n}`);return{onBeforeEnter(o){o._parent=o.parentNode,o._initialStyle={transition:o.style.transition,overflow:o.style.overflow,[n]:o.style[n]}},onEnter(o){const r=o._initialStyle;if(!r)return;o.style.setProperty("transition","none","important"),o.style.overflow="hidden";const f=`${o[s]}px`;o.style[n]="0",o.offsetHeight,o.style.transition=r.transition,e&&o._parent&&o._parent.classList.add(e),requestAnimationFrame(()=>{o.style[n]=f})},onAfterEnter:i,onEnterCancelled:i,onLeave(o){o._initialStyle={transition:"",overflow:o.style.overflow,[n]:o.style[n]},o.style.overflow="hidden",o.style[n]=`${o[s]}px`,o.offsetHeight,requestAnimationFrame(()=>o.style[n]="0")},onAfterLeave:a,onLeaveCancelled:a};function a(o){e&&o._parent&&o._parent.classList.remove(e),i(o)}function i(o){if(!o._initialStyle)return;const r=o._initialStyle[n];o.style.overflow=o._initialStyle.overflow,r!=null&&(o.style[n]=r),delete o._initialStyle}}const lP=ze({target:[Object,Array]},"v-dialog-transition"),Sc=new WeakMap,md=st()({name:"VDialogTransition",props:lP(),setup(e,t){let{slots:n}=t;const s={onBeforeEnter(a){a.style.pointerEvents="none",a.style.visibility="hidden"},async onEnter(a,i){await new Promise(m=>requestAnimationFrame(m)),await new Promise(m=>requestAnimationFrame(m)),a.style.visibility="";const o=Vm(e.target,a),{x:r,y:f,sx:u,sy:d,speed:c}=o;Sc.set(a,o);const l=ai(a,[{transform:`translate(${r}px, ${f}px) scale(${u}, ${d})`,opacity:0},{}],{duration:225*c,easing:Gg});Dm(a)?.forEach(m=>{ai(m,[{opacity:0},{opacity:0,offset:.33},{}],{duration:225*2*c,easing:bo})}),l.finished.then(()=>i())},onAfterEnter(a){a.style.removeProperty("pointer-events")},onBeforeLeave(a){a.style.pointerEvents="none"},async onLeave(a,i){await new Promise(m=>requestAnimationFrame(m));let o;!Sc.has(a)||Array.isArray(e.target)||e.target.offsetParent||e.target.getClientRects().length?o=Vm(e.target,a):o=Sc.get(a);const{x:r,y:f,sx:u,sy:d,speed:c}=o;ai(a,[{},{transform:`translate(${r}px, ${f}px) scale(${u}, ${d})`,opacity:0}],{duration:125*c,easing:Kg}).finished.then(()=>i()),Dm(a)?.forEach(m=>{ai(m,[{},{opacity:0,offset:.2},{opacity:0}],{duration:125*2*c,easing:bo})})},onAfterLeave(a){a.style.removeProperty("pointer-events")}};return()=>e.target?j(Ba,ot({name:"dialog-transition"},s,{css:!1}),n):j(Ba,{name:"dialog-transition"},n)}});function Dm(e){const t=e.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list")?.children;return t&&[...t]}function Vm(e,t){const n=dv(e),s=ku(t),[a,i]=getComputedStyle(t).transformOrigin.split(" ").map(_=>parseFloat(_)),[o,r]=getComputedStyle(t).getPropertyValue("--v-overlay-anchor-origin").split(" ");let f=n.left+n.width/2;o==="left"||r==="left"?f-=n.width/2:(o==="right"||r==="right")&&(f+=n.width/2);let u=n.top+n.height/2;o==="top"||r==="top"?u-=n.height/2:(o==="bottom"||r==="bottom")&&(u+=n.height/2);const d=n.width/s.width,c=n.height/s.height,l=Math.max(1,d,c),m=d/l||0,v=c/l||0,C=s.width*s.height/(window.innerWidth*window.innerHeight),b=C>.12?Math.min(1.5,(C-.12)*10+1):1;return{x:f-(a+s.left),y:u-(i+s.top),sx:m,sy:v,speed:b}}ns("fab-transition","center center","out-in");ns("dialog-bottom-transition");ns("dialog-top-transition");const Nm=ns("fade-transition"),cP=ns("scale-transition");ns("scroll-x-transition");ns("scroll-x-reverse-transition");ns("scroll-y-transition");ns("scroll-y-reverse-transition");ns("slide-x-transition");ns("slide-x-reverse-transition");const a0=ns("slide-y-transition");ns("slide-y-reverse-transition");const i0=n0("expand-transition",s0()),o0=n0("expand-x-transition",s0("",!0)),uP=ze({defaults:Object,disabled:Boolean,reset:[Number,String],root:[Boolean,String],scoped:Boolean},"VDefaultsProvider"),cn=st(!1)({name:"VDefaultsProvider",props:uP(),setup(e,t){let{slots:n}=t;const{defaults:s,disabled:a,reset:i,root:o,scoped:r}=$g(e);return ua(s,{reset:i,root:o,scoped:r,disabled:a}),()=>n.default?.()}}),Ts=ze({height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},"dimension");function xs(e){return{dimensionStyles:se(()=>{const n={},s=_t(e.height),a=_t(e.maxHeight),i=_t(e.maxWidth),o=_t(e.minHeight),r=_t(e.minWidth),f=_t(e.width);return s!=null&&(n.height=s),a!=null&&(n.maxHeight=a),i!=null&&(n.maxWidth=i),o!=null&&(n.minHeight=o),r!=null&&(n.minWidth=r),f!=null&&(n.width=f),n})}}function dP(e){return{aspectStyles:se(()=>{const t=Number(e.aspectRatio);return t?{paddingBottom:String(1/t*100)+"%"}:void 0})}}const r0=ze({aspectRatio:[String,Number],contentClass:null,inline:Boolean,...St(),...Ts()},"VResponsive"),jm=st()({name:"VResponsive",props:r0(),setup(e,t){let{slots:n}=t;const{aspectStyles:s}=dP(e),{dimensionStyles:a}=xs(e);return ut(()=>h("div",{class:Se(["v-responsive",{"v-responsive--inline":e.inline},e.class]),style:it([a.value,e.style])},[h("div",{class:"v-responsive__sizer",style:it(s.value)},null),n.additional?.(),n.default&&h("div",{class:Se(["v-responsive__content",e.contentClass])},[n.default()])])),{}}});function vd(e){return Su(()=>{const t=La(e),n=[],s={};if(t.background)if(Vd(t.background)){if(s.backgroundColor=t.background,!t.text&&Xg(t.background)){const a=Zg(t.background);if(a.a==null||a.a===1){const i=Qg(a);s.color=i,s.caretColor=i}}}else n.push(`bg-${t.background}`);return t.text&&(Vd(t.text)?(s.color=t.text,s.caretColor=t.text):n.push(`text-${t.text}`)),{colorClasses:n,colorStyles:s}})}function Us(e){const{colorClasses:t,colorStyles:n}=vd(()=>({text:La(e)}));return{textColorClasses:t,textColorStyles:n}}function Qn(e){const{colorClasses:t,colorStyles:n}=vd(()=>({background:La(e)}));return{backgroundColorClasses:t,backgroundColorStyles:n}}const ss=ze({rounded:{type:[Boolean,Number,String],default:void 0},tile:Boolean},"rounded");function as(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:da();return{roundedClasses:se(()=>{const s=Mc(e)?e.value:e.rounded,a=Mc(e)?e.value:e.tile,i=[];if(s===!0||s==="")i.push(`${t}--rounded`);else if(typeof s=="string"||s===0)for(const o of String(s).split(" "))i.push(`rounded-${o}`);else(a||s===!1)&&i.push("rounded-0");return i})}}const Yo=ze({transition:{type:null,default:"fade-transition",validator:e=>e!==!0}},"transition"),na=(e,t)=>{let{slots:n}=t;const{transition:s,disabled:a,group:i,...o}=e,{component:r=i?bu:Ba,...f}=Or(s)?s:{};let u;return Or(s)?u=ot(f,Jg({disabled:a,group:i}),o):u=ot({name:a||!s?"":s},o),Fo(r,u,n)};function fP(e,t){if(!Cu)return;const n=t.modifiers||{},s=t.value,{handler:a,options:i}=typeof s=="object"?s:{handler:s,options:{}},o=new IntersectionObserver(function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],f=arguments.length>1?arguments[1]:void 0;const u=e._observe?.[t.instance.$.uid];if(!u)return;const d=r.some(c=>c.isIntersecting);a&&(!n.quiet||u.init)&&(!n.once||d||u.init)&&a(d,r,f),d&&n.once?l0(e,t):u.init=!0},i);e._observe=Object(e._observe),e._observe[t.instance.$.uid]={init:!1,observer:o},o.observe(e)}function l0(e,t){const n=e._observe?.[t.instance.$.uid];n&&(n.observer.unobserve(e),delete e._observe[t.instance.$.uid])}const Fi={mounted:fP,unmounted:l0},mP=ze({absolute:Boolean,alt:String,cover:Boolean,color:String,draggable:{type:[Boolean,String],default:void 0},eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},crossorigin:String,referrerpolicy:String,srcset:String,position:String,...r0(),...St(),...ss(),...Yo()},"VImg"),El=st()({name:"VImg",directives:{vIntersect:Fi},props:mP(),emits:{loadstart:e=>!0,load:e=>!0,error:e=>!0},setup(e,t){let{emit:n,slots:s}=t;const{backgroundColorClasses:a,backgroundColorStyles:i}=Qn(()=>e.color),{roundedClasses:o}=as(e),r=ms("VImg"),f=dt(""),u=ie(),d=dt(e.eager?"loading":"idle"),c=dt(),l=dt(),m=se(()=>e.src&&typeof e.src=="object"?{src:e.src.src,srcset:e.srcset||e.src.srcset,lazySrc:e.lazySrc||e.src.lazySrc,aspect:Number(e.aspectRatio||e.src.aspect||0)}:{src:e.src,srcset:e.srcset,lazySrc:e.lazySrc,aspect:Number(e.aspectRatio||0)}),v=se(()=>m.value.aspect||c.value/l.value||0);rt(()=>e.src,()=>{C(d.value!=="idle")}),rt(v,(w,k)=>{!w&&k&&u.value&&P(u.value)}),tl(()=>C());function C(w){if(!(e.eager&&w)&&!(Cu&&!w&&!e.eager)){if(d.value="loading",m.value.lazySrc){const k=new Image;k.src=m.value.lazySrc,P(k,null)}m.value.src&&Yt(()=>{n("loadstart",u.value?.currentSrc||m.value.src),setTimeout(()=>{if(!r.isUnmounted)if(u.value?.complete){if(u.value.naturalWidth||_(),d.value==="error")return;v.value||P(u.value,null),d.value==="loading"&&b()}else v.value||P(u.value),g()})})}}function b(){r.isUnmounted||(g(),P(u.value),d.value="loaded",n("load",u.value?.currentSrc||m.value.src))}function _(){r.isUnmounted||(d.value="error",n("error",u.value?.currentSrc||m.value.src))}function g(){const w=u.value;w&&(f.value=w.currentSrc||w.src)}let R=-1;qn(()=>{clearTimeout(R)});function P(w){let k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;const M=()=>{if(clearTimeout(R),r.isUnmounted)return;const{naturalHeight:x,naturalWidth:F}=w;x||F?(c.value=F,l.value=x):!w.complete&&d.value==="loading"&&k!=null?R=window.setTimeout(M,k):(w.currentSrc.endsWith(".svg")||w.currentSrc.startsWith("data:image/svg+xml"))&&(c.value=1,l.value=1)};M()}const S=je(()=>({"v-img__img--cover":e.cover,"v-img__img--contain":!e.cover})),L=()=>{if(!m.value.src||d.value==="idle")return null;const w=h("img",{class:Se(["v-img__img",S.value]),style:{objectPosition:e.position},crossorigin:e.crossorigin,src:m.value.src,srcset:m.value.srcset,alt:e.alt,referrerpolicy:e.referrerpolicy,draggable:e.draggable,sizes:e.sizes,ref:u,onLoad:b,onError:_},null),k=s.sources?.();return j(na,{transition:e.transition,appear:!0},{default:()=>[an(k?h("picture",{class:"v-img__picture"},[k,w]):w,[[js,d.value==="loaded"]])]})},I=()=>j(na,{transition:e.transition},{default:()=>[m.value.lazySrc&&d.value!=="loaded"&&h("img",{class:Se(["v-img__img","v-img__img--preload",S.value]),style:{objectPosition:e.position},crossorigin:e.crossorigin,src:m.value.lazySrc,alt:e.alt,referrerpolicy:e.referrerpolicy,draggable:e.draggable},null)]}),T=()=>s.placeholder?j(na,{transition:e.transition,appear:!0},{default:()=>[(d.value==="loading"||d.value==="error"&&!s.error)&&h("div",{class:"v-img__placeholder"},[s.placeholder()])]}):null,E=()=>s.error?j(na,{transition:e.transition,appear:!0},{default:()=>[d.value==="error"&&h("div",{class:"v-img__error"},[s.error()])]}):null,y=()=>e.gradient?h("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${e.gradient})`}},null):null,A=dt(!1);{const w=rt(v,k=>{k&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{A.value=!0})}),w())})}return ut(()=>{const w=jm.filterProps(e);return an(j(jm,ot({class:["v-img",{"v-img--absolute":e.absolute,"v-img--booting":!A.value},a.value,o.value,e.class],style:[{width:_t(e.width==="auto"?c.value:e.width)},i.value,e.style]},w,{aspectRatio:v.value,"aria-label":e.alt,role:e.alt?"img":void 0}),{additional:()=>h(Je,null,[j(L,null,null),j(I,null,null),j(y,null,null),j(T,null,null),j(E,null,null)]),default:s.default}),[[Fi,{handler:C,options:e.options},null,{once:!0}]])}),{currentSrc:f,image:u,state:d,naturalWidth:c,naturalHeight:l}}}),Zs=ze({border:[Boolean,Number,String]},"border");function Qs(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:da();return{borderClasses:se(()=>{const s=e.border;return s===!0||s===""?`${t}--border`:typeof s=="string"||s===0?String(s).split(" ").map(a=>`border-${a}`):[]})}}const ga=ze({elevation:{type:[Number,String],validator(e){const t=parseInt(e);return!isNaN(t)&&t>=0&&t<=24}}},"elevation");function pa(e){return{elevationClasses:je(()=>{const n=Mc(e)?e.value:e.elevation;return n==null?[]:[`elevation-${n}`]})}}const vP=[null,"prominent","default","comfortable","compact"],c0=ze({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>vP.includes(e)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...Zs(),...St(),...ga(),...ss(),...en({tag:"header"}),...fn()},"VToolbar"),lu=st()({name:"VToolbar",props:c0(),setup(e,t){let{slots:n}=t;const{backgroundColorClasses:s,backgroundColorStyles:a}=Qn(()=>e.color),{borderClasses:i}=Qs(e),{elevationClasses:o}=pa(e),{roundedClasses:r}=as(e),{themeClasses:f}=bn(e),{rtlClasses:u}=fs(),d=dt(!!(e.extended||n.extension?.())),c=se(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),l=se(()=>d.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return ua({VBtn:{variant:"text"}}),ut(()=>{const m=!!(e.title||n.title),v=!!(n.image||e.image),C=n.extension?.();return d.value=!!(e.extended||C),j(e.tag,{class:Se(["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},s.value,i.value,o.value,r.value,f.value,u.value,e.class]),style:it([a.value,e.style])},{default:()=>[v&&h("div",{key:"image",class:"v-toolbar__image"},[n.image?j(cn,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},n.image):j(El,{key:"image-img",cover:!0,src:e.image},null)]),j(cn,{defaults:{VTabs:{height:_t(c.value)}}},{default:()=>[h("div",{class:"v-toolbar__content",style:{height:_t(c.value)}},[n.prepend&&h("div",{class:"v-toolbar__prepend"},[n.prepend?.()]),m&&j(t0,{key:"title",text:e.title},{text:n.title}),n.default?.(),n.append&&h("div",{class:"v-toolbar__append"},[n.append?.()])])]}),j(cn,{defaults:{VTabs:{height:_t(l.value)}}},{default:()=>[j(i0,null,{default:()=>[d.value&&h("div",{class:"v-toolbar__extension",style:{height:_t(l.value)}},[C])]})]})]})}),{contentHeight:c,extensionHeight:l}}}),hP=ze({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function gP(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:n}=t;let s=0,a=0;const i=ie(null),o=dt(0),r=dt(0),f=dt(0),u=dt(!1),d=dt(!1),c=se(()=>Number(e.scrollThreshold)),l=se(()=>ys((c.value-o.value)/c.value||0)),m=()=>{const v=i.value;if(!v||n&&!n.value)return;s=o.value,o.value="window"in v?v.pageYOffset:v.scrollTop;const C=v instanceof Window?document.documentElement.scrollHeight:v.scrollHeight;if(a!==C){a=C;return}d.value=o.value<s,f.value=Math.abs(o.value-c.value)};return rt(d,()=>{r.value=r.value||o.value}),rt(u,()=>{r.value=0}),sn(()=>{rt(()=>e.scrollTarget,v=>{const C=v?document.querySelector(v):window;C&&C!==i.value&&(i.value?.removeEventListener("scroll",m),i.value=C,i.value.addEventListener("scroll",m,{passive:!0}))},{immediate:!0})}),qn(()=>{i.value?.removeEventListener("scroll",m)}),n&&rt(n,m,{immediate:!0}),{scrollThreshold:c,currentScroll:o,currentThreshold:f,isScrollActive:u,scrollRatio:l,isScrollingUp:d,savedScroll:r}}function Ko(){const e=dt(!1);return sn(()=>{window.requestAnimationFrame(()=>{e.value=!0})}),{ssrBootStyles:je(()=>e.value?void 0:{transition:"none !important"}),isBooted:yu(e)}}const pP=ze({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...c0(),...mv(),...hP(),height:{type:[Number,String],default:64}},"VAppBar"),_P=st()({name:"VAppBar",props:pP(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const s=ie(),a=Zt(e,"modelValue"),i=se(()=>{const g=new Set(e.scrollBehavior?.split(" ")??[]);return{hide:g.has("hide"),fullyHide:g.has("fully-hide"),inverted:g.has("inverted"),collapse:g.has("collapse"),elevate:g.has("elevate"),fadeImage:g.has("fade-image")}}),o=se(()=>{const g=i.value;return g.hide||g.fullyHide||g.inverted||g.collapse||g.elevate||g.fadeImage||!a.value}),{currentScroll:r,scrollThreshold:f,isScrollingUp:u,scrollRatio:d}=gP(e,{canScroll:o}),c=je(()=>i.value.hide||i.value.fullyHide),l=se(()=>e.collapse||i.value.collapse&&(i.value.inverted?d.value>0:d.value===0)),m=se(()=>e.flat||i.value.fullyHide&&!a.value||i.value.elevate&&(i.value.inverted?r.value>0:r.value===0)),v=se(()=>i.value.fadeImage?i.value.inverted?1-d.value:d.value:void 0),C=se(()=>{if(i.value.hide&&i.value.inverted)return 0;const g=s.value?.contentHeight??0,R=s.value?.extensionHeight??0;return c.value?r.value<f.value||i.value.fullyHide?g+R:g:g+R});ws(()=>!!e.scrollBehavior,()=>{ds(()=>{c.value?i.value.inverted?a.value=r.value>f.value:a.value=u.value||r.value<f.value:a.value=!0})});const{ssrBootStyles:b}=Ko(),{layoutItemStyles:_}=fv({id:e.name,order:se(()=>parseInt(e.order,10)),position:je(()=>e.location),layoutSize:C,elementSize:dt(void 0),active:a,absolute:je(()=>e.absolute)});return ut(()=>{const g=lu.filterProps(e);return j(lu,ot({ref:s,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{..._.value,"--v-toolbar-image-opacity":v.value,height:void 0,...b.value},e.style]},g,{collapse:l.value,flat:m.value}),n)}),{}}}),bP=[null,"default","comfortable","compact"],Es=ze({density:{type:String,default:"default",validator:e=>bP.includes(e)}},"density");function Js(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:da();return{densityClasses:je(()=>`${t}--density-${e.density}`)}}const yP=["elevated","flat","tonal","outlined","text","plain"];function Go(e,t){return h(Je,null,[e&&h("span",{key:"overlay",class:Se(`${t}__overlay`)},null),h("span",{key:"underlay",class:Se(`${t}__underlay`)},null)])}const Va=ze({color:String,variant:{type:String,default:"elevated",validator:e=>yP.includes(e)}},"variant");function Xo(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:da();const n=je(()=>{const{variant:i}=La(e);return`${t}--variant-${i}`}),{colorClasses:s,colorStyles:a}=vd(()=>{const{variant:i,color:o}=La(e);return{[["elevated","flat"].includes(i)?"background":"text"]:o}});return{colorClasses:s,colorStyles:a,variantClasses:n}}const u0=ze({baseColor:String,divided:Boolean,...Zs(),...St(),...Es(),...ga(),...ss(),...en(),...fn(),...Va()},"VBtnGroup"),Hm=st()({name:"VBtnGroup",props:u0(),setup(e,t){let{slots:n}=t;const{themeClasses:s}=bn(e),{densityClasses:a}=Js(e),{borderClasses:i}=Qs(e),{elevationClasses:o}=pa(e),{roundedClasses:r}=as(e);ua({VBtn:{height:"auto",baseColor:je(()=>e.baseColor),color:je(()=>e.color),density:je(()=>e.density),flat:!0,variant:je(()=>e.variant)}}),ut(()=>j(e.tag,{class:Se(["v-btn-group",{"v-btn-group--divided":e.divided},s.value,i.value,a.value,o.value,r.value,e.class]),style:it(e.style)},n))}}),hd=ze({modelValue:{type:null,default:void 0},multiple:Boolean,mandatory:[Boolean,String],max:Number,selectedClass:String,disabled:Boolean},"group"),gd=ze({value:null,disabled:Boolean,selectedClass:String},"group-item");function pd(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const s=ms("useGroupItem");if(!s)throw new Error("[Vuetify] useGroupItem composable must be used inside a component setup function");const a=Ys();Ks(Symbol.for(`${t.description}:id`),a);const i=ts(t,null);if(!i){if(!n)return i;throw new Error(`[Vuetify] Could not find useGroup injection with symbol ${t.description}`)}const o=je(()=>e.value),r=se(()=>!!(i.disabled.value||e.disabled));i.register({id:a,value:o,disabled:r},s),qn(()=>{i.unregister(a)});const f=se(()=>i.isSelected(a)),u=se(()=>i.items.value[0].id===a),d=se(()=>i.items.value[i.items.value.length-1].id===a),c=se(()=>f.value&&[i.selectedClass.value,e.selectedClass]);return rt(f,l=>{s.emit("group:selected",{value:l})},{flush:"sync"}),{id:a,isSelected:f,isFirst:u,isLast:d,toggle:()=>i.select(a,!f.value),select:l=>i.select(a,l),selectedClass:c,value:o,disabled:r,group:i}}function Rl(e,t){let n=!1;const s=Ii([]),a=Zt(e,"modelValue",[],l=>l==null?[]:d0(s,ks(l)),l=>{const m=kP(s,l);return e.multiple?m:m[0]}),i=ms("useGroup");function o(l,m){const v=l,C=Symbol.for(`${t.description}:id`),_=ep(C,i?.vnode).indexOf(m);At(v.value)==null&&(v.value=_,v.useIndexAsValue=!0),_>-1?s.splice(_,0,v):s.push(v)}function r(l){if(n)return;f();const m=s.findIndex(v=>v.id===l);s.splice(m,1)}function f(){const l=s.find(m=>!m.disabled);l&&e.mandatory==="force"&&!a.value.length&&(a.value=[l.id])}sn(()=>{f()}),qn(()=>{n=!0}),Fg(()=>{for(let l=0;l<s.length;l++)s[l].useIndexAsValue&&(s[l].value=l)});function u(l,m){const v=s.find(C=>C.id===l);if(!(m&&v?.disabled))if(e.multiple){const C=a.value.slice(),b=C.findIndex(g=>g===l),_=~b;if(m=m??!_,_&&e.mandatory&&C.length<=1||!_&&e.max!=null&&C.length+1>e.max)return;b<0&&m?C.push(l):b>=0&&!m&&C.splice(b,1),a.value=C}else{const C=a.value.includes(l);if(e.mandatory&&C||!C&&!m)return;a.value=m??!C?[l]:[]}}function d(l){if(e.multiple,a.value.length){const m=a.value[0],v=s.findIndex(_=>_.id===m);let C=(v+l)%s.length,b=s[C];for(;b.disabled&&C!==v;)C=(C+l)%s.length,b=s[C];if(b.disabled)return;a.value=[s[C].id]}else{const m=s.find(v=>!v.disabled);m&&(a.value=[m.id])}}const c={register:o,unregister:r,selected:a,select:u,disabled:je(()=>e.disabled),prev:()=>d(s.length-1),next:()=>d(1),isSelected:l=>a.value.includes(l),selectedClass:je(()=>e.selectedClass),items:je(()=>s),getItemIndex:l=>wP(s,l)};return Ks(t,c),c}function wP(e,t){const n=d0(e,[t]);return n.length?e.findIndex(s=>s.id===n[0]):-1}function d0(e,t){const n=[];return t.forEach(s=>{const a=e.find(o=>sa(s,o.value)),i=e[s];a?.value!=null?n.push(a.id):i!=null&&n.push(i.id)}),n}function kP(e,t){const n=[];return t.forEach(s=>{const a=e.findIndex(i=>i.id===s);if(~a){const i=e[a];n.push(i.value!=null?i.value:a)}}),n}const f0=Symbol.for("vuetify:v-btn-toggle"),SP=ze({...u0(),...hd()},"VBtnToggle");st()({name:"VBtnToggle",props:SP(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{isSelected:s,next:a,prev:i,select:o,selected:r}=Rl(e,f0);return ut(()=>{const f=Hm.filterProps(e);return j(Hm,ot({class:["v-btn-toggle",e.class]},f,{style:e.style}),{default:()=>[n.default?.({isSelected:s,next:a,prev:i,select:o,selected:r})]})}),{next:a,prev:i,select:o}}});const CP=["x-small","small","default","large","x-large"],Zo=ze({size:{type:[String,Number],default:"default"}},"size");function Qo(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:da();return Su(()=>{const n=e.size;let s,a;return tp(CP,n)?s=`${t}--size-${n}`:n&&(a={width:_t(n),height:_t(n)}),{sizeClasses:s,sizeStyles:a}})}const AP=ze({color:String,disabled:Boolean,start:Boolean,end:Boolean,icon:Dt,opacity:[String,Number],...St(),...Zo(),...en({tag:"i"}),...fn()},"VIcon"),pn=st()({name:"VIcon",props:AP(),setup(e,t){let{attrs:n,slots:s}=t;const a=dt(),{themeClasses:i}=np(),{iconData:o}=sp(()=>a.value||e.icon),{sizeClasses:r}=Qo(e),{textColorClasses:f,textColorStyles:u}=Us(()=>e.color);return ut(()=>{const d=s.default?.();d&&(a.value=ap(d).filter(l=>l.type===Dg&&l.children&&typeof l.children=="string")[0]?.children);const c=!!(n.onClick||n.onClickOnce);return j(o.value.component,{tag:e.tag,icon:o.value.icon,class:Se(["v-icon","notranslate",i.value,r.value,f.value,{"v-icon--clickable":c,"v-icon--disabled":e.disabled,"v-icon--start":e.start,"v-icon--end":e.end},e.class]),style:it([{"--v-icon-opacity":e.opacity},r.value?void 0:{fontSize:_t(e.size),height:_t(e.size),width:_t(e.size)},u.value,e.style]),role:c?"button":void 0,"aria-hidden":!c,tabindex:c?e.disabled?-1:0:void 0},{default:()=>[d]})}),{}}});function m0(e,t){const n=ie(),s=dt(!1);if(Cu){const a=new IntersectionObserver(i=>{s.value=!!i.find(o=>o.isIntersecting)},t);Fn(()=>{a.disconnect()}),rt(n,(i,o)=>{o&&(a.unobserve(o),s.value=!1),i&&a.observe(i)},{flush:"post"})}return{intersectionRef:n,isIntersecting:s}}const TP=ze({bgColor:String,color:String,indeterminate:[Boolean,String],modelValue:{type:[Number,String],default:0},rotate:{type:[Number,String],default:0},width:{type:[Number,String],default:4},...St(),...Zo(),...en({tag:"div"}),...fn()},"VProgressCircular"),_d=st()({name:"VProgressCircular",props:TP(),setup(e,t){let{slots:n}=t;const s=20,a=2*Math.PI*s,i=ie(),{themeClasses:o}=bn(e),{sizeClasses:r,sizeStyles:f}=Qo(e),{textColorClasses:u,textColorStyles:d}=Us(()=>e.color),{textColorClasses:c,textColorStyles:l}=Us(()=>e.bgColor),{intersectionRef:m,isIntersecting:v}=m0(),{resizeRef:C,contentRect:b}=yo(),_=je(()=>ys(parseFloat(e.modelValue),0,100)),g=je(()=>Number(e.width)),R=je(()=>f.value?Number(e.size):b.value?b.value.width:Math.max(g.value,32)),P=je(()=>s/(1-g.value/R.value)*2),S=je(()=>g.value/R.value*P.value),L=je(()=>_t((100-_.value)/100*a));return ds(()=>{m.value=i.value,C.value=i.value}),ut(()=>j(e.tag,{ref:i,class:Se(["v-progress-circular",{"v-progress-circular--indeterminate":!!e.indeterminate,"v-progress-circular--visible":v.value,"v-progress-circular--disable-shrink":e.indeterminate==="disable-shrink"},o.value,r.value,u.value,e.class]),style:it([f.value,d.value,e.style]),role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":e.indeterminate?void 0:_.value},{default:()=>[h("svg",{style:{transform:`rotate(calc(-90deg + ${Number(e.rotate)}deg))`},xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${P.value} ${P.value}`},[h("circle",{class:Se(["v-progress-circular__underlay",c.value]),style:it(l.value),fill:"transparent",cx:"50%",cy:"50%",r:s,"stroke-width":S.value,"stroke-dasharray":a,"stroke-dashoffset":0},null),h("circle",{class:"v-progress-circular__overlay",fill:"transparent",cx:"50%",cy:"50%",r:s,"stroke-width":S.value,"stroke-dasharray":a,"stroke-dashoffset":L.value},null)]),n.default&&h("div",{class:"v-progress-circular__content"},[n.default({value:_.value})])]})),{}}}),zm={center:"center",top:"bottom",bottom:"top",left:"right",right:"left"},Ml=ze({location:String},"location");function Il(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2?arguments[2]:void 0;const{isRtl:s}=fs();return{locationStyles:se(()=>{if(!e.location)return{};const{side:i,align:o}=Ic(e.location.split(" ").length>1?e.location:`${e.location} center`,s.value);function r(u){return n?n(u):0}const f={};return i!=="center"&&(t?f[zm[i]]=`calc(100% - ${r(i)}px)`:f[i]=0),o!=="center"?t?f[zm[o]]=`calc(100% - ${r(o)}px)`:f[o]=0:(i==="center"?f.top=f.left="50%":f[{top:"left",bottom:"left",left:"top",right:"top"}[i]]="50%",f.transform={top:"translateX(-50%)",bottom:"translateX(-50%)",left:"translateY(-50%)",right:"translateY(-50%)",center:"translate(-50%, -50%)"}[i]),f})}}const xP=ze({absolute:Boolean,active:{type:Boolean,default:!0},bgColor:String,bgOpacity:[Number,String],bufferValue:{type:[Number,String],default:0},bufferColor:String,bufferOpacity:[Number,String],clickable:Boolean,color:String,height:{type:[Number,String],default:4},indeterminate:Boolean,max:{type:[Number,String],default:100},modelValue:{type:[Number,String],default:0},opacity:[Number,String],reverse:Boolean,stream:Boolean,striped:Boolean,roundedBar:Boolean,...St(),...Ml({location:"top"}),...ss(),...en(),...fn()},"VProgressLinear"),v0=st()({name:"VProgressLinear",props:xP(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const s=Zt(e,"modelValue"),{isRtl:a,rtlClasses:i}=fs(),{themeClasses:o}=bn(e),{locationStyles:r}=Il(e),{textColorClasses:f,textColorStyles:u}=Us(()=>e.color),{backgroundColorClasses:d,backgroundColorStyles:c}=Qn(()=>e.bgColor||e.color),{backgroundColorClasses:l,backgroundColorStyles:m}=Qn(()=>e.bufferColor||e.bgColor||e.color),{backgroundColorClasses:v,backgroundColorStyles:C}=Qn(()=>e.color),{roundedClasses:b}=as(e),{intersectionRef:_,isIntersecting:g}=m0(),R=se(()=>parseFloat(e.max)),P=se(()=>parseFloat(e.height)),S=se(()=>ys(parseFloat(e.bufferValue)/R.value*100,0,100)),L=se(()=>ys(parseFloat(s.value)/R.value*100,0,100)),I=se(()=>a.value!==e.reverse),T=se(()=>e.indeterminate?"fade-transition":"slide-x-transition"),E=Cn&&window.matchMedia?.("(forced-colors: active)").matches;function y(A){if(!_.value)return;const{left:w,right:k,width:M}=_.value.getBoundingClientRect(),x=I.value?M-A.clientX+(k-M):A.clientX-w;s.value=Math.round(x/M*R.value)}return ut(()=>j(e.tag,{ref:_,class:Se(["v-progress-linear",{"v-progress-linear--absolute":e.absolute,"v-progress-linear--active":e.active&&g.value,"v-progress-linear--reverse":I.value,"v-progress-linear--rounded":e.rounded,"v-progress-linear--rounded-bar":e.roundedBar,"v-progress-linear--striped":e.striped},b.value,o.value,i.value,e.class]),style:it([{bottom:e.location==="bottom"?0:void 0,top:e.location==="top"?0:void 0,height:e.active?_t(P.value):0,"--v-progress-linear-height":_t(P.value),...e.absolute?r.value:{}},e.style]),role:"progressbar","aria-hidden":e.active?"false":"true","aria-valuemin":"0","aria-valuemax":e.max,"aria-valuenow":e.indeterminate?void 0:Math.min(parseFloat(s.value),R.value),onClick:e.clickable&&y},{default:()=>[e.stream&&h("div",{key:"stream",class:Se(["v-progress-linear__stream",f.value]),style:{...u.value,[I.value?"left":"right"]:_t(-P.value),borderTop:`${_t(P.value/2)} dotted`,opacity:parseFloat(e.bufferOpacity),top:`calc(50% - ${_t(P.value/4)})`,width:_t(100-S.value,"%"),"--v-progress-linear-stream-to":_t(P.value*(I.value?1:-1))}},null),h("div",{class:Se(["v-progress-linear__background",E?void 0:d.value]),style:it([c.value,{opacity:parseFloat(e.bgOpacity),width:e.stream?0:void 0}])},null),h("div",{class:Se(["v-progress-linear__buffer",E?void 0:l.value]),style:it([m.value,{opacity:parseFloat(e.bufferOpacity),width:_t(S.value,"%")}])},null),j(Ba,{name:T.value},{default:()=>[e.indeterminate?h("div",{class:"v-progress-linear__indeterminate"},[["long","short"].map(A=>h("div",{key:A,class:Se(["v-progress-linear__indeterminate",A,E?void 0:v.value]),style:it(C.value)},null))]):h("div",{class:Se(["v-progress-linear__determinate",E?void 0:v.value]),style:it([C.value,{width:_t(L.value,"%")}])},null)]}),n.default&&h("div",{class:"v-progress-linear__content"},[n.default({value:L.value,buffer:S.value})])]})),{}}}),bd=ze({loading:[Boolean,String]},"loader");function Bl(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:da();return{loaderClasses:je(()=>({[`${t}--loading`]:e.loading}))}}function yd(e,t){let{slots:n}=t;return h("div",{class:Se(`${e.name}__loader`)},[n.default?.({color:e.color,isActive:e.active})||j(v0,{absolute:e.absolute,active:e.active,color:e.color,height:"2",indeterminate:!0},null)])}const EP=["static","relative","fixed","absolute","sticky"],wd=ze({position:{type:String,validator:e=>EP.includes(e)}},"position");function kd(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:da();return{positionClasses:je(()=>e.position?`${t}--${e.position}`:void 0)}}function RP(){const e=ms("useRoute");return se(()=>e?.proxy?.$route)}function h0(){return ms("useRouter")?.proxy?.$router}function Ll(e,t){const n=Vg("RouterLink"),s=je(()=>!!(e.href||e.to)),a=se(()=>s?.value||Nd(t,"click")||Nd(e,"click"));if(typeof n=="string"||!("useLink"in n)){const d=je(()=>e.href);return{isLink:s,isClickable:a,href:d,linkProps:Ii({href:d})}}const i=n.useLink({to:je(()=>e.to||""),replace:je(()=>e.replace)}),o=se(()=>e.to?i:void 0),r=RP(),f=se(()=>o.value?e.exact?r.value?o.value.isExactActive?.value&&sa(o.value.route.value.query,r.value.query):o.value.isExactActive?.value??!1:o.value.isActive?.value??!1:!1),u=se(()=>e.to?o.value?.route.value.href:e.href);return{isLink:s,isClickable:a,isActive:f,route:o.value?.route,navigate:o.value?.navigate,href:u,linkProps:Ii({href:u,"aria-current":je(()=>f.value?"page":void 0)})}}const Ol=ze({href:String,replace:Boolean,to:[String,Object],exact:Boolean},"router");let Cc=!1;function MP(e,t){let n=!1,s,a;Cn&&e?.beforeEach&&(Yt(()=>{window.addEventListener("popstate",i),s=e.beforeEach((o,r,f)=>{Cc?n?t(f):f():setTimeout(()=>n?t(f):f()),Cc=!0}),a=e?.afterEach(()=>{Cc=!1})}),Fn(()=>{window.removeEventListener("popstate",i),s?.(),a?.()}));function i(o){o.state?.replaced||(n=!0,setTimeout(()=>n=!1))}}function IP(e,t){rt(()=>e.isActive?.value,n=>{e.isLink.value&&n!=null&&t&&Yt(()=>{t(n)})},{immediate:!0})}const cu=Symbol("rippleStop"),BP=80;function Um(e,t){e.style.transform=t,e.style.webkitTransform=t}function uu(e){return e.constructor.name==="TouchEvent"}function g0(e){return e.constructor.name==="KeyboardEvent"}const LP=function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=0,a=0;if(!g0(e)){const c=t.getBoundingClientRect(),l=uu(e)?e.touches[e.touches.length-1]:e;s=l.clientX-c.left,a=l.clientY-c.top}let i=0,o=.3;t._ripple?.circle?(o=.15,i=t.clientWidth/2,i=n.center?i:i+Math.sqrt((s-i)**2+(a-i)**2)/4):i=Math.sqrt(t.clientWidth**2+t.clientHeight**2)/2;const r=`${(t.clientWidth-i*2)/2}px`,f=`${(t.clientHeight-i*2)/2}px`,u=n.center?r:`${s-i}px`,d=n.center?f:`${a-i}px`;return{radius:i,scale:o,x:u,y:d,centerX:r,centerY:f}},Xr={show(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!t?._ripple?.enabled)return;const s=document.createElement("span"),a=document.createElement("span");s.appendChild(a),s.className="v-ripple__container",n.class&&(s.className+=` ${n.class}`);const{radius:i,scale:o,x:r,y:f,centerX:u,centerY:d}=LP(e,t,n),c=`${i*2}px`;a.className="v-ripple__animation",a.style.width=c,a.style.height=c,t.appendChild(s);const l=window.getComputedStyle(t);l&&l.position==="static"&&(t.style.position="relative",t.dataset.previousPosition="static"),a.classList.add("v-ripple__animation--enter"),a.classList.add("v-ripple__animation--visible"),Um(a,`translate(${r}, ${f}) scale3d(${o},${o},${o})`),a.dataset.activated=String(performance.now()),requestAnimationFrame(()=>{requestAnimationFrame(()=>{a.classList.remove("v-ripple__animation--enter"),a.classList.add("v-ripple__animation--in"),Um(a,`translate(${u}, ${d}) scale3d(1,1,1)`)})})},hide(e){if(!e?._ripple?.enabled)return;const t=e.getElementsByClassName("v-ripple__animation");if(t.length===0)return;const n=t[t.length-1];if(n.dataset.isHiding)return;n.dataset.isHiding="true";const s=performance.now()-Number(n.dataset.activated),a=Math.max(250-s,0);setTimeout(()=>{n.classList.remove("v-ripple__animation--in"),n.classList.add("v-ripple__animation--out"),setTimeout(()=>{e.getElementsByClassName("v-ripple__animation").length===1&&e.dataset.previousPosition&&(e.style.position=e.dataset.previousPosition,delete e.dataset.previousPosition),n.parentNode?.parentNode===e&&e.removeChild(n.parentNode)},300)},a)}};function p0(e){return typeof e>"u"||!!e}function Io(e){const t={},n=e.currentTarget;if(!(!n?._ripple||n._ripple.touched||e[cu])){if(e[cu]=!0,uu(e))n._ripple.touched=!0,n._ripple.isTouch=!0;else if(n._ripple.isTouch)return;if(t.center=n._ripple.centered||g0(e),n._ripple.class&&(t.class=n._ripple.class),uu(e)){if(n._ripple.showTimerCommit)return;n._ripple.showTimerCommit=()=>{Xr.show(e,n,t)},n._ripple.showTimer=window.setTimeout(()=>{n?._ripple?.showTimerCommit&&(n._ripple.showTimerCommit(),n._ripple.showTimerCommit=null)},BP)}else Xr.show(e,n,t)}}function qm(e){e[cu]=!0}function Xn(e){const t=e.currentTarget;if(t?._ripple){if(window.clearTimeout(t._ripple.showTimer),e.type==="touchend"&&t._ripple.showTimerCommit){t._ripple.showTimerCommit(),t._ripple.showTimerCommit=null,t._ripple.showTimer=window.setTimeout(()=>{Xn(e)});return}window.setTimeout(()=>{t._ripple&&(t._ripple.touched=!1)}),Xr.hide(t)}}function _0(e){const t=e.currentTarget;t?._ripple&&(t._ripple.showTimerCommit&&(t._ripple.showTimerCommit=null),window.clearTimeout(t._ripple.showTimer))}let Bo=!1;function b0(e){!Bo&&(e.keyCode===jd.enter||e.keyCode===jd.space)&&(Bo=!0,Io(e))}function y0(e){Bo=!1,Xn(e)}function w0(e){Bo&&(Bo=!1,Xn(e))}function k0(e,t,n){const{value:s,modifiers:a}=t,i=p0(s);if(i||Xr.hide(e),e._ripple=e._ripple??{},e._ripple.enabled=i,e._ripple.centered=a.center,e._ripple.circle=a.circle,Or(s)&&s.class&&(e._ripple.class=s.class),i&&!n){if(a.stop){e.addEventListener("touchstart",qm,{passive:!0}),e.addEventListener("mousedown",qm);return}e.addEventListener("touchstart",Io,{passive:!0}),e.addEventListener("touchend",Xn,{passive:!0}),e.addEventListener("touchmove",_0,{passive:!0}),e.addEventListener("touchcancel",Xn),e.addEventListener("mousedown",Io),e.addEventListener("mouseup",Xn),e.addEventListener("mouseleave",Xn),e.addEventListener("keydown",b0),e.addEventListener("keyup",y0),e.addEventListener("blur",w0),e.addEventListener("dragstart",Xn,{passive:!0})}else!i&&n&&S0(e)}function S0(e){e.removeEventListener("mousedown",Io),e.removeEventListener("touchstart",Io),e.removeEventListener("touchend",Xn),e.removeEventListener("touchmove",_0),e.removeEventListener("touchcancel",Xn),e.removeEventListener("mouseup",Xn),e.removeEventListener("mouseleave",Xn),e.removeEventListener("keydown",b0),e.removeEventListener("keyup",y0),e.removeEventListener("dragstart",Xn),e.removeEventListener("blur",w0)}function OP(e,t){k0(e,t,!1)}function PP(e){delete e._ripple,S0(e)}function $P(e,t){if(t.value===t.oldValue)return;const n=p0(t.oldValue);k0(e,t,n)}const qs={mounted:OP,unmounted:PP,updated:$P},C0=ze({active:{type:Boolean,default:void 0},activeColor:String,baseColor:String,symbol:{type:null,default:f0},flat:Boolean,icon:[Boolean,String,Function,Object],prependIcon:Dt,appendIcon:Dt,block:Boolean,readonly:Boolean,slim:Boolean,stacked:Boolean,ripple:{type:[Boolean,Object],default:!0},text:{type:[String,Number,Boolean],default:void 0},...Zs(),...St(),...Es(),...Ts(),...ga(),...gd(),...bd(),...Ml(),...wd(),...ss(),...Ol(),...Zo(),...en({tag:"button"}),...fn(),...Va({variant:"elevated"})},"VBtn"),Lo=st()({name:"VBtn",props:C0(),emits:{"group:selected":e=>!0},setup(e,t){let{attrs:n,slots:s}=t;const{themeClasses:a}=bn(e),{borderClasses:i}=Qs(e),{densityClasses:o}=Js(e),{dimensionStyles:r}=xs(e),{elevationClasses:f}=pa(e),{loaderClasses:u}=Bl(e),{locationStyles:d}=Il(e),{positionClasses:c}=kd(e),{roundedClasses:l}=as(e),{sizeClasses:m,sizeStyles:v}=Qo(e),C=pd(e,e.symbol,!1),b=Ll(e,n),_=se(()=>e.active!==void 0?e.active:b.isLink.value?b.isActive?.value:C?.isSelected.value),g=je(()=>_.value?e.activeColor??e.color:e.color),R=se(()=>({color:C?.isSelected.value&&(!b.isLink.value||b.isActive?.value)||!C||b.isActive?.value?g.value??e.baseColor:e.baseColor,variant:e.variant})),{colorClasses:P,colorStyles:S,variantClasses:L}=Xo(R),I=se(()=>C?.disabled.value||e.disabled),T=je(()=>e.variant==="elevated"&&!(e.disabled||e.flat||e.border)),E=se(()=>{if(!(e.value===void 0||typeof e.value=="symbol"))return Object(e.value)===e.value?JSON.stringify(e.value,null,0):e.value});function y(A){I.value||b.isLink.value&&(A.metaKey||A.ctrlKey||A.shiftKey||A.button!==0||n.target==="_blank")||(b.navigate?.(A),C?.toggle())}return IP(b,C?.select),ut(()=>{const A=b.isLink.value?"a":e.tag,w=!!(e.prependIcon||s.prepend),k=!!(e.appendIcon||s.append),M=!!(e.icon&&e.icon!==!0);return an(j(A,ot({type:A==="a"?void 0:"button",class:["v-btn",C?.selectedClass.value,{"v-btn--active":_.value,"v-btn--block":e.block,"v-btn--disabled":I.value,"v-btn--elevated":T.value,"v-btn--flat":e.flat,"v-btn--icon":!!e.icon,"v-btn--loading":e.loading,"v-btn--readonly":e.readonly,"v-btn--slim":e.slim,"v-btn--stacked":e.stacked},a.value,i.value,P.value,o.value,f.value,u.value,c.value,l.value,m.value,L.value,e.class],style:[S.value,r.value,d.value,v.value,e.style],"aria-busy":e.loading?!0:void 0,disabled:I.value||void 0,tabindex:e.loading||e.readonly?-1:void 0,onClick:y,value:E.value},b.linkProps),{default:()=>[Go(!0,"v-btn"),!e.icon&&w&&h("span",{key:"prepend",class:"v-btn__prepend"},[s.prepend?j(cn,{key:"prepend-defaults",disabled:!e.prependIcon,defaults:{VIcon:{icon:e.prependIcon}}},s.prepend):j(pn,{key:"prepend-icon",icon:e.prependIcon},null)]),h("span",{class:"v-btn__content","data-no-activator":""},[!s.default&&M?j(pn,{key:"content-icon",icon:e.icon},null):j(cn,{key:"content-defaults",disabled:!M,defaults:{VIcon:{icon:e.icon}}},{default:()=>[s.default?.()??Q(e.text)]})]),!e.icon&&k&&h("span",{key:"append",class:"v-btn__append"},[s.append?j(cn,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VIcon:{icon:e.appendIcon}}},s.append):j(pn,{key:"append-icon",icon:e.appendIcon},null)]),!!e.loading&&h("span",{key:"loader",class:"v-btn__loader"},[s.loader?.()??j(_d,{color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0,width:"2"},null)])]}),[[qs,!I.value&&e.ripple,"",{center:!!e.icon}]])}),{group:C}}}),FP=ze({start:Boolean,end:Boolean,icon:Dt,image:String,text:String,...Zs(),...St(),...Es(),...ss(),...Zo(),...en(),...fn(),...Va({variant:"flat"})},"VAvatar"),di=st()({name:"VAvatar",props:FP(),setup(e,t){let{slots:n}=t;const{themeClasses:s}=bn(e),{borderClasses:a}=Qs(e),{colorClasses:i,colorStyles:o,variantClasses:r}=Xo(e),{densityClasses:f}=Js(e),{roundedClasses:u}=as(e),{sizeClasses:d,sizeStyles:c}=Qo(e);return ut(()=>j(e.tag,{class:Se(["v-avatar",{"v-avatar--start":e.start,"v-avatar--end":e.end},s.value,a.value,i.value,f.value,u.value,d.value,r.value,e.class]),style:it([o.value,c.value,e.style])},{default:()=>[n.default?j(cn,{key:"content-defaults",defaults:{VImg:{cover:!0,src:e.image},VIcon:{icon:e.icon}}},{default:()=>[n.default()]}):e.image?j(El,{key:"image",src:e.image,alt:"",cover:!0},null):e.icon?j(pn,{key:"icon",icon:e.icon},null):e.text,Go(!1,"v-avatar")]})),{}}}),DP=ze({text:String,onClick:Un(),...St(),...fn()},"VLabel"),Sd=st()({name:"VLabel",props:DP(),setup(e,t){let{slots:n}=t;return ut(()=>h("label",{class:Se(["v-label",{"v-label--clickable":!!e.onClick},e.class]),style:it(e.style),onClick:e.onClick},[e.text,n.default?.()])),{}}}),A0=Symbol.for("vuetify:selection-control-group"),Cd=ze({color:String,disabled:{type:Boolean,default:null},defaultsTarget:String,error:Boolean,id:String,inline:Boolean,falseIcon:Dt,trueIcon:Dt,ripple:{type:[Boolean,Object],default:!0},multiple:{type:Boolean,default:null},name:String,readonly:{type:Boolean,default:null},modelValue:null,type:String,valueComparator:{type:Function,default:sa},...St(),...Es(),...fn()},"SelectionControlGroup"),VP=ze({...Cd({defaultsTarget:"VSelectionControl"})},"VSelectionControlGroup"),NP=st()({name:"VSelectionControlGroup",props:VP(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const s=Zt(e,"modelValue"),a=Ys(),i=je(()=>e.id||`v-selection-control-group-${a}`),o=je(()=>e.name||i.value),r=new Set;return Ks(A0,{modelValue:s,forceUpdate:()=>{r.forEach(f=>f())},onForceUpdate:f=>{r.add(f),Fn(()=>{r.delete(f)})}}),ua({[e.defaultsTarget]:{color:je(()=>e.color),disabled:je(()=>e.disabled),density:je(()=>e.density),error:je(()=>e.error),inline:je(()=>e.inline),modelValue:s,multiple:je(()=>!!e.multiple||e.multiple==null&&Array.isArray(s.value)),name:o,falseIcon:je(()=>e.falseIcon),trueIcon:je(()=>e.trueIcon),readonly:je(()=>e.readonly),ripple:je(()=>e.ripple),type:je(()=>e.type),valueComparator:je(()=>e.valueComparator)}}),ut(()=>h("div",{class:Se(["v-selection-control-group",{"v-selection-control-group--inline":e.inline},e.class]),style:it(e.style),role:e.type==="radio"?"radiogroup":void 0},[n.default?.()])),{}}}),Pl=ze({label:String,baseColor:String,trueValue:null,falseValue:null,value:null,...St(),...Cd()},"VSelectionControl");function jP(e){const t=ts(A0,void 0),{densityClasses:n}=Js(e),s=Zt(e,"modelValue"),a=se(()=>e.trueValue!==void 0?e.trueValue:e.value!==void 0?e.value:!0),i=se(()=>e.falseValue!==void 0?e.falseValue:!1),o=se(()=>!!e.multiple||e.multiple==null&&Array.isArray(s.value)),r=se({get(){const m=t?t.modelValue.value:s.value;return o.value?ks(m).some(v=>e.valueComparator(v,a.value)):e.valueComparator(m,a.value)},set(m){if(e.readonly)return;const v=m?a.value:i.value;let C=v;o.value&&(C=m?[...ks(s.value),v]:ks(s.value).filter(b=>!e.valueComparator(b,a.value))),t?t.modelValue.value=C:s.value=C}}),{textColorClasses:f,textColorStyles:u}=Us(()=>{if(!(e.error||e.disabled))return r.value?e.color:e.baseColor}),{backgroundColorClasses:d,backgroundColorStyles:c}=Qn(()=>r.value&&!e.error&&!e.disabled?e.color:e.baseColor),l=se(()=>r.value?e.trueIcon:e.falseIcon);return{group:t,densityClasses:n,trueValue:a,falseValue:i,model:r,textColorClasses:f,textColorStyles:u,backgroundColorClasses:d,backgroundColorStyles:c,icon:l}}const fi=st()({name:"VSelectionControl",directives:{vRipple:qs},inheritAttrs:!1,props:Pl(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:s}=t;const{group:a,densityClasses:i,icon:o,model:r,textColorClasses:f,textColorStyles:u,backgroundColorClasses:d,backgroundColorStyles:c,trueValue:l}=jP(e),m=Ys(),v=dt(!1),C=dt(!1),b=ie(),_=je(()=>e.id||`input-${m}`),g=je(()=>!e.disabled&&!e.readonly);a?.onForceUpdate(()=>{b.value&&(b.value.checked=r.value)});function R(I){g.value&&(v.value=!0,Pr(I.target,":focus-visible")!==!1&&(C.value=!0))}function P(){v.value=!1,C.value=!1}function S(I){I.stopPropagation()}function L(I){if(!g.value){b.value&&(b.value.checked=r.value);return}e.readonly&&a&&Yt(()=>a.forceUpdate()),r.value=I.target.checked}return ut(()=>{const I=s.label?s.label({label:e.label,props:{for:_.value}}):e.label,[T,E]=Vi(n),y=h("input",ot({ref:b,checked:r.value,disabled:!!e.disabled,id:_.value,onBlur:P,onFocus:R,onInput:L,"aria-disabled":!!e.disabled,"aria-label":e.label,type:e.type,value:l.value,name:e.name,"aria-checked":e.type==="checkbox"?r.value:void 0},E),null);return h("div",ot({class:["v-selection-control",{"v-selection-control--dirty":r.value,"v-selection-control--disabled":e.disabled,"v-selection-control--error":e.error,"v-selection-control--focused":v.value,"v-selection-control--focus-visible":C.value,"v-selection-control--inline":e.inline},i.value,e.class]},T,{style:e.style}),[h("div",{class:Se(["v-selection-control__wrapper",f.value]),style:it(u.value)},[s.default?.({backgroundColorClasses:d,backgroundColorStyles:c}),an(h("div",{class:Se(["v-selection-control__input"])},[s.input?.({model:r,textColorClasses:f,textColorStyles:u,backgroundColorClasses:d,backgroundColorStyles:c,inputNode:y,icon:o.value,props:{onFocus:R,onBlur:P,id:_.value}})??h(Je,null,[o.value&&j(pn,{key:"icon",icon:o.value},null),y])]),[[qs,e.ripple&&[!e.disabled&&!e.readonly,null,["center","circle"]]]])]),I&&j(Sd,{for:_.value,onClick:S},{default:()=>[I]})])}),{isFocused:v,input:b}}}),T0=ze({indeterminate:Boolean,indeterminateIcon:{type:Dt,default:"$checkboxIndeterminate"},...Pl({falseIcon:"$checkboxOff",trueIcon:"$checkboxOn"})},"VCheckboxBtn"),du=st()({name:"VCheckboxBtn",props:T0(),emits:{"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,t){let{slots:n}=t;const s=Zt(e,"indeterminate"),a=Zt(e,"modelValue");function i(f){s.value&&(s.value=!1)}const o=je(()=>s.value?e.indeterminateIcon:e.falseIcon),r=je(()=>s.value?e.indeterminateIcon:e.trueIcon);return ut(()=>{const f=fa(fi.filterProps(e),["modelValue"]);return j(fi,ot(f,{modelValue:a.value,"onUpdate:modelValue":[u=>a.value=u,i],class:["v-checkbox-btn",e.class],style:e.style,type:"checkbox",falseIcon:o.value,trueIcon:r.value,"aria-checked":s.value?"mixed":void 0}),n)}),{}}});function x0(e){const{t}=nl();function n(s){let{name:a,color:i,...o}=s;const r={prepend:"prependAction",prependInner:"prependAction",append:"appendAction",appendInner:"appendAction",clear:"clear"}[a],f=e[`onClick:${a}`];function u(c){c.key!=="Enter"&&c.key!==" "||(c.preventDefault(),c.stopPropagation(),Au(f,new PointerEvent("click",c)))}const d=f&&r?t(`$vuetify.input.${r}`,e.label??""):void 0;return j(pn,ot({icon:e[`${a}Icon`],"aria-label":d,onClick:f,onKeydown:u,color:i},o),null)}return{InputIcon:n}}const HP=ze({active:Boolean,color:String,messages:{type:[Array,String],default:()=>[]},...St(),...Yo({transition:{component:a0,leaveAbsolute:!0,group:!0}})},"VMessages"),zP=st()({name:"VMessages",props:HP(),setup(e,t){let{slots:n}=t;const s=se(()=>ks(e.messages)),{textColorClasses:a,textColorStyles:i}=Us(()=>e.color);return ut(()=>j(na,{transition:e.transition,tag:"div",class:Se(["v-messages",a.value,e.class]),style:it([i.value,e.style])},{default:()=>[e.active&&s.value.map((o,r)=>h("div",{class:"v-messages__message",key:`${r}-${s.value}`},[n.message?n.message({message:o}):o]))]})),{}}}),E0=ze({focused:Boolean,"onUpdate:focused":Un()},"focus");function Jo(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:da();const n=Zt(e,"focused"),s=je(()=>({[`${t}--focused`]:n.value}));function a(){n.value=!0}function i(){n.value=!1}return{focusClasses:s,isFocused:n,focus:a,blur:i}}const UP=Symbol.for("vuetify:form");function R0(e){const t=ts(UP,null);return{...t,isReadonly:se(()=>!!(e?.readonly??t?.isReadonly.value)),isDisabled:se(()=>!!(e?.disabled??t?.isDisabled.value))}}const qP=Symbol.for("vuetify:rules");function WP(e){const t=ts(qP,null);return t?t(e):je(e)}const YP=ze({disabled:{type:Boolean,default:null},error:Boolean,errorMessages:{type:[Array,String],default:()=>[]},maxErrors:{type:[Number,String],default:1},name:String,label:String,readonly:{type:Boolean,default:null},rules:{type:Array,default:()=>[]},modelValue:null,validateOn:String,validationValue:null,...E0()},"validation");function KP(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:da(),n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ys();const s=Zt(e,"modelValue"),a=se(()=>e.validationValue===void 0?s.value:e.validationValue),i=R0(e),o=WP(()=>e.rules),r=ie([]),f=dt(!0),u=se(()=>!!(ks(s.value===""?null:s.value).length||ks(a.value===""?null:a.value).length)),d=se(()=>e.errorMessages?.length?ks(e.errorMessages).concat(r.value).slice(0,Math.max(0,Number(e.maxErrors))):r.value),c=se(()=>{let P=(e.validateOn??i.validateOn?.value)||"input";P==="lazy"&&(P="input lazy"),P==="eager"&&(P="input eager");const S=new Set(P?.split(" ")??[]);return{input:S.has("input"),blur:S.has("blur")||S.has("input")||S.has("invalid-input"),invalidInput:S.has("invalid-input"),lazy:S.has("lazy"),eager:S.has("eager")}}),l=se(()=>e.error||e.errorMessages?.length?!1:e.rules.length?f.value?r.value.length||c.value.lazy?null:!0:!r.value.length:!0),m=dt(!1),v=se(()=>({[`${t}--error`]:l.value===!1,[`${t}--dirty`]:u.value,[`${t}--disabled`]:i.isDisabled.value,[`${t}--readonly`]:i.isReadonly.value})),C=ms("validation"),b=se(()=>e.name??At(n));tl(()=>{i.register?.({id:b.value,vm:C,validate:R,reset:_,resetValidation:g})}),qn(()=>{i.unregister?.(b.value)}),sn(async()=>{c.value.lazy||await R(!c.value.eager),i.update?.(b.value,l.value,d.value)}),ws(()=>c.value.input||c.value.invalidInput&&l.value===!1,()=>{rt(a,()=>{if(a.value!=null)R();else if(e.focused){const P=rt(()=>e.focused,S=>{S||R(),P()})}})}),ws(()=>c.value.blur,()=>{rt(()=>e.focused,P=>{P||R()})}),rt([l,d],()=>{i.update?.(b.value,l.value,d.value)});async function _(){s.value=null,await Yt(),await g()}async function g(){f.value=!0,c.value.lazy?r.value=[]:await R(!c.value.eager)}async function R(){let P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const S=[];m.value=!0;for(const L of o.value){if(S.length>=Number(e.maxErrors??1))break;const T=await(typeof L=="function"?L:()=>L)(a.value);if(T!==!0){if(T!==!1&&typeof T!="string"){console.warn(`${T} is not a valid value. Rule functions must return boolean true or a string.`);continue}S.push(T||"")}}return r.value=S,m.value=!1,f.value=P,r.value}return{errorMessages:d,isDirty:u,isDisabled:i.isDisabled,isReadonly:i.isReadonly,isPristine:f,isValid:l,isValidating:m,reset:_,resetValidation:g,validate:R,validationClasses:v}}const zi=ze({id:String,appendIcon:Dt,baseColor:String,centerAffix:{type:Boolean,default:!0},color:String,glow:Boolean,iconColor:[Boolean,String],prependIcon:Dt,hideDetails:[Boolean,String],hideSpinButtons:Boolean,hint:String,persistentHint:Boolean,messages:{type:[Array,String],default:()=>[]},direction:{type:String,default:"horizontal",validator:e=>["horizontal","vertical"].includes(e)},"onClick:prepend":Un(),"onClick:append":Un(),...St(),...Es(),...Tu(Ts(),["maxWidth","minWidth","width"]),...fn(),...YP()},"VInput"),Ws=st()({name:"VInput",props:{...zi()},emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:s,emit:a}=t;const{densityClasses:i}=Js(e),{dimensionStyles:o}=xs(e),{themeClasses:r}=bn(e),{rtlClasses:f}=fs(),{InputIcon:u}=x0(e),d=Ys(),c=se(()=>e.id||`input-${d}`),l=se(()=>`${c.value}-messages`),{errorMessages:m,isDirty:v,isDisabled:C,isReadonly:b,isPristine:_,isValid:g,isValidating:R,reset:P,resetValidation:S,validate:L,validationClasses:I}=KP(e,"v-input",c),T=se(()=>({id:c,messagesId:l,isDirty:v,isDisabled:C,isReadonly:b,isPristine:_,isValid:g,isValidating:R,reset:P,resetValidation:S,validate:L})),E=je(()=>e.error||e.disabled?void 0:e.focused?e.color:e.baseColor),y=je(()=>{if(e.iconColor)return e.iconColor===!0?E.value:e.iconColor}),A=se(()=>e.errorMessages?.length||!_.value&&m.value.length?m.value:e.hint&&(e.persistentHint||e.focused)?e.hint:e.messages);return ut(()=>{const w=!!(s.prepend||e.prependIcon),k=!!(s.append||e.appendIcon),M=A.value.length>0,x=!e.hideDetails||e.hideDetails==="auto"&&(M||!!s.details);return h("div",{class:Se(["v-input",`v-input--${e.direction}`,{"v-input--center-affix":e.centerAffix,"v-input--focused":e.focused,"v-input--glow":e.glow,"v-input--hide-spin-buttons":e.hideSpinButtons},i.value,r.value,f.value,I.value,e.class]),style:it([o.value,e.style])},[w&&h("div",{key:"prepend",class:"v-input__prepend"},[s.prepend?.(T.value),e.prependIcon&&j(u,{key:"prepend-icon",name:"prepend",color:y.value},null)]),s.default&&h("div",{class:"v-input__control"},[s.default?.(T.value)]),k&&h("div",{key:"append",class:"v-input__append"},[e.appendIcon&&j(u,{key:"append-icon",name:"append",color:y.value},null),s.append?.(T.value)]),x&&h("div",{id:l.value,class:"v-input__details",role:"alert","aria-live":"polite"},[j(zP,{active:M,messages:A.value},{message:s.message}),s.details?.(T.value)])])}),{reset:P,resetValidation:S,validate:L,isValid:g,errorMessages:m}}}),GP=ze({...zi(),...fa(T0(),["inline"])},"VCheckbox"),XP=st()({name:"VCheckbox",inheritAttrs:!1,props:GP(),emits:{"update:modelValue":e=>!0,"update:focused":e=>!0},setup(e,t){let{attrs:n,slots:s}=t;const a=Zt(e,"modelValue"),{isFocused:i,focus:o,blur:r}=Jo(e),f=Ys();return ut(()=>{const[u,d]=Vi(n),c=Ws.filterProps(e),l=du.filterProps(e);return j(Ws,ot({class:["v-checkbox",e.class]},u,c,{modelValue:a.value,"onUpdate:modelValue":m=>a.value=m,id:e.id||`checkbox-${f}`,focused:i.value,style:e.style}),{...s,default:m=>{let{id:v,messagesId:C,isDisabled:b,isReadonly:_,isValid:g}=m;return j(du,ot(l,{id:v.value,"aria-describedby":C.value,disabled:b.value,readonly:_.value},d,{error:g.value===!1,modelValue:a.value,"onUpdate:modelValue":R=>a.value=R,onFocus:o,onBlur:r}),s)}})}),{}}});function ZP(e){let{selectedElement:t,containerElement:n,isRtl:s,isHorizontal:a}=e;const i=Oo(a,n),o=M0(a,s,n),r=Oo(a,t),f=I0(a,t),u=r*.4;return o>f?f-u:o+i<f+r?f-i+r+u:o}function QP(e){let{selectedElement:t,containerElement:n,isHorizontal:s}=e;const a=Oo(s,n),i=I0(s,t),o=Oo(s,t);return i-a/2+o/2}function Wm(e,t){return t?.[e?"scrollWidth":"scrollHeight"]||0}function JP(e,t){return t?.[e?"clientWidth":"clientHeight"]||0}function M0(e,t,n){if(!n)return 0;const{scrollLeft:s,offsetWidth:a,scrollWidth:i}=n;return e?t?i-a+s:s:n.scrollTop}function Oo(e,t){return t?.[e?"offsetWidth":"offsetHeight"]||0}function I0(e,t){return t?.[e?"offsetLeft":"offsetTop"]||0}const e$=Symbol.for("vuetify:v-slide-group"),Ad=ze({centerActive:Boolean,direction:{type:String,default:"horizontal"},symbol:{type:null,default:e$},nextIcon:{type:Dt,default:"$next"},prevIcon:{type:Dt,default:"$prev"},showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["always","desktop","mobile"].includes(e)},...St(),...vv({mobile:null}),...en(),...hd({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),Zr=st()({name:"VSlideGroup",props:Ad(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{isRtl:s}=fs(),{displayClasses:a,mobile:i}=sl(e),o=Rl(e,e.symbol),r=dt(!1),f=dt(0),u=dt(0),d=dt(0),c=se(()=>e.direction==="horizontal"),{resizeRef:l,contentRect:m}=yo(),{resizeRef:v,contentRect:C}=yo(),b=ip(),_=se(()=>({container:l.el,duration:200,easing:"easeOutQuart"})),g=se(()=>o.selected.value.length?o.items.value.findIndex(B=>B.id===o.selected.value[0]):-1),R=se(()=>o.selected.value.length?o.items.value.findIndex(B=>B.id===o.selected.value[o.selected.value.length-1]):-1);if(Cn){let B=-1;rt(()=>[o.selected.value,m.value,C.value,c.value],()=>{cancelAnimationFrame(B),B=requestAnimationFrame(()=>{if(m.value&&C.value){const U=c.value?"width":"height";u.value=m.value[U],d.value=C.value[U],r.value=u.value+1<d.value}if(g.value>=0&&v.el){const U=v.el.children[R.value];S(U,e.centerActive)}})})}const P=dt(!1);function S(B,U){let $=0;U?$=QP({containerElement:l.el,isHorizontal:c.value,selectedElement:B}):$=ZP({containerElement:l.el,isHorizontal:c.value,isRtl:s.value,selectedElement:B}),L($)}function L(B){if(!Cn||!l.el)return;const U=Oo(c.value,l.el),$=M0(c.value,s.value,l.el);if(!(Wm(c.value,l.el)<=U||Math.abs(B-$)<16)){if(c.value&&s.value&&l.el){const{scrollWidth:re,offsetWidth:G}=l.el;B=re-G-B}c.value?b.horizontal(B,_.value):b(B,_.value)}}function I(B){const{scrollTop:U,scrollLeft:$}=B.target;f.value=c.value?$:U}function T(B){if(P.value=!0,!(!r.value||!v.el)){for(const U of B.composedPath())for(const $ of v.el.children)if($===U){S($);return}}}function E(B){P.value=!1}let y=!1;function A(B){!y&&!P.value&&!(B.relatedTarget&&v.el?.contains(B.relatedTarget))&&x(),y=!1}function w(){y=!0}function k(B){if(!v.el)return;function U($){B.preventDefault(),x($)}c.value?B.key==="ArrowRight"?U(s.value?"prev":"next"):B.key==="ArrowLeft"&&U(s.value?"next":"prev"):B.key==="ArrowDown"?U("next"):B.key==="ArrowUp"&&U("prev"),B.key==="Home"?U("first"):B.key==="End"&&U("last")}function M(B,U){if(!B)return;let $=B;do $=$?.[U==="next"?"nextElementSibling":"previousElementSibling"];while($?.hasAttribute("disabled"));return $}function x(B){if(!v.el)return;let U;if(!B)U=$r(v.el)[0];else if(B==="next"){if(U=M(v.el.querySelector(":focus"),B),!U)return x("first")}else if(B==="prev"){if(U=M(v.el.querySelector(":focus"),B),!U)return x("last")}else B==="first"?(U=v.el.firstElementChild,U?.hasAttribute("disabled")&&(U=M(U,"next"))):B==="last"&&(U=v.el.lastElementChild,U?.hasAttribute("disabled")&&(U=M(U,"prev")));U&&U.focus({preventScroll:!0})}function F(B){const U=c.value&&s.value?-1:1,$=(B==="prev"?-U:U)*u.value;let ee=f.value+$;if(c.value&&s.value&&l.el){const{scrollWidth:re,offsetWidth:G}=l.el;ee+=re-G}L(ee)}const V=se(()=>({next:o.next,prev:o.prev,select:o.select,isSelected:o.isSelected})),D=se(()=>{switch(e.showArrows){case"always":return!0;case"desktop":return!i.value;case!0:return r.value||Math.abs(f.value)>0;case"mobile":return i.value||r.value||Math.abs(f.value)>0;default:return!i.value&&(r.value||Math.abs(f.value)>0)}}),z=se(()=>Math.abs(f.value)>1),p=se(()=>{if(!l.value)return!1;const B=Wm(c.value,l.el),U=JP(c.value,l.el);return B-U-Math.abs(f.value)>1});return ut(()=>j(e.tag,{class:Se(["v-slide-group",{"v-slide-group--vertical":!c.value,"v-slide-group--has-affixes":D.value,"v-slide-group--is-overflowing":r.value},a.value,e.class]),style:it(e.style),tabindex:P.value||o.selected.value.length?-1:0,onFocus:A},{default:()=>[D.value&&h("div",{key:"prev",class:Se(["v-slide-group__prev",{"v-slide-group__prev--disabled":!z.value}]),onMousedown:w,onClick:()=>z.value&&F("prev")},[n.prev?.(V.value)??j(Nm,null,{default:()=>[j(pn,{icon:s.value?e.nextIcon:e.prevIcon},null)]})]),h("div",{key:"container",ref:l,class:"v-slide-group__container",onScroll:I},[h("div",{ref:v,class:"v-slide-group__content",onFocusin:T,onFocusout:E,onKeydown:k},[n.default?.(V.value)])]),D.value&&h("div",{key:"next",class:Se(["v-slide-group__next",{"v-slide-group__next--disabled":!p.value}]),onMousedown:w,onClick:()=>p.value&&F("next")},[n.next?.(V.value)??j(Nm,null,{default:()=>[j(pn,{icon:s.value?e.prevIcon:e.nextIcon},null)]})])]})),{selected:o.selected,scrollTo:F,scrollOffset:f,focus:x,hasPrev:z,hasNext:p}}}),B0=Symbol.for("vuetify:v-chip-group"),t$=ze({baseColor:String,column:Boolean,filter:Boolean,valueComparator:{type:Function,default:sa},...Ad(),...St(),...hd({selectedClass:"v-chip--selected"}),...en(),...fn(),...Va({variant:"tonal"})},"VChipGroup");st()({name:"VChipGroup",props:t$(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:s}=bn(e),{isSelected:a,select:i,next:o,prev:r,selected:f}=Rl(e,B0);return ua({VChip:{baseColor:je(()=>e.baseColor),color:je(()=>e.color),disabled:je(()=>e.disabled),filter:je(()=>e.filter),variant:je(()=>e.variant)}}),ut(()=>{const u=Zr.filterProps(e);return j(Zr,ot(u,{class:["v-chip-group",{"v-chip-group--column":e.column},s.value,e.class],style:e.style}),{default:()=>[n.default?.({isSelected:a,select:i,next:o,prev:r,selected:f.value})]})}),{}}});const n$=ze({activeClass:String,appendAvatar:String,appendIcon:Dt,baseColor:String,closable:Boolean,closeIcon:{type:Dt,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},draggable:Boolean,filter:Boolean,filterIcon:{type:Dt,default:"$complete"},label:Boolean,link:{type:Boolean,default:void 0},pill:Boolean,prependAvatar:String,prependIcon:Dt,ripple:{type:[Boolean,Object],default:!0},text:{type:[String,Number,Boolean],default:void 0},modelValue:{type:Boolean,default:!0},onClick:Un(),onClickOnce:Un(),...Zs(),...St(),...Es(),...ga(),...gd(),...ss(),...Ol(),...Zo(),...en({tag:"span"}),...fn(),...Va({variant:"tonal"})},"VChip"),L0=st()({name:"VChip",directives:{vRipple:qs},props:n$(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0,"group:selected":e=>!0,click:e=>!0},setup(e,t){let{attrs:n,emit:s,slots:a}=t;const{t:i}=nl(),{borderClasses:o}=Qs(e),{densityClasses:r}=Js(e),{elevationClasses:f}=pa(e),{roundedClasses:u}=as(e),{sizeClasses:d}=Qo(e),{themeClasses:c}=bn(e),l=Zt(e,"modelValue"),m=pd(e,B0,!1),v=Ll(e,n),C=je(()=>e.link!==!1&&v.isLink.value),b=se(()=>!e.disabled&&e.link!==!1&&(!!m||e.link||v.isClickable.value)),_=je(()=>({"aria-label":i(e.closeLabel),disabled:e.disabled,onClick(I){I.preventDefault(),I.stopPropagation(),l.value=!1,s("click:close",I)}})),{colorClasses:g,colorStyles:R,variantClasses:P}=Xo(()=>({color:!m||m.isSelected.value?e.color??e.baseColor:e.baseColor,variant:e.variant}));function S(I){s("click",I),b.value&&(v.navigate?.(I),m?.toggle())}function L(I){(I.key==="Enter"||I.key===" ")&&(I.preventDefault(),S(I))}return()=>{const I=v.isLink.value?"a":e.tag,T=!!(e.appendIcon||e.appendAvatar),E=!!(T||a.append),y=!!(a.close||e.closable),A=!!(a.filter||e.filter)&&m,w=!!(e.prependIcon||e.prependAvatar),k=!!(w||a.prepend);return l.value&&an(j(I,ot({class:["v-chip",{"v-chip--disabled":e.disabled,"v-chip--label":e.label,"v-chip--link":b.value,"v-chip--filter":A,"v-chip--pill":e.pill,[`${e.activeClass}`]:e.activeClass&&v.isActive?.value},c.value,o.value,g.value,r.value,f.value,u.value,d.value,P.value,m?.selectedClass.value,e.class],style:[R.value,e.style],disabled:e.disabled||void 0,draggable:e.draggable,tabindex:b.value?0:void 0,onClick:S,onKeydown:b.value&&!C.value&&L},v.linkProps),{default:()=>[Go(b.value,"v-chip"),A&&j(o0,{key:"filter"},{default:()=>[an(h("div",{class:"v-chip__filter"},[a.filter?j(cn,{key:"filter-defaults",disabled:!e.filterIcon,defaults:{VIcon:{icon:e.filterIcon}}},a.filter):j(pn,{key:"filter-icon",icon:e.filterIcon},null)]),[[js,m.isSelected.value]])]}),k&&h("div",{key:"prepend",class:"v-chip__prepend"},[a.prepend?j(cn,{key:"prepend-defaults",disabled:!w,defaults:{VAvatar:{image:e.prependAvatar,start:!0},VIcon:{icon:e.prependIcon,start:!0}}},a.prepend):h(Je,null,[e.prependIcon&&j(pn,{key:"prepend-icon",icon:e.prependIcon,start:!0},null),e.prependAvatar&&j(di,{key:"prepend-avatar",image:e.prependAvatar,start:!0},null)])]),h("div",{class:"v-chip__content","data-no-activator":""},[a.default?.({isSelected:m?.isSelected.value,selectedClass:m?.selectedClass.value,select:m?.select,toggle:m?.toggle,value:m?.value.value,disabled:e.disabled})??Q(e.text)]),E&&h("div",{key:"append",class:"v-chip__append"},[a.append?j(cn,{key:"append-defaults",disabled:!T,defaults:{VAvatar:{end:!0,image:e.appendAvatar},VIcon:{end:!0,icon:e.appendIcon}}},a.append):h(Je,null,[e.appendIcon&&j(pn,{key:"append-icon",end:!0,icon:e.appendIcon},null),e.appendAvatar&&j(di,{key:"append-avatar",end:!0,image:e.appendAvatar},null)])]),y&&h("button",ot({key:"close",class:"v-chip__close",type:"button","data-testid":"close-chip"},_.value),[a.close?j(cn,{key:"close-defaults",defaults:{VIcon:{icon:e.closeIcon,size:"x-small"}}},a.close):j(pn,{key:"close-icon",icon:e.closeIcon,size:"x-small"},null)])]}),[[qs,b.value&&e.ripple,null]])}}}),fu=Symbol.for("vuetify:list");function O0(){const e=ts(fu,{hasPrepend:dt(!1),updateHasPrepend:()=>null}),t={hasPrepend:dt(!1),updateHasPrepend:n=>{n&&(t.hasPrepend.value=n)}};return Ks(fu,t),e}function P0(){return ts(fu,null)}const Td=e=>{const t={activate:n=>{let{id:s,value:a,activated:i}=n;return s=_n(s),e&&!a&&i.size===1&&i.has(s)||(a?i.add(s):i.delete(s)),i},in:(n,s,a)=>{let i=new Set;if(n!=null)for(const o of ks(n))i=t.activate({id:o,value:!0,activated:new Set(i),children:s,parents:a});return i},out:n=>Array.from(n)};return t},$0=e=>{const t=Td(e);return{activate:s=>{let{activated:a,id:i,...o}=s;i=_n(i);const r=a.has(i)?new Set([i]):new Set;return t.activate({...o,id:i,activated:r})},in:(s,a,i)=>{let o=new Set;if(s!=null){const r=ks(s);r.length&&(o=t.in(r.slice(0,1),a,i))}return o},out:(s,a,i)=>t.out(s,a,i)}},s$=e=>{const t=Td(e);return{activate:s=>{let{id:a,activated:i,children:o,...r}=s;return a=_n(a),o.has(a)?i:t.activate({id:a,activated:i,children:o,...r})},in:t.in,out:t.out}},a$=e=>{const t=$0(e);return{activate:s=>{let{id:a,activated:i,children:o,...r}=s;return a=_n(a),o.has(a)?i:t.activate({id:a,activated:i,children:o,...r})},in:t.in,out:t.out}},i$={open:e=>{let{id:t,value:n,opened:s,parents:a}=e;if(n){const i=new Set;i.add(t);let o=a.get(t);for(;o!=null;)i.add(o),o=a.get(o);return i}else return s.delete(t),s},select:()=>null},F0={open:e=>{let{id:t,value:n,opened:s,parents:a}=e;if(n){let i=a.get(t);for(s.add(t);i!=null&&i!==t;)s.add(i),i=a.get(i);return s}else s.delete(t);return s},select:()=>null},o$={open:F0.open,select:e=>{let{id:t,value:n,opened:s,parents:a}=e;if(!n)return s;const i=[];let o=a.get(t);for(;o!=null;)i.push(o),o=a.get(o);return new Set(i)}},xd=e=>{const t={select:n=>{let{id:s,value:a,selected:i}=n;if(s=_n(s),e&&!a){const o=Array.from(i.entries()).reduce((r,f)=>{let[u,d]=f;return d==="on"&&r.push(u),r},[]);if(o.length===1&&o[0]===s)return i}return i.set(s,a?"on":"off"),i},in:(n,s,a)=>{const i=new Map;for(const o of n||[])t.select({id:o,value:!0,selected:i,children:s,parents:a});return i},out:n=>{const s=[];for(const[a,i]of n.entries())i==="on"&&s.push(a);return s}};return t},D0=e=>{const t=xd(e);return{select:s=>{let{selected:a,id:i,...o}=s;i=_n(i);const r=a.has(i)?new Map([[i,a.get(i)]]):new Map;return t.select({...o,id:i,selected:r})},in:(s,a,i)=>s?.length?t.in(s.slice(0,1),a,i):new Map,out:(s,a,i)=>t.out(s,a,i)}},r$=e=>{const t=xd(e);return{select:s=>{let{id:a,selected:i,children:o,...r}=s;return a=_n(a),o.has(a)?i:t.select({id:a,selected:i,children:o,...r})},in:t.in,out:t.out}},l$=e=>{const t=D0(e);return{select:s=>{let{id:a,selected:i,children:o,...r}=s;return a=_n(a),o.has(a)?i:t.select({id:a,selected:i,children:o,...r})},in:t.in,out:t.out}},V0=e=>{const t={select:n=>{let{id:s,value:a,selected:i,children:o,parents:r}=n;s=_n(s);const f=new Map(i),u=[s];for(;u.length;){const c=u.shift();i.set(_n(c),a?"on":"off"),o.has(c)&&u.push(...o.get(c))}let d=_n(r.get(s));for(;d;){const c=o.get(d),l=c.every(v=>i.get(_n(v))==="on"),m=c.every(v=>!i.has(_n(v))||i.get(_n(v))==="off");i.set(d,l?"on":m?"off":"indeterminate"),d=_n(r.get(d))}return e&&!a&&Array.from(i.entries()).reduce((l,m)=>{let[v,C]=m;return C==="on"&&l.push(v),l},[]).length===0?f:i},in:(n,s,a)=>{let i=new Map;for(const o of n||[])i=t.select({id:o,value:!0,selected:i,children:s,parents:a});return i},out:(n,s)=>{const a=[];for(const[i,o]of n.entries())o==="on"&&!s.has(i)&&a.push(i);return a}};return t},c$=e=>{const t=V0(e);return{select:t.select,in:t.in,out:(s,a,i)=>{const o=[];for(const[r,f]of s.entries())if(f==="on"){if(i.has(r)){const u=i.get(r);if(s.get(u)==="on")continue}o.push(r)}return o}}},Po=Symbol.for("vuetify:nested"),N0={id:dt(),root:{register:()=>null,unregister:()=>null,parents:ie(new Map),children:ie(new Map),open:()=>null,openOnSelect:()=>null,activate:()=>null,select:()=>null,activatable:ie(!1),selectable:ie(!1),opened:ie(new Set),activated:ie(new Set),selected:ie(new Map),selectedValues:ie([]),getPath:()=>[]}},u$=ze({activatable:Boolean,selectable:Boolean,activeStrategy:[String,Function,Object],selectStrategy:[String,Function,Object],openStrategy:[String,Object],opened:null,activated:null,selected:null,mandatory:Boolean},"nested"),d$=e=>{let t=!1;const n=ie(new Map),s=ie(new Map),a=Zt(e,"opened",e.opened,v=>new Set(v),v=>[...v.values()]),i=se(()=>{if(typeof e.activeStrategy=="object")return e.activeStrategy;if(typeof e.activeStrategy=="function")return e.activeStrategy(e.mandatory);switch(e.activeStrategy){case"leaf":return s$(e.mandatory);case"single-leaf":return a$(e.mandatory);case"independent":return Td(e.mandatory);case"single-independent":default:return $0(e.mandatory)}}),o=se(()=>{if(typeof e.selectStrategy=="object")return e.selectStrategy;if(typeof e.selectStrategy=="function")return e.selectStrategy(e.mandatory);switch(e.selectStrategy){case"single-leaf":return l$(e.mandatory);case"leaf":return r$(e.mandatory);case"independent":return xd(e.mandatory);case"single-independent":return D0(e.mandatory);case"trunk":return c$(e.mandatory);case"classic":default:return V0(e.mandatory)}}),r=se(()=>{if(typeof e.openStrategy=="object")return e.openStrategy;switch(e.openStrategy){case"list":return o$;case"single":return i$;case"multiple":default:return F0}}),f=Zt(e,"activated",e.activated,v=>i.value.in(v,n.value,s.value),v=>i.value.out(v,n.value,s.value)),u=Zt(e,"selected",e.selected,v=>o.value.in(v,n.value,s.value),v=>o.value.out(v,n.value,s.value));qn(()=>{t=!0});function d(v){const C=[];let b=v;for(;b!=null;)C.unshift(b),b=s.value.get(b);return C}const c=ms("nested"),l=new Set,m={id:dt(),root:{opened:a,activatable:je(()=>e.activatable),selectable:je(()=>e.selectable),activated:f,selected:u,selectedValues:se(()=>{const v=[];for(const[C,b]of u.value.entries())b==="on"&&v.push(C);return v}),register:(v,C,b)=>{if(l.has(v)){d(v).map(String).join(" -> "),d(C).concat(v).map(String).join(" -> ");return}else l.add(v);C&&v!==C&&s.value.set(v,C),b&&n.value.set(v,[]),C!=null&&n.value.set(C,[...n.value.get(C)||[],v])},unregister:v=>{if(t)return;l.delete(v),n.value.delete(v);const C=s.value.get(v);if(C){const b=n.value.get(C)??[];n.value.set(C,b.filter(_=>_!==v))}s.value.delete(v)},open:(v,C,b)=>{c.emit("click:open",{id:v,value:C,path:d(v),event:b});const _=r.value.open({id:v,value:C,opened:new Set(a.value),children:n.value,parents:s.value,event:b});_&&(a.value=_)},openOnSelect:(v,C,b)=>{const _=r.value.select({id:v,value:C,selected:new Map(u.value),opened:new Set(a.value),children:n.value,parents:s.value,event:b});_&&(a.value=_)},select:(v,C,b)=>{c.emit("click:select",{id:v,value:C,path:d(v),event:b});const _=o.value.select({id:v,value:C,selected:new Map(u.value),children:n.value,parents:s.value,event:b});_&&(u.value=_),m.root.openOnSelect(v,C,b)},activate:(v,C,b)=>{if(!e.activatable)return m.root.select(v,!0,b);c.emit("click:activate",{id:v,value:C,path:d(v),event:b});const _=i.value.activate({id:v,value:C,activated:new Set(f.value),children:n.value,parents:s.value,event:b});if(_.size!==f.value.size)f.value=_;else{for(const g of _)if(!f.value.has(g)){f.value=_;return}for(const g of f.value)if(!_.has(g)){f.value=_;return}}},children:n,parents:s,getPath:d}};return Ks(Po,m),m.root},j0=(e,t)=>{const n=ts(Po,N0),s=Symbol("nested item"),a=se(()=>La(e)??s),i={...n,id:a,open:(o,r)=>n.root.open(a.value,o,r),openOnSelect:(o,r)=>n.root.openOnSelect(a.value,o,r),isOpen:se(()=>n.root.opened.value.has(a.value)),parent:se(()=>n.root.parents.value.get(a.value)),activate:(o,r)=>n.root.activate(a.value,o,r),isActivated:se(()=>n.root.activated.value.has(_n(a.value))),select:(o,r)=>n.root.select(a.value,o,r),isSelected:se(()=>n.root.selected.value.get(_n(a.value))==="on"),isIndeterminate:se(()=>n.root.selected.value.get(_n(a.value))==="indeterminate"),isLeaf:se(()=>!n.root.children.value.get(a.value)),isGroupActivator:n.isGroupActivator};return tl(()=>{!n.isGroupActivator&&n.root.register(a.value,n.id.value,t)}),qn(()=>{!n.isGroupActivator&&n.root.unregister(a.value)}),t&&Ks(Po,i),i},f$=()=>{const e=ts(Po,N0);Ks(Po,{...e,isGroupActivator:!0})},m$=op({name:"VListGroupActivator",setup(e,t){let{slots:n}=t;return f$(),()=>n.default?.()}}),v$=ze({activeColor:String,baseColor:String,color:String,collapseIcon:{type:Dt,default:"$collapse"},expandIcon:{type:Dt,default:"$expand"},rawId:[String,Number],prependIcon:Dt,appendIcon:Dt,fluid:Boolean,subgroup:Boolean,title:String,value:null,...St(),...en()},"VListGroup"),Ym=st()({name:"VListGroup",props:v$(),setup(e,t){let{slots:n}=t;const{isOpen:s,open:a,id:i}=j0(()=>e.value,!0),o=se(()=>`v-list-group--id-${String(e.rawId??i.value)}`),r=P0(),{isBooted:f}=Ko();function u(m){["INPUT","TEXTAREA"].includes(m.target?.tagName)||a(!s.value,m)}const d=se(()=>({onClick:u,class:"v-list-group__header",id:o.value})),c=se(()=>s.value?e.collapseIcon:e.expandIcon),l=se(()=>({VListItem:{active:s.value,activeColor:e.activeColor,baseColor:e.baseColor,color:e.color,prependIcon:e.prependIcon||e.subgroup&&c.value,appendIcon:e.appendIcon||!e.subgroup&&c.value,title:e.title,value:e.value}}));return ut(()=>j(e.tag,{class:Se(["v-list-group",{"v-list-group--prepend":r?.hasPrepend.value,"v-list-group--fluid":e.fluid,"v-list-group--subgroup":e.subgroup,"v-list-group--open":s.value},e.class]),style:it(e.style)},{default:()=>[n.activator&&j(cn,{defaults:l.value},{default:()=>[j(m$,null,{default:()=>[n.activator({props:d.value,isOpen:s.value})]})]}),j(na,{transition:{component:i0},disabled:!f.value},{default:()=>[an(h("div",{class:"v-list-group__items",role:"group","aria-labelledby":o.value},[n.default?.()]),[[js,s.value]])]})]})),{isOpen:s}}}),h$=ze({opacity:[Number,String],...St(),...en()},"VListItemSubtitle"),g$=st()({name:"VListItemSubtitle",props:h$(),setup(e,t){let{slots:n}=t;return ut(()=>j(e.tag,{class:Se(["v-list-item-subtitle",e.class]),style:it([{"--v-list-item-subtitle-opacity":e.opacity},e.style])},n)),{}}}),H0=hv("v-list-item-title"),p$=ze({active:{type:Boolean,default:void 0},activeClass:String,activeColor:String,appendAvatar:String,appendIcon:Dt,baseColor:String,disabled:Boolean,lines:[Boolean,String],link:{type:Boolean,default:void 0},nav:Boolean,prependAvatar:String,prependIcon:Dt,ripple:{type:[Boolean,Object],default:!0},slim:Boolean,subtitle:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},value:null,onClick:Un(),onClickOnce:Un(),...Zs(),...St(),...Es(),...Ts(),...ga(),...ss(),...Ol(),...en(),...fn(),...Va({variant:"text"})},"VListItem"),$o=st()({name:"VListItem",directives:{vRipple:qs},props:p$(),emits:{click:e=>!0},setup(e,t){let{attrs:n,slots:s,emit:a}=t;const i=Ll(e,n),o=se(()=>e.value===void 0?i.href.value:e.value),{activate:r,isActivated:f,select:u,isOpen:d,isSelected:c,isIndeterminate:l,isGroupActivator:m,root:v,parent:C,openOnSelect:b,id:_}=j0(o,!1),g=P0(),R=se(()=>e.active!==!1&&(e.active||i.isActive?.value||(v.activatable.value?f.value:c.value))),P=je(()=>e.link!==!1&&i.isLink.value),S=se(()=>!!g&&(v.selectable.value||v.activatable.value||e.value!=null)),L=se(()=>!e.disabled&&e.link!==!1&&(e.link||i.isClickable.value||S.value)),I=je(()=>e.rounded||e.nav),T=je(()=>e.color??e.activeColor),E=je(()=>({color:R.value?T.value??e.baseColor:e.baseColor,variant:e.variant}));rt(()=>i.isActive?.value,ee=>{ee&&y()}),tl(()=>{i.isActive?.value&&y()});function y(){C.value!=null&&v.open(C.value,!0),b(!0)}const{themeClasses:A}=bn(e),{borderClasses:w}=Qs(e),{colorClasses:k,colorStyles:M,variantClasses:x}=Xo(E),{densityClasses:F}=Js(e),{dimensionStyles:V}=xs(e),{elevationClasses:D}=pa(e),{roundedClasses:z}=as(I),p=je(()=>e.lines?`v-list-item--${e.lines}-line`:void 0),B=se(()=>({isActive:R.value,select:u,isOpen:d.value,isSelected:c.value,isIndeterminate:l.value}));function U(ee){a("click",ee),!["INPUT","TEXTAREA"].includes(ee.target?.tagName)&&L.value&&(i.navigate?.(ee),!m&&(v.activatable.value?r(!f.value,ee):(v.selectable.value||e.value!=null)&&u(!c.value,ee)))}function $(ee){const re=ee.target;["INPUT","TEXTAREA"].includes(re.tagName)||(ee.key==="Enter"||ee.key===" ")&&(ee.preventDefault(),ee.target.dispatchEvent(new MouseEvent("click",ee)))}return ut(()=>{const ee=P.value?"a":e.tag,re=s.title||e.title!=null,G=s.subtitle||e.subtitle!=null,ae=!!(e.appendAvatar||e.appendIcon),X=!!(ae||s.append),he=!!(e.prependAvatar||e.prependIcon),we=!!(he||s.prepend);return g?.updateHasPrepend(we),e.activeColor&&rp("active-color",["color","base-color"]),an(j(ee,ot({class:["v-list-item",{"v-list-item--active":R.value,"v-list-item--disabled":e.disabled,"v-list-item--link":L.value,"v-list-item--nav":e.nav,"v-list-item--prepend":!we&&g?.hasPrepend.value,"v-list-item--slim":e.slim,[`${e.activeClass}`]:e.activeClass&&R.value},A.value,w.value,k.value,F.value,D.value,p.value,z.value,x.value,e.class],style:[M.value,V.value,e.style],tabindex:L.value?g?-2:0:void 0,"aria-selected":S.value?v.activatable.value?f.value:v.selectable.value?c.value:R.value:void 0,onClick:U,onKeydown:L.value&&!P.value&&$},i.linkProps),{default:()=>[Go(L.value||R.value,"v-list-item"),we&&h("div",{key:"prepend",class:"v-list-item__prepend"},[s.prepend?j(cn,{key:"prepend-defaults",disabled:!he,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon},VListItemAction:{start:!0}}},{default:()=>[s.prepend?.(B.value)]}):h(Je,null,[e.prependAvatar&&j(di,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&j(pn,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)]),h("div",{class:"v-list-item__spacer"},null)]),h("div",{class:"v-list-item__content","data-no-activator":""},[re&&j(H0,{key:"title"},{default:()=>[s.title?.({title:e.title})??Q(e.title)]}),G&&j(g$,{key:"subtitle"},{default:()=>[s.subtitle?.({subtitle:e.subtitle})??Q(e.subtitle)]}),s.default?.(B.value)]),X&&h("div",{key:"append",class:"v-list-item__append"},[s.append?j(cn,{key:"append-defaults",disabled:!ae,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon},VListItemAction:{end:!0}}},{default:()=>[s.append?.(B.value)]}):h(Je,null,[e.appendIcon&&j(pn,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&j(di,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)]),h("div",{class:"v-list-item__spacer"},null)])]}),[[qs,L.value&&e.ripple]])}),{activate:r,isActivated:f,isGroupActivator:m,isSelected:c,list:g,select:u,root:v,id:_,link:i}}}),_$=ze({color:String,inset:Boolean,sticky:Boolean,title:String,...St(),...en()},"VListSubheader"),b$=st()({name:"VListSubheader",props:_$(),setup(e,t){let{slots:n}=t;const{textColorClasses:s,textColorStyles:a}=Us(()=>e.color);return ut(()=>{const i=!!(n.default||e.title);return j(e.tag,{class:Se(["v-list-subheader",{"v-list-subheader--inset":e.inset,"v-list-subheader--sticky":e.sticky},s.value,e.class]),style:it([{textColorStyles:a},e.style])},{default:()=>[i&&h("div",{class:"v-list-subheader__text"},[n.default?.()??e.title])]})}),{}}}),y$=ze({color:String,inset:Boolean,length:[Number,String],opacity:[Number,String],thickness:[Number,String],vertical:Boolean,...St(),...fn()},"VDivider"),z0=st()({name:"VDivider",props:y$(),setup(e,t){let{attrs:n,slots:s}=t;const{themeClasses:a}=bn(e),{textColorClasses:i,textColorStyles:o}=Us(()=>e.color),r=se(()=>{const f={};return e.length&&(f[e.vertical?"height":"width"]=_t(e.length)),e.thickness&&(f[e.vertical?"borderRightWidth":"borderTopWidth"]=_t(e.thickness)),f});return ut(()=>{const f=h("hr",{class:Se([{"v-divider":!0,"v-divider--inset":e.inset,"v-divider--vertical":e.vertical},a.value,i.value,e.class]),style:it([r.value,o.value,{"--v-border-opacity":e.opacity},e.style]),"aria-orientation":!n.role||n.role==="separator"?e.vertical?"vertical":"horizontal":void 0,role:`${n.role||"separator"}`},null);return s.default?h("div",{class:Se(["v-divider__wrapper",{"v-divider__wrapper--vertical":e.vertical,"v-divider__wrapper--inset":e.inset}])},[f,h("div",{class:"v-divider__content"},[s.default()]),f]):f}),{}}}),w$=ze({items:Array,returnObject:Boolean},"VListChildren"),U0=st()({name:"VListChildren",props:w$(),setup(e,t){let{slots:n}=t;return O0(),()=>n.default?.()??e.items?.map(s=>{let{children:a,props:i,type:o,raw:r}=s;if(o==="divider")return n.divider?.({props:i})??j(z0,i,null);if(o==="subheader")return n.subheader?.({props:i})??j(b$,i,null);const f={subtitle:n.subtitle?d=>n.subtitle?.({...d,item:r}):void 0,prepend:n.prepend?d=>n.prepend?.({...d,item:r}):void 0,append:n.append?d=>n.append?.({...d,item:r}):void 0,title:n.title?d=>n.title?.({...d,item:r}):void 0},u=Ym.filterProps(i);return a?j(Ym,ot(u,{value:e.returnObject?r:i?.value,rawId:i?.value}),{activator:d=>{let{props:c}=d;const l={...i,...c,value:e.returnObject?r:i.value};return n.header?n.header({props:l}):j($o,l,f)},default:()=>j(U0,{items:a,returnObject:e.returnObject},n)}):n.item?n.item({props:i}):j($o,ot(i,{value:e.returnObject?r:i.value}),f)})}}),q0=ze({items:{type:Array,default:()=>[]},itemTitle:{type:[String,Array,Function],default:"title"},itemValue:{type:[String,Array,Function],default:"value"},itemChildren:{type:[Boolean,String,Array,Function],default:"children"},itemProps:{type:[Boolean,String,Array,Function],default:"props"},returnObject:Boolean,valueComparator:Function},"list-items");function mu(e,t){const n=Fs(t,e.itemTitle,t),s=Fs(t,e.itemValue,n),a=Fs(t,e.itemChildren),i=e.itemProps===!0?typeof t=="object"&&t!=null&&!Array.isArray(t)?"children"in t?fa(t,["children"]):t:void 0:Fs(t,e.itemProps),o={title:n,value:s,...i};return{title:String(o.title??""),value:o.value,props:o,children:Array.isArray(a)?W0(e,a):void 0,raw:t}}function W0(e,t){const n=Tu(e,["itemTitle","itemValue","itemChildren","itemProps","returnObject","valueComparator"]),s=[];for(const a of t)s.push(mu(n,a));return s}function k$(e){const t=se(()=>W0(e,e.items)),n=se(()=>t.value.some(r=>r.value===null)),s=dt(new Map),a=dt([]);ds(()=>{const r=t.value,f=new Map,u=[];for(let d=0;d<r.length;d++){const c=r[d];if(Bc(c.value)||c.value===null){let l=f.get(c.value);l||(l=[],f.set(c.value,l)),l.push(c)}else u.push(c)}s.value=f,a.value=u});function i(r){const f=s.value,u=t.value,d=a.value,c=n.value,l=e.returnObject,m=!!e.valueComparator,v=e.valueComparator||sa,C=Tu(e,["itemTitle","itemValue","itemChildren","itemProps","returnObject","valueComparator"]),b=[];e:for(const _ of r){if(!c&&_===null)continue;if(l&&typeof _=="string"){b.push(mu(C,_));continue}const g=f.get(_);if(m||!g){for(const R of m?u:d)if(v(_,R.value)){b.push(R);continue e}b.push(mu(C,_));continue}b.push(...g)}return b}function o(r){return e.returnObject?r.map(f=>{let{raw:u}=f;return u}):r.map(f=>{let{value:u}=f;return u})}return{items:t,transformIn:i,transformOut:o}}function S$(e,t){const n=Fs(t,e.itemType,"item"),s=Bc(t)?t:Fs(t,e.itemTitle),a=Bc(t)?t:Fs(t,e.itemValue,void 0),i=Fs(t,e.itemChildren),o=e.itemProps===!0?fa(t,["children"]):Fs(t,e.itemProps),r={title:s,value:a,...o};return{type:n,title:r.title,value:r.value,props:r,children:n==="item"&&i?Y0(e,i):void 0,raw:t}}function Y0(e,t){const n=[];for(const s of t)n.push(S$(e,s));return n}function C$(e){return{items:se(()=>Y0(e,e.items))}}const A$=ze({baseColor:String,activeColor:String,activeClass:String,bgColor:String,disabled:Boolean,expandIcon:Dt,collapseIcon:Dt,lines:{type:[Boolean,String],default:"one"},slim:Boolean,nav:Boolean,"onClick:open":Un(),"onClick:select":Un(),"onUpdate:opened":Un(),...u$({selectStrategy:"single-leaf",openStrategy:"list"}),...Zs(),...St(),...Es(),...Ts(),...ga(),itemType:{type:String,default:"type"},...q0(),...ss(),...en(),...fn(),...Va({variant:"text"})},"VList"),K0=st()({name:"VList",props:A$(),emits:{"update:selected":e=>!0,"update:activated":e=>!0,"update:opened":e=>!0,"click:open":e=>!0,"click:activate":e=>!0,"click:select":e=>!0},setup(e,t){let{slots:n}=t;const{items:s}=C$(e),{themeClasses:a}=bn(e),{backgroundColorClasses:i,backgroundColorStyles:o}=Qn(()=>e.bgColor),{borderClasses:r}=Qs(e),{densityClasses:f}=Js(e),{dimensionStyles:u}=xs(e),{elevationClasses:d}=pa(e),{roundedClasses:c}=as(e),{children:l,open:m,parents:v,select:C,getPath:b}=d$(e),_=je(()=>e.lines?`v-list--${e.lines}-line`:void 0),g=je(()=>e.activeColor),R=je(()=>e.baseColor),P=je(()=>e.color);O0(),ua({VListGroup:{activeColor:g,baseColor:R,color:P,expandIcon:je(()=>e.expandIcon),collapseIcon:je(()=>e.collapseIcon)},VListItem:{activeClass:je(()=>e.activeClass),activeColor:g,baseColor:R,color:P,density:je(()=>e.density),disabled:je(()=>e.disabled),lines:je(()=>e.lines),nav:je(()=>e.nav),slim:je(()=>e.slim),variant:je(()=>e.variant)}});const S=dt(!1),L=ie();function I(k){S.value=!0}function T(k){S.value=!1}function E(k){!S.value&&!(k.relatedTarget&&L.value?.contains(k.relatedTarget))&&w()}function y(k){const M=k.target;if(!(!L.value||["INPUT","TEXTAREA"].includes(M.tagName))){if(k.key==="ArrowDown")w("next");else if(k.key==="ArrowUp")w("prev");else if(k.key==="Home")w("first");else if(k.key==="End")w("last");else return;k.preventDefault()}}function A(k){S.value=!0}function w(k){if(L.value)return Tr(L.value,k)}return ut(()=>j(e.tag,{ref:L,class:Se(["v-list",{"v-list--disabled":e.disabled,"v-list--nav":e.nav,"v-list--slim":e.slim},a.value,i.value,r.value,f.value,d.value,_.value,c.value,e.class]),style:it([o.value,u.value,e.style]),tabindex:e.disabled?-1:0,role:"listbox","aria-activedescendant":void 0,onFocusin:I,onFocusout:T,onFocus:E,onKeydown:y,onMousedown:A},{default:()=>[j(U0,{items:s.value,returnObject:e.returnObject},n)]})),{open:m,select:C,focus:w,children:l,parents:v,getPath:b}}});function Ac(e,t){return{x:e.x+t.x,y:e.y+t.y}}function T$(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Km(e,t){if(e.side==="top"||e.side==="bottom"){const{side:n,align:s}=e,a=s==="left"?0:s==="center"?t.width/2:s==="right"?t.width:s,i=n==="top"?0:n==="bottom"?t.height:n;return Ac({x:a,y:i},t)}else if(e.side==="left"||e.side==="right"){const{side:n,align:s}=e,a=n==="left"?0:n==="right"?t.width:n,i=s==="top"?0:s==="center"?t.height/2:s==="bottom"?t.height:s;return Ac({x:a,y:i},t)}return Ac({x:t.width/2,y:t.height/2},t)}const G0={static:R$,connected:I$},x$=ze({locationStrategy:{type:[String,Function],default:"static",validator:e=>typeof e=="function"||e in G0},location:{type:String,default:"bottom"},origin:{type:String,default:"auto"},offset:[Number,String,Array]},"VOverlay-location-strategies");function E$(e,t){const n=ie({}),s=ie();Cn&&ws(()=>!!(t.isActive.value&&e.locationStrategy),r=>{rt(()=>e.locationStrategy,r),Fn(()=>{window.removeEventListener("resize",a),visualViewport?.removeEventListener("resize",i),visualViewport?.removeEventListener("scroll",o),s.value=void 0}),window.addEventListener("resize",a,{passive:!0}),visualViewport?.addEventListener("resize",i,{passive:!0}),visualViewport?.addEventListener("scroll",o,{passive:!0}),typeof e.locationStrategy=="function"?s.value=e.locationStrategy(t,e,n)?.updateLocation:s.value=G0[e.locationStrategy](t,e,n)?.updateLocation});function a(r){s.value?.(r)}function i(r){s.value?.(r)}function o(r){s.value?.(r)}return{contentStyles:n,updateLocation:s}}function R$(){}function M$(e,t){const n=ku(e);return t?n.x+=parseFloat(e.style.right||0):n.x-=parseFloat(e.style.left||0),n.y-=parseFloat(e.style.top||0),n}function I$(e,t,n){(Array.isArray(e.target.value)||lp(e.target.value))&&Object.assign(n.value,{position:"fixed",top:0,[e.isRtl.value?"right":"left"]:0});const{preferredAnchor:a,preferredOrigin:i}=Su(()=>{const _=Ic(t.location,e.isRtl.value),g=t.origin==="overlap"?_:t.origin==="auto"?ql(_):Ic(t.origin,e.isRtl.value);return _.side===g.side&&_.align===Wl(g).align?{preferredAnchor:Hd(_),preferredOrigin:Hd(g)}:{preferredAnchor:_,preferredOrigin:g}}),[o,r,f,u]=["minWidth","minHeight","maxWidth","maxHeight"].map(_=>se(()=>{const g=parseFloat(t[_]);return isNaN(g)?1/0:g})),d=se(()=>{if(Array.isArray(t.offset))return t.offset;if(typeof t.offset=="string"){const _=t.offset.split(" ").map(parseFloat);return _.length<2&&_.push(0),_}return typeof t.offset=="number"?[t.offset,0]:[0,0]});let c=!1,l=-1;const m=new gv(4),v=new ResizeObserver(()=>{if(!c)return;if(requestAnimationFrame(g=>{g!==l&&m.clear(),requestAnimationFrame(R=>{l=R})}),m.isFull){const g=m.values();if(sa(g.at(-1),g.at(-3)))return}const _=b();_&&m.push(_.flipped)});rt([e.target,e.contentEl],(_,g)=>{let[R,P]=_,[S,L]=g;S&&!Array.isArray(S)&&v.unobserve(S),R&&!Array.isArray(R)&&v.observe(R),L&&v.unobserve(L),P&&v.observe(P)},{immediate:!0}),Fn(()=>{v.disconnect()});let C=new Yl({x:0,y:0,width:0,height:0});function b(){if(c=!1,requestAnimationFrame(()=>c=!0),!e.target.value||!e.contentEl.value)return;(Array.isArray(e.target.value)||e.target.value.offsetParent||e.target.value.getClientRects().length)&&(C=dv(e.target.value));const _=M$(e.contentEl.value,e.isRtl.value),g=Fr(e.contentEl.value),R=12;g.length||(g.push(document.documentElement),e.contentEl.value.style.top&&e.contentEl.value.style.left||(_.x-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-x")||0),_.y-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-y")||0)));const P=g.reduce((k,M)=>{const x=cp(M);return k?new Yl({x:Math.max(k.left,x.left),y:Math.max(k.top,x.top),width:Math.min(k.right,x.right)-Math.max(k.left,x.left),height:Math.min(k.bottom,x.bottom)-Math.max(k.top,x.top)}):x},void 0);P.x+=R,P.y+=R,P.width-=R*2,P.height-=R*2;let S={anchor:a.value,origin:i.value};function L(k){const M=new Yl(_),x=Km(k.anchor,C),F=Km(k.origin,M);let{x:V,y:D}=T$(x,F);switch(k.anchor.side){case"top":D-=d.value[0];break;case"bottom":D+=d.value[0];break;case"left":V-=d.value[0];break;case"right":V+=d.value[0];break}switch(k.anchor.align){case"top":D-=d.value[1];break;case"bottom":D+=d.value[1];break;case"left":V-=d.value[1];break;case"right":V+=d.value[1];break}return M.x+=V,M.y+=D,M.width=Math.min(M.width,f.value),M.height=Math.min(M.height,u.value),{overflows:Ud(M,P),x:V,y:D}}let I=0,T=0;const E={x:0,y:0},y={x:!1,y:!1};let A=-1;for(;!(A++>10);){const{x:k,y:M,overflows:x}=L(S);I+=k,T+=M,_.x+=k,_.y+=M;{const F=zd(S.anchor),V=x.x.before||x.x.after,D=x.y.before||x.y.after;let z=!1;if(["x","y"].forEach(p=>{if(p==="x"&&V&&!y.x||p==="y"&&D&&!y.y){const B={anchor:{...S.anchor},origin:{...S.origin}},U=p==="x"?F==="y"?Wl:ql:F==="y"?ql:Wl;B.anchor=U(B.anchor),B.origin=U(B.origin);const{overflows:$}=L(B);($[p].before<=x[p].before&&$[p].after<=x[p].after||$[p].before+$[p].after<(x[p].before+x[p].after)/2)&&(S=B,z=y[p]=!0)}}),z)continue}x.x.before&&(I+=x.x.before,_.x+=x.x.before),x.x.after&&(I-=x.x.after,_.x-=x.x.after),x.y.before&&(T+=x.y.before,_.y+=x.y.before),x.y.after&&(T-=x.y.after,_.y-=x.y.after);{const F=Ud(_,P);E.x=P.width-F.x.before-F.x.after,E.y=P.height-F.y.before-F.y.after,I+=F.x.before,_.x+=F.x.before,T+=F.y.before,_.y+=F.y.before}break}const w=zd(S.anchor);return Object.assign(n.value,{"--v-overlay-anchor-origin":`${S.anchor.side} ${S.anchor.align}`,transformOrigin:`${S.origin.side} ${S.origin.align}`,top:_t(Tc(T)),left:e.isRtl.value?void 0:_t(Tc(I)),right:e.isRtl.value?_t(Tc(-I)):void 0,minWidth:_t(w==="y"?Math.min(o.value,C.width):o.value),maxWidth:_t(Gm(ys(E.x,o.value===1/0?0:o.value,f.value))),maxHeight:_t(Gm(ys(E.y,r.value===1/0?0:r.value,u.value)))}),{available:E,contentBox:_,flipped:y}}return rt(()=>[a.value,i.value,t.offset,t.minWidth,t.minHeight,t.maxWidth,t.maxHeight],()=>b()),Yt(()=>{const _=b();if(!_)return;const{available:g,contentBox:R}=_;R.height>g.y&&requestAnimationFrame(()=>{b(),requestAnimationFrame(()=>{b()})})}),{updateLocation:b}}function Tc(e){return Math.round(e*devicePixelRatio)/devicePixelRatio}function Gm(e){return Math.ceil(e*devicePixelRatio)/devicePixelRatio}let vu=!0;const Qr=[];function B$(e){!vu||Qr.length?(Qr.push(e),hu()):(vu=!1,e(),hu())}let Xm=-1;function hu(){cancelAnimationFrame(Xm),Xm=requestAnimationFrame(()=>{const e=Qr.shift();e&&e(),Qr.length?hu():vu=!0})}const X0={none:null,close:P$,block:$$,reposition:F$},L$=ze({scrollStrategy:{type:[String,Function],default:"block",validator:e=>typeof e=="function"||e in X0}},"VOverlay-scroll-strategies");function O$(e,t){if(!Cn)return;let n;ds(async()=>{n?.stop(),t.isActive.value&&e.scrollStrategy&&(n=cv(),await new Promise(s=>setTimeout(s)),n.active&&n.run(()=>{typeof e.scrollStrategy=="function"?e.scrollStrategy(t,e,n):X0[e.scrollStrategy]?.(t,e,n)}))}),Fn(()=>{n?.stop()})}function P$(e){function t(n){e.isActive.value=!1}Z0(e.targetEl.value??e.contentEl.value,t)}function $$(e,t){const n=e.root.value?.offsetParent,s=[...new Set([...Fr(e.targetEl.value,t.contained?n:void 0),...Fr(e.contentEl.value,t.contained?n:void 0)])].filter(o=>!o.classList.contains("v-overlay-scroll-blocked")),a=window.innerWidth-document.documentElement.offsetWidth,i=(o=>up(o)&&o)(n||document.documentElement);i&&e.root.value.classList.add("v-overlay--scroll-blocked"),s.forEach((o,r)=>{o.style.setProperty("--v-body-scroll-x",_t(-o.scrollLeft)),o.style.setProperty("--v-body-scroll-y",_t(-o.scrollTop)),o!==document.documentElement&&o.style.setProperty("--v-scrollbar-offset",_t(a)),o.classList.add("v-overlay-scroll-blocked")}),Fn(()=>{s.forEach((o,r)=>{const f=parseFloat(o.style.getPropertyValue("--v-body-scroll-x")),u=parseFloat(o.style.getPropertyValue("--v-body-scroll-y")),d=o.style.scrollBehavior;o.style.scrollBehavior="auto",o.style.removeProperty("--v-body-scroll-x"),o.style.removeProperty("--v-body-scroll-y"),o.style.removeProperty("--v-scrollbar-offset"),o.classList.remove("v-overlay-scroll-blocked"),o.scrollLeft=-f,o.scrollTop=-u,o.style.scrollBehavior=d}),i&&e.root.value.classList.remove("v-overlay--scroll-blocked")})}function F$(e,t,n){let s=!1,a=-1,i=-1;function o(r){B$(()=>{const f=performance.now();e.updateLocation.value?.(r),s=(performance.now()-f)/(1e3/60)>2})}i=(typeof requestIdleCallback>"u"?r=>r():requestIdleCallback)(()=>{n.run(()=>{Z0(e.targetEl.value??e.contentEl.value,r=>{s?(cancelAnimationFrame(a),a=requestAnimationFrame(()=>{a=requestAnimationFrame(()=>{o(r)})})):o(r)})})}),Fn(()=>{typeof cancelIdleCallback<"u"&&cancelIdleCallback(i),cancelAnimationFrame(a)})}function Z0(e,t){const n=[document,...Fr(e)];n.forEach(s=>{s.addEventListener("scroll",t,{passive:!0})}),Fn(()=>{n.forEach(s=>{s.removeEventListener("scroll",t)})})}const gu=Symbol.for("vuetify:v-menu"),Q0=ze({closeDelay:[Number,String],openDelay:[Number,String]},"delay");function J0(e,t){let n=()=>{};function s(o){n?.();const r=Number(o?e.openDelay:e.closeDelay);return new Promise(f=>{n=dp(r,()=>{t?.(o),f(o)})})}function a(){return s(!0)}function i(){return s(!1)}return{clearDelay:n,runOpenDelay:a,runCloseDelay:i}}const D$=ze({target:[String,Object],activator:[String,Object],activatorProps:{type:Object,default:()=>({})},openOnClick:{type:Boolean,default:void 0},openOnHover:Boolean,openOnFocus:{type:Boolean,default:void 0},closeOnContentClick:Boolean,...Q0()},"VOverlay-activator");function V$(e,t){let{isActive:n,isTop:s,contentEl:a}=t;const i=ms("useActivator"),o=ie();let r=!1,f=!1,u=!0;const d=se(()=>e.openOnFocus||e.openOnFocus==null&&e.openOnHover),c=se(()=>e.openOnClick||e.openOnClick==null&&!e.openOnHover&&!d.value),{runOpenDelay:l,runCloseDelay:m}=J0(e,T=>{T===(e.openOnHover&&r||d.value&&f)&&!(e.openOnHover&&n.value&&!s.value)&&(n.value!==T&&(u=!0),n.value=T)}),v=ie(),C={onClick:T=>{T.stopPropagation(),o.value=T.currentTarget||T.target,n.value||(v.value=[T.clientX,T.clientY]),n.value=!n.value},onMouseenter:T=>{T.sourceCapabilities?.firesTouchEvents||(r=!0,o.value=T.currentTarget||T.target,l())},onMouseleave:T=>{r=!1,m()},onFocus:T=>{Pr(T.target,":focus-visible")!==!1&&(f=!0,T.stopPropagation(),o.value=T.currentTarget||T.target,l())},onBlur:T=>{f=!1,T.stopPropagation(),m()}},b=se(()=>{const T={};return c.value&&(T.onClick=C.onClick),e.openOnHover&&(T.onMouseenter=C.onMouseenter,T.onMouseleave=C.onMouseleave),d.value&&(T.onFocus=C.onFocus,T.onBlur=C.onBlur),T}),_=se(()=>{const T={};if(e.openOnHover&&(T.onMouseenter=()=>{r=!0,l()},T.onMouseleave=()=>{r=!1,m()}),d.value&&(T.onFocusin=()=>{f=!0,l()},T.onFocusout=()=>{f=!1,m()}),e.closeOnContentClick){const E=ts(gu,null);T.onClick=()=>{n.value=!1,E?.closeParents()}}return T}),g=se(()=>{const T={};return e.openOnHover&&(T.onMouseenter=()=>{u&&(r=!0,u=!1,l())},T.onMouseleave=()=>{r=!1,m()}),T});rt(s,T=>{T&&(e.openOnHover&&!r&&(!d.value||!f)||d.value&&!f&&(!e.openOnHover||!r))&&!a.value?.contains(document.activeElement)&&(n.value=!1)}),rt(n,T=>{T||setTimeout(()=>{v.value=void 0})},{flush:"post"});const R=qd();ds(()=>{R.value&&Yt(()=>{o.value=R.el})});const P=qd(),S=se(()=>e.target==="cursor"&&v.value?v.value:P.value?P.el:eg(e.target,i)||o.value),L=se(()=>Array.isArray(S.value)?void 0:S.value);let I;return rt(()=>!!e.activator,T=>{T&&Cn?(I=cv(),I.run(()=>{N$(e,i,{activatorEl:o,activatorEvents:b})})):I&&I.stop()},{flush:"post",immediate:!0}),Fn(()=>{I?.stop()}),{activatorEl:o,activatorRef:R,target:S,targetEl:L,targetRef:P,activatorEvents:b,contentEvents:_,scrimEvents:g}}function N$(e,t,n){let{activatorEl:s,activatorEvents:a}=n;rt(()=>e.activator,(f,u)=>{if(u&&f!==u){const d=r(u);d&&o(d)}f&&Yt(()=>i())},{immediate:!0}),rt(()=>e.activatorProps,()=>{i()}),Fn(()=>{o()});function i(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:r(),u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.activatorProps;f&&fp(f,ot(a.value,u))}function o(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:r(),u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.activatorProps;f&&mp(f,ot(a.value,u))}function r(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.activator;const u=eg(f,t);return s.value=u?.nodeType===Node.ELEMENT_NODE?u:void 0,s.value}}function eg(e,t){if(!e)return;let n;if(e==="parent"){let s=t?.proxy?.$el?.parentNode;for(;s?.hasAttribute("data-no-activator");)s=s.parentNode;n=s}else typeof e=="string"?n=document.querySelector(e):"$el"in e?n=e.$el:n=e;return n}function j$(){if(!Cn)return dt(!1);const{ssr:e}=sl();if(e){const t=dt(!1);return sn(()=>{t.value=!0}),t}else return dt(!0)}const tg=ze({eager:Boolean},"lazy");function ng(e,t){const n=dt(!1),s=je(()=>n.value||e.eager||t.value);rt(t,()=>n.value=!0);function a(){e.eager||(n.value=!1)}return{isBooted:n,hasContent:s,onAfterLeave:a}}function er(){const t=ms("useScopeId").vnode.scopeId;return{scopeId:t?{[t]:""}:void 0}}const Zm=Symbol.for("vuetify:stack"),so=Ii([]);function H$(e,t,n){const s=ms("useStack"),a=!n,i=ts(Zm,void 0),o=Ii({activeChildren:new Set});Ks(Zm,o);const r=dt(Number(La(t)));ws(e,()=>{const d=so.at(-1)?.[1];r.value=d?d+10:Number(La(t)),a&&so.push([s.uid,r.value]),i?.activeChildren.add(s.uid),Fn(()=>{if(a){const c=_n(so).findIndex(l=>l[0]===s.uid);so.splice(c,1)}i?.activeChildren.delete(s.uid)})});const f=dt(!0);a&&ds(()=>{const d=so.at(-1)?.[0]===s.uid;setTimeout(()=>f.value=d)});const u=je(()=>!o.activeChildren.size);return{globalTop:yu(f),localTop:u,stackStyles:je(()=>({zIndex:r.value}))}}function z$(e){return{teleportTarget:se(()=>{const n=e();if(n===!0||!Cn)return;const s=n===!1?document.body:typeof n=="string"?document.querySelector(n):n;if(s==null)return;let a=[...s.children].find(i=>i.matches(".v-overlay-container"));return a||(a=document.createElement("div"),a.className="v-overlay-container",s.appendChild(a)),a})}}function U$(){return!0}function sg(e,t,n){if(!e||ag(e,n)===!1)return!1;const s=pv(t);if(typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&s.host===e.target)return!1;const a=(typeof n.value=="object"&&n.value.include||(()=>[]))();return a.push(t),!a.some(i=>i?.contains(e.target))}function ag(e,t){return(typeof t.value=="object"&&t.value.closeConditional||U$)(e)}function q$(e,t,n){const s=typeof n.value=="function"?n.value:n.value.handler;e.shadowTarget=e.target,t._clickOutside.lastMousedownWasOutside&&sg(e,t,n)&&setTimeout(()=>{ag(e,n)&&s&&s(e)},0)}function Qm(e,t){const n=pv(e);t(document),typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&t(n)}const Jm={mounted(e,t){const n=a=>q$(a,e,t),s=a=>{e._clickOutside.lastMousedownWasOutside=sg(a,e,t)};Qm(e,a=>{a.addEventListener("click",n,!0),a.addEventListener("mousedown",s,!0)}),e._clickOutside||(e._clickOutside={lastMousedownWasOutside:!1}),e._clickOutside[t.instance.$.uid]={onClick:n,onMousedown:s}},beforeUnmount(e,t){e._clickOutside&&(Qm(e,n=>{if(!n||!e._clickOutside?.[t.instance.$.uid])return;const{onClick:s,onMousedown:a}=e._clickOutside[t.instance.$.uid];n.removeEventListener("click",s,!0),n.removeEventListener("mousedown",a,!0)}),delete e._clickOutside[t.instance.$.uid])}};function W$(e){const{modelValue:t,color:n,...s}=e;return j(Ba,{name:"fade-transition",appear:!0},{default:()=>[e.modelValue&&h("div",ot({class:["v-overlay__scrim",e.color.backgroundColorClasses.value],style:e.color.backgroundColorStyles.value},s),null)]})}const Ed=ze({absolute:Boolean,attach:[Boolean,String,Object],closeOnBack:{type:Boolean,default:!0},contained:Boolean,contentClass:null,contentProps:null,disabled:Boolean,opacity:[Number,String],noClickAnimation:Boolean,modelValue:Boolean,persistent:Boolean,scrim:{type:[Boolean,String],default:!0},zIndex:{type:[Number,String],default:2e3},...D$(),...St(),...Ts(),...tg(),...x$(),...L$(),...fn(),...Yo()},"VOverlay"),Jr=st()({name:"VOverlay",directives:{vClickOutside:Jm},inheritAttrs:!1,props:{_disableGlobalStack:Boolean,...Ed()},emits:{"click:outside":e=>!0,"update:modelValue":e=>!0,keydown:e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,t){let{slots:n,attrs:s,emit:a}=t;const i=ms("VOverlay"),o=ie(),r=ie(),f=ie(),u=Zt(e,"modelValue"),d=se({get:()=>u.value,set:ae=>{ae&&e.disabled||(u.value=ae)}}),{themeClasses:c}=bn(e),{rtlClasses:l,isRtl:m}=fs(),{hasContent:v,onAfterLeave:C}=ng(e,d),b=Qn(()=>typeof e.scrim=="string"?e.scrim:null),{globalTop:_,localTop:g,stackStyles:R}=H$(d,()=>e.zIndex,e._disableGlobalStack),{activatorEl:P,activatorRef:S,target:L,targetEl:I,targetRef:T,activatorEvents:E,contentEvents:y,scrimEvents:A}=V$(e,{isActive:d,isTop:g,contentEl:f}),{teleportTarget:w}=z$(()=>{const ae=e.attach||e.contained;if(ae)return ae;const X=P?.value?.getRootNode()||i.proxy?.$el?.getRootNode();return X instanceof ShadowRoot?X:!1}),{dimensionStyles:k}=xs(e),M=j$(),{scopeId:x}=er();rt(()=>e.disabled,ae=>{ae&&(d.value=!1)});const{contentStyles:F,updateLocation:V}=E$(e,{isRtl:m,contentEl:f,target:L,isActive:d});O$(e,{root:o,contentEl:f,targetEl:I,isActive:d,updateLocation:V});function D(ae){a("click:outside",ae),e.persistent?ee():d.value=!1}function z(ae){return d.value&&_.value&&(!e.scrim||ae.target===r.value||ae instanceof MouseEvent&&ae.shadowTarget===r.value)}Cn&&rt(d,ae=>{ae?window.addEventListener("keydown",p):window.removeEventListener("keydown",p)},{immediate:!0}),qn(()=>{Cn&&window.removeEventListener("keydown",p)});function p(ae){ae.key==="Escape"&&_.value&&(f.value?.contains(document.activeElement)||a("keydown",ae),e.persistent?ee():(d.value=!1,f.value?.contains(document.activeElement)&&P.value?.focus()))}function B(ae){ae.key==="Escape"&&!_.value||a("keydown",ae)}const U=h0();ws(()=>e.closeOnBack,()=>{MP(U,ae=>{_.value&&d.value?(ae(!1),e.persistent?ee():d.value=!1):ae()})});const $=ie();rt(()=>d.value&&(e.absolute||e.contained)&&w.value==null,ae=>{if(ae){const X=_v(o.value);X&&X!==document.scrollingElement&&($.value=X.scrollTop)}});function ee(){e.noClickAnimation||f.value&&ai(f.value,[{transformOrigin:"center"},{transform:"scale(1.03)"},{transformOrigin:"center"}],{duration:150,easing:bo})}function re(){a("afterEnter")}function G(){C(),a("afterLeave")}return ut(()=>h(Je,null,[n.activator?.({isActive:d.value,targetRef:T,props:ot({ref:S},E.value,e.activatorProps)}),M.value&&v.value&&j(Ng,{disabled:!w.value,to:w.value},{default:()=>[h("div",ot({class:["v-overlay",{"v-overlay--absolute":e.absolute||e.contained,"v-overlay--active":d.value,"v-overlay--contained":e.contained},c.value,l.value,e.class],style:[R.value,{"--v-overlay-opacity":e.opacity,top:_t($.value)},e.style],ref:o,onKeydown:B},x,s),[j(W$,ot({color:b,modelValue:d.value&&!!e.scrim,ref:r},A.value),null),j(na,{appear:!0,persisted:!0,transition:e.transition,target:L.value,onAfterEnter:re,onAfterLeave:G},{default:()=>[an(h("div",ot({ref:f,class:["v-overlay__content",e.contentClass],style:[k.value,F.value]},y.value,e.contentProps),[n.default?.({isActive:d})]),[[js,d.value],[Jm,{handler:D,closeConditional:z,include:()=>[P.value]}]])]})])]})])),{activatorEl:P,scrimEl:r,target:L,animateClick:ee,contentEl:f,globalTop:_,localTop:g,updateLocation:V}}}),xc=Symbol("Forwarded refs");function Ec(e,t){let n=e;for(;n;){const s=Reflect.getOwnPropertyDescriptor(n,t);if(s)return s;n=Object.getPrototypeOf(n)}}function Ui(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return e[xc]=n,new Proxy(e,{get(a,i){if(Reflect.has(a,i))return Reflect.get(a,i);if(!(typeof i=="symbol"||i.startsWith("$")||i.startsWith("__"))){for(const o of n)if(o.value&&Reflect.has(o.value,i)){const r=Reflect.get(o.value,i);return typeof r=="function"?r.bind(o.value):r}}},has(a,i){if(Reflect.has(a,i))return!0;if(typeof i=="symbol"||i.startsWith("$")||i.startsWith("__"))return!1;for(const o of n)if(o.value&&Reflect.has(o.value,i))return!0;return!1},set(a,i,o){if(Reflect.has(a,i))return Reflect.set(a,i,o);if(typeof i=="symbol"||i.startsWith("$")||i.startsWith("__"))return!1;for(const r of n)if(r.value&&Reflect.has(r.value,i))return Reflect.set(r.value,i,o);return!1},getOwnPropertyDescriptor(a,i){const o=Reflect.getOwnPropertyDescriptor(a,i);if(o)return o;if(!(typeof i=="symbol"||i.startsWith("$")||i.startsWith("__"))){for(const r of n){if(!r.value)continue;const f=Ec(r.value,i)??("_"in r.value?Ec(r.value._?.setupState,i):void 0);if(f)return f}for(const r of n){const f=r.value&&r.value[xc];if(!f)continue;const u=f.slice();for(;u.length;){const d=u.shift(),c=Ec(d.value,i);if(c)return c;const l=d.value&&d.value[xc];l&&u.push(...l)}}}}})}const Y$=ze({id:String,submenu:Boolean,...fa(Ed({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",location:void 0,openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:md}}),["absolute"])},"VMenu"),ig=st()({name:"VMenu",props:Y$(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const s=Zt(e,"modelValue"),{scopeId:a}=er(),{isRtl:i}=fs(),o=Ys(),r=je(()=>e.id||`v-menu-${o}`),f=ie(),u=ts(gu,null),d=dt(new Set);Ks(gu,{register(){d.value.add(o)},unregister(){d.value.delete(o)},closeParents(b){setTimeout(()=>{!d.value.size&&!e.persistent&&(b==null||f.value?.contentEl&&!hp(b,f.value.contentEl))&&(s.value=!1,u?.closeParents())},40)}}),qn(()=>{u?.unregister(),document.removeEventListener("focusin",c)}),jg(()=>s.value=!1);async function c(b){const _=b.relatedTarget,g=b.target;await Yt(),s.value&&_!==g&&f.value?.contentEl&&f.value?.globalTop&&![document,f.value.contentEl].includes(g)&&!f.value.contentEl.contains(g)&&$r(f.value.contentEl)[0]?.focus()}rt(s,b=>{b?(u?.register(),Cn&&document.addEventListener("focusin",c,{once:!0})):(u?.unregister(),Cn&&document.removeEventListener("focusin",c))},{immediate:!0});function l(b){u?.closeParents(b)}function m(b){if(!e.disabled)if(b.key==="Tab"||b.key==="Enter"&&!e.closeOnContentClick){if(b.key==="Enter"&&(b.target instanceof HTMLTextAreaElement||b.target instanceof HTMLInputElement&&b.target.closest("form")))return;b.key==="Enter"&&b.preventDefault(),vp($r(f.value?.contentEl,!1),b.shiftKey?"prev":"next",g=>g.tabIndex>=0)||(s.value=!1,f.value?.activatorEl?.focus())}else e.submenu&&b.key===(i.value?"ArrowRight":"ArrowLeft")&&(s.value=!1,f.value?.activatorEl?.focus())}function v(b){if(e.disabled)return;const _=f.value?.contentEl;_&&s.value?b.key==="ArrowDown"?(b.preventDefault(),b.stopImmediatePropagation(),Tr(_,"next")):b.key==="ArrowUp"?(b.preventDefault(),b.stopImmediatePropagation(),Tr(_,"prev")):e.submenu&&(b.key===(i.value?"ArrowRight":"ArrowLeft")?s.value=!1:b.key===(i.value?"ArrowLeft":"ArrowRight")&&(b.preventDefault(),Tr(_,"first"))):(e.submenu?b.key===(i.value?"ArrowLeft":"ArrowRight"):["ArrowDown","ArrowUp"].includes(b.key))&&(s.value=!0,b.preventDefault(),setTimeout(()=>setTimeout(()=>v(b))))}const C=se(()=>ot({"aria-haspopup":"menu","aria-expanded":String(s.value),"aria-controls":r.value,onKeydown:v},e.activatorProps));return ut(()=>{const b=Jr.filterProps(e);return j(Jr,ot({ref:f,id:r.value,class:["v-menu",e.class],style:e.style},b,{modelValue:s.value,"onUpdate:modelValue":_=>s.value=_,absolute:!0,activatorProps:C.value,location:e.location??(e.submenu?"end":"bottom"),"onClick:outside":l,onKeydown:m},a),{activator:n.activator,default:function(){for(var _=arguments.length,g=new Array(_),R=0;R<_;R++)g[R]=arguments[R];return j(cn,{root:"VMenu"},{default:()=>[n.default?.(...g)]})}})}),Ui({id:r,openChildren:d},f)}}),K$=ze({active:Boolean,disabled:Boolean,max:[Number,String],value:{type:[Number,String],default:0},...St(),...Yo({transition:{component:a0}})},"VCounter"),og=st()({name:"VCounter",functional:!0,props:K$(),setup(e,t){let{slots:n}=t;const s=je(()=>e.max?`${e.value} / ${e.max}`:String(e.value));return ut(()=>j(na,{transition:e.transition},{default:()=>[an(h("div",{class:Se(["v-counter",{"text-error":e.max&&!e.disabled&&parseFloat(e.value)>parseFloat(e.max)},e.class]),style:it(e.style)},[n.default?n.default({counter:s.value,max:e.max,value:e.value}):s.value]),[[js,e.active]])]})),{}}}),G$=ze({floating:Boolean,...St()},"VFieldLabel"),Ar=st()({name:"VFieldLabel",props:G$(),setup(e,t){let{slots:n}=t;return ut(()=>j(Sd,{class:Se(["v-field-label",{"v-field-label--floating":e.floating},e.class]),style:it(e.style),"aria-hidden":e.floating||void 0},n)),{}}}),X$=["underlined","outlined","filled","solo","solo-inverted","solo-filled","plain"],Rd=ze({appendInnerIcon:Dt,bgColor:String,clearable:Boolean,clearIcon:{type:Dt,default:"$clear"},active:Boolean,centerAffix:{type:Boolean,default:void 0},color:String,baseColor:String,dirty:Boolean,disabled:{type:Boolean,default:null},glow:Boolean,error:Boolean,flat:Boolean,iconColor:[Boolean,String],label:String,persistentClear:Boolean,prependInnerIcon:Dt,reverse:Boolean,singleLine:Boolean,variant:{type:String,default:"filled",validator:e=>X$.includes(e)},"onClick:clear":Un(),"onClick:appendInner":Un(),"onClick:prependInner":Un(),...St(),...bd(),...ss(),...fn()},"VField"),el=st()({name:"VField",inheritAttrs:!1,props:{id:String,...E0(),...Rd()},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:s,slots:a}=t;const{themeClasses:i}=bn(e),{loaderClasses:o}=Bl(e),{focusClasses:r,isFocused:f,focus:u,blur:d}=Jo(e),{InputIcon:c}=x0(e),{roundedClasses:l}=as(e),{rtlClasses:m}=fs(),v=je(()=>e.dirty||e.active),C=je(()=>!!(e.label||a.label)),b=je(()=>!e.singleLine&&C.value),_=Ys(),g=se(()=>e.id||`input-${_}`),R=je(()=>`${g.value}-messages`),P=ie(),S=ie(),L=ie(),I=se(()=>["plain","underlined"].includes(e.variant)),T=se(()=>e.error||e.disabled?void 0:v.value&&f.value?e.color:e.baseColor),E=se(()=>{if(!(!e.iconColor||e.glow&&!f.value))return e.iconColor===!0?T.value:e.iconColor}),{backgroundColorClasses:y,backgroundColorStyles:A}=Qn(()=>e.bgColor),{textColorClasses:w,textColorStyles:k}=Us(T);rt(v,F=>{if(b.value){const V=P.value.$el,D=S.value.$el;requestAnimationFrame(()=>{const z=ku(V),p=D.getBoundingClientRect(),B=p.x-z.x,U=p.y-z.y-(z.height/2-p.height/2),$=p.width/.75,ee=Math.abs($-z.width)>1?{maxWidth:_t($)}:void 0,re=getComputedStyle(V),G=getComputedStyle(D),ae=parseFloat(re.transitionDuration)*1e3||150,X=parseFloat(G.getPropertyValue("--v-field-label-scale")),he=G.getPropertyValue("color");V.style.visibility="visible",D.style.visibility="hidden",ai(V,{transform:`translate(${B}px, ${U}px) scale(${X})`,color:he,...ee},{duration:ae,easing:bo,direction:F?"normal":"reverse"}).finished.then(()=>{V.style.removeProperty("visibility"),D.style.removeProperty("visibility")})})}},{flush:"post"});const M=se(()=>({isActive:v,isFocused:f,controlRef:L,blur:d,focus:u}));function x(F){F.target!==document.activeElement&&F.preventDefault()}return ut(()=>{const F=e.variant==="outlined",V=!!(a["prepend-inner"]||e.prependInnerIcon),D=!!(e.clearable||a.clear)&&!e.disabled,z=!!(a["append-inner"]||e.appendInnerIcon||D),p=()=>a.label?a.label({...M.value,label:e.label,props:{for:g.value}}):e.label;return h("div",ot({class:["v-field",{"v-field--active":v.value,"v-field--appended":z,"v-field--center-affix":e.centerAffix??!I.value,"v-field--disabled":e.disabled,"v-field--dirty":e.dirty,"v-field--error":e.error,"v-field--glow":e.glow,"v-field--flat":e.flat,"v-field--has-background":!!e.bgColor,"v-field--persistent-clear":e.persistentClear,"v-field--prepended":V,"v-field--reverse":e.reverse,"v-field--single-line":e.singleLine,"v-field--no-label":!p(),[`v-field--variant-${e.variant}`]:!0},i.value,y.value,r.value,o.value,l.value,m.value,e.class],style:[A.value,e.style],onClick:x},n),[h("div",{class:"v-field__overlay"},null),j(yd,{name:"v-field",active:!!e.loading,color:e.error?"error":typeof e.loading=="string"?e.loading:e.color},{default:a.loader}),V&&h("div",{key:"prepend",class:"v-field__prepend-inner"},[e.prependInnerIcon&&j(c,{key:"prepend-icon",name:"prependInner",color:E.value},null),a["prepend-inner"]?.(M.value)]),h("div",{class:"v-field__field","data-no-activator":""},[["filled","solo","solo-inverted","solo-filled"].includes(e.variant)&&b.value&&j(Ar,{key:"floating-label",ref:S,class:Se([w.value]),floating:!0,for:g.value,style:it(k.value)},{default:()=>[p()]}),C.value&&j(Ar,{key:"label",ref:P,for:g.value},{default:()=>[p()]}),a.default?.({...M.value,props:{id:g.value,class:"v-field__input","aria-describedby":R.value},focus:u,blur:d})??h("div",{id:g.value,class:"v-field__input","aria-describedby":R.value},null)]),D&&j(o0,{key:"clear"},{default:()=>[an(h("div",{class:"v-field__clearable",onMousedown:B=>{B.preventDefault(),B.stopPropagation()}},[j(cn,{defaults:{VIcon:{icon:e.clearIcon}}},{default:()=>[a.clear?a.clear({...M.value,props:{onFocus:u,onBlur:d,onClick:e["onClick:clear"],tabindex:-1}}):j(c,{name:"clear",onFocus:u,onBlur:d,tabindex:-1},null)]})]),[[js,e.dirty]])]}),z&&h("div",{key:"append",class:"v-field__append-inner"},[a["append-inner"]?.(M.value),e.appendInnerIcon&&j(c,{key:"append-icon",name:"appendInner",color:E.value},null)]),h("div",{class:Se(["v-field__outline",w.value]),style:it(k.value)},[F&&h(Je,null,[h("div",{class:"v-field__outline__start"},null),b.value&&h("div",{class:"v-field__outline__notch"},[j(Ar,{ref:S,floating:!0,for:g.value},{default:()=>[p()]})]),h("div",{class:"v-field__outline__end"},null)]),I.value&&b.value&&j(Ar,{ref:S,floating:!0,for:g.value},{default:()=>[p()]})])])}),{controlRef:L,fieldIconColor:E}}});function rg(e){function t(n,s){!e.autofocus||!n||s[0].target?.focus?.()}return{onIntersect:t}}const Z$=["color","file","time","date","datetime-local","week","month"],lg=ze({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:[Number,Function],prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,role:String,type:{type:String,default:"text"},modelModifiers:Object,...zi(),...Rd()},"VTextField"),pu=st()({name:"VTextField",directives:{vIntersect:Fi},inheritAttrs:!1,props:lg(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:s,slots:a}=t;const i=Zt(e,"modelValue"),{isFocused:o,focus:r,blur:f}=Jo(e),{onIntersect:u}=rg(e),d=se(()=>typeof e.counterValue=="function"?e.counterValue(i.value):typeof e.counterValue=="number"?e.counterValue:(i.value??"").toString().length),c=se(()=>{if(n.maxlength)return n.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter}),l=se(()=>["plain","underlined"].includes(e.variant)),m=ie(),v=ie(),C=ie(),b=se(()=>Z$.includes(e.type)||e.persistentPlaceholder||o.value||e.active);function _(){o.value||r(),Yt(()=>{C.value!==document.activeElement&&C.value?.focus()})}function g(L){s("mousedown:control",L),L.target!==C.value&&(_(),L.preventDefault())}function R(L){s("click:control",L)}function P(L,I){L.stopPropagation(),_(),Yt(()=>{i.value=null,I(),Au(e["onClick:clear"],L)})}function S(L){const I=L.target;if(i.value=I.value,e.modelModifiers?.trim&&["text","search","password","tel","url"].includes(e.type)){const T=[I.selectionStart,I.selectionEnd];Yt(()=>{I.selectionStart=T[0],I.selectionEnd=T[1]})}}return ut(()=>{const L=!!(a.counter||e.counter!==!1&&e.counter!=null),I=!!(L||a.details),[T,E]=Vi(n),{modelValue:y,...A}=Ws.filterProps(e),w=el.filterProps(e);return j(Ws,ot({ref:m,modelValue:i.value,"onUpdate:modelValue":k=>i.value=k,class:["v-text-field",{"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-input--plain-underlined":l.value},e.class],style:e.style},T,A,{centerAffix:!l.value,focused:o.value}),{...a,default:k=>{let{id:M,isDisabled:x,isDirty:F,isReadonly:V,isValid:D,reset:z}=k;return j(el,ot({ref:v,onMousedown:g,onClick:R,"onClick:clear":p=>P(p,z),"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"],role:e.role},w,{id:M.value,active:b.value||F.value,dirty:F.value||e.dirty,disabled:x.value,focused:o.value,error:D.value===!1}),{...a,default:p=>{let{props:{class:B,...U}}=p;const $=an(h("input",ot({ref:C,value:i.value,onInput:S,autofocus:e.autofocus,readonly:V.value,disabled:x.value,name:e.name,placeholder:e.placeholder,size:1,type:e.type,onFocus:_,onBlur:f},U,E),null),[[Fi,{handler:u},null,{once:!0}]]);return h(Je,null,[e.prefix&&h("span",{class:"v-text-field__prefix"},[h("span",{class:"v-text-field__prefix__text"},[e.prefix])]),a.default?h("div",{class:Se(B),"data-no-activator":""},[a.default(),$]):Hg($,{class:B}),e.suffix&&h("span",{class:"v-text-field__suffix"},[h("span",{class:"v-text-field__suffix__text"},[e.suffix])])])}})},details:I?k=>h(Je,null,[a.details?.(k),L&&h(Je,null,[h("span",null,null),j(og,{active:e.persistentCounter||o.value,value:d.value,max:c.value,disabled:e.disabled},a.counter)])]):void 0})}),Ui({},m,v,C)}}),Q$=ze({renderless:Boolean,...St()},"VVirtualScrollItem"),J$=st()({name:"VVirtualScrollItem",inheritAttrs:!1,props:Q$(),emits:{"update:height":e=>!0},setup(e,t){let{attrs:n,emit:s,slots:a}=t;const{resizeRef:i,contentRect:o}=yo(void 0,"border");rt(()=>o.value?.height,r=>{r!=null&&s("update:height",r)}),ut(()=>e.renderless?h(Je,null,[a.default?.({itemRef:i})]):h("div",ot({ref:i,class:["v-virtual-scroll__item",e.class],style:e.style},n),[a.default?.()]))}}),eF=-1,tF=1,Rc=100,nF=ze({itemHeight:{type:[Number,String],default:null},itemKey:{type:[String,Array,Function],default:null},height:[Number,String]},"virtual");function sF(e,t){const n=sl(),s=dt(0);ds(()=>{s.value=parseFloat(e.itemHeight||0)});const a=dt(0),i=dt(Math.ceil((parseInt(e.height)||n.height.value)/(s.value||16))||1),o=dt(0),r=dt(0),f=ie(),u=ie();let d=0;const{resizeRef:c,contentRect:l}=yo();ds(()=>{c.value=f.value});const m=se(()=>f.value===document.documentElement?n.height.value:l.value?.height||parseInt(e.height)||0),v=se(()=>!!(f.value&&u.value&&m.value&&s.value));let C=Array.from({length:t.value.length}),b=Array.from({length:t.value.length});const _=dt(0);let g=-1;function R(p){return C[p]||s.value}const P=gp(()=>{const p=performance.now();b[0]=0;const B=t.value.length;for(let U=1;U<=B-1;U++)b[U]=(b[U-1]||0)+R(U-1);_.value=Math.max(_.value,performance.now()-p)},_),S=rt(v,p=>{p&&(S(),d=u.value.offsetTop,P.immediate(),F(),~g&&Yt(()=>{Cn&&window.requestAnimationFrame(()=>{D(g),g=-1})}))});Fn(()=>{P.clear()});function L(p,B){const U=C[p],$=s.value;s.value=$?Math.min(s.value,B):B,(U!==B||$!==s.value)&&(C[p]=B,P())}function I(p){return p=ys(p,0,t.value.length-1),b[p]||0}function T(p){return aF(b,p)}let E=0,y=0,A=0;rt(m,(p,B)=>{B&&(F(),p<B&&requestAnimationFrame(()=>{y=0,F()}))});let w=-1;function k(){if(!f.value||!u.value)return;const p=f.value.scrollTop,B=performance.now();B-A>500?(y=Math.sign(p-E),d=u.value.offsetTop):y=p-E,E=p,A=B,window.clearTimeout(w),w=window.setTimeout(M,500),F()}function M(){!f.value||!u.value||(y=0,A=0,window.clearTimeout(w),F())}let x=-1;function F(){cancelAnimationFrame(x),x=requestAnimationFrame(V)}function V(){if(!f.value||!m.value)return;const p=E-d,B=Math.sign(y),U=Math.max(0,p-Rc),$=ys(T(U),0,t.value.length),ee=p+m.value+Rc,re=ys(T(ee)+1,$+1,t.value.length);if((B!==eF||$<a.value)&&(B!==tF||re>i.value)){const G=I(a.value)-I($),ae=I(re)-I(i.value);Math.max(G,ae)>Rc?(a.value=$,i.value=re):($<=0&&(a.value=$),re>=t.value.length&&(i.value=re))}o.value=I(a.value),r.value=I(t.value.length)-I(i.value)}function D(p){const B=I(p);!f.value||p&&!B?g=p:f.value.scrollTop=B}const z=se(()=>t.value.slice(a.value,i.value).map((p,B)=>{const U=B+a.value;return{raw:p,index:U,key:Fs(p,e.itemKey,U)}}));return rt(t,()=>{C=Array.from({length:t.value.length}),b=Array.from({length:t.value.length}),P.immediate(),F()},{deep:1}),{calculateVisibleItems:F,containerRef:f,markerRef:u,computedItems:z,paddingTop:o,paddingBottom:r,scrollToIndex:D,handleScroll:k,handleScrollend:M,handleItemResize:L}}function aF(e,t){let n=e.length-1,s=0,a=0,i=null,o=-1;if(e[n]<t)return n;for(;s<=n;)if(a=s+n>>1,i=e[a],i>t)n=a-1;else if(i<t)o=a,s=a+1;else return i===t?a:s;return o}const iF=ze({items:{type:Array,default:()=>[]},renderless:Boolean,...nF(),...St(),...Ts()},"VVirtualScroll"),oF=st()({name:"VVirtualScroll",props:iF(),setup(e,t){let{slots:n}=t;const s=ms("VVirtualScroll"),{dimensionStyles:a}=xs(e),{calculateVisibleItems:i,containerRef:o,markerRef:r,handleScroll:f,handleScrollend:u,handleItemResize:d,scrollToIndex:c,paddingTop:l,paddingBottom:m,computedItems:v}=sF(e,je(()=>e.items));return ws(()=>e.renderless,()=>{function C(){const _=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";o.value===document.documentElement?(document[_]("scroll",f,{passive:!0}),document[_]("scrollend",u)):(o.value?.[_]("scroll",f,{passive:!0}),o.value?.[_]("scrollend",u))}sn(()=>{o.value=_v(s.vnode.el,!0),C(!0)}),Fn(C)}),ut(()=>{const C=v.value.map(b=>j(J$,{key:b.key,renderless:e.renderless,"onUpdate:height":_=>d(b.index,_)},{default:_=>n.default?.({item:b.raw,index:b.index,..._})}));return e.renderless?h(Je,null,[h("div",{ref:r,class:"v-virtual-scroll__spacer",style:{paddingTop:_t(l.value)}},null),C,h("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:_t(m.value)}},null)]):h("div",{ref:o,class:Se(["v-virtual-scroll",e.class]),onScrollPassive:f,onScrollend:u,style:it([a.value,e.style])},[h("div",{ref:r,class:"v-virtual-scroll__container",style:{paddingTop:_t(l.value),paddingBottom:_t(m.value)}},[C])])}),{calculateVisibleItems:i,scrollToIndex:c}}});function rF(e,t){const n=dt(!1);let s;function a(r){cancelAnimationFrame(s),n.value=!0,s=requestAnimationFrame(()=>{s=requestAnimationFrame(()=>{n.value=!1})})}async function i(){await new Promise(r=>requestAnimationFrame(r)),await new Promise(r=>requestAnimationFrame(r)),await new Promise(r=>requestAnimationFrame(r)),await new Promise(r=>{if(n.value){const f=rt(n,()=>{f(),r()})}else r()})}async function o(r){if(r.key==="Tab"&&t.value?.focus(),!["PageDown","PageUp","Home","End"].includes(r.key))return;const f=e.value?.$el;if(!f)return;(r.key==="Home"||r.key==="End")&&f.scrollTo({top:r.key==="Home"?0:f.scrollHeight,behavior:"smooth"}),await i();const u=f.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(r.key==="PageDown"||r.key==="Home"){const d=f.getBoundingClientRect().top;for(const c of u)if(c.getBoundingClientRect().top>=d){c.focus();break}}else{const d=f.getBoundingClientRect().bottom;for(const c of[...u].reverse())if(c.getBoundingClientRect().bottom<=d){c.focus();break}}}return{onScrollPassive:a,onKeydown:o}}const lF=ze({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:Dt,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,...q0({itemChildren:!1})},"Select"),cF=ze({...lF(),...fa(lg({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Yo({transition:{component:md}})},"VSelect"),uF=st()({name:"VSelect",props:cF(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{slots:n}=t;const{t:s}=nl(),a=ie(),i=ie(),o=ie(),{items:r,transformIn:f,transformOut:u}=k$(e),d=Zt(e,"modelValue",[],p=>f(p===null?[null]:ks(p)),p=>{const B=u(p);return e.multiple?B:B[0]??null}),c=se(()=>typeof e.counterValue=="function"?e.counterValue(d.value):typeof e.counterValue=="number"?e.counterValue:d.value.length),l=R0(e),m=se(()=>d.value.map(p=>p.value)),v=dt(!1);let C="",b=-1,_;const g=se(()=>e.hideSelected?r.value.filter(p=>!d.value.some(B=>(e.valueComparator||sa)(B,p))):r.value),R=se(()=>e.hideNoData&&!g.value.length||l.isReadonly.value||l.isDisabled.value),P=Zt(e,"menu"),S=se({get:()=>P.value,set:p=>{P.value&&!p&&i.value?.openChildren.size||p&&R.value||(P.value=p)}}),L=je(()=>S.value?e.closeText:e.openText),I=se(()=>({...e.menuProps,activatorProps:{...e.menuProps?.activatorProps||{},"aria-haspopup":"listbox"}})),T=ie(),E=rF(T,a);function y(p){e.openOnClear&&(S.value=!0)}function A(){R.value||(S.value=!S.value)}function w(p){Wd(p)&&k(p)}function k(p){if(!p.key||l.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(p.key)&&p.preventDefault(),["Enter","ArrowDown"," "].includes(p.key)&&(S.value=!0),["Escape","Tab"].includes(p.key)&&(S.value=!1),p.key==="Home"?T.value?.focus("first"):p.key==="End"&&T.value?.focus("last");const B=1e3;if(!Wd(p))return;const U=performance.now();U-_>B&&(C="",b=-1),C+=p.key.toLowerCase(),_=U;const $=g.value;function ee(){let he=re();return he||C.at(-1)===C.at(-2)&&(C=C.slice(0,-1),he=re(),he)||(b=-1,he=re(),he)?he:(C=p.key.toLowerCase(),re())}function re(){for(let he=b+1;he<$.length;he++){const we=$[he];if(we.title.toLowerCase().startsWith(C))return[we,he]}}const G=ee();if(!G)return;const[ae,X]=G;b=X,T.value?.focus(X),e.multiple||(d.value=[ae])}function M(p){let B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!p.props.disabled)if(e.multiple){const U=d.value.findIndex(ee=>(e.valueComparator||sa)(ee.value,p.value)),$=B??!~U;if(~U){const ee=$?[...d.value,p]:[...d.value];ee.splice(U,1),d.value=ee}else $&&(d.value=[...d.value,p])}else{const U=B!==!1;d.value=U?[p]:[],Yt(()=>{S.value=!1})}}function x(p){T.value?.$el.contains(p.relatedTarget)||(S.value=!1)}function F(){e.eager&&o.value?.calculateVisibleItems()}function V(){v.value&&a.value?.focus()}function D(p){v.value=!0}function z(p){if(p==null)d.value=[];else if(Pr(a.value,":autofill")||Pr(a.value,":-webkit-autofill")){const B=r.value.find(U=>U.title===p);B&&M(B)}else a.value&&(a.value.value="")}return rt(S,()=>{if(!e.hideSelected&&S.value&&d.value.length){const p=g.value.findIndex(B=>d.value.some(U=>(e.valueComparator||sa)(U.value,B.value)));Cn&&window.requestAnimationFrame(()=>{p>=0&&o.value?.scrollToIndex(p)})}}),rt(()=>e.items,(p,B)=>{S.value||v.value&&!B.length&&p.length&&(S.value=!0)}),ut(()=>{const p=!!(e.chips||n.chip),B=!!(!e.hideNoData||g.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),U=d.value.length>0,$=pu.filterProps(e),ee=U||!v.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return j(pu,ot({ref:a},$,{modelValue:d.value.map(re=>re.props.value).join(", "),"onUpdate:modelValue":z,focused:v.value,"onUpdate:focused":re=>v.value=re,validationValue:d.externalValue,counterValue:c.value,dirty:U,class:["v-select",{"v-select--active-menu":S.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":d.value.length,"v-select--selection-slot":!!n.selection},e.class],style:e.style,inputmode:"none",placeholder:ee,"onClick:clear":y,"onMousedown:control":A,onBlur:x,onKeydown:k,"aria-label":s(L.value),title:s(L.value)}),{...n,default:()=>h(Je,null,[j(ig,ot({ref:i,modelValue:S.value,"onUpdate:modelValue":re=>S.value=re,activator:"parent",contentClass:"v-select__content",disabled:R.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:F,onAfterLeave:V},I.value),{default:()=>[B&&j(K0,ot({ref:T,selected:m.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:re=>re.preventDefault(),onKeydown:w,onFocusin:D,tabindex:"-1","aria-live":"polite","aria-label":`${e.label}-list`,color:e.itemColor??e.color},E,e.listProps),{default:()=>[n["prepend-item"]?.(),!g.value.length&&!e.hideNoData&&(n["no-data"]?.()??j($o,{key:"no-data",title:s(e.noDataText)},null)),j(oF,{ref:o,renderless:!0,items:g.value,itemKey:"value"},{default:re=>{let{item:G,index:ae,itemRef:X}=re;const he=pp(G.props),we=ot(G.props,{ref:X,key:G.value,onClick:()=>M(G,null)});return n.item?.({item:G,index:ae,props:we})??j($o,ot(we,{role:"option"}),{prepend:Ie=>{let{isSelected:K}=Ie;return h(Je,null,[e.multiple&&!e.hideSelected?j(du,{key:G.value,modelValue:K,ripple:!1,tabindex:"-1"},null):void 0,he.prependAvatar&&j(di,{image:he.prependAvatar},null),he.prependIcon&&j(pn,{icon:he.prependIcon},null)])}})}}),n["append-item"]?.()]})]}),d.value.map((re,G)=>{function ae(Ie){Ie.stopPropagation(),Ie.preventDefault(),M(re,!1)}const X={"onClick:close":ae,onKeydown(Ie){Ie.key!=="Enter"&&Ie.key!==" "||(Ie.preventDefault(),Ie.stopPropagation(),ae(Ie))},onMousedown(Ie){Ie.preventDefault(),Ie.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},he=p?!!n.chip:!!n.selection,we=he?_p(p?n.chip({item:re,index:G,props:X}):n.selection({item:re,index:G})):void 0;if(!(he&&!we))return h("div",{key:re.value,class:"v-select__selection"},[p?n.chip?j(cn,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:re.title}}},{default:()=>[we]}):j(L0,ot({key:"chip",closable:e.closableChips,size:"small",text:re.title,disabled:re.props.disabled},X),null):we??h("span",{class:"v-select__selection-text"},[re.title,e.multiple&&G<d.value.length-1&&h("span",{class:"v-select__selection-comma"},[nt(",")])])])})]),"append-inner":function(){for(var re=arguments.length,G=new Array(re),ae=0;ae<re;ae++)G[ae]=arguments[ae];return h(Je,null,[n["append-inner"]?.(...G),e.menuIcon?j(pn,{class:"v-select__menu-icon",color:a.value?.fieldIconColor,icon:e.menuIcon},null):void 0])}})}),Ui({isFocused:v,menu:S,select:M},a)}}),dF=ze({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...Ed({origin:"center center",scrollStrategy:"block",transition:{component:md},zIndex:2400})},"VDialog"),fF=st()({name:"VDialog",props:dF(),emits:{"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,t){let{emit:n,slots:s}=t;const a=Zt(e,"modelValue"),{scopeId:i}=er(),o=ie();function r(d){const c=d.relatedTarget,l=d.target;if(c!==l&&o.value?.contentEl&&o.value?.globalTop&&![document,o.value.contentEl].includes(l)&&!o.value.contentEl.contains(l)){const m=$r(o.value.contentEl);if(!m.length)return;const v=m[0],C=m[m.length-1];c===v?C.focus():v.focus()}}qn(()=>{document.removeEventListener("focusin",r)}),Cn&&rt(()=>a.value&&e.retainFocus,d=>{d?document.addEventListener("focusin",r):document.removeEventListener("focusin",r)},{immediate:!0});function f(){n("afterEnter"),(e.scrim||e.retainFocus)&&o.value?.contentEl&&!o.value.contentEl.contains(document.activeElement)&&o.value.contentEl.focus({preventScroll:!0})}function u(){n("afterLeave")}return rt(a,async d=>{d||(await Yt(),o.value.activatorEl?.focus({preventScroll:!0}))}),ut(()=>{const d=Jr.filterProps(e),c=ot({"aria-haspopup":"dialog"},e.activatorProps),l=ot({tabindex:-1},e.contentProps);return j(Jr,ot({ref:o,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},d,{modelValue:a.value,"onUpdate:modelValue":m=>a.value=m,"aria-modal":"true",activatorProps:c,contentProps:l,height:e.fullscreen?void 0:e.height,width:e.fullscreen?void 0:e.width,maxHeight:e.fullscreen?void 0:e.maxHeight,maxWidth:e.fullscreen?void 0:e.maxWidth,role:"dialog",onAfterEnter:f,onAfterLeave:u},i),{activator:s.activator,default:function(){for(var m=arguments.length,v=new Array(m),C=0;C<m;C++)v[C]=arguments[C];return j(cn,{root:"VDialog"},{default:()=>[s.default?.(...v)]})}})}),Ui({},o)}}),mF=st()({name:"VCardActions",props:St(),setup(e,t){let{slots:n}=t;return ua({VBtn:{slim:!0,variant:"text"}}),ut(()=>h("div",{class:Se(["v-card-actions",e.class]),style:it(e.style)},[n.default?.()])),{}}}),vF=ze({opacity:[Number,String],...St(),...en()},"VCardSubtitle"),hF=st()({name:"VCardSubtitle",props:vF(),setup(e,t){let{slots:n}=t;return ut(()=>j(e.tag,{class:Se(["v-card-subtitle",e.class]),style:it([{"--v-card-subtitle-opacity":e.opacity},e.style])},n)),{}}}),cg=hv("v-card-title"),gF=ze({appendAvatar:String,appendIcon:Dt,prependAvatar:String,prependIcon:Dt,subtitle:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},...St(),...Es()},"VCardItem"),pF=st()({name:"VCardItem",props:gF(),setup(e,t){let{slots:n}=t;return ut(()=>{const s=!!(e.prependAvatar||e.prependIcon),a=!!(s||n.prepend),i=!!(e.appendAvatar||e.appendIcon),o=!!(i||n.append),r=!!(e.title!=null||n.title),f=!!(e.subtitle!=null||n.subtitle);return h("div",{class:Se(["v-card-item",e.class]),style:it(e.style)},[a&&h("div",{key:"prepend",class:"v-card-item__prepend"},[n.prepend?j(cn,{key:"prepend-defaults",disabled:!s,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon}}},n.prepend):h(Je,null,[e.prependAvatar&&j(di,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&j(pn,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)])]),h("div",{class:"v-card-item__content"},[r&&j(cg,{key:"title"},{default:()=>[n.title?.()??Q(e.title)]}),f&&j(hF,{key:"subtitle"},{default:()=>[n.subtitle?.()??Q(e.subtitle)]}),n.default?.()]),o&&h("div",{key:"append",class:"v-card-item__append"},[n.append?j(cn,{key:"append-defaults",disabled:!i,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon}}},n.append):h(Je,null,[e.appendIcon&&j(pn,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&j(di,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)])])])}),{}}}),_F=ze({opacity:[Number,String],...St(),...en()},"VCardText"),ug=st()({name:"VCardText",props:_F(),setup(e,t){let{slots:n}=t;return ut(()=>j(e.tag,{class:Se(["v-card-text",e.class]),style:it([{"--v-card-text-opacity":e.opacity},e.style])},n)),{}}}),bF=ze({appendAvatar:String,appendIcon:Dt,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:Dt,ripple:{type:[Boolean,Object],default:!0},subtitle:{type:[String,Number,Boolean],default:void 0},text:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},...Zs(),...St(),...Es(),...Ts(),...ga(),...bd(),...Ml(),...wd(),...ss(),...Ol(),...en(),...fn(),...Va({variant:"elevated"})},"VCard"),yF=st()({name:"VCard",directives:{vRipple:qs},props:bF(),setup(e,t){let{attrs:n,slots:s}=t;const{themeClasses:a}=bn(e),{borderClasses:i}=Qs(e),{colorClasses:o,colorStyles:r,variantClasses:f}=Xo(e),{densityClasses:u}=Js(e),{dimensionStyles:d}=xs(e),{elevationClasses:c}=pa(e),{loaderClasses:l}=Bl(e),{locationStyles:m}=Il(e),{positionClasses:v}=kd(e),{roundedClasses:C}=as(e),b=Ll(e,n);return ut(()=>{const _=e.link!==!1&&b.isLink.value,g=!e.disabled&&e.link!==!1&&(e.link||b.isClickable.value),R=_?"a":e.tag,P=!!(s.title||e.title!=null),S=!!(s.subtitle||e.subtitle!=null),L=P||S,I=!!(s.append||e.appendAvatar||e.appendIcon),T=!!(s.prepend||e.prependAvatar||e.prependIcon),E=!!(s.image||e.image),y=L||T||I,A=!!(s.text||e.text!=null);return an(j(R,ot({class:["v-card",{"v-card--disabled":e.disabled,"v-card--flat":e.flat,"v-card--hover":e.hover&&!(e.disabled||e.flat),"v-card--link":g},a.value,i.value,o.value,u.value,c.value,l.value,v.value,C.value,f.value,e.class],style:[r.value,d.value,m.value,e.style],onClick:g&&b.navigate,tabindex:e.disabled?-1:void 0},b.linkProps),{default:()=>[E&&h("div",{key:"image",class:"v-card__image"},[s.image?j(cn,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},s.image):j(El,{key:"image-img",cover:!0,src:e.image},null)]),j(yd,{name:"v-card",active:!!e.loading,color:typeof e.loading=="boolean"?void 0:e.loading},{default:s.loader}),y&&j(pF,{key:"item",prependAvatar:e.prependAvatar,prependIcon:e.prependIcon,title:e.title,subtitle:e.subtitle,appendAvatar:e.appendAvatar,appendIcon:e.appendIcon},{default:s.item,prepend:s.prepend,title:s.title,subtitle:s.subtitle,append:s.append}),A&&j(ug,{key:"text"},{default:()=>[s.text?.()??e.text]}),s.default?.(),s.actions&&j(mF,null,{default:s.actions}),Go(g,"v-card")]}),[[qs,g&&e.ripple]])}),{}}}),wF=e=>{const{touchstartX:t,touchendX:n,touchstartY:s,touchendY:a}=e,i=.5,o=16;e.offsetX=n-t,e.offsetY=a-s,Math.abs(e.offsetY)<i*Math.abs(e.offsetX)&&(e.left&&n<t-o&&e.left(e),e.right&&n>t+o&&e.right(e)),Math.abs(e.offsetX)<i*Math.abs(e.offsetY)&&(e.up&&a<s-o&&e.up(e),e.down&&a>s+o&&e.down(e))};function kF(e,t){const n=e.changedTouches[0];t.touchstartX=n.clientX,t.touchstartY=n.clientY,t.start?.({originalEvent:e,...t})}function SF(e,t){const n=e.changedTouches[0];t.touchendX=n.clientX,t.touchendY=n.clientY,t.end?.({originalEvent:e,...t}),wF(t)}function CF(e,t){const n=e.changedTouches[0];t.touchmoveX=n.clientX,t.touchmoveY=n.clientY,t.move?.({originalEvent:e,...t})}function AF(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:e.left,right:e.right,up:e.up,down:e.down,start:e.start,move:e.move,end:e.end};return{touchstart:n=>kF(n,t),touchend:n=>SF(n,t),touchmove:n=>CF(n,t)}}function TF(e,t){const n=t.value,s=n?.parent?e.parentElement:e,a=n?.options??{passive:!0},i=t.instance?.$.uid;if(!s||!i)return;const o=AF(t.value);s._touchHandlers=s._touchHandlers??Object.create(null),s._touchHandlers[i]=o,bv(o).forEach(r=>{s.addEventListener(r,o[r],a)})}function xF(e,t){const n=t.value?.parent?e.parentElement:e,s=t.instance?.$.uid;if(!n?._touchHandlers||!s)return;const a=n._touchHandlers[s];bv(a).forEach(i=>{n.removeEventListener(i,a[i])}),delete n._touchHandlers[s]}const _u={mounted:TF,unmounted:xF},dg=Symbol.for("vuetify:v-window"),fg=Symbol.for("vuetify:v-window-group"),mg=ze({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||e==="hover"},touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},...St(),...en(),...fn()},"VWindow"),ev=st()({name:"VWindow",directives:{vTouch:_u},props:mg(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:s}=bn(e),{isRtl:a}=fs(),{t:i}=nl(),o=Rl(e,fg),r=ie(),f=se(()=>a.value?!e.reverse:e.reverse),u=dt(!1),d=se(()=>{const P=e.direction==="vertical"?"y":"x",L=(f.value?!u.value:u.value)?"-reverse":"";return`v-window-${P}${L}-transition`}),c=dt(0),l=ie(void 0),m=se(()=>o.items.value.findIndex(P=>o.selected.value.includes(P.id)));rt(m,(P,S)=>{const L=o.items.value.length,I=L-1;L<=2?u.value=P<S:P===I&&S===0?u.value=!0:P===0&&S===I?u.value=!1:u.value=P<S}),Ks(dg,{transition:d,isReversed:u,transitionCount:c,transitionHeight:l,rootRef:r});const v=je(()=>e.continuous||m.value!==0),C=je(()=>e.continuous||m.value!==o.items.value.length-1);function b(){v.value&&o.prev()}function _(){C.value&&o.next()}const g=se(()=>{const P=[],S={icon:a.value?e.nextIcon:e.prevIcon,class:`v-window__${f.value?"right":"left"}`,onClick:o.prev,"aria-label":i("$vuetify.carousel.prev")};P.push(v.value?n.prev?n.prev({props:S}):j(Lo,S,null):h("div",null,null));const L={icon:a.value?e.prevIcon:e.nextIcon,class:`v-window__${f.value?"left":"right"}`,onClick:o.next,"aria-label":i("$vuetify.carousel.next")};return P.push(C.value?n.next?n.next({props:L}):j(Lo,L,null):h("div",null,null)),P}),R=se(()=>e.touch===!1?e.touch:{...{left:()=>{f.value?b():_()},right:()=>{f.value?_():b()},start:S=>{let{originalEvent:L}=S;L.stopPropagation()}},...e.touch===!0?{}:e.touch});return ut(()=>an(j(e.tag,{ref:r,class:Se(["v-window",{"v-window--show-arrows-on-hover":e.showArrows==="hover"},s.value,e.class]),style:it(e.style)},{default:()=>[h("div",{class:"v-window__container",style:{height:l.value}},[n.default?.({group:o}),e.showArrows!==!1&&h("div",{class:"v-window__controls"},[g.value])]),n.additional?.({group:o})]}),[[_u,R.value]])),{group:o}}}),vg=ze({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...St(),...gd(),...tg()},"VWindowItem"),tv=st()({name:"VWindowItem",directives:{vTouch:_u},props:vg(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const s=ts(dg),a=pd(e,fg),{isBooted:i}=Ko();if(!s||!a)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const o=dt(!1),r=se(()=>i.value&&(s.isReversed.value?e.reverseTransition!==!1:e.transition!==!1));function f(){!o.value||!s||(o.value=!1,s.transitionCount.value>0&&(s.transitionCount.value-=1,s.transitionCount.value===0&&(s.transitionHeight.value=void 0)))}function u(){o.value||!s||(o.value=!0,s.transitionCount.value===0&&(s.transitionHeight.value=_t(s.rootRef.value?.clientHeight)),s.transitionCount.value+=1)}function d(){f()}function c(v){o.value&&Yt(()=>{!r.value||!o.value||!s||(s.transitionHeight.value=_t(v.clientHeight))})}const l=se(()=>{const v=s.isReversed.value?e.reverseTransition:e.transition;return r.value?{name:typeof v!="string"?s.transition.value:v,onBeforeEnter:u,onAfterEnter:f,onEnterCancelled:d,onBeforeLeave:u,onAfterLeave:f,onLeaveCancelled:d,onEnter:c}:!1}),{hasContent:m}=ng(e,a.isSelected);return ut(()=>j(na,{transition:l.value,disabled:!i.value},{default:()=>[an(h("div",{class:Se(["v-window-item",a.selectedClass.value,e.class]),style:it(e.style)},[m.value&&n.default?.()]),[[js,a.isSelected.value]])]})),{groupItem:a}}}),EF=ze({color:String,...Zs(),...St(),...Ts(),...ga(),...Ml(),...wd(),...ss(),...en(),...fn()},"VSheet"),RF=st()({name:"VSheet",props:EF(),setup(e,t){let{slots:n}=t;const{themeClasses:s}=bn(e),{backgroundColorClasses:a,backgroundColorStyles:i}=Qn(()=>e.color),{borderClasses:o}=Qs(e),{dimensionStyles:r}=xs(e),{elevationClasses:f}=pa(e),{locationStyles:u}=Il(e),{positionClasses:d}=kd(e),{roundedClasses:c}=as(e);return ut(()=>j(e.tag,{class:Se(["v-sheet",s.value,a.value,o.value,f.value,d.value,c.value,e.class]),style:it([i.value,r.value,u.value,e.style])},n)),{}}}),MF=ze({fluid:{type:Boolean,default:!1},...St(),...Ts(),...en()},"VContainer"),IF=st()({name:"VContainer",props:MF(),setup(e,t){let{slots:n}=t;const{rtlClasses:s}=fs(),{dimensionStyles:a}=xs(e);return ut(()=>j(e.tag,{class:Se(["v-container",{"v-container--fluid":e.fluid},s.value,e.class]),style:it([a.value,e.style])},n)),{}}}),hg=al.reduce((e,t)=>(e[t]={type:[Boolean,String,Number],default:!1},e),{}),gg=al.reduce((e,t)=>{const n="offset"+wu(t);return e[n]={type:[String,Number],default:null},e},{}),pg=al.reduce((e,t)=>{const n="order"+wu(t);return e[n]={type:[String,Number],default:null},e},{}),nv={col:Object.keys(hg),offset:Object.keys(gg),order:Object.keys(pg)};function BF(e,t,n){let s=e;if(!(n==null||n===!1)){if(t){const a=t.replace(e,"");s+=`-${a}`}return e==="col"&&(s="v-"+s),e==="col"&&(n===""||n===!0)||(s+=`-${n}`),s.toLowerCase()}}const LF=["auto","start","end","center","baseline","stretch"],OF=ze({cols:{type:[Boolean,String,Number],default:!1},...hg,offset:{type:[String,Number],default:null},...gg,order:{type:[String,Number],default:null},...pg,alignSelf:{type:String,default:null,validator:e=>LF.includes(e)},...St(),...en()},"VCol"),PF=st()({name:"VCol",props:OF(),setup(e,t){let{slots:n}=t;const s=se(()=>{const a=[];let i;for(i in nv)nv[i].forEach(r=>{const f=e[r],u=BF(i,r,f);u&&a.push(u)});const o=a.some(r=>r.startsWith("v-col-"));return a.push({"v-col":!o||!e.cols,[`v-col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf}),a});return()=>Fo(e.tag,{class:[s.value,e.class],style:e.style},n.default?.())}}),Md=["start","end","center"],_g=["space-between","space-around","space-evenly"];function Id(e,t){return al.reduce((n,s)=>{const a=e+wu(s);return n[a]=t(),n},{})}const $F=[...Md,"baseline","stretch"],bg=e=>$F.includes(e),yg=Id("align",()=>({type:String,default:null,validator:bg})),FF=[...Md,..._g],wg=e=>FF.includes(e),kg=Id("justify",()=>({type:String,default:null,validator:wg})),DF=[...Md,..._g,"stretch"],Sg=e=>DF.includes(e),Cg=Id("alignContent",()=>({type:String,default:null,validator:Sg})),sv={align:Object.keys(yg),justify:Object.keys(kg),alignContent:Object.keys(Cg)},VF={align:"align",justify:"justify",alignContent:"align-content"};function NF(e,t,n){let s=VF[e];if(n!=null){if(t){const a=t.replace(e,"");s+=`-${a}`}return s+=`-${n}`,s.toLowerCase()}}const jF=ze({dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:bg},...yg,justify:{type:String,default:null,validator:wg},...kg,alignContent:{type:String,default:null,validator:Sg},...Cg,...St(),...en()},"VRow"),HF=st()({name:"VRow",props:jF(),setup(e,t){let{slots:n}=t;const s=se(()=>{const a=[];let i;for(i in sv)sv[i].forEach(o=>{const r=e[o],f=NF(i,o,r);f&&a.push(f)});return a.push({"v-row--no-gutters":e.noGutters,"v-row--dense":e.dense,[`align-${e.align}`]:e.align,[`justify-${e.justify}`]:e.justify,[`align-content-${e.alignContent}`]:e.alignContent}),a});return()=>Fo(e.tag,{class:["v-row",s.value,e.class],style:e.style},n.default?.())}}),zF=ze({scrollable:Boolean,...St(),...Ts(),...en({tag:"main"})},"VMain"),UF=st()({name:"VMain",props:zF(),setup(e,t){let{slots:n}=t;const{dimensionStyles:s}=xs(e),{mainStyles:a}=bp(),{ssrBootStyles:i}=Ko();return ut(()=>j(e.tag,{class:Se(["v-main",{"v-main--scrollable":e.scrollable},e.class]),style:it([a.value,i.value,s.value,e.style])},{default:()=>[e.scrollable?h("div",{class:"v-main__scroller"},[n.default?.()]):n.default?.()]})),{}}});function qF(e){let{rootEl:t,isSticky:n,layoutItemStyles:s}=e;const a=dt(!1),i=dt(0),o=se(()=>{const u=typeof a.value=="boolean"?"top":a.value;return[n.value?{top:"auto",bottom:"auto",height:void 0}:void 0,a.value?{[u]:_t(i.value)}:{top:s.value.top}]});sn(()=>{rt(n,u=>{u?window.addEventListener("scroll",f,{passive:!0}):window.removeEventListener("scroll",f)},{immediate:!0})}),qn(()=>{window.removeEventListener("scroll",f)});let r=0;function f(){const u=r>window.scrollY?"up":"down",d=t.value.getBoundingClientRect(),c=parseFloat(s.value.top??0),l=window.scrollY-Math.max(0,i.value-c),m=d.height+Math.max(i.value,c)-window.scrollY-window.innerHeight,v=parseFloat(getComputedStyle(t.value).getPropertyValue("--v-body-scroll-y"))||0;d.height<window.innerHeight-c?(a.value="top",i.value=c):u==="up"&&a.value==="bottom"||u==="down"&&a.value==="top"?(i.value=window.scrollY+d.top-v,a.value=!0):u==="down"&&m<=0?(i.value=0,a.value="bottom"):u==="up"&&l<=0&&(v?a.value!=="top"&&(i.value=-l+v+c,a.value="top"):(i.value=d.top+l,a.value="top")),r=window.scrollY}return{isStuck:a,stickyStyles:o}}const WF=100,YF=20;function av(e){return(e<0?-1:1)*Math.sqrt(Math.abs(e))*1.41421356237}function iv(e){if(e.length<2)return 0;if(e.length===2)return e[1].t===e[0].t?0:(e[1].d-e[0].d)/(e[1].t-e[0].t);let t=0;for(let n=e.length-1;n>0;n--){if(e[n].t===e[n-1].t)continue;const s=av(t),a=(e[n].d-e[n-1].d)/(e[n].t-e[n-1].t);t+=(a-s)*Math.abs(a),n===e.length-1&&(t*=.5)}return av(t)*1e3}function KF(){const e={};function t(a){Array.from(a.changedTouches).forEach(i=>{(e[i.identifier]??(e[i.identifier]=new gv(YF))).push([a.timeStamp,i])})}function n(a){Array.from(a.changedTouches).forEach(i=>{delete e[i.identifier]})}function s(a){const i=e[a]?.values().reverse();if(!i)throw new Error(`No samples for touch id ${a}`);const o=i[0],r=[],f=[];for(const u of i){if(o[0]-u[0]>WF)break;r.push({t:u[0],d:u[1].clientX}),f.push({t:u[0],d:u[1].clientY})}return{x:iv(r),y:iv(f),get direction(){const{x:u,y:d}=this,[c,l]=[Math.abs(u),Math.abs(d)];return c>l&&u>=0?"right":c>l&&u<=0?"left":l>c&&d>=0?"down":l>c&&d<=0?"up":GF()}}}return{addMovement:t,endTouch:n,getVelocity:s}}function GF(){throw new Error}function XF(e){let{el:t,isActive:n,isTemporary:s,width:a,touchless:i,position:o}=e;sn(()=>{window.addEventListener("touchstart",g,{passive:!0}),window.addEventListener("touchmove",R,{passive:!1}),window.addEventListener("touchend",P,{passive:!0})}),qn(()=>{window.removeEventListener("touchstart",g),window.removeEventListener("touchmove",R),window.removeEventListener("touchend",P)});const r=se(()=>["left","right"].includes(o.value)),{addMovement:f,endTouch:u,getVelocity:d}=KF();let c=!1;const l=dt(!1),m=dt(0),v=dt(0);let C;function b(L,I){return(o.value==="left"?L:o.value==="right"?document.documentElement.clientWidth-L:o.value==="top"?L:o.value==="bottom"?document.documentElement.clientHeight-L:wi())-(I?a.value:0)}function _(L){let I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const T=o.value==="left"?(L-v.value)/a.value:o.value==="right"?(document.documentElement.clientWidth-L-v.value)/a.value:o.value==="top"?(L-v.value)/a.value:o.value==="bottom"?(document.documentElement.clientHeight-L-v.value)/a.value:wi();return I?ys(T):T}function g(L){if(i.value)return;const I=L.changedTouches[0].clientX,T=L.changedTouches[0].clientY,E=25,y=o.value==="left"?I<E:o.value==="right"?I>document.documentElement.clientWidth-E:o.value==="top"?T<E:o.value==="bottom"?T>document.documentElement.clientHeight-E:wi(),A=n.value&&(o.value==="left"?I<a.value:o.value==="right"?I>document.documentElement.clientWidth-a.value:o.value==="top"?T<a.value:o.value==="bottom"?T>document.documentElement.clientHeight-a.value:wi());(y||A||n.value&&s.value)&&(C=[I,T],v.value=b(r.value?I:T,n.value),m.value=_(r.value?I:T),c=v.value>-20&&v.value<80,u(L),f(L))}function R(L){const I=L.changedTouches[0].clientX,T=L.changedTouches[0].clientY;if(c){if(!L.cancelable){c=!1;return}const y=Math.abs(I-C[0]),A=Math.abs(T-C[1]);(r.value?y>A&&y>3:A>y&&A>3)?(l.value=!0,c=!1):(r.value?A:y)>3&&(c=!1)}if(!l.value)return;L.preventDefault(),f(L);const E=_(r.value?I:T,!1);m.value=Math.max(0,Math.min(1,E)),E>1?v.value=b(r.value?I:T,!0):E<0&&(v.value=b(r.value?I:T,!1))}function P(L){if(c=!1,!l.value)return;f(L),l.value=!1;const I=d(L.changedTouches[0].identifier),T=Math.abs(I.x),E=Math.abs(I.y);(r.value?T>E&&T>400:E>T&&E>3)?n.value=I.direction===({left:"right",right:"left",top:"down",bottom:"up"}[o.value]||wi()):n.value=m.value>.5}const S=se(()=>l.value?{transform:o.value==="left"?`translateX(calc(-100% + ${m.value*a.value}px))`:o.value==="right"?`translateX(calc(100% - ${m.value*a.value}px))`:o.value==="top"?`translateY(calc(-100% + ${m.value*a.value}px))`:o.value==="bottom"?`translateY(calc(100% - ${m.value*a.value}px))`:wi(),transition:"none"}:void 0);return ws(l,()=>{const L=t.value?.style.transform??null,I=t.value?.style.transition??null;ds(()=>{t.value?.style.setProperty("transform",S.value?.transform||"none"),t.value?.style.setProperty("transition",S.value?.transition||null)}),Fn(()=>{t.value?.style.setProperty("transform",L),t.value?.style.setProperty("transition",I)})}),{isDragging:l,dragProgress:m,dragStyles:S}}function wi(){throw new Error}const ZF=["start","end","left","right","top","bottom"],QF=ze({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,persistent:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:e=>ZF.includes(e)},sticky:Boolean,...Zs(),...St(),...Q0(),...vv({mobile:null}),...ga(),...mv(),...ss(),...en({tag:"nav"}),...fn()},"VNavigationDrawer"),JF=st()({name:"VNavigationDrawer",props:QF(),emits:{"update:modelValue":e=>!0,"update:rail":e=>!0},setup(e,t){let{attrs:n,emit:s,slots:a}=t;const{isRtl:i}=fs(),{themeClasses:o}=bn(e),{borderClasses:r}=Qs(e),{backgroundColorClasses:f,backgroundColorStyles:u}=Qn(()=>e.color),{elevationClasses:d}=pa(e),{displayClasses:c,mobile:l}=sl(e),{roundedClasses:m}=as(e),v=h0(),C=Zt(e,"modelValue",null,p=>!!p),{ssrBootStyles:b}=Ko(),{scopeId:_}=er(),g=ie(),R=dt(!1),{runOpenDelay:P,runCloseDelay:S}=J0(e,p=>{R.value=p}),L=se(()=>e.rail&&e.expandOnHover&&R.value?Number(e.width):Number(e.rail?e.railWidth:e.width)),I=se(()=>yp(e.location,i.value)),T=je(()=>e.persistent),E=se(()=>!e.permanent&&(l.value||e.temporary)),y=se(()=>e.sticky&&!E.value&&I.value!=="bottom");ws(()=>e.expandOnHover&&e.rail!=null,()=>{rt(R,p=>s("update:rail",!p))}),ws(()=>!e.disableResizeWatcher,()=>{rt(E,p=>!e.permanent&&Yt(()=>C.value=!p))}),ws(()=>!e.disableRouteWatcher&&!!v,()=>{rt(v.currentRoute,()=>E.value&&(C.value=!1))}),rt(()=>e.permanent,p=>{p&&(C.value=!0)}),e.modelValue==null&&!E.value&&(C.value=e.permanent||!l.value);const{isDragging:A,dragProgress:w}=XF({el:g,isActive:C,isTemporary:E,width:L,touchless:je(()=>e.touchless),position:I}),k=se(()=>{const p=E.value?0:e.rail&&e.expandOnHover?Number(e.railWidth):L.value;return A.value?p*w.value:p}),{layoutItemStyles:M,layoutItemScrimStyles:x}=fv({id:e.name,order:se(()=>parseInt(e.order,10)),position:I,layoutSize:k,elementSize:L,active:yu(C),disableTransitions:je(()=>A.value),absolute:se(()=>e.absolute||y.value&&typeof F.value!="string")}),{isStuck:F,stickyStyles:V}=qF({rootEl:g,isSticky:y,layoutItemStyles:M}),D=Qn(()=>typeof e.scrim=="string"?e.scrim:null),z=se(()=>({...A.value?{opacity:w.value*.2,transition:"none"}:void 0,...x.value}));return ua({VList:{bgColor:"transparent"}}),ut(()=>{const p=a.image||e.image;return h(Je,null,[j(e.tag,ot({ref:g,onMouseenter:P,onMouseleave:S,class:["v-navigation-drawer",`v-navigation-drawer--${I.value}`,{"v-navigation-drawer--expand-on-hover":e.expandOnHover,"v-navigation-drawer--floating":e.floating,"v-navigation-drawer--is-hovering":R.value,"v-navigation-drawer--rail":e.rail,"v-navigation-drawer--temporary":E.value,"v-navigation-drawer--persistent":T.value,"v-navigation-drawer--active":C.value,"v-navigation-drawer--sticky":y.value},o.value,f.value,r.value,c.value,d.value,m.value,e.class],style:[u.value,M.value,b.value,V.value,e.style]},_,n),{default:()=>[p&&h("div",{key:"image",class:"v-navigation-drawer__img"},[a.image?j(cn,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{alt:"",cover:!0,height:"inherit",src:e.image}}},a.image):j(El,{key:"image-img",alt:"",cover:!0,height:"inherit",src:e.image},null)]),a.prepend&&h("div",{class:"v-navigation-drawer__prepend"},[a.prepend?.()]),h("div",{class:"v-navigation-drawer__content"},[a.default?.()]),a.append&&h("div",{class:"v-navigation-drawer__append"},[a.append?.()])]}),j(Ba,{name:"fade-transition"},{default:()=>[E.value&&(A.value||C.value)&&!!e.scrim&&h("div",ot({class:["v-navigation-drawer__scrim",D.backgroundColorClasses.value],style:[z.value,D.backgroundColorStyles.value],onClick:()=>{T.value||(C.value=!1)}},_),null)]})])}),{isStuck:F}}}),eD=ze({...Pl({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),tD=st()({name:"VRadio",props:eD(),setup(e,t){let{slots:n}=t;return ut(()=>{const s=fi.filterProps(e);return j(fi,ot(s,{class:["v-radio",e.class],style:e.style,type:"radio"}),n)}),{}}}),nD=ze({height:{type:[Number,String],default:"auto"},...zi(),...fa(Cd(),["multiple"]),trueIcon:{type:Dt,default:"$radioOn"},falseIcon:{type:Dt,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),sD=st()({name:"VRadioGroup",inheritAttrs:!1,props:nD(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:s}=t;const a=Ys(),i=se(()=>e.id||`radio-group-${a}`),o=Zt(e,"modelValue");return ut(()=>{const[r,f]=Vi(n),u=Ws.filterProps(e),d=fi.filterProps(e),c=s.label?s.label({label:e.label,props:{for:i.value}}):e.label;return j(Ws,ot({class:["v-radio-group",e.class],style:e.style},r,u,{modelValue:o.value,"onUpdate:modelValue":l=>o.value=l,id:i.value}),{...s,default:l=>{let{id:m,messagesId:v,isDisabled:C,isReadonly:b}=l;return h(Je,null,[c&&j(Sd,{id:m.value},{default:()=>[c]}),j(NP,ot(d,{id:m.value,"aria-describedby":v.value,defaultsTarget:"VRadio",trueIcon:e.trueIcon,falseIcon:e.falseIcon,type:e.type,disabled:C.value,readonly:b.value,"aria-labelledby":c?m.value:void 0,multiple:!1},f,{modelValue:o.value,"onUpdate:modelValue":_=>o.value=_}),s)])}})}),{}}}),aD=ze({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...zi(),...Pl()},"VSwitch"),iD=st()({name:"VSwitch",inheritAttrs:!1,props:aD(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,t){let{attrs:n,slots:s}=t;const a=Zt(e,"indeterminate"),i=Zt(e,"modelValue"),{loaderClasses:o}=Bl(e),{isFocused:r,focus:f,blur:u}=Jo(e),d=ie(),c=Cn&&window.matchMedia("(forced-colors: active)").matches,l=je(()=>typeof e.loading=="string"&&e.loading!==""?e.loading:e.color),m=Ys(),v=je(()=>e.id||`switch-${m}`);function C(){a.value&&(a.value=!1)}function b(_){_.stopPropagation(),_.preventDefault(),d.value?.input?.click()}return ut(()=>{const[_,g]=Vi(n),R=Ws.filterProps(e),P=fi.filterProps(e);return j(Ws,ot({class:["v-switch",{"v-switch--flat":e.flat},{"v-switch--inset":e.inset},{"v-switch--indeterminate":a.value},o.value,e.class]},_,R,{modelValue:i.value,"onUpdate:modelValue":S=>i.value=S,id:v.value,focused:r.value,style:e.style}),{...s,default:S=>{let{id:L,messagesId:I,isDisabled:T,isReadonly:E,isValid:y}=S;const A={model:i,isValid:y};return j(fi,ot({ref:d},P,{modelValue:i.value,"onUpdate:modelValue":[w=>i.value=w,C],id:L.value,"aria-describedby":I.value,type:"checkbox","aria-checked":a.value?"mixed":void 0,disabled:T.value,readonly:E.value,onFocus:f,onBlur:u},g),{...s,default:w=>{let{backgroundColorClasses:k,backgroundColorStyles:M}=w;return h("div",{class:Se(["v-switch__track",c?void 0:k.value]),style:it(M.value),onClick:b},[s["track-true"]&&h("div",{key:"prepend",class:"v-switch__track-true"},[s["track-true"](A)]),s["track-false"]&&h("div",{key:"append",class:"v-switch__track-false"},[s["track-false"](A)])])},input:w=>{let{inputNode:k,icon:M,backgroundColorClasses:x,backgroundColorStyles:F}=w;return h(Je,null,[k,h("div",{class:Se(["v-switch__thumb",{"v-switch__thumb--filled":M||e.loading},e.inset||c?void 0:x.value]),style:it(e.inset?void 0:F.value)},[s.thumb?j(cn,{defaults:{VIcon:{icon:M,size:"x-small"}}},{default:()=>[s.thumb({...A,icon:M})]}):j(cP,null,{default:()=>[e.loading?j(yd,{name:"v-switch",active:!0,color:y.value===!1?void 0:l.value},{default:V=>s.loader?s.loader(V):j(_d,{active:V.isActive,color:V.color,indeterminate:!0,size:"16",width:"2"},null)}):M&&j(pn,{key:String(M),icon:M,size:"x-small"},null)]})])])}})}})}),{}}}),Bd=Symbol.for("vuetify:v-tabs"),oD=ze({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...fa(C0({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),Ag=st()({name:"VTab",props:oD(),setup(e,t){let{slots:n,attrs:s}=t;const{textColorClasses:a,textColorStyles:i}=Us(()=>e.sliderColor),o=ie(),r=ie(),f=se(()=>e.direction==="horizontal"),u=se(()=>o.value?.group?.isSelected.value??!1);function d(c){let{value:l}=c;if(l){const m=o.value?.$el.parentElement?.querySelector(".v-tab--selected .v-tab__slider"),v=r.value;if(!m||!v)return;const C=getComputedStyle(m).color,b=m.getBoundingClientRect(),_=v.getBoundingClientRect(),g=f.value?"x":"y",R=f.value?"X":"Y",P=f.value?"right":"bottom",S=f.value?"width":"height",L=b[g],I=_[g],T=L>I?b[P]-_[P]:b[g]-_[g],E=Math.sign(T)>0?f.value?"right":"bottom":Math.sign(T)<0?f.value?"left":"top":"center",A=(Math.abs(T)+(Math.sign(T)<0?b[S]:_[S]))/Math.max(b[S],_[S])||0,w=b[S]/_[S]||0,k=1.5;ai(v,{backgroundColor:[C,"currentcolor"],transform:[`translate${R}(${T}px) scale${R}(${w})`,`translate${R}(${T/k}px) scale${R}(${(A-1)/k+1})`,"none"],transformOrigin:Array(3).fill(E)},{duration:225,easing:bo})}}return ut(()=>{const c=Lo.filterProps(e);return j(Lo,ot({symbol:Bd,ref:o,class:["v-tab",e.class],style:e.style,tabindex:u.value?0:-1,role:"tab","aria-selected":String(u.value),active:!1},c,s,{block:e.fixed,maxWidth:e.fixed?300:void 0,"onGroup:selected":d}),{...n,default:()=>h(Je,null,[n.default?.()??e.text,!e.hideSlider&&h("div",{ref:r,class:Se(["v-tab__slider",a.value]),style:it(i.value)},null)])})}),Ui({},o)}}),rD=ze({...fa(mg(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),Tg=st()({name:"VTabsWindow",props:rD(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const s=ts(Bd,null),a=Zt(e,"modelValue"),i=se({get(){return a.value!=null||!s?a.value:s.items.value.find(o=>s.selected.value.includes(o.id))?.value},set(o){a.value=o}});return ut(()=>{const o=ev.filterProps(e);return j(ev,ot({_as:"VTabsWindow"},o,{modelValue:i.value,"onUpdate:modelValue":r=>i.value=r,class:["v-tabs-window",e.class],style:e.style,mandatory:!1,touch:!1}),n)}),{}}}),lD=ze({...vg()},"VTabsWindowItem"),xg=st()({name:"VTabsWindowItem",props:lD(),setup(e,t){let{slots:n}=t;return ut(()=>{const s=tv.filterProps(e);return j(tv,ot({_as:"VTabsWindowItem"},s,{class:["v-tabs-window-item",e.class],style:e.style}),n)}),{}}});function cD(e){return e?e.map(t=>Or(t)?t:{text:t,value:t}):[]}const uD=ze({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...Ad({mandatory:"force",selectedClass:"v-tab-item--selected"}),...Es(),...en()},"VTabs"),dD=st()({name:"VTabs",props:uD(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:s}=t;const a=Zt(e,"modelValue"),i=se(()=>cD(e.items)),{densityClasses:o}=Js(e),{backgroundColorClasses:r,backgroundColorStyles:f}=Qn(()=>e.bgColor),{scopeId:u}=er();return ua({VTab:{color:je(()=>e.color),direction:je(()=>e.direction),stacked:je(()=>e.stacked),fixed:je(()=>e.fixedTabs),sliderColor:je(()=>e.sliderColor),hideSlider:je(()=>e.hideSlider)}}),ut(()=>{const d=Zr.filterProps(e),c=!!(s.window||e.items.length>0);return h(Je,null,[j(Zr,ot(d,{modelValue:a.value,"onUpdate:modelValue":l=>a.value=l,class:["v-tabs",`v-tabs--${e.direction}`,`v-tabs--align-tabs-${e.alignTabs}`,{"v-tabs--fixed-tabs":e.fixedTabs,"v-tabs--grow":e.grow,"v-tabs--stacked":e.stacked},o.value,r.value,e.class],style:[{"--v-tabs-height":_t(e.height)},f.value,e.style],role:"tablist",symbol:Bd},u,n),{default:()=>[s.default?.()??i.value.map(l=>s.tab?.({item:l})??j(Ag,ot(l,{key:l.text,value:l.value}),{default:s[`tab.${l.value}`]?()=>s[`tab.${l.value}`]?.({item:l}):void 0}))]}),c&&j(Tg,ot({modelValue:a.value,"onUpdate:modelValue":l=>a.value=l,key:"tabs-window"},u),{default:()=>[i.value.map(l=>s.item?.({item:l})??j(xg,{value:l.value},{default:()=>s[`item.${l.value}`]?.({item:l})})),s.window?.()]})])}),{}}}),fD=ze({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...zi(),...Rd()},"VTextarea"),mD=st()({name:"VTextarea",directives:{vIntersect:Fi},inheritAttrs:!1,props:fD(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:s,slots:a}=t;const i=Zt(e,"modelValue"),{isFocused:o,focus:r,blur:f}=Jo(e),{onIntersect:u}=rg(e),d=se(()=>typeof e.counterValue=="function"?e.counterValue(i.value):(i.value||"").toString().length),c=se(()=>{if(n.maxlength)return n.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter}),l=ie(),m=ie(),v=dt(""),C=ie(),b=se(()=>e.persistentPlaceholder||o.value||e.active);function _(){C.value!==document.activeElement&&C.value?.focus(),o.value||r()}function g(A){_(),s("click:control",A)}function R(A){s("mousedown:control",A)}function P(A){A.stopPropagation(),_(),Yt(()=>{i.value="",Au(e["onClick:clear"],A)})}function S(A){const w=A.target;if(i.value=w.value,e.modelModifiers?.trim){const k=[w.selectionStart,w.selectionEnd];Yt(()=>{w.selectionStart=k[0],w.selectionEnd=k[1]})}}const L=ie(),I=ie(Number(e.rows)),T=se(()=>["plain","underlined"].includes(e.variant));ds(()=>{e.autoGrow||(I.value=Number(e.rows))});function E(){e.autoGrow&&Yt(()=>{if(!L.value||!m.value)return;const A=getComputedStyle(L.value),w=getComputedStyle(m.value.$el),k=parseFloat(A.getPropertyValue("--v-field-padding-top"))+parseFloat(A.getPropertyValue("--v-input-padding-top"))+parseFloat(A.getPropertyValue("--v-field-padding-bottom")),M=L.value.scrollHeight,x=parseFloat(A.lineHeight),F=Math.max(parseFloat(e.rows)*x+k,parseFloat(w.getPropertyValue("--v-input-control-height"))),V=parseFloat(e.maxRows)*x+k||1/0,D=ys(M??0,F,V);I.value=Math.floor((D-k)/x),v.value=_t(D)})}sn(E),rt(i,E),rt(()=>e.rows,E),rt(()=>e.maxRows,E),rt(()=>e.density,E);let y;return rt(L,A=>{A?(y=new ResizeObserver(E),y.observe(L.value)):y?.disconnect()}),qn(()=>{y?.disconnect()}),ut(()=>{const A=!!(a.counter||e.counter||e.counterValue),w=!!(A||a.details),[k,M]=Vi(n),{modelValue:x,...F}=Ws.filterProps(e),V=el.filterProps(e);return j(Ws,ot({ref:l,modelValue:i.value,"onUpdate:modelValue":D=>i.value=D,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-input--plain-underlined":T.value},e.class],style:e.style},k,F,{centerAffix:I.value===1&&!T.value,focused:o.value}),{...a,default:D=>{let{id:z,isDisabled:p,isDirty:B,isReadonly:U,isValid:$}=D;return j(el,ot({ref:m,style:{"--v-textarea-control-height":v.value},onClick:g,onMousedown:R,"onClick:clear":P,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},V,{id:z.value,active:b.value||B.value,centerAffix:I.value===1&&!T.value,dirty:B.value||e.dirty,disabled:p.value,focused:o.value,error:$.value===!1}),{...a,default:ee=>{let{props:{class:re,...G}}=ee;return h(Je,null,[e.prefix&&h("span",{class:"v-text-field__prefix"},[e.prefix]),an(h("textarea",ot({ref:C,class:re,value:i.value,onInput:S,autofocus:e.autofocus,readonly:U.value,disabled:p.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:_,onBlur:f},G,M),null),[[Fi,{handler:u},null,{once:!0}]]),e.autoGrow&&an(h("textarea",{class:Se([re,"v-textarea__sizer"]),id:`${G.id}-sizer`,"onUpdate:modelValue":ae=>i.value=ae,ref:L,readonly:!0,"aria-hidden":"true"},null),[[Di,i.value]]),e.suffix&&h("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:w?D=>h(Je,null,[a.details?.(D),A&&h(Je,null,[h("span",null,null),j(og,{active:e.persistentCounter||o.value,value:d.value,max:c.value,disabled:e.disabled},a.counter)])]):void 0})}),Ui({},l,m,C)}}),vD=wp({components:{VApp:iP,VMain:UF,VBtn:Lo,VCard:yF,VCardText:ug,VCardTitle:cg,VSelect:uF,VTextField:pu,VTabs:dD,VTab:Ag,VTabsWindow:Tg,VTabsWindowItem:xg,VIcon:pn,VContainer:IF,VRow:HF,VCol:PF,VChip:L0,VProgressLinear:v0,VProgressCircular:_d,VDialog:fF,VDivider:z0,VList:K0,VListItem:$o,VListItemTitle:H0,VMenu:ig,VSheet:RF,VToolbar:lu,VToolbarTitle:t0,VNavigationDrawer:JF,VAppBar:_P,VSwitch:iD,VCheckbox:XP,VRadio:tD,VRadioGroup:sD,VTextarea:mD},directives:{Ripple:qs},theme:{defaultTheme:"dark",themes:{dark:{colors:{primary:"#6366f1",secondary:"#8b5cf6",accent:"#06b6d4",error:"#ef4444",warning:"#f59e0b",info:"#3b82f6",success:"#10b981"}}}}});class Ti{socket=null;shellWs=null;ctlWs=null;static instance;constructor(){}static getInstance(){return Ti.instance||(Ti.instance=new Ti),Ti.instance}connect(){return this.socket||(this.socket=uv(SR||window.location.origin,{path:"/socket.io"}),this.socket.on("connect",()=>{console.log("AetherTerm Socket.IO connected"),this.setupVueTermWebSockets()}),this.socket.on("disconnect",()=>{console.log("AetherTerm Socket.IO disconnected"),this.closeVueTermWebSockets()})),this.socket}setupVueTermWebSockets(){console.log("VueTerm using Socket.IO")}closeVueTermWebSockets(){}getSocket(){return this.socket}disconnect(){this.socket&&(this.socket.disconnect(),this.socket=null),this.closeVueTermWebSockets()}onControlOutput(t){this.socket&&this.socket.on("ctl_output",t)}onConnect(t){this.socket&&this.socket.on("connect",t)}onDisconnect(t){this.socket&&this.socket.on("disconnect",t)}onError(t){this.socket&&this.socket.on("connect_error",t)}onChatMessage(t){this.socket&&this.socket.on("chat_message",t)}sendChatMessage(t){this.socket&&this.socket.emit("chat_message",t)}sendCommand(t,n){this.socket&&(console.log("Sending command:",t),this.socket.emit("terminal_command",{command:t,commandId:n||Date.now().toString()}))}onAdminPauseTerminal(t){this.socket&&this.socket.on("admin_pause_terminal",t)}onAdminResumeTerminal(t){this.socket&&this.socket.on("admin_resume_terminal",t)}onAdminSuppressOutput(t){this.socket&&this.socket.on("admin_suppress_output",t)}onCommandApproval(t){this.socket&&this.socket.on("command_approval",t)}emitCommandReviewRequired(t){this.socket&&this.socket.emit("command_review_required",t)}offShellOutput(t){this.socket&&this.socket.off("shell_output",t)}offControlOutput(t){this.socket&&this.socket.off("ctl_output",t)}offChatMessage(t){this.socket&&this.socket.off("chat_message",t)}offConnect(t){this.socket&&this.socket.off("connect",t)}offDisconnect(t){this.socket&&this.socket.off("disconnect",t)}offError(t){this.socket&&this.socket.off("connect_error",t)}async makeInventoryRequest(t,n={}){const s=`${e0}/api/inventory${t}`;try{const a=await fetch(s,{headers:{"Content-Type":"application/json",...n.headers},...n});if(!a.ok){const i=await a.json().catch(()=>({detail:"Unknown error"}));throw new Error(`HTTP ${a.status}: ${i.detail||i.message||"Request failed"}`)}return await a.json()}catch(a){throw console.error(`Inventory API request failed [${t}]:`,a),a}}async getInventorySummary(){return this.makeInventoryRequest("/summary")}async getInventoryResources(t={}){const n=new URLSearchParams;t.limit&&n.append("limit",t.limit.toString()),t.provider&&n.append("provider",t.provider),t.resource_type&&n.append("resource_type",t.resource_type);const s=`/resources${n.toString()?`?${n.toString()}`:""}`;return this.makeInventoryRequest(s)}async searchInventory(t,n){return this.makeInventoryRequest("/search",{method:"POST",body:JSON.stringify({search_term:t,provider_filter:n})})}async getInventoryServiceStatus(){return this.makeInventoryRequest("/status")}async syncInventory(){return this.makeInventoryRequest("/sync",{method:"POST"})}onInventoryUpdate(t){this.socket&&this.socket.on("inventory_update",t)}onInventorySyncStatus(t){this.socket&&this.socket.on("inventory_sync_status",t)}requestInventoryRefresh(){this.socket&&this.socket.emit("request_inventory_refresh")}subscribeToResourceUpdates(t){this.socket&&this.socket.emit("subscribe_resource_updates",{resource_id:t})}unsubscribeFromResourceUpdates(t){this.socket&&this.socket.emit("unsubscribe_resource_updates",{resource_id:t})}offInventoryUpdate(t){this.socket&&this.socket.off("inventory_update",t)}offInventorySyncStatus(t){this.socket&&this.socket.off("inventory_sync_status",t)}}p6();const $l=zg(nP),hD=Ug();$l.use(hD);$l.use(sP);$l.use(vD);const gD=Ti.getInstance(),pD=gD.connect(),Eg=Xs();Eg.setSocket(pD);const ov=Wo(),_D=qo(),bD=async()=>{try{console.log(" APP: Initializing application..."),console.log(" THEME: Loading theme configuration..."),await _D.loadThemeConfig(),console.log(" THEME: Theme system initialized successfully"),await Eg.connect(),await ov.initializeWorkspace(),console.log(" APP: Application initialized successfully")}catch(e){console.error(" APP: Failed to initialize application:",e),await ov.createDefaultWorkspace()}};$l.mount("#app");setTimeout(()=>{bD()},100);export{no as W,xt as _,Al as a,Gh as g,Wo as u};
