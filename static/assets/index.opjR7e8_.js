import{I as au,d as he,h as ee,j as Jt,G as gn,J as _e,y as S,K as nt,q as Me,L as ie,u as xt,M as Zt,N as vt,F as lt,O as Ut,P as on,Q as Er,R as Hn,S as fe,T as Ii,U as vc,H as en,V as La,W as jm,n as Q,X as Lt,w as rt,Y as os,Z as Qa,_ as ag,$ as sg,a0 as ig,a1 as su,a2 as Rs,k as Mr,b as rg,v as at,m as og,x as Is,a3 as hc,s as ct,a4 as Uo,z as Qn,t as De,A as iu,a as ja,B as qa,p as Wa,f as Jn,r as cr,a5 as lg,a6 as cg,o as On,a7 as ug,l as pn,e as Nm,a8 as dg,D as mg,a9 as fg,c as ru,aa as vg,ab as hg}from"./vue-vendor.UUt_bPGB.js";import{l as gg}from"./socket.B_mMAB35.js";import{r as pg}from"./terminal.dC09zdKq.js";import{g as et,p as He,a as _n,c as _g,u as ca,b as ot,m as un,d as bg,e as bt,f as ei,h as $m,n as ou,i as yg,j as wg,s as ur,k as ls,l as gt,o as lu,q as xd,r as Sg,t as kg,v as xg,w as cs,x as ko,y as Tg,S as cu,z as ua,A as pa,B as Wt,C as _a,D as Hm,E as zm,F as ts,G as ba,H as Cg,I as Ag,J as Eg,K as Mg,L as Bt,M as Rg,N as dr,O as gc,P as Sn,Q as Td,R as Cd,T as $n,U as Bi,V as xo,W as us,X as qo,Y as uu,Z as du,_ as Um,$ as Wo,a0 as Ig,a1 as To,a2 as Bg,a3 as qm,a4 as Lg,a5 as pc,a6 as Fa,a7 as ho,a8 as Og,a9 as Ll,aa as Ol,ab as Ad,ac as Wm,ad as Fl,ae as Co,af as Fg,ag as Ed,ah as Md,ai as Vg,aj as Pg,ak as Rd,al as Dg,am as jg,an as Ym,ao as Xm,ap as Ng,aq as $g,ar as Hg,as as zg,at as Ug,au as Id,av as Gm,aw as Yo,ax as qg,ay as Wg,az as Yg}from"./vuetify.a0Xc11tE.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&a(r)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Xg(e,t){const n=Object.create(null),a=e.split(",");for(let s=0;s<a.length;s++)n[a[s]]=!0;return s=>!!n[s]}const Gg=()=>{},Kg=Object.assign,Zg=Object.prototype.hasOwnProperty,Xo=(e,t)=>Zg.call(e,t),Cs=Array.isArray,go=e=>Km(e)==="[object Map]",Qg=e=>typeof e=="function",Jg=e=>typeof e=="string",mu=e=>typeof e=="symbol",Go=e=>e!==null&&typeof e=="object",ep=Object.prototype.toString,Km=e=>ep.call(e),tp=e=>Km(e).slice(8,-1),fu=e=>Jg(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Zm=(e,t)=>!Object.is(e,t),np=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})};let Ia;class ap{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&Ia&&(this.parent=Ia,this.index=(Ia.scopes||(Ia.scopes=[])).push(this)-1)}run(t){if(this.active){const n=Ia;try{return Ia=this,t()}finally{Ia=n}}}on(){Ia=this}off(){Ia=this.parent}stop(t){if(this.active){let n,a;for(n=0,a=this.effects.length;n<a;n++)this.effects[n].stop();for(n=0,a=this.cleanups.length;n<a;n++)this.cleanups[n]();if(this.scopes)for(n=0,a=this.scopes.length;n<a;n++)this.scopes[n].stop(!0);if(this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.active=!1}}}function sp(e,t=Ia){t&&t.active&&t.effects.push(e)}const vu=e=>{const t=new Set(e);return t.w=0,t.n=0,t},Qm=e=>(e.w&Bs)>0,Jm=e=>(e.n&Bs)>0,ip=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=Bs},rp=e=>{const{deps:t}=e;if(t.length){let n=0;for(let a=0;a<t.length;a++){const s=t[a];Qm(s)&&!Jm(s)?s.delete(e):t[n++]=s,s.w&=~Bs,s.n&=~Bs}t.length=n}},_c=new WeakMap;let Zi=0,Bs=1;const bc=30;let ha;const ai=Symbol(""),yc=Symbol("");class hu{constructor(t,n=null,a){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,sp(this,a)}run(){if(!this.active)return this.fn();let t=ha,n=As;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=ha,ha=this,As=!0,Bs=1<<++Zi,Zi<=bc?ip(this):Bd(this),this.fn()}finally{Zi<=bc&&rp(this),Bs=1<<--Zi,ha=this.parent,As=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){ha===this?this.deferStop=!0:this.active&&(Bd(this),this.onStop&&this.onStop(),this.active=!1)}}function Bd(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let As=!0;const ef=[];function Li(){ef.push(As),As=!1}function Oi(){const e=ef.pop();As=e===void 0?!0:e}function Kn(e,t,n){if(As&&ha){let a=_c.get(e);a||_c.set(e,a=new Map);let s=a.get(n);s||a.set(n,s=vu()),tf(s)}}function tf(e,t){let n=!1;Zi<=bc?Jm(e)||(e.n|=Bs,n=!Qm(e)):n=!e.has(ha),n&&(e.add(ha),ha.deps.push(e))}function as(e,t,n,a,s,i){const r=_c.get(e);if(!r)return;let o=[];if(t==="clear")o=[...r.values()];else if(n==="length"&&Cs(e))r.forEach((m,u)=>{(u==="length"||u>=a)&&o.push(m)});else switch(n!==void 0&&o.push(r.get(n)),t){case"add":Cs(e)?fu(n)&&o.push(r.get("length")):(o.push(r.get(ai)),go(e)&&o.push(r.get(yc)));break;case"delete":Cs(e)||(o.push(r.get(ai)),go(e)&&o.push(r.get(yc)));break;case"set":go(e)&&o.push(r.get(ai));break}if(o.length===1)o[0]&&wc(o[0]);else{const m=[];for(const u of o)u&&m.push(...u);wc(vu(m))}}function wc(e,t){const n=Cs(e)?e:[...e];for(const a of n)a.computed&&Ld(a);for(const a of n)a.computed||Ld(a)}function Ld(e,t){(e!==ha||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const op=Xg("__proto__,__v_isRef,__isVue"),nf=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(mu)),lp=gu(),cp=gu(!1,!0),up=gu(!0),Od=dp();function dp(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const a=Vt(this);for(let i=0,r=this.length;i<r;i++)Kn(a,"get",i+"");const s=a[t](...n);return s===-1||s===!1?a[t](...n.map(Vt)):s}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){Li();const a=Vt(this)[t].apply(this,n);return Oi(),a}}),e}function gu(e=!1,t=!1){return function(a,s,i){if(s==="__v_isReactive")return!e;if(s==="__v_isReadonly")return e;if(s==="__v_isShallow")return t;if(s==="__v_raw"&&i===(e?t?Ap:lf:t?of:rf).get(a))return a;const r=Cs(a);if(!e&&r&&Xo(Od,s))return Reflect.get(Od,s,i);const o=Reflect.get(a,s,i);return(mu(s)?nf.has(s):op(s))||(e||Kn(a,"get",s),t)?o:In(o)?r&&fu(s)?o:o.value:Go(o)?e?cf(o):bu(o):o}}const mp=af(),fp=af(!0);function af(e=!1){return function(n,a,s,i){let r=n[a];if(mr(r)&&In(r)&&!In(s))return!1;if(!e&&!mr(s)&&(Sc(s)||(s=Vt(s),r=Vt(r)),!Cs(n)&&In(r)&&!In(s)))return r.value=s,!0;const o=Cs(n)&&fu(a)?Number(a)<n.length:Xo(n,a),m=Reflect.set(n,a,s,i);return n===Vt(i)&&(o?Zm(s,r)&&as(n,"set",a,s):as(n,"add",a,s)),m}}function vp(e,t){const n=Xo(e,t);e[t];const a=Reflect.deleteProperty(e,t);return a&&n&&as(e,"delete",t,void 0),a}function hp(e,t){const n=Reflect.has(e,t);return(!mu(t)||!nf.has(t))&&Kn(e,"has",t),n}function gp(e){return Kn(e,"iterate",Cs(e)?"length":ai),Reflect.ownKeys(e)}const sf={get:lp,set:mp,deleteProperty:vp,has:hp,ownKeys:gp},pp={get:up,set(e,t){return!0},deleteProperty(e,t){return!0}},_p=Kg({},sf,{get:cp,set:fp}),pu=e=>e,Ko=e=>Reflect.getPrototypeOf(e);function Yr(e,t,n=!1,a=!1){e=e.__v_raw;const s=Vt(e),i=Vt(t);n||(t!==i&&Kn(s,"get",t),Kn(s,"get",i));const{has:r}=Ko(s),o=a?pu:n?Su:wu;if(r.call(s,t))return o(e.get(t));if(r.call(s,i))return o(e.get(i));e!==s&&e.get(t)}function Xr(e,t=!1){const n=this.__v_raw,a=Vt(n),s=Vt(e);return t||(e!==s&&Kn(a,"has",e),Kn(a,"has",s)),e===s?n.has(e):n.has(e)||n.has(s)}function Gr(e,t=!1){return e=e.__v_raw,!t&&Kn(Vt(e),"iterate",ai),Reflect.get(e,"size",e)}function Fd(e){e=Vt(e);const t=Vt(this);return Ko(t).has.call(t,e)||(t.add(e),as(t,"add",e,e)),this}function Vd(e,t){t=Vt(t);const n=Vt(this),{has:a,get:s}=Ko(n);let i=a.call(n,e);i||(e=Vt(e),i=a.call(n,e));const r=s.call(n,e);return n.set(e,t),i?Zm(t,r)&&as(n,"set",e,t):as(n,"add",e,t),this}function Pd(e){const t=Vt(this),{has:n,get:a}=Ko(t);let s=n.call(t,e);s||(e=Vt(e),s=n.call(t,e)),a&&a.call(t,e);const i=t.delete(e);return s&&as(t,"delete",e,void 0),i}function Dd(){const e=Vt(this),t=e.size!==0,n=e.clear();return t&&as(e,"clear",void 0,void 0),n}function Kr(e,t){return function(a,s){const i=this,r=i.__v_raw,o=Vt(r),m=t?pu:e?Su:wu;return!e&&Kn(o,"iterate",ai),r.forEach((u,d)=>a.call(s,m(u),m(d),i))}}function Zr(e,t,n){return function(...a){const s=this.__v_raw,i=Vt(s),r=go(i),o=e==="entries"||e===Symbol.iterator&&r,m=e==="keys"&&r,u=s[e](...a),d=n?pu:t?Su:wu;return!t&&Kn(i,"iterate",m?yc:ai),{next(){const{value:l,done:c}=u.next();return c?{value:l,done:c}:{value:o?[d(l[0]),d(l[1])]:d(l),done:c}},[Symbol.iterator](){return this}}}}function gs(e){return function(...t){return e==="delete"?!1:this}}function bp(){const e={get(i){return Yr(this,i)},get size(){return Gr(this)},has:Xr,add:Fd,set:Vd,delete:Pd,clear:Dd,forEach:Kr(!1,!1)},t={get(i){return Yr(this,i,!1,!0)},get size(){return Gr(this)},has:Xr,add:Fd,set:Vd,delete:Pd,clear:Dd,forEach:Kr(!1,!0)},n={get(i){return Yr(this,i,!0)},get size(){return Gr(this,!0)},has(i){return Xr.call(this,i,!0)},add:gs("add"),set:gs("set"),delete:gs("delete"),clear:gs("clear"),forEach:Kr(!0,!1)},a={get(i){return Yr(this,i,!0,!0)},get size(){return Gr(this,!0)},has(i){return Xr.call(this,i,!0)},add:gs("add"),set:gs("set"),delete:gs("delete"),clear:gs("clear"),forEach:Kr(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{e[i]=Zr(i,!1,!1),n[i]=Zr(i,!0,!1),t[i]=Zr(i,!1,!0),a[i]=Zr(i,!0,!0)}),[e,n,t,a]}const[yp,wp,Sp,kp]=bp();function _u(e,t){const n=t?e?kp:Sp:e?wp:yp;return(a,s,i)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?a:Reflect.get(Xo(n,s)&&s in a?n:a,s,i)}const xp={get:_u(!1,!1)},Tp={get:_u(!1,!0)},Cp={get:_u(!0,!1)},rf=new WeakMap,of=new WeakMap,lf=new WeakMap,Ap=new WeakMap;function Ep(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Mp(e){return e.__v_skip||!Object.isExtensible(e)?0:Ep(tp(e))}function bu(e){return mr(e)?e:yu(e,!1,sf,xp,rf)}function Rp(e){return yu(e,!1,_p,Tp,of)}function cf(e){return yu(e,!0,pp,Cp,lf)}function yu(e,t,n,a,s){if(!Go(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=s.get(e);if(i)return i;const r=Mp(e);if(r===0)return e;const o=new Proxy(e,r===2?a:n);return s.set(e,o),o}function Si(e){return mr(e)?Si(e.__v_raw):!!(e&&e.__v_isReactive)}function mr(e){return!!(e&&e.__v_isReadonly)}function Sc(e){return!!(e&&e.__v_isShallow)}function uf(e){return Si(e)||mr(e)}function Vt(e){const t=e&&e.__v_raw;return t?Vt(t):e}function df(e){return np(e,"__v_skip",!0),e}const wu=e=>Go(e)?bu(e):e,Su=e=>Go(e)?cf(e):e;function Ip(e){As&&ha&&(e=Vt(e),tf(e.dep||(e.dep=vu())))}function Bp(e,t){e=Vt(e),e.dep&&wc(e.dep)}function In(e){return!!(e&&e.__v_isRef===!0)}function Lp(e){return In(e)?e.value:e}const Op={get:(e,t,n)=>Lp(Reflect.get(e,t,n)),set:(e,t,n,a)=>{const s=e[t];return In(s)&&!In(n)?(s.value=n,!0):Reflect.set(e,t,n,a)}};function mf(e){return Si(e)?e:new Proxy(e,Op)}class Fp{constructor(t,n,a,s){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new hu(t,()=>{this._dirty||(this._dirty=!0,Bp(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=a}get value(){const t=Vt(this);return Ip(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function Vp(e,t,n=!1){let a,s;const i=Qg(e);return i?(a=e,s=Gg):(a=e.get,s=e.set),new Fp(a,s,i||!s,n)}function Pp(e,t){const n=Object.create(null),a=e.split(",");for(let s=0;s<a.length;s++)n[a[s]]=!0;return s=>!!n[s]}function Qt(e){if(Rt(e)){const t={};for(let n=0;n<e.length;n++){const a=e[n],s=Bn(a)?Np(a):Qt(a);if(s)for(const i in s)t[i]=s[i]}return t}else{if(Bn(e))return e;if(Ln(e))return e}}const Dp=/;(?![^(]*\))/g,jp=/:(.+)/;function Np(e){const t={};return e.split(Dp).forEach(n=>{if(n){const a=n.split(jp);a.length>1&&(t[a[0].trim()]=a[1].trim())}}),t}function kt(e){let t="";if(Bn(e))t=e;else if(Rt(e))for(let n=0;n<e.length;n++){const a=kt(e[n]);a&&(t+=a+" ")}else if(Ln(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function Nt(e){if(!e)return null;let{class:t,style:n}=e;return t&&!Bn(t)&&(e.class=kt(t)),n&&(e.style=Qt(n)),e}const _t=e=>Bn(e)?e:e==null?"":Rt(e)||Ln(e)&&(e.toString===_f||!Tt(e.toString))?JSON.stringify(e,ff,2):String(e),ff=(e,t)=>t&&t.__v_isRef?ff(e,t.value):hf(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[a,s])=>(n[`${a} =>`]=s,n),{})}:gf(t)?{[`Set(${t.size})`]:[...t.values()]}:Ln(t)&&!Rt(t)&&!bf(t)?String(t):t,qt={},ki=[],ns=()=>{},$p=()=>!1,Hp=/^on[^a-z]/,ku=e=>Hp.test(e),vf=e=>e.startsWith("onUpdate:"),ya=Object.assign,xu=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},zp=Object.prototype.hasOwnProperty,Ft=(e,t)=>zp.call(e,t),Rt=Array.isArray,hf=e=>Tu(e)==="[object Map]",gf=e=>Tu(e)==="[object Set]",Tt=e=>typeof e=="function",Bn=e=>typeof e=="string",Ln=e=>e!==null&&typeof e=="object",pf=e=>Ln(e)&&Tt(e.then)&&Tt(e.catch),_f=Object.prototype.toString,Tu=e=>_f.call(e),bf=e=>Tu(e)==="[object Object]",po=Pp(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Zo=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Up=/-(\w)/g,Na=Zo(e=>e.replace(Up,(t,n)=>n?n.toUpperCase():"")),qp=/\B([A-Z])/g,Qo=Zo(e=>e.replace(qp,"-$1").toLowerCase()),Cu=Zo(e=>e.charAt(0).toUpperCase()+e.slice(1)),Vl=Zo(e=>e?`on${Cu(e)}`:""),jd=(e,t)=>!Object.is(e,t),Pl=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},kc=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},Wp=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Nd;const Yp=()=>Nd||(Nd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof globalThis<"u"?globalThis:{});function Es(e,t,n,a){let s;try{s=a?e(...a):e()}catch(i){Jo(i,t,n)}return s}function oa(e,t,n,a){if(Tt(e)){const i=Es(e,t,n,a);return i&&pf(i)&&i.catch(r=>{Jo(r,t,n)}),i}const s=[];for(let i=0;i<e.length;i++)s.push(oa(e[i],t,n,a));return s}function Jo(e,t,n,a=!0){const s=t?t.vnode:null;if(t){let i=t.parent;const r=t.proxy,o=n;for(;i;){const u=i.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](e,r,o)===!1)return}i=i.parent}const m=t.appContext.config.errorHandler;if(m){Es(m,null,10,[e,r,o]);return}}Xp(e,n,s,a)}function Xp(e,t,n,a=!0){console.error(e)}let Ao=!1,xc=!1;const Wn=[];let Ja=0;const ar=[];let Qi=null,pi=0;const sr=[];let ks=null,_i=0;const yf=Promise.resolve();let Au=null,Tc=null;function wf(e){const t=Au||yf;return e?t.then(this?e.bind(this):e):t}function Gp(e){let t=Ja+1,n=Wn.length;for(;t<n;){const a=t+n>>>1;fr(Wn[a])<e?t=a+1:n=a}return t}function Sf(e){(!Wn.length||!Wn.includes(e,Ao&&e.allowRecurse?Ja+1:Ja))&&e!==Tc&&(e.id==null?Wn.push(e):Wn.splice(Gp(e.id),0,e),kf())}function kf(){!Ao&&!xc&&(xc=!0,Au=yf.then(Cf))}function Kp(e){const t=Wn.indexOf(e);t>Ja&&Wn.splice(t,1)}function xf(e,t,n,a){Rt(e)?n.push(...e):(!t||!t.includes(e,e.allowRecurse?a+1:a))&&n.push(e),kf()}function Zp(e){xf(e,Qi,ar,pi)}function Qp(e){xf(e,ks,sr,_i)}function el(e,t=null){if(ar.length){for(Tc=t,Qi=[...new Set(ar)],ar.length=0,pi=0;pi<Qi.length;pi++)Qi[pi]();Qi=null,pi=0,Tc=null,el(e,t)}}function Tf(e){if(el(),sr.length){const t=[...new Set(sr)];if(sr.length=0,ks){ks.push(...t);return}for(ks=t,ks.sort((n,a)=>fr(n)-fr(a)),_i=0;_i<ks.length;_i++)ks[_i]();ks=null,_i=0}}const fr=e=>e.id==null?1/0:e.id;function Cf(e){xc=!1,Ao=!0,el(e),Wn.sort((t,n)=>fr(t)-fr(n));try{for(Ja=0;Ja<Wn.length;Ja++){const t=Wn[Ja];t&&t.active!==!1&&Es(t,null,14)}}finally{Ja=0,Wn.length=0,Tf(),Ao=!1,Au=null,(Wn.length||ar.length||sr.length)&&Cf(e)}}function Jp(e,t,...n){if(e.isUnmounted)return;const a=e.vnode.props||qt;let s=n;const i=t.startsWith("update:"),r=i&&t.slice(7);if(r&&r in a){const d=`${r==="modelValue"?"model":r}Modifiers`,{number:l,trim:c}=a[d]||qt;c&&(s=n.map(v=>v.trim())),l&&(s=n.map(Wp))}let o,m=a[o=Vl(t)]||a[o=Vl(Na(t))];!m&&i&&(m=a[o=Vl(Qo(t))]),m&&oa(m,e,6,s);const u=a[o+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[o])return;e.emitted[o]=!0,oa(u,e,6,s)}}function Af(e,t,n=!1){const a=t.emitsCache,s=a.get(e);if(s!==void 0)return s;const i=e.emits;let r={},o=!1;if(!Tt(e)){const m=u=>{const d=Af(u,t,!0);d&&(o=!0,ya(r,d))};!n&&t.mixins.length&&t.mixins.forEach(m),e.extends&&m(e.extends),e.mixins&&e.mixins.forEach(m)}return!i&&!o?(a.set(e,null),null):(Rt(i)?i.forEach(m=>r[m]=null):ya(r,i),a.set(e,r),r)}function tl(e,t){return!e||!ku(t)?!1:(t=t.slice(2).replace(/Once$/,""),Ft(e,t[0].toLowerCase()+t.slice(1))||Ft(e,Qo(t))||Ft(e,t))}let An=null,Ef=null;function Eo(e){const t=An;return An=e,Ef=e&&e.type.__scopeId||null,t}function mt(e,t=An,n){if(!t||e._n)return e;const a=(...s)=>{a._d&&Qd(-1);const i=Eo(t),r=e(...s);return Eo(i),a._d&&Qd(1),r};return a._n=!0,a._c=!0,a._d=!0,a}function $d(e){const{type:t,vnode:n,proxy:a,withProxy:s,props:i,propsOptions:[r],slots:o,attrs:m,emit:u,render:d,renderCache:l,data:c,setupState:v,ctx:h,inheritAttrs:A}=e;let T,k;const p=Eo(e);try{if(n.shapeFlag&4){const O=s||a;T=Oa(d.call(O,O,l,i,v,c,h)),k=m}else{const O=t;T=Oa(O.length>1?O(i,{attrs:m,slots:o,emit:u}):O(i,null)),k=t.props?m:e_(m)}}catch(O){rr.length=0,Jo(O,e,1),T=Xe(la)}let L=T;if(k&&A!==!1){const O=Object.keys(k),{shapeFlag:g}=L;O.length&&g&7&&(r&&O.some(vf)&&(k=t_(k,r)),L=Ls(L,k))}return n.dirs&&(L=Ls(L),L.dirs=L.dirs?L.dirs.concat(n.dirs):n.dirs),n.transition&&(L.transition=n.transition),T=L,Eo(p),T}const e_=e=>{let t;for(const n in e)(n==="class"||n==="style"||ku(n))&&((t||(t={}))[n]=e[n]);return t},t_=(e,t)=>{const n={};for(const a in e)(!vf(a)||!(a.slice(9)in t))&&(n[a]=e[a]);return n};function n_(e,t,n){const{props:a,children:s,component:i}=e,{props:r,children:o,patchFlag:m}=t,u=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&m>=0){if(m&1024)return!0;if(m&16)return a?Hd(a,r,u):!!r;if(m&8){const d=t.dynamicProps;for(let l=0;l<d.length;l++){const c=d[l];if(r[c]!==a[c]&&!tl(u,c))return!0}}}else return(s||o)&&(!o||!o.$stable)?!0:a===r?!1:a?r?Hd(a,r,u):!0:!!r;return!1}function Hd(e,t,n){const a=Object.keys(t);if(a.length!==Object.keys(e).length)return!0;for(let s=0;s<a.length;s++){const i=a[s];if(t[i]!==e[i]&&!tl(n,i))return!0}return!1}function a_({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const s_=e=>e.__isSuspense;function i_(e,t){t&&t.pendingBranch?Rt(e)?t.effects.push(...e):t.effects.push(e):Qp(e)}function r_(e,t){if(wn){let n=wn.provides;const a=wn.parent&&wn.parent.provides;a===n&&(n=wn.provides=Object.create(a)),n[e]=t}}function Dl(e,t,n=!1){const a=wn||An;if(a){const s=a.parent==null?a.vnode.appContext&&a.vnode.appContext.provides:a.parent.provides;if(s&&e in s)return s[e];if(arguments.length>1)return n&&Tt(t)?t.call(a.proxy):t}}const zd={};function jl(e,t,n){return Mf(e,t,n)}function Mf(e,t,{immediate:n,deep:a,flush:s,onTrack:i,onTrigger:r}=qt){const o=wn;let m,u=!1,d=!1;if(In(e)?(m=()=>e.value,u=Sc(e)):Si(e)?(m=()=>e,a=!0):Rt(e)?(d=!0,u=e.some(k=>Si(k)||Sc(k)),m=()=>e.map(k=>{if(In(k))return k.value;if(Si(k))return ti(k);if(Tt(k))return Es(k,o,2)})):Tt(e)?t?m=()=>Es(e,o,2):m=()=>{if(!(o&&o.isUnmounted))return l&&l(),oa(e,o,3,[c])}:m=ns,t&&a){const k=m;m=()=>ti(k())}let l,c=k=>{l=T.onStop=()=>{Es(k,o,4)}};if(pr)return c=ns,t?n&&oa(t,o,3,[m(),d?[]:void 0,c]):m(),ns;let v=d?[]:zd;const h=()=>{if(T.active)if(t){const k=T.run();(a||u||(d?k.some((p,L)=>jd(p,v[L])):jd(k,v)))&&(l&&l(),oa(t,o,3,[k,v===zd?void 0:v,c]),v=k)}else T.run()};h.allowRecurse=!!t;let A;s==="sync"?A=h:s==="post"?A=()=>Nn(h,o&&o.suspense):A=()=>Zp(h);const T=new hu(m,A);return t?n?h():v=T.run():s==="post"?Nn(T.run.bind(T),o&&o.suspense):T.run(),()=>{T.stop(),o&&o.scope&&xu(o.scope.effects,T)}}function o_(e,t,n){const a=this.proxy,s=Bn(e)?e.includes(".")?Rf(a,e):()=>a[e]:e.bind(a,a);let i;Tt(t)?i=t:(i=t.handler,n=t);const r=wn;Ci(this);const o=Mf(s,i.bind(a),n);return r?Ci(r):si(),o}function Rf(e,t){const n=t.split(".");return()=>{let a=e;for(let s=0;s<n.length&&a;s++)a=a[n[s]];return a}}function ti(e,t){if(!Ln(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),In(e))ti(e.value,t);else if(Rt(e))for(let n=0;n<e.length;n++)ti(e[n],t);else if(gf(e)||hf(e))e.forEach(n=>{ti(n,t)});else if(bf(e))for(const n in e)ti(e[n],t);return e}function If(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ff(()=>{e.isMounted=!0}),Pf(()=>{e.isUnmounting=!0}),e}const aa=[Function,Array],l_={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:aa,onEnter:aa,onAfterEnter:aa,onEnterCancelled:aa,onBeforeLeave:aa,onLeave:aa,onAfterLeave:aa,onLeaveCancelled:aa,onBeforeAppear:aa,onAppear:aa,onAfterAppear:aa,onAppearCancelled:aa},setup(e,{slots:t}){const n=Qf(),a=If();let s;return()=>{const i=t.default&&Eu(t.default(),!0);if(!i||!i.length)return;let r=i[0];if(i.length>1){for(const A of i)if(A.type!==la){r=A;break}}const o=Vt(e),{mode:m}=o;if(a.isLeaving)return Nl(r);const u=Ud(r);if(!u)return Nl(r);const d=vr(u,o,a,n);hr(u,d);const l=n.subTree,c=l&&Ud(l);let v=!1;const{getTransitionKey:h}=u.type;if(h){const A=h();s===void 0?s=A:A!==s&&(s=A,v=!0)}if(c&&c.type!==la&&(!Zs(u,c)||v)){const A=vr(c,o,a,n);if(hr(c,A),m==="out-in")return a.isLeaving=!0,A.afterLeave=()=>{a.isLeaving=!1,n.update()},Nl(r);m==="in-out"&&u.type!==la&&(A.delayLeave=(T,k,p)=>{const L=Lf(a,c);L[String(c.key)]=c,T._leaveCb=()=>{k(),T._leaveCb=void 0,delete d.delayedLeave},d.delayedLeave=p})}return r}}},Bf=l_;function Lf(e,t){const{leavingVNodes:n}=e;let a=n.get(t.type);return a||(a=Object.create(null),n.set(t.type,a)),a}function vr(e,t,n,a){const{appear:s,mode:i,persisted:r=!1,onBeforeEnter:o,onEnter:m,onAfterEnter:u,onEnterCancelled:d,onBeforeLeave:l,onLeave:c,onAfterLeave:v,onLeaveCancelled:h,onBeforeAppear:A,onAppear:T,onAfterAppear:k,onAppearCancelled:p}=t,L=String(e.key),O=Lf(n,e),g=(C,I)=>{C&&oa(C,a,9,I)},B=(C,I)=>{const b=I[1];g(C,I),Rt(C)?C.every(y=>y.length<=1)&&b():C.length<=1&&b()},R={mode:i,persisted:r,beforeEnter(C){let I=o;if(!n.isMounted)if(s)I=A||o;else return;C._leaveCb&&C._leaveCb(!0);const b=O[L];b&&Zs(e,b)&&b.el._leaveCb&&b.el._leaveCb(),g(I,[C])},enter(C){let I=m,b=u,y=d;if(!n.isMounted)if(s)I=T||m,b=k||u,y=p||d;else return;let _=!1;const w=C._enterCb=E=>{_||(_=!0,E?g(y,[C]):g(b,[C]),R.delayedLeave&&R.delayedLeave(),C._enterCb=void 0)};I?B(I,[C,w]):w()},leave(C,I){const b=String(e.key);if(C._enterCb&&C._enterCb(!0),n.isUnmounting)return I();g(l,[C]);let y=!1;const _=C._leaveCb=w=>{y||(y=!0,I(),w?g(h,[C]):g(v,[C]),C._leaveCb=void 0,O[b]===e&&delete O[b])};O[b]=e,c?B(c,[C,_]):_()},clone(C){return vr(C,t,n,a)}};return R}function Nl(e){if(nl(e))return e=Ls(e),e.children=null,e}function Ud(e){return nl(e)?e.children?e.children[0]:void 0:e}function hr(e,t){e.shapeFlag&6&&e.component?hr(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Eu(e,t=!1,n){let a=[],s=0;for(let i=0;i<e.length;i++){let r=e[i];const o=n==null?r.key:String(n)+String(r.key!=null?r.key:i);r.type===At?(r.patchFlag&128&&s++,a=a.concat(Eu(r.children,t,o))):(t||r.type!==la)&&a.push(o!=null?Ls(r,{key:o}):r)}if(s>1)for(let i=0;i<a.length;i++)a[i].patchFlag=-2;return a}function c_(e){return Tt(e)?{setup:e,name:e.name}:e}const ir=e=>!!e.type.__asyncLoader,nl=e=>e.type.__isKeepAlive;function u_(e,t){Of(e,"a",t)}function d_(e,t){Of(e,"da",t)}function Of(e,t,n=wn){const a=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(al(t,a,n),n){let s=n.parent;for(;s&&s.parent;)nl(s.parent.vnode)&&m_(a,t,n,s),s=s.parent}}function m_(e,t,n,a){const s=al(t,e,a,!0);Df(()=>{xu(a[t],s)},n)}function al(e,t,n=wn,a=!1){if(n){const s=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...r)=>{if(n.isUnmounted)return;Li(),Ci(n);const o=oa(t,n,e,r);return si(),Oi(),o});return a?s.unshift(i):s.push(i),i}}const ds=e=>(t,n=wn)=>(!pr||e==="sp")&&al(e,t,n),f_=ds("bm"),Ff=ds("m"),v_=ds("bu"),Vf=ds("u"),Pf=ds("bum"),Df=ds("um"),h_=ds("sp"),g_=ds("rtg"),p_=ds("rtc");function __(e,t=wn){al("ec",e,t)}function ss(e,t){const n=An;if(n===null)return e;const a=rl(n)||n.proxy,s=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[r,o,m,u=qt]=t[i];Tt(r)&&(r={mounted:r,updated:r}),r.deep&&ti(o),s.push({dir:r,instance:a,value:o,oldValue:void 0,arg:m,modifiers:u})}return e}function Ds(e,t,n,a){const s=e.dirs,i=t&&t.dirs;for(let r=0;r<s.length;r++){const o=s[r];i&&(o.oldValue=i[r].value);let m=o.dir[a];m&&(Li(),oa(m,n,8,[e.el,o,e,t]),Oi())}}const Mu="components",b_="directives";function dt(e,t){return Ru(Mu,e,!0,t)||e}const jf=Symbol();function y_(e){return Bn(e)?Ru(Mu,e,!1)||e:e||jf}function sl(e){return Ru(b_,e)}function Ru(e,t,n=!0,a=!1){const s=An||wn;if(s){const i=s.type;if(e===Mu){const o=Y_(i,!1);if(o&&(o===t||o===Na(t)||o===Cu(Na(t))))return i}const r=qd(s[e]||i[e],t)||qd(s.appContext[e],t);return!r&&a?i:r}}function qd(e,t){return e&&(e[t]||e[Na(t)]||e[Cu(Na(t))])}function St(e,t,n,a){let s;const i=n;if(Rt(e)||Bn(e)){s=new Array(e.length);for(let r=0,o=e.length;r<o;r++)s[r]=t(e[r],r,void 0,i)}else if(typeof e=="number"){s=new Array(e);for(let r=0;r<e;r++)s[r]=t(r+1,r,void 0,i)}else if(Ln(e))if(e[Symbol.iterator])s=Array.from(e,(r,o)=>t(r,o,void 0,i));else{const r=Object.keys(e);s=new Array(r.length);for(let o=0,m=r.length;o<m;o++){const u=r[o];s[o]=t(e[u],u,o,i)}}else s=[];return s}function $t(e,t){for(let n=0;n<t.length;n++){const a=t[n];if(Rt(a))for(let s=0;s<a.length;s++)e[a[s].name]=a[s].fn;else a&&(e[a.name]=a.fn)}return e}function qe(e,t,n={},a,s){if(An.isCE||An.parent&&ir(An.parent)&&An.parent.isCE)return Xe("slot",t==="default"?null:{name:t},a&&a());let i=e[t];i&&i._c&&(i._d=!1),oe();const r=i&&Nf(i(n)),o=Pt(At,{key:n.key||`_${t}`},r||(a?a():[]),r&&e._===1?64:-2);return o.scopeId&&(o.slotScopeIds=[o.scopeId+"-s"]),i&&i._c&&(i._d=!0),o}function Nf(e){return e.some(t=>Io(t)?!(t.type===la||t.type===At&&!Nf(t.children)):!0)?e:null}const Cc=e=>e?Jf(e)?rl(e)||e.proxy:Cc(e.parent):null,Mo=ya(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Cc(e.parent),$root:e=>Cc(e.root),$emit:e=>e.emit,$options:e=>Hf(e),$forceUpdate:e=>e.f||(e.f=()=>Sf(e.update)),$nextTick:e=>e.n||(e.n=wf.bind(e.proxy)),$watch:e=>o_.bind(e)}),w_={get({_:e},t){const{ctx:n,setupState:a,data:s,props:i,accessCache:r,type:o,appContext:m}=e;let u;if(t[0]!=="$"){const v=r[t];if(v!==void 0)switch(v){case 1:return a[t];case 2:return s[t];case 4:return n[t];case 3:return i[t]}else{if(a!==qt&&Ft(a,t))return r[t]=1,a[t];if(s!==qt&&Ft(s,t))return r[t]=2,s[t];if((u=e.propsOptions[0])&&Ft(u,t))return r[t]=3,i[t];if(n!==qt&&Ft(n,t))return r[t]=4,n[t];Ac&&(r[t]=0)}}const d=Mo[t];let l,c;if(d)return t==="$attrs"&&Kn(e,"get",t),d(e);if((l=o.__cssModules)&&(l=l[t]))return l;if(n!==qt&&Ft(n,t))return r[t]=4,n[t];if(c=m.config.globalProperties,Ft(c,t))return c[t]},set({_:e},t,n){const{data:a,setupState:s,ctx:i}=e;return s!==qt&&Ft(s,t)?(s[t]=n,!0):a!==qt&&Ft(a,t)?(a[t]=n,!0):Ft(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:a,appContext:s,propsOptions:i}},r){let o;return!!n[r]||e!==qt&&Ft(e,r)||t!==qt&&Ft(t,r)||(o=i[0])&&Ft(o,r)||Ft(a,r)||Ft(Mo,r)||Ft(s.config.globalProperties,r)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Ft(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};let Ac=!0;function S_(e){const t=Hf(e),n=e.proxy,a=e.ctx;Ac=!1,t.beforeCreate&&Wd(t.beforeCreate,e,"bc");const{data:s,computed:i,methods:r,watch:o,provide:m,inject:u,created:d,beforeMount:l,mounted:c,beforeUpdate:v,updated:h,activated:A,deactivated:T,beforeDestroy:k,beforeUnmount:p,destroyed:L,unmounted:O,render:g,renderTracked:B,renderTriggered:R,errorCaptured:C,serverPrefetch:I,expose:b,inheritAttrs:y,components:_,directives:w,filters:E}=t;if(u&&k_(u,a,null,e.appContext.config.unwrapInjectedRef),r)for(const q in r){const $=r[q];Tt($)&&(a[q]=$.bind(n))}if(s){const q=s.call(n,n);Ln(q)&&(e.data=bu(q))}if(Ac=!0,i)for(const q in i){const $=i[q],U=Tt($)?$.bind(n,n):Tt($.get)?$.get.bind(n,n):ns,f=!Tt($)&&Tt($.set)?$.set.bind(n):ns,x=G_({get:U,set:f});Object.defineProperty(a,q,{enumerable:!0,configurable:!0,get:()=>x.value,set:H=>x.value=H})}if(o)for(const q in o)$f(o[q],a,n,q);if(m){const q=Tt(m)?m.call(n):m;Reflect.ownKeys(q).forEach($=>{r_($,q[$])})}d&&Wd(d,e,"c");function V(q,$){Rt($)?$.forEach(U=>q(U.bind(n))):$&&q($.bind(n))}if(V(f_,l),V(Ff,c),V(v_,v),V(Vf,h),V(u_,A),V(d_,T),V(__,C),V(p_,B),V(g_,R),V(Pf,p),V(Df,O),V(h_,I),Rt(b))if(b.length){const q=e.exposed||(e.exposed={});b.forEach($=>{Object.defineProperty(q,$,{get:()=>n[$],set:U=>n[$]=U})})}else e.exposed||(e.exposed={});g&&e.render===ns&&(e.render=g),y!=null&&(e.inheritAttrs=y),_&&(e.components=_),w&&(e.directives=w)}function k_(e,t,n=ns,a=!1){Rt(e)&&(e=Ec(e));for(const s in e){const i=e[s];let r;Ln(i)?"default"in i?r=Dl(i.from||s,i.default,!0):r=Dl(i.from||s):r=Dl(i),In(r)&&a?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[s]=r}}function Wd(e,t,n){oa(Rt(e)?e.map(a=>a.bind(t.proxy)):e.bind(t.proxy),t,n)}function $f(e,t,n,a){const s=a.includes(".")?Rf(n,a):()=>n[a];if(Bn(e)){const i=t[e];Tt(i)&&jl(s,i)}else if(Tt(e))jl(s,e.bind(n));else if(Ln(e))if(Rt(e))e.forEach(i=>$f(i,t,n,a));else{const i=Tt(e.handler)?e.handler.bind(n):t[e.handler];Tt(i)&&jl(s,i,e)}}function Hf(e){const t=e.type,{mixins:n,extends:a}=t,{mixins:s,optionsCache:i,config:{optionMergeStrategies:r}}=e.appContext,o=i.get(t);let m;return o?m=o:!s.length&&!n&&!a?m=t:(m={},s.length&&s.forEach(u=>Ro(m,u,r,!0)),Ro(m,t,r)),i.set(t,m),m}function Ro(e,t,n,a=!1){const{mixins:s,extends:i}=t;i&&Ro(e,i,n,!0),s&&s.forEach(r=>Ro(e,r,n,!0));for(const r in t)if(!(a&&r==="expose")){const o=x_[r]||n&&n[r];e[r]=o?o(e[r],t[r]):t[r]}return e}const x_={data:Yd,props:Gs,emits:Gs,methods:Gs,computed:Gs,beforeCreate:Mn,created:Mn,beforeMount:Mn,mounted:Mn,beforeUpdate:Mn,updated:Mn,beforeDestroy:Mn,beforeUnmount:Mn,destroyed:Mn,unmounted:Mn,activated:Mn,deactivated:Mn,errorCaptured:Mn,serverPrefetch:Mn,components:Gs,directives:Gs,watch:C_,provide:Yd,inject:T_};function Yd(e,t){return t?e?function(){return ya(Tt(e)?e.call(this,this):e,Tt(t)?t.call(this,this):t)}:t:e}function T_(e,t){return Gs(Ec(e),Ec(t))}function Ec(e){if(Rt(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Mn(e,t){return e?[...new Set([].concat(e,t))]:t}function Gs(e,t){return e?ya(ya(Object.create(null),e),t):t}function C_(e,t){if(!e)return t;if(!t)return e;const n=ya(Object.create(null),e);for(const a in t)n[a]=Mn(e[a],t[a]);return n}function A_(e,t,n,a=!1){const s={},i={};kc(i,il,1),e.propsDefaults=Object.create(null),zf(e,t,s,i);for(const r in e.propsOptions[0])r in s||(s[r]=void 0);n?e.props=a?s:Rp(s):e.type.props?e.props=s:e.props=i,e.attrs=i}function E_(e,t,n,a){const{props:s,attrs:i,vnode:{patchFlag:r}}=e,o=Vt(s),[m]=e.propsOptions;let u=!1;if((a||r>0)&&!(r&16)){if(r&8){const d=e.vnode.dynamicProps;for(let l=0;l<d.length;l++){let c=d[l];if(tl(e.emitsOptions,c))continue;const v=t[c];if(m)if(Ft(i,c))v!==i[c]&&(i[c]=v,u=!0);else{const h=Na(c);s[h]=Mc(m,o,h,v,e,!1)}else v!==i[c]&&(i[c]=v,u=!0)}}}else{zf(e,t,s,i)&&(u=!0);let d;for(const l in o)(!t||!Ft(t,l)&&((d=Qo(l))===l||!Ft(t,d)))&&(m?n&&(n[l]!==void 0||n[d]!==void 0)&&(s[l]=Mc(m,o,l,void 0,e,!0)):delete s[l]);if(i!==o)for(const l in i)(!t||!Ft(t,l))&&(delete i[l],u=!0)}u&&as(e,"set","$attrs")}function zf(e,t,n,a){const[s,i]=e.propsOptions;let r=!1,o;if(t)for(let m in t){if(po(m))continue;const u=t[m];let d;s&&Ft(s,d=Na(m))?!i||!i.includes(d)?n[d]=u:(o||(o={}))[d]=u:tl(e.emitsOptions,m)||(!(m in a)||u!==a[m])&&(a[m]=u,r=!0)}if(i){const m=Vt(n),u=o||qt;for(let d=0;d<i.length;d++){const l=i[d];n[l]=Mc(s,m,l,u[l],e,!Ft(u,l))}}return r}function Mc(e,t,n,a,s,i){const r=e[n];if(r!=null){const o=Ft(r,"default");if(o&&a===void 0){const m=r.default;if(r.type!==Function&&Tt(m)){const{propsDefaults:u}=s;n in u?a=u[n]:(Ci(s),a=u[n]=m.call(null,t),si())}else a=m}r[0]&&(i&&!o?a=!1:r[1]&&(a===""||a===Qo(n))&&(a=!0))}return a}function Uf(e,t,n=!1){const a=t.propsCache,s=a.get(e);if(s)return s;const i=e.props,r={},o=[];let m=!1;if(!Tt(e)){const d=l=>{m=!0;const[c,v]=Uf(l,t,!0);ya(r,c),v&&o.push(...v)};!n&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!i&&!m)return a.set(e,ki),ki;if(Rt(i))for(let d=0;d<i.length;d++){const l=Na(i[d]);Xd(l)&&(r[l]=qt)}else if(i)for(const d in i){const l=Na(d);if(Xd(l)){const c=i[d],v=r[l]=Rt(c)||Tt(c)?{type:c}:c;if(v){const h=Zd(Boolean,v.type),A=Zd(String,v.type);v[0]=h>-1,v[1]=A<0||h<A,(h>-1||Ft(v,"default"))&&o.push(l)}}}const u=[r,o];return a.set(e,u),u}function Xd(e){return e[0]!=="$"}function Gd(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function Kd(e,t){return Gd(e)===Gd(t)}function Zd(e,t){return Rt(t)?t.findIndex(n=>Kd(n,e)):Tt(t)&&Kd(t,e)?0:-1}const qf=e=>e[0]==="_"||e==="$stable",Iu=e=>Rt(e)?e.map(Oa):[Oa(e)],M_=(e,t,n)=>{if(t._n)return t;const a=mt((...s)=>Iu(t(...s)),n);return a._c=!1,a},Wf=(e,t,n)=>{const a=e._ctx;for(const s in e){if(qf(s))continue;const i=e[s];if(Tt(i))t[s]=M_(s,i,a);else if(i!=null){const r=Iu(i);t[s]=()=>r}}},Yf=(e,t)=>{const n=Iu(t);e.slots.default=()=>n},R_=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=Vt(t),kc(t,"_",n)):Wf(t,e.slots={})}else e.slots={},t&&Yf(e,t);kc(e.slots,il,1)},I_=(e,t,n)=>{const{vnode:a,slots:s}=e;let i=!0,r=qt;if(a.shapeFlag&32){const o=t._;o?n&&o===1?i=!1:(ya(s,t),!n&&o===1&&delete s._):(i=!t.$stable,Wf(t,s)),r=t}else t&&(Yf(e,t),r={default:1});if(i)for(const o in s)!qf(o)&&!(o in r)&&delete s[o]};function Xf(){return{app:null,config:{isNativeTag:$p,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let B_=0;function L_(e,t){return function(a,s=null){Tt(a)||(a=Object.assign({},a)),s!=null&&!Ln(s)&&(s=null);const i=Xf(),r=new Set;let o=!1;const m=i.app={_uid:B_++,_component:a,_props:s,_container:null,_context:i,_instance:null,version:Z_,get config(){return i.config},set config(u){},use(u,...d){return r.has(u)||(u&&Tt(u.install)?(r.add(u),u.install(m,...d)):Tt(u)&&(r.add(u),u(m,...d))),m},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),m},component(u,d){return d?(i.components[u]=d,m):i.components[u]},directive(u,d){return d?(i.directives[u]=d,m):i.directives[u]},mount(u,d,l){if(!o){const c=Xe(a,s);return c.appContext=i,e(c,u,l),o=!0,m._container=u,u.__vue_app__=m,rl(c.component)||c.component.proxy}},unmount(){o&&(e(null,m._container),delete m._container.__vue_app__)},provide(u,d){return i.provides[u]=d,m}};return m}}function Rc(e,t,n,a,s=!1){if(Rt(e)){e.forEach((c,v)=>Rc(c,t&&(Rt(t)?t[v]:t),n,a,s));return}if(ir(a)&&!s)return;const i=a.shapeFlag&4?rl(a.component)||a.component.proxy:a.el,r=s?null:i,{i:o,r:m}=e,u=t&&t.r,d=o.refs===qt?o.refs={}:o.refs,l=o.setupState;if(u!=null&&u!==m&&(Bn(u)?(d[u]=null,Ft(l,u)&&(l[u]=null)):In(u)&&(u.value=null)),Tt(m))Es(m,o,12,[r,d]);else{const c=Bn(m),v=In(m);if(c||v){const h=()=>{if(e.f){const A=c?d[m]:m.value;s?Rt(A)&&xu(A,i):Rt(A)?A.includes(i)||A.push(i):c?(d[m]=[i],Ft(l,m)&&(l[m]=d[m])):(m.value=[i],e.k&&(d[e.k]=m.value))}else c?(d[m]=r,Ft(l,m)&&(l[m]=r)):v&&(m.value=r,e.k&&(d[e.k]=r))};r?(h.id=-1,Nn(h,n)):h()}}}const Nn=i_;function O_(e){return F_(e)}function F_(e,t){const n=Yp();n.__VUE__=!0;const{insert:a,remove:s,patchProp:i,createElement:r,createText:o,createComment:m,setText:u,setElementText:d,parentNode:l,nextSibling:c,setScopeId:v=ns,cloneNode:h,insertStaticContent:A}=e,T=(Y,Z,de,xe=null,Te=null,Be=null,$e=!1,Fe=null,Ve=!!Z.dynamicChildren)=>{if(Y===Z)return;Y&&!Zs(Y,Z)&&(xe=ue(Y),F(Y,Te,Be,!0),Y=null),Z.patchFlag===-2&&(Ve=!1,Z.dynamicChildren=null);const{type:Re,ref:Qe,shapeFlag:Ke}=Z;switch(Re){case Bu:k(Y,Z,de,xe);break;case la:p(Y,Z,de,xe);break;case $l:Y==null&&L(Z,de,xe,$e);break;case At:w(Y,Z,de,xe,Te,Be,$e,Fe,Ve);break;default:Ke&1?B(Y,Z,de,xe,Te,Be,$e,Fe,Ve):Ke&6?E(Y,Z,de,xe,Te,Be,$e,Fe,Ve):(Ke&64||Ke&128)&&Re.process(Y,Z,de,xe,Te,Be,$e,Fe,Ve,ke)}Qe!=null&&Te&&Rc(Qe,Y&&Y.ref,Be,Z||Y,!Z)},k=(Y,Z,de,xe)=>{if(Y==null)a(Z.el=o(Z.children),de,xe);else{const Te=Z.el=Y.el;Z.children!==Y.children&&u(Te,Z.children)}},p=(Y,Z,de,xe)=>{Y==null?a(Z.el=m(Z.children||""),de,xe):Z.el=Y.el},L=(Y,Z,de,xe)=>{[Y.el,Y.anchor]=A(Y.children,Z,de,xe,Y.el,Y.anchor)},O=({el:Y,anchor:Z},de,xe)=>{let Te;for(;Y&&Y!==Z;)Te=c(Y),a(Y,de,xe),Y=Te;a(Z,de,xe)},g=({el:Y,anchor:Z})=>{let de;for(;Y&&Y!==Z;)de=c(Y),s(Y),Y=de;s(Z)},B=(Y,Z,de,xe,Te,Be,$e,Fe,Ve)=>{$e=$e||Z.type==="svg",Y==null?R(Z,de,xe,Te,Be,$e,Fe,Ve):b(Y,Z,Te,Be,$e,Fe,Ve)},R=(Y,Z,de,xe,Te,Be,$e,Fe)=>{let Ve,Re;const{type:Qe,props:Ke,shapeFlag:Ge,transition:tt,patchFlag:st,dirs:ge}=Y;if(Y.el&&h!==void 0&&st===-1)Ve=Y.el=h(Y.el);else{if(Ve=Y.el=r(Y.type,Be,Ke&&Ke.is,Ke),Ge&8?d(Ve,Y.children):Ge&16&&I(Y.children,Ve,null,xe,Te,Be&&Qe!=="foreignObject",$e,Fe),ge&&Ds(Y,null,xe,"created"),Ke){for(const Ae in Ke)Ae!=="value"&&!po(Ae)&&i(Ve,Ae,null,Ke[Ae],Be,Y.children,xe,Te,G);"value"in Ke&&i(Ve,"value",null,Ke.value),(Re=Ke.onVnodeBeforeMount)&&Ea(Re,xe,Y)}C(Ve,Y,Y.scopeId,$e,xe)}ge&&Ds(Y,null,xe,"beforeMount");const z=(!Te||Te&&!Te.pendingBranch)&&tt&&!tt.persisted;z&&tt.beforeEnter(Ve),a(Ve,Z,de),((Re=Ke&&Ke.onVnodeMounted)||z||ge)&&Nn(()=>{Re&&Ea(Re,xe,Y),z&&tt.enter(Ve),ge&&Ds(Y,null,xe,"mounted")},Te)},C=(Y,Z,de,xe,Te)=>{if(de&&v(Y,de),xe)for(let Be=0;Be<xe.length;Be++)v(Y,xe[Be]);if(Te){let Be=Te.subTree;if(Z===Be){const $e=Te.vnode;C(Y,$e,$e.scopeId,$e.slotScopeIds,Te.parent)}}},I=(Y,Z,de,xe,Te,Be,$e,Fe,Ve=0)=>{for(let Re=Ve;Re<Y.length;Re++){const Qe=Y[Re]=Fe?Ts(Y[Re]):Oa(Y[Re]);T(null,Qe,Z,de,xe,Te,Be,$e,Fe)}},b=(Y,Z,de,xe,Te,Be,$e)=>{const Fe=Z.el=Y.el;let{patchFlag:Ve,dynamicChildren:Re,dirs:Qe}=Z;Ve|=Y.patchFlag&16;const Ke=Y.props||qt,Ge=Z.props||qt;let tt;de&&js(de,!1),(tt=Ge.onVnodeBeforeUpdate)&&Ea(tt,de,Z,Y),Qe&&Ds(Z,Y,de,"beforeUpdate"),de&&js(de,!0);const st=Te&&Z.type!=="foreignObject";if(Re?y(Y.dynamicChildren,Re,Fe,de,xe,st,Be):$e||U(Y,Z,Fe,null,de,xe,st,Be,!1),Ve>0){if(Ve&16)_(Fe,Z,Ke,Ge,de,xe,Te);else if(Ve&2&&Ke.class!==Ge.class&&i(Fe,"class",null,Ge.class,Te),Ve&4&&i(Fe,"style",Ke.style,Ge.style,Te),Ve&8){const ge=Z.dynamicProps;for(let z=0;z<ge.length;z++){const Ae=ge[z],le=Ke[Ae],Ne=Ge[Ae];(Ne!==le||Ae==="value")&&i(Fe,Ae,le,Ne,Te,Y.children,de,xe,G)}}Ve&1&&Y.children!==Z.children&&d(Fe,Z.children)}else!$e&&Re==null&&_(Fe,Z,Ke,Ge,de,xe,Te);((tt=Ge.onVnodeUpdated)||Qe)&&Nn(()=>{tt&&Ea(tt,de,Z,Y),Qe&&Ds(Z,Y,de,"updated")},xe)},y=(Y,Z,de,xe,Te,Be,$e)=>{for(let Fe=0;Fe<Z.length;Fe++){const Ve=Y[Fe],Re=Z[Fe],Qe=Ve.el&&(Ve.type===At||!Zs(Ve,Re)||Ve.shapeFlag&70)?l(Ve.el):de;T(Ve,Re,Qe,null,xe,Te,Be,$e,!0)}},_=(Y,Z,de,xe,Te,Be,$e)=>{if(de!==xe){for(const Fe in xe){if(po(Fe))continue;const Ve=xe[Fe],Re=de[Fe];Ve!==Re&&Fe!=="value"&&i(Y,Fe,Re,Ve,$e,Z.children,Te,Be,G)}if(de!==qt)for(const Fe in de)!po(Fe)&&!(Fe in xe)&&i(Y,Fe,de[Fe],null,$e,Z.children,Te,Be,G);"value"in xe&&i(Y,"value",de.value,xe.value)}},w=(Y,Z,de,xe,Te,Be,$e,Fe,Ve)=>{const Re=Z.el=Y?Y.el:o(""),Qe=Z.anchor=Y?Y.anchor:o("");let{patchFlag:Ke,dynamicChildren:Ge,slotScopeIds:tt}=Z;tt&&(Fe=Fe?Fe.concat(tt):tt),Y==null?(a(Re,de,xe),a(Qe,de,xe),I(Z.children,de,Qe,Te,Be,$e,Fe,Ve)):Ke>0&&Ke&64&&Ge&&Y.dynamicChildren?(y(Y.dynamicChildren,Ge,de,Te,Be,$e,Fe),(Z.key!=null||Te&&Z===Te.subTree)&&Gf(Y,Z,!0)):U(Y,Z,de,Qe,Te,Be,$e,Fe,Ve)},E=(Y,Z,de,xe,Te,Be,$e,Fe,Ve)=>{Z.slotScopeIds=Fe,Y==null?Z.shapeFlag&512?Te.ctx.activate(Z,de,xe,$e,Ve):M(Z,de,xe,Te,Be,$e,Ve):V(Y,Z,Ve)},M=(Y,Z,de,xe,Te,Be,$e)=>{const Fe=Y.component=H_(Y,xe,Te);if(nl(Y)&&(Fe.ctx.renderer=ke),z_(Fe),Fe.asyncDep){if(Te&&Te.registerDep(Fe,q),!Y.el){const Ve=Fe.subTree=Xe(la);p(null,Ve,Z,de)}return}q(Fe,Y,Z,de,Te,Be,$e)},V=(Y,Z,de)=>{const xe=Z.component=Y.component;if(n_(Y,Z,de))if(xe.asyncDep&&!xe.asyncResolved){$(xe,Z,de);return}else xe.next=Z,Kp(xe.update),xe.update();else Z.el=Y.el,xe.vnode=Z},q=(Y,Z,de,xe,Te,Be,$e)=>{const Fe=()=>{if(Y.isMounted){let{next:Qe,bu:Ke,u:Ge,parent:tt,vnode:st}=Y,ge=Qe,z;js(Y,!1),Qe?(Qe.el=st.el,$(Y,Qe,$e)):Qe=st,Ke&&Pl(Ke),(z=Qe.props&&Qe.props.onVnodeBeforeUpdate)&&Ea(z,tt,Qe,st),js(Y,!0);const Ae=$d(Y),le=Y.subTree;Y.subTree=Ae,T(le,Ae,l(le.el),ue(le),Y,Te,Be),Qe.el=Ae.el,ge===null&&a_(Y,Ae.el),Ge&&Nn(Ge,Te),(z=Qe.props&&Qe.props.onVnodeUpdated)&&Nn(()=>Ea(z,tt,Qe,st),Te)}else{let Qe;const{el:Ke,props:Ge}=Z,{bm:tt,m:st,parent:ge}=Y,z=ir(Z);js(Y,!1),tt&&Pl(tt),!z&&(Qe=Ge&&Ge.onVnodeBeforeMount)&&Ea(Qe,ge,Z),js(Y,!0);{const Ae=Y.subTree=$d(Y);T(null,Ae,de,xe,Y,Te,Be),Z.el=Ae.el}if(st&&Nn(st,Te),!z&&(Qe=Ge&&Ge.onVnodeMounted)){const Ae=Z;Nn(()=>Ea(Qe,ge,Ae),Te)}(Z.shapeFlag&256||ge&&ir(ge.vnode)&&ge.vnode.shapeFlag&256)&&Y.a&&Nn(Y.a,Te),Y.isMounted=!0,Z=de=xe=null}},Ve=Y.effect=new hu(Fe,()=>Sf(Re),Y.scope),Re=Y.update=()=>Ve.run();Re.id=Y.uid,js(Y,!0),Re()},$=(Y,Z,de)=>{Z.component=Y;const xe=Y.vnode.props;Y.vnode=Z,Y.next=null,E_(Y,Z.props,xe,de),I_(Y,Z.children,de),Li(),el(void 0,Y.update),Oi()},U=(Y,Z,de,xe,Te,Be,$e,Fe,Ve=!1)=>{const Re=Y&&Y.children,Qe=Y?Y.shapeFlag:0,Ke=Z.children,{patchFlag:Ge,shapeFlag:tt}=Z;if(Ge>0){if(Ge&128){x(Re,Ke,de,xe,Te,Be,$e,Fe,Ve);return}else if(Ge&256){f(Re,Ke,de,xe,Te,Be,$e,Fe,Ve);return}}tt&8?(Qe&16&&G(Re,Te,Be),Ke!==Re&&d(de,Ke)):Qe&16?tt&16?x(Re,Ke,de,xe,Te,Be,$e,Fe,Ve):G(Re,Te,Be,!0):(Qe&8&&d(de,""),tt&16&&I(Ke,de,xe,Te,Be,$e,Fe,Ve))},f=(Y,Z,de,xe,Te,Be,$e,Fe,Ve)=>{Y=Y||ki,Z=Z||ki;const Re=Y.length,Qe=Z.length,Ke=Math.min(Re,Qe);let Ge;for(Ge=0;Ge<Ke;Ge++){const tt=Z[Ge]=Ve?Ts(Z[Ge]):Oa(Z[Ge]);T(Y[Ge],tt,de,null,Te,Be,$e,Fe,Ve)}Re>Qe?G(Y,Te,Be,!0,!1,Ke):I(Z,de,xe,Te,Be,$e,Fe,Ve,Ke)},x=(Y,Z,de,xe,Te,Be,$e,Fe,Ve)=>{let Re=0;const Qe=Z.length;let Ke=Y.length-1,Ge=Qe-1;for(;Re<=Ke&&Re<=Ge;){const tt=Y[Re],st=Z[Re]=Ve?Ts(Z[Re]):Oa(Z[Re]);if(Zs(tt,st))T(tt,st,de,null,Te,Be,$e,Fe,Ve);else break;Re++}for(;Re<=Ke&&Re<=Ge;){const tt=Y[Ke],st=Z[Ge]=Ve?Ts(Z[Ge]):Oa(Z[Ge]);if(Zs(tt,st))T(tt,st,de,null,Te,Be,$e,Fe,Ve);else break;Ke--,Ge--}if(Re>Ke){if(Re<=Ge){const tt=Ge+1,st=tt<Qe?Z[tt].el:xe;for(;Re<=Ge;)T(null,Z[Re]=Ve?Ts(Z[Re]):Oa(Z[Re]),de,st,Te,Be,$e,Fe,Ve),Re++}}else if(Re>Ge)for(;Re<=Ke;)F(Y[Re],Te,Be,!0),Re++;else{const tt=Re,st=Re,ge=new Map;for(Re=st;Re<=Ge;Re++){const K=Z[Re]=Ve?Ts(Z[Re]):Oa(Z[Re]);K.key!=null&&ge.set(K.key,Re)}let z,Ae=0;const le=Ge-st+1;let Ne=!1,D=0;const j=new Array(le);for(Re=0;Re<le;Re++)j[Re]=0;for(Re=tt;Re<=Ke;Re++){const K=Y[Re];if(Ae>=le){F(K,Te,Be,!0);continue}let J;if(K.key!=null)J=ge.get(K.key);else for(z=st;z<=Ge;z++)if(j[z-st]===0&&Zs(K,Z[z])){J=z;break}J===void 0?F(K,Te,Be,!0):(j[J-st]=Re+1,J>=D?D=J:Ne=!0,T(K,Z[J],de,null,Te,Be,$e,Fe,Ve),Ae++)}const W=Ne?V_(j):ki;for(z=W.length-1,Re=le-1;Re>=0;Re--){const K=st+Re,J=Z[K],P=K+1<Qe?Z[K+1].el:xe;j[Re]===0?T(null,J,de,P,Te,Be,$e,Fe,Ve):Ne&&(z<0||Re!==W[z]?H(J,de,P,2):z--)}}},H=(Y,Z,de,xe,Te=null)=>{const{el:Be,type:$e,transition:Fe,children:Ve,shapeFlag:Re}=Y;if(Re&6){H(Y.component.subTree,Z,de,xe);return}if(Re&128){Y.suspense.move(Z,de,xe);return}if(Re&64){$e.move(Y,Z,de,ke);return}if($e===At){a(Be,Z,de);for(let Ke=0;Ke<Ve.length;Ke++)H(Ve[Ke],Z,de,xe);a(Y.anchor,Z,de);return}if($e===$l){O(Y,Z,de);return}if(xe!==2&&Re&1&&Fe)if(xe===0)Fe.beforeEnter(Be),a(Be,Z,de),Nn(()=>Fe.enter(Be),Te);else{const{leave:Ke,delayLeave:Ge,afterLeave:tt}=Fe,st=()=>a(Be,Z,de),ge=()=>{Ke(Be,()=>{st(),tt&&tt()})};Ge?Ge(Be,st,ge):ge()}else a(Be,Z,de)},F=(Y,Z,de,xe=!1,Te=!1)=>{const{type:Be,props:$e,ref:Fe,children:Ve,dynamicChildren:Re,shapeFlag:Qe,patchFlag:Ke,dirs:Ge}=Y;if(Fe!=null&&Rc(Fe,null,de,Y,!0),Qe&256){Z.ctx.deactivate(Y);return}const tt=Qe&1&&Ge,st=!ir(Y);let ge;if(st&&(ge=$e&&$e.onVnodeBeforeUnmount)&&Ea(ge,Z,Y),Qe&6)X(Y.component,de,xe);else{if(Qe&128){Y.suspense.unmount(de,xe);return}tt&&Ds(Y,null,Z,"beforeUnmount"),Qe&64?Y.type.remove(Y,Z,de,Te,ke,xe):Re&&(Be!==At||Ke>0&&Ke&64)?G(Re,Z,de,!1,!0):(Be===At&&Ke&384||!Te&&Qe&16)&&G(Ve,Z,de),xe&&se(Y)}(st&&(ge=$e&&$e.onVnodeUnmounted)||tt)&&Nn(()=>{ge&&Ea(ge,Z,Y),tt&&Ds(Y,null,Z,"unmounted")},de)},se=Y=>{const{type:Z,el:de,anchor:xe,transition:Te}=Y;if(Z===At){me(de,xe);return}if(Z===$l){g(Y);return}const Be=()=>{s(de),Te&&!Te.persisted&&Te.afterLeave&&Te.afterLeave()};if(Y.shapeFlag&1&&Te&&!Te.persisted){const{leave:$e,delayLeave:Fe}=Te,Ve=()=>$e(de,Be);Fe?Fe(Y.el,Be,Ve):Ve()}else Be()},me=(Y,Z)=>{let de;for(;Y!==Z;)de=c(Y),s(Y),Y=de;s(Z)},X=(Y,Z,de)=>{const{bum:xe,scope:Te,update:Be,subTree:$e,um:Fe}=Y;xe&&Pl(xe),Te.stop(),Be&&(Be.active=!1,F($e,Y,Z,de)),Fe&&Nn(Fe,Z),Nn(()=>{Y.isUnmounted=!0},Z),Z&&Z.pendingBranch&&!Z.isUnmounted&&Y.asyncDep&&!Y.asyncResolved&&Y.suspenseId===Z.pendingId&&(Z.deps--,Z.deps===0&&Z.resolve())},G=(Y,Z,de,xe=!1,Te=!1,Be=0)=>{for(let $e=Be;$e<Y.length;$e++)F(Y[$e],Z,de,xe,Te)},ue=Y=>Y.shapeFlag&6?ue(Y.component.subTree):Y.shapeFlag&128?Y.suspense.next():c(Y.anchor||Y.el),be=(Y,Z,de)=>{Y==null?Z._vnode&&F(Z._vnode,null,null,!0):T(Z._vnode||null,Y,Z,null,null,null,de),Tf(),Z._vnode=Y},ke={p:T,um:F,m:H,r:se,mt:M,mc:I,pc:U,pbc:y,n:ue,o:e};return{render:be,hydrate:void 0,createApp:L_(be)}}function js({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function Gf(e,t,n=!1){const a=e.children,s=t.children;if(Rt(a)&&Rt(s))for(let i=0;i<a.length;i++){const r=a[i];let o=s[i];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=s[i]=Ts(s[i]),o.el=r.el),n||Gf(r,o))}}function V_(e){const t=e.slice(),n=[0];let a,s,i,r,o;const m=e.length;for(a=0;a<m;a++){const u=e[a];if(u!==0){if(s=n[n.length-1],e[s]<u){t[a]=s,n.push(a);continue}for(i=0,r=n.length-1;i<r;)o=i+r>>1,e[n[o]]<u?i=o+1:r=o;u<e[n[i]]&&(i>0&&(t[a]=n[i-1]),n[i]=a)}}for(i=n.length,r=n[i-1];i-- >0;)n[i]=r,r=t[r];return n}const P_=e=>e.__isTeleport,At=Symbol(void 0),Bu=Symbol(void 0),la=Symbol(void 0),$l=Symbol(void 0),rr=[];let ga=null;function oe(e=!1){rr.push(ga=e?null:[])}function D_(){rr.pop(),ga=rr[rr.length-1]||null}let gr=1;function Qd(e){gr+=e}function Kf(e){return e.dynamicChildren=gr>0?ga||ki:null,D_(),gr>0&&ga&&ga.push(e),e}function Ce(e,t,n,a,s,i){return Kf(Pe(e,t,n,a,s,i,!0))}function Pt(e,t,n,a,s){return Kf(Xe(e,t,n,a,s,!0))}function Io(e){return e?e.__v_isVNode===!0:!1}function Zs(e,t){return e.type===t.type&&e.key===t.key}const il="__vInternal",Zf=({key:e})=>e??null,_o=({ref:e,ref_key:t,ref_for:n})=>e!=null?Bn(e)||In(e)||Tt(e)?{i:An,r:e,k:t,f:!!n}:e:null;function Pe(e,t=null,n=null,a=0,s=null,i=e===At?0:1,r=!1,o=!1){const m={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Zf(t),ref:t&&_o(t),scopeId:Ef,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:a,dynamicProps:s,dynamicChildren:null,appContext:null};return o?(Lu(m,n),i&128&&e.normalize(m)):n&&(m.shapeFlag|=Bn(n)?8:16),gr>0&&!r&&ga&&(m.patchFlag>0||i&6)&&m.patchFlag!==32&&ga.push(m),m}const Xe=j_;function j_(e,t=null,n=null,a=0,s=null,i=!1){if((!e||e===jf)&&(e=la),Io(e)){const o=Ls(e,t,!0);return n&&Lu(o,n),gr>0&&!i&&ga&&(o.shapeFlag&6?ga[ga.indexOf(e)]=o:ga.push(o)),o.patchFlag|=-2,o}if(X_(e)&&(e=e.__vccOpts),t){t=Dt(t);let{class:o,style:m}=t;o&&!Bn(o)&&(t.class=kt(o)),Ln(m)&&(uf(m)&&!Rt(m)&&(m=ya({},m)),t.style=Qt(m))}const r=Bn(e)?1:s_(e)?128:P_(e)?64:Ln(e)?4:Tt(e)?2:0;return Pe(e,t,n,a,s,r,i,!0)}function Dt(e){return e?uf(e)||il in e?ya({},e):e:null}function Ls(e,t,n=!1){const{props:a,ref:s,patchFlag:i,children:r}=e,o=t?Ou(a||{},t):a;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:o,key:o&&Zf(o),ref:t&&t.ref?n&&s?Rt(s)?s.concat(_o(t)):[s,_o(t)]:_o(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:r,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==At?i===-1?16:i|16:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Ls(e.ssContent),ssFallback:e.ssFallback&&Ls(e.ssFallback),el:e.el,anchor:e.anchor}}function is(e=" ",t=0){return Xe(Bu,null,e,t)}function Ue(e="",t=!1){return t?(oe(),Pt(la,null,e)):Xe(la,null,e)}function Oa(e){return e==null||typeof e=="boolean"?Xe(la):Rt(e)?Xe(At,null,e.slice()):typeof e=="object"?Ts(e):Xe(Bu,null,String(e))}function Ts(e){return e.el===null||e.memo?e:Ls(e)}function Lu(e,t){let n=0;const{shapeFlag:a}=e;if(t==null)t=null;else if(Rt(t))n=16;else if(typeof t=="object")if(a&65){const s=t.default;s&&(s._c&&(s._d=!1),Lu(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!(il in t)?t._ctx=An:s===3&&An&&(An.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Tt(t)?(t={default:t,_ctx:An},n=32):(t=String(t),a&64?(n=16,t=[is(t)]):n=8);e.children=t,e.shapeFlag|=n}function Ou(...e){const t={};for(let n=0;n<e.length;n++){const a=e[n];for(const s in a)if(s==="class")t.class!==a.class&&(t.class=kt([t.class,a.class]));else if(s==="style")t.style=Qt([t.style,a.style]);else if(ku(s)){const i=t[s],r=a[s];r&&i!==r&&!(Rt(i)&&i.includes(r))&&(t[s]=i?[].concat(i,r):r)}else s!==""&&(t[s]=a[s])}return t}function Ea(e,t,n,a=null){oa(e,t,7,[n,a])}const N_=Xf();let $_=0;function H_(e,t,n){const a=e.type,s=(t?t.appContext:e.appContext)||N_,i={uid:$_++,vnode:e,type:a,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new ap(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Uf(a,s),emitsOptions:Af(a,s),emit:null,emitted:null,propsDefaults:qt,inheritAttrs:a.inheritAttrs,ctx:qt,data:qt,props:qt,attrs:qt,slots:qt,refs:qt,setupState:qt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=Jp.bind(null,i),e.ce&&e.ce(i),i}let wn=null;const Qf=()=>wn||An,Ci=e=>{wn=e,e.scope.on()},si=()=>{wn&&wn.scope.off(),wn=null};function Jf(e){return e.vnode.shapeFlag&4}let pr=!1;function z_(e,t=!1){pr=t;const{props:n,children:a}=e.vnode,s=Jf(e);A_(e,n,s,t),R_(e,a);const i=s?U_(e,t):void 0;return pr=!1,i}function U_(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=df(new Proxy(e.ctx,w_));const{setup:a}=n;if(a){const s=e.setupContext=a.length>1?W_(e):null;Ci(e),Li();const i=Es(a,e,0,[e.props,s]);if(Oi(),si(),pf(i)){if(i.then(si,si),t)return i.then(r=>{Jd(e,r)}).catch(r=>{Jo(r,e,0)});e.asyncDep=i}else Jd(e,i)}else ev(e)}function Jd(e,t,n){Tt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ln(t)&&(e.setupState=mf(t)),ev(e)}function ev(e,t,n){const a=e.type;e.render||(e.render=a.render||ns),Ci(e),Li(),S_(e),Oi(),si()}function q_(e){return new Proxy(e.attrs,{get(t,n){return Kn(e,"get","$attrs"),t[n]}})}function W_(e){const t=a=>{e.exposed=a||{}};let n;return{get attrs(){return n||(n=q_(e))},slots:e.slots,emit:e.emit,expose:t}}function rl(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(mf(df(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Mo)return Mo[n](e)}}))}function Y_(e,t=!0){return Tt(e)?e.displayName||e.name:e.name||t&&e.__name}function X_(e){return Tt(e)&&"__vccOpts"in e}const G_=(e,t)=>Vp(e,t,pr);function K_(e,t,n){const a=arguments.length;return a===2?Ln(t)&&!Rt(t)?Io(t)?Xe(e,null,[t]):Xe(e,t):Xe(e,null,t):(a>3?n=Array.prototype.slice.call(arguments,2):a===3&&Io(n)&&(n=[n]),Xe(e,t,n))}const Z_="3.2.37";function Q_(e,t){const n=Object.create(null),a=e.split(",");for(let s=0;s<a.length;s++)n[a[s]]=!0;return s=>!!n[s]}const J_="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",e2=Q_(J_);function tv(e){return!!e||e===""}const t2=/^on[^a-z]/,n2=e=>t2.test(e),a2=e=>e.startsWith("onUpdate:"),Rr=Object.assign,Ir=Array.isArray,s2=e=>typeof e=="function",Ic=e=>typeof e=="string",i2=e=>e!==null&&typeof e=="object",Fu=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},r2=/-(\w)/g,e1=Fu(e=>e.replace(r2,(t,n)=>n?n.toUpperCase():"")),o2=/\B([A-Z])/g,xi=Fu(e=>e.replace(o2,"-$1").toLowerCase()),l2=Fu(e=>e.charAt(0).toUpperCase()+e.slice(1)),Bc=e=>{const t=parseFloat(e);return isNaN(t)?e:t},c2="http://www.w3.org/2000/svg",Qs=typeof document<"u"?document:null,t1=Qs&&Qs.createElement("template"),u2={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,a)=>{const s=t?Qs.createElementNS(c2,e):Qs.createElement(e,n?{is:n}:void 0);return e==="select"&&a&&a.multiple!=null&&s.setAttribute("multiple",a.multiple),s},createText:e=>Qs.createTextNode(e),createComment:e=>Qs.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Qs.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,n,a,s,i){const r=n?n.previousSibling:t.lastChild;if(s&&(s===i||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{t1.innerHTML=a?`<svg>${e}</svg>`:e;const o=t1.content;if(a){const m=o.firstChild;for(;m.firstChild;)o.appendChild(m.firstChild);o.removeChild(m)}t.insertBefore(o,n)}return[r?r.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function d2(e,t,n){const a=e._vtc;a&&(t=(t?[t,...a]:[...a]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function m2(e,t,n){const a=e.style,s=Ic(n);if(n&&!s){for(const i in n)Lc(a,i,n[i]);if(t&&!Ic(t))for(const i in t)n[i]==null&&Lc(a,i,"")}else{const i=a.display;s?t!==n&&(a.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(a.display=i)}}const n1=/\s*!important$/;function Lc(e,t,n){if(Ir(n))n.forEach(a=>Lc(e,t,a));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const a=f2(e,t);n1.test(n)?e.setProperty(xi(a),n.replace(n1,""),"important"):e[a]=n}}const a1=["Webkit","Moz","ms"],Hl={};function f2(e,t){const n=Hl[t];if(n)return n;let a=Na(t);if(a!=="filter"&&a in e)return Hl[t]=a;a=l2(a);for(let s=0;s<a1.length;s++){const i=a1[s]+a;if(i in e)return Hl[t]=i}return t}const s1="http://www.w3.org/1999/xlink";function v2(e,t,n,a,s){if(a&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(s1,t.slice(6,t.length)):e.setAttributeNS(s1,t,n);else{const i=e2(t);n==null||i&&!tv(n)?e.removeAttribute(t):e.setAttribute(t,i?"":n)}}function h2(e,t,n,a,s,i,r){if(t==="innerHTML"||t==="textContent"){a&&r(a,s,i),e[t]=n??"";return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=n;const m=n??"";(e.value!==m||e.tagName==="OPTION")&&(e.value=m),n==null&&e.removeAttribute(t);return}let o=!1;if(n===""||n==null){const m=typeof e[t];m==="boolean"?n=tv(n):n==null&&m==="string"?(n="",o=!0):m==="number"&&(n=0,o=!0)}try{e[t]=n}catch{}o&&e.removeAttribute(t)}const[nv,g2]=(()=>{let e=Date.now,t=!1;if(typeof window<"u"){Date.now()>document.createEvent("Event").timeStamp&&(e=performance.now.bind(performance));const n=navigator.userAgent.match(/firefox\/(\d+)/i);t=!!(n&&Number(n[1])<=53)}return[e,t]})();let Oc=0;const p2=Promise.resolve(),_2=()=>{Oc=0},b2=()=>Oc||(p2.then(_2),Oc=nv());function y2(e,t,n,a){e.addEventListener(t,n,a)}function w2(e,t,n,a){e.removeEventListener(t,n,a)}function S2(e,t,n,a,s=null){const i=e._vei||(e._vei={}),r=i[t];if(a&&r)r.value=a;else{const[o,m]=k2(t);if(a){const u=i[t]=x2(a,s);y2(e,o,u,m)}else r&&(w2(e,o,r,m),i[t]=void 0)}}const i1=/(?:Once|Passive|Capture)$/;function k2(e){let t;if(i1.test(e)){t={};let n;for(;n=e.match(i1);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[xi(e.slice(2)),t]}function x2(e,t){const n=a=>{const s=a.timeStamp||nv();(g2||s>=n.attached-1)&&oa(T2(a,n.value),t,5,[a])};return n.value=e,n.attached=b2(),n}function T2(e,t){if(Ir(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(a=>s=>!s._stopped&&a&&a(s))}else return t}const r1=/^on[a-z]/,C2=(e,t,n,a,s=!1,i,r,o,m)=>{t==="class"?d2(e,a,s):t==="style"?m2(e,n,a):n2(t)?a2(t)||S2(e,t,n,a,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):A2(e,t,a,s))?h2(e,t,a,i,r,o,m):(t==="true-value"?e._trueValue=a:t==="false-value"&&(e._falseValue=a),v2(e,t,a,s))};function A2(e,t,n,a){return a?!!(t==="innerHTML"||t==="textContent"||t in e&&r1.test(t)&&s2(n)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||r1.test(t)&&Ic(n)?!1:t in e}function E2(e,t){const n=c_(e);class a extends Vu{constructor(i){super(n,i,t)}}return a.def=n,a}const M2=typeof HTMLElement<"u"?HTMLElement:class{};class Vu extends M2{constructor(t,n={},a){super(),this._def=t,this._props=n,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this.shadowRoot&&a?a(this._createVNode(),this.shadowRoot):this.attachShadow({mode:"open"})}connectedCallback(){this._connected=!0,this._instance||this._resolveDef()}disconnectedCallback(){this._connected=!1,wf(()=>{this._connected||(f1(null,this.shadowRoot),this._instance=null)})}_resolveDef(){if(this._resolved)return;this._resolved=!0;for(let a=0;a<this.attributes.length;a++)this._setAttr(this.attributes[a].name);new MutationObserver(a=>{for(const s of a)this._setAttr(s.attributeName)}).observe(this,{attributes:!0});const t=a=>{const{props:s,styles:i}=a,r=!Ir(s),o=s?r?Object.keys(s):s:[];let m;if(r)for(const u in this._props){const d=s[u];(d===Number||d&&d.type===Number)&&(this._props[u]=Bc(this._props[u]),(m||(m=Object.create(null)))[u]=!0)}this._numberProps=m;for(const u of Object.keys(this))u[0]!=="_"&&this._setProp(u,this[u],!0,!1);for(const u of o.map(e1))Object.defineProperty(this,u,{get(){return this._getProp(u)},set(d){this._setProp(u,d)}});this._applyStyles(i),this._update()},n=this._def.__asyncLoader;n?n().then(t):t(this._def)}_setAttr(t){let n=this.getAttribute(t);this._numberProps&&this._numberProps[t]&&(n=Bc(n)),this._setProp(e1(t),n,!1)}_getProp(t){return this._props[t]}_setProp(t,n,a=!0,s=!0){n!==this._props[t]&&(this._props[t]=n,s&&this._instance&&this._update(),a&&(n===!0?this.setAttribute(xi(t),""):typeof n=="string"||typeof n=="number"?this.setAttribute(xi(t),n+""):n||this.removeAttribute(xi(t))))}_update(){f1(this._createVNode(),this.shadowRoot)}_createVNode(){const t=Xe(this._def,Rr({},this._props));return this._instance||(t.ce=n=>{this._instance=n,n.isCE=!0,n.emit=(s,...i)=>{this.dispatchEvent(new CustomEvent(s,{detail:i}))};let a=this;for(;a=a&&(a.parentNode||a.host);)if(a instanceof Vu){n.parent=a._instance;break}}),t}_applyStyles(t){t&&t.forEach(n=>{const a=document.createElement("style");a.textContent=n,this.shadowRoot.appendChild(a)})}}const ps="transition",zi="animation",mn=(e,{slots:t})=>K_(Bf,sv(e),t);mn.displayName="Transition";const av={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},R2=mn.props=Rr({},Bf.props,av),Ns=(e,t=[])=>{Ir(e)?e.forEach(n=>n(...t)):e&&e(...t)},o1=e=>e?Ir(e)?e.some(t=>t.length>1):e.length>1:!1;function sv(e){const t={};for(const _ in e)_ in av||(t[_]=e[_]);if(e.css===!1)return t;const{name:n="v",type:a,duration:s,enterFromClass:i=`${n}-enter-from`,enterActiveClass:r=`${n}-enter-active`,enterToClass:o=`${n}-enter-to`,appearFromClass:m=i,appearActiveClass:u=r,appearToClass:d=o,leaveFromClass:l=`${n}-leave-from`,leaveActiveClass:c=`${n}-leave-active`,leaveToClass:v=`${n}-leave-to`}=e,h=I2(s),A=h&&h[0],T=h&&h[1],{onBeforeEnter:k,onEnter:p,onEnterCancelled:L,onLeave:O,onLeaveCancelled:g,onBeforeAppear:B=k,onAppear:R=p,onAppearCancelled:C=L}=t,I=(_,w,E)=>{xs(_,w?d:o),xs(_,w?u:r),E&&E()},b=(_,w)=>{_._isLeaving=!1,xs(_,l),xs(_,v),xs(_,c),w&&w()},y=_=>(w,E)=>{const M=_?R:p,V=()=>I(w,_,E);Ns(M,[w,V]),l1(()=>{xs(w,_?m:i),Za(w,_?d:o),o1(M)||c1(w,a,A,V)})};return Rr(t,{onBeforeEnter(_){Ns(k,[_]),Za(_,i),Za(_,r)},onBeforeAppear(_){Ns(B,[_]),Za(_,m),Za(_,u)},onEnter:y(!1),onAppear:y(!0),onLeave(_,w){_._isLeaving=!0;const E=()=>b(_,w);Za(_,l),rv(),Za(_,c),l1(()=>{_._isLeaving&&(xs(_,l),Za(_,v),o1(O)||c1(_,a,T,E))}),Ns(O,[_,E])},onEnterCancelled(_){I(_,!1),Ns(L,[_])},onAppearCancelled(_){I(_,!0),Ns(C,[_])},onLeaveCancelled(_){b(_),Ns(g,[_])}})}function I2(e){if(e==null)return null;if(i2(e))return[zl(e.enter),zl(e.leave)];{const t=zl(e);return[t,t]}}function zl(e){return Bc(e)}function Za(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e._vtc||(e._vtc=new Set)).add(t)}function xs(e,t){t.split(/\s+/).forEach(a=>a&&e.classList.remove(a));const{_vtc:n}=e;n&&(n.delete(t),n.size||(e._vtc=void 0))}function l1(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let B2=0;function c1(e,t,n,a){const s=e._endId=++B2,i=()=>{s===e._endId&&a()};if(n)return setTimeout(i,n);const{type:r,timeout:o,propCount:m}=iv(e,t);if(!r)return a();const u=r+"end";let d=0;const l=()=>{e.removeEventListener(u,c),i()},c=v=>{v.target===e&&++d>=m&&l()};setTimeout(()=>{d<m&&l()},o+1),e.addEventListener(u,c)}function iv(e,t){const n=window.getComputedStyle(e),a=h=>(n[h]||"").split(", "),s=a(ps+"Delay"),i=a(ps+"Duration"),r=u1(s,i),o=a(zi+"Delay"),m=a(zi+"Duration"),u=u1(o,m);let d=null,l=0,c=0;t===ps?r>0&&(d=ps,l=r,c=i.length):t===zi?u>0&&(d=zi,l=u,c=m.length):(l=Math.max(r,u),d=l>0?r>u?ps:zi:null,c=d?d===ps?i.length:m.length:0);const v=d===ps&&/\b(transform|all)(,|$)/.test(n[ps+"Property"]);return{type:d,timeout:l,propCount:c,hasTransform:v}}function u1(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,a)=>d1(n)+d1(e[a])))}function d1(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function rv(){return document.body.offsetHeight}const ov=new WeakMap,lv=new WeakMap,L2={name:"TransitionGroup",props:Rr({},R2,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=Qf(),a=If();let s,i;return Vf(()=>{if(!s.length)return;const r=e.moveClass||`${e.name||"v"}-move`;if(!P2(s[0].el,n.vnode.el,r))return;s.forEach(O2),s.forEach(F2);const o=s.filter(V2);rv(),o.forEach(m=>{const u=m.el,d=u.style;Za(u,r),d.transform=d.webkitTransform=d.transitionDuration="";const l=u._moveCb=c=>{c&&c.target!==u||(!c||/transform$/.test(c.propertyName))&&(u.removeEventListener("transitionend",l),u._moveCb=null,xs(u,r))};u.addEventListener("transitionend",l)})}),()=>{const r=Vt(e),o=sv(r);let m=r.tag||At;s=i,i=t.default?Eu(t.default()):[];for(let u=0;u<i.length;u++){const d=i[u];d.key!=null&&hr(d,vr(d,o,a,n))}if(s)for(let u=0;u<s.length;u++){const d=s[u];hr(d,vr(d,o,a,n)),ov.set(d,d.el.getBoundingClientRect())}return Xe(m,null,i)}}},Pu=L2;function O2(e){const t=e.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function F2(e){lv.set(e,e.el.getBoundingClientRect())}function V2(e){const t=ov.get(e),n=lv.get(e),a=t.left-n.left,s=t.top-n.top;if(a||s){const i=e.el.style;return i.transform=i.webkitTransform=`translate(${a}px,${s}px)`,i.transitionDuration="0s",e}}function P2(e,t,n){const a=e.cloneNode();e._vtc&&e._vtc.forEach(r=>{r.split(/\s+/).forEach(o=>o&&a.classList.remove(o))}),n.split(/\s+/).forEach(r=>r&&a.classList.add(r)),a.style.display="none";const s=t.nodeType===1?t:t.parentNode;s.appendChild(a);const{hasTransform:i}=iv(a);return s.removeChild(a),i}const D2=["ctrl","shift","alt","meta"],j2={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>D2.some(n=>e[`${n}Key`]&&!t.includes(n))},Da=(e,t)=>(n,...a)=>{for(let s=0;s<t.length;s++){const i=j2[t[s]];if(i&&i(n,t))return}return e(n,...a)},N2={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Ks=(e,t)=>n=>{if(!("key"in n))return;const a=xi(n.key);if(t.some(s=>s===a||N2[s]===a))return e(n)},ol={beforeMount(e,{value:t},{transition:n}){e._vod=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):Ui(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:a}){!t!=!n&&(a?t?(a.beforeEnter(e),Ui(e,!0),a.enter(e)):a.leave(e,()=>{Ui(e,!1)}):Ui(e,t))},beforeUnmount(e,{value:t}){Ui(e,t)}};function Ui(e,t){e.style.display=t?e._vod:"none"}const $2=Rr({patchProp:C2},u2);let m1;function H2(){return m1||(m1=O_($2))}const f1=(...e)=>{H2().render(...e)};var Xt=(e,t)=>{const n=e.__vccOpts||e;for(const[a,s]of t)n[a]=s;return n};const z2={name:"AppLoader",props:{show:{type:Boolean,default:!1},infinite:{type:Boolean,default:!1},type:{type:String,required:!0},messageId:{type:String,default:""}}},U2=Pe("div",{id:"vac-circle"},null,-1),q2=Pe("div",{id:"vac-circle"},null,-1),W2=Pe("div",{id:"vac-circle"},null,-1),Y2=Pe("div",{id:"vac-circle"},null,-1),X2=Pe("div",{id:"vac-circle"},null,-1),G2=Pe("div",{id:"vac-circle"},null,-1);function K2(e,t,n,a,s,i){return oe(),Pt(mn,{name:"vac-fade-spinner",appear:""},{default:mt(()=>[n.show?(oe(),Ce("div",{key:0,class:kt(["vac-loader-wrapper",{"vac-container-center":!n.infinite,"vac-container-top":n.infinite}])},[n.type==="rooms"?qe(e.$slots,"spinner-icon-rooms",{key:0},()=>[U2]):Ue("",!0),n.type==="infinite-rooms"?qe(e.$slots,"spinner-icon-infinite-rooms",{key:1},()=>[q2]):Ue("",!0),n.type==="message-file"?qe(e.$slots,"spinner-icon-message-file_"+n.messageId,{key:2},()=>[W2]):Ue("",!0),n.type==="room-file"?qe(e.$slots,"spinner-icon-room-file",{key:3},()=>[Y2]):Ue("",!0),n.type==="messages"?qe(e.$slots,"spinner-icon-messages",{key:4},()=>[X2]):Ue("",!0),n.type==="infinite-messages"?qe(e.$slots,"spinner-icon-infinite-messages",{key:5},()=>[G2]):Ue("",!0)],2)):Ue("",!0)]),_:3})}var ll=Xt(z2,[["render",K2]]);const Z2={name:"SvgIcon",props:{name:{type:String,default:null},param:{type:String,default:null}},data(){return{svgItem:{search:{path:"M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"},add:{path:"M17,13H13V17H11V13H7V11H11V7H13V11H17M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"},toggle:{path:"M5,13L9,17L7.6,18.42L1.18,12L7.6,5.58L9,7L5,11H21V13H5M21,6V8H11V6H21M21,16V18H11V16H21Z"},menu:{path:"M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z"},close:{path:"M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z"},file:{path:"M14,17H7V15H14M17,13H7V11H17M17,9H7V7H17M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z"},paperclip:{path:"M16.5,6V17.5A4,4 0 0,1 12.5,21.5A4,4 0 0,1 8.5,17.5V5A2.5,2.5 0 0,1 11,2.5A2.5,2.5 0 0,1 13.5,5V15.5A1,1 0 0,1 12.5,16.5A1,1 0 0,1 11.5,15.5V6H10V15.5A2.5,2.5 0 0,0 12.5,18A2.5,2.5 0 0,0 15,15.5V5A4,4 0 0,0 11,1A4,4 0 0,0 7,5V17.5A5.5,5.5 0 0,0 12.5,23A5.5,5.5 0 0,0 18,17.5V6H16.5Z"},"close-outline":{path:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"},send:{path:"M2,21L23,12L2,3V10L17,12L2,14V21Z"},emoji:{path:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"},document:{path:"M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z"},pencil:{path:"M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z"},checkmark:{path:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"},"double-checkmark":{path:"M18 7l-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41L6 19l1.41-1.41L1.83 12 .41 13.41z"},eye:{path:"M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z"},dropdown:{path:"M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"},deleted:{path:"M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12C4,13.85 4.63,15.55 5.68,16.91L16.91,5.68C15.55,4.63 13.85,4 12,4M12,20A8,8 0 0,0 20,12C20,10.15 19.37,8.45 18.32,7.09L7.09,18.32C8.45,19.37 10.15,20 12,20Z"},microphone:{size:"large",path:"M432.8,216.4v39.2c0,45.2-15.3,84.3-45.2,118.4c-29.8,33.2-67.3,52.8-111.6,57.9v40.9h78.4c5.1,0,10.2,1.7,13.6,6c4.3,4.3,6,8.5,6,13.6c0,5.1-1.7,10.2-6,13.6c-4.3,4.3-8.5,6-13.6,6H157.6c-5.1,0-10.2-1.7-13.6-6c-4.3-4.3-6-8.5-6-13.6c0-5.1,1.7-10.2,6-13.6c4.3-4.3,8.5-6,13.6-6H236v-40.9c-44.3-5.1-81.8-23.9-111.6-57.9s-45.2-73.3-45.2-118.4v-39.2c0-5.1,1.7-10.2,6-13.6c4.3-4.3,8.5-6,13.6-6s10.2,1.7,13.6,6c4.3,4.3,6,8.5,6,13.6v39.2c0,37.5,13.6,70.7,40,97.1s59.6,40,97.1,40s70.7-13.6,97.1-40c26.4-26.4,40-59.6,40-97.1v-39.2c0-5.1,1.7-10.2,6-13.6c4.3-4.3,8.5-6,13.6-6c5.1,0,10.2,1.7,13.6,6C430.2,206.2,432.8,211.3,432.8,216.4z M353.5,98v157.6c0,27.3-9.4,50.3-29,69c-19.6,19.6-42.6,29-69,29s-50.3-9.4-69-29c-19.6-19.6-29-42.6-29-69V98c0-27.3,9.4-50.3,29-69c19.6-19.6,42.6-29,69-29s50.3,9.4,69,29C344.2,47.7,353.5,71.6,353.5,98z"},"audio-play":{size:"medium",path:"M43.331,21.237L7.233,0.397c-0.917-0.529-2.044-0.529-2.96,0c-0.916,0.528-1.48,1.505-1.48,2.563v41.684   c0,1.058,0.564,2.035,1.48,2.563c0.458,0.268,0.969,0.397,1.48,0.397c0.511,0,1.022-0.133,1.48-0.397l36.098-20.84   c0.918-0.529,1.479-1.506,1.479-2.564S44.247,21.767,43.331,21.237z"},"audio-pause":{size:"medium",path:"M17.991,40.976c0,3.662-2.969,6.631-6.631,6.631l0,0c-3.662,0-6.631-2.969-6.631-6.631V6.631C4.729,2.969,7.698,0,11.36,0l0,0c3.662,0,6.631,2.969,6.631,6.631V40.976z",path2:"M42.877,40.976c0,3.662-2.969,6.631-6.631,6.631l0,0c-3.662,0-6.631-2.969-6.631-6.631V6.631C29.616,2.969,32.585,0,36.246,0l0,0c3.662,0,6.631,2.969,6.631,6.631V40.976z"}}}},computed:{svgId(){const e=this.param?"-"+this.param:"";return`vac-icon-${this.name}${e}`},size(){const e=this.svgItem[this.name];return e.size==="large"?512:e.size==="medium"?48:24}}},Q2=["viewBox"],J2=["id","d"],eb=["id","d"];function tb(e,t,n,a,s,i){return oe(),Ce("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",width:"24",height:"24",viewBox:`0 0 ${i.size} ${i.size}`},[Pe("path",{id:i.svgId,d:s.svgItem[n.name].path},null,8,J2),s.svgItem[n.name].path2?(oe(),Ce("path",{key:0,id:i.svgId,d:s.svgItem[n.name].path2},null,8,eb)):Ue("",!0)],8,Q2)}var kn=Xt(Z2,[["render",tb]]);const nb={name:"RoomsSearch",components:{SvgIcon:kn},props:{textMessages:{type:Object,required:!0},showSearch:{type:Boolean,required:!0},showAddRoom:{type:Boolean,required:!0},rooms:{type:Array,required:!0},loadingRooms:{type:Boolean,required:!0}},emits:["search-room","add-room"],computed:{showSearchBar(){return this.showSearch||this.showAddRoom}}},ab={key:0,class:"vac-icon-search"},sb=["placeholder"];function ib(e,t,n,a,s,i){const r=dt("svg-icon");return oe(),Ce("div",{class:kt({"vac-box-search":i.showSearchBar,"vac-box-empty":!i.showSearchBar})},[n.showSearch?(oe(),Ce(At,{key:0},[!n.loadingRooms&&n.rooms.length?(oe(),Ce("div",ab,[qe(e.$slots,"search-icon",{},()=>[Xe(r,{name:"search"})])])):Ue("",!0),!n.loadingRooms&&n.rooms.length?(oe(),Ce("input",{key:1,type:"search",placeholder:n.textMessages.SEARCH,autocomplete:"off",class:"vac-input",onInput:t[0]||(t[0]=o=>e.$emit("search-room",o))},null,40,sb)):Ue("",!0)],64)):Ue("",!0),n.showAddRoom?(oe(),Ce("div",{key:1,class:"vac-svg-button vac-add-icon",onClick:t[1]||(t[1]=o=>e.$emit("add-room"))},[qe(e.$slots,"add-icon",{},()=>[Xe(r,{name:"add"})])])):Ue("",!0)],2)}var rb=Xt(nb,[["render",ib]]);const v1=document.createElement("i");function cv(e){const t="&"+e+";";v1.innerHTML=t;const n=v1.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Xn(e,t,n,a){const s=e.length;let i=0,r;if(t<0?t=-t>s?0:s+t:t=t>s?s:t,n=n>0?n:0,a.length<1e4)r=Array.from(a),r.unshift(t,n),e.splice(...r);else for(n&&e.splice(t,n);i<a.length;)r=a.slice(i,i+1e4),r.unshift(t,0),e.splice(...r),i+=1e4,t+=1e4}function Cn(e,t){return e.length>0?(Xn(e,e.length,0,t),e):t}const Fc={}.hasOwnProperty;function uv(e){const t={};let n=-1;for(;++n<e.length;)ob(t,e[n]);return t}function ob(e,t){let n;for(n in t){const s=(Fc.call(e,n)?e[n]:void 0)||(e[n]={}),i=t[n];let r;if(i)for(r in i){Fc.call(s,r)||(s[r]=[]);const o=i[r];lb(s[r],Array.isArray(o)?o:o?[o]:[])}}}function lb(e,t){let n=-1;const a=[];for(;++n<t.length;)(t[n].add==="after"?e:a).push(t[n]);Xn(e,0,0,a)}function dv(e){const t={};let n=-1;for(;++n<e.length;)cb(t,e[n]);return t}function cb(e,t){let n;for(n in t){const s=(Fc.call(e,n)?e[n]:void 0)||(e[n]={}),i=t[n];let r;if(i)for(r in i)s[r]=i[r]}}function ub(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"�":String.fromCharCode(n)}const db={'"':"quot","&":"amp","<":"lt",">":"gt"};function mv(e){return e.replace(/["&<>]/g,t);function t(n){return"&"+db[n]+";"}}function $a(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const mb=/[!-\/:-@\[-`\{-~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,Rn=Os(/[A-Za-z]/),En=Os(/[\dA-Za-z]/),fb=Os(/[#-'*+\--9=?A-Z^-~]/);function Bo(e){return e!==null&&(e<32||e===127)}const Vc=Os(/\d/),vb=Os(/[\dA-Fa-f]/),hb=Os(/[!-/:-@[-`{-~]/);function ft(e){return e!==null&&e<-2}function Yt(e){return e!==null&&(e<0||e===32)}function Ct(e){return e===-2||e===-1||e===32}const Du=Os(mb),Ai=Os(/\s/);function Os(e){return t;function t(n){return n!==null&&e.test(String.fromCharCode(n))}}function ni(e,t){const n=mv(gb(e||""));if(!t)return n;const a=n.indexOf(":"),s=n.indexOf("?"),i=n.indexOf("#"),r=n.indexOf("/");return a<0||r>-1&&a>r||s>-1&&a>s||i>-1&&a>i||t.test(n.slice(0,a))?n:""}function gb(e){const t=[];let n=-1,a=0,s=0;for(;++n<e.length;){const i=e.charCodeAt(n);let r="";if(i===37&&En(e.charCodeAt(n+1))&&En(e.charCodeAt(n+2)))s=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(r=String.fromCharCode(i));else if(i>55295&&i<57344){const o=e.charCodeAt(n+1);i<56320&&o>56319&&o<57344?(r=String.fromCharCode(i,o),s=1):r="�"}else r=String.fromCharCode(i);r&&(t.push(e.slice(a,n),encodeURIComponent(r)),a=n+s+1,r=""),s&&(n+=s,s=0)}return t.join("")+e.slice(a)}const h1={}.hasOwnProperty,g1=/^(https?|ircs?|mailto|xmpp)$/i,pb=/^https?$/i;function _b(e){const t=e||{};let n=!0;const a={},s=[[]],i=[],r=[],m=dv([{enter:{blockQuote:E,codeFenced:$,codeFencedFenceInfo:T,codeFencedFenceMeta:T,codeIndented:x,codeText:K,content:Fe,definition:Z,definitionDestinationString:xe,definitionLabelString:T,definitionTitleString:T,emphasis:j,htmlFlow:le,htmlText:D,image:F,label:T,link:se,listItemMarker:b,listItemValue:I,listOrdered:R,listUnordered:C,paragraph:V,reference:T,resource:ue,resourceDestinationString:be,resourceTitleString:T,setextHeading:Re,strong:W},exit:{atxHeading:Ke,atxHeadingSequence:Ve,autolinkEmail:Se,autolinkProtocol:ce,blockQuote:M,characterEscapeValue:st,characterReferenceMarkerHexadecimal:ne,characterReferenceMarkerNumeric:ne,characterReferenceValue:we,codeFenced:H,codeFencedFence:f,codeFencedFenceInfo:U,codeFencedFenceMeta:k,codeFlowValue:z,codeIndented:H,codeText:J,codeTextData:st,data:st,definition:$e,definitionDestinationString:Te,definitionLabelString:de,definitionTitleString:Be,emphasis:P,hardBreakEscape:Ae,hardBreakTrailing:Ae,htmlFlow:Ne,htmlFlowData:st,htmlText:Ne,htmlTextData:st,image:Y,label:X,labelText:me,lineEnding:ge,link:Y,listOrdered:y,listUnordered:_,paragraph:q,reference:k,referenceString:G,resource:k,resourceDestinationString:ke,resourceTitleString:je,setextHeading:tt,setextHeadingLineSequence:Ge,setextHeadingText:Qe,strong:te,thematicBreak:ae}}].concat(t.htmlExtensions||[])),u={tightStack:r,definitions:a},d={lineEndingIfNeeded:g,options:t,encode:B,raw:L,tag:p,buffer:T,resume:k,setData:h,getData:A};let l=t.defaultLineEnding;return c;function c(re){let Ie=-1,Ee=0;const Je=[];let ve=[],We=[];for(;++Ie<re.length;)!l&&(re[Ie][1].type==="lineEnding"||re[Ie][1].type==="lineEndingBlank")&&(l=re[Ie][2].sliceSerialize(re[Ie][1])),(re[Ie][1].type==="listOrdered"||re[Ie][1].type==="listUnordered")&&(re[Ie][0]==="enter"?Je.push(Ie):v(re.slice(Je.pop(),Ie))),re[Ie][1].type==="definition"&&(re[Ie][0]==="enter"?(We=Cn(We,re.slice(Ee,Ie)),Ee=Ie):(ve=Cn(ve,re.slice(Ee,Ie+1)),Ee=Ie+1));ve=Cn(ve,We),ve=Cn(ve,re.slice(Ee)),Ie=-1;const ut=ve;for(m.enter.null&&m.enter.null.call(d);++Ie<re.length;){const Le=m[ut[Ie][0]],Ze=ut[Ie][1].type,Oe=Le[Ze];h1.call(Le,Ze)&&Oe&&Oe.call(Object.assign({sliceSerialize:ut[Ie][2].sliceSerialize},d),ut[Ie][1])}return m.exit.null&&m.exit.null.call(d),s[0].join("")}function v(re){const Ie=re.length;let Ee=0,Je=0,ve=!1,We;for(;++Ee<Ie;){const ut=re[Ee];if(ut[1]._container)We=void 0,ut[0]==="enter"?Je++:Je--;else switch(ut[1].type){case"listItemPrefix":{ut[0]==="exit"&&(We=!0);break}case"linePrefix":break;case"lineEndingBlank":{ut[0]==="enter"&&!Je&&(We?We=void 0:ve=!0);break}default:We=void 0}}re[0][1]._loose=ve}function h(re,Ie){u[re]=Ie}function A(re){return u[re]}function T(){s.push([])}function k(){return s.pop().join("")}function p(re){n&&(h("lastWasTag",!0),s[s.length-1].push(re))}function L(re){h("lastWasTag"),s[s.length-1].push(re)}function O(){L(l||`
`)}function g(){const re=s[s.length-1],Ie=re[re.length-1],Ee=Ie?Ie.charCodeAt(Ie.length-1):null;Ee===10||Ee===13||Ee===null||O()}function B(re){return A("ignoreEncode")?re:mv(re)}function R(re){r.push(!re._loose),g(),p("<ol"),h("expectFirstItem",!0)}function C(re){r.push(!re._loose),g(),p("<ul"),h("expectFirstItem",!0)}function I(re){if(A("expectFirstItem")){const Ie=Number.parseInt(this.sliceSerialize(re),10);Ie!==1&&p(' start="'+B(String(Ie))+'"')}}function b(){A("expectFirstItem")?p(">"):w(),g(),p("<li>"),h("expectFirstItem"),h("lastWasTag")}function y(){w(),r.pop(),O(),p("</ol>")}function _(){w(),r.pop(),O(),p("</ul>")}function w(){A("lastWasTag")&&!A("slurpAllLineEndings")&&g(),p("</li>"),h("slurpAllLineEndings")}function E(){r.push(!1),g(),p("<blockquote>")}function M(){r.pop(),g(),p("</blockquote>"),h("slurpAllLineEndings")}function V(){r[r.length-1]||(g(),p("<p>")),h("slurpAllLineEndings")}function q(){r[r.length-1]?h("slurpAllLineEndings",!0):p("</p>")}function $(){g(),p("<pre><code"),h("fencesCount",0)}function U(){const re=k();p(' class="language-'+re+'"')}function f(){const re=A("fencesCount")||0;re||(p(">"),h("slurpOneLineEnding",!0)),h("fencesCount",re+1)}function x(){g(),p("<pre><code>")}function H(){const re=A("fencesCount");re!==void 0&&re<2&&u.tightStack.length>0&&!A("lastWasTag")&&O(),A("flowCodeSeenData")&&g(),p("</code></pre>"),re!==void 0&&re<2&&g(),h("flowCodeSeenData"),h("fencesCount"),h("slurpOneLineEnding")}function F(){i.push({image:!0}),n=void 0}function se(){i.push({})}function me(re){i[i.length-1].labelId=this.sliceSerialize(re)}function X(){i[i.length-1].label=k()}function G(re){i[i.length-1].referenceId=this.sliceSerialize(re)}function ue(){T(),i[i.length-1].destination=""}function be(){T(),h("ignoreEncode",!0)}function ke(){i[i.length-1].destination=k(),h("ignoreEncode")}function je(){i[i.length-1].title=k()}function Y(){let re=i.length-1;const Ie=i[re],Ee=Ie.referenceId||Ie.labelId,Je=Ie.destination===void 0?a[$a(Ee)]:Ie;for(n=!0;re--;)if(i[re].image){n=void 0;break}Ie.image?(p('<img src="'+ni(Je.destination,t.allowDangerousProtocol?void 0:pb)+'" alt="'),L(Ie.label),p('"')):p('<a href="'+ni(Je.destination,t.allowDangerousProtocol?void 0:g1)+'"'),p(Je.title?' title="'+Je.title+'"':""),Ie.image?p(" />"):(p(">"),L(Ie.label),p("</a>")),i.pop()}function Z(){T(),i.push({})}function de(re){k(),i[i.length-1].labelId=this.sliceSerialize(re)}function xe(){T(),h("ignoreEncode",!0)}function Te(){i[i.length-1].destination=k(),h("ignoreEncode")}function Be(){i[i.length-1].title=k()}function $e(){const re=i[i.length-1],Ie=$a(re.labelId);k(),h1.call(a,Ie)||(a[Ie]=i[i.length-1]),i.pop()}function Fe(){h("slurpAllLineEndings",!0)}function Ve(re){A("headingRank")||(h("headingRank",this.sliceSerialize(re).length),g(),p("<h"+A("headingRank")+">"))}function Re(){T(),h("slurpAllLineEndings")}function Qe(){h("slurpAllLineEndings",!0)}function Ke(){p("</h"+A("headingRank")+">"),h("headingRank")}function Ge(re){h("headingRank",this.sliceSerialize(re).charCodeAt(0)===61?1:2)}function tt(){const re=k();g(),p("<h"+A("headingRank")+">"),L(re),p("</h"+A("headingRank")+">"),h("slurpAllLineEndings"),h("headingRank")}function st(re){L(B(this.sliceSerialize(re)))}function ge(re){if(!A("slurpAllLineEndings")){if(A("slurpOneLineEnding")){h("slurpOneLineEnding");return}if(A("inCodeText")){L(" ");return}L(B(this.sliceSerialize(re)))}}function z(re){L(B(this.sliceSerialize(re))),h("flowCodeSeenData",!0)}function Ae(){p("<br />")}function le(){g(),D()}function Ne(){h("ignoreEncode")}function D(){t.allowDangerousHtml&&h("ignoreEncode",!0)}function j(){p("<em>")}function W(){p("<strong>")}function K(){h("inCodeText",!0),p("<code>")}function J(){h("inCodeText"),p("</code>")}function P(){p("</em>")}function te(){p("</strong>")}function ae(){g(),p("<hr />")}function ne(re){h("characterReferenceType",re.type)}function we(re){let Ie=this.sliceSerialize(re);Ie=A("characterReferenceType")?ub(Ie,A("characterReferenceType")==="characterReferenceMarkerNumeric"?10:16):cv(Ie),L(B(Ie)),h("characterReferenceType")}function ce(re){const Ie=this.sliceSerialize(re);p('<a href="'+ni(Ie,t.allowDangerousProtocol?void 0:g1)+'">'),L(B(Ie)),p("</a>")}function Se(re){const Ie=this.sliceSerialize(re);p('<a href="'+ni("mailto:"+Ie)+'">'),L(B(Ie)),p("</a>")}}function Mt(e,t,n,a){const s=a?a-1:Number.POSITIVE_INFINITY;let i=0;return r;function r(m){return Ct(m)?(e.enter(n),o(m)):t(m)}function o(m){return Ct(m)&&i++<s?(e.consume(m),o):(e.exit(n),t(m))}}const bb={tokenize:yb};function yb(e){const t=e.attempt(this.parser.constructs.contentInitial,a,s);let n;return t;function a(o){if(o===null){e.consume(o);return}return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),Mt(e,t,"linePrefix")}function s(o){return e.enter("paragraph"),i(o)}function i(o){const m=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=m),n=m,r(o)}function r(o){if(o===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(o);return}return ft(o)?(e.consume(o),e.exit("chunkText"),i):(e.consume(o),r)}}const wb={tokenize:Sb},p1={tokenize:kb};function Sb(e){const t=this,n=[];let a=0,s,i,r;return o;function o(L){if(a<n.length){const O=n[a];return t.containerState=O[1],e.attempt(O[0].continuation,m,u)(L)}return u(L)}function m(L){if(a++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,s&&p();const O=t.events.length;let g=O,B;for(;g--;)if(t.events[g][0]==="exit"&&t.events[g][1].type==="chunkFlow"){B=t.events[g][1].end;break}k(a);let R=O;for(;R<t.events.length;)t.events[R][1].end=Object.assign({},B),R++;return Xn(t.events,g+1,0,t.events.slice(O)),t.events.length=R,u(L)}return o(L)}function u(L){if(a===n.length){if(!s)return c(L);if(s.currentConstruct&&s.currentConstruct.concrete)return h(L);t.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(p1,d,l)(L)}function d(L){return s&&p(),k(a),c(L)}function l(L){return t.parser.lazy[t.now().line]=a!==n.length,r=t.now().offset,h(L)}function c(L){return t.containerState={},e.attempt(p1,v,h)(L)}function v(L){return a++,n.push([t.currentConstruct,t.containerState]),c(L)}function h(L){if(L===null){s&&p(),k(0),e.consume(L);return}return s=s||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:i,_tokenizer:s}),A(L)}function A(L){if(L===null){T(e.exit("chunkFlow"),!0),k(0),e.consume(L);return}return ft(L)?(e.consume(L),T(e.exit("chunkFlow")),a=0,t.interrupt=void 0,o):(e.consume(L),A)}function T(L,O){const g=t.sliceStream(L);if(O&&g.push(null),L.previous=i,i&&(i.next=L),i=L,s.defineSkip(L.start),s.write(g),t.parser.lazy[L.start.line]){let B=s.events.length;for(;B--;)if(s.events[B][1].start.offset<r&&(!s.events[B][1].end||s.events[B][1].end.offset>r))return;const R=t.events.length;let C=R,I,b;for(;C--;)if(t.events[C][0]==="exit"&&t.events[C][1].type==="chunkFlow"){if(I){b=t.events[C][1].end;break}I=!0}for(k(a),B=R;B<t.events.length;)t.events[B][1].end=Object.assign({},b),B++;Xn(t.events,C+1,0,t.events.slice(R)),t.events.length=B}}function k(L){let O=n.length;for(;O-- >L;){const g=n[O];t.containerState=g[1],g[0].exit.call(t,e)}n.length=L}function p(){s.write([null]),i=void 0,s=void 0,t.containerState._closeFlow=void 0}}function kb(e,t,n){return Mt(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Lo(e){if(e===null||Yt(e)||Ai(e))return 1;if(Du(e))return 2}function cl(e,t,n){const a=[];let s=-1;for(;++s<e.length;){const i=e[s].resolveAll;i&&!a.includes(i)&&(t=i(t,n),a.push(i))}return t}const Pc={name:"attention",tokenize:Tb,resolveAll:xb};function xb(e,t){let n=-1,a,s,i,r,o,m,u,d;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(a=n;a--;)if(e[a][0]==="exit"&&e[a][1].type==="attentionSequence"&&e[a][1]._open&&t.sliceSerialize(e[a][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[a][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[a][1].end.offset-e[a][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;m=e[a][1].end.offset-e[a][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const l=Object.assign({},e[a][1].end),c=Object.assign({},e[n][1].start);_1(l,-m),_1(c,m),r={type:m>1?"strongSequence":"emphasisSequence",start:l,end:Object.assign({},e[a][1].end)},o={type:m>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:c},i={type:m>1?"strongText":"emphasisText",start:Object.assign({},e[a][1].end),end:Object.assign({},e[n][1].start)},s={type:m>1?"strong":"emphasis",start:Object.assign({},r.start),end:Object.assign({},o.end)},e[a][1].end=Object.assign({},r.start),e[n][1].start=Object.assign({},o.end),u=[],e[a][1].end.offset-e[a][1].start.offset&&(u=Cn(u,[["enter",e[a][1],t],["exit",e[a][1],t]])),u=Cn(u,[["enter",s,t],["enter",r,t],["exit",r,t],["enter",i,t]]),u=Cn(u,cl(t.parser.constructs.insideSpan.null,e.slice(a+1,n),t)),u=Cn(u,[["exit",i,t],["enter",o,t],["exit",o,t],["exit",s,t]]),e[n][1].end.offset-e[n][1].start.offset?(d=2,u=Cn(u,[["enter",e[n][1],t],["exit",e[n][1],t]])):d=0,Xn(e,a-1,n-a+3,u),n=a+u.length-d-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function Tb(e,t){const n=this.parser.constructs.attentionMarkers.null,a=this.previous,s=Lo(a);let i;return r;function r(m){return i=m,e.enter("attentionSequence"),o(m)}function o(m){if(m===i)return e.consume(m),o;const u=e.exit("attentionSequence"),d=Lo(m),l=!d||d===2&&s||n.includes(m),c=!s||s===2&&d||n.includes(a);return u._open=!!(i===42?l:l&&(s||!c)),u._close=!!(i===42?c:c&&(d||!l)),t(m)}}function _1(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Cb={name:"autolink",tokenize:Ab};function Ab(e,t,n){let a=0;return s;function s(v){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(v),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),i}function i(v){return Rn(v)?(e.consume(v),r):u(v)}function r(v){return v===43||v===45||v===46||En(v)?(a=1,o(v)):u(v)}function o(v){return v===58?(e.consume(v),a=0,m):(v===43||v===45||v===46||En(v))&&a++<32?(e.consume(v),o):(a=0,u(v))}function m(v){return v===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(v),e.exit("autolinkMarker"),e.exit("autolink"),t):v===null||v===32||v===60||Bo(v)?n(v):(e.consume(v),m)}function u(v){return v===64?(e.consume(v),d):fb(v)?(e.consume(v),u):n(v)}function d(v){return En(v)?l(v):n(v)}function l(v){return v===46?(e.consume(v),a=0,d):v===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(v),e.exit("autolinkMarker"),e.exit("autolink"),t):c(v)}function c(v){if((v===45||En(v))&&a++<63){const h=v===45?c:l;return e.consume(v),h}return n(v)}}const Br={tokenize:Eb,partial:!0};function Eb(e,t,n){return a;function a(i){return Ct(i)?Mt(e,s,"linePrefix")(i):s(i)}function s(i){return i===null||ft(i)?t(i):n(i)}}const fv={name:"blockQuote",tokenize:Mb,continuation:{tokenize:Rb},exit:Ib};function Mb(e,t,n){const a=this;return s;function s(r){if(r===62){const o=a.containerState;return o.open||(e.enter("blockQuote",{_container:!0}),o.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(r),e.exit("blockQuoteMarker"),i}return n(r)}function i(r){return Ct(r)?(e.enter("blockQuotePrefixWhitespace"),e.consume(r),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(r))}}function Rb(e,t,n){const a=this;return s;function s(r){return Ct(r)?Mt(e,i,"linePrefix",a.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(r):i(r)}function i(r){return e.attempt(fv,t,n)(r)}}function Ib(e){e.exit("blockQuote")}const vv={name:"characterEscape",tokenize:Bb};function Bb(e,t,n){return a;function a(i){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(i),e.exit("escapeMarker"),s}function s(i){return hb(i)?(e.enter("characterEscapeValue"),e.consume(i),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(i)}}const hv={name:"characterReference",tokenize:Lb};function Lb(e,t,n){const a=this;let s=0,i,r;return o;function o(l){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(l),e.exit("characterReferenceMarker"),m}function m(l){return l===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(l),e.exit("characterReferenceMarkerNumeric"),u):(e.enter("characterReferenceValue"),i=31,r=En,d(l))}function u(l){return l===88||l===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(l),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),i=6,r=vb,d):(e.enter("characterReferenceValue"),i=7,r=Vc,d(l))}function d(l){if(l===59&&s){const c=e.exit("characterReferenceValue");return r===En&&!cv(a.sliceSerialize(c))?n(l):(e.enter("characterReferenceMarker"),e.consume(l),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return r(l)&&s++<i?(e.consume(l),d):n(l)}}const b1={tokenize:Fb,partial:!0},y1={name:"codeFenced",tokenize:Ob,concrete:!0};function Ob(e,t,n){const a=this,s={tokenize:g,partial:!0};let i=0,r=0,o;return m;function m(B){return u(B)}function u(B){const R=a.events[a.events.length-1];return i=R&&R[1].type==="linePrefix"?R[2].sliceSerialize(R[1],!0).length:0,o=B,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),d(B)}function d(B){return B===o?(r++,e.consume(B),d):r<3?n(B):(e.exit("codeFencedFenceSequence"),Ct(B)?Mt(e,l,"whitespace")(B):l(B))}function l(B){return B===null||ft(B)?(e.exit("codeFencedFence"),a.interrupt?t(B):e.check(b1,A,O)(B)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),c(B))}function c(B){return B===null||ft(B)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),l(B)):Ct(B)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Mt(e,v,"whitespace")(B)):B===96&&B===o?n(B):(e.consume(B),c)}function v(B){return B===null||ft(B)?l(B):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),h(B))}function h(B){return B===null||ft(B)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),l(B)):B===96&&B===o?n(B):(e.consume(B),h)}function A(B){return e.attempt(s,O,T)(B)}function T(B){return e.enter("lineEnding"),e.consume(B),e.exit("lineEnding"),k}function k(B){return i>0&&Ct(B)?Mt(e,p,"linePrefix",i+1)(B):p(B)}function p(B){return B===null||ft(B)?e.check(b1,A,O)(B):(e.enter("codeFlowValue"),L(B))}function L(B){return B===null||ft(B)?(e.exit("codeFlowValue"),p(B)):(e.consume(B),L)}function O(B){return e.exit("codeFenced"),t(B)}function g(B,R,C){let I=0;return b;function b(M){return B.enter("lineEnding"),B.consume(M),B.exit("lineEnding"),y}function y(M){return B.enter("codeFencedFence"),Ct(M)?Mt(B,_,"linePrefix",a.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(M):_(M)}function _(M){return M===o?(B.enter("codeFencedFenceSequence"),w(M)):C(M)}function w(M){return M===o?(I++,B.consume(M),w):I>=r?(B.exit("codeFencedFenceSequence"),Ct(M)?Mt(B,E,"whitespace")(M):E(M)):C(M)}function E(M){return M===null||ft(M)?(B.exit("codeFencedFence"),R(M)):C(M)}}}function Fb(e,t,n){const a=this;return s;function s(r){return r===null?n(r):(e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),i)}function i(r){return a.parser.lazy[a.now().line]?n(r):t(r)}}const Ul={name:"codeIndented",tokenize:Pb},Vb={tokenize:Db,partial:!0};function Pb(e,t,n){const a=this;return s;function s(u){return e.enter("codeIndented"),Mt(e,i,"linePrefix",5)(u)}function i(u){const d=a.events[a.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?r(u):n(u)}function r(u){return u===null?m(u):ft(u)?e.attempt(Vb,r,m)(u):(e.enter("codeFlowValue"),o(u))}function o(u){return u===null||ft(u)?(e.exit("codeFlowValue"),r(u)):(e.consume(u),o)}function m(u){return e.exit("codeIndented"),t(u)}}function Db(e,t,n){const a=this;return s;function s(r){return a.parser.lazy[a.now().line]?n(r):ft(r)?(e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),s):Mt(e,i,"linePrefix",5)(r)}function i(r){const o=a.events[a.events.length-1];return o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?t(r):ft(r)?s(r):n(r)}}const jb={name:"codeText",tokenize:Hb,resolve:Nb,previous:$b};function Nb(e){let t=e.length-4,n=3,a,s;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(a=n;++a<t;)if(e[a][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(a=n-1,t++;++a<=t;)s===void 0?a!==t&&e[a][1].type!=="lineEnding"&&(s=a):(a===t||e[a][1].type==="lineEnding")&&(e[s][1].type="codeTextData",a!==s+2&&(e[s][1].end=e[a-1][1].end,e.splice(s+2,a-s-2),t-=a-s-2,a=s+2),s=void 0);return e}function $b(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Hb(e,t,n){let a=0,s,i;return r;function r(l){return e.enter("codeText"),e.enter("codeTextSequence"),o(l)}function o(l){return l===96?(e.consume(l),a++,o):(e.exit("codeTextSequence"),m(l))}function m(l){return l===null?n(l):l===32?(e.enter("space"),e.consume(l),e.exit("space"),m):l===96?(i=e.enter("codeTextSequence"),s=0,d(l)):ft(l)?(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),m):(e.enter("codeTextData"),u(l))}function u(l){return l===null||l===32||l===96||ft(l)?(e.exit("codeTextData"),m(l)):(e.consume(l),u)}function d(l){return l===96?(e.consume(l),s++,d):s===a?(e.exit("codeTextSequence"),e.exit("codeText"),t(l)):(i.type="codeTextData",u(l))}}function gv(e){const t={};let n=-1,a,s,i,r,o,m,u;for(;++n<e.length;){for(;n in t;)n=t[n];if(a=e[n],n&&a[1].type==="chunkFlow"&&e[n-1][1].type==="listItemPrefix"&&(m=a[1]._tokenizer.events,i=0,i<m.length&&m[i][1].type==="lineEndingBlank"&&(i+=2),i<m.length&&m[i][1].type==="content"))for(;++i<m.length&&m[i][1].type!=="content";)m[i][1].type==="chunkText"&&(m[i][1]._isInFirstContentOfListItem=!0,i++);if(a[0]==="enter")a[1].contentType&&(Object.assign(t,zb(e,n)),n=t[n],u=!0);else if(a[1]._container){for(i=n,s=void 0;i--&&(r=e[i],r[1].type==="lineEnding"||r[1].type==="lineEndingBlank");)r[0]==="enter"&&(s&&(e[s][1].type="lineEndingBlank"),r[1].type="lineEnding",s=i);s&&(a[1].end=Object.assign({},e[s][1].start),o=e.slice(s,n),o.unshift(a),Xn(e,s,n-s+1,o))}}return!u}function zb(e,t){const n=e[t][1],a=e[t][2];let s=t-1;const i=[],r=n._tokenizer||a.parser[n.contentType](n.start),o=r.events,m=[],u={};let d,l,c=-1,v=n,h=0,A=0;const T=[A];for(;v;){for(;e[++s][1]!==v;);i.push(s),v._tokenizer||(d=a.sliceStream(v),v.next||d.push(null),l&&r.defineSkip(v.start),v._isInFirstContentOfListItem&&(r._gfmTasklistFirstContentOfListItem=!0),r.write(d),v._isInFirstContentOfListItem&&(r._gfmTasklistFirstContentOfListItem=void 0)),l=v,v=v.next}for(v=n;++c<o.length;)o[c][0]==="exit"&&o[c-1][0]==="enter"&&o[c][1].type===o[c-1][1].type&&o[c][1].start.line!==o[c][1].end.line&&(A=c+1,T.push(A),v._tokenizer=void 0,v.previous=void 0,v=v.next);for(r.events=[],v?(v._tokenizer=void 0,v.previous=void 0):T.pop(),c=T.length;c--;){const k=o.slice(T[c],T[c+1]),p=i.pop();m.unshift([p,p+k.length-1]),Xn(e,p,2,k)}for(c=-1;++c<m.length;)u[h+m[c][0]]=h+m[c][1],h+=m[c][1]-m[c][0]-1;return u}const Ub={tokenize:Yb,resolve:Wb},qb={tokenize:Xb,partial:!0};function Wb(e){return gv(e),e}function Yb(e,t){let n;return a;function a(o){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),s(o)}function s(o){return o===null?i(o):ft(o)?e.check(qb,r,i)(o):(e.consume(o),s)}function i(o){return e.exit("chunkContent"),e.exit("content"),t(o)}function r(o){return e.consume(o),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}function Xb(e,t,n){const a=this;return s;function s(r){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Mt(e,i,"linePrefix")}function i(r){if(r===null||ft(r))return n(r);const o=a.events[a.events.length-1];return!a.parser.constructs.disable.null.includes("codeIndented")&&o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?t(r):e.interrupt(a.parser.constructs.flow,n,t)(r)}}function pv(e,t,n,a,s,i,r,o,m){const u=m||Number.POSITIVE_INFINITY;let d=0;return l;function l(k){return k===60?(e.enter(a),e.enter(s),e.enter(i),e.consume(k),e.exit(i),c):k===null||k===32||k===41||Bo(k)?n(k):(e.enter(a),e.enter(r),e.enter(o),e.enter("chunkString",{contentType:"string"}),A(k))}function c(k){return k===62?(e.enter(i),e.consume(k),e.exit(i),e.exit(s),e.exit(a),t):(e.enter(o),e.enter("chunkString",{contentType:"string"}),v(k))}function v(k){return k===62?(e.exit("chunkString"),e.exit(o),c(k)):k===null||k===60||ft(k)?n(k):(e.consume(k),k===92?h:v)}function h(k){return k===60||k===62||k===92?(e.consume(k),v):v(k)}function A(k){return!d&&(k===null||k===41||Yt(k))?(e.exit("chunkString"),e.exit(o),e.exit(r),e.exit(a),t(k)):d<u&&k===40?(e.consume(k),d++,A):k===41?(e.consume(k),d--,A):k===null||k===32||k===40||Bo(k)?n(k):(e.consume(k),k===92?T:A)}function T(k){return k===40||k===41||k===92?(e.consume(k),A):A(k)}}function _v(e,t,n,a,s,i){const r=this;let o=0,m;return u;function u(v){return e.enter(a),e.enter(s),e.consume(v),e.exit(s),e.enter(i),d}function d(v){return o>999||v===null||v===91||v===93&&!m||v===94&&!o&&"_hiddenFootnoteSupport"in r.parser.constructs?n(v):v===93?(e.exit(i),e.enter(s),e.consume(v),e.exit(s),e.exit(a),t):ft(v)?(e.enter("lineEnding"),e.consume(v),e.exit("lineEnding"),d):(e.enter("chunkString",{contentType:"string"}),l(v))}function l(v){return v===null||v===91||v===93||ft(v)||o++>999?(e.exit("chunkString"),d(v)):(e.consume(v),m||(m=!Ct(v)),v===92?c:l)}function c(v){return v===91||v===92||v===93?(e.consume(v),o++,l):l(v)}}function bv(e,t,n,a,s,i){let r;return o;function o(c){return c===34||c===39||c===40?(e.enter(a),e.enter(s),e.consume(c),e.exit(s),r=c===40?41:c,m):n(c)}function m(c){return c===r?(e.enter(s),e.consume(c),e.exit(s),e.exit(a),t):(e.enter(i),u(c))}function u(c){return c===r?(e.exit(i),m(r)):c===null?n(c):ft(c)?(e.enter("lineEnding"),e.consume(c),e.exit("lineEnding"),Mt(e,u,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),d(c))}function d(c){return c===r||c===null||ft(c)?(e.exit("chunkString"),u(c)):(e.consume(c),c===92?l:d)}function l(c){return c===r||c===92?(e.consume(c),d):d(c)}}function or(e,t){let n;return a;function a(s){return ft(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),n=!0,a):Ct(s)?Mt(e,a,n?"linePrefix":"lineSuffix")(s):t(s)}}const Gb={name:"definition",tokenize:Zb},Kb={tokenize:Qb,partial:!0};function Zb(e,t,n){const a=this;let s;return i;function i(v){return e.enter("definition"),r(v)}function r(v){return _v.call(a,e,o,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(v)}function o(v){return s=$a(a.sliceSerialize(a.events[a.events.length-1][1]).slice(1,-1)),v===58?(e.enter("definitionMarker"),e.consume(v),e.exit("definitionMarker"),m):n(v)}function m(v){return Yt(v)?or(e,u)(v):u(v)}function u(v){return pv(e,d,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(v)}function d(v){return e.attempt(Kb,l,l)(v)}function l(v){return Ct(v)?Mt(e,c,"whitespace")(v):c(v)}function c(v){return v===null||ft(v)?(e.exit("definition"),a.parser.defined.push(s),t(v)):n(v)}}function Qb(e,t,n){return a;function a(o){return Yt(o)?or(e,s)(o):n(o)}function s(o){return bv(e,i,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(o)}function i(o){return Ct(o)?Mt(e,r,"whitespace")(o):r(o)}function r(o){return o===null||ft(o)?t(o):n(o)}}const Jb={name:"hardBreakEscape",tokenize:e3};function e3(e,t,n){return a;function a(i){return e.enter("hardBreakEscape"),e.consume(i),s}function s(i){return ft(i)?(e.exit("hardBreakEscape"),t(i)):n(i)}}const t3={name:"headingAtx",tokenize:a3,resolve:n3};function n3(e,t){let n=e.length-2,a=3,s,i;return e[a][1].type==="whitespace"&&(a+=2),n-2>a&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(a===n-1||n-4>a&&e[n-2][1].type==="whitespace")&&(n-=a+1===n?2:4),n>a&&(s={type:"atxHeadingText",start:e[a][1].start,end:e[n][1].end},i={type:"chunkText",start:e[a][1].start,end:e[n][1].end,contentType:"text"},Xn(e,a,n-a+1,[["enter",s,t],["enter",i,t],["exit",i,t],["exit",s,t]])),e}function a3(e,t,n){let a=0;return s;function s(d){return e.enter("atxHeading"),i(d)}function i(d){return e.enter("atxHeadingSequence"),r(d)}function r(d){return d===35&&a++<6?(e.consume(d),r):d===null||Yt(d)?(e.exit("atxHeadingSequence"),o(d)):n(d)}function o(d){return d===35?(e.enter("atxHeadingSequence"),m(d)):d===null||ft(d)?(e.exit("atxHeading"),t(d)):Ct(d)?Mt(e,o,"whitespace")(d):(e.enter("atxHeadingText"),u(d))}function m(d){return d===35?(e.consume(d),m):(e.exit("atxHeadingSequence"),o(d))}function u(d){return d===null||d===35||Yt(d)?(e.exit("atxHeadingText"),o(d)):(e.consume(d),u)}}const s3=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],w1=["pre","script","style","textarea"],i3={name:"htmlFlow",tokenize:c3,resolveTo:l3,concrete:!0},r3={tokenize:d3,partial:!0},o3={tokenize:u3,partial:!0};function l3(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function c3(e,t,n){const a=this;let s,i,r,o,m;return u;function u(F){return d(F)}function d(F){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(F),l}function l(F){return F===33?(e.consume(F),c):F===47?(e.consume(F),i=!0,A):F===63?(e.consume(F),s=3,a.interrupt?t:f):Rn(F)?(e.consume(F),r=String.fromCharCode(F),T):n(F)}function c(F){return F===45?(e.consume(F),s=2,v):F===91?(e.consume(F),s=5,o=0,h):Rn(F)?(e.consume(F),s=4,a.interrupt?t:f):n(F)}function v(F){return F===45?(e.consume(F),a.interrupt?t:f):n(F)}function h(F){const se="CDATA[";return F===se.charCodeAt(o++)?(e.consume(F),o===se.length?a.interrupt?t:_:h):n(F)}function A(F){return Rn(F)?(e.consume(F),r=String.fromCharCode(F),T):n(F)}function T(F){if(F===null||F===47||F===62||Yt(F)){const se=F===47,me=r.toLowerCase();return!se&&!i&&w1.includes(me)?(s=1,a.interrupt?t(F):_(F)):s3.includes(r.toLowerCase())?(s=6,se?(e.consume(F),k):a.interrupt?t(F):_(F)):(s=7,a.interrupt&&!a.parser.lazy[a.now().line]?n(F):i?p(F):L(F))}return F===45||En(F)?(e.consume(F),r+=String.fromCharCode(F),T):n(F)}function k(F){return F===62?(e.consume(F),a.interrupt?t:_):n(F)}function p(F){return Ct(F)?(e.consume(F),p):b(F)}function L(F){return F===47?(e.consume(F),b):F===58||F===95||Rn(F)?(e.consume(F),O):Ct(F)?(e.consume(F),L):b(F)}function O(F){return F===45||F===46||F===58||F===95||En(F)?(e.consume(F),O):g(F)}function g(F){return F===61?(e.consume(F),B):Ct(F)?(e.consume(F),g):L(F)}function B(F){return F===null||F===60||F===61||F===62||F===96?n(F):F===34||F===39?(e.consume(F),m=F,R):Ct(F)?(e.consume(F),B):C(F)}function R(F){return F===m?(e.consume(F),m=null,I):F===null||ft(F)?n(F):(e.consume(F),R)}function C(F){return F===null||F===34||F===39||F===47||F===60||F===61||F===62||F===96||Yt(F)?g(F):(e.consume(F),C)}function I(F){return F===47||F===62||Ct(F)?L(F):n(F)}function b(F){return F===62?(e.consume(F),y):n(F)}function y(F){return F===null||ft(F)?_(F):Ct(F)?(e.consume(F),y):n(F)}function _(F){return F===45&&s===2?(e.consume(F),V):F===60&&s===1?(e.consume(F),q):F===62&&s===4?(e.consume(F),x):F===63&&s===3?(e.consume(F),f):F===93&&s===5?(e.consume(F),U):ft(F)&&(s===6||s===7)?(e.exit("htmlFlowData"),e.check(r3,H,w)(F)):F===null||ft(F)?(e.exit("htmlFlowData"),w(F)):(e.consume(F),_)}function w(F){return e.check(o3,E,H)(F)}function E(F){return e.enter("lineEnding"),e.consume(F),e.exit("lineEnding"),M}function M(F){return F===null||ft(F)?w(F):(e.enter("htmlFlowData"),_(F))}function V(F){return F===45?(e.consume(F),f):_(F)}function q(F){return F===47?(e.consume(F),r="",$):_(F)}function $(F){if(F===62){const se=r.toLowerCase();return w1.includes(se)?(e.consume(F),x):_(F)}return Rn(F)&&r.length<8?(e.consume(F),r+=String.fromCharCode(F),$):_(F)}function U(F){return F===93?(e.consume(F),f):_(F)}function f(F){return F===62?(e.consume(F),x):F===45&&s===2?(e.consume(F),f):_(F)}function x(F){return F===null||ft(F)?(e.exit("htmlFlowData"),H(F)):(e.consume(F),x)}function H(F){return e.exit("htmlFlow"),t(F)}}function u3(e,t,n){const a=this;return s;function s(r){return ft(r)?(e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),i):n(r)}function i(r){return a.parser.lazy[a.now().line]?n(r):t(r)}}function d3(e,t,n){return a;function a(s){return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),e.attempt(Br,t,n)}}const m3={name:"htmlText",tokenize:f3};function f3(e,t,n){const a=this;let s,i,r;return o;function o(f){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(f),m}function m(f){return f===33?(e.consume(f),u):f===47?(e.consume(f),g):f===63?(e.consume(f),L):Rn(f)?(e.consume(f),C):n(f)}function u(f){return f===45?(e.consume(f),d):f===91?(e.consume(f),i=0,h):Rn(f)?(e.consume(f),p):n(f)}function d(f){return f===45?(e.consume(f),v):n(f)}function l(f){return f===null?n(f):f===45?(e.consume(f),c):ft(f)?(r=l,q(f)):(e.consume(f),l)}function c(f){return f===45?(e.consume(f),v):l(f)}function v(f){return f===62?V(f):f===45?c(f):l(f)}function h(f){const x="CDATA[";return f===x.charCodeAt(i++)?(e.consume(f),i===x.length?A:h):n(f)}function A(f){return f===null?n(f):f===93?(e.consume(f),T):ft(f)?(r=A,q(f)):(e.consume(f),A)}function T(f){return f===93?(e.consume(f),k):A(f)}function k(f){return f===62?V(f):f===93?(e.consume(f),k):A(f)}function p(f){return f===null||f===62?V(f):ft(f)?(r=p,q(f)):(e.consume(f),p)}function L(f){return f===null?n(f):f===63?(e.consume(f),O):ft(f)?(r=L,q(f)):(e.consume(f),L)}function O(f){return f===62?V(f):L(f)}function g(f){return Rn(f)?(e.consume(f),B):n(f)}function B(f){return f===45||En(f)?(e.consume(f),B):R(f)}function R(f){return ft(f)?(r=R,q(f)):Ct(f)?(e.consume(f),R):V(f)}function C(f){return f===45||En(f)?(e.consume(f),C):f===47||f===62||Yt(f)?I(f):n(f)}function I(f){return f===47?(e.consume(f),V):f===58||f===95||Rn(f)?(e.consume(f),b):ft(f)?(r=I,q(f)):Ct(f)?(e.consume(f),I):V(f)}function b(f){return f===45||f===46||f===58||f===95||En(f)?(e.consume(f),b):y(f)}function y(f){return f===61?(e.consume(f),_):ft(f)?(r=y,q(f)):Ct(f)?(e.consume(f),y):I(f)}function _(f){return f===null||f===60||f===61||f===62||f===96?n(f):f===34||f===39?(e.consume(f),s=f,w):ft(f)?(r=_,q(f)):Ct(f)?(e.consume(f),_):(e.consume(f),E)}function w(f){return f===s?(e.consume(f),s=void 0,M):f===null?n(f):ft(f)?(r=w,q(f)):(e.consume(f),w)}function E(f){return f===null||f===34||f===39||f===60||f===61||f===96?n(f):f===47||f===62||Yt(f)?I(f):(e.consume(f),E)}function M(f){return f===47||f===62||Yt(f)?I(f):n(f)}function V(f){return f===62?(e.consume(f),e.exit("htmlTextData"),e.exit("htmlText"),t):n(f)}function q(f){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),$}function $(f){return Ct(f)?Mt(e,U,"linePrefix",a.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(f):U(f)}function U(f){return e.enter("htmlTextData"),r(f)}}const ju={name:"labelEnd",tokenize:b3,resolveTo:_3,resolveAll:p3},v3={tokenize:y3},h3={tokenize:w3},g3={tokenize:S3};function p3(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function _3(e,t){let n=e.length,a=0,s,i,r,o;for(;n--;)if(s=e[n][1],i){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;e[n][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(r){if(e[n][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(i=n,s.type!=="labelLink")){a=2;break}}else s.type==="labelEnd"&&(r=n);const m={type:e[i][1].type==="labelLink"?"link":"image",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)},u={type:"label",start:Object.assign({},e[i][1].start),end:Object.assign({},e[r][1].end)},d={type:"labelText",start:Object.assign({},e[i+a+2][1].end),end:Object.assign({},e[r-2][1].start)};return o=[["enter",m,t],["enter",u,t]],o=Cn(o,e.slice(i+1,i+a+3)),o=Cn(o,[["enter",d,t]]),o=Cn(o,cl(t.parser.constructs.insideSpan.null,e.slice(i+a+4,r-3),t)),o=Cn(o,[["exit",d,t],e[r-2],e[r-1],["exit",u,t]]),o=Cn(o,e.slice(r+1)),o=Cn(o,[["exit",m,t]]),Xn(e,i,e.length,o),e}function b3(e,t,n){const a=this;let s=a.events.length,i,r;for(;s--;)if((a.events[s][1].type==="labelImage"||a.events[s][1].type==="labelLink")&&!a.events[s][1]._balanced){i=a.events[s][1];break}return o;function o(c){return i?i._inactive?l(c):(r=a.parser.defined.includes($a(a.sliceSerialize({start:i.end,end:a.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(c),e.exit("labelMarker"),e.exit("labelEnd"),m):n(c)}function m(c){return c===40?e.attempt(v3,d,r?d:l)(c):c===91?e.attempt(h3,d,r?u:l)(c):r?d(c):l(c)}function u(c){return e.attempt(g3,d,l)(c)}function d(c){return t(c)}function l(c){return i._balanced=!0,n(c)}}function y3(e,t,n){return a;function a(l){return e.enter("resource"),e.enter("resourceMarker"),e.consume(l),e.exit("resourceMarker"),s}function s(l){return Yt(l)?or(e,i)(l):i(l)}function i(l){return l===41?d(l):pv(e,r,o,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(l)}function r(l){return Yt(l)?or(e,m)(l):d(l)}function o(l){return n(l)}function m(l){return l===34||l===39||l===40?bv(e,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(l):d(l)}function u(l){return Yt(l)?or(e,d)(l):d(l)}function d(l){return l===41?(e.enter("resourceMarker"),e.consume(l),e.exit("resourceMarker"),e.exit("resource"),t):n(l)}}function w3(e,t,n){const a=this;return s;function s(o){return _v.call(a,e,i,r,"reference","referenceMarker","referenceString")(o)}function i(o){return a.parser.defined.includes($a(a.sliceSerialize(a.events[a.events.length-1][1]).slice(1,-1)))?t(o):n(o)}function r(o){return n(o)}}function S3(e,t,n){return a;function a(i){return e.enter("reference"),e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),s}function s(i){return i===93?(e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),e.exit("reference"),t):n(i)}}const k3={name:"labelStartImage",tokenize:x3,resolveAll:ju.resolveAll};function x3(e,t,n){const a=this;return s;function s(o){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(o),e.exit("labelImageMarker"),i}function i(o){return o===91?(e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelImage"),r):n(o)}function r(o){return o===94&&"_hiddenFootnoteSupport"in a.parser.constructs?n(o):t(o)}}const T3={name:"labelStartLink",tokenize:C3,resolveAll:ju.resolveAll};function C3(e,t,n){const a=this;return s;function s(r){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(r),e.exit("labelMarker"),e.exit("labelLink"),i}function i(r){return r===94&&"_hiddenFootnoteSupport"in a.parser.constructs?n(r):t(r)}}const ql={name:"lineEnding",tokenize:A3};function A3(e,t){return n;function n(a){return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),Mt(e,t,"linePrefix")}}const bo={name:"thematicBreak",tokenize:E3};function E3(e,t,n){let a=0,s;return i;function i(u){return e.enter("thematicBreak"),r(u)}function r(u){return s=u,o(u)}function o(u){return u===s?(e.enter("thematicBreakSequence"),m(u)):a>=3&&(u===null||ft(u))?(e.exit("thematicBreak"),t(u)):n(u)}function m(u){return u===s?(e.consume(u),a++,m):(e.exit("thematicBreakSequence"),Ct(u)?Mt(e,o,"whitespace")(u):o(u))}}const jn={name:"list",tokenize:I3,continuation:{tokenize:B3},exit:O3},M3={tokenize:F3,partial:!0},R3={tokenize:L3,partial:!0};function I3(e,t,n){const a=this,s=a.events[a.events.length-1];let i=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,r=0;return o;function o(v){const h=a.containerState.type||(v===42||v===43||v===45?"listUnordered":"listOrdered");if(h==="listUnordered"?!a.containerState.marker||v===a.containerState.marker:Vc(v)){if(a.containerState.type||(a.containerState.type=h,e.enter(h,{_container:!0})),h==="listUnordered")return e.enter("listItemPrefix"),v===42||v===45?e.check(bo,n,u)(v):u(v);if(!a.interrupt||v===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),m(v)}return n(v)}function m(v){return Vc(v)&&++r<10?(e.consume(v),m):(!a.interrupt||r<2)&&(a.containerState.marker?v===a.containerState.marker:v===41||v===46)?(e.exit("listItemValue"),u(v)):n(v)}function u(v){return e.enter("listItemMarker"),e.consume(v),e.exit("listItemMarker"),a.containerState.marker=a.containerState.marker||v,e.check(Br,a.interrupt?n:d,e.attempt(M3,c,l))}function d(v){return a.containerState.initialBlankLine=!0,i++,c(v)}function l(v){return Ct(v)?(e.enter("listItemPrefixWhitespace"),e.consume(v),e.exit("listItemPrefixWhitespace"),c):n(v)}function c(v){return a.containerState.size=i+a.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(v)}}function B3(e,t,n){const a=this;return a.containerState._closeFlow=void 0,e.check(Br,s,i);function s(o){return a.containerState.furtherBlankLines=a.containerState.furtherBlankLines||a.containerState.initialBlankLine,Mt(e,t,"listItemIndent",a.containerState.size+1)(o)}function i(o){return a.containerState.furtherBlankLines||!Ct(o)?(a.containerState.furtherBlankLines=void 0,a.containerState.initialBlankLine=void 0,r(o)):(a.containerState.furtherBlankLines=void 0,a.containerState.initialBlankLine=void 0,e.attempt(R3,t,r)(o))}function r(o){return a.containerState._closeFlow=!0,a.interrupt=void 0,Mt(e,e.attempt(jn,t,n),"linePrefix",a.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o)}}function L3(e,t,n){const a=this;return Mt(e,s,"listItemIndent",a.containerState.size+1);function s(i){const r=a.events[a.events.length-1];return r&&r[1].type==="listItemIndent"&&r[2].sliceSerialize(r[1],!0).length===a.containerState.size?t(i):n(i)}}function O3(e){e.exit(this.containerState.type)}function F3(e,t,n){const a=this;return Mt(e,s,"listItemPrefixWhitespace",a.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(i){const r=a.events[a.events.length-1];return!Ct(i)&&r&&r[1].type==="listItemPrefixWhitespace"?t(i):n(i)}}const S1={name:"setextUnderline",tokenize:P3,resolveTo:V3};function V3(e,t){let n=e.length,a,s,i;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){a=n;break}e[n][1].type==="paragraph"&&(s=n)}else e[n][1].type==="content"&&e.splice(n,1),!i&&e[n][1].type==="definition"&&(i=n);const r={type:"setextHeading",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[s][1].type="setextHeadingText",i?(e.splice(s,0,["enter",r,t]),e.splice(i+1,0,["exit",e[a][1],t]),e[a][1].end=Object.assign({},e[i][1].end)):e[a][1]=r,e.push(["exit",r,t]),e}function P3(e,t,n){const a=this;let s;return i;function i(u){let d=a.events.length,l;for(;d--;)if(a.events[d][1].type!=="lineEnding"&&a.events[d][1].type!=="linePrefix"&&a.events[d][1].type!=="content"){l=a.events[d][1].type==="paragraph";break}return!a.parser.lazy[a.now().line]&&(a.interrupt||l)?(e.enter("setextHeadingLine"),s=u,r(u)):n(u)}function r(u){return e.enter("setextHeadingLineSequence"),o(u)}function o(u){return u===s?(e.consume(u),o):(e.exit("setextHeadingLineSequence"),Ct(u)?Mt(e,m,"lineSuffix")(u):m(u))}function m(u){return u===null||ft(u)?(e.exit("setextHeadingLine"),t(u)):n(u)}}const D3={tokenize:j3};function j3(e){const t=this,n=e.attempt(Br,a,e.attempt(this.parser.constructs.flowInitial,s,Mt(e,e.attempt(this.parser.constructs.flow,s,e.attempt(Ub,s)),"linePrefix")));return n;function a(i){if(i===null){e.consume(i);return}return e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function s(i){if(i===null){e.consume(i);return}return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const N3={resolveAll:wv()},$3=yv("string"),H3=yv("text");function yv(e){return{tokenize:t,resolveAll:wv(e==="text"?z3:void 0)};function t(n){const a=this,s=this.parser.constructs[e],i=n.attempt(s,r,o);return r;function r(d){return u(d)?i(d):o(d)}function o(d){if(d===null){n.consume(d);return}return n.enter("data"),n.consume(d),m}function m(d){return u(d)?(n.exit("data"),i(d)):(n.consume(d),m)}function u(d){if(d===null)return!0;const l=s[d];let c=-1;if(l)for(;++c<l.length;){const v=l[c];if(!v.previous||v.previous.call(a,a.previous))return!0}return!1}}}function wv(e){return t;function t(n,a){let s=-1,i;for(;++s<=n.length;)i===void 0?n[s]&&n[s][1].type==="data"&&(i=s,s++):(!n[s]||n[s][1].type!=="data")&&(s!==i+2&&(n[i][1].end=n[s-1][1].end,n.splice(i+2,s-i-2),s=i+2),i=void 0);return e?e(n,a):n}}function z3(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const a=e[n-1][1],s=t.sliceStream(a);let i=s.length,r=-1,o=0,m;for(;i--;){const u=s[i];if(typeof u=="string"){for(r=u.length;u.charCodeAt(r-1)===32;)o++,r--;if(r)break;r=-1}else if(u===-2)m=!0,o++;else if(u!==-1){i++;break}}if(o){const u={type:n===e.length||m||o<2?"lineSuffix":"hardBreakTrailing",start:{line:a.end.line,column:a.end.column-o,offset:a.end.offset-o,_index:a.start._index+i,_bufferIndex:i?r:a.start._bufferIndex+r},end:Object.assign({},a.end)};a.end=Object.assign({},u.start),a.start.offset===a.end.offset?Object.assign(a,u):(e.splice(n,0,["enter",u,t],["exit",u,t]),n+=2)}n++}return e}function U3(e,t,n){let a=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const s={},i=[];let r=[],o=[];const m={consume:p,enter:L,exit:O,attempt:R(g),check:R(B),interrupt:R(B,{interrupt:!0})},u={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:v,sliceSerialize:c,now:h,defineSkip:A,write:l};let d=t.tokenize.call(u,m);return t.resolveAll&&i.push(t),u;function l(y){return r=Cn(r,y),T(),r[r.length-1]!==null?[]:(C(t,0),u.events=cl(i,u.events,u),u.events)}function c(y,_){return W3(v(y),_)}function v(y){return q3(r,y)}function h(){const{line:y,column:_,offset:w,_index:E,_bufferIndex:M}=a;return{line:y,column:_,offset:w,_index:E,_bufferIndex:M}}function A(y){s[y.line]=y.column,b()}function T(){let y;for(;a._index<r.length;){const _=r[a._index];if(typeof _=="string")for(y=a._index,a._bufferIndex<0&&(a._bufferIndex=0);a._index===y&&a._bufferIndex<_.length;)k(_.charCodeAt(a._bufferIndex));else k(_)}}function k(y){d=d(y)}function p(y){ft(y)?(a.line++,a.column=1,a.offset+=y===-3?2:1,b()):y!==-1&&(a.column++,a.offset++),a._bufferIndex<0?a._index++:(a._bufferIndex++,a._bufferIndex===r[a._index].length&&(a._bufferIndex=-1,a._index++)),u.previous=y}function L(y,_){const w=_||{};return w.type=y,w.start=h(),u.events.push(["enter",w,u]),o.push(w),w}function O(y){const _=o.pop();return _.end=h(),u.events.push(["exit",_,u]),_}function g(y,_){C(y,_.from)}function B(y,_){_.restore()}function R(y,_){return w;function w(E,M,V){let q,$,U,f;return Array.isArray(E)?H(E):"tokenize"in E?H([E]):x(E);function x(X){return G;function G(ue){const be=ue!==null&&X[ue],ke=ue!==null&&X.null,je=[...Array.isArray(be)?be:be?[be]:[],...Array.isArray(ke)?ke:ke?[ke]:[]];return H(je)(ue)}}function H(X){return q=X,$=0,X.length===0?V:F(X[$])}function F(X){return G;function G(ue){return f=I(),U=X,X.partial||(u.currentConstruct=X),X.name&&u.parser.constructs.disable.null.includes(X.name)?me():X.tokenize.call(_?Object.assign(Object.create(u),_):u,m,se,me)(ue)}}function se(X){return y(U,f),M}function me(X){return f.restore(),++$<q.length?F(q[$]):V}}}function C(y,_){y.resolveAll&&!i.includes(y)&&i.push(y),y.resolve&&Xn(u.events,_,u.events.length-_,y.resolve(u.events.slice(_),u)),y.resolveTo&&(u.events=y.resolveTo(u.events,u))}function I(){const y=h(),_=u.previous,w=u.currentConstruct,E=u.events.length,M=Array.from(o);return{restore:V,from:E};function V(){a=y,u.previous=_,u.currentConstruct=w,u.events.length=E,o=M,b()}}function b(){a.line in s&&a.column<2&&(a.column=s[a.line],a.offset+=s[a.line]-1)}}function q3(e,t){const n=t.start._index,a=t.start._bufferIndex,s=t.end._index,i=t.end._bufferIndex;let r;if(n===s)r=[e[n].slice(a,i)];else{if(r=e.slice(n,s),a>-1){const o=r[0];typeof o=="string"?r[0]=o.slice(a):r.shift()}i>0&&r.push(e[s].slice(0,i))}return r}function W3(e,t){let n=-1;const a=[];let s;for(;++n<e.length;){const i=e[n];let r;if(typeof i=="string")r=i;else switch(i){case-5:{r="\r";break}case-4:{r=`
`;break}case-3:{r=`\r
`;break}case-2:{r=t?" ":"	";break}case-1:{if(!t&&s)continue;r=" ";break}default:r=String.fromCharCode(i)}s=i===-2,a.push(r)}return a.join("")}const Y3={42:jn,43:jn,45:jn,48:jn,49:jn,50:jn,51:jn,52:jn,53:jn,54:jn,55:jn,56:jn,57:jn,62:fv},X3={91:Gb},G3={[-2]:Ul,[-1]:Ul,32:Ul},K3={35:t3,42:bo,45:[S1,bo],60:i3,61:S1,95:bo,96:y1,126:y1},Z3={38:hv,92:vv},Q3={[-5]:ql,[-4]:ql,[-3]:ql,33:k3,38:hv,42:Pc,60:[Cb,m3],91:T3,92:[Jb,vv],93:ju,95:Pc,96:jb},J3={null:[Pc,N3]},ey={null:[42,95]},ty={null:[]};var ny=Object.freeze(Object.defineProperty({__proto__:null,document:Y3,contentInitial:X3,flowInitial:G3,flow:K3,string:Z3,text:Q3,insideSpan:J3,attentionMarkers:ey,disable:ty},Symbol.toStringTag,{value:"Module"}));function ay(e){const n=uv([ny,...(e||{}).extensions||[]]),a={defined:[],lazy:{},constructs:n,content:s(bb),document:s(wb),flow:s(D3),string:s($3),text:s(H3)};return a;function s(i){return r;function r(o){return U3(a,i,o)}}}function sy(e){for(;!gv(e););return e}const k1=/[\0\t\n\r]/g;function iy(){let e=1,t="",n=!0,a;return s;function s(i,r,o){const m=[];let u,d,l,c,v;for(i=t+i.toString(r),l=0,t="",n&&(i.charCodeAt(0)===65279&&l++,n=void 0);l<i.length;){if(k1.lastIndex=l,u=k1.exec(i),c=u&&u.index!==void 0?u.index:i.length,v=i.charCodeAt(c),!u){t=i.slice(l);break}if(v===10&&l===c&&a)m.push(-3),a=void 0;else switch(a&&(m.push(-5),a=void 0),l<c&&(m.push(i.slice(l,c)),e+=c-l),v){case 0:{m.push(65533),e++;break}case 9:{for(d=Math.ceil(e/4)*4,m.push(-2);e++<d;)m.push(-1);break}case 10:{m.push(-4),e=1;break}default:a=!0,e=1}l=c+1}return o&&(a&&m.push(-5),t&&m.push(t),m.push(null)),m}}function ry(e,t,n){return typeof t!="string"&&(n=t,t=void 0),_b(n)(sy(ay(n).document().write(iy()(e,t,!0))))}const oy={tokenize:fy,partial:!0},Sv={tokenize:vy,partial:!0},kv={tokenize:hy,partial:!0},xv={tokenize:gy,partial:!0},ly={tokenize:py,partial:!0},Tv={tokenize:dy,previous:Av},Cv={tokenize:my,previous:Ev},ms={tokenize:uy,previous:Mv},Ya={},cy={text:Ya};let $s=48;for(;$s<123;)Ya[$s]=ms,$s++,$s===58?$s=65:$s===91&&($s=97);Ya[43]=ms;Ya[45]=ms;Ya[46]=ms;Ya[95]=ms;Ya[72]=[ms,Cv];Ya[104]=[ms,Cv];Ya[87]=[ms,Tv];Ya[119]=[ms,Tv];function uy(e,t,n){const a=this;let s,i;return r;function r(l){return!Dc(l)||!Mv.call(a,a.previous)||Nu(a.events)?n(l):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),o(l))}function o(l){return Dc(l)?(e.consume(l),o):l===64?(e.consume(l),m):n(l)}function m(l){return l===46?e.check(ly,d,u)(l):l===45||l===95||En(l)?(i=!0,e.consume(l),m):d(l)}function u(l){return e.consume(l),s=!0,m}function d(l){return i&&s&&Rn(a.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(l)):n(l)}}function dy(e,t,n){const a=this;return s;function s(r){return r!==87&&r!==119||!Av.call(a,a.previous)||Nu(a.events)?n(r):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(oy,e.attempt(Sv,e.attempt(kv,i),n),n)(r))}function i(r){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(r)}}function my(e,t,n){const a=this;let s="",i=!1;return r;function r(l){return(l===72||l===104)&&Ev.call(a,a.previous)&&!Nu(a.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),s+=String.fromCodePoint(l),e.consume(l),o):n(l)}function o(l){if(Rn(l)&&s.length<5)return s+=String.fromCodePoint(l),e.consume(l),o;if(l===58){const c=s.toLowerCase();if(c==="http"||c==="https")return e.consume(l),m}return n(l)}function m(l){return l===47?(e.consume(l),i?u:(i=!0,m)):n(l)}function u(l){return l===null||Bo(l)||Yt(l)||Ai(l)||Du(l)?n(l):e.attempt(Sv,e.attempt(kv,d),n)(l)}function d(l){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(l)}}function fy(e,t,n){let a=0;return s;function s(r){return(r===87||r===119)&&a<3?(a++,e.consume(r),s):r===46&&a===3?(e.consume(r),i):n(r)}function i(r){return r===null?n(r):t(r)}}function vy(e,t,n){let a,s,i;return r;function r(u){return u===46||u===95?e.check(xv,m,o)(u):u===null||Yt(u)||Ai(u)||u!==45&&Du(u)?m(u):(i=!0,e.consume(u),r)}function o(u){return u===95?a=!0:(s=a,a=void 0),e.consume(u),r}function m(u){return s||a||!i?n(u):t(u)}}function hy(e,t){let n=0,a=0;return s;function s(r){return r===40?(n++,e.consume(r),s):r===41&&a<n?i(r):r===33||r===34||r===38||r===39||r===41||r===42||r===44||r===46||r===58||r===59||r===60||r===63||r===93||r===95||r===126?e.check(xv,t,i)(r):r===null||Yt(r)||Ai(r)?t(r):(e.consume(r),s)}function i(r){return r===41&&a++,e.consume(r),s}}function gy(e,t,n){return a;function a(o){return o===33||o===34||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===63||o===95||o===126?(e.consume(o),a):o===38?(e.consume(o),i):o===93?(e.consume(o),s):o===60||o===null||Yt(o)||Ai(o)?t(o):n(o)}function s(o){return o===null||o===40||o===91||Yt(o)||Ai(o)?t(o):a(o)}function i(o){return Rn(o)?r(o):n(o)}function r(o){return o===59?(e.consume(o),a):Rn(o)?(e.consume(o),r):n(o)}}function py(e,t,n){return a;function a(i){return e.consume(i),s}function s(i){return En(i)?n(i):t(i)}}function Av(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||Yt(e)}function Ev(e){return!Rn(e)}function Mv(e){return!(e===47||Dc(e))}function Dc(e){return e===43||e===45||e===46||e===95||En(e)}function Nu(e){let t=e.length,n=!1;for(;t--;){const a=e[t][1];if((a.type==="labelLink"||a.type==="labelImage")&&!a._balanced){n=!0;break}if(a._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const _y={exit:{literalAutolinkEmail:yy,literalAutolinkHttp:wy,literalAutolinkWww:by}};function by(e){$u.call(this,e,"http://")}function yy(e){$u.call(this,e,"mailto:")}function wy(e){$u.call(this,e)}function $u(e,t){const n=this.sliceSerialize(e);this.tag('<a href="'+ni((t||"")+n)+'">'),this.raw(this.encode(n)),this.tag("</a>")}const Sy={tokenize:Ry,partial:!0};function ky(){return{document:{91:{tokenize:Ay,continuation:{tokenize:Ey},exit:My}},text:{91:{tokenize:Cy},93:{add:"after",tokenize:xy,resolveTo:Ty}}}}function xy(e,t,n){const a=this;let s=a.events.length;const i=a.parser.gfmFootnotes||(a.parser.gfmFootnotes=[]);let r;for(;s--;){const m=a.events[s][1];if(m.type==="labelImage"){r=m;break}if(m.type==="gfmFootnoteCall"||m.type==="labelLink"||m.type==="label"||m.type==="image"||m.type==="link")break}return o;function o(m){if(!r||!r._balanced)return n(m);const u=$a(a.sliceSerialize({start:r.end,end:a.now()}));return u.codePointAt(0)!==94||!i.includes(u.slice(1))?n(m):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(m),e.exit("gfmFootnoteCallLabelMarker"),t(m))}}function Ty(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const a={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},s={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};s.end.column++,s.end.offset++,s.end._bufferIndex++;const i={type:"gfmFootnoteCallString",start:Object.assign({},s.end),end:Object.assign({},e[e.length-1][1].start)},r={type:"chunkString",contentType:"string",start:Object.assign({},i.start),end:Object.assign({},i.end)},o=[e[n+1],e[n+2],["enter",a,t],e[n+3],e[n+4],["enter",s,t],["exit",s,t],["enter",i,t],["enter",r,t],["exit",r,t],["exit",i,t],e[e.length-2],e[e.length-1],["exit",a,t]];return e.splice(n,e.length-n+1,...o),e}function Cy(e,t,n){const a=this,s=a.parser.gfmFootnotes||(a.parser.gfmFootnotes=[]);let i=0,r;return o;function o(l){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(l),e.exit("gfmFootnoteCallLabelMarker"),m}function m(l){return l!==94?n(l):(e.enter("gfmFootnoteCallMarker"),e.consume(l),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",u)}function u(l){if(i>999||l===93&&!r||l===null||l===91||Yt(l))return n(l);if(l===93){e.exit("chunkString");const c=e.exit("gfmFootnoteCallString");return s.includes($a(a.sliceSerialize(c)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(l),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(l)}return Yt(l)||(r=!0),i++,e.consume(l),l===92?d:u}function d(l){return l===91||l===92||l===93?(e.consume(l),i++,u):u(l)}}function Ay(e,t,n){const a=this,s=a.parser.gfmFootnotes||(a.parser.gfmFootnotes=[]);let i,r=0,o;return m;function m(h){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(h),e.exit("gfmFootnoteDefinitionLabelMarker"),u}function u(h){return h===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(h),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",d):n(h)}function d(h){if(r>999||h===93&&!o||h===null||h===91||Yt(h))return n(h);if(h===93){e.exit("chunkString");const A=e.exit("gfmFootnoteDefinitionLabelString");return i=$a(a.sliceSerialize(A)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(h),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),c}return Yt(h)||(o=!0),r++,e.consume(h),h===92?l:d}function l(h){return h===91||h===92||h===93?(e.consume(h),r++,d):d(h)}function c(h){return h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),s.includes(i)||s.push(i),Mt(e,v,"gfmFootnoteDefinitionWhitespace")):n(h)}function v(h){return t(h)}}function Ey(e,t,n){return e.check(Br,t,e.attempt(Sy,t,n))}function My(e){e.exit("gfmFootnoteDefinition")}function Ry(e,t,n){const a=this;return Mt(e,s,"gfmFootnoteDefinitionIndent",5);function s(i){const r=a.events[a.events.length-1];return r&&r[1].type==="gfmFootnoteDefinitionIndent"&&r[2].sliceSerialize(r[1],!0).length===4?t(i):n(i)}}const Iy={}.hasOwnProperty,By={};function Ly(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function Oy(e){const t=By,n=t.label||"Footnotes",a=t.labelTagName||"h2",s=t.labelAttributes===null||t.labelAttributes===void 0?'class="sr-only"':t.labelAttributes,i=t.backLabel||Ly,r=t.clobberPrefix===null||t.clobberPrefix===void 0?"user-content-":t.clobberPrefix;return{enter:{gfmFootnoteDefinition(){this.getData("tightStack").push(!1)},gfmFootnoteDefinitionLabelString(){this.buffer()},gfmFootnoteCallString(){this.buffer()}},exit:{gfmFootnoteDefinition(){let o=this.getData("gfmFootnoteDefinitions");const m=this.getData("gfmFootnoteDefinitionStack"),u=this.getData("tightStack"),d=m.pop(),l=this.resume();o||this.setData("gfmFootnoteDefinitions",o={}),Iy.call(o,d)||(o[d]=l),u.pop(),this.setData("slurpOneLineEnding",!0),this.setData("lastWasTag")},gfmFootnoteDefinitionLabelString(o){let m=this.getData("gfmFootnoteDefinitionStack");m||this.setData("gfmFootnoteDefinitionStack",m=[]),m.push($a(this.sliceSerialize(o))),this.resume(),this.buffer()},gfmFootnoteCallString(o){let m=this.getData("gfmFootnoteCallOrder"),u=this.getData("gfmFootnoteCallCounts");const d=$a(this.sliceSerialize(o));let l;this.resume(),m||this.setData("gfmFootnoteCallOrder",m=[]),u||this.setData("gfmFootnoteCallCounts",u={});const c=m.indexOf(d),v=ni(d.toLowerCase());c===-1?(m.push(d),u[d]=1,l=m.length):(u[d]++,l=c+1);const h=u[d];this.tag('<sup><a href="#'+r+"fn-"+v+'" id="'+r+"fnref-"+v+(h>1?"-"+h:"")+'" data-footnote-ref="" aria-describedby="footnote-label">'+String(l)+"</a></sup>")},null(){const o=this.getData("gfmFootnoteCallOrder")||[],m=this.getData("gfmFootnoteCallCounts")||{},u=this.getData("gfmFootnoteDefinitions")||{};let d=-1;for(o.length>0&&(this.lineEndingIfNeeded(),this.tag('<section data-footnotes="" class="footnotes"><'+a+' id="footnote-label"'+(s?" "+s:"")+">"),this.raw(this.encode(n)),this.tag("</"+a+">"),this.lineEndingIfNeeded(),this.tag("<ol>"));++d<o.length;){const l=o[d],c=ni(l.toLowerCase());let v=0;const h=[];for(;++v<=m[l];)h.push('<a href="#'+r+"fnref-"+c+(v>1?"-"+v:"")+'" data-footnote-backref="" aria-label="'+this.encode(typeof i=="string"?i:i(d,v))+'" class="data-footnote-backref">↩'+(v>1?"<sup>"+v+"</sup>":"")+"</a>");const A=h.join(" ");let T=!1;this.lineEndingIfNeeded(),this.tag('<li id="'+r+"fn-"+c+'">'),this.lineEndingIfNeeded(),this.tag(u[l].replace(/<\/p>(?:\r?\n|\r)?$/,k=>(T=!0," "+A+k))),T||(this.lineEndingIfNeeded(),this.tag(A)),this.lineEndingIfNeeded(),this.tag("</li>")}o.length>0&&(this.lineEndingIfNeeded(),this.tag("</ol>"),this.lineEndingIfNeeded(),this.tag("</section>"))}}}}const Fy={enter:{strikethrough(){this.tag("<del>")}},exit:{strikethrough(){this.tag("</del>")}}};function Vy(e){let n={}.singleTilde;const a={tokenize:i,resolveAll:s};return n==null&&(n=!0),{text:{126:a},insideSpan:{null:[a]},attentionMarkers:{null:[126]}};function s(r,o){let m=-1;for(;++m<r.length;)if(r[m][0]==="enter"&&r[m][1].type==="strikethroughSequenceTemporary"&&r[m][1]._close){let u=m;for(;u--;)if(r[u][0]==="exit"&&r[u][1].type==="strikethroughSequenceTemporary"&&r[u][1]._open&&r[m][1].end.offset-r[m][1].start.offset===r[u][1].end.offset-r[u][1].start.offset){r[m][1].type="strikethroughSequence",r[u][1].type="strikethroughSequence";const d={type:"strikethrough",start:Object.assign({},r[u][1].start),end:Object.assign({},r[m][1].end)},l={type:"strikethroughText",start:Object.assign({},r[u][1].end),end:Object.assign({},r[m][1].start)},c=[["enter",d,o],["enter",r[u][1],o],["exit",r[u][1],o],["enter",l,o]],v=o.parser.constructs.insideSpan.null;v&&Xn(c,c.length,0,cl(v,r.slice(u+1,m),o)),Xn(c,c.length,0,[["exit",l,o],["enter",r[m][1],o],["exit",r[m][1],o],["exit",d,o]]),Xn(r,u-1,m-u+3,c),m=u+c.length-2;break}}for(m=-1;++m<r.length;)r[m][1].type==="strikethroughSequenceTemporary"&&(r[m][1].type="data");return r}function i(r,o,m){const u=this.previous,d=this.events;let l=0;return c;function c(h){return u===126&&d[d.length-1][1].type!=="characterEscape"?m(h):(r.enter("strikethroughSequenceTemporary"),v(h))}function v(h){const A=Lo(u);if(h===126)return l>1?m(h):(r.consume(h),l++,v);if(l<2&&!n)return m(h);const T=r.exit("strikethroughSequenceTemporary"),k=Lo(h);return T._open=!k||k===2&&!!A,T._close=!A||A===2&&!!k,o(h)}}}const Wl={none:"",left:' align="left"',right:' align="right"',center:' align="center"'},Py={enter:{table(e){const t=e._align;this.lineEndingIfNeeded(),this.tag("<table>"),this.setData("tableAlign",t)},tableBody(){this.tag("<tbody>")},tableData(){const e=this.getData("tableAlign"),t=this.getData("tableColumn"),n=Wl[e[t]];n===void 0?this.buffer():(this.lineEndingIfNeeded(),this.tag("<td"+n+">"))},tableHead(){this.lineEndingIfNeeded(),this.tag("<thead>")},tableHeader(){const e=this.getData("tableAlign"),t=this.getData("tableColumn"),n=Wl[e[t]];this.lineEndingIfNeeded(),this.tag("<th"+n+">")},tableRow(){this.setData("tableColumn",0),this.lineEndingIfNeeded(),this.tag("<tr>")}},exit:{codeTextData(e){let t=this.sliceSerialize(e);this.getData("tableAlign")&&(t=t.replace(/\\([\\|])/g,Dy)),this.raw(this.encode(t))},table(){this.setData("tableAlign"),this.setData("slurpAllLineEndings"),this.lineEndingIfNeeded(),this.tag("</table>")},tableBody(){this.lineEndingIfNeeded(),this.tag("</tbody>")},tableData(){const e=this.getData("tableAlign"),t=this.getData("tableColumn");t in e?(this.tag("</td>"),this.setData("tableColumn",t+1)):this.resume()},tableHead(){this.lineEndingIfNeeded(),this.tag("</thead>")},tableHeader(){const e=this.getData("tableColumn");this.tag("</th>"),this.setData("tableColumn",e+1)},tableRow(){const e=this.getData("tableAlign");let t=this.getData("tableColumn");for(;t<e.length;)this.lineEndingIfNeeded(),this.tag("<td"+Wl[e[t]]+"></td>"),t++;this.setData("tableColumn",t),this.lineEndingIfNeeded(),this.tag("</tr>")}}};function Dy(e,t){return t==="|"?t:e}class jy{constructor(){this.map=[]}add(t,n,a){Ny(this,t,n,a)}consume(t){if(this.map.sort((i,r)=>i[0]-r[0]),this.map.length===0)return;let n=this.map.length;const a=[];for(;n>0;)n-=1,a.push(t.slice(this.map[n][0]+this.map[n][1])),a.push(this.map[n][2]),t.length=this.map[n][0];a.push([...t]),t.length=0;let s=a.pop();for(;s;)t.push(...s),s=a.pop();this.map.length=0}}function Ny(e,t,n,a){let s=0;if(!(n===0&&a.length===0)){for(;s<e.map.length;){if(e.map[s][0]===t){e.map[s][1]+=n,e.map[s][2].push(...a);return}s+=1}e.map.push([t,n,a])}}function $y(e,t){let n=!1;const a=[];for(;t<e.length;){const s=e[t];if(n){if(s[0]==="enter")s[1].type==="tableContent"&&a.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(s[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const i=a.length-1;a[i]=a[i]==="left"?"center":"right"}}else if(s[1].type==="tableDelimiterRow")break}else s[0]==="enter"&&s[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return a}const Hy={flow:{null:{tokenize:zy,resolveAll:Uy}}};function zy(e,t,n){const a=this;let s=0,i=0,r;return o;function o(b){let y=a.events.length-1;for(;y>-1;){const E=a.events[y][1].type;if(E==="lineEnding"||E==="linePrefix")y--;else break}const _=y>-1?a.events[y][1].type:null,w=_==="tableHead"||_==="tableRow"?B:m;return w===B&&a.parser.lazy[a.now().line]?n(b):w(b)}function m(b){return e.enter("tableHead"),e.enter("tableRow"),u(b)}function u(b){return b===124||(r=!0,i+=1),d(b)}function d(b){return b===null?n(b):ft(b)?i>1?(i=0,a.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(b),e.exit("lineEnding"),v):n(b):Ct(b)?Mt(e,d,"whitespace")(b):(i+=1,r&&(r=!1,s+=1),b===124?(e.enter("tableCellDivider"),e.consume(b),e.exit("tableCellDivider"),r=!0,d):(e.enter("data"),l(b)))}function l(b){return b===null||b===124||Yt(b)?(e.exit("data"),d(b)):(e.consume(b),b===92?c:l)}function c(b){return b===92||b===124?(e.consume(b),l):l(b)}function v(b){return a.interrupt=!1,a.parser.lazy[a.now().line]?n(b):(e.enter("tableDelimiterRow"),r=!1,Ct(b)?Mt(e,h,"linePrefix",a.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(b):h(b))}function h(b){return b===45||b===58?T(b):b===124?(r=!0,e.enter("tableCellDivider"),e.consume(b),e.exit("tableCellDivider"),A):g(b)}function A(b){return Ct(b)?Mt(e,T,"whitespace")(b):T(b)}function T(b){return b===58?(i+=1,r=!0,e.enter("tableDelimiterMarker"),e.consume(b),e.exit("tableDelimiterMarker"),k):b===45?(i+=1,k(b)):b===null||ft(b)?O(b):g(b)}function k(b){return b===45?(e.enter("tableDelimiterFiller"),p(b)):g(b)}function p(b){return b===45?(e.consume(b),p):b===58?(r=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(b),e.exit("tableDelimiterMarker"),L):(e.exit("tableDelimiterFiller"),L(b))}function L(b){return Ct(b)?Mt(e,O,"whitespace")(b):O(b)}function O(b){return b===124?h(b):b===null||ft(b)?!r||s!==i?g(b):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(b)):g(b)}function g(b){return n(b)}function B(b){return e.enter("tableRow"),R(b)}function R(b){return b===124?(e.enter("tableCellDivider"),e.consume(b),e.exit("tableCellDivider"),R):b===null||ft(b)?(e.exit("tableRow"),t(b)):Ct(b)?Mt(e,R,"whitespace")(b):(e.enter("data"),C(b))}function C(b){return b===null||b===124||Yt(b)?(e.exit("data"),R(b)):(e.consume(b),b===92?I:C)}function I(b){return b===92||b===124?(e.consume(b),C):C(b)}}function Uy(e,t){let n=-1,a=!0,s=0,i=[0,0,0,0],r=[0,0,0,0],o=!1,m=0,u,d,l;const c=new jy;for(;++n<e.length;){const v=e[n],h=v[1];v[0]==="enter"?h.type==="tableHead"?(o=!1,m!==0&&(x1(c,t,m,u,d),d=void 0,m=0),u={type:"table",start:Object.assign({},h.start),end:Object.assign({},h.end)},c.add(n,0,[["enter",u,t]])):h.type==="tableRow"||h.type==="tableDelimiterRow"?(a=!0,l=void 0,i=[0,0,0,0],r=[0,n+1,0,0],o&&(o=!1,d={type:"tableBody",start:Object.assign({},h.start),end:Object.assign({},h.end)},c.add(n,0,[["enter",d,t]])),s=h.type==="tableDelimiterRow"?2:d?3:1):s&&(h.type==="data"||h.type==="tableDelimiterMarker"||h.type==="tableDelimiterFiller")?(a=!1,r[2]===0&&(i[1]!==0&&(r[0]=r[1],l=Qr(c,t,i,s,void 0,l),i=[0,0,0,0]),r[2]=n)):h.type==="tableCellDivider"&&(a?a=!1:(i[1]!==0&&(r[0]=r[1],l=Qr(c,t,i,s,void 0,l)),i=r,r=[i[1],n,0,0])):h.type==="tableHead"?(o=!0,m=n):h.type==="tableRow"||h.type==="tableDelimiterRow"?(m=n,i[1]!==0?(r[0]=r[1],l=Qr(c,t,i,s,n,l)):r[1]!==0&&(l=Qr(c,t,r,s,n,l)),s=0):s&&(h.type==="data"||h.type==="tableDelimiterMarker"||h.type==="tableDelimiterFiller")&&(r[3]=n)}for(m!==0&&x1(c,t,m,u,d),c.consume(t.events),n=-1;++n<t.events.length;){const v=t.events[n];v[0]==="enter"&&v[1].type==="table"&&(v[1]._align=$y(t.events,n))}return e}function Qr(e,t,n,a,s,i){const r=a===1?"tableHeader":a===2?"tableDelimiter":"tableData",o="tableContent";n[0]!==0&&(i.end=Object.assign({},bi(t.events,n[0])),e.add(n[0],0,[["exit",i,t]]));const m=bi(t.events,n[1]);if(i={type:r,start:Object.assign({},m),end:Object.assign({},m)},e.add(n[1],0,[["enter",i,t]]),n[2]!==0){const u=bi(t.events,n[2]),d=bi(t.events,n[3]),l={type:o,start:Object.assign({},u),end:Object.assign({},d)};if(e.add(n[2],0,[["enter",l,t]]),a!==2){const c=t.events[n[2]],v=t.events[n[3]];if(c[1].end=Object.assign({},v[1].end),c[1].type="chunkText",c[1].contentType="text",n[3]>n[2]+1){const h=n[2]+1,A=n[3]-n[2]-1;e.add(h,A,[])}}e.add(n[3]+1,0,[["exit",l,t]])}return s!==void 0&&(i.end=Object.assign({},bi(t.events,s)),e.add(s,0,[["exit",i,t]]),i=void 0),i}function x1(e,t,n,a,s){const i=[],r=bi(t.events,n);s&&(s.end=Object.assign({},r),i.push(["exit",s,t])),a.end=Object.assign({},r),i.push(["exit",a,t]),e.add(n+1,0,i)}function bi(e,t){const n=e[t],a=n[0]==="enter"?"start":"end";return n[1][a]}const Rv=/<(\/?)(iframe|noembed|noframes|plaintext|script|style|title|textarea|xmp)(?=[\t\n\f\r />])/gi,qy=new RegExp("^"+Rv.source,"i"),Wy={exit:{htmlFlowData(e){T1.call(this,e,Rv)},htmlTextData(e){T1.call(this,e,qy)}}};function T1(e,t){let n=this.sliceSerialize(e);this.options.allowDangerousHtml&&(n=n.replace(t,"&lt;$1$2")),this.raw(this.encode(n))}const Yy={enter:{taskListCheck(){this.tag('<input type="checkbox" disabled="" ')}},exit:{taskListCheck(){this.tag("/>")},taskListCheckValueChecked(){this.tag('checked="" ')}}},Xy={tokenize:Ky},Gy={text:{91:Xy}};function Ky(e,t,n){const a=this;return s;function s(m){return a.previous!==null||!a._gfmTasklistFirstContentOfListItem?n(m):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(m),e.exit("taskListCheckMarker"),i)}function i(m){return Yt(m)?(e.enter("taskListCheckValueUnchecked"),e.consume(m),e.exit("taskListCheckValueUnchecked"),r):m===88||m===120?(e.enter("taskListCheckValueChecked"),e.consume(m),e.exit("taskListCheckValueChecked"),r):n(m)}function r(m){return m===93?(e.enter("taskListCheckMarker"),e.consume(m),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),o):n(m)}function o(m){return ft(m)?t(m):Ct(m)?e.check({tokenize:Zy},t,n)(m):n(m)}}function Zy(e,t,n){return Mt(e,a,"whitespace");function a(s){return s===null?n(s):t(s)}}function Qy(e){return uv([cy,ky(),Vy(),Hy,Gy])}function Jy(e){return dv([_y,Oy(),Fy,Py,Wy,Yy])}const yn={carriageReturn:-5,lineFeed:-4,carriageReturnLineFeed:-3,eof:null,greaterThan:62,atSign:64,backslash:92,degree:176},e4=(e,t,n)=>{const a=r=>r===yn.carriageReturn||r===yn.lineFeed||r===yn.carriageReturnLineFeed||r===yn.eof?n(r):r===yn.backslash?(e.consume(r),s):r===yn.degree?(e.exit("underlineContent"),e.enter("underlineMarker"),e.consume(r),e.exit("underlineMarker"),e.exit("underline"),t):(e.consume(r),a),s=r=>r===yn.backslash||r===yn.degree?(e.consume(r),a):a(r),i=r=>r===yn.degree?n(r):a(r);return r=>(e.enter("underline"),e.enter("underlineMarker"),e.consume(r),e.exit("underlineMarker"),e.enter("underlineContent",{contentType:"string"}),i)},t4={name:"underline",tokenize:e4},n4={text:{176:t4}},a4={enter:{underline(){this.tag("<u>")}},exit:{underline(){this.tag("</u>")}}},s4=(e,t,n)=>{const a=r=>r===yn.carriageReturn||r===yn.lineFeed||r===yn.carriageReturnLineFeed||r===yn.eof?n(r):r===yn.backslash?(e.consume(r),s):r===yn.greaterThan?(e.exit("usertagContent"),e.enter("usertagMarker"),e.consume(r),e.exit("usertagMarker"),e.exit("usertag"),t):(e.consume(r),a),s=r=>r===yn.backslash||r===yn.greaterThan?(e.consume(r),a):a(r),i=r=>r===yn.atSign?(e.consume(r),e.exit("usertagMarker"),e.enter("usertagContent"),a):n(r);return r=>(e.enter("usertag"),e.enter("usertagMarker"),e.consume(r),i)},i4={name:"usertag",tokenize:s4},r4={text:{60:i4}},o4=e=>({exit:{usertagContent(t){const n=this.sliceSerialize(t);this.tag(`<span class="vac-text-tag" data-user-id="${n}">`);const a=e.find(s=>s._id===n);this.raw(`@${this.encode(a?a.username:n)}`),this.tag("</span>")}}});var l4=(e,{textFormatting:t})=>{if(t){let n=[];t.linkify||(n=["literalAutolink","literalAutolinkEmail"]);const a=ry(e.replaceAll("<usertag>","<@").replaceAll("</usertag>",">"),{extensions:[{...Qy(),disable:{null:n}},n4,r4],htmlExtensions:[Jy(),a4,o4(t.users)]});if(t.singleLine){const s=document.createElement("div");return s.innerHTML=a,[{types:[],value:s.innerText}]}return[{types:["markdown"],value:a}]}return[{types:[],value:e}]};const Hu=["png","jpg","jpeg","webp","svg","gif"],Iv=["mp4","video/ogg","webm","quicktime"],c4=["mp3","audio/ogg","wav","mpeg"],u4={name:"FormatMessage",components:{SvgIcon:kn},props:{messageId:{type:String,default:""},roomId:{type:String,default:""},roomList:{type:Boolean,default:!1},content:{type:[String,Number],required:!0},deleted:{type:Boolean,default:!1},users:{type:Array,default:()=>[]},linkify:{type:Boolean,default:!0},singleLine:{type:Boolean,default:!1},reply:{type:Boolean,default:!1},textFormatting:{type:Object,required:!0},textMessages:{type:Object,default:()=>{}},linkOptions:{type:Object,required:!0}},emits:["open-user-tag"],computed:{parsedMessage(){if(this.deleted)return[{value:this.textMessages.MESSAGE_DELETED}];let e;this.textFormatting.disabled?e={}:e={textFormatting:{linkify:this.linkify,linkOptions:this.linkOptions,singleLine:this.singleLine,reply:this.reply,users:this.users,...this.textFormatting}};const t=l4(this.content,e);return t.forEach(n=>{n.markdown=this.checkType(n,"markdown"),n.tag=this.checkType(n,"tag"),n.image=this.checkImageType(n)}),t}},methods:{checkType(e,t){return e.types&&e.types.indexOf(t)!==-1},checkImageType(e){let t=e.value.lastIndexOf(".");e.value.lastIndexOf("/")>t&&(t=-1);const a=e.value.substring(t+1,e.value.length),s=t>0&&Hu.some(i=>a.toLowerCase().includes(i));return s&&this.setImageSize(e),s},setImageSize(e){const t=new Image;t.src=e.value,t.addEventListener("load",n);function n(a){const s=a.path[0].width/150;e.height=Math.round(a.path[0].height/s)+"px",t.removeEventListener("load",n)}},openTag(e){const t=e.target.getAttribute("data-user-id");if(!this.singleLine&&t){const n=this.users.find(a=>String(a._id)===t);this.$emit("open-user-tag",n)}}}},d4=["innerHTML"],m4={class:"vac-image-link-container"},f4={class:"vac-image-link-message"};function v4(e,t,n,a,s,i){const r=dt("svg-icon");return oe(),Ce("div",{class:kt(["vac-format-message-wrapper",{"vac-text-ellipsis":n.singleLine}])},[(oe(!0),Ce(At,null,St(i.parsedMessage,(o,m)=>(oe(),Ce(At,{key:m},[o.markdown?(oe(),Ce("div",{key:0,class:"markdown",onClick:t[0]||(t[0]=(...u)=>i.openTag&&i.openTag(...u)),innerHTML:o.value},null,8,d4)):(oe(),Ce("div",{key:1,class:kt(["vac-format-container",{"vac-text-ellipsis":n.singleLine}])},[(oe(),Pt(y_(o.url?"a":"span"),{class:kt({"vac-text-ellipsis":n.singleLine,"vac-text-tag":!n.singleLine&&!n.reply&&o.tag}),href:o.href,target:o.href?n.linkOptions.target:null,rel:o.href?n.linkOptions.rel:null},{default:mt(()=>[n.deleted?(oe(),Ce(At,{key:0},[qe(e.$slots,n.roomList?"deleted-icon-room_"+n.roomId:"deleted-icon_"+n.messageId,{},()=>[Xe(r,{name:"deleted",class:kt(["vac-icon-deleted",{"vac-icon-deleted-room":n.roomList}])},null,8,["class"])]),is(" "+_t(n.textMessages.MESSAGE_DELETED),1)],64)):o.url&&o.image?(oe(),Ce(At,{key:1},[Pe("div",m4,[Pe("div",{class:"vac-image-link",style:Qt({"background-image":`url('${o.value}')`,height:o.height})},null,4)]),Pe("div",f4,_t(o.value),1)],64)):(oe(),Ce(At,{key:2},[is(_t(o.value),1)],64))]),_:2},1032,["class","href","target","rel"]))],2))],64))),128))],2)}var Lr=Xt(u4,[["render",v4]]);const Js="__v-click-outside",Bv=typeof window<"u",h4=typeof navigator<"u",g4=Bv&&("ontouchstart"in window||h4&&navigator.msMaxTouchPoints>0),p4=g4?["touchstart"]:["click"],_4=e=>{const t=typeof e=="function";if(!t&&typeof e!="object")throw new Error("v-click-outside: Binding value must be a function or an object");return{handler:t?e:e.handler,middleware:e.middleware||(n=>n),events:e.events||p4,isActive:e.isActive!==!1,detectIframe:e.detectIframe!==!1,capture:!!e.capture}},Lv=({event:e,handler:t,middleware:n})=>{n(e)&&t(e)},b4=({el:e,event:t,handler:n,middleware:a})=>{setTimeout(()=>{const{activeElement:s}=document;s&&s.tagName==="IFRAME"&&!e.contains(s)&&Lv({event:t,handler:n,middleware:a})},0)},y4=({el:e,event:t,handler:n,middleware:a})=>{const s=t.path||t.composedPath&&t.composedPath();(s?s.indexOf(e)<0:!e.contains(t.target))&&Lv({event:t,handler:n,middleware:a})},Ov=(e,{value:t})=>{const{events:n,handler:a,middleware:s,isActive:i,detectIframe:r,capture:o}=_4(t);if(i){if(e[Js]=n.map(m=>({event:m,srcTarget:document.documentElement,handler:u=>y4({el:e,event:u,handler:a,middleware:s}),capture:o})),r){const m={event:"blur",srcTarget:window,handler:u=>b4({el:e,event:u,handler:a,middleware:s}),capture:o};e[Js]=[...e[Js],m]}e[Js].forEach(({event:m,srcTarget:u,handler:d})=>setTimeout(()=>{e[Js]&&u.addEventListener(m,d,o)},0))}},Fv=e=>{(e[Js]||[]).forEach(({event:n,srcTarget:a,handler:s,capture:i})=>a.removeEventListener(n,s,i)),delete e[Js]},w4=(e,{value:t,oldValue:n})=>{JSON.stringify(t)!==JSON.stringify(n)&&(Fv(e),Ov(e,{value:t}))},S4={beforeMount:Ov,updated:w4,unmounted:Fv};var ul=Bv?S4:{},Vv=(e,t,n)=>{if(e.typingUsers&&e.typingUsers.length){const a=e.users.filter(s=>{if(s._id!==t&&e.typingUsers.indexOf(s._id)!==-1&&!(s.status&&s.status.state==="offline"))return!0});return a.length?e.users.length===2?n.IS_TYPING:a.map(s=>s.username).join(", ")+" "+n.IS_TYPING:void 0}};function _r(e,t){if(!(!t||!t.type))return e.some(n=>t.type.toLowerCase().includes(n))}function Ei(e){return _r(Hu,e)}function Or(e){return _r(Iv,e)}function C1(e){return _r(Hu,e)||_r(Iv,e)}function dl(e){return _r(c4,e)}const k4={name:"RoomsContent",components:{SvgIcon:kn,FormatMessage:Lr},directives:{clickOutside:ul},props:{currentUserId:{type:[String,Number],required:!0},room:{type:Object,required:!0},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},textMessages:{type:Object,required:!0},roomActions:{type:Array,required:!0}},emits:["room-action-handler"],data(){return{roomMenuOpened:null}},computed:{getLastMessage(){const e=this.typingUsers;if(e)return e;const t=this.room.lastMessage.content;if(this.room.users.length<=2)return t;const n=this.room.users.find(a=>a._id===this.room.lastMessage.senderId);return this.room.lastMessage.username?`${this.room.lastMessage.username} - ${t}`:!n||n._id===this.currentUserId?t:`${n.username} - ${t}`},userStatus(){if(!this.room.users||this.room.users.length!==2)return;const e=this.room.users.find(t=>t._id!==this.currentUserId);return e&&e.status?e.status.state:null},typingUsers(){return Vv(this.room,this.currentUserId,this.textMessages)},isMessageCheckmarkVisible(){return!this.typingUsers&&this.room.lastMessage&&!this.room.lastMessage.deleted&&this.room.lastMessage.senderId===this.currentUserId&&(this.room.lastMessage.saved||this.room.lastMessage.distributed||this.room.lastMessage.seen)},formattedDuration(){var e,t;const n=(t=(e=this.room.lastMessage)==null?void 0:e.files)==null?void 0:t[0];if(n){if(!n.duration)return`${n.name}.${n.extension}`;let a=Math.floor(n.duration);return(a-(a%=60))/60+(a>9?":":":0")+a}return""},isAudio(){return this.room.lastMessage.files?dl(this.room.lastMessage.files[0]):!1}},methods:{roomActionHandler(e){this.closeRoomMenu(),this.$emit("room-action-handler",{action:e,roomId:this.room.roomId})},closeRoomMenu(){this.roomMenuOpened=null}}},x4={class:"vac-room-container"},T4={class:"vac-name-container vac-text-ellipsis"},C4={class:"vac-title-container"},A4={class:"vac-room-name vac-text-ellipsis"},E4={key:1,class:"vac-text-date"},M4={key:0},R4={key:1,class:"vac-text-ellipsis"},I4={key:3,class:"vac-text-ellipsis"},B4={class:"vac-room-options-container"},L4={key:0,class:"vac-badge-counter vac-room-badge"},O4={key:0,class:"vac-menu-options"},F4={class:"vac-menu-list"},V4=["onClick"];function P4(e,t,n,a,s,i){const r=dt("svg-icon"),o=dt("format-message"),m=sl("click-outside");return oe(),Ce("div",x4,[qe(e.$slots,"room-list-item_"+n.room.roomId,{},()=>[qe(e.$slots,"room-list-avatar_"+n.room.roomId,{},()=>[n.room.avatar?(oe(),Ce("div",{key:0,class:"vac-avatar",style:Qt({"background-image":`url('${n.room.avatar}')`})},null,4)):Ue("",!0)]),Pe("div",T4,[Pe("div",C4,[i.userStatus?(oe(),Ce("div",{key:0,class:kt(["vac-state-circle",{"vac-state-online":i.userStatus==="online"}])},null,2)):Ue("",!0),qe(e.$slots,"room-list-info_"+n.room.roomId,{},()=>[Pe("div",A4,_t(n.room.roomName),1)]),n.room.lastMessage?(oe(),Ce("div",E4,_t(n.room.lastMessage.timestamp),1)):Ue("",!0)]),Pe("div",{class:kt(["vac-text-last",{"vac-message-new":n.room.lastMessage&&n.room.lastMessage.new&&!i.typingUsers}])},[i.isMessageCheckmarkVisible?(oe(),Ce("span",M4,[qe(e.$slots,"checkmark-icon_"+n.room.roomId,{},()=>[Xe(r,{name:n.room.lastMessage.distributed?"double-checkmark":"checkmark",param:n.room.lastMessage.seen?"seen":"",class:"vac-icon-check"},null,8,["name","param"])])])):Ue("",!0),n.room.lastMessage&&!n.room.lastMessage.deleted&&i.isAudio?(oe(),Ce("div",R4,[qe(e.$slots,"microphone-icon_"+n.room.roomId,{},()=>[Xe(r,{name:"microphone",class:"vac-icon-microphone"})]),is(" "+_t(i.formattedDuration),1)])):n.room.lastMessage?(oe(),Pt(o,{key:2,"message-id":n.room.lastMessage._id,"room-id":n.room.roomId,"room-list":!0,content:i.getLastMessage,deleted:!!n.room.lastMessage.deleted&&!i.typingUsers,users:n.room.users,"text-messages":n.textMessages,linkify:!1,"text-formatting":n.textFormatting,"link-options":n.linkOptions,"single-line":!0},$t({_:2},[St(e.$slots,(u,d)=>({name:d,fn:mt(l=>[qe(e.$slots,d,Nt(Dt(l)))])}))]),1032,["message-id","room-id","content","deleted","users","text-messages","text-formatting","link-options"])):Ue("",!0),!n.room.lastMessage&&i.typingUsers?(oe(),Ce("div",I4,_t(i.typingUsers),1)):Ue("",!0),Pe("div",B4,[n.room.unreadCount?(oe(),Ce("div",L4,_t(n.room.unreadCount),1)):Ue("",!0),qe(e.$slots,"room-list-options_"+n.room.roomId,{},()=>[n.roomActions.length?(oe(),Ce("div",{key:0,class:"vac-svg-button vac-list-room-options",onClick:t[0]||(t[0]=Da(u=>s.roomMenuOpened=n.room.roomId,["stop"]))},[qe(e.$slots,"room-list-options-icon_"+n.room.roomId,{},()=>[Xe(r,{name:"dropdown",param:"room"})])])):Ue("",!0),n.roomActions.length?(oe(),Pt(mn,{key:1,name:"vac-slide-left"},{default:mt(()=>[s.roomMenuOpened===n.room.roomId?ss((oe(),Ce("div",O4,[Pe("div",F4,[(oe(!0),Ce(At,null,St(n.roomActions,u=>(oe(),Ce("div",{key:u.name},[Pe("div",{class:"vac-menu-item",onClick:Da(d=>i.roomActionHandler(u),["stop"])},_t(u.title),9,V4)]))),128))])])),[[m,i.closeRoomMenu]]):Ue("",!0)]),_:1})):Ue("",!0)])])],2)])])])}var D4=Xt(k4,[["render",P4]]),jc=(e,t,n,a=!1)=>!n||n===""?e:e.filter(s=>a?Jr(s[t]).startsWith(Jr(n)):Jr(s[t]).includes(Jr(n)));function Jr(e){return e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")}const j4={name:"RoomsList",components:{Loader:ll,RoomsSearch:rb,RoomContent:D4},props:{currentUserId:{type:[String,Number],required:!0},textMessages:{type:Object,required:!0},showRoomsList:{type:Boolean,required:!0},showSearch:{type:Boolean,required:!0},showAddRoom:{type:Boolean,required:!0},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},isMobile:{type:Boolean,required:!0},rooms:{type:Array,required:!0},loadingRooms:{type:Boolean,required:!0},roomsLoaded:{type:Boolean,required:!0},room:{type:Object,required:!0},customSearchRoomEnabled:{type:[Boolean,String],default:!1},roomActions:{type:Array,required:!0},scrollDistance:{type:Number,required:!0}},emits:["add-room","search-room","room-action-handler","loading-more-rooms","fetch-room","fetch-more-rooms"],data(){return{filteredRooms:this.rooms||[],observer:null,showLoader:!0,loadingMoreRooms:!1,selectedRoomId:""}},watch:{rooms:{deep:!0,handler(e,t){this.filteredRooms=e,(e.length!==t.length||this.roomsLoaded)&&(this.loadingMoreRooms=!1)}},loadingRooms(e){e||setTimeout(()=>this.initIntersectionObserver())},loadingMoreRooms(e){this.$emit("loading-more-rooms",e)},roomsLoaded:{immediate:!0,handler(e){e&&(this.loadingMoreRooms=!1,this.loadingRooms||(this.showLoader=!1))}},room:{immediate:!0,handler(e){e&&!this.isMobile&&(this.selectedRoomId=e.roomId)}}},methods:{initIntersectionObserver(){this.observer&&(this.showLoader=!0,this.observer.disconnect());const e=this.$el.querySelector("#infinite-loader-rooms");if(e){const t={root:this.$el.querySelector("#rooms-list"),rootMargin:`${this.scrollDistance}px`,threshold:0};this.observer=new IntersectionObserver(n=>{n[0].isIntersecting&&this.loadMoreRooms()},t),this.observer.observe(e)}},searchRoom(e){this.customSearchRoomEnabled?this.$emit("search-room",e.target.value):this.filteredRooms=jc(this.rooms,"roomName",e.target.value)},openRoom(e){e.roomId===this.room.roomId&&!this.isMobile||(this.isMobile||(this.selectedRoomId=e.roomId),this.$emit("fetch-room",{room:e}))},loadMoreRooms(){if(!this.loadingMoreRooms){if(this.roomsLoaded){this.loadingMoreRooms=!1,this.showLoader=!1;return}this.$emit("fetch-more-rooms"),this.loadingMoreRooms=!0}}}},N4={key:0,class:"vac-rooms-empty"},$4={key:1,id:"rooms-list",class:"vac-room-list"},H4=["id","onClick"],z4={key:0,id:"infinite-loader-rooms"};function U4(e,t,n,a,s,i){const r=dt("rooms-search"),o=dt("loader"),m=dt("room-content");return ss((oe(),Ce("div",{class:kt(["vac-rooms-container",{"vac-rooms-container-full":n.isMobile,"vac-app-border-r":!n.isMobile}])},[qe(e.$slots,"rooms-header"),qe(e.$slots,"rooms-list-search",{},()=>[Xe(r,{rooms:n.rooms,"loading-rooms":n.loadingRooms,"text-messages":n.textMessages,"show-search":n.showSearch,"show-add-room":n.showAddRoom,onSearchRoom:i.searchRoom,onAddRoom:t[0]||(t[0]=u=>e.$emit("add-room"))},$t({_:2},[St(e.$slots,(u,d)=>({name:d,fn:mt(l=>[qe(e.$slots,d,Nt(Dt(l)))])}))]),1032,["rooms","loading-rooms","text-messages","show-search","show-add-room","onSearchRoom"])]),Xe(o,{show:n.loadingRooms,type:"rooms"},$t({_:2},[St(e.$slots,(u,d)=>({name:d,fn:mt(l=>[qe(e.$slots,d,Nt(Dt(l)))])}))]),1032,["show"]),!n.loadingRooms&&!n.rooms.length?(oe(),Ce("div",N4,[qe(e.$slots,"rooms-empty",{},()=>[is(_t(n.textMessages.ROOMS_EMPTY),1)])])):Ue("",!0),n.loadingRooms?Ue("",!0):(oe(),Ce("div",$4,[(oe(!0),Ce(At,null,St(s.filteredRooms,u=>(oe(),Ce("div",{id:u.roomId,key:u.roomId,class:kt(["vac-room-item",{"vac-room-selected":s.selectedRoomId===u.roomId}]),onClick:d=>i.openRoom(u)},[Xe(m,{"current-user-id":n.currentUserId,room:u,"text-formatting":n.textFormatting,"link-options":n.linkOptions,"text-messages":n.textMessages,"room-actions":n.roomActions,onRoomActionHandler:t[1]||(t[1]=d=>e.$emit("room-action-handler",d))},$t({_:2},[St(e.$slots,(d,l)=>({name:l,fn:mt(c=>[qe(e.$slots,l,Nt(Dt(c)))])}))]),1032,["current-user-id","room","text-formatting","link-options","text-messages","room-actions"])],10,H4))),128)),Xe(mn,{name:"vac-fade-message"},{default:mt(()=>[n.rooms.length&&!n.loadingRooms?(oe(),Ce("div",z4,[Xe(o,{show:s.showLoader,infinite:!0,type:"infinite-rooms"},$t({_:2},[St(e.$slots,(u,d)=>({name:d,fn:mt(l=>[qe(e.$slots,d,Nt(Dt(l)))])}))]),1032,["show"])])):Ue("",!0)]),_:3})]))],2)),[[ol,n.showRoomsList]])}var q4=Xt(j4,[["render",U4]]);const W4={name:"RoomHeader",components:{SvgIcon:kn},directives:{clickOutside:ul},props:{currentUserId:{type:[String,Number],required:!0},textMessages:{type:Object,required:!0},singleRoom:{type:Boolean,required:!0},showRoomsList:{type:Boolean,required:!0},isMobile:{type:Boolean,required:!0},roomInfoEnabled:{type:Boolean,required:!0},menuActions:{type:Array,required:!0},room:{type:Object,required:!0},messageSelectionEnabled:{type:Boolean,required:!0},messageSelectionActions:{type:Array,required:!0},selectedMessagesTotal:{type:Number,required:!0}},emits:["toggle-rooms-list","room-info","menu-action-handler","cancel-message-selection","message-selection-action-handler"],data(){return{menuOpened:!1,messageSelectionAnimationEnded:!0}},computed:{typingUsers(){return Vv(this.room,this.currentUserId,this.textMessages)},userStatus(){if(!this.room.users||this.room.users.length!==2)return;const e=this.room.users.find(n=>n._id!==this.currentUserId);if(!e?.status)return;let t="";return e.status.state==="online"?t=this.textMessages.IS_ONLINE:e.status.lastChanged&&(t=this.textMessages.LAST_SEEN+e.status.lastChanged),t}},watch:{messageSelectionEnabled(e){e?this.messageSelectionAnimationEnded=!1:setTimeout(()=>{this.messageSelectionAnimationEnded=!0},300)}},methods:{menuActionHandler(e){this.closeMenu(),this.$emit("menu-action-handler",e)},closeMenu(){this.menuOpened=!1},messageSelectionActionHandler(e){this.$emit("message-selection-action-handler",e)}}},Y4={class:"vac-room-header vac-app-border-b"},X4={class:"vac-room-wrapper"},G4={key:0,class:"vac-room-selection"},K4=["id"],Z4=["onClick"],Q4={class:"vac-selection-button-count"},J4={class:"vac-text-ellipsis"},e5={class:"vac-room-name vac-text-ellipsis"},t5={key:0,class:"vac-room-info vac-text-ellipsis"},n5={key:1,class:"vac-room-info vac-text-ellipsis"},a5={key:0,class:"vac-menu-options"},s5={class:"vac-menu-list"},i5=["onClick"];function r5(e,t,n,a,s,i){const r=dt("svg-icon"),o=sl("click-outside");return oe(),Ce("div",Y4,[qe(e.$slots,"room-header",{},()=>[Pe("div",X4,[Xe(mn,{name:"vac-slide-up"},{default:mt(()=>[n.messageSelectionEnabled?(oe(),Ce("div",G4,[(oe(!0),Ce(At,null,St(n.messageSelectionActions,m=>(oe(),Ce("div",{id:m.name,key:m.name},[Pe("div",{class:"vac-selection-button",onClick:u=>i.messageSelectionActionHandler(m)},[is(_t(m.title)+" ",1),Pe("span",Q4,_t(n.selectedMessagesTotal),1)],8,Z4)],8,K4))),128)),Pe("div",{class:"vac-selection-cancel vac-item-clickable",onClick:t[0]||(t[0]=m=>e.$emit("cancel-message-selection"))},_t(n.textMessages.CANCEL_SELECT_MESSAGE),1)])):Ue("",!0)]),_:1}),!n.messageSelectionEnabled&&s.messageSelectionAnimationEnded?(oe(),Ce(At,{key:0},[n.singleRoom?Ue("",!0):(oe(),Ce("div",{key:0,class:kt(["vac-svg-button vac-toggle-button",{"vac-rotate-icon-init":!n.isMobile,"vac-rotate-icon":!n.showRoomsList&&!n.isMobile}]),onClick:t[1]||(t[1]=m=>e.$emit("toggle-rooms-list"))},[qe(e.$slots,"toggle-icon",{},()=>[Xe(r,{name:"toggle"})])],2)),Pe("div",{class:kt(["vac-info-wrapper",{"vac-item-clickable":n.roomInfoEnabled}]),onClick:t[2]||(t[2]=m=>e.$emit("room-info"))},[qe(e.$slots,"room-header-avatar",{},()=>[n.room.avatar?(oe(),Ce("div",{key:0,class:"vac-avatar",style:Qt({"background-image":`url('${n.room.avatar}')`})},null,4)):Ue("",!0)]),qe(e.$slots,"room-header-info",{},()=>[Pe("div",J4,[Pe("div",e5,_t(n.room.roomName),1),i.typingUsers?(oe(),Ce("div",t5,_t(i.typingUsers),1)):(oe(),Ce("div",n5,_t(i.userStatus),1))])])],2),n.room.roomId?qe(e.$slots,"room-options",{key:1},()=>[n.menuActions.length?(oe(),Ce("div",{key:0,class:"vac-svg-button vac-room-options",onClick:t[3]||(t[3]=m=>s.menuOpened=!s.menuOpened)},[qe(e.$slots,"menu-icon",{},()=>[Xe(r,{name:"menu"})])])):Ue("",!0),n.menuActions.length?(oe(),Pt(mn,{key:1,name:"vac-slide-left"},{default:mt(()=>[s.menuOpened?ss((oe(),Ce("div",a5,[Pe("div",s5,[(oe(!0),Ce(At,null,St(n.menuActions,m=>(oe(),Ce("div",{key:m.name},[Pe("div",{class:"vac-menu-item",onClick:u=>i.menuActionHandler(m)},_t(m.title),9,i5)]))),128))])])),[[o,i.closeMenu]]):Ue("",!0)]),_:1})):Ue("",!0)]):Ue("",!0)],64)):Ue("",!0)])])])}var o5=Xt(W4,[["render",r5]]);function eo(e){if(typeof e!="string"||!e)throw new Error("expected a non-empty string, got: "+e)}function Yl(e){if(typeof e!="number")throw new Error("expected a number, got: "+e)}const l5=1,c5=1,li="emoji",Mi="keyvalue",zu="favorites",u5="tokens",Pv="tokens",d5="unicode",Dv="count",m5="group",f5="order",jv="group-order",Nc="eTag",Oo="url",A1="skinTone",Fi="readonly",Uu="readwrite",Nv="skinUnicodes",v5="skinUnicodes",h5="https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json",g5="en";function p5(e,t){const n=new Set,a=[];for(const s of e){const i=t(s);n.has(i)||(n.add(i),a.push(s))}return a}function E1(e){return p5(e,t=>t.unicode)}function _5(e){function t(n,a,s){const i=a?e.createObjectStore(n,{keyPath:a}):e.createObjectStore(n);if(s)for(const[r,[o,m]]of Object.entries(s))i.createIndex(r,o,{multiEntry:m});return i}t(Mi),t(li,d5,{[Pv]:[u5,!0],[jv]:[[m5,f5]],[Nv]:[v5,!0]}),t(zu,void 0,{[Dv]:[""]})}const $c={},yo={},Fo={};function $v(e,t,n){n.onerror=()=>t(n.error),n.onblocked=()=>t(new Error("IDB blocked")),n.onsuccess=()=>e(n.result)}async function b5(e){const t=await new Promise((n,a)=>{const s=indexedDB.open(e,l5);$c[e]=s,s.onupgradeneeded=i=>{i.oldVersion<c5&&_5(s.result)},$v(n,a,s)});return t.onclose=()=>qu(e),t}function y5(e){return yo[e]||(yo[e]=b5(e)),yo[e]}function fs(e,t,n,a){return new Promise((s,i)=>{const r=e.transaction(t,n,{durability:"relaxed"}),o=typeof t=="string"?r.objectStore(t):t.map(u=>r.objectStore(u));let m;a(o,r,u=>{m=u}),r.oncomplete=()=>s(m),r.onerror=()=>i(r.error)})}function qu(e){const t=$c[e],n=t&&t.result;if(n){n.close();const a=Fo[e];if(a)for(const s of a)s()}delete $c[e],delete yo[e],delete Fo[e]}function w5(e){return new Promise((t,n)=>{qu(e);const a=indexedDB.deleteDatabase(e);$v(t,n,a)})}function S5(e,t){let n=Fo[e];n||(n=Fo[e]=[]),n.push(t)}const k5=new Set([":D","XD",":'D","O:)",":X",":P",";P","XP",":L",":Z",":j","8D","XO","8)",":B",":O",":S",":'o","Dx","X(","D:",":C",">0)",":3","</3","<3","\\M/",":E","8#"]);function Ti(e){return e.split(/[\s_]+/).map(t=>!t.match(/\w/)||k5.has(t)?t.toLowerCase():t.replace(/[)(:,]/g,"").replace(/’/g,"'").toLowerCase()).filter(Boolean)}const x5=2;function Hv(e){return e.filter(Boolean).map(t=>t.toLowerCase()).filter(t=>t.length>=x5)}function T5(e){return e.map(({annotation:n,emoticon:a,group:s,order:i,shortcodes:r,skins:o,tags:m,emoji:u,version:d})=>{const l=[...new Set(Hv([...(r||[]).map(Ti).flat(),...m.map(Ti).flat(),...Ti(n),a]))].sort(),c={annotation:n,group:s,order:i,tags:m,tokens:l,unicode:u,version:d};if(a&&(c.emoticon=a),r&&(c.shortcodes=r),o){c.skinTones=[],c.skinUnicodes=[],c.skinVersions=[];for(const{tone:v,emoji:h,version:A}of o)c.skinTones.push(v),c.skinUnicodes.push(h),c.skinVersions.push(A)}return c})}function zv(e,t,n,a){e[t](n).onsuccess=s=>a&&a(s.target.result)}function ii(e,t,n){zv(e,"get",t,n)}function Uv(e,t,n){zv(e,"getAll",t,n)}function Wu(e){e.commit&&e.commit()}function C5(e,t){let n=e[0];for(let a=1;a<e.length;a++){const s=e[a];t(n)>t(s)&&(n=s)}return n}function qv(e,t){const n=C5(e,s=>s.length),a=[];for(const s of n)e.some(i=>i.findIndex(r=>t(r)===t(s))===-1)||a.push(s);return a}async function A5(e){return!await Yu(e,Mi,Oo)}async function E5(e,t,n){const[a,s]=await Promise.all([Nc,Oo].map(i=>Yu(e,Mi,i)));return a===n&&s===t}async function M5(e,t){return fs(e,li,Fi,(a,s,i)=>{let r;const o=()=>{a.getAll(r&&IDBKeyRange.lowerBound(r,!0),50).onsuccess=m=>{const u=m.target.result;for(const d of u)if(r=d.unicode,t(d))return i(d);if(u.length<50)return i();o()}};o()})}async function Wv(e,t,n,a){try{const s=T5(t);await fs(e,[li,Mi],Uu,([i,r],o)=>{let m,u,d=0;function l(){++d===2&&c()}function c(){if(!(m===a&&u===n)){i.clear();for(const v of s)i.put(v);r.put(a,Nc),r.put(n,Oo),Wu(o)}}ii(r,Nc,v=>{m=v,l()}),ii(r,Oo,v=>{u=v,l()})})}finally{}}async function R5(e,t){return fs(e,li,Fi,(n,a,s)=>{const i=IDBKeyRange.bound([t,0],[t+1,0],!1,!0);Uv(n.index(jv),i,s)})}async function Yv(e,t){const n=Hv(Ti(t));return n.length?fs(e,li,Fi,(a,s,i)=>{const r=[],o=()=>{r.length===n.length&&m()},m=()=>{const u=qv(r,d=>d.unicode);i(u.sort((d,l)=>d.order<l.order?-1:1))};for(let u=0;u<n.length;u++){const d=n[u],l=u===n.length-1?IDBKeyRange.bound(d,d+"￿",!1,!0):IDBKeyRange.only(d);Uv(a.index(Pv),l,c=>{r.push(c),o()})}}):[]}async function I5(e,t){const n=await Yv(e,t);return n.length?n.filter(a=>(a.shortcodes||[]).map(i=>i.toLowerCase()).includes(t.toLowerCase()))[0]||null:await M5(e,s=>(s.shortcodes||[]).includes(t.toLowerCase()))||null}async function B5(e,t){return fs(e,li,Fi,(n,a,s)=>ii(n,t,i=>{if(i)return s(i);ii(n.index(Nv),t,r=>s(r||null))}))}function Yu(e,t,n){return fs(e,t,Fi,(a,s,i)=>ii(a,n,i))}function L5(e,t,n,a){return fs(e,t,Uu,(s,i)=>{s.put(a,n),Wu(i)})}function O5(e,t){return fs(e,zu,Uu,(n,a)=>ii(n,t,s=>{n.put((s||0)+1,t),Wu(a)}))}function F5(e,t,n){return n===0?[]:fs(e,[zu,li],Fi,([a,s],i,r)=>{const o=[];a.index(Dv).openCursor(void 0,"prev").onsuccess=m=>{const u=m.target.result;if(!u)return r(o);function d(v){if(o.push(v),o.length===n)return r(o);u.continue()}const l=u.primaryKey,c=t.byName(l);if(c)return d(c);ii(s,l,v=>{if(v)return d(v);u.continue()})}})}const to="";function V5(e,t){const n=new Map;for(const s of e){const i=t(s);for(const r of i){let o=n;for(let u=0;u<r.length;u++){const d=r.charAt(u);let l=o.get(d);l||(l=new Map,o.set(d,l)),o=l}let m=o.get(to);m||(m=[],o.set(to,m)),m.push(s)}}return(s,i)=>{let r=n;for(let u=0;u<s.length;u++){const d=s.charAt(u),l=r.get(d);if(l)r=l;else return[]}if(i)return r.get(to)||[];const o=[],m=[r];for(;m.length;){const d=[...m.shift().entries()].sort((l,c)=>l[0]<c[0]?-1:1);for(const[l,c]of d)l===to?o.push(...c):m.push(c)}return o}}const P5=["name","url"];function D5(e){const t=e&&Array.isArray(e),n=t&&e.length&&(!e[0]||P5.some(a=>!(a in e[0])));if(!t||n)throw new Error("Custom emojis are in the wrong format")}function M1(e){D5(e);const t=(c,v)=>c.name.toLowerCase()<v.name.toLowerCase()?-1:1,n=e.sort(t),s=V5(e,c=>[...new Set((c.shortcodes||[]).map(v=>Ti(v)).flat())]),i=c=>s(c,!0),r=c=>s(c,!1),o=c=>{const v=Ti(c),h=v.map((A,T)=>(T<v.length-1?i:r)(A));return qv(h,A=>A.name).sort(t)},m=new Map,u=new Map;for(const c of e){u.set(c.name.toLowerCase(),c);for(const v of c.shortcodes||[])m.set(v.toLowerCase(),c)}return{all:n,search:o,byShortcode:c=>m.get(c.toLowerCase()),byName:c=>u.get(c.toLowerCase())}}function qi(e){if(!e)return e;if(delete e.tokens,e.skinTones){const t=e.skinTones.length;e.skins=Array(t);for(let n=0;n<t;n++)e.skins[n]={tone:e.skinTones[n],unicode:e.skinUnicodes[n],version:e.skinVersions[n]};delete e.skinTones,delete e.skinUnicodes,delete e.skinVersions}return e}function Xv(e){e||console.warn("emoji-picker-element is more efficient if the dataSource server exposes an ETag header.")}const j5=["annotation","emoji","group","order","tags","version"];function N5(e){if(!e||!Array.isArray(e)||!e[0]||typeof e[0]!="object"||j5.some(t=>!(t in e[0])))throw new Error("Emoji data is in the wrong format")}function Gv(e,t){if(Math.floor(e.status/100)!==2)throw new Error("Failed to fetch: "+t+":  "+e.status)}async function $5(e){const t=await fetch(e,{method:"HEAD"});Gv(t,e);const n=t.headers.get("etag");return Xv(n),n}async function Hc(e){const t=await fetch(e);Gv(t,e);const n=t.headers.get("etag");Xv(n);const a=await t.json();return N5(a),[n,a]}function H5(e){for(var t="",n=new Uint8Array(e),a=n.byteLength,s=-1;++s<a;)t+=String.fromCharCode(n[s]);return t}function z5(e){for(var t=e.length,n=new ArrayBuffer(t),a=new Uint8Array(n),s=-1;++s<t;)a[s]=e.charCodeAt(s);return n}async function Kv(e){const t=JSON.stringify(e),n=z5(t),a=await crypto.subtle.digest("SHA-1",n),s=H5(a);return btoa(s)}async function U5(e,t){let n,a=await $5(t);if(!a){const s=await Hc(t);a=s[0],n=s[1],a||(a=await Kv(n))}await E5(e,t,a)||(n||(n=(await Hc(t))[1]),await Wv(e,n,t,a))}async function q5(e,t){let[n,a]=await Hc(t);n||(n=await Kv(a)),await Wv(e,a,t,n)}class Zv{constructor({dataSource:t=h5,locale:n=g5,customEmoji:a=[]}={}){this.dataSource=t,this.locale=n,this._dbName=`emoji-picker-element-${this.locale}`,this._db=void 0,this._lazyUpdate=void 0,this._custom=M1(a),this._clear=this._clear.bind(this),this._ready=this._init()}async _init(){const t=this._db=await y5(this._dbName);S5(this._dbName,this._clear);const n=this.dataSource;await A5(t)?await q5(t,n):this._lazyUpdate=U5(t,n)}async ready(){const t=async()=>(this._ready||(this._ready=this._init()),this._ready);await t(),this._db||await t()}async getEmojiByGroup(t){return Yl(t),await this.ready(),E1(await R5(this._db,t)).map(qi)}async getEmojiBySearchQuery(t){eo(t),await this.ready();const n=this._custom.search(t),a=E1(await Yv(this._db,t)).map(qi);return[...n,...a]}async getEmojiByShortcode(t){eo(t),await this.ready();const n=this._custom.byShortcode(t);return n||qi(await I5(this._db,t))}async getEmojiByUnicodeOrName(t){eo(t),await this.ready();const n=this._custom.byName(t);return n||qi(await B5(this._db,t))}async getPreferredSkinTone(){return await this.ready(),await Yu(this._db,Mi,A1)||0}async setPreferredSkinTone(t){return Yl(t),await this.ready(),L5(this._db,Mi,A1,t)}async incrementFavoriteEmojiCount(t){return eo(t),await this.ready(),O5(this._db,t)}async getTopFavoriteEmoji(t){return Yl(t),await this.ready(),(await F5(this._db,this._custom,t)).map(qi)}set customEmoji(t){this._custom=M1(t)}get customEmoji(){return this._custom.all}async _shutdown(){await this.ready();try{await this._lazyUpdate}catch{}}_clear(){this._db=this._ready=this._lazyUpdate=void 0}async close(){await this._shutdown(),await qu(this._dbName)}async delete(){await this._shutdown(),await w5(this._dbName)}}function br(){}function Qv(e){return e()}function R1(){return Object.create(null)}function Fr(e){e.forEach(Qv)}function Jv(e){return typeof e=="function"}function W5(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let no;function Vo(e,t){return no||(no=document.createElement("a")),no.href=t,e===no.href}function Y5(e){return Object.keys(e).length===0}function X5(e){return e&&Jv(e.destroy)?e.destroy:br}function zt(e,t){e.appendChild(t)}function wa(e,t,n){e.insertBefore(t,n||null)}function Sa(e){e.parentNode.removeChild(e)}function jt(e){return document.createElement(e)}function Va(e){return document.createTextNode(e)}function va(e,t,n,a){return e.addEventListener(t,n,a),()=>e.removeEventListener(t,n,a)}function pe(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Pa(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function I1(e,t){e.value=t??""}function _s(e,t,n,a){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,"")}let Xu;function lr(e){Xu=e}const Ji=[],yi=[],wo=[],B1=[],e0=Promise.resolve();let zc=!1;function t0(){zc||(zc=!0,e0.then(n0))}function G5(){return t0(),e0}function Uc(e){wo.push(e)}const Xl=new Set;let ao=0;function n0(){const e=Xu;do{for(;ao<Ji.length;){const t=Ji[ao];ao++,lr(t),K5(t.$$)}for(lr(null),Ji.length=0,ao=0;yi.length;)yi.pop()();for(let t=0;t<wo.length;t+=1){const n=wo[t];Xl.has(n)||(Xl.add(n),n())}wo.length=0}while(Ji.length);for(;B1.length;)B1.pop()();zc=!1,Xl.clear(),lr(e)}function K5(e){if(e.fragment!==null){e.update(),Fr(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Uc)}}const Z5=new Set;function Q5(e,t){e&&e.i&&(Z5.delete(e),e.i(t))}const J5=typeof window<"u"?window:globalThis;function er(e,t){e.d(1),t.delete(e.key)}function tr(e,t,n,a,s,i,r,o,m,u,d,l){let c=e.length,v=i.length,h=c;const A={};for(;h--;)A[e[h].key]=h;const T=[],k=new Map,p=new Map;for(h=v;h--;){const B=l(s,i,h),R=n(B);let C=r.get(R);C?C.p(B,t):(C=u(R,B),C.c()),k.set(R,T[h]=C),R in A&&p.set(R,Math.abs(h-A[R]))}const L=new Set,O=new Set;function g(B){Q5(B,1),B.m(o,d),r.set(B.key,B),d=B.first,v--}for(;c&&v;){const B=T[v-1],R=e[c-1],C=B.key,I=R.key;B===R?(d=B.first,c--,v--):k.has(I)?!r.has(C)||L.has(C)?g(B):O.has(I)?c--:p.get(C)>p.get(I)?(O.add(C),g(B)):(L.add(I),c--):(m(R,r),c--)}for(;c--;){const B=e[c];k.has(B.key)||m(B,r)}for(;v;)g(T[v-1]);return T}function e9(e,t,n,a){const{fragment:s,on_mount:i,on_destroy:r,after_update:o}=e.$$;s&&s.m(t,n),Uc(()=>{const m=i.map(Qv).filter(Jv);r?r.push(...m):Fr(m),e.$$.on_mount=[]}),o.forEach(Uc)}function t9(e,t){const n=e.$$;n.fragment!==null&&(Fr(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function n9(e,t){e.$$.dirty[0]===-1&&(Ji.push(e),t0(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function a9(e,t,n,a,s,i,r,o=[-1]){const m=Xu;lr(e);const u=e.$$={fragment:null,ctx:null,props:i,update:br,not_equal:s,bound:R1(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(m?m.$$.context:[]),callbacks:R1(),dirty:o,skip_bound:!1,root:t.target||m.$$.root};let d=!1;u.ctx=n?n(e,t.props||{},(l,c,...v)=>{const h=v.length?v[0]:c;return u.ctx&&s(u.ctx[l],u.ctx[l]=h)&&(!u.skip_bound&&u.bound[l]&&u.bound[l](h),d&&n9(e,l)),c}):[],u.update(),d=!0,Fr(u.before_update),u.fragment=a?a(u.ctx):!1,t.target&&(u.fragment&&u.fragment.c(),e9(e,t.target,void 0),n0()),lr(m)}class s9{$destroy(){t9(this,1),this.$destroy=br}$on(t,n){const a=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return a.push(n),()=>{const s=a.indexOf(n);s!==-1&&a.splice(s,1)}}$set(t){this.$$set&&!Y5(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const a0=[[-1,"✨","custom"],[0,"😀","smileys-emotion"],[1,"👋","people-body"],[3,"🐱","animals-nature"],[4,"🍎","food-drink"],[5,"🏠️","travel-places"],[6,"⚽","activities"],[7,"📝","objects"],[8,"⛔️","symbols"],[9,"🏁","flags"]].map(([e,t,n])=>({id:e,emoji:t,name:n})),so=a0.slice(1),i9=a0[0],r9=2,L1=6,s0=typeof requestIdleCallback=="function"?requestIdleCallback:setTimeout;function O1(e){return e.unicode.includes("‍")}const o9={"🫠":14,"🥲":13.1,"🥻":12.1,"🥰":11,"🤩":5,"👱‍♀️":4,"🤣":3,"👁️‍🗨️":2,"😀":1,"😐️":.7,"😃":.6},l9=1e3,c9="🖐️",u9=8,d9=["😊","😒","♥️","👍️","😍","😂","😭","☺️","😔","😩","😏","💕","🙌","😘"],i0='"Twemoji Mozilla","Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji","EmojiOne Color","Android Emoji",sans-serif',m9=(e,t)=>e<t?-1:e>t?1:0,F1=(e,t)=>{const n=document.createElement("canvas");n.width=n.height=1;const a=n.getContext("2d");return a.textBaseline="top",a.font=`100px ${i0}`,a.fillStyle=t,a.scale(.01,.01),a.fillText(e,0,0),a.getImageData(0,0,1,1).data},f9=(e,t)=>{const n=[...e].join(","),a=[...t].join(",");return n===a&&!n.startsWith("0,0,0,")};function v9(e){const t=F1(e,"#000"),n=F1(e,"#fff");return t&&n&&f9(t,n)}function h9(){const e=Object.entries(o9);try{for(const[t,n]of e)if(v9(t))return n}catch{}finally{}return e[0][1]}const Gl=new Promise(e=>s0(()=>e(h9()))),qc=new Map,g9="️",p9="\uD83C",_9="‍",b9=127995,y9=57339;function w9(e,t){if(t===0)return e;const n=e.indexOf(_9);return n!==-1?e.substring(0,n)+String.fromCodePoint(b9+t-1)+e.substring(n):(e.endsWith(g9)&&(e=e.substring(0,e.length-1)),e+p9+String.fromCodePoint(y9+t-1))}function bs(e){e.preventDefault(),e.stopPropagation()}function Kl(e,t,n){return t+=e?-1:1,t<0?t=n.length-1:t>=n.length&&(t=0),t}function r0(e,t){const n=new Set,a=[];for(const s of e){const i=t(s);n.has(i)||(n.add(i),a.push(s))}return a}function S9(e,t){const n=a=>{const s={};for(const i of a)typeof i.tone=="number"&&i.version<=t&&(s[i.tone]=i.unicode);return s};return e.map(({unicode:a,skins:s,shortcodes:i,url:r,name:o,category:m})=>({unicode:a,name:o,shortcodes:i,url:r,category:m,id:a||o,skins:s&&n(s),title:(i||[]).join(", ")}))}const So=requestAnimationFrame;let k9=typeof ResizeObserver=="function";function x9(e,t){let n;return k9?(n=new ResizeObserver(a=>t(a[0].contentRect.width)),n.observe(e)):So(()=>t(e.getBoundingClientRect().width)),{destroy(){n&&n.disconnect()}}}function V1(e){{const t=document.createRange();return t.selectNode(e.firstChild),t.getBoundingClientRect().width}}let Zl;function T9(e,t,n){for(const a of e){const s=n(a),i=V1(s);typeof Zl>"u"&&(Zl=V1(t));const r=i/1.8<Zl;qc.set(a.unicode,r)}}function C9(e){return r0(e,t=>t)}const{Map:nr}=J5;function P1(e,t,n){const a=e.slice();return a[63]=t[n],a[65]=n,a}function D1(e,t,n){const a=e.slice();return a[66]=t[n],a[65]=n,a}function j1(e,t,n){const a=e.slice();return a[63]=t[n],a[65]=n,a}function N1(e,t,n){const a=e.slice();return a[69]=t[n],a}function $1(e,t,n){const a=e.slice();return a[72]=t[n],a[65]=n,a}function H1(e,t){let n,a=t[72]+"",s,i,r,o,m,u;return{key:e,first:null,c(){n=jt("div"),s=Va(a),pe(n,"id",i="skintone-"+t[65]),pe(n,"class",r="emoji hide-focus "+(t[65]===t[20]?"active":"")),pe(n,"aria-selected",o=t[65]===t[20]),pe(n,"role","option"),pe(n,"title",m=t[0].skinTones[t[65]]),pe(n,"tabindex","-1"),pe(n,"aria-label",u=t[0].skinTones[t[65]]),this.first=n},m(d,l){wa(d,n,l),zt(n,s)},p(d,l){t=d,l[0]&512&&a!==(a=t[72]+"")&&Pa(s,a),l[0]&512&&i!==(i="skintone-"+t[65])&&pe(n,"id",i),l[0]&1049088&&r!==(r="emoji hide-focus "+(t[65]===t[20]?"active":""))&&pe(n,"class",r),l[0]&1049088&&o!==(o=t[65]===t[20])&&pe(n,"aria-selected",o),l[0]&513&&m!==(m=t[0].skinTones[t[65]])&&pe(n,"title",m),l[0]&513&&u!==(u=t[0].skinTones[t[65]])&&pe(n,"aria-label",u)},d(d){d&&Sa(n)}}}function z1(e,t){let n,a,s=t[69].emoji+"",i,r,o,m,u,d,l;function c(){return t[49](t[69])}return{key:e,first:null,c(){n=jt("button"),a=jt("div"),i=Va(s),pe(a,"class","nav-emoji emoji"),pe(n,"role","tab"),pe(n,"class","nav-button"),pe(n,"aria-controls",r="tab-"+t[69].id),pe(n,"aria-label",o=t[0].categories[t[69].name]),pe(n,"aria-selected",m=!t[4]&&t[13].id===t[69].id),pe(n,"title",u=t[0].categories[t[69].name]),this.first=n},m(v,h){wa(v,n,h),zt(n,a),zt(a,i),d||(l=va(n,"click",c),d=!0)},p(v,h){t=v,h[0]&4096&&s!==(s=t[69].emoji+"")&&Pa(i,s),h[0]&4096&&r!==(r="tab-"+t[69].id)&&pe(n,"aria-controls",r),h[0]&4097&&o!==(o=t[0].categories[t[69].name])&&pe(n,"aria-label",o),h[0]&12304&&m!==(m=!t[4]&&t[13].id===t[69].id)&&pe(n,"aria-selected",m),h[0]&4097&&u!==(u=t[0].categories[t[69].name])&&pe(n,"title",u)},d(v){v&&Sa(n),d=!1,l()}}}function A9(e){let t,n;return{c(){t=jt("img"),pe(t,"class","custom-emoji"),Vo(t.src,n=e[63].url)||pe(t,"src",n),pe(t,"alt",""),pe(t,"loading","lazy")},m(a,s){wa(a,t,s)},p(a,s){s[0]&32768&&!Vo(t.src,n=a[63].url)&&pe(t,"src",n)},d(a){a&&Sa(t)}}}function E9(e){let t=e[27](e[63],e[8])+"",n;return{c(){n=Va(t)},m(a,s){wa(a,n,s)},p(a,s){s[0]&33024&&t!==(t=a[27](a[63],a[8])+"")&&Pa(n,t)},d(a){a&&Sa(n)}}}function U1(e,t){let n,a,s,i,r,o,m;function u(c,v){return c[63].unicode?E9:A9}let d=u(t),l=d(t);return{key:e,first:null,c(){n=jt("button"),l.c(),pe(n,"role",a=t[4]?"option":"menuitem"),pe(n,"aria-selected",s=t[4]?t[65]==t[5]:""),pe(n,"aria-label",i=t[28](t[63],t[8])),pe(n,"title",r=t[63].title),pe(n,"class",o="emoji "+(t[4]&&t[65]===t[5]?"active":"")),pe(n,"id",m="emo-"+t[63].id),this.first=n},m(c,v){wa(c,n,v),l.m(n,null)},p(c,v){t=c,d===(d=u(t))&&l?l.p(t,v):(l.d(1),l=d(t),l&&(l.c(),l.m(n,null))),v[0]&16&&a!==(a=t[4]?"option":"menuitem")&&pe(n,"role",a),v[0]&32816&&s!==(s=t[4]?t[65]==t[5]:"")&&pe(n,"aria-selected",s),v[0]&33024&&i!==(i=t[28](t[63],t[8]))&&pe(n,"aria-label",i),v[0]&32768&&r!==(r=t[63].title)&&pe(n,"title",r),v[0]&32816&&o!==(o="emoji "+(t[4]&&t[65]===t[5]?"active":""))&&pe(n,"class",o),v[0]&32768&&m!==(m="emo-"+t[63].id)&&pe(n,"id",m)},d(c){c&&Sa(n),l.d()}}}function q1(e,t){let n,a=(t[4]?t[0].searchResultsLabel:t[66].category?t[66].category:t[15].length>1?t[0].categories.custom:t[0].categories[t[13].name])+"",s,i,r,o,m=[],u=new nr,d,l,c,v=t[66].emojis;const h=A=>A[63].id;for(let A=0;A<v.length;A+=1){let T=j1(t,v,A),k=h(T);u.set(k,m[A]=U1(k,T))}return{key:e,first:null,c(){n=jt("div"),s=Va(a),o=jt("div");for(let A=0;A<m.length;A+=1)m[A].c();pe(n,"id",i="menu-label-"+t[65]),pe(n,"class",r="category "+(t[15].length===1&&t[15][0].category===""?"gone":"")),pe(n,"aria-hidden","true"),pe(o,"class","emoji-menu"),pe(o,"role",d=t[4]?"listbox":"menu"),pe(o,"aria-labelledby",l="menu-label-"+t[65]),pe(o,"id",c=t[4]?"search-results":""),this.first=n},m(A,T){wa(A,n,T),zt(n,s),wa(A,o,T);for(let k=0;k<m.length;k+=1)m[k].m(o,null)},p(A,T){t=A,T[0]&40977&&a!==(a=(t[4]?t[0].searchResultsLabel:t[66].category?t[66].category:t[15].length>1?t[0].categories.custom:t[0].categories[t[13].name])+"")&&Pa(s,a),T[0]&32768&&i!==(i="menu-label-"+t[65])&&pe(n,"id",i),T[0]&32768&&r!==(r="category "+(t[15].length===1&&t[15][0].category===""?"gone":""))&&pe(n,"class",r),T[0]&402686256&&(v=t[66].emojis,m=tr(m,T,h,1,t,v,u,o,er,U1,null,j1)),T[0]&16&&d!==(d=t[4]?"listbox":"menu")&&pe(o,"role",d),T[0]&32768&&l!==(l="menu-label-"+t[65])&&pe(o,"aria-labelledby",l),T[0]&16&&c!==(c=t[4]?"search-results":"")&&pe(o,"id",c)},d(A){A&&Sa(n),A&&Sa(o);for(let T=0;T<m.length;T+=1)m[T].d()}}}function M9(e){let t,n;return{c(){t=jt("img"),pe(t,"class","custom-emoji"),Vo(t.src,n=e[63].url)||pe(t,"src",n),pe(t,"alt",""),pe(t,"loading","lazy")},m(a,s){wa(a,t,s)},p(a,s){s[0]&1024&&!Vo(t.src,n=a[63].url)&&pe(t,"src",n)},d(a){a&&Sa(t)}}}function R9(e){let t=e[27](e[63],e[8])+"",n;return{c(){n=Va(t)},m(a,s){wa(a,n,s)},p(a,s){s[0]&1280&&t!==(t=a[27](a[63],a[8])+"")&&Pa(n,t)},d(a){a&&Sa(n)}}}function W1(e,t){let n,a,s,i;function r(u,d){return u[63].unicode?R9:M9}let o=r(t),m=o(t);return{key:e,first:null,c(){n=jt("button"),m.c(),pe(n,"role","menuitem"),pe(n,"aria-label",a=t[28](t[63],t[8])),pe(n,"title",s=t[63].title),pe(n,"class","emoji"),pe(n,"id",i="fav-"+t[63].id),this.first=n},m(u,d){wa(u,n,d),m.m(n,null)},p(u,d){t=u,o===(o=r(t))&&m?m.p(t,d):(m.d(1),m=o(t),m&&(m.c(),m.m(n,null))),d[0]&1280&&a!==(a=t[28](t[63],t[8]))&&pe(n,"aria-label",a),d[0]&1024&&s!==(s=t[63].title)&&pe(n,"title",s),d[0]&1024&&i!==(i="fav-"+t[63].id)&&pe(n,"id",i)},d(u){u&&Sa(n),m.d()}}}function I9(e){let t,n,a,s,i,r,o,m,u,d=e[0].searchLabel+"",l,c,v=e[0].searchDescription+"",h,A,T,k,p,L,O,g=e[0].skinToneDescription+"",B,R,C=[],I=new nr,b,y,_,w,E,M=[],V=new nr,q,$,U,f,x,H,F,se,me=[],X=new nr,G,ue,be,ke,je,Y=[],Z=new nr,de,xe,Te,Be,$e,Fe,Ve=e[9];const Re=z=>z[72];for(let z=0;z<Ve.length;z+=1){let Ae=$1(e,Ve,z),le=Re(Ae);I.set(le,C[z]=H1(le,Ae))}let Qe=e[12];const Ke=z=>z[69].id;for(let z=0;z<Qe.length;z+=1){let Ae=N1(e,Qe,z),le=Ke(Ae);V.set(le,M[z]=z1(le,Ae))}let Ge=e[15];const tt=z=>z[66].category;for(let z=0;z<Ge.length;z+=1){let Ae=D1(e,Ge,z),le=tt(Ae);X.set(le,me[z]=q1(le,Ae))}let st=e[10];const ge=z=>z[63].id;for(let z=0;z<st.length;z+=1){let Ae=P1(e,st,z),le=ge(Ae);Z.set(le,Y[z]=W1(le,Ae))}return{c(){t=jt("section"),n=jt("div"),a=jt("div"),s=jt("div"),i=jt("input"),u=jt("label"),l=Va(d),c=jt("span"),h=Va(v),A=jt("div"),T=jt("button"),k=Va(e[21]),O=jt("span"),B=Va(g),R=jt("div");for(let z=0;z<C.length;z+=1)C[z].c();E=jt("div");for(let z=0;z<M.length;z+=1)M[z].c();$=jt("div"),U=jt("div"),f=jt("div"),x=Va(e[18]),F=jt("div"),se=jt("div");for(let z=0;z<me.length;z+=1)me[z].c();je=jt("div");for(let z=0;z<Y.length;z+=1)Y[z].c();Te=jt("button"),Te.textContent="😀",pe(n,"class","pad-top"),pe(i,"id","search"),pe(i,"class","search"),pe(i,"type","search"),pe(i,"role","combobox"),pe(i,"enterkeyhint","search"),pe(i,"placeholder",r=e[0].searchLabel),pe(i,"autocapitalize","none"),pe(i,"autocomplete","off"),pe(i,"spellcheck","true"),pe(i,"aria-expanded",o=!!(e[4]&&e[1].length)),pe(i,"aria-controls","search-results"),pe(i,"aria-describedby","search-description"),pe(i,"aria-autocomplete","list"),pe(i,"aria-activedescendant",m=e[26]?`emo-${e[26]}`:""),pe(u,"class","sr-only"),pe(u,"for","search"),pe(c,"id","search-description"),pe(c,"class","sr-only"),pe(s,"class","search-wrapper"),pe(T,"id","skintone-button"),pe(T,"class",p="emoji "+(e[6]?"hide-focus":"")),pe(T,"aria-label",e[23]),pe(T,"title",e[23]),pe(T,"aria-describedby","skintone-description"),pe(T,"aria-haspopup","listbox"),pe(T,"aria-expanded",e[6]),pe(T,"aria-controls","skintone-list"),pe(A,"class",L="skintone-button-wrapper "+(e[19]?"expanded":"")),pe(O,"id","skintone-description"),pe(O,"class","sr-only"),pe(R,"id","skintone-list"),pe(R,"class",b="skintone-list "+(e[6]?"":"hidden no-animate")),_s(R,"transform","translateY("+(e[6]?0:"calc(-1 * var(--num-skintones) * var(--total-emoji-size))")+")"),pe(R,"role","listbox"),pe(R,"aria-label",y=e[0].skinTonesLabel),pe(R,"aria-activedescendant",_="skintone-"+e[20]),pe(R,"aria-hidden",w=!e[6]),pe(a,"class","search-row"),pe(E,"class","nav"),pe(E,"role","tablist"),_s(E,"grid-template-columns","repeat("+e[12].length+", 1fr)"),pe(E,"aria-label",q=e[0].categoriesLabel),pe(U,"class","indicator"),_s(U,"transform","translateX("+(e[24]?-1:1)*e[11]*100+"%)"),pe($,"class","indicator-wrapper"),pe(f,"class",H="message "+(e[18]?"":"gone")),pe(f,"role","alert"),pe(f,"aria-live","polite"),pe(F,"class",G="tabpanel "+(!e[14]||e[18]?"gone":"")),pe(F,"role",ue=e[4]?"region":"tabpanel"),pe(F,"aria-label",be=e[4]?e[0].searchResultsLabel:e[0].categories[e[13].name]),pe(F,"id",ke=e[4]?"":`tab-${e[13].id}`),pe(F,"tabindex","0"),pe(je,"class",de="favorites emoji-menu "+(e[18]?"gone":"")),pe(je,"role","menu"),pe(je,"aria-label",xe=e[0].favoritesLabel),_s(je,"padding-inline-end",e[25]+"px"),pe(Te,"aria-hidden","true"),pe(Te,"tabindex","-1"),pe(Te,"class","abs-pos hidden emoji"),pe(t,"class","picker"),pe(t,"aria-label",Be=e[0].regionLabel),pe(t,"style",e[22])},m(z,Ae){wa(z,t,Ae),zt(t,n),zt(t,a),zt(a,s),zt(s,i),I1(i,e[2]),zt(s,u),zt(u,l),zt(s,c),zt(c,h),zt(a,A),zt(A,T),zt(T,k),zt(a,O),zt(O,B),zt(a,R);for(let le=0;le<C.length;le+=1)C[le].m(R,null);e[48](R),zt(t,E);for(let le=0;le<M.length;le+=1)M[le].m(E,null);zt(t,$),zt($,U),zt(t,f),zt(f,x),zt(t,F),zt(F,se);for(let le=0;le<me.length;le+=1)me[le].m(se,null);e[50](F),zt(t,je);for(let le=0;le<Y.length;le+=1)Y[le].m(je,null);zt(t,Te),e[51](Te),e[52](t),$e||(Fe=[va(i,"input",e[47]),va(i,"keydown",e[30]),va(T,"click",e[35]),va(R,"focusout",e[38]),va(R,"click",e[34]),va(R,"keydown",e[36]),va(R,"keyup",e[37]),va(E,"keydown",e[32]),X5(e[29].call(null,se)),va(F,"click",e[33]),va(je,"click",e[33])],$e=!0)},p(z,Ae){Ae[0]&1&&r!==(r=z[0].searchLabel)&&pe(i,"placeholder",r),Ae[0]&18&&o!==(o=!!(z[4]&&z[1].length))&&pe(i,"aria-expanded",o),Ae[0]&67108864&&m!==(m=z[26]?`emo-${z[26]}`:"")&&pe(i,"aria-activedescendant",m),Ae[0]&4&&I1(i,z[2]),Ae[0]&1&&d!==(d=z[0].searchLabel+"")&&Pa(l,d),Ae[0]&1&&v!==(v=z[0].searchDescription+"")&&Pa(h,v),Ae[0]&2097152&&Pa(k,z[21]),Ae[0]&64&&p!==(p="emoji "+(z[6]?"hide-focus":""))&&pe(T,"class",p),Ae[0]&8388608&&pe(T,"aria-label",z[23]),Ae[0]&8388608&&pe(T,"title",z[23]),Ae[0]&64&&pe(T,"aria-expanded",z[6]),Ae[0]&524288&&L!==(L="skintone-button-wrapper "+(z[19]?"expanded":""))&&pe(A,"class",L),Ae[0]&1&&g!==(g=z[0].skinToneDescription+"")&&Pa(B,g),Ae[0]&1049089&&(Ve=z[9],C=tr(C,Ae,Re,1,z,Ve,I,R,er,H1,null,$1)),Ae[0]&64&&b!==(b="skintone-list "+(z[6]?"":"hidden no-animate"))&&pe(R,"class",b),Ae[0]&64&&_s(R,"transform","translateY("+(z[6]?0:"calc(-1 * var(--num-skintones) * var(--total-emoji-size))")+")"),Ae[0]&1&&y!==(y=z[0].skinTonesLabel)&&pe(R,"aria-label",y),Ae[0]&1048576&&_!==(_="skintone-"+z[20])&&pe(R,"aria-activedescendant",_),Ae[0]&64&&w!==(w=!z[6])&&pe(R,"aria-hidden",w),Ae[0]&12305|Ae[1]&1&&(Qe=z[12],M=tr(M,Ae,Ke,1,z,Qe,V,E,er,z1,null,N1)),Ae[0]&4096&&_s(E,"grid-template-columns","repeat("+z[12].length+", 1fr)"),Ae[0]&1&&q!==(q=z[0].categoriesLabel)&&pe(E,"aria-label",q),Ae[0]&16779264&&_s(U,"transform","translateX("+(z[24]?-1:1)*z[11]*100+"%)"),Ae[0]&262144&&Pa(x,z[18]),Ae[0]&262144&&H!==(H="message "+(z[18]?"":"gone"))&&pe(f,"class",H),Ae[0]&402694449&&(Ge=z[15],me=tr(me,Ae,tt,1,z,Ge,X,se,er,q1,null,D1)),Ae[0]&278528&&G!==(G="tabpanel "+(!z[14]||z[18]?"gone":""))&&pe(F,"class",G),Ae[0]&16&&ue!==(ue=z[4]?"region":"tabpanel")&&pe(F,"role",ue),Ae[0]&8209&&be!==(be=z[4]?z[0].searchResultsLabel:z[0].categories[z[13].name])&&pe(F,"aria-label",be),Ae[0]&8208&&ke!==(ke=z[4]?"":`tab-${z[13].id}`)&&pe(F,"id",ke),Ae[0]&402654464&&(st=z[10],Y=tr(Y,Ae,ge,1,z,st,Z,je,er,W1,null,P1)),Ae[0]&262144&&de!==(de="favorites emoji-menu "+(z[18]?"gone":""))&&pe(je,"class",de),Ae[0]&1&&xe!==(xe=z[0].favoritesLabel)&&pe(je,"aria-label",xe),Ae[0]&33554432&&_s(je,"padding-inline-end",z[25]+"px"),Ae[0]&1&&Be!==(Be=z[0].regionLabel)&&pe(t,"aria-label",Be),Ae[0]&4194304&&pe(t,"style",z[22])},i:br,o:br,d(z){z&&Sa(t);for(let Ae=0;Ae<C.length;Ae+=1)C[Ae].d();e[48](null);for(let Ae=0;Ae<M.length;Ae+=1)M[Ae].d();for(let Ae=0;Ae<me.length;Ae+=1)me[Ae].d();e[50](null);for(let Ae=0;Ae<Y.length;Ae+=1)Y[Ae].d();e[51](null),e[52](null),$e=!1,Fr(Fe)}}}function B9(e,t,n){let{skinToneEmoji:a}=t,{i18n:s}=t,{database:i}=t,{customEmoji:r}=t,{customCategorySorting:o}=t,m=!0,u=[],d=[],l="",c="",v,h,A,T=!1,k=-1,p,L=!1,O=!1,g,B=0,R=0,C,I,b="",y=[],_=[],w,E=u9,M=!1,V=0,q=0,$=so,U,f=!1,x;const H=le=>{v.getRootNode().getElementById(le).focus()},F=(le,Ne)=>{v.dispatchEvent(new CustomEvent(le,{detail:Ne,bubbles:!0,composed:!0}))},se=(le,Ne)=>Ne&&le.skins&&le.skins[Ne]||le.unicode,me=(le,Ne)=>C9([le.name||se(le,Ne),...le.shortcodes||[]]).join(", "),X=le=>/^skintone-/.test(le.id);Gl.then(le=>{le||n(18,p=s.emojiUnsupportedMessage)});function G(le){return x9(le,Ne=>{{const D=getComputedStyle(v),j=parseInt(D.getPropertyValue("--num-columns"),10),W=D.getPropertyValue("direction")==="rtl",J=le.parentElement.getBoundingClientRect().width-Ne;n(46,E=j),n(25,V=J),n(24,M=W)}})}function ue(le){const Ne=v.getRootNode();T9(le,h,j=>Ne.getElementById(`emo-${j.id}`)),n(1,u=u)}function be(le){return!le.unicode||!O1(le)||qc.get(le.unicode)}async function ke(le){const Ne=await Gl;return le.filter(({version:D})=>!D||D<=Ne)}async function je(le){return S9(le,await Gl)}async function Y(le){if(typeof le>"u")return[];const Ne=le===-1?r:await i.getEmojiByGroup(le);return je(await ke(Ne))}async function Z(le){return je(await ke(await i.getEmojiBySearchQuery(le)))}function de(le){if(!T||!u.length)return;const Ne=D=>{bs(le),n(5,k=Kl(D,k,u))};switch(le.key){case"ArrowDown":return Ne(!1);case"ArrowUp":return Ne(!0);case"Enter":if(k!==-1)return bs(le),Be(u[k].id);u.length&&n(5,k=0)}}function xe(le){n(2,l=""),n(44,c=""),n(5,k=-1),n(11,q=$.findIndex(Ne=>Ne.id===le.id))}function Te(le){const{target:Ne,key:D}=le,j=W=>{W&&(bs(le),W.focus())};switch(D){case"ArrowLeft":return j(Ne.previousSibling);case"ArrowRight":return j(Ne.nextSibling);case"Home":return j(Ne.parentElement.firstChild);case"End":return j(Ne.parentElement.lastChild)}}async function Be(le){const Ne=await i.getEmojiByUnicodeOrName(le),D=[...u,..._].find(W=>W.id===le),j=D.unicode&&se(D,B);await i.incrementFavoriteEmojiCount(le),F("emoji-click",{emoji:Ne,skinTone:B,...j&&{unicode:j},...D.name&&{name:D.name}})}async function $e(le){const{target:Ne}=le;if(!Ne.classList.contains("emoji"))return;bs(le);const D=Ne.id.substring(4);Be(D)}async function Fe(le){const{target:Ne}=le;if(!X(Ne))return;bs(le);const D=parseInt(Ne.id.slice(9),10);n(8,B=D),n(6,L=!1),H("skintone-button"),F("skin-tone-change",{skinTone:D}),i.setPreferredSkinTone(D)}async function Ve(le){n(6,L=!L),n(20,R=B),L&&(bs(le),So(()=>H(`skintone-${R}`)))}function Re(le){if(!L)return;const Ne=async D=>{bs(le),n(20,R=D),await G5(),H(`skintone-${R}`)};switch(le.key){case"ArrowUp":return Ne(Kl(!0,R,y));case"ArrowDown":return Ne(Kl(!1,R,y));case"Home":return Ne(0);case"End":return Ne(y.length-1);case"Enter":return Fe(le);case"Escape":return bs(le),n(6,L=!1),H("skintone-button")}}function Qe(le){if(L)switch(le.key){case" ":return Fe(le)}}async function Ke(le){const{relatedTarget:Ne}=le;(!Ne||!X(Ne))&&n(6,L=!1)}function Ge(){l=this.value,n(2,l)}function tt(le){yi[le?"unshift":"push"](()=>{g=le,n(7,g)})}const st=le=>xe(le);function ge(le){yi[le?"unshift":"push"](()=>{A=le,n(3,A)})}function z(le){yi[le?"unshift":"push"](()=>{h=le,n(17,h)})}function Ae(le){yi[le?"unshift":"push"](()=>{v=le,n(16,v)})}return e.$$set=le=>{"skinToneEmoji"in le&&n(40,a=le.skinToneEmoji),"i18n"in le&&n(0,s=le.i18n),"database"in le&&n(39,i=le.database),"customEmoji"in le&&n(41,r=le.customEmoji),"customCategorySorting"in le&&n(42,o=le.customCategorySorting)},e.$$.update=()=>{if(e.$$.dirty[1]&1280&&r&&i&&n(39,i.customEmoji=r,i),e.$$.dirty[0]&1|e.$$.dirty[1]&256){async function le(){let Ne=!1;const D=setTimeout(()=>{Ne=!0,n(18,p=s.loadingMessage)},l9);try{await i.ready(),n(14,f=!0)}catch(j){console.error(j),n(18,p=s.networkErrorMessage)}finally{clearTimeout(D),Ne&&(Ne=!1,n(18,p=""))}}i&&le()}if(e.$$.dirty[0]&6144|e.$$.dirty[1]&1024&&(r&&r.length?n(12,$=[i9,...so]):$!==so&&(q&&n(11,q--,q),n(12,$=so))),e.$$.dirty[0]&4&&s0(()=>{n(44,c=(l||"").trim()),n(5,k=-1)}),e.$$.dirty[0]&6144&&n(13,U=$[q]),e.$$.dirty[0]&24576|e.$$.dirty[1]&8192){async function le(){if(!f)n(1,u=[]),n(4,T=!1);else if(c.length>=r9){const Ne=c,D=await Z(Ne);Ne===c&&(n(1,u=D),n(4,T=!0))}else if(U){const Ne=U.id,D=await Y(Ne);Ne===U.id&&(n(1,u=D),n(4,T=!1))}}le()}if(e.$$.dirty[0]&4112&&n(22,I=`
  --font-family: ${i0};
  --num-groups: ${$.length}; 
  --indicator-opacity: ${T?0:1}; 
  --num-skintones: ${L1};`),e.$$.dirty[0]&16384|e.$$.dirty[1]&256){async function le(){f&&n(8,B=await i.getPreferredSkinTone())}le()}if(e.$$.dirty[1]&512&&n(9,y=Array(L1).fill().map((le,Ne)=>w9(a,Ne))),e.$$.dirty[0]&768&&n(21,C=y[B]),e.$$.dirty[0]&257&&n(23,b=s.skinToneLabel.replace("{skinTone}",s.skinTones[B])),e.$$.dirty[0]&16384|e.$$.dirty[1]&256){async function le(){n(45,w=(await Promise.all(d9.map(Ne=>i.getEmojiByUnicodeOrName(Ne)))).filter(Boolean))}f&&le()}if(e.$$.dirty[0]&16384|e.$$.dirty[1]&49408){async function le(){const Ne=await i.getTopFavoriteEmoji(E),D=await je(r0([...Ne,...w],j=>j.unicode||j.name).slice(0,E));n(10,_=D)}f&&w&&le()}if(e.$$.dirty[0]&10){const le=u.filter(Ne=>Ne.unicode).filter(Ne=>O1(Ne)&&!qc.has(Ne.unicode));le.length?So(()=>ue(le)):(n(1,u=u.filter(be)),So(()=>{(A||{}).scrollTop=0}))}e.$$.dirty[0]&1026|e.$$.dirty[1]&4096,e.$$.dirty[0]&18|e.$$.dirty[1]&2048&&n(15,d=function(){if(T)return[{category:"",emojis:u}];const Ne=new Map;for(const D of u){const j=D.category||"";let W=Ne.get(j);W||(W=[],Ne.set(j,W)),W.push(D)}return[...Ne.entries()].map(([D,j])=>({category:D,emojis:j})).sort((D,j)=>o(D.category,j.category))}()),e.$$.dirty[0]&34&&n(26,x=k!==-1&&u[k].id),e.$$.dirty[0]&192&&(L?g.addEventListener("transitionend",()=>{n(19,O=!0)},{once:!0}):n(19,O=!1))},[s,u,l,A,T,k,L,g,B,y,_,q,$,U,f,d,v,h,p,O,R,C,I,b,M,V,x,se,me,G,de,xe,Te,$e,Fe,Ve,Re,Qe,Ke,i,a,r,o,m,c,w,E,Ge,tt,st,ge,z,Ae]}class L9 extends s9{constructor(t){super(),a9(this,t,B9,I9,W5,{skinToneEmoji:40,i18n:0,database:39,customEmoji:41,customCategorySorting:42},null,[-1,-1,-1])}}const O9="https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json",F9="en";var V9={categoriesLabel:"Categories",emojiUnsupportedMessage:"Your browser does not support color emoji.",favoritesLabel:"Favorites",loadingMessage:"Loading…",networkErrorMessage:"Could not load emoji.",regionLabel:"Emoji picker",searchDescription:"When search results are available, press up or down to select and enter to choose.",searchLabel:"Search",searchResultsLabel:"Search results",skinToneDescription:"When expanded, press up or down to select and enter to choose.",skinToneLabel:"Choose a skin tone (currently {skinTone})",skinTonesLabel:"Skin tones",skinTones:["Default","Light","Medium-Light","Medium","Medium-Dark","Dark"],categories:{custom:"Custom","smileys-emotion":"Smileys and emoticons","people-body":"People and body","animals-nature":"Animals and nature","food-drink":"Food and drink","travel-places":"Travel and places",activities:"Activities",objects:"Objects",symbols:"Symbols",flags:"Flags"}};const o0=["customEmoji","customCategorySorting","database","dataSource","i18n","locale","skinToneEmoji"];class l0 extends HTMLElement{constructor(t){super(),this.attachShadow({mode:"open"});const n=document.createElement("style");n.textContent=":host{--emoji-size:1.375rem;--emoji-padding:0.5rem;--category-emoji-size:var(--emoji-size);--category-emoji-padding:var(--emoji-padding);--indicator-height:3px;--input-border-radius:0.5rem;--input-border-size:1px;--input-font-size:1rem;--input-line-height:1.5;--input-padding:0.25rem;--num-columns:8;--outline-size:2px;--border-size:1px;--skintone-border-radius:1rem;--category-font-size:1rem;display:flex;width:min-content;height:400px}:host,:host(.light){--background:#fff;--border-color:#e0e0e0;--indicator-color:#385ac1;--input-border-color:#999;--input-font-color:#111;--input-placeholder-color:#999;--outline-color:#999;--category-font-color:#111;--button-active-background:#e6e6e6;--button-hover-background:#d9d9d9}:host(.dark){--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}@media (prefers-color-scheme:dark){:host{--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}}:host([hidden]){display:none}button{margin:0;padding:0;border:0;background:0 0;box-shadow:none;-webkit-tap-highlight-color:transparent}button::-moz-focus-inner{border:0}input{padding:0;margin:0;line-height:1.15;font-family:inherit}input[type=search]{-webkit-appearance:none}:focus{outline:var(--outline-color) solid var(--outline-size);outline-offset:calc(-1*var(--outline-size))}:host([data-js-focus-visible]) :focus:not([data-focus-visible-added]){outline:0}:focus:not(:focus-visible){outline:0}.hide-focus{outline:0}*{box-sizing:border-box}.picker{contain:content;display:flex;flex-direction:column;background:var(--background);border:var(--border-size) solid var(--border-color);width:100%;height:100%;overflow:hidden;--total-emoji-size:calc(var(--emoji-size) + (2 * var(--emoji-padding)));--total-category-emoji-size:calc(var(--category-emoji-size) + (2 * var(--category-emoji-padding)))}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.hidden{opacity:0;pointer-events:none}.abs-pos{position:absolute;left:0;top:0}.gone{display:none!important}.skintone-button-wrapper,.skintone-list{background:var(--background);z-index:3}.skintone-button-wrapper.expanded{z-index:1}.skintone-list{position:absolute;inset-inline-end:0;top:0;z-index:2;overflow:visible;border-bottom:var(--border-size) solid var(--border-color);border-radius:0 0 var(--skintone-border-radius) var(--skintone-border-radius);will-change:transform;transition:transform .2s ease-in-out;transform-origin:center 0}@media (prefers-reduced-motion:reduce){.skintone-list{transition-duration:.001s}}@supports not (inset-inline-end:0){.skintone-list{right:0}}.skintone-list.no-animate{transition:none}.tabpanel{overflow-y:auto;-webkit-overflow-scrolling:touch;will-change:transform;min-height:0;flex:1;contain:content}.emoji-menu{display:grid;grid-template-columns:repeat(var(--num-columns),var(--total-emoji-size));justify-content:space-around;align-items:flex-start;width:100%}.category{padding:var(--emoji-padding);font-size:var(--category-font-size);color:var(--category-font-color)}.custom-emoji,.emoji,button.emoji{height:var(--total-emoji-size);width:var(--total-emoji-size)}.emoji,button.emoji{font-size:var(--emoji-size);display:flex;align-items:center;justify-content:center;border-radius:100%;line-height:1;overflow:hidden;font-family:var(--font-family);cursor:pointer}@media (hover:hover) and (pointer:fine){.emoji:hover,button.emoji:hover{background:var(--button-hover-background)}}.emoji.active,.emoji:active,button.emoji.active,button.emoji:active{background:var(--button-active-background)}.custom-emoji{padding:var(--emoji-padding);object-fit:contain;pointer-events:none;background-repeat:no-repeat;background-position:center center;background-size:var(--emoji-size) var(--emoji-size)}.nav,.nav-button{align-items:center}.nav{display:grid;justify-content:space-between;contain:content}.nav-button{display:flex;justify-content:center}.nav-emoji{font-size:var(--category-emoji-size);width:var(--total-category-emoji-size);height:var(--total-category-emoji-size)}.indicator-wrapper{display:flex;border-bottom:1px solid var(--border-color)}.indicator{width:calc(100%/var(--num-groups));height:var(--indicator-height);opacity:var(--indicator-opacity);background-color:var(--indicator-color);will-change:transform,opacity;transition:opacity .1s linear,transform .25s ease-in-out}@media (prefers-reduced-motion:reduce){.indicator{will-change:opacity;transition:opacity .1s linear}}.pad-top,input.search{background:var(--background);width:100%}.pad-top{height:var(--emoji-padding);z-index:3}.search-row{display:flex;align-items:center;position:relative;padding-inline-start:var(--emoji-padding);padding-bottom:var(--emoji-padding)}.search-wrapper{flex:1;min-width:0}input.search{padding:var(--input-padding);border-radius:var(--input-border-radius);border:var(--input-border-size) solid var(--input-border-color);color:var(--input-font-color);font-size:var(--input-font-size);line-height:var(--input-line-height)}input.search::placeholder{color:var(--input-placeholder-color)}.favorites{display:flex;flex-direction:row;border-top:var(--border-size) solid var(--border-color);contain:content}.message{padding:var(--emoji-padding)}",this.shadowRoot.appendChild(n),this._ctx={locale:F9,dataSource:O9,skinToneEmoji:c9,customCategorySorting:m9,customEmoji:null,i18n:V9,...t};for(const a of o0)a!=="database"&&Object.prototype.hasOwnProperty.call(this,a)&&(this._ctx[a]=this[a],delete this[a]);this._dbFlush()}connectedCallback(){this._cmp=new L9({target:this.shadowRoot,props:this._ctx})}disconnectedCallback(){this._cmp.$destroy(),this._cmp=void 0;const{database:t}=this._ctx;t&&t.close().catch(n=>console.error(n))}static get observedAttributes(){return["locale","data-source","skin-tone-emoji"]}attributeChangedCallback(t,n,a){this._set(t.replace(/-([a-z])/g,(s,i)=>i.toUpperCase()),a)}_set(t,n){this._ctx[t]=n,this._cmp&&this._cmp.$set({[t]:n}),["locale","dataSource"].includes(t)&&this._dbFlush()}_dbCreate(){const{locale:t,dataSource:n,database:a}=this._ctx;(!a||a.locale!==t||a.dataSource!==n)&&this._set("database",new Zv({locale:t,dataSource:n}))}_dbFlush(){Promise.resolve().then(()=>this._dbCreate())}}const c0={};for(const e of o0)c0[e]={get(){return e==="database"&&this._dbCreate(),this._ctx[e]},set(t){if(e==="database")throw new Error("database is read-only");this._set(e,t)}};Object.defineProperties(l0.prototype,c0);customElements.get("emoji-picker")||customElements.define("emoji-picker",l0);function u0(e,t){for(;e&&!e.querySelector(t);){e=e.parentNode;const n=e.querySelector(t);if(n)return n}return null}const P9={name:"EmojiPickerContainer",components:{SvgIcon:kn},props:{emojiOpened:{type:Boolean,default:!1},emojiReaction:{type:Boolean,default:!1},positionTop:{type:Boolean,default:!1},positionRight:{type:Boolean,default:!1},messageId:{type:String,default:""},emojiDataSource:{type:String,default:void 0}},emits:["add-emoji","open-emoji"],data(){return{emojiPickerHeight:320,emojiPickerTop:0,emojiPickerRight:""}},watch:{emojiOpened(e){e&&setTimeout(()=>{this.addCustomStyling(),this.$refs.emojiPicker.shadowRoot.addEventListener("emoji-click",({detail:t})=>{this.$emit("add-emoji",{unicode:t.unicode})})},0)}},methods:{addCustomStyling(){const e=`.picker {
				border: none;
			}`,t=`.nav {
				overflow-x: auto;
			}`,n=`.search-wrapper {
				padding-right: 2px;
				padding-left: 2px;
			}`,a=`input.search {
				height: 32px;
				font-size: 14px;
				border-radius: 10rem;
				border: var(--chat-border-style);
				padding: 5px 10px;
				outline: none;
				background: var(--chat-bg-color-input);
				color: var(--chat-color);
			}`,s=document.createElement("style");s.textContent=e+t+n+a,this.$refs.emojiPicker.shadowRoot.appendChild(s)},openEmoji(e){this.$emit("open-emoji",!this.emojiOpened),this.setEmojiPickerPosition(e.clientY,e.view.innerWidth,e.view.innerHeight)},setEmojiPickerPosition(e,t,n){const a=t<500||n<700,s=u0(this.$el,"#room-footer");if(!s){a&&(this.emojiPickerRight="-50px");return}a?(this.emojiPickerRight=t/2-(this.positionTop?200:150)+"px",this.emojiPickerTop=100,this.emojiPickerHeight=n-200):(s.getBoundingClientRect().top-e>this.emojiPickerHeight-50?this.emojiPickerTop=e+10:this.emojiPickerTop=e-this.emojiPickerHeight-10,this.emojiPickerRight=this.positionTop?"0px":this.positionRight?"60px":"")}}},D9={class:"vac-emoji-wrapper"};function j9(e,t,n,a,s,i){const r=dt("svg-icon"),o=dt("emoji-picker");return oe(),Ce("div",D9,[Pe("div",{class:kt(["vac-svg-button",{"vac-emoji-reaction":n.emojiReaction}]),onClick:t[0]||(t[0]=(...m)=>i.openEmoji&&i.openEmoji(...m))},[qe(e.$slots,n.messageId?"emoji-picker-reaction-icon_"+n.messageId:"emoji-picker-icon",{},()=>[Xe(r,{name:"emoji",param:n.emojiReaction?"reaction":""},null,8,["param"])])],2),n.emojiOpened?(oe(),Pt(mn,{key:0,name:"vac-slide-up",appear:""},{default:mt(()=>[Pe("div",{class:kt(["vac-emoji-picker",{"vac-picker-reaction":n.emojiReaction}]),style:Qt({height:`${s.emojiPickerHeight}px`,top:n.positionTop?s.emojiPickerHeight:`${s.emojiPickerTop}px`,right:s.emojiPickerRight,display:s.emojiPickerTop||!n.emojiReaction?"initial":"none"})},[n.emojiOpened?(oe(),Pt(o,{key:0,ref:"emojiPicker","data-source":n.emojiDataSource},null,8,["data-source"])):Ue("",!0)],6)]),_:1})):Ue("",!0)])}var d0=Xt(P9,[["render",j9]]);const N9={name:"RoomFiles",components:{Loader:ll,SvgIcon:kn},props:{file:{type:Object,required:!0},index:{type:Number,required:!0}},emits:["remove-file"],computed:{isImage(){return Ei(this.file)},isVideo(){return Or(this.file)}}},$9={class:"vac-room-file-container"},H9=["src"],z9={class:"vac-text-ellipsis"},U9={key:0,class:"vac-text-ellipsis vac-text-extension"};function q9(e,t,n,a,s,i){const r=dt("loader"),o=dt("svg-icon");return oe(),Ce("div",$9,[Xe(r,{show:n.file.loading,type:"room-file"},$t({_:2},[St(e.$slots,(m,u)=>({name:u,fn:mt(d=>[qe(e.$slots,u,Nt(Dt(d)))])}))]),1032,["show"]),Pe("div",{class:"vac-svg-button vac-icon-remove",onClick:t[0]||(t[0]=m=>e.$emit("remove-file",n.index))},[qe(e.$slots,"image-close-icon",{},()=>[Xe(o,{name:"close",param:"image"})])]),i.isImage?(oe(),Ce("div",{key:0,class:kt(["vac-message-image",{"vac-blur-loading":n.file.loading}]),style:Qt({"background-image":`url('${n.file.localUrl||n.file.url}')`})},null,6)):i.isVideo?(oe(),Ce("video",{key:1,controls:"",class:kt({"vac-blur-loading":n.file.loading})},[Pe("source",{src:n.file.localUrl||n.file.url},null,8,H9)],2)):(oe(),Ce("div",{key:2,class:kt(["vac-file-container",{"vac-blur-loading":n.file.loading}])},[Pe("div",null,[qe(e.$slots,"file-icon",{},()=>[Xe(o,{name:"file"})])]),Pe("div",z9,_t(n.file.name),1),n.file.extension?(oe(),Ce("div",U9,_t(n.file.extension),1)):Ue("",!0)],2))])}var W9=Xt(N9,[["render",q9]]);const Y9={name:"RoomFiles",components:{SvgIcon:kn,RoomFile:W9},props:{files:{type:Array,required:!0}},emits:["remove-file","reset-message"],computed:{}},X9={key:0,class:"vac-room-files-container"},G9={class:"vac-files-box"},K9={class:"vac-icon-close"};function Z9(e,t,n,a,s,i){const r=dt("room-file"),o=dt("svg-icon");return oe(),Pt(mn,{name:"vac-slide-up"},{default:mt(()=>[n.files.length?(oe(),Ce("div",X9,[Pe("div",G9,[(oe(!0),Ce(At,null,St(n.files,(m,u)=>(oe(),Ce("div",{key:u},[Xe(r,{file:m,index:u,onRemoveFile:t[0]||(t[0]=d=>e.$emit("remove-file",d))},$t({_:2},[St(e.$slots,(d,l)=>({name:l,fn:mt(c=>[qe(e.$slots,l,Nt(Dt(c)))])}))]),1032,["file","index"])]))),128))]),Pe("div",K9,[Pe("div",{class:"vac-svg-button",onClick:t[1]||(t[1]=m=>e.$emit("reset-message"))},[qe(e.$slots,"files-close-icon",{},()=>[Xe(o,{name:"close-outline"})])])])])):Ue("",!0)]),_:3})}var Q9=Xt(Y9,[["render",Z9]]);const J9={props:{percentage:{type:Number,default:0},messageSelectionEnabled:{type:Boolean,required:!0}},emits:["hover-audio-progress","change-linehead"],data(){return{isMouseDown:!1}},methods:{onMouseDown(e){if(this.messageSelectionEnabled)return;this.isMouseDown=!0;const t=this.calculateLineHeadPosition(e,this.$refs.progress);this.$emit("change-linehead",t),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp)},onMouseUp(e){if(this.messageSelectionEnabled)return;this.isMouseDown=!1,document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("mousemove",this.onMouseMove);const t=this.calculateLineHeadPosition(e,this.$refs.progress);this.$emit("change-linehead",t)},onMouseMove(e){if(this.messageSelectionEnabled)return;const t=this.calculateLineHeadPosition(e,this.$refs.progress);this.$emit("change-linehead",t)},calculateLineHeadPosition(e,t){const n=t.getBoundingClientRect().width,a=t.getBoundingClientRect().left;let s=(e.clientX-a)/n;return s=s<0?0:s,s=s>1?1:s,s}}},e8={class:"vac-player-progress"},t8={class:"vac-line-container"};function n8(e,t,n,a,s,i){return oe(),Ce("div",{ref:"progress",class:"vac-player-bar",onMousedown:t[0]||(t[0]=(...r)=>i.onMouseDown&&i.onMouseDown(...r)),onMouseover:t[1]||(t[1]=r=>e.$emit("hover-audio-progress",!0)),onMouseout:t[2]||(t[2]=r=>e.$emit("hover-audio-progress",!1))},[Pe("div",e8,[Pe("div",t8,[Pe("div",{class:"vac-line-progress",style:Qt({width:`${n.percentage}%`})},null,4),Pe("div",{class:kt(["vac-line-dot",{"vac-line-dot__active":s.isMouseDown}]),style:Qt({left:`${n.percentage}%`})},null,6)])])],544)}var a8=Xt(J9,[["render",n8]]);const s8={name:"AudioPlayer",components:{SvgIcon:kn,AudioControl:a8},props:{messageId:{type:[String,Number],default:null},src:{type:String,default:null},messageSelectionEnabled:{type:Boolean,required:!0}},emits:["hover-audio-progress","update-progress-time"],data(){return{isPlaying:!1,duration:this.convertTimeMMSS(0),playedTime:this.convertTimeMMSS(0),progress:0}},computed:{playerUniqId(){return`audio-player${this.messageId}`},audioSource(){return this.src?this.src:(this.resetProgress(),null)}},mounted(){this.player=this.$el.querySelector("#"+this.playerUniqId),this.player.addEventListener("ended",()=>{this.isPlaying=!1}),this.player.addEventListener("loadeddata",()=>{this.resetProgress(),this.duration=this.convertTimeMMSS(this.player.duration),this.updateProgressTime()}),this.player.addEventListener("timeupdate",this.onTimeUpdate)},methods:{convertTimeMMSS(e){return new Date(e*1e3).toISOString().substr(14,5)},playback(){this.messageSelectionEnabled||!this.audioSource||(this.isPlaying?this.player.pause():setTimeout(()=>this.player.play()),this.isPlaying=!this.isPlaying)},resetProgress(){this.isPlaying&&this.player.pause(),this.duration=this.convertTimeMMSS(0),this.playedTime=this.convertTimeMMSS(0),this.progress=0,this.isPlaying=!1,this.updateProgressTime()},onTimeUpdate(){this.playedTime=this.convertTimeMMSS(this.player.currentTime),this.progress=this.player.currentTime/this.player.duration*100,this.updateProgressTime()},onUpdateProgress(e){e&&(this.player.currentTime=e*this.player.duration)},updateProgressTime(){this.$emit("update-progress-time",this.progress>1?this.playedTime:this.duration)}}},i8={class:"vac-audio-player"},r8=["id","src"];function o8(e,t,n,a,s,i){const r=dt("svg-icon"),o=dt("audio-control");return oe(),Ce("div",null,[Pe("div",i8,[Pe("div",{class:"vac-svg-button",onClick:t[0]||(t[0]=(...m)=>i.playback&&i.playback(...m))},[s.isPlaying?qe(e.$slots,"audio-pause-icon_"+n.messageId,{key:0},()=>[Xe(r,{name:"audio-pause"})]):qe(e.$slots,"audio-play-icon_"+n.messageId,{key:1},()=>[Xe(r,{name:"audio-play"})])]),Xe(o,{percentage:s.progress,"message-selection-enabled":n.messageSelectionEnabled,onChangeLinehead:i.onUpdateProgress,onHoverAudioProgress:t[1]||(t[1]=m=>e.$emit("hover-audio-progress",m))},null,8,["percentage","message-selection-enabled","onChangeLinehead"]),Pe("audio",{id:i.playerUniqId,src:i.audioSource},null,8,r8)])])}var Gu=Xt(s8,[["render",o8]]);const l8={name:"RoomMessageReply",components:{SvgIcon:kn,FormatMessage:Lr,AudioPlayer:Gu},props:{room:{type:Object,required:!0},messageReply:{type:Object,default:null},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0}},emits:["reset-message"],computed:{firstFile(){var e,t;return(t=(e=this.messageReply)==null?void 0:e.files)!=null&&t.length?this.messageReply.files[0]:{}},isImage(){return Ei(this.firstFile)},isVideo(){return Or(this.firstFile)},isAudio(){return dl(this.firstFile)},isOtherFile(){var e,t;return((t=(e=this.messageReply)==null?void 0:e.files)==null?void 0:t.length)&&!this.isAudio&&!this.isVideo&&!this.isImage}}},c8={key:0,class:"vac-reply-container"},u8={class:"vac-reply-box"},d8={class:"vac-reply-info"},m8={class:"vac-reply-username"},f8={class:"vac-reply-content"},v8=["src"],h8={key:1,controls:"",class:"vac-image-reply"},g8=["src"],p8={key:3,class:"vac-image-reply vac-file-container"},_8={class:"vac-text-ellipsis"},b8={key:0,class:"vac-text-ellipsis vac-text-extension"},y8={class:"vac-icon-reply"};function w8(e,t,n,a,s,i){const r=dt("format-message"),o=dt("audio-player"),m=dt("svg-icon");return oe(),Pt(mn,{name:"vac-slide-up"},{default:mt(()=>[n.messageReply?(oe(),Ce("div",c8,[Pe("div",u8,[Pe("div",d8,[Pe("div",m8,_t(n.messageReply.username),1),Pe("div",f8,[Xe(r,{"message-id":n.messageReply._id,content:n.messageReply.content,users:n.room.users,"text-formatting":n.textFormatting,"link-options":n.linkOptions,reply:!0},null,8,["message-id","content","users","text-formatting","link-options"])])]),i.isImage?(oe(),Ce("img",{key:0,src:i.firstFile.url,class:"vac-image-reply"},null,8,v8)):i.isVideo?(oe(),Ce("video",h8,[Pe("source",{src:i.firstFile.url},null,8,g8)])):i.isAudio?(oe(),Pt(o,{key:2,src:i.firstFile.url,"message-selection-enabled":!1,class:"vac-audio-reply"},$t({_:2},[St(e.$slots,(u,d)=>({name:d,fn:mt(l=>[qe(e.$slots,d,Nt(Dt(l)))])}))]),1032,["src"])):i.isOtherFile?(oe(),Ce("div",p8,[Pe("div",null,[qe(e.$slots,"file-icon",{},()=>[Xe(m,{name:"file"})])]),Pe("div",_8,_t(i.firstFile.name),1),i.firstFile.extension?(oe(),Ce("div",b8,_t(i.firstFile.extension),1)):Ue("",!0)])):Ue("",!0)]),Pe("div",y8,[Pe("div",{class:"vac-svg-button",onClick:t[0]||(t[0]=u=>e.$emit("reset-message"))},[qe(e.$slots,"reply-close-icon",{},()=>[Xe(m,{name:"close-outline"})])])])])):Ue("",!0)]),_:3})}var S8=Xt(l8,[["render",w8]]);const k8={name:"RoomUsersTag",props:{filteredUsersTag:{type:Array,required:!0},selectItem:{type:Boolean,default:null},activeUpOrDown:{type:Number,default:null}},emits:["select-user-tag","activate-item"],data(){return{activeItem:null}},watch:{filteredUsersTag(e,t){(!t.length||e.length!==t.length)&&(this.activeItem=0)},selectItem(e){e&&this.$emit("select-user-tag",this.filteredUsersTag[this.activeItem])},activeUpOrDown(){this.activeUpOrDown>0&&this.activeItem<this.filteredUsersTag.length-1?this.activeItem++:this.activeUpOrDown<0&&this.activeItem>0&&this.activeItem--,this.$emit("activate-item")}}},x8={key:0,class:"vac-tags-container"},T8=["onMouseover","onClick"],C8={class:"vac-tags-info"},A8={class:"vac-tags-username"};function E8(e,t,n,a,s,i){return oe(),Pt(mn,{name:"vac-slide-up"},{default:mt(()=>[n.filteredUsersTag.length?(oe(),Ce("div",x8,[(oe(!0),Ce(At,null,St(n.filteredUsersTag,(r,o)=>(oe(),Ce("div",{key:r._id,class:kt(["vac-tags-box",{"vac-tags-box-active":o===s.activeItem}]),onMouseover:m=>s.activeItem=o,onClick:m=>e.$emit("select-user-tag",r)},[Pe("div",C8,[r.avatar?(oe(),Ce("div",{key:0,class:"vac-avatar vac-tags-avatar",style:Qt({"background-image":`url('${r.avatar}')`})},null,4)):Ue("",!0),Pe("div",A8,_t(r.username),1)])],42,T8))),128))])):Ue("",!0)]),_:1})}var M8=Xt(k8,[["render",E8]]);const R8={name:"RoomEmojis",props:{filteredEmojis:{type:Array,required:!0},selectItem:{type:Boolean,default:null},activeUpOrDown:{type:Number,default:null}},emits:["select-emoji","activate-item"],data(){return{activeItem:null}},watch:{filteredEmojis(e,t){(!t.length||e.length!==t.length)&&(this.activeItem=0)},selectItem(e){e&&this.$emit("select-emoji",this.filteredEmojis[this.activeItem])},activeUpOrDown(){this.activeUpOrDown>0&&this.activeItem<this.filteredEmojis.length-1?this.activeItem++:this.activeUpOrDown<0&&this.activeItem>0&&this.activeItem--,this.$emit("activate-item")}}},I8={key:0,class:"vac-emojis-container"},B8=["onMouseover","onClick"];function L8(e,t,n,a,s,i){return oe(),Pt(mn,{name:"vac-slide-up"},{default:mt(()=>[n.filteredEmojis.length?(oe(),Ce("div",I8,[(oe(!0),Ce(At,null,St(n.filteredEmojis,(r,o)=>(oe(),Ce("div",{key:r,class:kt(["vac-emoji-element",{"vac-emoji-element-active":o===s.activeItem}]),onMouseover:m=>s.activeItem=o,onClick:m=>e.$emit("select-emoji",r)},_t(r),43,B8))),128))])):Ue("",!0)]),_:1})}var O8=Xt(R8,[["render",L8]]);const F8={name:"RoomTemplatesText",props:{filteredTemplatesText:{type:Array,required:!0},selectItem:{type:Boolean,default:null},activeUpOrDown:{type:Number,default:null}},emits:["select-template-text","activate-item"],data(){return{activeItem:null}},watch:{filteredTemplatesText(e,t){(!t.length||e.length!==t.length)&&(this.activeItem=0)},selectItem(e){e&&this.$emit("select-template-text",this.filteredTemplatesText[this.activeItem])},activeUpOrDown(){this.activeUpOrDown>0&&this.activeItem<this.filteredTemplatesText.length-1?this.activeItem++:this.activeUpOrDown<0&&this.activeItem>0&&this.activeItem--,this.$emit("activate-item")}}},V8={key:0,class:"vac-template-container vac-app-box-shadow"},P8=["onMouseover","onClick"],D8={class:"vac-template-info"},j8={class:"vac-template-tag"},N8={class:"vac-template-text"};function $8(e,t,n,a,s,i){return oe(),Pt(mn,{name:"vac-slide-up"},{default:mt(()=>[n.filteredTemplatesText.length?(oe(),Ce("div",V8,[(oe(!0),Ce(At,null,St(n.filteredTemplatesText,(r,o)=>(oe(),Ce("div",{key:o,class:kt(["vac-template-box",{"vac-template-active":o===s.activeItem}]),onMouseover:m=>s.activeItem=o,onClick:m=>e.$emit("select-template-text",r)},[Pe("div",D8,[Pe("div",j8," /"+_t(r.tag),1),Pe("div",N8,_t(r.text),1)])],42,P8))),128))])):Ue("",!0)]),_:1})}var H8=Xt(F8,[["render",$8]]);function z8(e){return new Int8Array(e)}function U8(e){return new Int16Array(e)}function m0(e){return new Int32Array(e)}function f0(e){return new Float32Array(e)}function q8(e){return new Float64Array(e)}function v0(e){if(e.length==1)return f0(e[0]);var t=e[0];e=e.slice(1);for(var n=[],a=0;a<t;a++)n.push(v0(e));return n}function h0(e){if(e.length==1)return m0(e[0]);var t=e[0];e=e.slice(1);for(var n=[],a=0;a<t;a++)n.push(h0(e));return n}function g0(e){if(e.length==1)return U8(e[0]);var t=e[0];e=e.slice(1);for(var n=[],a=0;a<t;a++)n.push(g0(e));return n}function p0(e){if(e.length==1)return new Array(e[0]);var t=e[0];e=e.slice(1);for(var n=[],a=0;a<t;a++)n.push(p0(e));return n}var _0={};_0.fill=function(e,t,n,a){if(arguments.length==2)for(var s=0;s<e.length;s++)e[s]=arguments[1];else for(var s=t;s<n;s++)e[s]=a};var Vr={};Vr.arraycopy=function(e,t,n,a,s){for(var i=t+s;t<i;)n[a++]=e[t++]};Vr.out={};Vr.out.println=function(e){console.log(e)};Vr.out.printf=function(){console.log.apply(console,arguments)};var ml={};ml.SQRT2=1.4142135623730951;ml.FAST_LOG10=function(e){return Math.log10(e)};ml.FAST_LOG10_X=function(e,t){return Math.log10(e)*t};function rs(e){this.ordinal=e}rs.short_block_allowed=new rs(0);rs.short_block_coupled=new rs(1);rs.short_block_dispensed=new rs(2);rs.short_block_forced=new rs(3);var b0={};b0.MAX_VALUE=34028235e31;function Zn(e){this.ordinal=e}Zn.vbr_off=new Zn(0);Zn.vbr_mt=new Zn(1);Zn.vbr_rh=new Zn(2);Zn.vbr_abr=new Zn(3);Zn.vbr_mtrh=new Zn(4);Zn.vbr_default=Zn.vbr_mtrh;var W8=function(e){},ze={System:Vr,VbrMode:Zn,Float:b0,ShortBlock:rs,Util:ml,Arrays:_0,new_array_n:p0,new_byte:z8,new_double:q8,new_float:f0,new_float_n:v0,new_int:m0,new_int_n:h0,new_short_n:g0,assert:W8},Y8=ze.System,ln=ze.Util,X8=ze.Arrays,G8=ze.new_float;function K8(){var e=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.035780907*ln.SQRT2*.5/2384e-9,.017876148*ln.SQRT2*.5/2384e-9,.003134727*ln.SQRT2*.5/2384e-9,.002457142*ln.SQRT2*.5/2384e-9,971317e-9*ln.SQRT2*.5/2384e-9,218868e-9*ln.SQRT2*.5/2384e-9,101566e-9*ln.SQRT2*.5/2384e-9,13828e-9*ln.SQRT2*.5/2384e-9,12804.797818791945,1945.5515939597317,313.4244966442953,20.801593959731544,1995.1556208053692,9.000838926174497,-29.20218120805369],t=[[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,940084909404969e-27,6423305872147839e-28,2382191739347918e-28,5456116108943412e-27,4878985199565852e-27,4240448995017367e-27,3559909094758252e-27,2858043359288075e-27,2156177623817898e-27,1475637723558783e-27,8371015190102974e-28,2599706096327376e-28,-5456116108943412e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758252e-27,-2858043359288076e-27,-2156177623817898e-27,-1475637723558783e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347923e-28,-6423305872147843e-28,-9400849094049696e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049694e-28,-642330587214784e-27,-2382191739347918e-28],[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,9400849094049688e-28,6423305872147841e-28,2382191739347918e-28,5456116108943413e-27,4878985199565852e-27,4240448995017367e-27,3559909094758253e-27,2858043359288075e-27,2156177623817898e-27,1475637723558782e-27,8371015190102975e-28,2599706096327376e-28,-5461314069809755e-27,-4921085770524055e-27,-4343405037091838e-27,-3732668368707687e-27,-3093523840190885e-27,-2430835727329465e-27,-1734679010007751e-27,-974825365660928e-27,-2797435120168326e-28,0,0,0,0,0,0,-2283748241799531e-28,-4037858874020686e-28,-2146547464825323e-28],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2283748241799531e-28,4037858874020686e-28,2146547464825323e-28,5461314069809755e-27,4921085770524055e-27,4343405037091838e-27,3732668368707687e-27,3093523840190885e-27,2430835727329466e-27,1734679010007751e-27,974825365660928e-27,2797435120168326e-28,-5456116108943413e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758253e-27,-2858043359288075e-27,-2156177623817898e-27,-1475637723558782e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347913e-28,-6423305872147834e-28,-9400849094049688e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049688e-28,-6423305872147841e-28,-2382191739347918e-28]],n=t[N.SHORT_TYPE],a=t[N.SHORT_TYPE],s=t[N.SHORT_TYPE],i=t[N.SHORT_TYPE],r=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];function o(d,l,c){for(var v=10,h=l+238-14-286,A=-15;A<0;A++){var T,k,p;T=e[v+-10],k=d[h+-224]*T,p=d[l+224]*T,T=e[v+-9],k+=d[h+-160]*T,p+=d[l+160]*T,T=e[v+-8],k+=d[h+-96]*T,p+=d[l+96]*T,T=e[v+-7],k+=d[h+-32]*T,p+=d[l+32]*T,T=e[v+-6],k+=d[h+32]*T,p+=d[l+-32]*T,T=e[v+-5],k+=d[h+96]*T,p+=d[l+-96]*T,T=e[v+-4],k+=d[h+160]*T,p+=d[l+-160]*T,T=e[v+-3],k+=d[h+224]*T,p+=d[l+-224]*T,T=e[v+-2],k+=d[l+-256]*T,p-=d[h+256]*T,T=e[v+-1],k+=d[l+-192]*T,p-=d[h+192]*T,T=e[v+0],k+=d[l+-128]*T,p-=d[h+128]*T,T=e[v+1],k+=d[l+-64]*T,p-=d[h+64]*T,T=e[v+2],k+=d[l+0]*T,p-=d[h+0]*T,T=e[v+3],k+=d[l+64]*T,p-=d[h+-64]*T,T=e[v+4],k+=d[l+128]*T,p-=d[h+-128]*T,T=e[v+5],k+=d[l+192]*T,p-=d[h+-192]*T,k*=e[v+6],T=p-k,c[30+A*2]=p+k,c[31+A*2]=e[v+7]*T,v+=18,l--,h++}{var k,p,L,O;p=d[l+-16]*e[v+-10],k=d[l+-32]*e[v+-2],p+=(d[l+-48]-d[l+16])*e[v+-9],k+=d[l+-96]*e[v+-1],p+=(d[l+-80]+d[l+48])*e[v+-8],k+=d[l+-160]*e[v+0],p+=(d[l+-112]-d[l+80])*e[v+-7],k+=d[l+-224]*e[v+1],p+=(d[l+-144]+d[l+112])*e[v+-6],k-=d[l+32]*e[v+2],p+=(d[l+-176]-d[l+144])*e[v+-5],k-=d[l+96]*e[v+3],p+=(d[l+-208]+d[l+176])*e[v+-4],k-=d[l+160]*e[v+4],p+=(d[l+-240]-d[l+208])*e[v+-3],k-=d[l+224],L=k-p,O=k+p,p=c[14],k=c[15]-p,c[31]=O+p,c[30]=L+k,c[15]=L-k,c[14]=O-p}{var g;g=c[28]-c[0],c[0]+=c[28],c[28]=g*e[v+-2*18+7],g=c[29]-c[1],c[1]+=c[29],c[29]=g*e[v+-2*18+7],g=c[26]-c[2],c[2]+=c[26],c[26]=g*e[v+-4*18+7],g=c[27]-c[3],c[3]+=c[27],c[27]=g*e[v+-4*18+7],g=c[24]-c[4],c[4]+=c[24],c[24]=g*e[v+-6*18+7],g=c[25]-c[5],c[5]+=c[25],c[25]=g*e[v+-6*18+7],g=c[22]-c[6],c[6]+=c[22],c[22]=g*ln.SQRT2,g=c[23]-c[7],c[7]+=c[23],c[23]=g*ln.SQRT2-c[7],c[7]-=c[6],c[22]-=c[7],c[23]-=c[22],g=c[6],c[6]=c[31]-g,c[31]=c[31]+g,g=c[7],c[7]=c[30]-g,c[30]=c[30]+g,g=c[22],c[22]=c[15]-g,c[15]=c[15]+g,g=c[23],c[23]=c[14]-g,c[14]=c[14]+g,g=c[20]-c[8],c[8]+=c[20],c[20]=g*e[v+-10*18+7],g=c[21]-c[9],c[9]+=c[21],c[21]=g*e[v+-10*18+7],g=c[18]-c[10],c[10]+=c[18],c[18]=g*e[v+-12*18+7],g=c[19]-c[11],c[11]+=c[19],c[19]=g*e[v+-12*18+7],g=c[16]-c[12],c[12]+=c[16],c[16]=g*e[v+-14*18+7],g=c[17]-c[13],c[13]+=c[17],c[17]=g*e[v+-14*18+7],g=-c[20]+c[24],c[20]+=c[24],c[24]=g*e[v+-12*18+7],g=-c[21]+c[25],c[21]+=c[25],c[25]=g*e[v+-12*18+7],g=c[4]-c[8],c[4]+=c[8],c[8]=g*e[v+-12*18+7],g=c[5]-c[9],c[5]+=c[9],c[9]=g*e[v+-12*18+7],g=c[0]-c[12],c[0]+=c[12],c[12]=g*e[v+-4*18+7],g=c[1]-c[13],c[1]+=c[13],c[13]=g*e[v+-4*18+7],g=c[16]-c[28],c[16]+=c[28],c[28]=g*e[v+-4*18+7],g=-c[17]+c[29],c[17]+=c[29],c[29]=g*e[v+-4*18+7],g=ln.SQRT2*(c[2]-c[10]),c[2]+=c[10],c[10]=g,g=ln.SQRT2*(c[3]-c[11]),c[3]+=c[11],c[11]=g,g=ln.SQRT2*(-c[18]+c[26]),c[18]+=c[26],c[26]=g-c[18],g=ln.SQRT2*(-c[19]+c[27]),c[19]+=c[27],c[27]=g-c[19],g=c[2],c[19]-=c[3],c[3]-=g,c[2]=c[31]-g,c[31]+=g,g=c[3],c[11]-=c[19],c[18]-=g,c[3]=c[30]-g,c[30]+=g,g=c[18],c[27]-=c[11],c[19]-=g,c[18]=c[15]-g,c[15]+=g,g=c[19],c[10]-=g,c[19]=c[14]-g,c[14]+=g,g=c[10],c[11]-=g,c[10]=c[23]-g,c[23]+=g,g=c[11],c[26]-=g,c[11]=c[22]-g,c[22]+=g,g=c[26],c[27]-=g,c[26]=c[7]-g,c[7]+=g,g=c[27],c[27]=c[6]-g,c[6]+=g,g=ln.SQRT2*(c[0]-c[4]),c[0]+=c[4],c[4]=g,g=ln.SQRT2*(c[1]-c[5]),c[1]+=c[5],c[5]=g,g=ln.SQRT2*(c[16]-c[20]),c[16]+=c[20],c[20]=g,g=ln.SQRT2*(c[17]-c[21]),c[17]+=c[21],c[21]=g,g=-ln.SQRT2*(c[8]-c[12]),c[8]+=c[12],c[12]=g-c[8],g=-ln.SQRT2*(c[9]-c[13]),c[9]+=c[13],c[13]=g-c[9],g=-ln.SQRT2*(c[25]-c[29]),c[25]+=c[29],c[29]=g-c[25],g=-ln.SQRT2*(c[24]+c[28]),c[24]-=c[28],c[28]=g-c[24],g=c[24]-c[16],c[24]=g,g=c[20]-g,c[20]=g,g=c[28]-g,c[28]=g,g=c[25]-c[17],c[25]=g,g=c[21]-g,c[21]=g,g=c[29]-g,c[29]=g,g=c[17]-c[1],c[17]=g,g=c[9]-g,c[9]=g,g=c[25]-g,c[25]=g,g=c[5]-g,c[5]=g,g=c[21]-g,c[21]=g,g=c[13]-g,c[13]=g,g=c[29]-g,c[29]=g,g=c[1]-c[0],c[1]=g,g=c[16]-g,c[16]=g,g=c[17]-g,c[17]=g,g=c[8]-g,c[8]=g,g=c[9]-g,c[9]=g,g=c[24]-g,c[24]=g,g=c[25]-g,c[25]=g,g=c[4]-g,c[4]=g,g=c[5]-g,c[5]=g,g=c[20]-g,c[20]=g,g=c[21]-g,c[21]=g,g=c[12]-g,c[12]=g,g=c[13]-g,c[13]=g,g=c[28]-g,c[28]=g,g=c[29]-g,c[29]=g,g=c[0],c[0]+=c[31],c[31]-=g,g=c[1],c[1]+=c[30],c[30]-=g,g=c[16],c[16]+=c[15],c[15]-=g,g=c[17],c[17]+=c[14],c[14]-=g,g=c[8],c[8]+=c[23],c[23]-=g,g=c[9],c[9]+=c[22],c[22]-=g,g=c[24],c[24]+=c[7],c[7]-=g,g=c[25],c[25]+=c[6],c[6]-=g,g=c[4],c[4]+=c[27],c[27]-=g,g=c[5],c[5]+=c[26],c[26]-=g,g=c[20],c[20]+=c[11],c[11]-=g,g=c[21],c[21]+=c[10],c[10]-=g,g=c[12],c[12]+=c[19],c[19]-=g,g=c[13],c[13]+=c[18],c[18]-=g,g=c[28],c[28]+=c[3],c[3]-=g,g=c[29],c[29]+=c[2],c[2]-=g}}function m(d,l){for(var c=0;c<3;c++){var v,h,A,T,k,p;T=d[l+2*3]*t[N.SHORT_TYPE][0]-d[l+5*3],v=d[l+0*3]*t[N.SHORT_TYPE][2]-d[l+3*3],h=T+v,A=T-v,T=d[l+5*3]*t[N.SHORT_TYPE][0]+d[l+2*3],v=d[l+3*3]*t[N.SHORT_TYPE][2]+d[l+0*3],k=T+v,p=-T+v,v=(d[l+1*3]*t[N.SHORT_TYPE][1]-d[l+4*3])*2069978111953089e-26,T=(d[l+4*3]*t[N.SHORT_TYPE][1]+d[l+1*3])*2069978111953089e-26,d[l+3*0]=h*190752519173728e-25+v,d[l+3*5]=-k*190752519173728e-25+T,A=A*.8660254037844387*1907525191737281e-26,k=k*.5*1907525191737281e-26+T,d[l+3*1]=A-k,d[l+3*2]=A+k,h=h*.5*1907525191737281e-26-v,p=p*.8660254037844387*1907525191737281e-26,d[l+3*3]=h+p,d[l+3*4]=h-p,l++}}function u(d,l,c){var v,h;{var A,T,k,p,L,O,g,B;A=c[17]-c[9],k=c[15]-c[11],p=c[14]-c[12],L=c[0]+c[8],O=c[1]+c[7],g=c[2]+c[6],B=c[3]+c[5],d[l+17]=L+g-B-(O-c[4]),h=(L+g-B)*a[19]+(O-c[4]),v=(A-k-p)*a[18],d[l+5]=v+h,d[l+6]=v-h,T=(c[16]-c[10])*a[18],O=O*a[19]+c[4],v=A*a[12]+T+k*a[13]+p*a[14],h=-L*a[16]+O-g*a[17]+B*a[15],d[l+1]=v+h,d[l+2]=v-h,v=A*a[13]-T-k*a[14]+p*a[12],h=-L*a[17]+O-g*a[15]+B*a[16],d[l+9]=v+h,d[l+10]=v-h,v=A*a[14]-T+k*a[12]-p*a[13],h=L*a[15]-O+g*a[16]-B*a[17],d[l+13]=v+h,d[l+14]=v-h}{var R,C,I,b,y,_,w,E;R=c[8]-c[0],I=c[6]-c[2],b=c[5]-c[3],y=c[17]+c[9],_=c[16]+c[10],w=c[15]+c[11],E=c[14]+c[12],d[l+0]=y+w+E+(_+c[13]),v=(y+w+E)*a[19]-(_+c[13]),h=(R-I+b)*a[18],d[l+11]=v+h,d[l+12]=v-h,C=(c[7]-c[1])*a[18],_=c[13]-_*a[19],v=y*a[15]-_+w*a[16]+E*a[17],h=R*a[14]+C+I*a[12]+b*a[13],d[l+3]=v+h,d[l+4]=v-h,v=-y*a[17]+_-w*a[15]-E*a[16],h=R*a[13]+C-I*a[14]-b*a[12],d[l+7]=v+h,d[l+8]=v-h,v=-y*a[16]+_-w*a[17]-E*a[15],h=R*a[12]-C+I*a[13]-b*a[14],d[l+15]=v+h,d[l+16]=v-h}}this.mdct_sub48=function(d,l,c){for(var v=l,h=286,A=0;A<d.channels_out;A++){for(var T=0;T<d.mode_gr;T++){for(var k,p=d.l3_side.tt[T][A],L=p.xr,O=0,g=d.sb_sample[A][1-T],B=0,R=0;R<18/2;R++)for(o(v,h,g[B]),o(v,h+32,g[B+1]),B+=2,h+=64,k=1;k<32;k+=2)g[B-1][k]*=-1;for(k=0;k<32;k++,O+=18){var C=p.block_type,I=d.sb_sample[A][T],b=d.sb_sample[A][1-T];if(p.mixed_block_flag!=0&&k<2&&(C=0),d.amp_filter[k]<1e-12)X8.fill(L,O+0,O+18,0);else{if(d.amp_filter[k]<1)for(var R=0;R<18;R++)b[R][r[k]]*=d.amp_filter[k];if(C==N.SHORT_TYPE){for(var R=-12/4;R<0;R++){var y=t[N.SHORT_TYPE][R+3];L[O+R*3+9]=I[9+R][r[k]]*y-I[8-R][r[k]],L[O+R*3+18]=I[14-R][r[k]]*y+I[15+R][r[k]],L[O+R*3+10]=I[15+R][r[k]]*y-I[14-R][r[k]],L[O+R*3+19]=b[2-R][r[k]]*y+b[3+R][r[k]],L[O+R*3+11]=b[3+R][r[k]]*y-b[2-R][r[k]],L[O+R*3+20]=b[8-R][r[k]]*y+b[9+R][r[k]]}m(L,O)}else{for(var _=G8(18),R=-36/4;R<0;R++){var w,E;w=t[C][R+27]*b[R+9][r[k]]+t[C][R+36]*b[8-R][r[k]],E=t[C][R+9]*I[R+9][r[k]]-t[C][R+18]*I[8-R][r[k]],_[R+9]=w-E*n[3+R+9],_[R+18]=w*n[3+R+9]+E}u(L,O,_)}}if(C!=N.SHORT_TYPE&&k!=0)for(var R=7;R>=0;--R){var M,V;M=L[O+R]*s[20+R]+L[O+-1-R]*i[28+R],V=L[O+R]*i[28+R]-L[O+-1-R]*s[20+R],L[O+-1-R]=M,L[O+R]=V}}}if(v=c,h=286,d.mode_gr==1)for(var q=0;q<18;q++)Y8.arraycopy(d.sb_sample[A][1][q],0,d.sb_sample[A][0][q],0,32)}}}var Z8=ze.System,Q8=ze.new_float,J8=ze.new_float_n;function Po(){this.l=Q8(N.SBMAX_l),this.s=J8([N.SBMAX_s,3]);var e=this;this.assign=function(t){Z8.arraycopy(t.l,0,e.l,0,N.SBMAX_l);for(var n=0;n<N.SBMAX_s;n++)for(var a=0;a<3;a++)e.s[n][a]=t.s[n][a]}}function ys(){this.thm=new Po,this.en=new Po}function Ot(e){var t=e;this.ordinal=function(){return t}}Ot.STEREO=new Ot(0);Ot.JOINT_STEREO=new Ot(1);Ot.DUAL_CHANNEL=new Ot(2);Ot.MONO=new Ot(3);Ot.NOT_SET=new Ot(4);var Y1=ze.System,io=ze.VbrMode,X1=ze.new_array_n,G1=ze.new_float,e6=ze.new_float_n,t6=ze.new_int,ro=ze.assert;N.ENCDELAY=576;N.POSTDELAY=1152;N.MDCTDELAY=48;N.FFTOFFSET=224+N.MDCTDELAY;N.DECDELAY=528;N.SBLIMIT=32;N.CBANDS=64;N.SBPSY_l=21;N.SBPSY_s=12;N.SBMAX_l=22;N.SBMAX_s=13;N.PSFB21=6;N.PSFB12=6;N.BLKSIZE=1024;N.HBLKSIZE=N.BLKSIZE/2+1;N.BLKSIZE_s=256;N.HBLKSIZE_s=N.BLKSIZE_s/2+1;N.NORM_TYPE=0;N.START_TYPE=1;N.SHORT_TYPE=2;N.STOP_TYPE=3;N.MPG_MD_LR_LR=0;N.MPG_MD_LR_I=1;N.MPG_MD_MS_LR=2;N.MPG_MD_MS_I=3;N.fircoef=[-.0207887*5,-.0378413*5,-.0432472*5,-.031183*5,779609e-23*5,.0467745*5,.10091*5,.151365*5,.187098*5];function N(){var e=N.FFTOFFSET,t=N.MPG_MD_MS_LR,n=null;this.psy=null;var a=null,s=null,i=null;this.setModules=function(d,l,c,v){n=d,this.psy=l,a=l,s=v,i=c};var r=new K8;function o(d){var l,c;if(d.ATH.useAdjust==0){d.ATH.adjust=1;return}if(c=d.loudness_sq[0][0],l=d.loudness_sq[1][0],d.channels_out==2?(c+=d.loudness_sq[0][1],l+=d.loudness_sq[1][1]):(c+=c,l+=l),d.mode_gr==2&&(c=Math.max(c,l)),c*=.5,c*=d.ATH.aaSensitivityP,c>.03125)d.ATH.adjust>=1?d.ATH.adjust=1:d.ATH.adjust<d.ATH.adjustLimit&&(d.ATH.adjust=d.ATH.adjustLimit),d.ATH.adjustLimit=1;else{var v=31.98*c+625e-6;d.ATH.adjust>=v?(d.ATH.adjust*=v*.075+.925,d.ATH.adjust<v&&(d.ATH.adjust=v)):d.ATH.adjustLimit>=v?d.ATH.adjust=v:d.ATH.adjust<d.ATH.adjustLimit&&(d.ATH.adjust=d.ATH.adjustLimit),d.ATH.adjustLimit=v}}function m(d){var l,c;for(ro(d.bitrate_index>=0&&d.bitrate_index<16),ro(d.mode_ext>=0&&d.mode_ext<4),d.bitrate_stereoMode_Hist[d.bitrate_index][4]++,d.bitrate_stereoMode_Hist[15][4]++,d.channels_out==2&&(d.bitrate_stereoMode_Hist[d.bitrate_index][d.mode_ext]++,d.bitrate_stereoMode_Hist[15][d.mode_ext]++),l=0;l<d.mode_gr;++l)for(c=0;c<d.channels_out;++c){var v=d.l3_side.tt[l][c].block_type|0;d.l3_side.tt[l][c].mixed_block_flag!=0&&(v=4),d.bitrate_blockType_Hist[d.bitrate_index][v]++,d.bitrate_blockType_Hist[d.bitrate_index][5]++,d.bitrate_blockType_Hist[15][v]++,d.bitrate_blockType_Hist[15][5]++}}function u(d,l){var c=d.internal_flags,v,h;if(c.lame_encode_frame_init==0){var A,T,k=G1(2014),p=G1(2014);for(c.lame_encode_frame_init=1,A=0,T=0;A<286+576*(1+c.mode_gr);++A)A<576*c.mode_gr?(k[A]=0,c.channels_out==2&&(p[A]=0)):(k[A]=l[0][T],c.channels_out==2&&(p[A]=l[1][T]),++T);for(h=0;h<c.mode_gr;h++)for(v=0;v<c.channels_out;v++)c.l3_side.tt[h][v].block_type=N.SHORT_TYPE;r.mdct_sub48(c,k,p),ro(c.mf_size>=N.BLKSIZE+d.framesize-N.FFTOFFSET),ro(c.mf_size>=512+d.framesize-32)}}this.lame_encode_mp3_frame=function(d,l,c,v,h,A){var T,k=X1([2,2]);k[0][0]=new ys,k[0][1]=new ys,k[1][0]=new ys,k[1][1]=new ys;var p=X1([2,2]);p[0][0]=new ys,p[0][1]=new ys,p[1][0]=new ys,p[1][1]=new ys;var L,O=[null,null],g=d.internal_flags,B=e6([2,4]),R=[.5,.5],C=[[0,0],[0,0]],I=[[0,0],[0,0]],b,y,_;if(O[0]=l,O[1]=c,g.lame_encode_frame_init==0&&u(d,O),g.padding=0,(g.slot_lag-=g.frac_SpF)<0&&(g.slot_lag+=d.out_samplerate,g.padding=1),g.psymodel!=0){var w,E=[null,null],M=0,V=t6(2);for(_=0;_<g.mode_gr;_++){for(y=0;y<g.channels_out;y++)E[y]=O[y],M=576+_*576-N.FFTOFFSET;if(d.VBR==io.vbr_mtrh||d.VBR==io.vbr_mt?w=a.L3psycho_anal_vbr(d,E,M,_,k,p,C[_],I[_],B[_],V):w=a.L3psycho_anal_ns(d,E,M,_,k,p,C[_],I[_],B[_],V),w!=0)return-4;for(d.mode==Ot.JOINT_STEREO&&(R[_]=B[_][2]+B[_][3],R[_]>0&&(R[_]=B[_][3]/R[_])),y=0;y<g.channels_out;y++){var q=g.l3_side.tt[_][y];q.block_type=V[y],q.mixed_block_flag=0}}}else for(_=0;_<g.mode_gr;_++)for(y=0;y<g.channels_out;y++)g.l3_side.tt[_][y].block_type=N.NORM_TYPE,g.l3_side.tt[_][y].mixed_block_flag=0,I[_][y]=C[_][y]=700;if(o(g),r.mdct_sub48(g,O[0],O[1]),g.mode_ext=N.MPG_MD_LR_LR,d.force_ms)g.mode_ext=N.MPG_MD_MS_LR;else if(d.mode==Ot.JOINT_STEREO){var $=0,U=0;for(_=0;_<g.mode_gr;_++)for(y=0;y<g.channels_out;y++)$+=I[_][y],U+=C[_][y];if($<=1*U){var f=g.l3_side.tt[0],x=g.l3_side.tt[g.mode_gr-1];f[0].block_type==f[1].block_type&&x[0].block_type==x[1].block_type&&(g.mode_ext=N.MPG_MD_MS_LR)}}if(g.mode_ext==t?(L=p,b=I):(L=k,b=C),d.analysis&&g.pinfo!=null)for(_=0;_<g.mode_gr;_++)for(y=0;y<g.channels_out;y++)g.pinfo.ms_ratio[_]=g.ms_ratio[_],g.pinfo.ms_ener_ratio[_]=R[_],g.pinfo.blocktype[_][y]=g.l3_side.tt[_][y].block_type,g.pinfo.pe[_][y]=b[_][y],Y1.arraycopy(g.l3_side.tt[_][y].xr,0,g.pinfo.xr[_][y],0,576),g.mode_ext==t&&(g.pinfo.ers[_][y]=g.pinfo.ers[_][y+2],Y1.arraycopy(g.pinfo.energy[_][y+2],0,g.pinfo.energy[_][y],0,g.pinfo.energy[_][y].length));if(d.VBR==io.vbr_off||d.VBR==io.vbr_abr){var H,F;for(H=0;H<18;H++)g.nsPsy.pefirbuf[H]=g.nsPsy.pefirbuf[H+1];for(F=0,_=0;_<g.mode_gr;_++)for(y=0;y<g.channels_out;y++)F+=b[_][y];for(g.nsPsy.pefirbuf[18]=F,F=g.nsPsy.pefirbuf[9],H=0;H<9;H++)F+=(g.nsPsy.pefirbuf[H]+g.nsPsy.pefirbuf[18-H])*N.fircoef[H];for(F=670*5*g.mode_gr*g.channels_out/F,_=0;_<g.mode_gr;_++)for(y=0;y<g.channels_out;y++)b[_][y]*=F}if(g.iteration_loop.iteration_loop(d,b,R,L),n.format_bitstream(d),T=n.copy_buffer(g,v,h,A,1),d.bWriteVbrTag&&s.addVbrFrame(d),d.analysis&&g.pinfo!=null){for(y=0;y<g.channels_out;y++){var se;for(se=0;se<e;se++)g.pinfo.pcmdata[y][se]=g.pinfo.pcmdata[y][se+d.framesize];for(se=e;se<1600;se++)g.pinfo.pcmdata[y][se]=O[y][se-e]}i.set_frame_pinfo(d,L)}return m(g),T}}var K1=ze.Util,Z1=ze.new_float;function n6(){var e=Z1(N.BLKSIZE),t=Z1(N.BLKSIZE_s/2),n=[.9238795325112867,.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475];function a(i,r,o){var m=0,u,d,l;o<<=1;var c=r+o;u=4;do{var v,h,A,T,k,p,L;L=u>>1,T=u,k=u<<1,p=k+T,u=k<<1,d=r,l=d+L;do{var O,g,B,R;g=i[d+0]-i[d+T],O=i[d+0]+i[d+T],R=i[d+k]-i[d+p],B=i[d+k]+i[d+p],i[d+k]=O-B,i[d+0]=O+B,i[d+p]=g-R,i[d+T]=g+R,g=i[l+0]-i[l+T],O=i[l+0]+i[l+T],R=K1.SQRT2*i[l+p],B=K1.SQRT2*i[l+k],i[l+k]=O-B,i[l+0]=O+B,i[l+p]=g-R,i[l+T]=g+R,l+=u,d+=u}while(d<c);for(h=n[m+0],v=n[m+1],A=1;A<L;A++){var C,I;C=1-2*v*v,I=2*v*h,d=r+A,l=r+T-A;do{var b,y,_,O,g,w,B,E,R,M;y=I*i[d+T]-C*i[l+T],b=C*i[d+T]+I*i[l+T],g=i[d+0]-b,O=i[d+0]+b,w=i[l+0]-y,_=i[l+0]+y,y=I*i[d+p]-C*i[l+p],b=C*i[d+p]+I*i[l+p],R=i[d+k]-b,B=i[d+k]+b,M=i[l+k]-y,E=i[l+k]+y,y=v*B-h*M,b=h*B+v*M,i[d+k]=O-b,i[d+0]=O+b,i[l+p]=w-y,i[l+T]=w+y,y=h*E-v*R,b=v*E+h*R,i[l+k]=_-b,i[l+0]=_+b,i[d+p]=g-y,i[d+T]=g+y,l+=u,d+=u}while(d<c);C=h,h=C*n[m+0]-v*n[m+1],v=C*n[m+1]+v*n[m+0]}m+=2}while(u<o)}var s=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(i,r,o,m,u){for(var d=0;d<3;d++){var l=N.BLKSIZE_s/2,c=65535&576/3*(d+1),v=N.BLKSIZE_s/8-1;do{var h,A,T,k,p,L=s[v<<2]&255;h=t[L]*m[o][u+L+c],p=t[127-L]*m[o][u+L+c+128],A=h-p,h=h+p,T=t[L+64]*m[o][u+L+c+64],p=t[63-L]*m[o][u+L+c+192],k=T-p,T=T+p,l-=4,r[d][l+0]=h+T,r[d][l+2]=h-T,r[d][l+1]=A+k,r[d][l+3]=A-k,h=t[L+1]*m[o][u+L+c+1],p=t[126-L]*m[o][u+L+c+129],A=h-p,h=h+p,T=t[L+65]*m[o][u+L+c+65],p=t[62-L]*m[o][u+L+c+193],k=T-p,T=T+p,r[d][l+N.BLKSIZE_s/2+0]=h+T,r[d][l+N.BLKSIZE_s/2+2]=h-T,r[d][l+N.BLKSIZE_s/2+1]=A+k,r[d][l+N.BLKSIZE_s/2+3]=A-k}while(--v>=0);a(r[d],l,N.BLKSIZE_s/2)}},this.fft_long=function(i,r,o,m,u){var d=N.BLKSIZE/8-1,l=N.BLKSIZE/2;do{var c,v,h,A,T,k=s[d]&255;c=e[k]*m[o][u+k],T=e[k+512]*m[o][u+k+512],v=c-T,c=c+T,h=e[k+256]*m[o][u+k+256],T=e[k+768]*m[o][u+k+768],A=h-T,h=h+T,l-=4,r[l+0]=c+h,r[l+2]=c-h,r[l+1]=v+A,r[l+3]=v-A,c=e[k+1]*m[o][u+k+1],T=e[k+513]*m[o][u+k+513],v=c-T,c=c+T,h=e[k+257]*m[o][u+k+257],T=e[k+769]*m[o][u+k+769],A=h-T,h=h+T,r[l+N.BLKSIZE/2+0]=c+h,r[l+N.BLKSIZE/2+2]=c-h,r[l+N.BLKSIZE/2+1]=v+A,r[l+N.BLKSIZE/2+3]=v-A}while(--d>=0);a(r,l,N.BLKSIZE/2)},this.init_fft=function(i){for(var r=0;r<N.BLKSIZE;r++)e[r]=.42-.5*Math.cos(2*Math.PI*(r+.5)/N.BLKSIZE)+.08*Math.cos(4*Math.PI*(r+.5)/N.BLKSIZE);for(var r=0;r<N.BLKSIZE_s/2;r++)t[r]=.5*(1-Math.cos(2*Math.PI*(r+.5)/N.BLKSIZE_s))}}var ui=ze.VbrMode,Q1=ze.Float,di=ze.ShortBlock,Pn=ze.Util,a6=ze.Arrays,fn=ze.new_float,sa=ze.new_float_n,Hs=ze.new_int,yt=ze.assert;function Ql(){var e=new n6,t=2.302585092994046,n=2,a=16,s=2,i=16,r=.34,o=1/(14752*14752)/(N.BLKSIZE/2),m=.01,u=.8,d=.6,l=.3,c=3.5,v=21,h=.2302585093;function A(D){return D}function T(D,j){for(var W=0,K=0;K<N.BLKSIZE/2;++K)W+=D[K]*j.ATH.eql_w[K];return W*=o,W}function k(D,j,W,K,J,P,te,ae,ne,we,ce){var Se=D.internal_flags;if(ne<2)e.fft_long(Se,K[J],ne,we,ce),e.fft_short(Se,P[te],ne,we,ce);else if(ne==2){for(var re=N.BLKSIZE-1;re>=0;--re){var Ie=K[J+0][re],Ee=K[J+1][re];K[J+0][re]=(Ie+Ee)*Pn.SQRT2*.5,K[J+1][re]=(Ie-Ee)*Pn.SQRT2*.5}for(var Je=2;Je>=0;--Je)for(var re=N.BLKSIZE_s-1;re>=0;--re){var Ie=P[te+0][Je][re],Ee=P[te+1][Je][re];P[te+0][Je][re]=(Ie+Ee)*Pn.SQRT2*.5,P[te+1][Je][re]=(Ie-Ee)*Pn.SQRT2*.5}}j[0]=K[J+0][0],j[0]*=j[0];for(var re=N.BLKSIZE/2-1;re>=0;--re){var ve=K[J+0][N.BLKSIZE/2-re],We=K[J+0][N.BLKSIZE/2+re];j[N.BLKSIZE/2-re]=(ve*ve+We*We)*.5}for(var Je=2;Je>=0;--Je){W[Je][0]=P[te+0][Je][0],W[Je][0]*=W[Je][0];for(var re=N.BLKSIZE_s/2-1;re>=0;--re){var ve=P[te+0][Je][N.BLKSIZE_s/2-re],We=P[te+0][Je][N.BLKSIZE_s/2+re];W[Je][N.BLKSIZE_s/2-re]=(ve*ve+We*We)*.5}}{for(var ut=0,re=11;re<N.HBLKSIZE;re++)ut+=j[re];Se.tot_ener[ne]=ut}if(D.analysis){for(var re=0;re<N.HBLKSIZE;re++)Se.pinfo.energy[ae][ne][re]=Se.pinfo.energy_save[ne][re],Se.pinfo.energy_save[ne][re]=j[re];Se.pinfo.pe[ae][ne]=Se.pe[ne]}D.athaa_loudapprox==2&&ne<2&&(Se.loudness_sq[ae][ne]=Se.loudness_sq_save[ne],Se.loudness_sq_save[ne]=T(j,Se))}var p=8,L=23,O=15,g,B,R,C=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749];function I(){g=Math.pow(10,(p+1)/16),B=Math.pow(10,(L+1)/16),R=Math.pow(10,O/10)}var b=[3.3246*3.3246,3.23837*3.23837,3.15437*3.15437,3.00412*3.00412,2.86103*2.86103,2.65407*2.65407,2.46209*2.46209,2.284*2.284,2.11879*2.11879,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,1.56911*1.56911,1.46658*1.46658,1.37074*1.37074,1.31036*1.31036,1.25264*1.25264,1.20648*1.20648,1.16203*1.16203,1.12765*1.12765,1.09428*1.09428,1.0659*1.0659,1.03826*1.03826,1.01895*1.01895,1],y=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1],_=[2.35364*2.35364,2.29259*2.29259,2.23313*2.23313,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,1.49999*1.49999,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.11084*1.11084,1.03826*1.03826];function w(D,j,W,K,J,P){var te;if(j>D)if(j<D*B)te=j/D;else return D+j;else{if(D>=j*B)return D+j;te=D/j}if(D+=j,K+3<=6){if(te>=g)return D;var ae=0|Pn.FAST_LOG10_X(te,16);return D*y[ae]}var ae=0|Pn.FAST_LOG10_X(te,16);if(j=J.ATH.cb_l[W]*J.ATH.adjust,D<R*j){if(D>j){var ne,we;return ne=1,ae<=13&&(ne=_[ae]),we=Pn.FAST_LOG10_X(D/j,10/15),D*((b[ae]-ne)*we+ne)}return ae>13?D:D*_[ae]}return D*b[ae]}var E=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1];function M(D,j,W){var K;if(D<0&&(D=0),j<0&&(j=0),D<=0)return j;if(j<=0)return D;if(j>D?K=j/D:K=D/j,W>=-2&&W<=2){if(K>=g)return D+j;var J=0|Pn.FAST_LOG10_X(K,16);return(D+j)*E[J]}return K<B?D+j:(D<j&&(D=j),D)}function V(D,j){var W=D.internal_flags;if(W.channels_out>1){for(var K=0;K<N.SBMAX_l;K++){var J=W.thm[0].l[K],P=W.thm[1].l[K];W.thm[0].l[K]+=P*j,W.thm[1].l[K]+=J*j}for(var K=0;K<N.SBMAX_s;K++)for(var te=0;te<3;te++){var J=W.thm[0].s[K][te],P=W.thm[1].s[K][te];W.thm[0].s[K][te]+=P*j,W.thm[1].s[K][te]+=J*j}}}function q(D){for(var j=0;j<N.SBMAX_l;j++)if(!(D.thm[0].l[j]>1.58*D.thm[1].l[j]||D.thm[1].l[j]>1.58*D.thm[0].l[j])){var W=D.mld_l[j]*D.en[3].l[j],K=Math.max(D.thm[2].l[j],Math.min(D.thm[3].l[j],W));W=D.mld_l[j]*D.en[2].l[j];var J=Math.max(D.thm[3].l[j],Math.min(D.thm[2].l[j],W));D.thm[2].l[j]=K,D.thm[3].l[j]=J}for(var j=0;j<N.SBMAX_s;j++)for(var P=0;P<3;P++)if(!(D.thm[0].s[j][P]>1.58*D.thm[1].s[j][P]||D.thm[1].s[j][P]>1.58*D.thm[0].s[j][P])){var W=D.mld_s[j]*D.en[3].s[j][P],K=Math.max(D.thm[2].s[j][P],Math.min(D.thm[3].s[j][P],W));W=D.mld_s[j]*D.en[2].s[j][P];var J=Math.max(D.thm[3].s[j][P],Math.min(D.thm[2].s[j][P],W));D.thm[2].s[j][P]=K,D.thm[3].s[j][P]=J}}function $(D,j,W){var K=j,J=Math.pow(10,W);j*=2,K*=2;for(var P=0;P<N.SBMAX_l;P++){var te,ae,ne,we;if(we=D.ATH.cb_l[D.bm_l[P]]*J,te=Math.min(Math.max(D.thm[0].l[P],we),Math.max(D.thm[1].l[P],we)),ae=Math.max(D.thm[2].l[P],we),ne=Math.max(D.thm[3].l[P],we),te*j<ae+ne){var ce=te*K/(ae+ne);ae*=ce,ne*=ce}D.thm[2].l[P]=Math.min(ae,D.thm[2].l[P]),D.thm[3].l[P]=Math.min(ne,D.thm[3].l[P])}J*=N.BLKSIZE_s/N.BLKSIZE;for(var P=0;P<N.SBMAX_s;P++)for(var Se=0;Se<3;Se++){var te,ae,ne,we;if(we=D.ATH.cb_s[D.bm_s[P]]*J,te=Math.min(Math.max(D.thm[0].s[P][Se],we),Math.max(D.thm[1].s[P][Se],we)),ae=Math.max(D.thm[2].s[P][Se],we),ne=Math.max(D.thm[3].s[P][Se],we),te*j<ae+ne){var ce=te*j/(ae+ne);ae*=ce,ne*=ce}D.thm[2].s[P][Se]=Math.min(D.thm[2].s[P][Se],ae),D.thm[3].s[P][Se]=Math.min(D.thm[3].s[P][Se],ne)}}function U(D,j,W,K,J){var P,te,ae=0,ne=0;for(P=te=0;P<N.SBMAX_s;++te,++P){for(var we=D.bo_s[P],ce=D.npart_s,Se=we<ce?we:ce;te<Se;)yt(j[te]>=0),yt(W[te]>=0),ae+=j[te],ne+=W[te],te++;if(D.en[K].s[P][J]=ae,D.thm[K].s[P][J]=ne,te>=ce){++P;break}yt(j[te]>=0),yt(W[te]>=0);{var re=D.PSY.bo_s_weight[P],Ie=1-re;ae=re*j[te],ne=re*W[te],D.en[K].s[P][J]+=ae,D.thm[K].s[P][J]+=ne,ae=Ie*j[te],ne=Ie*W[te]}}for(;P<N.SBMAX_s;++P)D.en[K].s[P][J]=0,D.thm[K].s[P][J]=0}function f(D,j,W,K){var J,P,te=0,ae=0;for(J=P=0;J<N.SBMAX_l;++P,++J){for(var ne=D.bo_l[J],we=D.npart_l,ce=ne<we?ne:we;P<ce;)yt(j[P]>=0),yt(W[P]>=0),te+=j[P],ae+=W[P],P++;if(D.en[K].l[J]=te,D.thm[K].l[J]=ae,P>=we){++J;break}yt(j[P]>=0),yt(W[P]>=0);{var Se=D.PSY.bo_l_weight[J],re=1-Se;te=Se*j[P],ae=Se*W[P],D.en[K].l[J]+=te,D.thm[K].l[J]+=ae,te=re*j[P],ae=re*W[P]}}for(;J<N.SBMAX_l;++J)D.en[K].l[J]=0,D.thm[K].l[J]=0}function x(D,j,W,K,J,P){var te=D.internal_flags,ae,ne;for(ne=ae=0;ne<te.npart_s;++ne){for(var we=0,ce=te.numlines_s[ne],Se=0;Se<ce;++Se,++ae){var re=j[P][ae];we+=re}W[ne]=we}for(yt(ne==te.npart_s),ae=ne=0;ne<te.npart_s;ne++){var Ie=te.s3ind_s[ne][0],Ee=te.s3_ss[ae++]*W[Ie];for(++Ie;Ie<=te.s3ind_s[ne][1];)Ee+=te.s3_ss[ae]*W[Ie],++ae,++Ie;{var Je=s*te.nb_s1[J][ne];K[ne]=Math.min(Ee,Je)}if(te.blocktype_old[J&1]==N.SHORT_TYPE){var Je=i*te.nb_s2[J][ne],ve=K[ne];K[ne]=Math.min(Je,ve)}te.nb_s2[J][ne]=te.nb_s1[J][ne],te.nb_s1[J][ne]=Ee,yt(K[ne]>=0)}for(;ne<=N.CBANDS;++ne)W[ne]=0,K[ne]=0}function H(D,j,W,K){var J=D.internal_flags;D.short_blocks==di.short_block_coupled&&!(j[0]!=0&&j[1]!=0)&&(j[0]=j[1]=0);for(var P=0;P<J.channels_out;P++)K[P]=N.NORM_TYPE,D.short_blocks==di.short_block_dispensed&&(j[P]=1),D.short_blocks==di.short_block_forced&&(j[P]=0),j[P]!=0?(yt(J.blocktype_old[P]!=N.START_TYPE),J.blocktype_old[P]==N.SHORT_TYPE&&(K[P]=N.STOP_TYPE)):(K[P]=N.SHORT_TYPE,J.blocktype_old[P]==N.NORM_TYPE&&(J.blocktype_old[P]=N.START_TYPE),J.blocktype_old[P]==N.STOP_TYPE&&(J.blocktype_old[P]=N.SHORT_TYPE)),W[P]=J.blocktype_old[P],J.blocktype_old[P]=K[P]}function F(D,j,W){return W>=1?D:W<=0?j:j>0?Math.pow(D/j,W)*j:0}var se=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130];function me(D,j){for(var W=309.07,K=0;K<N.SBMAX_s-1;K++)for(var J=0;J<3;J++){var P=D.thm.s[K][J];if(P>0){var te=P*j,ae=D.en.s[K][J];ae>te&&(ae>te*1e10?W+=se[K]*(10*t):W+=se[K]*Pn.FAST_LOG10(ae/te))}}return W}var X=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1];function G(D,j){for(var W=281.0575,K=0;K<N.SBMAX_l-1;K++){var J=D.thm.l[K];if(J>0){var P=J*j,te=D.en.l[K];te>P&&(te>P*1e10?W+=X[K]*(10*t):W+=X[K]*Pn.FAST_LOG10(te/P))}}return W}function ue(D,j,W,K,J){var P,te;for(P=te=0;P<D.npart_l;++P){var ae=0,ne=0,we;for(we=0;we<D.numlines_l[P];++we,++te){var ce=j[te];ae+=ce,ne<ce&&(ne=ce)}W[P]=ae,K[P]=ne,J[P]=ae*D.rnumlines_l[P],yt(D.rnumlines_l[P]>=0),yt(W[P]>=0),yt(K[P]>=0),yt(J[P]>=0)}}function be(D,j,W,K){var J=C.length-1,P=0,te=W[P]+W[P+1];if(te>0){var ae=j[P];ae<j[P+1]&&(ae=j[P+1]),yt(D.numlines_l[P]+D.numlines_l[P+1]-1>0),te=20*(ae*2-te)/(te*(D.numlines_l[P]+D.numlines_l[P+1]-1));var ne=0|te;ne>J&&(ne=J),K[P]=ne}else K[P]=0;for(P=1;P<D.npart_l-1;P++)if(te=W[P-1]+W[P]+W[P+1],te>0){var ae=j[P-1];ae<j[P]&&(ae=j[P]),ae<j[P+1]&&(ae=j[P+1]),yt(D.numlines_l[P-1]+D.numlines_l[P]+D.numlines_l[P+1]-1>0),te=20*(ae*3-te)/(te*(D.numlines_l[P-1]+D.numlines_l[P]+D.numlines_l[P+1]-1));var ne=0|te;ne>J&&(ne=J),K[P]=ne}else K[P]=0;if(yt(P==D.npart_l-1),te=W[P-1]+W[P],te>0){var ae=j[P-1];ae<j[P]&&(ae=j[P]),yt(D.numlines_l[P-1]+D.numlines_l[P]-1>0),te=20*(ae*2-te)/(te*(D.numlines_l[P-1]+D.numlines_l[P]-1));var ne=0|te;ne>J&&(ne=J),K[P]=ne}else K[P]=0;yt(P==D.npart_l-1)}var ke=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];this.L3psycho_anal_ns=function(D,j,W,K,J,P,te,ae,ne,we){var ce=D.internal_flags,Se=sa([2,N.BLKSIZE]),re=sa([2,3,N.BLKSIZE_s]),Ie=fn(N.CBANDS+1),Ee=fn(N.CBANDS+1),Je=fn(N.CBANDS+2),ve=Hs(2),We=Hs(2),ut,Le,Ze,Oe,it,Kt,Ye,ht,wt=sa([2,576]),nn,zn=Hs(N.CBANDS+2),dn=Hs(N.CBANDS+2);for(a6.fill(dn,0),ut=ce.channels_out,D.mode==Ot.JOINT_STEREO&&(ut=4),D.VBR==ui.vbr_off?nn=ce.ResvMax==0?0:ce.ResvSize/ce.ResvMax*.5:D.VBR==ui.vbr_rh||D.VBR==ui.vbr_mtrh||D.VBR==ui.vbr_mt?nn=.6:nn=1,Le=0;Le<ce.channels_out;Le++){var an=j[Le],Fn=W+576-350-v+192;for(Oe=0;Oe<576;Oe++){var Un,qn;for(Un=an[Fn+Oe+10],qn=0,it=0;it<(v-1)/2-1;it+=2)Un+=ke[it]*(an[Fn+Oe+it]+an[Fn+Oe+v-it]),qn+=ke[it+1]*(an[Fn+Oe+it+1]+an[Fn+Oe+v-it-1]);wt[Le][Oe]=Un+qn}J[K][Le].en.assign(ce.en[Le]),J[K][Le].thm.assign(ce.thm[Le]),ut>2&&(P[K][Le].en.assign(ce.en[Le+2]),P[K][Le].thm.assign(ce.thm[Le+2]))}for(Le=0;Le<ut;Le++){var da,ma,xn=fn(12),Aa=[0,0,0,0],ci=fn(12),Tl=1,_d,bd=fn(N.CBANDS),yd=fn(N.CBANDS),sn=[0,0,0,0],wd=fn(N.HBLKSIZE),Sd=sa([3,N.HBLKSIZE_s]);for(yt(ce.npart_s<=N.CBANDS),yt(ce.npart_l<=N.CBANDS),Oe=0;Oe<3;Oe++)xn[Oe]=ce.nsPsy.last_en_subshort[Le][Oe+6],yt(ce.nsPsy.last_en_subshort[Le][Oe+4]>0),ci[Oe]=xn[Oe]/ce.nsPsy.last_en_subshort[Le][Oe+4],Aa[0]+=xn[Oe];if(Le==2)for(Oe=0;Oe<576;Oe++){var Cl,Al;Cl=wt[0][Oe],Al=wt[1][Oe],wt[0][Oe]=Cl+Al,wt[1][Oe]=Cl-Al}{var kd=wt[Le&1],ji=0;for(Oe=0;Oe<9;Oe++){for(var ng=ji+64,bn=1;ji<ng;ji++)bn<Math.abs(kd[ji])&&(bn=Math.abs(kd[ji]));ce.nsPsy.last_en_subshort[Le][Oe]=xn[Oe+3]=bn,Aa[1+Oe/3]+=bn,bn>xn[Oe+3-2]?(yt(xn[Oe+3-2]>0),bn=bn/xn[Oe+3-2]):xn[Oe+3-2]>bn*10?bn=xn[Oe+3-2]/(bn*10):bn=0,ci[Oe+3]=bn}}if(D.analysis){var El=ci[0];for(Oe=1;Oe<12;Oe++)El<ci[Oe]&&(El=ci[Oe]);ce.pinfo.ers[K][Le]=ce.pinfo.ers_save[Le],ce.pinfo.ers_save[Le]=El}for(_d=Le==3?ce.nsPsy.attackthre_s:ce.nsPsy.attackthre,Oe=0;Oe<12;Oe++)sn[Oe/3]==0&&ci[Oe]>_d&&(sn[Oe/3]=Oe%3+1);for(Oe=1;Oe<4;Oe++){var Ml;Aa[Oe-1]>Aa[Oe]?(yt(Aa[Oe]>0),Ml=Aa[Oe-1]/Aa[Oe]):(yt(Aa[Oe-1]>0),Ml=Aa[Oe]/Aa[Oe-1]),Ml<1.7&&(sn[Oe]=0,Oe==1&&(sn[0]=0))}for(sn[0]!=0&&ce.nsPsy.lastAttacks[Le]!=0&&(sn[0]=0),(ce.nsPsy.lastAttacks[Le]==3||sn[0]+sn[1]+sn[2]+sn[3]!=0)&&(Tl=0,sn[1]!=0&&sn[0]!=0&&(sn[1]=0),sn[2]!=0&&sn[1]!=0&&(sn[2]=0),sn[3]!=0&&sn[2]!=0&&(sn[3]=0)),Le<2?We[Le]=Tl:Tl==0&&(We[0]=We[1]=0),ne[Le]=ce.tot_ener[Le],ma=re,da=Se,k(D,wd,Sd,da,Le&1,ma,Le&1,K,Le,j,W),ue(ce,wd,Ie,bd,yd),be(ce,bd,yd,zn),ht=0;ht<3;ht++){var Rl,Vn;for(x(D,Sd,Ee,Je,Le,ht),U(ce,Ee,Je,Le,ht),Ye=0;Ye<N.SBMAX_s;Ye++){if(Vn=ce.thm[Le].s[Ye][ht],Vn*=u,sn[ht]>=2||sn[ht+1]==1){var Ni=ht!=0?ht-1:2,bn=F(ce.thm[Le].s[Ye][Ni],Vn,d*nn);Vn=Math.min(Vn,bn)}if(sn[ht]==1){var Ni=ht!=0?ht-1:2,bn=F(ce.thm[Le].s[Ye][Ni],Vn,l*nn);Vn=Math.min(Vn,bn)}else if(ht!=0&&sn[ht-1]==3||ht==0&&ce.nsPsy.lastAttacks[Le]==3){var Ni=ht!=2?ht+1:0,bn=F(ce.thm[Le].s[Ye][Ni],Vn,l*nn);Vn=Math.min(Vn,bn)}Rl=xn[ht*3+3]+xn[ht*3+4]+xn[ht*3+5],xn[ht*3+5]*6<Rl&&(Vn*=.5,xn[ht*3+4]*6<Rl&&(Vn*=.5)),ce.thm[Le].s[Ye][ht]=Vn}}for(ce.nsPsy.lastAttacks[Le]=sn[2],Kt=0,Ze=0;Ze<ce.npart_l;Ze++){for(var Vs=ce.s3ind[Ze][0],Il=Ie[Vs]*C[zn[Vs]],Ps=ce.s3_ll[Kt++]*Il;++Vs<=ce.s3ind[Ze][1];)Il=Ie[Vs]*C[zn[Vs]],Ps=w(Ps,ce.s3_ll[Kt++]*Il,Vs,Vs-Ze,ce);Ps*=.158489319246111,ce.blocktype_old[Le&1]==N.SHORT_TYPE?Je[Ze]=Ps:Je[Ze]=F(Math.min(Ps,Math.min(n*ce.nb_1[Le][Ze],a*ce.nb_2[Le][Ze])),Ps,nn),ce.nb_2[Le][Ze]=ce.nb_1[Le][Ze],ce.nb_1[Le][Ze]=Ps}for(;Ze<=N.CBANDS;++Ze)Ie[Ze]=0,Je[Ze]=0;f(ce,Ie,Je,Le)}if((D.mode==Ot.STEREO||D.mode==Ot.JOINT_STEREO)&&D.interChRatio>0&&V(D,D.interChRatio),D.mode==Ot.JOINT_STEREO){var Bl;q(ce),Bl=D.msfix,Math.abs(Bl)>0&&$(ce,Bl,D.ATHlower*ce.ATH.adjust)}for(H(D,We,we,ve),Le=0;Le<ut;Le++){var $i,Hi=0,qr,Wr;Le>1?($i=ae,Hi=-2,qr=N.NORM_TYPE,(we[0]==N.SHORT_TYPE||we[1]==N.SHORT_TYPE)&&(qr=N.SHORT_TYPE),Wr=P[K][Le-2]):($i=te,Hi=0,qr=we[Le],Wr=J[K][Le]),qr==N.SHORT_TYPE?$i[Hi+Le]=me(Wr,ce.masking_lower):$i[Hi+Le]=G(Wr,ce.masking_lower),D.analysis&&(ce.pinfo.pe[K][Le]=$i[Hi+Le])}return 0};function je(D,j,W,K,J,P,te,ae){var ne=D.internal_flags;if(K<2)e.fft_long(ne,te[ae],K,j,W);else if(K==2)for(var we=N.BLKSIZE-1;we>=0;--we){var ce=te[ae+0][we],Se=te[ae+1][we];te[ae+0][we]=(ce+Se)*Pn.SQRT2*.5,te[ae+1][we]=(ce-Se)*Pn.SQRT2*.5}P[0]=te[ae+0][0],P[0]*=P[0];for(var we=N.BLKSIZE/2-1;we>=0;--we){var re=te[ae+0][N.BLKSIZE/2-we],Ie=te[ae+0][N.BLKSIZE/2+we];P[N.BLKSIZE/2-we]=(re*re+Ie*Ie)*.5}{for(var Ee=0,we=11;we<N.HBLKSIZE;we++)Ee+=P[we];ne.tot_ener[K]=Ee}if(D.analysis){for(var we=0;we<N.HBLKSIZE;we++)ne.pinfo.energy[J][K][we]=ne.pinfo.energy_save[K][we],ne.pinfo.energy_save[K][we]=P[we];ne.pinfo.pe[J][K]=ne.pe[K]}}function Y(D,j,W,K,J,P,te,ae){var ne=D.internal_flags;if(J==0&&K<2&&e.fft_short(ne,te[ae],K,j,W),K==2)for(var we=N.BLKSIZE_s-1;we>=0;--we){var ce=te[ae+0][J][we],Se=te[ae+1][J][we];te[ae+0][J][we]=(ce+Se)*Pn.SQRT2*.5,te[ae+1][J][we]=(ce-Se)*Pn.SQRT2*.5}P[J][0]=te[ae+0][J][0],P[J][0]*=P[J][0];for(var we=N.BLKSIZE_s/2-1;we>=0;--we){var re=te[ae+0][J][N.BLKSIZE_s/2-we],Ie=te[ae+0][J][N.BLKSIZE_s/2+we];P[J][N.BLKSIZE_s/2-we]=(re*re+Ie*Ie)*.5}}function Z(D,j,W,K){var J=D.internal_flags;D.athaa_loudapprox==2&&W<2&&(J.loudness_sq[j][W]=J.loudness_sq_save[W],J.loudness_sq_save[W]=T(K,J))}var de=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];function xe(D,j,W,K,J,P,te,ae,ne,we){for(var ce=sa([2,576]),Se=D.internal_flags,re=Se.channels_out,Ie=D.mode==Ot.JOINT_STEREO?4:re,Ee=0;Ee<re;Ee++){firbuf=j[Ee];for(var Je=W+576-350-v+192,ve=0;ve<576;ve++){var We,ut;We=firbuf[Je+ve+10],ut=0;for(var Le=0;Le<(v-1)/2-1;Le+=2)We+=de[Le]*(firbuf[Je+ve+Le]+firbuf[Je+ve+v-Le]),ut+=de[Le+1]*(firbuf[Je+ve+Le+1]+firbuf[Je+ve+v-Le-1]);ce[Ee][ve]=We+ut}J[K][Ee].en.assign(Se.en[Ee]),J[K][Ee].thm.assign(Se.thm[Ee]),Ie>2&&(P[K][Ee].en.assign(Se.en[Ee+2]),P[K][Ee].thm.assign(Se.thm[Ee+2]))}for(var Ee=0;Ee<Ie;Ee++){var Ze=fn(12),Oe=fn(12),it=[0,0,0,0],Kt=ce[Ee&1],Ye=0,ht=Ee==3?Se.nsPsy.attackthre_s:Se.nsPsy.attackthre,wt=1;if(Ee==2)for(var ve=0,Le=576;Le>0;++ve,--Le){var nn=ce[0][ve],zn=ce[1][ve];ce[0][ve]=nn+zn,ce[1][ve]=nn-zn}for(var ve=0;ve<3;ve++)Oe[ve]=Se.nsPsy.last_en_subshort[Ee][ve+6],yt(Se.nsPsy.last_en_subshort[Ee][ve+4]>0),Ze[ve]=Oe[ve]/Se.nsPsy.last_en_subshort[Ee][ve+4],it[0]+=Oe[ve];for(var ve=0;ve<9;ve++){for(var dn=Ye+64,an=1;Ye<dn;Ye++)an<Math.abs(Kt[Ye])&&(an=Math.abs(Kt[Ye]));Se.nsPsy.last_en_subshort[Ee][ve]=Oe[ve+3]=an,it[1+ve/3]+=an,an>Oe[ve+3-2]?(yt(Oe[ve+3-2]>0),an=an/Oe[ve+3-2]):Oe[ve+3-2]>an*10?an=Oe[ve+3-2]/(an*10):an=0,Ze[ve+3]=an}for(var ve=0;ve<3;++ve){var Fn=Oe[ve*3+3]+Oe[ve*3+4]+Oe[ve*3+5],Un=1;Oe[ve*3+5]*6<Fn&&(Un*=.5,Oe[ve*3+4]*6<Fn&&(Un*=.5)),ae[Ee][ve]=Un}if(D.analysis){for(var qn=Ze[0],ve=1;ve<12;ve++)qn<Ze[ve]&&(qn=Ze[ve]);Se.pinfo.ers[K][Ee]=Se.pinfo.ers_save[Ee],Se.pinfo.ers_save[Ee]=qn}for(var ve=0;ve<12;ve++)ne[Ee][ve/3]==0&&Ze[ve]>ht&&(ne[Ee][ve/3]=ve%3+1);for(var ve=1;ve<4;ve++){var da=it[ve-1],ma=it[ve],xn=Math.max(da,ma);xn<4e4&&da<1.7*ma&&ma<1.7*da&&(ve==1&&ne[Ee][0]<=ne[Ee][ve]&&(ne[Ee][0]=0),ne[Ee][ve]=0)}ne[Ee][0]<=Se.nsPsy.lastAttacks[Ee]&&(ne[Ee][0]=0),(Se.nsPsy.lastAttacks[Ee]==3||ne[Ee][0]+ne[Ee][1]+ne[Ee][2]+ne[Ee][3]!=0)&&(wt=0,ne[Ee][1]!=0&&ne[Ee][0]!=0&&(ne[Ee][1]=0),ne[Ee][2]!=0&&ne[Ee][1]!=0&&(ne[Ee][2]=0),ne[Ee][3]!=0&&ne[Ee][2]!=0&&(ne[Ee][3]=0)),Ee<2?we[Ee]=wt:wt==0&&(we[0]=we[1]=0),te[Ee]=Se.tot_ener[Ee]}}function Te(D,j,W){if(W==0)for(var K=0;K<D.npart_s;K++)D.nb_s2[j][K]=D.nb_s1[j][K],D.nb_s1[j][K]=0}function Be(D,j){for(var W=0;W<D.npart_l;W++)D.nb_2[j][W]=D.nb_1[j][W],D.nb_1[j][W]=0}function $e(D,j,W,K){var J=C.length-1,P=0,te=W[P]+W[P+1];if(te>0){var ae=j[P];ae<j[P+1]&&(ae=j[P+1]),yt(D.numlines_s[P]+D.numlines_s[P+1]-1>0),te=20*(ae*2-te)/(te*(D.numlines_s[P]+D.numlines_s[P+1]-1));var ne=0|te;ne>J&&(ne=J),K[P]=ne}else K[P]=0;for(P=1;P<D.npart_s-1;P++)if(te=W[P-1]+W[P]+W[P+1],yt(P+1<D.npart_s),te>0){var ae=j[P-1];ae<j[P]&&(ae=j[P]),ae<j[P+1]&&(ae=j[P+1]),yt(D.numlines_s[P-1]+D.numlines_s[P]+D.numlines_s[P+1]-1>0),te=20*(ae*3-te)/(te*(D.numlines_s[P-1]+D.numlines_s[P]+D.numlines_s[P+1]-1));var ne=0|te;ne>J&&(ne=J),K[P]=ne}else K[P]=0;if(yt(P==D.npart_s-1),te=W[P-1]+W[P],te>0){var ae=j[P-1];ae<j[P]&&(ae=j[P]),yt(D.numlines_s[P-1]+D.numlines_s[P]-1>0),te=20*(ae*2-te)/(te*(D.numlines_s[P-1]+D.numlines_s[P]-1));var ne=0|te;ne>J&&(ne=J),K[P]=ne}else K[P]=0;yt(P==D.npart_s-1)}function Fe(D,j,W,K,J,P){var te=D.internal_flags,ae=new float[N.CBANDS],ne=fn(N.CBANDS),we,ce,Se,re=new int[N.CBANDS];for(Se=ce=0;Se<te.npart_s;++Se){var Ie=0,Ee=0,Je=te.numlines_s[Se];for(we=0;we<Je;++we,++ce){var ve=j[P][ce];Ie+=ve,Ee<ve&&(Ee=ve)}W[Se]=Ie,ae[Se]=Ee,ne[Se]=Ie/Je,yt(ne[Se]>=0)}for(yt(Se==te.npart_s);Se<N.CBANDS;++Se)ae[Se]=0,ne[Se]=0;for($e(te,ae,ne,re),ce=Se=0;Se<te.npart_s;Se++){var We=te.s3ind_s[Se][0],ut=te.s3ind_s[Se][1],Le,Ze,Oe,it,Kt;for(Le=re[We],Ze=1,it=te.s3_ss[ce]*W[We]*C[re[We]],++ce,++We;We<=ut;)Le+=re[We],Ze+=1,Oe=te.s3_ss[ce]*W[We]*C[re[We]],it=M(it,Oe,We-Se),++ce,++We;Le=(1+2*Le)/(2*Ze),Kt=C[Le]*.5,it*=Kt,K[Se]=it,te.nb_s2[J][Se]=te.nb_s1[J][Se],te.nb_s1[J][Se]=it,Oe=ae[Se],Oe*=te.minval_s[Se],Oe*=Kt,K[Se]>Oe&&(K[Se]=Oe),te.masking_lower>1&&(K[Se]*=te.masking_lower),K[Se]>W[Se]&&(K[Se]=W[Se]),te.masking_lower<1&&(K[Se]*=te.masking_lower),yt(K[Se]>=0)}for(;Se<N.CBANDS;++Se)W[Se]=0,K[Se]=0}function Ve(D,j,W,K,J){var P=fn(N.CBANDS),te=fn(N.CBANDS),ae=Hs(N.CBANDS+2),ne;ue(D,j,W,P,te),be(D,P,te,ae);var we=0;for(ne=0;ne<D.npart_l;ne++){var ce,Se,re,Ie,Ee=D.s3ind[ne][0],Je=D.s3ind[ne][1],ve=0,We=0;for(ve=ae[Ee],We+=1,Se=D.s3_ll[we]*W[Ee]*C[ae[Ee]],++we,++Ee;Ee<=Je;)ve+=ae[Ee],We+=1,ce=D.s3_ll[we]*W[Ee]*C[ae[Ee]],Ie=M(Se,ce,Ee-ne),Se=Ie,++we,++Ee;if(ve=(1+2*ve)/(2*We),re=C[ve]*.5,Se*=re,D.blocktype_old[J&1]==N.SHORT_TYPE){var ut=n*D.nb_1[J][ne];ut>0?K[ne]=Math.min(Se,ut):K[ne]=Math.min(Se,W[ne]*l)}else{var Le=a*D.nb_2[J][ne],Ze=n*D.nb_1[J][ne],ut;Le<=0&&(Le=Se),Ze<=0&&(Ze=Se),D.blocktype_old[J&1]==N.NORM_TYPE?ut=Math.min(Ze,Le):ut=Ze,K[ne]=Math.min(Se,ut)}D.nb_2[J][ne]=D.nb_1[J][ne],D.nb_1[J][ne]=Se,ce=P[ne],ce*=D.minval_l[ne],ce*=re,K[ne]>ce&&(K[ne]=ce),D.masking_lower>1&&(K[ne]*=D.masking_lower),K[ne]>W[ne]&&(K[ne]=W[ne]),D.masking_lower<1&&(K[ne]*=D.masking_lower),yt(K[ne]>=0)}for(;ne<N.CBANDS;++ne)W[ne]=0,K[ne]=0}function Re(D,j){var W=D.internal_flags;D.short_blocks==di.short_block_coupled&&!(j[0]!=0&&j[1]!=0)&&(j[0]=j[1]=0);for(var K=0;K<W.channels_out;K++)D.short_blocks==di.short_block_dispensed&&(j[K]=1),D.short_blocks==di.short_block_forced&&(j[K]=0)}function Qe(D,j,W){for(var K=D.internal_flags,J=0;J<K.channels_out;J++){var P=N.NORM_TYPE;j[J]!=0?(yt(K.blocktype_old[J]!=N.START_TYPE),K.blocktype_old[J]==N.SHORT_TYPE&&(P=N.STOP_TYPE)):(P=N.SHORT_TYPE,K.blocktype_old[J]==N.NORM_TYPE&&(K.blocktype_old[J]=N.START_TYPE),K.blocktype_old[J]==N.STOP_TYPE&&(K.blocktype_old[J]=N.SHORT_TYPE)),W[J]=K.blocktype_old[J],K.blocktype_old[J]=P}}function Ke(D,j,W,K,J,P,te){for(var ae=P*2,ne=P>0?Math.pow(10,J):1,we,ce,Se=0;Se<te;++Se){var re=D[2][Se],Ie=D[3][Se],Ee=j[0][Se],Je=j[1][Se],ve=j[2][Se],We=j[3][Se];if(Ee<=1.58*Je&&Je<=1.58*Ee){var ut=W[Se]*Ie,Le=W[Se]*re;ce=Math.max(ve,Math.min(We,ut)),we=Math.max(We,Math.min(ve,Le))}else ce=ve,we=We;if(P>0){var Ze,Oe,it=K[Se]*ne;if(Ze=Math.min(Math.max(Ee,it),Math.max(Je,it)),ve=Math.max(ce,it),We=Math.max(we,it),Oe=ve+We,Oe>0&&Ze*ae<Oe){var Kt=Ze*ae/Oe;ve*=Kt,We*=Kt}ce=Math.min(ve,ce),we=Math.min(We,we)}ce>re&&(ce=re),we>Ie&&(we=Ie),j[2][Se]=ce,j[3][Se]=we}}this.L3psycho_anal_vbr=function(D,j,W,K,J,P,te,ae,ne,we){var ce=D.internal_flags,Se,re,Ie=fn(N.HBLKSIZE),Ee=sa([3,N.HBLKSIZE_s]),Je=sa([2,N.BLKSIZE]),ve=sa([2,3,N.BLKSIZE_s]),We=sa([4,N.CBANDS]),ut=sa([4,N.CBANDS]),Le=sa([4,3]),Ze=.6,Oe=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],it=Hs(2),Kt=D.mode==Ot.JOINT_STEREO?4:ce.channels_out;xe(D,j,W,K,J,P,ne,Le,Oe,it),Re(D,it);{for(var Ye=0;Ye<Kt;Ye++){var ht=Ye&1;Se=Je,je(D,j,W,Ye,K,Ie,Se,ht),Z(D,K,Ye,Ie),it[ht]!=0?Ve(ce,Ie,We[Ye],ut[Ye],Ye):Be(ce,Ye)}it[0]+it[1]==2&&D.mode==Ot.JOINT_STEREO&&Ke(We,ut,ce.mld_cb_l,ce.ATH.cb_l,D.ATHlower*ce.ATH.adjust,D.msfix,ce.npart_l);for(var Ye=0;Ye<Kt;Ye++){var ht=Ye&1;it[ht]!=0&&f(ce,We[Ye],ut[Ye],Ye)}}{for(var wt=0;wt<3;wt++){for(var Ye=0;Ye<Kt;++Ye){var ht=Ye&1;it[ht]!=0?Te(ce,Ye,wt):(re=ve,Y(D,j,W,Ye,wt,Ee,re,ht),Fe(D,Ee,We[Ye],ut[Ye],Ye,wt))}it[0]+it[1]==0&&D.mode==Ot.JOINT_STEREO&&Ke(We,ut,ce.mld_cb_s,ce.ATH.cb_s,D.ATHlower*ce.ATH.adjust,D.msfix,ce.npart_s);for(var Ye=0;Ye<Kt;++Ye){var ht=Ye&1;it[ht]==0&&U(ce,We[Ye],ut[Ye],Ye,wt)}}for(var Ye=0;Ye<Kt;Ye++){var ht=Ye&1;if(it[ht]==0)for(var nn=0;nn<N.SBMAX_s;nn++){for(var zn=fn(3),wt=0;wt<3;wt++){var dn=ce.thm[Ye].s[nn][wt];if(dn*=u,Oe[Ye][wt]>=2||Oe[Ye][wt+1]==1){var an=wt!=0?wt-1:2,Fn=F(ce.thm[Ye].s[nn][an],dn,d*Ze);dn=Math.min(dn,Fn)}else if(Oe[Ye][wt]==1){var an=wt!=0?wt-1:2,Fn=F(ce.thm[Ye].s[nn][an],dn,l*Ze);dn=Math.min(dn,Fn)}else if(wt!=0&&Oe[Ye][wt-1]==3||wt==0&&ce.nsPsy.lastAttacks[Ye]==3){var an=wt!=2?wt+1:0,Fn=F(ce.thm[Ye].s[nn][an],dn,l*Ze);dn=Math.min(dn,Fn)}dn*=Le[Ye][wt],zn[wt]=dn}for(var wt=0;wt<3;wt++)ce.thm[Ye].s[nn][wt]=zn[wt]}}}for(var Ye=0;Ye<Kt;Ye++)ce.nsPsy.lastAttacks[Ye]=Oe[Ye][2];Qe(D,it,we);for(var Ye=0;Ye<Kt;Ye++){var Un,qn,da,ma;Ye>1?(Un=ae,qn=-2,da=N.NORM_TYPE,(we[0]==N.SHORT_TYPE||we[1]==N.SHORT_TYPE)&&(da=N.SHORT_TYPE),ma=P[K][Ye-2]):(Un=te,qn=0,da=we[Ye],ma=J[K][Ye]),da==N.SHORT_TYPE?Un[qn+Ye]=me(ma,ce.masking_lower):Un[qn+Ye]=G(ma,ce.masking_lower),D.analysis&&(ce.pinfo.pe[K][Ye]=Un[qn+Ye])}return 0};function Ge(D,j){var W=D,K;return W>=0?K=-W*27:K=W*j,K<=-72?0:Math.exp(K*h)}function tt(D){var j=0,W=0;{var K=0,J,P;for(K=0;Ge(K,D)>1e-20;K-=1);for(J=K,P=0;Math.abs(P-J)>1e-12;)K=(P+J)/2,Ge(K,D)>0?P=K:J=K;j=J}{var K=0,J,P;for(K=0;Ge(K,D)>1e-20;K+=1);for(J=0,P=K;Math.abs(P-J)>1e-12;)K=(P+J)/2,Ge(K,D)>0?J=K:P=K;W=P}{var te=0,ae=1e3,ne;for(ne=0;ne<=ae;++ne){var K=j+ne*(W-j)/ae,we=Ge(K,D);te+=we}{var ce=(ae+1)/(te*(W-j));return ce}}}function st(D){var j,W,K,J;return j=D,j>=0?j*=3:j*=1.5,j>=.5&&j<=2.5?(J=j-.5,W=8*(J*J-2*J)):W=0,j+=.474,K=15.811389+7.5*j-17.5*Math.sqrt(1+j*j),K<=-60?0:(j=Math.exp((W+K)*h),j/=.6609193,j)}function ge(D){return D<0&&(D=0),D=D*.001,13*Math.atan(.76*D)+3.5*Math.atan(D*D/(7.5*7.5))}function z(D,j,W,K,J,P,te,ae,ne,we,ce,Se){var re=fn(N.CBANDS+1),Ie=ae/(Se>15?2*576:2*192),Ee=Hs(N.HBLKSIZE),Je;ae/=ne;var ve=0,We=0;for(Je=0;Je<N.CBANDS;Je++){var ut,Le;for(ut=ge(ae*ve),re[Je]=ae*ve,Le=ve;ge(ae*Le)-ut<r&&Le<=ne/2;Le++);for(D[Je]=Le-ve,We=Je+1;ve<Le;)Ee[ve++]=Je;if(ve>ne/2){ve=ne/2,++Je;break}}re[Je]=ae*ve;for(var Ze=0;Ze<Se;Ze++){var Oe,it,Kt,Ye,ht;Kt=we[Ze],Ye=we[Ze+1],Oe=0|Math.floor(.5+ce*(Kt-.5)),Oe<0&&(Oe=0),it=0|Math.floor(.5+ce*(Ye-.5)),it>ne/2&&(it=ne/2),W[Ze]=(Ee[Oe]+Ee[it])/2,j[Ze]=Ee[it];var wt=Ie*Ye;te[Ze]=(wt-re[j[Ze]])/(re[j[Ze]+1]-re[j[Ze]]),te[Ze]<0?te[Ze]=0:te[Ze]>1&&(te[Ze]=1),ht=ge(ae*we[Ze]*ce),ht=Math.min(ht,15.5)/15.5,P[Ze]=Math.pow(10,1.25*(1-Math.cos(Math.PI*ht))-2.5)}ve=0;for(var nn=0;nn<We;nn++){var zn=D[nn],ut,dn;ut=ge(ae*ve),dn=ge(ae*(ve+zn-1)),K[nn]=.5*(ut+dn),ut=ge(ae*(ve-.5)),dn=ge(ae*(ve+zn-.5)),J[nn]=dn-ut,ve+=zn}return We}function Ae(D,j,W,K,J,P){var te=sa([N.CBANDS,N.CBANDS]),ae,ne=0;if(P)for(var we=0;we<j;we++)for(ae=0;ae<j;ae++){var ce=st(W[we]-W[ae])*K[ae];te[we][ae]=ce*J[we]}else for(ae=0;ae<j;ae++)for(var Se=15+Math.min(21/W[ae],12),re=tt(Se),we=0;we<j;we++){var ce=re*Ge(W[we]-W[ae],Se)*K[ae];te[we][ae]=ce*J[we]}for(var we=0;we<j;we++){for(ae=0;ae<j&&!(te[we][ae]>0);ae++);for(D[we][0]=ae,ae=j-1;ae>0&&!(te[we][ae]>0);ae--);D[we][1]=ae,ne+=D[we][1]-D[we][0]+1}for(var Ie=fn(ne),Ee=0,we=0;we<j;we++)for(ae=D[we][0];ae<=D[we][1];ae++)Ie[Ee++]=te[we][ae];return Ie}function le(D){var j=ge(D);return j=Math.min(j,15.5)/15.5,Math.pow(10,1.25*(1-Math.cos(Math.PI*j))-2.5)}this.psymodel_init=function(D){var j=D.internal_flags,W,K=!0,J=13,P=24,te=0,ae=0,ne=-8.25,we=-4.5,ce=fn(N.CBANDS),Se=fn(N.CBANDS),re=fn(N.CBANDS),Ie=D.out_samplerate;switch(D.experimentalZ){default:case 0:K=!0;break;case 1:K=!(D.VBR==ui.vbr_mtrh||D.VBR==ui.vbr_mt);break;case 2:K=!1;break;case 3:J=8,te=-1.75,ae=-.0125,ne=-8.25,we=-2.25;break}for(j.ms_ener_ratio_old=.25,j.blocktype_old[0]=j.blocktype_old[1]=N.NORM_TYPE,W=0;W<4;++W){for(var ve=0;ve<N.CBANDS;++ve)j.nb_1[W][ve]=1e20,j.nb_2[W][ve]=1e20,j.nb_s1[W][ve]=j.nb_s2[W][ve]=1;for(var Ee=0;Ee<N.SBMAX_l;Ee++)j.en[W].l[Ee]=1e20,j.thm[W].l[Ee]=1e20;for(var ve=0;ve<3;++ve){for(var Ee=0;Ee<N.SBMAX_s;Ee++)j.en[W].s[Ee][ve]=1e20,j.thm[W].s[Ee][ve]=1e20;j.nsPsy.lastAttacks[W]=0}for(var ve=0;ve<9;ve++)j.nsPsy.last_en_subshort[W][ve]=10}for(j.loudness_sq_save[0]=j.loudness_sq_save[1]=0,j.npart_l=z(j.numlines_l,j.bo_l,j.bm_l,ce,Se,j.mld_l,j.PSY.bo_l_weight,Ie,N.BLKSIZE,j.scalefac_band.l,N.BLKSIZE/(2*576),N.SBMAX_l),yt(j.npart_l<N.CBANDS),W=0;W<j.npart_l;W++){var Je=te;ce[W]>=J&&(Je=ae*(ce[W]-J)/(P-J)+te*(P-ce[W])/(P-J)),re[W]=Math.pow(10,Je/10),j.numlines_l[W]>0?j.rnumlines_l[W]=1/j.numlines_l[W]:j.rnumlines_l[W]=0}j.s3_ll=Ae(j.s3ind,j.npart_l,ce,Se,re,K);var ve=0;for(W=0;W<j.npart_l;W++){var We;We=Q1.MAX_VALUE;for(var ut=0;ut<j.numlines_l[W];ut++,ve++){var Le=Ie*ve/(1e3*N.BLKSIZE),Ze;Ze=this.ATHformula(Le*1e3,D)-20,Ze=Math.pow(10,.1*Ze),Ze*=j.numlines_l[W],We>Ze&&(We=Ze)}j.ATH.cb_l[W]=We,We=-20+ce[W]*20/10,We>6&&(We=100),We<-15&&(We=-15),We-=8,j.minval_l[W]=Math.pow(10,We/10)*j.numlines_l[W]}for(j.npart_s=z(j.numlines_s,j.bo_s,j.bm_s,ce,Se,j.mld_s,j.PSY.bo_s_weight,Ie,N.BLKSIZE_s,j.scalefac_band.s,N.BLKSIZE_s/(2*192),N.SBMAX_s),yt(j.npart_s<N.CBANDS),ve=0,W=0;W<j.npart_s;W++){var We,Je=ne;ce[W]>=J&&(Je=we*(ce[W]-J)/(P-J)+ne*(P-ce[W])/(P-J)),re[W]=Math.pow(10,Je/10),We=Q1.MAX_VALUE;for(var ut=0;ut<j.numlines_s[W];ut++,ve++){var Le=Ie*ve/(1e3*N.BLKSIZE_s),Ze;Ze=this.ATHformula(Le*1e3,D)-20,Ze=Math.pow(10,.1*Ze),Ze*=j.numlines_s[W],We>Ze&&(We=Ze)}j.ATH.cb_s[W]=We,We=-7+ce[W]*7/12,ce[W]>12&&(We*=1+Math.log(1+We)*3.1),ce[W]<12&&(We*=1+Math.log(1-We)*2.3),We<-15&&(We=-15),We-=8,j.minval_s[W]=Math.pow(10,We/10)*j.numlines_s[W]}j.s3_ss=Ae(j.s3ind_s,j.npart_s,ce,Se,re,K),I(),e.init_fft(j),j.decay=Math.exp(-1*t/(m*Ie/192));{var Oe;Oe=c,(D.exp_nspsytune&2)!=0&&(Oe=1),Math.abs(D.msfix)>0&&(Oe=D.msfix),D.msfix=Oe;for(var it=0;it<j.npart_l;it++)j.s3ind[it][1]>j.npart_l-1&&(j.s3ind[it][1]=j.npart_l-1)}var Kt=576*j.mode_gr/Ie;if(j.ATH.decay=Math.pow(10,-12/10*Kt),j.ATH.adjust=.01,j.ATH.adjustLimit=1,yt(j.bo_l[N.SBMAX_l-1]<=j.npart_l),yt(j.bo_s[N.SBMAX_s-1]<=j.npart_s),D.ATHtype!=-1){var Le,Ye=D.out_samplerate/N.BLKSIZE,ht=0;for(Le=0,W=0;W<N.BLKSIZE/2;++W)Le+=Ye,j.ATH.eql_w[W]=1/Math.pow(10,this.ATHformula(Le,D)/10),ht+=j.ATH.eql_w[W];for(ht=1/ht,W=N.BLKSIZE/2;--W>=0;)j.ATH.eql_w[W]*=ht}{for(var it=ve=0;it<j.npart_s;++it)for(W=0;W<j.numlines_s[it];++W)++ve;for(var it=ve=0;it<j.npart_l;++it)for(W=0;W<j.numlines_l[it];++W)++ve}for(ve=0,W=0;W<j.npart_l;W++){var Le=Ie*(ve+j.numlines_l[W]/2)/(1*N.BLKSIZE);j.mld_cb_l[W]=le(Le),ve+=j.numlines_l[W]}for(;W<N.CBANDS;++W)j.mld_cb_l[W]=1;for(ve=0,W=0;W<j.npart_s;W++){var Le=Ie*(ve+j.numlines_s[W]/2)/(1*N.BLKSIZE_s);j.mld_cb_s[W]=le(Le),ve+=j.numlines_s[W]}for(;W<N.CBANDS;++W)j.mld_cb_s[W]=1;return 0};function Ne(D,j){D<-.3&&(D=3410),D/=1e3,D=Math.max(.1,D);var W=3.64*Math.pow(D,-.8)-6.8*Math.exp(-.6*Math.pow(D-3.4,2))+6*Math.exp(-.15*Math.pow(D-8.7,2))+(.6+.04*j)*.001*Math.pow(D,4);return W}this.ATHformula=function(D,j){var W;switch(j.ATHtype){case 0:W=Ne(D,9);break;case 1:W=Ne(D,-1);break;case 2:W=Ne(D,0);break;case 3:W=Ne(D,1)+6;break;case 4:W=Ne(D,j.ATHcurve);break;default:W=Ne(D,0);break}return W}}function s6(){this.class_id=0,this.num_samples=0,this.num_channels=0,this.in_samplerate=0,this.out_samplerate=0,this.scale=0,this.scale_left=0,this.scale_right=0,this.analysis=!1,this.bWriteVbrTag=!1,this.decode_only=!1,this.quality=0,this.mode=Ot.STEREO,this.force_ms=!1,this.free_format=!1,this.findReplayGain=!1,this.decode_on_the_fly=!1,this.write_id3tag_automatic=!1,this.brate=0,this.compression_ratio=0,this.copyright=0,this.original=0,this.extension=0,this.emphasis=0,this.error_protection=0,this.strict_ISO=!1,this.disable_reservoir=!1,this.quant_comp=0,this.quant_comp_short=0,this.experimentalY=!1,this.experimentalZ=0,this.exp_nspsytune=0,this.preset=0,this.VBR=null,this.VBR_q_frac=0,this.VBR_q=0,this.VBR_mean_bitrate_kbps=0,this.VBR_min_bitrate_kbps=0,this.VBR_max_bitrate_kbps=0,this.VBR_hard_min=0,this.lowpassfreq=0,this.highpassfreq=0,this.lowpasswidth=0,this.highpasswidth=0,this.maskingadjust=0,this.maskingadjust_short=0,this.ATHonly=!1,this.ATHshort=!1,this.noATH=!1,this.ATHtype=0,this.ATHcurve=0,this.ATHlower=0,this.athaa_type=0,this.athaa_loudapprox=0,this.athaa_sensitivity=0,this.short_blocks=null,this.useTemporal=!1,this.interChRatio=0,this.msfix=0,this.tune=!1,this.tune_value_a=0,this.version=0,this.encoder_delay=0,this.encoder_padding=0,this.framesize=0,this.frameNum=0,this.lame_allocated_gfp=0,this.internal_flags=null}var Ms={};Ms.SFBMAX=N.SBMAX_s*3;var i6=ze.new_float,zs=ze.new_int;function Do(){this.xr=i6(576),this.l3_enc=zs(576),this.scalefac=zs(Ms.SFBMAX),this.xrpow_max=0,this.part2_3_length=0,this.big_values=0,this.count1=0,this.global_gain=0,this.scalefac_compress=0,this.block_type=0,this.mixed_block_flag=0,this.table_select=zs(3),this.subblock_gain=zs(4),this.region0_count=0,this.region1_count=0,this.preflag=0,this.scalefac_scale=0,this.count1table_select=0,this.part2_length=0,this.sfb_lmax=0,this.sfb_smin=0,this.psy_lmax=0,this.sfbmax=0,this.psymax=0,this.sfbdivide=0,this.width=zs(Ms.SFBMAX),this.window=zs(Ms.SFBMAX),this.count1bits=0,this.sfb_partition_table=null,this.slen=zs(4),this.max_nonzero_coeff=0;var e=this;function t(a){return new Int32Array(a)}function n(a){return new Float32Array(a)}this.assign=function(a){e.xr=n(a.xr),e.l3_enc=t(a.l3_enc),e.scalefac=t(a.scalefac),e.xrpow_max=a.xrpow_max,e.part2_3_length=a.part2_3_length,e.big_values=a.big_values,e.count1=a.count1,e.global_gain=a.global_gain,e.scalefac_compress=a.scalefac_compress,e.block_type=a.block_type,e.mixed_block_flag=a.mixed_block_flag,e.table_select=t(a.table_select),e.subblock_gain=t(a.subblock_gain),e.region0_count=a.region0_count,e.region1_count=a.region1_count,e.preflag=a.preflag,e.scalefac_scale=a.scalefac_scale,e.count1table_select=a.count1table_select,e.part2_length=a.part2_length,e.sfb_lmax=a.sfb_lmax,e.sfb_smin=a.sfb_smin,e.psy_lmax=a.psy_lmax,e.sfbmax=a.sfbmax,e.psymax=a.psymax,e.sfbdivide=a.sfbdivide,e.width=t(a.width),e.window=t(a.window),e.count1bits=a.count1bits,e.sfb_partition_table=a.sfb_partition_table.slice(0),e.slen=t(a.slen),e.max_nonzero_coeff=a.max_nonzero_coeff}}var J1=ze.new_int;function r6(){this.tt=[[null,null],[null,null]],this.main_data_begin=0,this.private_bits=0,this.resvDrain_pre=0,this.resvDrain_post=0,this.scfsi=[J1(4),J1(4)];for(var e=0;e<2;e++)for(var t=0;t<2;t++)this.tt[e][t]=new Do}var oo=ze.System,lo=ze.new_int;function Ba(e,t,n,a){this.l=lo(1+N.SBMAX_l),this.s=lo(1+N.SBMAX_s),this.psfb21=lo(1+N.PSFB21),this.psfb12=lo(1+N.PSFB12);var s=this.l,i=this.s;arguments.length==4&&(this.arrL=arguments[0],this.arrS=arguments[1],this.arr21=arguments[2],this.arr12=arguments[3],oo.arraycopy(this.arrL,0,s,0,Math.min(this.arrL.length,this.l.length)),oo.arraycopy(this.arrS,0,i,0,Math.min(this.arrS.length,this.s.length)),oo.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),oo.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}var Jl=ze.new_float,o6=ze.new_float_n,l6=ze.new_int;function c6(){this.last_en_subshort=o6([4,9]),this.lastAttacks=l6(4),this.pefirbuf=Jl(19),this.longfact=Jl(N.SBMAX_l),this.shortfact=Jl(N.SBMAX_s),this.attackthre=0,this.attackthre_s=0}function u6(){this.sum=0,this.seen=0,this.want=0,this.pos=0,this.size=0,this.bag=null,this.nVbrNumFrames=0,this.nBytesWritten=0,this.TotalFrameSize=0}var d6=ze.new_byte,m6=ze.new_double,ia=ze.new_float,Us=ze.new_float_n,fa=ze.new_int,co=ze.new_int_n;It.MFSIZE=3*1152+N.ENCDELAY-N.MDCTDELAY;It.MAX_HEADER_BUF=256;It.MAX_BITS_PER_CHANNEL=4095;It.MAX_BITS_PER_GRANULE=7680;It.BPC=320;function It(){var e=40;this.Class_ID=0,this.lame_encode_frame_init=0,this.iteration_init_init=0,this.fill_buffer_resample_init=0,this.mfbuf=Us([2,It.MFSIZE]),this.mode_gr=0,this.channels_in=0,this.channels_out=0,this.resample_ratio=0,this.mf_samples_to_encode=0,this.mf_size=0,this.VBR_min_bitrate=0,this.VBR_max_bitrate=0,this.bitrate_index=0,this.samplerate_index=0,this.mode_ext=0,this.lowpass1=0,this.lowpass2=0,this.highpass1=0,this.highpass2=0,this.noise_shaping=0,this.noise_shaping_amp=0,this.substep_shaping=0,this.psymodel=0,this.noise_shaping_stop=0,this.subblock_gain=0,this.use_best_huffman=0,this.full_outer_loop=0,this.l3_side=new r6,this.ms_ratio=ia(2),this.padding=0,this.frac_SpF=0,this.slot_lag=0,this.tag_spec=null,this.nMusicCRC=0,this.OldValue=fa(2),this.CurrentStep=fa(2),this.masking_lower=0,this.bv_scf=fa(576),this.pseudohalf=fa(Ms.SFBMAX),this.sfb21_extra=!1,this.inbuf_old=new Array(2),this.blackfilt=new Array(2*It.BPC+1),this.itime=m6(2),this.sideinfo_len=0,this.sb_sample=Us([2,2,18,N.SBLIMIT]),this.amp_filter=ia(32);function t(){this.write_timing=0,this.ptr=0,this.buf=d6(e)}this.header=new Array(It.MAX_HEADER_BUF),this.h_ptr=0,this.w_ptr=0,this.ancillary_flag=0,this.ResvSize=0,this.ResvMax=0,this.scalefac_band=new Ba,this.minval_l=ia(N.CBANDS),this.minval_s=ia(N.CBANDS),this.nb_1=Us([4,N.CBANDS]),this.nb_2=Us([4,N.CBANDS]),this.nb_s1=Us([4,N.CBANDS]),this.nb_s2=Us([4,N.CBANDS]),this.s3_ss=null,this.s3_ll=null,this.decay=0,this.thm=new Array(4),this.en=new Array(4),this.tot_ener=ia(4),this.loudness_sq=Us([2,2]),this.loudness_sq_save=ia(2),this.mld_l=ia(N.SBMAX_l),this.mld_s=ia(N.SBMAX_s),this.bm_l=fa(N.SBMAX_l),this.bo_l=fa(N.SBMAX_l),this.bm_s=fa(N.SBMAX_s),this.bo_s=fa(N.SBMAX_s),this.npart_l=0,this.npart_s=0,this.s3ind=co([N.CBANDS,2]),this.s3ind_s=co([N.CBANDS,2]),this.numlines_s=fa(N.CBANDS),this.numlines_l=fa(N.CBANDS),this.rnumlines_l=ia(N.CBANDS),this.mld_cb_l=ia(N.CBANDS),this.mld_cb_s=ia(N.CBANDS),this.numlines_s_num1=0,this.numlines_l_num1=0,this.pe=ia(4),this.ms_ratio_s_old=0,this.ms_ratio_l_old=0,this.ms_ener_ratio_old=0,this.blocktype_old=fa(2),this.nsPsy=new c6,this.VBR_seek_table=new u6,this.ATH=null,this.PSY=null,this.nogap_total=0,this.nogap_current=0,this.decode_on_the_fly=!0,this.findReplayGain=!0,this.findPeakSample=!0,this.PeakSample=0,this.RadioGain=0,this.AudiophileGain=0,this.rgdata=null,this.noclipGainChange=0,this.noclipScale=0,this.bitrate_stereoMode_Hist=co([16,5]),this.bitrate_blockType_Hist=co([16,6]),this.pinfo=null,this.hip=null,this.in_buffer_nsamples=0,this.in_buffer_0=null,this.in_buffer_1=null,this.iteration_loop=null;for(var n=0;n<this.en.length;n++)this.en[n]=new Po;for(var n=0;n<this.thm.length;n++)this.thm[n]=new Po;for(var n=0;n<this.header.length;n++)this.header[n]=new t}var qs=ze.new_float;function f6(){this.useAdjust=0,this.aaSensitivityP=0,this.adjust=0,this.adjustLimit=0,this.decay=0,this.floor=0,this.l=qs(N.SBMAX_l),this.s=qs(N.SBMAX_s),this.psfb21=qs(N.PSFB21),this.psfb12=qs(N.PSFB12),this.cb_l=qs(N.CBANDS),this.cb_s=qs(N.CBANDS),this.eql_w=qs(N.BLKSIZE/2)}var Dn=ze.System,em=ze.Arrays;cn.STEPS_per_dB=100;cn.MAX_dB=120;cn.GAIN_NOT_ENOUGH_SAMPLES=-24601;cn.GAIN_ANALYSIS_ERROR=0;cn.GAIN_ANALYSIS_OK=1;cn.INIT_GAIN_ANALYSIS_ERROR=0;cn.INIT_GAIN_ANALYSIS_OK=1;cn.YULE_ORDER=10;cn.MAX_ORDER=cn.YULE_ORDER;cn.MAX_SAMP_FREQ=48e3;cn.RMS_WINDOW_TIME_NUMERATOR=1;cn.RMS_WINDOW_TIME_DENOMINATOR=20;cn.MAX_SAMPLES_PER_WINDOW=cn.MAX_SAMP_FREQ*cn.RMS_WINDOW_TIME_NUMERATOR/cn.RMS_WINDOW_TIME_DENOMINATOR+1;function cn(){var e=64.82,t=.95,n=cn.RMS_WINDOW_TIME_NUMERATOR,a=cn.RMS_WINDOW_TIME_DENOMINATOR,s=[[.038575994352,-3.84664617118067,-.02160367184185,7.81501653005538,-.00123395316851,-11.34170355132042,-9291677959e-14,13.05504219327545,-.01655260341619,-12.28759895145294,.02161526843274,9.4829380631979,-.02074045215285,-5.87257861775999,.00594298065125,2.75465861874613,.00306428023191,-.86984376593551,.00012025322027,.13919314567432,.00288463683916],[.0541865640643,-3.47845948550071,-.02911007808948,6.36317777566148,-.00848709379851,-8.54751527471874,-.00851165645469,9.4769360780128,-.00834990904936,-8.81498681370155,.02245293253339,6.85401540936998,-.02596338512915,-4.39470996079559,.01624864962975,2.19611684890774,-.00240879051584,-.75104302451432,.00674613682247,.13149317958808,-.00187763777362],[.15457299681924,-2.37898834973084,-.09331049056315,2.84868151156327,-.06247880153653,-2.64577170229825,.02163541888798,2.23697657451713,-.05588393329856,-1.67148153367602,.04781476674921,1.00595954808547,.00222312597743,-.45953458054983,.03174092540049,.16378164858596,-.01390589421898,-.05032077717131,.00651420667831,.0234789740702,-.00881362733839],[.30296907319327,-1.61273165137247,-.22613988682123,1.0797749225997,-.08587323730772,-.2565625775407,.03282930172664,-.1627671912044,-.00915702933434,-.22638893773906,-.02364141202522,.39120800788284,-.00584456039913,-.22138138954925,.06276101321749,.04500235387352,-828086748e-14,.02005851806501,.00205861885564,.00302439095741,-.02950134983287],[.33642304856132,-1.49858979367799,-.2557224142557,.87350271418188,-.11828570177555,.12205022308084,.11921148675203,-.80774944671438,-.07834489609479,.47854794562326,-.0046997791438,-.12453458140019,-.0058950022444,-.04067510197014,.05724228140351,.08333755284107,.00832043980773,-.04237348025746,-.0163538138454,.02977207319925,-.0176017656815],[.4491525660845,-.62820619233671,-.14351757464547,.29661783706366,-.22784394429749,-.372563729424,-.01419140100551,.00213767857124,.04078262797139,-.42029820170918,-.12398163381748,.22199650564824,.04097565135648,.00613424350682,.10478503600251,.06747620744683,-.01863887810927,.05784820375801,-.03193428438915,.03222754072173,.00541907748707],[.56619470757641,-1.04800335126349,-.75464456939302,.29156311971249,.1624213774223,-.26806001042947,.16744243493672,.00819999645858,-.18901604199609,.45054734505008,.3093178284183,-.33032403314006,-.27562961986224,.0673936833311,.00647310677246,-.04784254229033,.08647503780351,.01639907836189,-.0378898455484,.01807364323573,-.00588215443421],[.58100494960553,-.51035327095184,-.53174909058578,-.31863563325245,-.14289799034253,-.20256413484477,.17520704835522,.1472815413433,.02377945217615,.38952639978999,.15558449135573,-.23313271880868,-.25344790059353,-.05246019024463,.01628462406333,-.02505961724053,.06920467763959,.02442357316099,-.03721611395801,.01818801111503,-.00749618797172],[.53648789255105,-.2504987195602,-.42163034350696,-.43193942311114,-.00275953611929,-.03424681017675,.04267842219415,-.04678328784242,-.10214864179676,.26408300200955,.14590772289388,.15113130533216,-.02459864859345,-.17556493366449,-.11202315195388,-.18823009262115,-.04060034127,.05477720428674,.0478866554818,.0470440968812,-.02217936801134]],i=[[.98621192462708,-1.97223372919527,-1.97242384925416,.97261396931306,.98621192462708],[.98500175787242,-1.96977855582618,-1.97000351574484,.9702284756635,.98500175787242],[.97938932735214,-1.95835380975398,-1.95877865470428,.95920349965459,.97938932735214],[.97531843204928,-1.95002759149878,-1.95063686409857,.95124613669835,.97531843204928],[.97316523498161,-1.94561023566527,-1.94633046996323,.94705070426118,.97316523498161],[.96454515552826,-1.92783286977036,-1.92909031105652,.93034775234268,.96454515552826],[.96009142950541,-1.91858953033784,-1.92018285901082,.92177618768381,.96009142950541],[.95856916599601,-1.9154210807478,-1.91713833199203,.91885558323625,.95856916599601],[.94597685600279,-1.88903307939452,-1.89195371200558,.89487434461664,.94597685600279]];function r(l,c,v,h,A,T){for(;A--!=0;)v[h]=1e-10+l[c+0]*T[0]-v[h-1]*T[1]+l[c-1]*T[2]-v[h-2]*T[3]+l[c-2]*T[4]-v[h-3]*T[5]+l[c-3]*T[6]-v[h-4]*T[7]+l[c-4]*T[8]-v[h-5]*T[9]+l[c-5]*T[10]-v[h-6]*T[11]+l[c-6]*T[12]-v[h-7]*T[13]+l[c-7]*T[14]-v[h-8]*T[15]+l[c-8]*T[16]-v[h-9]*T[17]+l[c-9]*T[18]-v[h-10]*T[19]+l[c-10]*T[20],++h,++c}function o(l,c,v,h,A,T){for(;A--!=0;)v[h]=l[c+0]*T[0]-v[h-1]*T[1]+l[c-1]*T[2]-v[h-2]*T[3]+l[c-2]*T[4],++h,++c}function m(l,c){for(var v=0;v<MAX_ORDER;v++)l.linprebuf[v]=l.lstepbuf[v]=l.loutbuf[v]=l.rinprebuf[v]=l.rstepbuf[v]=l.routbuf[v]=0;switch(0|c){case 48e3:l.reqindex=0;break;case 44100:l.reqindex=1;break;case 32e3:l.reqindex=2;break;case 24e3:l.reqindex=3;break;case 22050:l.reqindex=4;break;case 16e3:l.reqindex=5;break;case 12e3:l.reqindex=6;break;case 11025:l.reqindex=7;break;case 8e3:l.reqindex=8;break;default:return INIT_GAIN_ANALYSIS_ERROR}return l.sampleWindow=0|(c*n+a-1)/a,l.lsum=0,l.rsum=0,l.totsamp=0,em.ill(l.A,0),INIT_GAIN_ANALYSIS_OK}this.InitGainAnalysis=function(l,c){return m(l,c)!=INIT_GAIN_ANALYSIS_OK?INIT_GAIN_ANALYSIS_ERROR:(l.linpre=MAX_ORDER,l.rinpre=MAX_ORDER,l.lstep=MAX_ORDER,l.rstep=MAX_ORDER,l.lout=MAX_ORDER,l.rout=MAX_ORDER,em.fill(l.B,0),INIT_GAIN_ANALYSIS_OK)};function u(l){return l*l}this.AnalyzeSamples=function(l,c,v,h,A,T,k){var p,L,O,g,B,R,C;if(T==0)return GAIN_ANALYSIS_OK;switch(C=0,B=T,k){case 1:h=c,A=v;break;case 2:break;default:return GAIN_ANALYSIS_ERROR}for(T<MAX_ORDER?(Dn.arraycopy(c,v,l.linprebuf,MAX_ORDER,T),Dn.arraycopy(h,A,l.rinprebuf,MAX_ORDER,T)):(Dn.arraycopy(c,v,l.linprebuf,MAX_ORDER,MAX_ORDER),Dn.arraycopy(h,A,l.rinprebuf,MAX_ORDER,MAX_ORDER));B>0;){R=B>l.sampleWindow-l.totsamp?l.sampleWindow-l.totsamp:B,C<MAX_ORDER?(p=l.linpre+C,L=l.linprebuf,O=l.rinpre+C,g=l.rinprebuf,R>MAX_ORDER-C&&(R=MAX_ORDER-C)):(p=v+C,L=c,O=A+C,g=h),r(L,p,l.lstepbuf,l.lstep+l.totsamp,R,s[l.reqindex]),r(g,O,l.rstepbuf,l.rstep+l.totsamp,R,s[l.reqindex]),o(l.lstepbuf,l.lstep+l.totsamp,l.loutbuf,l.lout+l.totsamp,R,i[l.reqindex]),o(l.rstepbuf,l.rstep+l.totsamp,l.routbuf,l.rout+l.totsamp,R,i[l.reqindex]),p=l.lout+l.totsamp,L=l.loutbuf,O=l.rout+l.totsamp,g=l.routbuf;for(var I=R%8;I--!=0;)l.lsum+=u(L[p++]),l.rsum+=u(g[O++]);for(I=R/8;I--!=0;)l.lsum+=u(L[p+0])+u(L[p+1])+u(L[p+2])+u(L[p+3])+u(L[p+4])+u(L[p+5])+u(L[p+6])+u(L[p+7]),p+=8,l.rsum+=u(g[O+0])+u(g[O+1])+u(g[O+2])+u(g[O+3])+u(g[O+4])+u(g[O+5])+u(g[O+6])+u(g[O+7]),O+=8;if(B-=R,C+=R,l.totsamp+=R,l.totsamp==l.sampleWindow){var b=cn.STEPS_per_dB*10*Math.log10((l.lsum+l.rsum)/l.totsamp*.5+1e-37),y=b<=0?0:0|b;y>=l.A.length&&(y=l.A.length-1),l.A[y]++,l.lsum=l.rsum=0,Dn.arraycopy(l.loutbuf,l.totsamp,l.loutbuf,0,MAX_ORDER),Dn.arraycopy(l.routbuf,l.totsamp,l.routbuf,0,MAX_ORDER),Dn.arraycopy(l.lstepbuf,l.totsamp,l.lstepbuf,0,MAX_ORDER),Dn.arraycopy(l.rstepbuf,l.totsamp,l.rstepbuf,0,MAX_ORDER),l.totsamp=0}if(l.totsamp>l.sampleWindow)return GAIN_ANALYSIS_ERROR}return T<MAX_ORDER?(Dn.arraycopy(l.linprebuf,T,l.linprebuf,0,MAX_ORDER-T),Dn.arraycopy(l.rinprebuf,T,l.rinprebuf,0,MAX_ORDER-T),Dn.arraycopy(c,v,l.linprebuf,MAX_ORDER-T,T),Dn.arraycopy(h,A,l.rinprebuf,MAX_ORDER-T,T)):(Dn.arraycopy(c,v+T-MAX_ORDER,l.linprebuf,0,MAX_ORDER),Dn.arraycopy(h,A+T-MAX_ORDER,l.rinprebuf,0,MAX_ORDER)),GAIN_ANALYSIS_OK};function d(l,c){var v,h=0;for(v=0;v<c;v++)h+=l[v];if(h==0)return GAIN_NOT_ENOUGH_SAMPLES;var A=0|Math.ceil(h*(1-t));for(v=c;v-- >0&&!((A-=l[v])<=0););return e-v/cn.STEPS_per_dB}this.GetTitleGain=function(l){for(var c=d(l.A,l.A.length),v=0;v<l.A.length;v++)l.B[v]+=l.A[v],l.A[v]=0;for(var v=0;v<MAX_ORDER;v++)l.linprebuf[v]=l.lstepbuf[v]=l.loutbuf[v]=l.rinprebuf[v]=l.rstepbuf[v]=l.routbuf[v]=0;return l.totsamp=0,l.lsum=l.rsum=0,c}}var mi=ze.new_float,tm=ze.new_int;function v6(){this.linprebuf=mi(void 0*2),this.linpre=0,this.lstepbuf=mi(void 0+void 0),this.lstep=0,this.loutbuf=mi(void 0+void 0),this.lout=0,this.rinprebuf=mi(void 0*2),this.rinpre=0,this.rstepbuf=mi(void 0+void 0),this.rstep=0,this.routbuf=mi(void 0+void 0),this.rout=0,this.sampleWindow=0,this.totsamp=0,this.lsum=0,this.rsum=0,this.freqindex=0,this.first=0,this.A=tm(0|void 0*void 0),this.B=tm(0|void 0*void 0)}function y0(e){this.bits=e}var nm=ze.new_float,h6=ze.new_int,am=ze.assert;function g6(e){var t=e;this.quantize=t,this.iteration_loop=function(n,a,s,i){var r=n.internal_flags,o=nm(Ms.SFBMAX),m=nm(576),u=h6(2),d=0,l,c=r.l3_side,v=new y0(d);this.quantize.rv.ResvFrameBegin(n,v),d=v.bits;for(var h=0;h<r.mode_gr;h++){l=this.quantize.qupvt.on_pe(n,a,u,d,h,h),r.mode_ext==N.MPG_MD_MS_LR&&(this.quantize.ms_convert(r.l3_side,h),this.quantize.qupvt.reduce_side(u,s[h],d,l));for(var A=0;A<r.channels_out;A++){var T,k,p=c.tt[h][A];p.block_type!=N.SHORT_TYPE?(T=0,k=r.PSY.mask_adjust-T):(T=0,k=r.PSY.mask_adjust_short-T),r.masking_lower=Math.pow(10,k*.1),this.quantize.init_outer_loop(r,p),this.quantize.init_xrpow(r,p,m)&&(this.quantize.qupvt.calc_xmin(n,i[h][A],p,o),this.quantize.outer_loop(n,p,o,m,A,u[A])),this.quantize.iteration_finish_one(r,h,A),am(p.part2_3_length<=It.MAX_BITS_PER_CHANNEL),am(p.part2_3_length<=u[A])}}this.quantize.rv.ResvFrameEnd(r,d)}}function Et(e,t,n,a){this.xlen=e,this.linmax=t,this.table=n,this.hlen=a}var ye={};ye.t1HB=[1,1,1,0];ye.t2HB=[1,2,1,3,1,1,3,2,0];ye.t3HB=[3,2,1,1,1,1,3,2,0];ye.t5HB=[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0];ye.t6HB=[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0];ye.t7HB=[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0];ye.t8HB=[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0];ye.t9HB=[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0];ye.t10HB=[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0];ye.t11HB=[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0];ye.t12HB=[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0];ye.t13HB=[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1];ye.t15HB=[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0];ye.t16HB=[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3];ye.t24HB=[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3];ye.t32HB=[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16];ye.t33HB=[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0];ye.t1l=[1,4,3,5];ye.t2l=[1,4,7,4,5,7,6,7,8];ye.t3l=[2,3,7,4,4,7,6,7,8];ye.t5l=[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10];ye.t6l=[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9];ye.t7l=[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12];ye.t8l=[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13];ye.t9l=[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11];ye.t10l=[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13];ye.t11l=[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12];ye.t12l=[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12];ye.t13l=[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18];ye.t15l=[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15];ye.t16_5l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12];ye.t16l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10];ye.t24l=[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6];ye.t32l=[1,5,5,7,5,8,7,9,5,7,7,9,7,9,9,10];ye.t33l=[4,5,5,6,5,6,6,7,5,6,6,7,6,7,7,8];ye.ht=[new Et(0,0,null,null),new Et(2,0,ye.t1HB,ye.t1l),new Et(3,0,ye.t2HB,ye.t2l),new Et(3,0,ye.t3HB,ye.t3l),new Et(0,0,null,null),new Et(4,0,ye.t5HB,ye.t5l),new Et(4,0,ye.t6HB,ye.t6l),new Et(6,0,ye.t7HB,ye.t7l),new Et(6,0,ye.t8HB,ye.t8l),new Et(6,0,ye.t9HB,ye.t9l),new Et(8,0,ye.t10HB,ye.t10l),new Et(8,0,ye.t11HB,ye.t11l),new Et(8,0,ye.t12HB,ye.t12l),new Et(16,0,ye.t13HB,ye.t13l),new Et(0,0,null,ye.t16_5l),new Et(16,0,ye.t15HB,ye.t15l),new Et(1,1,ye.t16HB,ye.t16l),new Et(2,3,ye.t16HB,ye.t16l),new Et(3,7,ye.t16HB,ye.t16l),new Et(4,15,ye.t16HB,ye.t16l),new Et(6,63,ye.t16HB,ye.t16l),new Et(8,255,ye.t16HB,ye.t16l),new Et(10,1023,ye.t16HB,ye.t16l),new Et(13,8191,ye.t16HB,ye.t16l),new Et(4,15,ye.t24HB,ye.t24l),new Et(5,31,ye.t24HB,ye.t24l),new Et(6,63,ye.t24HB,ye.t24l),new Et(7,127,ye.t24HB,ye.t24l),new Et(8,255,ye.t24HB,ye.t24l),new Et(9,511,ye.t24HB,ye.t24l),new Et(11,2047,ye.t24HB,ye.t24l),new Et(13,8191,ye.t24HB,ye.t24l),new Et(0,0,ye.t32HB,ye.t32l),new Et(0,0,ye.t33HB,ye.t33l)];ye.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366];ye.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296];ye.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369];ye.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]];ye.samplerate_table=[[22050,24e3,16e3,-1],[44100,48e3,32e3,-1],[11025,12e3,8e3,-1]];ye.scfsi_band=[0,6,11,16,21];var Ws=ze.VbrMode,uo=ze.Float,ec=ze.Util,Ys=ze.new_float,p6=ze.new_int,Wi=ze.assert;Tn.Q_MAX=257;Tn.Q_MAX2=116;Tn.LARGE_BITS=1e5;Tn.IXMAX_VAL=8206;function Tn(){var e=null,t=null,n=null;this.setModules=function(p,L,O){e=p,t=L,n=O};function a(p){return l[p+Tn.Q_MAX2]}this.IPOW20=function(p){return c[p]};var s=2220446049250313e-31,i=Tn.IXMAX_VAL,r=i+2,o=Tn.Q_MAX,m=Tn.Q_MAX2,u=100;this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var d=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=d,this.sfBandIndex=[new Ba([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Ba([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Ba([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Ba([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Ba([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Ba([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Ba([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Ba([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Ba([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0/3,24/3,48/3,72/3,108/3,156/3,216/3,288/3,372/3,480/3,486/3,492/3,498/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var l=Ys(o+m+1),c=Ys(o),v=Ys(r),h=Ys(r);this.adj43=h;function A(p,L){var O=n.ATHformula(L,p);return O-=u,O=Math.pow(10,O/10+p.ATHlower),O}function T(p){for(var L=p.internal_flags.ATH.l,O=p.internal_flags.ATH.psfb21,g=p.internal_flags.ATH.s,B=p.internal_flags.ATH.psfb12,R=p.internal_flags,C=p.out_samplerate,I=0;I<N.SBMAX_l;I++){var b=R.scalefac_band.l[I],y=R.scalefac_band.l[I+1];L[I]=uo.MAX_VALUE;for(var _=b;_<y;_++){var w=_*C/1152,E=A(p,w);L[I]=Math.min(L[I],E)}}for(var I=0;I<N.PSFB21;I++){var b=R.scalefac_band.psfb21[I],y=R.scalefac_band.psfb21[I+1];O[I]=uo.MAX_VALUE;for(var _=b;_<y;_++){var w=_*C/1152,E=A(p,w);O[I]=Math.min(O[I],E)}}for(var I=0;I<N.SBMAX_s;I++){var b=R.scalefac_band.s[I],y=R.scalefac_band.s[I+1];g[I]=uo.MAX_VALUE;for(var _=b;_<y;_++){var w=_*C/384,E=A(p,w);g[I]=Math.min(g[I],E)}g[I]*=R.scalefac_band.s[I+1]-R.scalefac_band.s[I]}for(var I=0;I<N.PSFB12;I++){var b=R.scalefac_band.psfb12[I],y=R.scalefac_band.psfb12[I+1];B[I]=uo.MAX_VALUE;for(var _=b;_<y;_++){var w=_*C/384,E=A(p,w);B[I]=Math.min(B[I],E)}B[I]*=R.scalefac_band.s[13]-R.scalefac_band.s[12]}if(p.noATH){for(var I=0;I<N.SBMAX_l;I++)L[I]=1e-20;for(var I=0;I<N.PSFB21;I++)O[I]=1e-20;for(var I=0;I<N.SBMAX_s;I++)g[I]=1e-20;for(var I=0;I<N.PSFB12;I++)B[I]=1e-20}R.ATH.floor=10*Math.log10(A(p,-1))}this.iteration_init=function(p){var L=p.internal_flags,O=L.l3_side,g;if(L.iteration_init_init==0){for(L.iteration_init_init=1,O.main_data_begin=0,T(p),v[0]=0,g=1;g<r;g++)v[g]=Math.pow(g,4/3);for(g=0;g<r-1;g++)h[g]=g+1-Math.pow(.5*(v[g]+v[g+1]),.75);for(h[g]=.5,g=0;g<o;g++)c[g]=Math.pow(2,(g-210)*-.1875);for(g=0;g<=o+m;g++)l[g]=Math.pow(2,(g-210-m)*.25);e.huffman_init(L);{var B,R,C,I;for(g=p.exp_nspsytune>>2&63,g>=32&&(g-=64),B=Math.pow(10,g/4/10),g=p.exp_nspsytune>>8&63,g>=32&&(g-=64),R=Math.pow(10,g/4/10),g=p.exp_nspsytune>>14&63,g>=32&&(g-=64),C=Math.pow(10,g/4/10),g=p.exp_nspsytune>>20&63,g>=32&&(g-=64),I=C*Math.pow(10,g/4/10),g=0;g<N.SBMAX_l;g++){var b;g<=6?b=B:g<=13?b=R:g<=20?b=C:b=I,L.nsPsy.longfact[g]=b}for(g=0;g<N.SBMAX_s;g++){var b;g<=5?b=B:g<=10?b=R:g<=11?b=C:b=I,L.nsPsy.shortfact[g]=b}}}},this.on_pe=function(p,L,O,g,B,R){var C=p.internal_flags,I=0,b,y=p6(2),_,w=new y0(I),E=t.ResvMaxBits(p,g,w,R);I=w.bits;var M=I+E;for(M>It.MAX_BITS_PER_GRANULE&&(M=It.MAX_BITS_PER_GRANULE),b=0,_=0;_<C.channels_out;++_)O[_]=Math.min(It.MAX_BITS_PER_CHANNEL,I/C.channels_out),y[_]=0|O[_]*L[B][_]/700-O[_],y[_]>g*3/4&&(y[_]=g*3/4),y[_]<0&&(y[_]=0),y[_]+O[_]>It.MAX_BITS_PER_CHANNEL&&(y[_]=Math.max(0,It.MAX_BITS_PER_CHANNEL-O[_])),b+=y[_];if(b>E)for(_=0;_<C.channels_out;++_)y[_]=E*y[_]/b;for(_=0;_<C.channels_out;++_)O[_]+=y[_],E-=y[_];for(b=0,_=0;_<C.channels_out;++_)b+=O[_];if(b>It.MAX_BITS_PER_GRANULE){var V=0;for(_=0;_<C.channels_out;++_)O[_]*=It.MAX_BITS_PER_GRANULE,O[_]/=b,V+=O[_]}return M},this.reduce_side=function(p,L,O,g){Wi(p[0]+p[1]<=It.MAX_BITS_PER_GRANULE);var B=.33*(.5-L)/.5;B<0&&(B=0),B>.5&&(B=.5);var R=0|B*.5*(p[0]+p[1]);R>It.MAX_BITS_PER_CHANNEL-p[0]&&(R=It.MAX_BITS_PER_CHANNEL-p[0]),R<0&&(R=0),p[1]>=125&&(p[1]-R>125?(p[0]<O&&(p[0]+=R),p[1]-=R):(p[0]+=p[1]-125,p[1]=125)),R=p[0]+p[1],R>g&&(p[0]=g*p[0]/R,p[1]=g*p[1]/R),Wi(p[0]<=It.MAX_BITS_PER_CHANNEL),Wi(p[1]<=It.MAX_BITS_PER_CHANNEL),Wi(p[0]+p[1]<=It.MAX_BITS_PER_GRANULE)},this.athAdjust=function(p,L,O){var g=90.30873362,B=94.82444863,R=ec.FAST_LOG10_X(L,10),C=p*p,I=0;return R-=O,C>1e-20&&(I=1+ec.FAST_LOG10_X(C,10/g)),I<0&&(I=0),R*=I,R+=O+g-B,Math.pow(10,.1*R)},this.calc_xmin=function(p,L,O,g){var B=0,R=p.internal_flags,C,I=0,b=0,y=R.ATH,_=O.xr,w=p.VBR==Ws.vbr_mtrh?1:0,E=R.masking_lower;for((p.VBR==Ws.vbr_mtrh||p.VBR==Ws.vbr_mt)&&(E=1),C=0;C<O.psy_lmax;C++){var M,V,q,$,U,f;p.VBR==Ws.vbr_rh||p.VBR==Ws.vbr_mtrh?V=athAdjust(y.adjust,y.l[C],y.floor):V=y.adjust*y.l[C],U=O.width[C],q=V/U,$=s,f=U>>1,M=0;do{var x,H;x=_[I]*_[I],M+=x,$+=x<q?x:q,I++,H=_[I]*_[I],M+=H,$+=H<q?H:q,I++}while(--f>0);if(M>V&&b++,C==N.SBPSY_l){var F=V*R.nsPsy.longfact[C];$<F&&($=F)}if(w!=0&&(V=$),!p.ATHonly){var se=L.en.l[C];if(se>0){var F;F=M*L.thm.l[C]*E/se,w!=0&&(F*=R.nsPsy.longfact[C]),V<F&&(V=F)}}w!=0?g[B++]=V:g[B++]=V*R.nsPsy.longfact[C]}var me=575;if(O.block_type!=N.SHORT_TYPE)for(var X=576;X--!=0&&ra.EQ(_[X],0);)me=X;O.max_nonzero_coeff=me;for(var G=O.sfb_smin;C<O.psymax;G++,C+=3){var U,ue,be;for(p.VBR==Ws.vbr_rh||p.VBR==Ws.vbr_mtrh?be=athAdjust(y.adjust,y.s[G],y.floor):be=y.adjust*y.s[G],U=O.width[C],ue=0;ue<3;ue++){var M=0,V,q,$,f=U>>1;q=be/U,$=s;do{var x,H;x=_[I]*_[I],M+=x,$+=x<q?x:q,I++,H=_[I]*_[I],M+=H,$+=H<q?H:q,I++}while(--f>0);if(M>be&&b++,G==N.SBPSY_s){var F=be*R.nsPsy.shortfact[G];$<F&&($=F)}if(w!=0?V=$:V=be,!p.ATHonly&&!p.ATHshort){var se=L.en.s[G][ue];if(se>0){var F;F=M*L.thm.s[G][ue]*E/se,w!=0&&(F*=R.nsPsy.shortfact[G]),V<F&&(V=F)}}w!=0?g[B++]=V:g[B++]=V*R.nsPsy.shortfact[G]}p.useTemporal&&(g[B-3]>g[B-3+1]&&(g[B-3+1]+=(g[B-3]-g[B-3+1])*R.decay),g[B-3+1]>g[B-3+2]&&(g[B-3+2]+=(g[B-3+1]-g[B-3+2])*R.decay))}return b};function k(p){this.s=p}this.calc_noise_core=function(p,L,O,g){var B=0,R=L.s,C=p.l3_enc;if(R>p.count1)for(;O--!=0;){var I;I=p.xr[R],R++,B+=I*I,I=p.xr[R],R++,B+=I*I}else if(R>p.big_values){var b=Ys(2);for(b[0]=0,b[1]=g;O--!=0;){var I;I=Math.abs(p.xr[R])-b[C[R]],R++,B+=I*I,I=Math.abs(p.xr[R])-b[C[R]],R++,B+=I*I}}else for(;O--!=0;){var I;I=Math.abs(p.xr[R])-v[C[R]]*g,R++,B+=I*I,I=Math.abs(p.xr[R])-v[C[R]]*g,R++,B+=I*I}return L.s=R,B},this.calc_noise=function(p,L,O,g,B){var R=0,C=0,I,b,y=0,_=0,w=0,E=-20,M=0,V=p.scalefac,q=0;for(g.over_SSD=0,I=0;I<p.psymax;I++){var $=p.global_gain-(V[q++]+(p.preflag!=0?d[I]:0)<<p.scalefac_scale+1)-p.subblock_gain[p.window[I]]*8,U=0;if(B!=null&&B.step[I]==$)U=B.noise[I],M+=p.width[I],O[R++]=U/L[C++],U=B.noise_log[I];else{var f=a($);if(b=p.width[I]>>1,M+p.width[I]>p.max_nonzero_coeff){var x;x=p.max_nonzero_coeff-M+1,x>0?b=x>>1:b=0}var H=new k(M);U=this.calc_noise_core(p,H,b,f),M=H.s,B!=null&&(B.step[I]=$,B.noise[I]=U),U=O[R++]=U/L[C++],U=ec.FAST_LOG10(Math.max(U,1e-20)),B!=null&&(B.noise_log[I]=U)}if(B!=null&&(B.global_gain=p.global_gain),w+=U,U>0){var F;F=Math.max(0|U*10+.5,1),g.over_SSD+=F*F,y++,_+=U}E=Math.max(E,U)}return g.over_count=y,g.tot_noise=w,g.over_noise=_,g.max_noise=E,y},this.set_pinfo=function(p,L,O,g,B){var R=p.internal_flags,C,I,b,y,_,w=L.scalefac_scale==0?.5:1,E=L.scalefac,M=Ys(L3Side.SFBMAX),V=Ys(L3Side.SFBMAX),q=new CalcNoiseResult;calc_xmin(p,O,L,M),calc_noise(L,M,V,q,null);var $=0;for(I=L.sfb_lmax,L.block_type!=N.SHORT_TYPE&&L.mixed_block_flag==0&&(I=22),C=0;C<I;C++){var U=R.scalefac_band.l[C],f=R.scalefac_band.l[C+1],x=f-U;for(y=0;$<f;$++)y+=L.xr[$]*L.xr[$];y/=x,_=1e15,R.pinfo.en[g][B][C]=_*y,R.pinfo.xfsf[g][B][C]=_*M[C]*V[C]/x,O.en.l[C]>0&&!p.ATHonly?y=y/O.en.l[C]:y=0,R.pinfo.thr[g][B][C]=_*Math.max(y*O.thm.l[C],R.ATH.l[C]),R.pinfo.LAMEsfb[g][B][C]=0,L.preflag!=0&&C>=11&&(R.pinfo.LAMEsfb[g][B][C]=-w*d[C]),C<N.SBPSY_l&&(Wi(E[C]>=0),R.pinfo.LAMEsfb[g][B][C]-=w*E[C])}if(L.block_type==N.SHORT_TYPE)for(I=C,C=L.sfb_smin;C<N.SBMAX_s;C++)for(var U=R.scalefac_band.s[C],f=R.scalefac_band.s[C+1],x=f-U,H=0;H<3;H++){for(y=0,b=U;b<f;b++)y+=L.xr[$]*L.xr[$],$++;y=Math.max(y/x,1e-20),_=1e15,R.pinfo.en_s[g][B][3*C+H]=_*y,R.pinfo.xfsf_s[g][B][3*C+H]=_*M[I]*V[I]/x,O.en.s[C][H]>0?y=y/O.en.s[C][H]:y=0,(p.ATHonly||p.ATHshort)&&(y=0),R.pinfo.thr_s[g][B][3*C+H]=_*Math.max(y*O.thm.s[C][H],R.ATH.s[C]),R.pinfo.LAMEsfb_s[g][B][3*C+H]=-2*L.subblock_gain[H],C<N.SBPSY_s&&(R.pinfo.LAMEsfb_s[g][B][3*C+H]-=w*E[I]),I++}R.pinfo.LAMEqss[g][B]=L.global_gain,R.pinfo.LAMEmainbits[g][B]=L.part2_3_length+L.part2_length,R.pinfo.LAMEsfbits[g][B]=L.part2_length,R.pinfo.over[g][B]=q.over_count,R.pinfo.max_noise[g][B]=q.max_noise*10,R.pinfo.over_noise[g][B]=q.over_noise*10,R.pinfo.tot_noise[g][B]=q.tot_noise*10,R.pinfo.over_SSD[g][B]=q.over_SSD}}var _6=ze.System,b6=ze.Arrays,Yi=ze.new_int,tc=ze.assert;function yr(){var e=null;this.qupvt=null,this.setModules=function(b){this.qupvt=b,e=b};function t(b){this.bits=0|b}var n=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]];function a(b,y,_,w,E,M){var V=.5946/y;for(b=b>>1;b--!=0;)E[M++]=V>_[w++]?0:1,E[M++]=V>_[w++]?0:1}function s(b,y,_,w,E,M){b=b>>1;var V=b%2;for(b=b>>1;b--!=0;){var q,$,U,f,x,H,F,se;q=_[w++]*y,$=_[w++]*y,x=0|q,U=_[w++]*y,H=0|$,f=_[w++]*y,F=0|U,q+=e.adj43[x],se=0|f,$+=e.adj43[H],E[M++]=0|q,U+=e.adj43[F],E[M++]=0|$,f+=e.adj43[se],E[M++]=0|U,E[M++]=0|f}if(V!=0){var q,$,x,H;q=_[w++]*y,$=_[w++]*y,x=0|q,H=0|$,q+=e.adj43[x],$+=e.adj43[H],E[M++]=0|q,E[M++]=0|$}}function i(b,y,_,w,E){var M,V,q=0,$,U=0,f=0,x=0,H=y,F=0,se=H,me=0,X=b,G=0;for($=E!=null&&w.global_gain==E.global_gain,w.block_type==N.SHORT_TYPE?V=38:V=21,M=0;M<=V;M++){var ue=-1;if(($||w.block_type==N.NORM_TYPE)&&(ue=w.global_gain-(w.scalefac[M]+(w.preflag!=0?e.pretab[M]:0)<<w.scalefac_scale+1)-w.subblock_gain[w.window[M]]*8),tc(w.width[M]>=0),$&&E.step[M]==ue)U!=0&&(s(U,_,X,G,se,me),U=0),f!=0&&(a(f,_,X,G,se,me),f=0);else{var be=w.width[M];if(q+w.width[M]>w.max_nonzero_coeff){var ke;ke=w.max_nonzero_coeff-q+1,b6.fill(y,w.max_nonzero_coeff,576,0),be=ke,be<0&&(be=0),M=V+1}if(U==0&&f==0&&(se=H,me=F,X=b,G=x),E!=null&&E.sfb_count1>0&&M>=E.sfb_count1&&E.step[M]>0&&ue>=E.step[M]?(U!=0&&(s(U,_,X,G,se,me),U=0,se=H,me=F,X=b,G=x),f+=be):(f!=0&&(a(f,_,X,G,se,me),f=0,se=H,me=F,X=b,G=x),U+=be),be<=0){f!=0&&(a(f,_,X,G,se,me),f=0),U!=0&&(s(U,_,X,G,se,me),U=0);break}}M<=V&&(F+=w.width[M],x+=w.width[M],q+=w.width[M])}U!=0&&(s(U,_,X,G,se,me),U=0),f!=0&&(a(f,_,X,G,se,me),f=0)}function r(b,y,_){var w=0,E=0;do{var M=b[y++],V=b[y++];w<M&&(w=M),E<V&&(E=V)}while(y<_);return w<E&&(w=E),w}function o(b,y,_,w,E,M){var V=ye.ht[w].xlen*65536+ye.ht[E].xlen,q=0,$;do{var U=b[y++],f=b[y++];U!=0&&(U>14&&(U=15,q+=V),U*=16),f!=0&&(f>14&&(f=15,q+=V),U+=f),q+=ye.largetbl[U]}while(y<_);return $=q&65535,q>>=16,q>$&&(q=$,w=E),M.bits+=q,w}function m(b,y,_,w){var E=0,M=ye.ht[1].hlen;do{var V=b[y+0]*2+b[y+1];y+=2,E+=M[V]}while(y<_);return w.bits+=E,1}function u(b,y,_,w,E){var M=0,V,q=ye.ht[w].xlen,$;w==2?$=ye.table23:$=ye.table56;do{var U=b[y+0]*q+b[y+1];y+=2,M+=$[U]}while(y<_);return V=M&65535,M>>=16,M>V&&(M=V,w++),E.bits+=M,w}function d(b,y,_,w,E){var M=0,V=0,q=0,$=ye.ht[w].xlen,U=ye.ht[w].hlen,f=ye.ht[w+1].hlen,x=ye.ht[w+2].hlen;do{var H=b[y+0]*$+b[y+1];y+=2,M+=U[H],V+=f[H],q+=x[H]}while(y<_);var F=w;return M>V&&(M=V,F++),M>q&&(M=q,F=w+2),E.bits+=M,F}var l=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];function c(b,y,_,w){var E=r(b,y,_);switch(E){case 0:return E;case 1:return m(b,y,_,w);case 2:case 3:return u(b,y,_,l[E-1],w);case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return d(b,y,_,l[E-1],w);default:if(E>Tn.IXMAX_VAL)return w.bits=Tn.LARGE_BITS,-1;E-=15;var M;for(M=24;M<32&&!(ye.ht[M].linmax>=E);M++);var V;for(V=M-8;V<24&&!(ye.ht[V].linmax>=E);V++);return o(b,y,_,V,M,w)}}this.noquant_count_bits=function(b,y,_){var w=y.l3_enc,E=Math.min(576,y.max_nonzero_coeff+2>>1<<1);for(_!=null&&(_.sfb_count1=0);E>1&&(w[E-1]|w[E-2])==0;E-=2);y.count1=E;for(var M=0,V=0;E>3;E-=4){var q;if(((w[E-1]|w[E-2]|w[E-3]|w[E-4])&2147483647)>1)break;q=((w[E-4]*2+w[E-3])*2+w[E-2])*2+w[E-1],M+=ye.t32l[q],V+=ye.t33l[q]}var $=M;if(y.count1table_select=0,M>V&&($=V,y.count1table_select=1),y.count1bits=$,y.big_values=E,E==0)return $;if(y.block_type==N.SHORT_TYPE)M=3*b.scalefac_band.s[3],M>y.big_values&&(M=y.big_values),V=y.big_values;else if(y.block_type==N.NORM_TYPE){if(M=y.region0_count=b.bv_scf[E-2],V=y.region1_count=b.bv_scf[E-1],V=b.scalefac_band.l[M+V+2],M=b.scalefac_band.l[M+1],V<E){var U=new t($);y.table_select[2]=c(w,V,E,U),$=U.bits}}else y.region0_count=7,y.region1_count=N.SBMAX_l-1-7-1,M=b.scalefac_band.l[8],V=E,M>V&&(M=V);if(M=Math.min(M,E),V=Math.min(V,E),M>0){var U=new t($);y.table_select[0]=c(w,0,M,U),$=U.bits}if(M<V){var U=new t($);y.table_select[1]=c(w,M,V,U),$=U.bits}if(b.use_best_huffman==2&&(y.part2_3_length=$,best_huffman_divide(b,y),$=y.part2_3_length),_!=null&&y.block_type==N.NORM_TYPE){for(var f=0;b.scalefac_band.l[f]<y.big_values;)f++;_.sfb_count1=f}return $},this.count_bits=function(b,y,_,w){var E=_.l3_enc,M=Tn.IXMAX_VAL/e.IPOW20(_.global_gain);if(_.xrpow_max>M)return Tn.LARGE_BITS;if(i(y,E,e.IPOW20(_.global_gain),_,w),(b.substep_shaping&2)!=0)for(var V=0,q=_.global_gain+_.scalefac_scale,$=.634521682242439/e.IPOW20(q),U=0;U<_.sfbmax;U++){var f=_.width[U];if(b.pseudohalf[U]==0)V+=f;else{var x;for(x=V,V+=f;x<V;++x)E[x]=y[x]>=$?E[x]:0}}return this.noquant_count_bits(b,_,w)};function v(b,y,_,w,E,M,V){for(var q=y.big_values,$=0;$<=22;$++)w[$]=Tn.LARGE_BITS;for(var $=0;$<16;$++){var U=b.scalefac_band.l[$+1];if(U>=q)break;var f=0,x=new t(f),H=c(_,0,U,x);f=x.bits;for(var F=0;F<8;F++){var se=b.scalefac_band.l[$+F+2];if(se>=q)break;var me=f;x=new t(me);var X=c(_,U,se,x);me=x.bits,w[$+F]>me&&(w[$+F]=me,E[$+F]=$,M[$+F]=H,V[$+F]=X)}}}function h(b,y,_,w,E,M,V,q){for(var $=y.big_values,U=2;U<N.SBMAX_l+1;U++){var f=b.scalefac_band.l[U];if(f>=$)break;var x=E[U-2]+y.count1bits;if(_.part2_3_length<=x)break;var H=new t(x),F=c(w,f,$,H);x=H.bits,!(_.part2_3_length<=x)&&(_.assign(y),_.part2_3_length=x,_.region0_count=M[U-2],_.region1_count=U-2-M[U-2],_.table_select[0]=V[U-2],_.table_select[1]=q[U-2],_.table_select[2]=F)}}this.best_huffman_divide=function(b,y){var _=new Do,w=y.l3_enc,E=Yi(23),M=Yi(23),V=Yi(23),q=Yi(23);if(!(y.block_type==N.SHORT_TYPE&&b.mode_gr==1)){_.assign(y),y.block_type==N.NORM_TYPE&&(v(b,y,w,E,M,V,q),h(b,_,y,w,E,M,V,q));var $=_.big_values;if(!($==0||(w[$-2]|w[$-1])>1)&&($=y.count1+2,!($>576))){_.assign(y),_.count1=$;for(var U=0,f=0;$>_.big_values;$-=4){var x=((w[$-4]*2+w[$-3])*2+w[$-2])*2+w[$-1];U+=ye.t32l[x],f+=ye.t33l[x]}if(_.big_values=$,_.count1table_select=0,U>f&&(U=f,_.count1table_select=1),_.count1bits=U,_.block_type==N.NORM_TYPE)h(b,_,y,w,E,M,V,q);else{if(_.part2_3_length=U,U=b.scalefac_band.l[8],U>$&&(U=$),U>0){var H=new t(_.part2_3_length);_.table_select[0]=c(w,0,U,H),_.part2_3_length=H.bits}if($>U){var H=new t(_.part2_3_length);_.table_select[1]=c(w,U,$,H),_.part2_3_length=H.bits}y.part2_3_length>_.part2_3_length&&y.assign(_)}}}};var A=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],T=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],k=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],p=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];yr.slen1_tab=k,yr.slen2_tab=p;function L(b,y){for(var _,w=y.tt[1][b],E=y.tt[0][b],M=0;M<ye.scfsi_band.length-1;M++){for(_=ye.scfsi_band[M];_<ye.scfsi_band[M+1]&&!(E.scalefac[_]!=w.scalefac[_]&&w.scalefac[_]>=0);_++);if(_==ye.scfsi_band[M+1]){for(_=ye.scfsi_band[M];_<ye.scfsi_band[M+1];_++)w.scalefac[_]=-1;y.scfsi[b][M]=1}}var V=0,q=0;for(_=0;_<11;_++)w.scalefac[_]!=-1&&(q++,V<w.scalefac[_]&&(V=w.scalefac[_]));for(var $=0,U=0;_<N.SBPSY_l;_++)w.scalefac[_]!=-1&&(U++,$<w.scalefac[_]&&($=w.scalefac[_]));for(var M=0;M<16;M++)if(V<A[M]&&$<T[M]){var f=k[M]*q+p[M]*U;w.part2_length>f&&(w.part2_length=f,w.scalefac_compress=M)}}this.best_scalefac_store=function(b,y,_,w){var E=w.tt[y][_],M,V,q,$,U=0;for(q=0,M=0;M<E.sfbmax;M++){var f=E.width[M];for(q+=f,$=-f;$<0&&E.l3_enc[$+q]==0;$++);$==0&&(E.scalefac[M]=U=-2)}if(E.scalefac_scale==0&&E.preflag==0){var x=0;for(M=0;M<E.sfbmax;M++)E.scalefac[M]>0&&(x|=E.scalefac[M]);if((x&1)==0&&x!=0){for(M=0;M<E.sfbmax;M++)E.scalefac[M]>0&&(E.scalefac[M]>>=1);E.scalefac_scale=U=1}}if(E.preflag==0&&E.block_type!=N.SHORT_TYPE&&b.mode_gr==2){for(M=11;M<N.SBPSY_l&&!(E.scalefac[M]<e.pretab[M]&&E.scalefac[M]!=-2);M++);if(M==N.SBPSY_l){for(M=11;M<N.SBPSY_l;M++)E.scalefac[M]>0&&(E.scalefac[M]-=e.pretab[M]);E.preflag=U=1}}for(V=0;V<4;V++)w.scfsi[_][V]=0;for(b.mode_gr==2&&y==1&&w.tt[0][_].block_type!=N.SHORT_TYPE&&w.tt[1][_].block_type!=N.SHORT_TYPE&&(L(_,w),U=0),M=0;M<E.sfbmax;M++)E.scalefac[M]==-2&&(E.scalefac[M]=0);U!=0&&(b.mode_gr==2?this.scale_bitcount(E):this.scale_bitcount_lsf(b,E))};function O(b,y){for(var _=0;_<y;++_)if(b[_]<0)return!1;return!0}var g=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],B=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],R=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(b){var y,_,w=0,E=0,M,V=b.scalefac;if(tc(O(V,b.sfbmax)),b.block_type==N.SHORT_TYPE)M=g,b.mixed_block_flag!=0&&(M=B);else if(M=R,b.preflag==0){for(_=11;_<N.SBPSY_l&&!(V[_]<e.pretab[_]);_++);if(_==N.SBPSY_l)for(b.preflag=1,_=11;_<N.SBPSY_l;_++)V[_]-=e.pretab[_]}for(_=0;_<b.sfbdivide;_++)w<V[_]&&(w=V[_]);for(;_<b.sfbmax;_++)E<V[_]&&(E=V[_]);for(b.part2_length=Tn.LARGE_BITS,y=0;y<16;y++)w<A[y]&&E<T[y]&&b.part2_length>M[y]&&(b.part2_length=M[y],b.scalefac_compress=y);return b.part2_length==Tn.LARGE_BITS};var C=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(b,y){var _,w,E,M,V,q,$,U,f=Yi(4),x=y.scalefac;for(y.preflag!=0?_=2:_=0,$=0;$<4;$++)f[$]=0;if(y.block_type==N.SHORT_TYPE){w=1;var H=e.nr_of_sfb_block[_][w];for(U=0,E=0;E<4;E++)for(M=H[E]/3,$=0;$<M;$++,U++)for(V=0;V<3;V++)x[U*3+V]>f[E]&&(f[E]=x[U*3+V])}else{w=0;var H=e.nr_of_sfb_block[_][w];for(U=0,E=0;E<4;E++)for(M=H[E],$=0;$<M;$++,U++)x[U]>f[E]&&(f[E]=x[U])}for(q=!1,E=0;E<4;E++)f[E]>C[_][E]&&(q=!0);if(!q){var F,se,me,X;for(y.sfb_partition_table=e.nr_of_sfb_block[_][w],E=0;E<4;E++)y.slen[E]=I[f[E]];switch(F=y.slen[0],se=y.slen[1],me=y.slen[2],X=y.slen[3],_){case 0:y.scalefac_compress=(F*5+se<<4)+(me<<2)+X;break;case 1:y.scalefac_compress=400+(F*5+se<<2)+me;break;case 2:y.scalefac_compress=500+F*3+se;break;default:_6.err.printf(`intensity stereo not implemented yet
`);break}}if(!q)for(tc(y.sfb_partition_table!=null),y.part2_length=0,E=0;E<4;E++)y.part2_length+=y.slen[E]*y.sfb_partition_table[E];return q};var I=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(b){for(var y=2;y<=576;y+=2){for(var _=0,w;b.scalefac_band.l[++_]<y;);for(w=n[_][0];b.scalefac_band.l[w+1]>y;)w--;for(w<0&&(w=n[_][0]),b.bv_scf[y-2]=w,w=n[_][1];b.scalefac_band.l[w+b.bv_scf[y-2]+2]>y;)w--;w<0&&(w=n[_][1]),b.bv_scf[y-1]=w}}}var Ma=ze.System,y6=ze.Arrays,w6=ze.new_byte,S6=ze.new_float_n,k6=ze.new_int,vn=ze.assert;ra.EQ=function(e,t){return Math.abs(e)>Math.abs(t)?Math.abs(e-t)<=Math.abs(e)*1e-6:Math.abs(e-t)<=Math.abs(t)*1e-6};ra.NEQ=function(e,t){return!ra.EQ(e,t)};function ra(){var e=this,t=32773,n=null,a=null,s=null,i=null;this.setModules=function(C,I,b,y){n=C,a=I,s=b,i=y};var r=null,o=0,m=0,u=0;this.getframebits=function(C){var I=C.internal_flags,b;I.bitrate_index!=0?b=ye.bitrate_table[C.version][I.bitrate_index]:b=C.brate;var y=0|(C.version+1)*72e3*b/C.out_samplerate+I.padding;return 8*y};function d(C){Ma.arraycopy(C.header[C.w_ptr].buf,0,r,m,C.sideinfo_len),m+=C.sideinfo_len,o+=C.sideinfo_len*8,C.w_ptr=C.w_ptr+1&It.MAX_HEADER_BUF-1}function l(C,I,b){for(;b>0;){var y;u==0&&(u=8,m++,vn(C.header[C.w_ptr].write_timing>=o),C.header[C.w_ptr].write_timing==o&&d(C),r[m]=0),y=Math.min(b,u),b-=y,u-=y,r[m]|=I>>b<<u,o+=y}}function c(C,I,b){for(;b>0;){var y;u==0&&(u=8,m++,r[m]=0),y=Math.min(b,u),b-=y,u-=y,r[m]|=I>>b<<u,o+=y}}function v(C,I){var b=C.internal_flags,y;if(I>=8&&(l(b,76,8),I-=8),I>=8&&(l(b,65,8),I-=8),I>=8&&(l(b,77,8),I-=8),I>=8&&(l(b,69,8),I-=8),I>=32){var _=s.getLameShortVersion();if(I>=32)for(y=0;y<_.length&&I>=8;++y)I-=8,l(b,_.charAt(y),8)}for(;I>=1;I-=1)l(b,b.ancillary_flag,1),b.ancillary_flag^=C.disable_reservoir?0:1}function h(C,I,b){for(var y=C.header[C.h_ptr].ptr;b>0;){var _=Math.min(b,8-(y&7));b-=_,C.header[C.h_ptr].buf[y>>3]|=I>>b<<8-(y&7)-_,y+=_}C.header[C.h_ptr].ptr=y}function A(C,I){C<<=8;for(var b=0;b<8;b++)C<<=1,I<<=1,((I^C)&65536)!=0&&(I^=t);return I}this.CRC_writeheader=function(C,I){var b=65535;b=A(I[2]&255,b),b=A(I[3]&255,b);for(var y=6;y<C.sideinfo_len;y++)b=A(I[y]&255,b);I[4]=byte(b>>8),I[5]=byte(b&255)};function T(C,I){var b=C.internal_flags,y,_,w;if(y=b.l3_side,b.header[b.h_ptr].ptr=0,y6.fill(b.header[b.h_ptr].buf,0,b.sideinfo_len,0),C.out_samplerate<16e3?h(b,4094,12):h(b,4095,12),h(b,C.version,1),h(b,1,2),h(b,C.error_protection?0:1,1),h(b,b.bitrate_index,4),h(b,b.samplerate_index,2),h(b,b.padding,1),h(b,C.extension,1),h(b,C.mode.ordinal(),2),h(b,b.mode_ext,2),h(b,C.copyright,1),h(b,C.original,1),h(b,C.emphasis,2),C.error_protection&&h(b,0,16),C.version==1){for(vn(y.main_data_begin>=0),h(b,y.main_data_begin,9),b.channels_out==2?h(b,y.private_bits,3):h(b,y.private_bits,5),w=0;w<b.channels_out;w++){var E;for(E=0;E<4;E++)h(b,y.scfsi[w][E],1)}for(_=0;_<2;_++)for(w=0;w<b.channels_out;w++){var M=y.tt[_][w];h(b,M.part2_3_length+M.part2_length,12),h(b,M.big_values/2,9),h(b,M.global_gain,8),h(b,M.scalefac_compress,4),M.block_type!=N.NORM_TYPE?(h(b,1,1),h(b,M.block_type,2),h(b,M.mixed_block_flag,1),M.table_select[0]==14&&(M.table_select[0]=16),h(b,M.table_select[0],5),M.table_select[1]==14&&(M.table_select[1]=16),h(b,M.table_select[1],5),h(b,M.subblock_gain[0],3),h(b,M.subblock_gain[1],3),h(b,M.subblock_gain[2],3)):(h(b,0,1),M.table_select[0]==14&&(M.table_select[0]=16),h(b,M.table_select[0],5),M.table_select[1]==14&&(M.table_select[1]=16),h(b,M.table_select[1],5),M.table_select[2]==14&&(M.table_select[2]=16),h(b,M.table_select[2],5),vn(M.region0_count>=0&&M.region0_count<16),vn(M.region1_count>=0&&M.region1_count<8),h(b,M.region0_count,4),h(b,M.region1_count,3)),h(b,M.preflag,1),h(b,M.scalefac_scale,1),h(b,M.count1table_select,1)}}else for(vn(y.main_data_begin>=0),h(b,y.main_data_begin,8),h(b,y.private_bits,b.channels_out),_=0,w=0;w<b.channels_out;w++){var M=y.tt[_][w];h(b,M.part2_3_length+M.part2_length,12),h(b,M.big_values/2,9),h(b,M.global_gain,8),h(b,M.scalefac_compress,9),M.block_type!=N.NORM_TYPE?(h(b,1,1),h(b,M.block_type,2),h(b,M.mixed_block_flag,1),M.table_select[0]==14&&(M.table_select[0]=16),h(b,M.table_select[0],5),M.table_select[1]==14&&(M.table_select[1]=16),h(b,M.table_select[1],5),h(b,M.subblock_gain[0],3),h(b,M.subblock_gain[1],3),h(b,M.subblock_gain[2],3)):(h(b,0,1),M.table_select[0]==14&&(M.table_select[0]=16),h(b,M.table_select[0],5),M.table_select[1]==14&&(M.table_select[1]=16),h(b,M.table_select[1],5),M.table_select[2]==14&&(M.table_select[2]=16),h(b,M.table_select[2],5),vn(M.region0_count>=0&&M.region0_count<16),vn(M.region1_count>=0&&M.region1_count<8),h(b,M.region0_count,4),h(b,M.region1_count,3)),h(b,M.scalefac_scale,1),h(b,M.count1table_select,1)}C.error_protection&&CRC_writeheader(b,b.header[b.h_ptr].buf);{var V=b.h_ptr;vn(b.header[V].ptr==b.sideinfo_len*8),b.h_ptr=V+1&It.MAX_HEADER_BUF-1,b.header[b.h_ptr].write_timing=b.header[V].write_timing+I,b.h_ptr==b.w_ptr&&Ma.err.println(`Error: MAX_HEADER_BUF too small in bitstream.c 
`)}}function k(C,I){var b=ye.ht[I.count1table_select+32],y,_=0,w=I.big_values,E=I.big_values;for(vn(I.count1table_select<2),y=(I.count1-I.big_values)/4;y>0;--y){var M=0,V=0,q;q=I.l3_enc[w+0],q!=0&&(V+=8,I.xr[E+0]<0&&M++),q=I.l3_enc[w+1],q!=0&&(V+=4,M*=2,I.xr[E+1]<0&&M++),q=I.l3_enc[w+2],q!=0&&(V+=2,M*=2,I.xr[E+2]<0&&M++),q=I.l3_enc[w+3],q!=0&&(V++,M*=2,I.xr[E+3]<0&&M++),w+=4,E+=4,l(C,M+b.table[V],b.hlen[V]),_+=b.hlen[V]}return _}function p(C,I,b,y,_){var w=ye.ht[I],E=0;if(I==0)return E;for(var M=b;M<y;M+=2){var V=0,q=0,$=w.xlen,U=w.xlen,f=0,x=_.l3_enc[M],H=_.l3_enc[M+1];if(x!=0&&(_.xr[M]<0&&f++,V--),I>15){if(x>14){var F=x-15;vn(F<=w.linmax),f|=F<<1,q=$,x=15}if(H>14){var se=H-15;vn(se<=w.linmax),f<<=$,f|=se,q+=$,H=15}U=16}H!=0&&(f<<=1,_.xr[M+1]<0&&f++,V--),x=x*U+H,q-=V,V+=w.hlen[x],l(C,w.table[x],V),l(C,f,q),E+=V+q}return E}function L(C,I){var b=3*C.scalefac_band.s[3];b>I.big_values&&(b=I.big_values);var y=p(C,I.table_select[0],0,b,I);return y+=p(C,I.table_select[1],b,I.big_values,I),y}function O(C,I){var b,y,_,w;b=I.big_values;var E=I.region0_count+1;return vn(E<C.scalefac_band.l.length),_=C.scalefac_band.l[E],E+=I.region1_count+1,vn(E<C.scalefac_band.l.length),w=C.scalefac_band.l[E],_>b&&(_=b),w>b&&(w=b),y=p(C,I.table_select[0],0,_,I),y+=p(C,I.table_select[1],_,w,I),y+=p(C,I.table_select[2],w,b,I),y}function g(C){var I,b,y,_,w=0,E=C.internal_flags,M=E.l3_side;if(C.version==1)for(I=0;I<2;I++)for(b=0;b<E.channels_out;b++){var V=M.tt[I][b],q=yr.slen1_tab[V.scalefac_compress],$=yr.slen2_tab[V.scalefac_compress];for(_=0,y=0;y<V.sfbdivide;y++)V.scalefac[y]!=-1&&(l(E,V.scalefac[y],q),_+=q);for(;y<V.sfbmax;y++)V.scalefac[y]!=-1&&(l(E,V.scalefac[y],$),_+=$);vn(_==V.part2_length),V.block_type==N.SHORT_TYPE?_+=L(E,V):_+=O(E,V),_+=k(E,V),vn(_==V.part2_3_length+V.part2_length),w+=_}else for(I=0,b=0;b<E.channels_out;b++){var V=M.tt[I][b],U,f,x=0;if(vn(V.sfb_partition_table!=null),_=0,y=0,f=0,V.block_type==N.SHORT_TYPE){for(;f<4;f++){var H=V.sfb_partition_table[f]/3,F=V.slen[f];for(U=0;U<H;U++,y++)l(E,Math.max(V.scalefac[y*3+0],0),F),l(E,Math.max(V.scalefac[y*3+1],0),F),l(E,Math.max(V.scalefac[y*3+2],0),F),x+=3*F}_+=L(E,V)}else{for(;f<4;f++){var H=V.sfb_partition_table[f],F=V.slen[f];for(U=0;U<H;U++,y++)l(E,Math.max(V.scalefac[y],0),F),x+=F}_+=O(E,V)}_+=k(E,V),vn(_==V.part2_3_length),vn(x==V.part2_length),w+=x+_}return w}function B(){this.total=0}function R(C,I){var b=C.internal_flags,y,_,w,E,M;return M=b.w_ptr,E=b.h_ptr-1,E==-1&&(E=It.MAX_HEADER_BUF-1),y=b.header[E].write_timing-o,I.total=y,y>=0&&(_=1+E-M,E<M&&(_=1+E-M+It.MAX_HEADER_BUF),y-=_*8*b.sideinfo_len),w=e.getframebits(C),y+=w,I.total+=w,I.total%8!=0?I.total=1+I.total/8:I.total=I.total/8,I.total+=m+1,y<0&&Ma.err.println(`strange error flushing buffer ... 
`),y}this.flush_bitstream=function(C){var I=C.internal_flags,b,y,_=I.h_ptr-1;if(_==-1&&(_=It.MAX_HEADER_BUF-1),b=I.l3_side,!((y=R(C,new B))<0)){if(v(C,y),vn(I.header[_].write_timing+this.getframebits(C)==o),I.ResvSize=0,b.main_data_begin=0,I.findReplayGain){var w=n.GetTitleGain(I.rgdata);vn(NEQ(w,GainAnalysis.GAIN_NOT_ENOUGH_SAMPLES)),I.RadioGain=Math.floor(w*10+.5)|0}I.findPeakSample&&(I.noclipGainChange=Math.ceil(Math.log10(I.PeakSample/32767)*20*10)|0,I.noclipGainChange>0&&(EQ(C.scale,1)||EQ(C.scale,0))?I.noclipScale=Math.floor(32767/I.PeakSample*100)/100:I.noclipScale=-1)}},this.add_dummy_byte=function(C,I,b){for(var y=C.internal_flags,_;b-- >0;)for(c(y,I,8),_=0;_<It.MAX_HEADER_BUF;++_)y.header[_].write_timing+=8},this.format_bitstream=function(C){var I=C.internal_flags,b;b=I.l3_side;var y=this.getframebits(C);v(C,b.resvDrain_pre),T(C,y);var _=8*I.sideinfo_len;if(_+=g(C),v(C,b.resvDrain_post),_+=b.resvDrain_post,b.main_data_begin+=(y-_)/8,R(C,new B)!=I.ResvSize&&Ma.err.println("Internal buffer inconsistency. flushbits <> ResvSize"),b.main_data_begin*8!=I.ResvSize&&(Ma.err.printf(`bit reservoir error: 
l3_side.main_data_begin: %d 
Resvoir size:             %d 
resv drain (post)         %d 
resv drain (pre)          %d 
header and sideinfo:      %d 
data bits:                %d 
total bits:               %d (remainder: %d) 
bitsperframe:             %d 
`,8*b.main_data_begin,I.ResvSize,b.resvDrain_post,b.resvDrain_pre,8*I.sideinfo_len,_-b.resvDrain_post-8*I.sideinfo_len,_,_%8,y),Ma.err.println("This is a fatal error.  It has several possible causes:"),Ma.err.println("90%%  LAME compiled with buggy version of gcc using advanced optimizations"),Ma.err.println(" 9%%  Your system is overclocked"),Ma.err.println(" 1%%  bug in LAME encoding library"),I.ResvSize=b.main_data_begin*8),o>1e9){var w;for(w=0;w<It.MAX_HEADER_BUF;++w)I.header[w].write_timing-=o;o=0}return 0},this.copy_buffer=function(C,I,b,y,_){var w=m+1;if(w<=0)return 0;if(y!=0&&w>y)return-1;if(Ma.arraycopy(r,0,I,b,w),m=-1,u=0,_!=0){var E=k6(1);if(E[0]=C.nMusicCRC,i.updateMusicCRC(E,I,b,w),C.nMusicCRC=E[0],w>0&&(C.VBR_seek_table.nBytesWritten+=w),C.decode_on_the_fly){for(var M=S6([2,1152]),V=w,q=-1,$;q!=0;)if(q=a.hip_decode1_unclipped(C.hip,I,b,V,M[0],M[1]),V=0,q==-1&&(q=0),q>0){if(C.findPeakSample){for($=0;$<q;$++)M[0][$]>C.PeakSample?C.PeakSample=M[0][$]:-M[0][$]>C.PeakSample&&(C.PeakSample=-M[0][$]);if(C.channels_out>1)for($=0;$<q;$++)M[1][$]>C.PeakSample?C.PeakSample=M[1][$]:-M[1][$]>C.PeakSample&&(C.PeakSample=-M[1][$])}if(C.findReplayGain&&n.AnalyzeSamples(C.rgdata,M[0],0,M[1],0,q,C.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6}}}return w},this.init_bit_stream_w=function(C){r=w6(pt.LAME_MAXMP3BUFFER),C.h_ptr=C.w_ptr=0,C.header[C.h_ptr].write_timing=0,m=-1,u=0,o=0}}var x6=ze.System,Ht=ze.VbrMode,nc=ze.ShortBlock,Xs=ze.new_float,sm=ze.new_int_n,T6=ze.new_short_n,ws=ze.assert;function pt(){var e=this,t=128*1024;pt.V9=410,pt.V8=420,pt.V7=430,pt.V6=440,pt.V5=450,pt.V4=460,pt.V3=470,pt.V2=480,pt.V1=490,pt.V0=500,pt.R3MIX=1e3,pt.STANDARD=1001,pt.EXTREME=1002,pt.INSANE=1003,pt.STANDARD_FAST=1004,pt.EXTREME_FAST=1005,pt.MEDIUM=1006,pt.MEDIUM_FAST=1007;var n=16384+t;pt.LAME_MAXMP3BUFFER=n;var a,s,i,r,o,m=new Ql,u,d,l;this.enc=new N,this.setModules=function(f,x,H,F,se,me,X,G,ue){a=f,s=x,i=H,r=F,o=se,u=me,d=G,l=ue,this.enc.setModules(s,m,r,u)};function c(){this.mask_adjust=0,this.mask_adjust_short=0,this.bo_l_weight=Xs(N.SBMAX_l),this.bo_s_weight=Xs(N.SBMAX_s)}function v(){this.lowerlimit=0}function h(f,x){this.lowpass=x}var A=4294479419;function T(f){var x;return f.class_id=A,x=f.internal_flags=new It,f.mode=Ot.NOT_SET,f.original=1,f.in_samplerate=44100,f.num_channels=2,f.num_samples=-1,f.bWriteVbrTag=!0,f.quality=-1,f.short_blocks=null,x.subblock_gain=-1,f.lowpassfreq=0,f.highpassfreq=0,f.lowpasswidth=-1,f.highpasswidth=-1,f.VBR=Ht.vbr_off,f.VBR_q=4,f.ATHcurve=-1,f.VBR_mean_bitrate_kbps=128,f.VBR_min_bitrate_kbps=0,f.VBR_max_bitrate_kbps=0,f.VBR_hard_min=0,x.VBR_min_bitrate=1,x.VBR_max_bitrate=13,f.quant_comp=-1,f.quant_comp_short=-1,f.msfix=-1,x.resample_ratio=1,x.OldValue[0]=180,x.OldValue[1]=180,x.CurrentStep[0]=4,x.CurrentStep[1]=4,x.masking_lower=1,x.nsPsy.attackthre=-1,x.nsPsy.attackthre_s=-1,f.scale=-1,f.athaa_type=-1,f.ATHtype=-1,f.athaa_loudapprox=-1,f.athaa_sensitivity=0,f.useTemporal=null,f.interChRatio=-1,x.mf_samples_to_encode=N.ENCDELAY+N.POSTDELAY,f.encoder_padding=0,x.mf_size=N.ENCDELAY-N.MDCTDELAY,f.findReplayGain=!1,f.decode_on_the_fly=!1,x.decode_on_the_fly=!1,x.findReplayGain=!1,x.findPeakSample=!1,x.RadioGain=0,x.AudiophileGain=0,x.noclipGainChange=0,x.noclipScale=-1,f.preset=0,f.write_id3tag_automatic=!0,0}this.lame_init=function(){var f=new s6;return T(f),f.lame_allocated_gfp=1,f};function k(f){return f>1?0:f<=0?1:Math.cos(Math.PI/2*f)}this.nearestBitrateFullIndex=function(f){var x=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320],H=0,F=0,se=0,me=0;me=x[16],se=16,F=x[16],H=16;for(var X=0;X<16;X++)if(Math.max(f,x[X+1])!=f){me=x[X+1],se=X+1,F=x[X],H=X;break}return me-f>f-F?H:se};function p(f,x){var H=44100;return x>=48e3?H=48e3:x>=44100?H=44100:x>=32e3?H=32e3:x>=24e3?H=24e3:x>=22050?H=22050:x>=16e3?H=16e3:x>=12e3?H=12e3:x>=11025?H=11025:x>=8e3&&(H=8e3),f==-1?H:(f<=15960&&(H=44100),f<=15250&&(H=32e3),f<=11220&&(H=24e3),f<=9970&&(H=22050),f<=7230&&(H=16e3),f<=5420&&(H=12e3),f<=4510&&(H=11025),f<=3970&&(H=8e3),x<H?x>44100?48e3:x>32e3?44100:x>24e3?32e3:x>22050?24e3:x>16e3?22050:x>12e3?16e3:x>11025?12e3:x>8e3?11025:8e3:H)}function L(f,x){switch(f){case 44100:return x.version=1,0;case 48e3:return x.version=1,1;case 32e3:return x.version=1,2;case 22050:return x.version=0,0;case 24e3:return x.version=0,1;case 16e3:return x.version=0,2;case 11025:return x.version=0,0;case 12e3:return x.version=0,1;case 8e3:return x.version=0,2;default:return x.version=0,-1}}function O(f,x,H){H<16e3&&(x=2);for(var F=ye.bitrate_table[x][1],se=2;se<=14;se++)ye.bitrate_table[x][se]>0&&Math.abs(ye.bitrate_table[x][se]-f)<Math.abs(F-f)&&(F=ye.bitrate_table[x][se]);return F}function g(f,x,H){H<16e3&&(x=2);for(var F=0;F<=14;F++)if(ye.bitrate_table[x][F]>0&&ye.bitrate_table[x][F]==f)return F;return-1}function B(f,x){var H=[new h(8,2e3),new h(16,3700),new h(24,3900),new h(32,5500),new h(40,7e3),new h(48,7500),new h(56,1e4),new h(64,11e3),new h(80,13500),new h(96,15100),new h(112,15600),new h(128,17e3),new h(160,17500),new h(192,18600),new h(224,19400),new h(256,19700),new h(320,20500)],F=e.nearestBitrateFullIndex(x);f.lowerlimit=H[F].lowpass}function R(f){var x=f.internal_flags,H=32,F=-1;if(x.lowpass1>0){for(var se=999,me=0;me<=31;me++){var X=me/31;X>=x.lowpass2&&(H=Math.min(H,me)),x.lowpass1<X&&X<x.lowpass2&&(se=Math.min(se,me))}se==999?x.lowpass1=(H-.75)/31:x.lowpass1=(se-.75)/31,x.lowpass2=H/31}if(x.highpass2>0&&x.highpass2<.9*(.75/31)&&(x.highpass1=0,x.highpass2=0,x6.err.println(`Warning: highpass filter disabled.  highpass frequency too small
`)),x.highpass2>0){for(var G=-1,me=0;me<=31;me++){var X=me/31;X<=x.highpass1&&(F=Math.max(F,me)),x.highpass1<X&&X<x.highpass2&&(G=Math.max(G,me))}x.highpass1=F/31,G==-1?x.highpass2=(F+.75)/31:x.highpass2=(G+.75)/31}for(var me=0;me<32;me++){var ue,be,X=me/31;x.highpass2>x.highpass1?ue=k((x.highpass2-X)/(x.highpass2-x.highpass1+1e-20)):ue=1,x.lowpass2>x.lowpass1?be=k((X-x.lowpass1)/(x.lowpass2-x.lowpass1+1e-20)):be=1,x.amp_filter[me]=ue*be}}function C(f){var x=f.internal_flags;switch(f.quality){default:case 9:x.psymodel=0,x.noise_shaping=0,x.noise_shaping_amp=0,x.noise_shaping_stop=0,x.use_best_huffman=0,x.full_outer_loop=0;break;case 8:f.quality=7;case 7:x.psymodel=1,x.noise_shaping=0,x.noise_shaping_amp=0,x.noise_shaping_stop=0,x.use_best_huffman=0,x.full_outer_loop=0;break;case 6:x.psymodel=1,x.noise_shaping==0&&(x.noise_shaping=1),x.noise_shaping_amp=0,x.noise_shaping_stop=0,x.subblock_gain==-1&&(x.subblock_gain=1),x.use_best_huffman=0,x.full_outer_loop=0;break;case 5:x.psymodel=1,x.noise_shaping==0&&(x.noise_shaping=1),x.noise_shaping_amp=0,x.noise_shaping_stop=0,x.subblock_gain==-1&&(x.subblock_gain=1),x.use_best_huffman=0,x.full_outer_loop=0;break;case 4:x.psymodel=1,x.noise_shaping==0&&(x.noise_shaping=1),x.noise_shaping_amp=0,x.noise_shaping_stop=0,x.subblock_gain==-1&&(x.subblock_gain=1),x.use_best_huffman=1,x.full_outer_loop=0;break;case 3:x.psymodel=1,x.noise_shaping==0&&(x.noise_shaping=1),x.noise_shaping_amp=1,x.noise_shaping_stop=1,x.subblock_gain==-1&&(x.subblock_gain=1),x.use_best_huffman=1,x.full_outer_loop=0;break;case 2:x.psymodel=1,x.noise_shaping==0&&(x.noise_shaping=1),x.substep_shaping==0&&(x.substep_shaping=2),x.noise_shaping_amp=1,x.noise_shaping_stop=1,x.subblock_gain==-1&&(x.subblock_gain=1),x.use_best_huffman=1,x.full_outer_loop=0;break;case 1:x.psymodel=1,x.noise_shaping==0&&(x.noise_shaping=1),x.substep_shaping==0&&(x.substep_shaping=2),x.noise_shaping_amp=2,x.noise_shaping_stop=1,x.subblock_gain==-1&&(x.subblock_gain=1),x.use_best_huffman=1,x.full_outer_loop=0;break;case 0:x.psymodel=1,x.noise_shaping==0&&(x.noise_shaping=1),x.substep_shaping==0&&(x.substep_shaping=2),x.noise_shaping_amp=2,x.noise_shaping_stop=1,x.subblock_gain==-1&&(x.subblock_gain=1),x.use_best_huffman=1,x.full_outer_loop=0;break}}function I(f){var x=f.internal_flags;f.frameNum=0,f.write_id3tag_automatic&&d.id3tag_write_v2(f),x.bitrate_stereoMode_Hist=sm([16,5]),x.bitrate_blockType_Hist=sm([16,6]),x.PeakSample=0,f.bWriteVbrTag&&u.InitVbrTag(f)}this.lame_init_params=function(f){var x=f.internal_flags;if(x.Class_ID=0,x.ATH==null&&(x.ATH=new f6),x.PSY==null&&(x.PSY=new c),x.rgdata==null&&(x.rgdata=new v6),x.channels_in=f.num_channels,x.channels_in==1&&(f.mode=Ot.MONO),x.channels_out=f.mode==Ot.MONO?1:2,x.mode_ext=N.MPG_MD_MS_LR,f.mode==Ot.MONO&&(f.force_ms=!1),f.VBR==Ht.vbr_off&&f.VBR_mean_bitrate_kbps!=128&&f.brate==0&&(f.brate=f.VBR_mean_bitrate_kbps),f.VBR==Ht.vbr_off||f.VBR==Ht.vbr_mtrh||f.VBR==Ht.vbr_mt||(f.free_format=!1),f.VBR==Ht.vbr_off&&f.brate==0&&ra.EQ(f.compression_ratio,0)&&(f.compression_ratio=11.025),f.VBR==Ht.vbr_off&&f.compression_ratio>0&&(f.out_samplerate==0&&(f.out_samplerate=map2MP3Frequency(int(.97*f.in_samplerate))),f.brate=0|f.out_samplerate*16*x.channels_out/(1e3*f.compression_ratio),x.samplerate_index=L(f.out_samplerate,f),f.free_format||(f.brate=O(f.brate,f.version,f.out_samplerate))),f.out_samplerate!=0&&(f.out_samplerate<16e3?(f.VBR_mean_bitrate_kbps=Math.max(f.VBR_mean_bitrate_kbps,8),f.VBR_mean_bitrate_kbps=Math.min(f.VBR_mean_bitrate_kbps,64)):f.out_samplerate<32e3?(f.VBR_mean_bitrate_kbps=Math.max(f.VBR_mean_bitrate_kbps,8),f.VBR_mean_bitrate_kbps=Math.min(f.VBR_mean_bitrate_kbps,160)):(f.VBR_mean_bitrate_kbps=Math.max(f.VBR_mean_bitrate_kbps,32),f.VBR_mean_bitrate_kbps=Math.min(f.VBR_mean_bitrate_kbps,320))),f.lowpassfreq==0){var H=16e3;switch(f.VBR){case Ht.vbr_off:{var F=new v;B(F,f.brate),H=F.lowerlimit;break}case Ht.vbr_abr:{var F=new v;B(F,f.VBR_mean_bitrate_kbps),H=F.lowerlimit;break}case Ht.vbr_rh:{var se=[19500,19e3,18600,18e3,17500,16e3,15600,14900,12500,1e4,3950];if(f.VBR_q>=0&&f.VBR_q<=9){var me=se[f.VBR_q],X=se[f.VBR_q+1],G=f.VBR_q_frac;H=linear_int(me,X,G)}else H=19500;break}default:{var se=[19500,19e3,18500,18e3,17500,16500,15500,14500,12500,9500,3950];if(f.VBR_q>=0&&f.VBR_q<=9){var me=se[f.VBR_q],X=se[f.VBR_q+1],G=f.VBR_q_frac;H=linear_int(me,X,G)}else H=19500}}f.mode==Ot.MONO&&(f.VBR==Ht.vbr_off||f.VBR==Ht.vbr_abr)&&(H*=1.5),f.lowpassfreq=H|0}if(f.out_samplerate==0&&(2*f.lowpassfreq>f.in_samplerate&&(f.lowpassfreq=f.in_samplerate/2),f.out_samplerate=p(f.lowpassfreq|0,f.in_samplerate)),f.lowpassfreq=Math.min(20500,f.lowpassfreq),f.lowpassfreq=Math.min(f.out_samplerate/2,f.lowpassfreq),f.VBR==Ht.vbr_off&&(f.compression_ratio=f.out_samplerate*16*x.channels_out/(1e3*f.brate)),f.VBR==Ht.vbr_abr&&(f.compression_ratio=f.out_samplerate*16*x.channels_out/(1e3*f.VBR_mean_bitrate_kbps)),f.bWriteVbrTag||(f.findReplayGain=!1,f.decode_on_the_fly=!1,x.findPeakSample=!1),x.findReplayGain=f.findReplayGain,x.decode_on_the_fly=f.decode_on_the_fly,x.decode_on_the_fly&&(x.findPeakSample=!0),x.findReplayGain&&a.InitGainAnalysis(x.rgdata,f.out_samplerate)==GainAnalysis.INIT_GAIN_ANALYSIS_ERROR)return f.internal_flags=null,-6;switch(x.decode_on_the_fly&&!f.decode_only&&(x.hip!=null&&l.hip_decode_exit(x.hip),x.hip=l.hip_decode_init()),x.mode_gr=f.out_samplerate<=24e3?1:2,f.framesize=576*x.mode_gr,f.encoder_delay=N.ENCDELAY,x.resample_ratio=f.in_samplerate/f.out_samplerate,f.VBR){case Ht.vbr_mt:case Ht.vbr_rh:case Ht.vbr_mtrh:{var ue=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5];f.compression_ratio=ue[f.VBR_q]}break;case Ht.vbr_abr:f.compression_ratio=f.out_samplerate*16*x.channels_out/(1e3*f.VBR_mean_bitrate_kbps);break;default:f.compression_ratio=f.out_samplerate*16*x.channels_out/(1e3*f.brate);break}if(f.mode==Ot.NOT_SET&&(f.mode=Ot.JOINT_STEREO),f.highpassfreq>0?(x.highpass1=2*f.highpassfreq,f.highpasswidth>=0?x.highpass2=2*(f.highpassfreq+f.highpasswidth):x.highpass2=1*2*f.highpassfreq,x.highpass1/=f.out_samplerate,x.highpass2/=f.out_samplerate):(x.highpass1=0,x.highpass2=0),f.lowpassfreq>0?(x.lowpass2=2*f.lowpassfreq,f.lowpasswidth>=0?(x.lowpass1=2*(f.lowpassfreq-f.lowpasswidth),x.lowpass1<0&&(x.lowpass1=0)):x.lowpass1=1*2*f.lowpassfreq,x.lowpass1/=f.out_samplerate,x.lowpass2/=f.out_samplerate):(x.lowpass1=0,x.lowpass2=0),R(f),x.samplerate_index=L(f.out_samplerate,f),x.samplerate_index<0)return f.internal_flags=null,-1;if(f.VBR==Ht.vbr_off){if(f.free_format)x.bitrate_index=0;else if(f.brate=O(f.brate,f.version,f.out_samplerate),x.bitrate_index=g(f.brate,f.version,f.out_samplerate),x.bitrate_index<=0)return f.internal_flags=null,-1}else x.bitrate_index=1;f.analysis&&(f.bWriteVbrTag=!1),x.pinfo!=null&&(f.bWriteVbrTag=!1),s.init_bit_stream_w(x);for(var be=x.samplerate_index+3*f.version+6*(f.out_samplerate<16e3?1:0),ke=0;ke<N.SBMAX_l+1;ke++)x.scalefac_band.l[ke]=r.sfBandIndex[be].l[ke];for(var ke=0;ke<N.PSFB21+1;ke++){var je=(x.scalefac_band.l[22]-x.scalefac_band.l[21])/N.PSFB21,Y=x.scalefac_band.l[21]+ke*je;x.scalefac_band.psfb21[ke]=Y}x.scalefac_band.psfb21[N.PSFB21]=576;for(var ke=0;ke<N.SBMAX_s+1;ke++)x.scalefac_band.s[ke]=r.sfBandIndex[be].s[ke];for(var ke=0;ke<N.PSFB12+1;ke++){var je=(x.scalefac_band.s[13]-x.scalefac_band.s[12])/N.PSFB12,Y=x.scalefac_band.s[12]+ke*je;x.scalefac_band.psfb12[ke]=Y}x.scalefac_band.psfb12[N.PSFB12]=192,f.version==1?x.sideinfo_len=x.channels_out==1?21:36:x.sideinfo_len=x.channels_out==1?13:21,f.error_protection&&(x.sideinfo_len+=2),I(f),x.Class_ID=A;{var Z;for(Z=0;Z<19;Z++)x.nsPsy.pefirbuf[Z]=700*x.mode_gr*x.channels_out;f.ATHtype==-1&&(f.ATHtype=4)}switch(ws(f.VBR_q<=9),ws(f.VBR_q>=0),f.VBR){case Ht.vbr_mt:f.VBR=Ht.vbr_mtrh;case Ht.vbr_mtrh:{f.useTemporal==null&&(f.useTemporal=!1),i.apply_preset(f,500-f.VBR_q*10,0),f.quality<0&&(f.quality=LAME_DEFAULT_QUALITY),f.quality<5&&(f.quality=0),f.quality>5&&(f.quality=5),x.PSY.mask_adjust=f.maskingadjust,x.PSY.mask_adjust_short=f.maskingadjust_short,f.experimentalY?x.sfb21_extra=!1:x.sfb21_extra=f.out_samplerate>44e3,x.iteration_loop=new VBRNewIterationLoop(o);break}case Ht.vbr_rh:{i.apply_preset(f,500-f.VBR_q*10,0),x.PSY.mask_adjust=f.maskingadjust,x.PSY.mask_adjust_short=f.maskingadjust_short,f.experimentalY?x.sfb21_extra=!1:x.sfb21_extra=f.out_samplerate>44e3,f.quality>6&&(f.quality=6),f.quality<0&&(f.quality=LAME_DEFAULT_QUALITY),x.iteration_loop=new VBROldIterationLoop(o);break}default:{var de;x.sfb21_extra=!1,f.quality<0&&(f.quality=LAME_DEFAULT_QUALITY),de=f.VBR,de==Ht.vbr_off&&(f.VBR_mean_bitrate_kbps=f.brate),i.apply_preset(f,f.VBR_mean_bitrate_kbps,0),f.VBR=de,x.PSY.mask_adjust=f.maskingadjust,x.PSY.mask_adjust_short=f.maskingadjust_short,de==Ht.vbr_off?x.iteration_loop=new g6(o):x.iteration_loop=new ABRIterationLoop(o);break}}if(ws(f.scale>=0),f.VBR!=Ht.vbr_off){if(x.VBR_min_bitrate=1,x.VBR_max_bitrate=14,f.out_samplerate<16e3&&(x.VBR_max_bitrate=8),f.VBR_min_bitrate_kbps!=0&&(f.VBR_min_bitrate_kbps=O(f.VBR_min_bitrate_kbps,f.version,f.out_samplerate),x.VBR_min_bitrate=g(f.VBR_min_bitrate_kbps,f.version,f.out_samplerate),x.VBR_min_bitrate<0)||f.VBR_max_bitrate_kbps!=0&&(f.VBR_max_bitrate_kbps=O(f.VBR_max_bitrate_kbps,f.version,f.out_samplerate),x.VBR_max_bitrate=g(f.VBR_max_bitrate_kbps,f.version,f.out_samplerate),x.VBR_max_bitrate<0))return-1;f.VBR_min_bitrate_kbps=ye.bitrate_table[f.version][x.VBR_min_bitrate],f.VBR_max_bitrate_kbps=ye.bitrate_table[f.version][x.VBR_max_bitrate],f.VBR_mean_bitrate_kbps=Math.min(ye.bitrate_table[f.version][x.VBR_max_bitrate],f.VBR_mean_bitrate_kbps),f.VBR_mean_bitrate_kbps=Math.max(ye.bitrate_table[f.version][x.VBR_min_bitrate],f.VBR_mean_bitrate_kbps)}return f.tune&&(x.PSY.mask_adjust+=f.tune_value_a,x.PSY.mask_adjust_short+=f.tune_value_a),C(f),ws(f.scale>=0),f.athaa_type<0?x.ATH.useAdjust=3:x.ATH.useAdjust=f.athaa_type,x.ATH.aaSensitivityP=Math.pow(10,f.athaa_sensitivity/-10),f.short_blocks==null&&(f.short_blocks=nc.short_block_allowed),f.short_blocks==nc.short_block_allowed&&(f.mode==Ot.JOINT_STEREO||f.mode==Ot.STEREO)&&(f.short_blocks=nc.short_block_coupled),f.quant_comp<0&&(f.quant_comp=1),f.quant_comp_short<0&&(f.quant_comp_short=0),f.msfix<0&&(f.msfix=0),f.exp_nspsytune=f.exp_nspsytune|1,f.internal_flags.nsPsy.attackthre<0&&(f.internal_flags.nsPsy.attackthre=Ql.NSATTACKTHRE),f.internal_flags.nsPsy.attackthre_s<0&&(f.internal_flags.nsPsy.attackthre_s=Ql.NSATTACKTHRE_S),ws(f.scale>=0),f.scale<0&&(f.scale=1),f.ATHtype<0&&(f.ATHtype=4),f.ATHcurve<0&&(f.ATHcurve=4),f.athaa_loudapprox<0&&(f.athaa_loudapprox=2),f.interChRatio<0&&(f.interChRatio=0),f.useTemporal==null&&(f.useTemporal=!0),x.slot_lag=x.frac_SpF=0,f.VBR==Ht.vbr_off&&(x.slot_lag=x.frac_SpF=(f.version+1)*72e3*f.brate%f.out_samplerate|0),r.iteration_init(f),m.psymodel_init(f),ws(f.scale>=0),0};function b(f,x){(f.in_buffer_0==null||f.in_buffer_nsamples<x)&&(f.in_buffer_0=Xs(x),f.in_buffer_1=Xs(x),f.in_buffer_nsamples=x)}this.lame_encode_flush=function(f,x,H,F){var se=f.internal_flags,me=T6([2,1152]),X=0,G,ue,be,ke,je=se.mf_samples_to_encode-N.POSTDELAY,Y=y(f);if(se.mf_samples_to_encode<1)return 0;for(G=0,f.in_samplerate!=f.out_samplerate&&(je+=16*f.out_samplerate/f.in_samplerate),be=f.framesize-je%f.framesize,be<576&&(be+=f.framesize),f.encoder_padding=be,ke=(je+be)/f.framesize;ke>0&&X>=0;){var Z=Y-se.mf_size,de=f.frameNum;Z*=f.in_samplerate,Z/=f.out_samplerate,Z>1152&&(Z=1152),Z<1&&(Z=1),ue=F-G,F==0&&(ue=0),X=this.lame_encode_buffer(f,me[0],me[1],Z,x,H,ue),H+=X,G+=X,ke-=de!=f.frameNum?1:0}if(se.mf_samples_to_encode=0,X<0||(ue=F-G,F==0&&(ue=0),s.flush_bitstream(f),X=s.copy_buffer(se,x,H,ue,1),X<0))return X;if(H+=X,G+=X,ue=F-G,F==0&&(ue=0),f.write_id3tag_automatic){if(d.id3tag_write_v1(f),X=s.copy_buffer(se,x,H,ue,0),X<0)return X;G+=X}return G},this.lame_encode_buffer=function(f,x,H,F,se,me,X){var G=f.internal_flags,ue=[null,null];if(G.Class_ID!=A)return-3;if(F==0)return 0;b(G,F),ue[0]=G.in_buffer_0,ue[1]=G.in_buffer_1;for(var be=0;be<F;be++)ue[0][be]=x[be],G.channels_in>1&&(ue[1][be]=H[be]);return _(f,ue[0],ue[1],F,se,me,X)};function y(f){var x=N.BLKSIZE+f.framesize-N.FFTOFFSET;return x=Math.max(x,512+f.framesize-32),x}function _(f,x,H,F,se,me,X){var G=f.internal_flags,ue=0,be,ke,je,Y,Z,de=[null,null],xe=[null,null];if(G.Class_ID!=A)return-3;if(F==0)return 0;if(Z=s.copy_buffer(G,se,me,X,0),Z<0)return Z;if(me+=Z,ue+=Z,xe[0]=x,xe[1]=H,ra.NEQ(f.scale,0)&&ra.NEQ(f.scale,1))for(ke=0;ke<F;++ke)xe[0][ke]*=f.scale,G.channels_out==2&&(xe[1][ke]*=f.scale);if(ra.NEQ(f.scale_left,0)&&ra.NEQ(f.scale_left,1))for(ke=0;ke<F;++ke)xe[0][ke]*=f.scale_left;if(ra.NEQ(f.scale_right,0)&&ra.NEQ(f.scale_right,1))for(ke=0;ke<F;++ke)xe[1][ke]*=f.scale_right;if(f.num_channels==2&&G.channels_out==1)for(ke=0;ke<F;++ke)xe[0][ke]=.5*(xe[0][ke]+xe[1][ke]),xe[1][ke]=0;Y=y(f),de[0]=G.mfbuf[0],de[1]=G.mfbuf[1];for(var Te=0;F>0;){var Be=[null,null],$e=0,Fe=0;Be[0]=xe[0],Be[1]=xe[1];var Ve=new E;if(U(f,de,Be,Te,F,Ve),$e=Ve.n_in,Fe=Ve.n_out,G.findReplayGain&&!G.decode_on_the_fly&&a.AnalyzeSamples(G.rgdata,de[0],G.mf_size,de[1],G.mf_size,Fe,G.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6;if(F-=$e,Te+=$e,G.channels_out==2,G.mf_size+=Fe,ws(G.mf_size<=It.MFSIZE),G.mf_samples_to_encode<1&&(G.mf_samples_to_encode=N.ENCDELAY+N.POSTDELAY),G.mf_samples_to_encode+=Fe,G.mf_size>=Y){var Re=X-ue;if(X==0&&(Re=0),be=w(f,de[0],de[1],se,me,Re),be<0)return be;for(me+=be,ue+=be,G.mf_size-=f.framesize,G.mf_samples_to_encode-=f.framesize,je=0;je<G.channels_out;je++)for(ke=0;ke<G.mf_size;ke++)de[je][ke]=de[je][ke+f.framesize]}}return ue}function w(f,x,H,F,se,me){var X=e.enc.lame_encode_mp3_frame(f,x,H,F,se,me);return f.frameNum++,X}function E(){this.n_in=0,this.n_out=0}function M(){this.num_used=0}function V(f,x){return x!=0?V(x,f%x):f}function q(f,x,H){var F=Math.PI*x;f/=H,f<0&&(f=0),f>1&&(f=1);var se=f-.5,me=.42-.5*Math.cos(2*f*Math.PI)+.08*Math.cos(4*f*Math.PI);return Math.abs(se)<1e-9?F/Math.PI:me*Math.sin(H*F*se)/(Math.PI*H*se)}function $(f,x,H,F,se,me,X,G,ue){var be=f.internal_flags,ke,je=0,Y,Z=f.out_samplerate/V(f.out_samplerate,f.in_samplerate);Z>It.BPC&&(Z=It.BPC);var de=Math.abs(be.resample_ratio-Math.floor(.5+be.resample_ratio))<1e-4?1:0,xe=1/be.resample_ratio;xe>1&&(xe=1);var Te=31;Te%2==0&&--Te,Te+=de;var Be=Te+1;if(be.fill_buffer_resample_init==0){for(be.inbuf_old[0]=Xs(Be),be.inbuf_old[1]=Xs(Be),ke=0;ke<=2*Z;++ke)be.blackfilt[ke]=Xs(Be);for(be.itime[0]=0,be.itime[1]=0,je=0;je<=2*Z;je++){var $e=0,Fe=(je-Z)/(2*Z);for(ke=0;ke<=Te;ke++)$e+=be.blackfilt[je][ke]=q(ke-Fe,xe,Te);for(ke=0;ke<=Te;ke++)be.blackfilt[je][ke]/=$e}be.fill_buffer_resample_init=1}var Ve=be.inbuf_old[ue];for(Y=0;Y<F;Y++){var Re,Qe;if(Re=Y*be.resample_ratio,je=0|Math.floor(Re-be.itime[ue]),Te+je-Te/2>=X)break;var Fe=Re-be.itime[ue]-(je+.5*(Te%2));Qe=0|Math.floor(Fe*2*Z+Z+.5);var Ke=0;for(ke=0;ke<=Te;++ke){var Ge=0|ke+je-Te/2,tt;tt=Ge<0?Ve[Be+Ge]:se[me+Ge],Ke+=tt*be.blackfilt[Qe][ke]}x[H+Y]=Ke}if(G.num_used=Math.min(X,Te+je-Te/2),be.itime[ue]+=G.num_used-Y*be.resample_ratio,G.num_used>=Be)for(ke=0;ke<Be;ke++)Ve[ke]=se[me+G.num_used+ke-Be];else{var st=Be-G.num_used;for(ke=0;ke<st;++ke)Ve[ke]=Ve[ke+G.num_used];for(je=0;ke<Be;++ke,++je)Ve[ke]=se[me+je];ws(je==G.num_used)}return Y}function U(f,x,H,F,se,me){var X=f.internal_flags;if(X.resample_ratio<.9999||X.resample_ratio>1.0001)for(var G=0;G<X.channels_out;G++){var ue=new M;me.n_out=$(f,x[G],X.mf_size,f.framesize,H[G],F,se,ue,G),me.n_in=ue.num_used}else{me.n_out=Math.min(f.framesize,se),me.n_in=me.n_out;for(var be=0;be<me.n_out;++be)x[0][X.mf_size+be]=H[0][F+be],X.channels_out==2&&(x[1][X.mf_size+be]=H[1][F+be])}}}var Ra=ze.VbrMode;function C6(){function e(u,d,l,c,v,h,A,T,k,p,L,O,g,B,R){this.vbr_q=u,this.quant_comp=d,this.quant_comp_s=l,this.expY=c,this.st_lrm=v,this.st_s=h,this.masking_adj=A,this.masking_adj_short=T,this.ath_lower=k,this.ath_curve=p,this.ath_sensitivity=L,this.interch=O,this.safejoint=g,this.sfb21mod=B,this.msfix=R}function t(u,d,l,c,v,h,A,T,k,p,L,O,g,B){this.quant_comp=d,this.quant_comp_s=l,this.safejoint=c,this.nsmsfix=v,this.st_lrm=h,this.st_s=A,this.nsbass=T,this.scale=k,this.masking_adj=p,this.ath_lower=L,this.ath_curve=O,this.interch=g,this.sfscale=B}var n;this.setModules=function(u){n=u};var a=[new e(0,9,9,0,5.2,125,-4.2,-6.3,4.8,1,0,0,2,21,.97),new e(1,9,9,0,5.3,125,-3.6,-5.6,4.5,1.5,0,0,2,21,1.35),new e(2,9,9,0,5.6,125,-2.2,-3.5,2.8,2,0,0,2,21,1.49),new e(3,9,9,1,5.8,130,-1.8,-2.8,2.6,3,-4,0,2,20,1.64),new e(4,9,9,1,6,135,-.7,-1.1,1.1,3.5,-8,0,2,0,1.79),new e(5,9,9,1,6.4,140,.5,.4,-7.5,4,-12,2e-4,0,0,1.95),new e(6,9,9,1,6.6,145,.67,.65,-14.7,6.5,-19,4e-4,0,0,2.3),new e(7,9,9,1,6.6,145,.8,.75,-19.7,8,-22,6e-4,0,0,2.7),new e(8,9,9,1,6.6,145,1.2,1.15,-27.5,10,-23,7e-4,0,0,0),new e(9,9,9,1,6.6,145,1.6,1.6,-36,11,-25,8e-4,0,0,0),new e(10,9,9,1,6.6,145,2,2,-36,12,-25,8e-4,0,0,0)],s=[new e(0,9,9,0,4.2,25,-7,-4,7.5,1,0,0,2,26,.97),new e(1,9,9,0,4.2,25,-5.6,-3.6,4.5,1.5,0,0,2,21,1.35),new e(2,9,9,0,4.2,25,-4.4,-1.8,2,2,0,0,2,18,1.49),new e(3,9,9,1,4.2,25,-3.4,-1.25,1.1,3,-4,0,2,15,1.64),new e(4,9,9,1,4.2,25,-2.2,.1,0,3.5,-8,0,2,0,1.79),new e(5,9,9,1,4.2,25,-1,1.65,-7.7,4,-12,2e-4,0,0,1.95),new e(6,9,9,1,4.2,25,-0,2.47,-7.7,6.5,-19,4e-4,0,0,2),new e(7,9,9,1,4.2,25,.5,2,-14.5,8,-22,6e-4,0,0,2),new e(8,9,9,1,4.2,25,1,2.4,-22,10,-23,7e-4,0,0,2),new e(9,9,9,1,4.2,25,1.5,2.95,-30,11,-25,8e-4,0,0,2),new e(10,9,9,1,4.2,25,2,2.95,-36,12,-30,8e-4,0,0,2)];function i(u,d,l){var c=u.VBR==Ra.vbr_rh?a:s,v=u.VBR_q_frac,h=c[d],A=c[d+1],T=h;h.st_lrm=h.st_lrm+v*(A.st_lrm-h.st_lrm),h.st_s=h.st_s+v*(A.st_s-h.st_s),h.masking_adj=h.masking_adj+v*(A.masking_adj-h.masking_adj),h.masking_adj_short=h.masking_adj_short+v*(A.masking_adj_short-h.masking_adj_short),h.ath_lower=h.ath_lower+v*(A.ath_lower-h.ath_lower),h.ath_curve=h.ath_curve+v*(A.ath_curve-h.ath_curve),h.ath_sensitivity=h.ath_sensitivity+v*(A.ath_sensitivity-h.ath_sensitivity),h.interch=h.interch+v*(A.interch-h.interch),h.msfix=h.msfix+v*(A.msfix-h.msfix),m(u,T.vbr_q),l!=0?u.quant_comp=T.quant_comp:Math.abs(u.quant_comp- -1)>0||(u.quant_comp=T.quant_comp),l!=0?u.quant_comp_short=T.quant_comp_s:Math.abs(u.quant_comp_short- -1)>0||(u.quant_comp_short=T.quant_comp_s),T.expY!=0&&(u.experimentalY=T.expY!=0),l!=0?u.internal_flags.nsPsy.attackthre=T.st_lrm:Math.abs(u.internal_flags.nsPsy.attackthre- -1)>0||(u.internal_flags.nsPsy.attackthre=T.st_lrm),l!=0?u.internal_flags.nsPsy.attackthre_s=T.st_s:Math.abs(u.internal_flags.nsPsy.attackthre_s- -1)>0||(u.internal_flags.nsPsy.attackthre_s=T.st_s),l!=0?u.maskingadjust=T.masking_adj:Math.abs(u.maskingadjust-0)>0||(u.maskingadjust=T.masking_adj),l!=0?u.maskingadjust_short=T.masking_adj_short:Math.abs(u.maskingadjust_short-0)>0||(u.maskingadjust_short=T.masking_adj_short),l!=0?u.ATHlower=-T.ath_lower/10:Math.abs(-u.ATHlower*10-0)>0||(u.ATHlower=-T.ath_lower/10),l!=0?u.ATHcurve=T.ath_curve:Math.abs(u.ATHcurve- -1)>0||(u.ATHcurve=T.ath_curve),l!=0?u.athaa_sensitivity=T.ath_sensitivity:Math.abs(u.athaa_sensitivity- -1)>0||(u.athaa_sensitivity=T.ath_sensitivity),T.interch>0&&(l!=0?u.interChRatio=T.interch:Math.abs(u.interChRatio- -1)>0||(u.interChRatio=T.interch)),T.safejoint>0&&(u.exp_nspsytune=u.exp_nspsytune|T.safejoint),T.sfb21mod>0&&(u.exp_nspsytune=u.exp_nspsytune|T.sfb21mod<<20),l!=0?u.msfix=T.msfix:Math.abs(u.msfix- -1)>0||(u.msfix=T.msfix),l==0&&(u.VBR_q=d,u.VBR_q_frac=v)}var r=[new t(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new t(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new t(24,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new t(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),new t(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new t(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new t(56,9,9,0,0,6.6,145,0,.95,0,-6,11,8e-4,1),new t(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8e-4,1),new t(80,9,9,0,0,6.6,145,0,.95,0,0,8,7e-4,1),new t(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6e-4,1),new t(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5e-4,1),new t(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2e-4,1),new t(160,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new t(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new t(224,9,9,1,1.25,5.2,125,0,.98,-6,9,2,0,0),new t(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new t(320,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];function o(u,d,l){var c=d,v=n.nearestBitrateFullIndex(d);if(u.VBR=Ra.vbr_abr,u.VBR_mean_bitrate_kbps=c,u.VBR_mean_bitrate_kbps=Math.min(u.VBR_mean_bitrate_kbps,320),u.VBR_mean_bitrate_kbps=Math.max(u.VBR_mean_bitrate_kbps,8),u.brate=u.VBR_mean_bitrate_kbps,u.VBR_mean_bitrate_kbps>320&&(u.disable_reservoir=!0),r[v].safejoint>0&&(u.exp_nspsytune=u.exp_nspsytune|2),r[v].sfscale>0&&(u.internal_flags.noise_shaping=2),Math.abs(r[v].nsbass)>0){var h=int(r[v].nsbass*4);h<0&&(h+=64),u.exp_nspsytune=u.exp_nspsytune|h<<2}return l!=0?u.quant_comp=r[v].quant_comp:Math.abs(u.quant_comp- -1)>0||(u.quant_comp=r[v].quant_comp),l!=0?u.quant_comp_short=r[v].quant_comp_s:Math.abs(u.quant_comp_short- -1)>0||(u.quant_comp_short=r[v].quant_comp_s),l!=0?u.msfix=r[v].nsmsfix:Math.abs(u.msfix- -1)>0||(u.msfix=r[v].nsmsfix),l!=0?u.internal_flags.nsPsy.attackthre=r[v].st_lrm:Math.abs(u.internal_flags.nsPsy.attackthre- -1)>0||(u.internal_flags.nsPsy.attackthre=r[v].st_lrm),l!=0?u.internal_flags.nsPsy.attackthre_s=r[v].st_s:Math.abs(u.internal_flags.nsPsy.attackthre_s- -1)>0||(u.internal_flags.nsPsy.attackthre_s=r[v].st_s),l!=0?u.scale=r[v].scale:Math.abs(u.scale- -1)>0||(u.scale=r[v].scale),l!=0?u.maskingadjust=r[v].masking_adj:Math.abs(u.maskingadjust-0)>0||(u.maskingadjust=r[v].masking_adj),r[v].masking_adj>0?l!=0?u.maskingadjust_short=r[v].masking_adj*.9:Math.abs(u.maskingadjust_short-0)>0||(u.maskingadjust_short=r[v].masking_adj*.9):l!=0?u.maskingadjust_short=r[v].masking_adj*1.1:Math.abs(u.maskingadjust_short-0)>0||(u.maskingadjust_short=r[v].masking_adj*1.1),l!=0?u.ATHlower=-r[v].ath_lower/10:Math.abs(-u.ATHlower*10-0)>0||(u.ATHlower=-r[v].ath_lower/10),l!=0?u.ATHcurve=r[v].ath_curve:Math.abs(u.ATHcurve- -1)>0||(u.ATHcurve=r[v].ath_curve),l!=0?u.interChRatio=r[v].interch:Math.abs(u.interChRatio- -1)>0||(u.interChRatio=r[v].interch),d}this.apply_preset=function(u,d,l){switch(d){case pt.R3MIX:{d=pt.V3,u.VBR=Ra.vbr_mtrh;break}case pt.MEDIUM:{d=pt.V4,u.VBR=Ra.vbr_rh;break}case pt.MEDIUM_FAST:{d=pt.V4,u.VBR=Ra.vbr_mtrh;break}case pt.STANDARD:{d=pt.V2,u.VBR=Ra.vbr_rh;break}case pt.STANDARD_FAST:{d=pt.V2,u.VBR=Ra.vbr_mtrh;break}case pt.EXTREME:{d=pt.V0,u.VBR=Ra.vbr_rh;break}case pt.EXTREME_FAST:{d=pt.V0,u.VBR=Ra.vbr_mtrh;break}case pt.INSANE:return d=320,u.preset=d,o(u,d,l),u.VBR=Ra.vbr_off,d}switch(u.preset=d,d){case pt.V9:return i(u,9,l),d;case pt.V8:return i(u,8,l),d;case pt.V7:return i(u,7,l),d;case pt.V6:return i(u,6,l),d;case pt.V5:return i(u,5,l),d;case pt.V4:return i(u,4,l),d;case pt.V3:return i(u,3,l),d;case pt.V2:return i(u,2,l),d;case pt.V1:return i(u,1,l),d;case pt.V0:return i(u,0,l),d}return d>=8&&d<=320?o(u,d,l):(u.preset=0,d)};function m(u,d){var l=0;return d<0&&(l=-1,d=0),d>9&&(l=-1,d=9),u.VBR_q=d,u.VBR_q_frac=0,l}}function A6(){this.setModules=function(e,t){}}function ac(){this.over_noise=0,this.tot_noise=0,this.max_noise=0,this.over_count=0,this.over_SSD=0,this.bits=0}var im=ze.new_float,E6=ze.new_int;function M6(){this.global_gain=0,this.sfb_count1=0,this.step=E6(39),this.noise=im(39),this.noise_log=im(39)}var Ss=ze.System,rm=ze.VbrMode,sc=ze.Util,fi=ze.Arrays,Xi=ze.new_float,Gi=ze.assert;function R6(){var e;this.rv=null;var t;this.qupvt=null;var n,a=new A6,s;this.setModules=function(k,p,L,O){e=k,t=p,this.rv=p,n=L,this.qupvt=L,s=O,a.setModules(n,s)},this.ms_convert=function(k,p){for(var L=0;L<576;++L){var O=k.tt[p][0].xr[L],g=k.tt[p][1].xr[L];k.tt[p][0].xr[L]=(O+g)*(sc.SQRT2*.5),k.tt[p][1].xr[L]=(O-g)*(sc.SQRT2*.5)}};function i(k,p,L,O){O=0;for(var g=0;g<=L;++g){var B=Math.abs(k.xr[g]);O+=B,p[g]=Math.sqrt(B*Math.sqrt(B)),p[g]>k.xrpow_max&&(k.xrpow_max=p[g])}return O}this.init_xrpow=function(k,p,L){var O=0,g=0|p.max_nonzero_coeff;if(p.xrpow_max=0,fi.fill(L,g,576,0),O=i(p,L,g,O),O>1e-20){var B=0;(k.substep_shaping&2)!=0&&(B=1);for(var R=0;R<p.psymax;R++)k.pseudohalf[R]=B;return!0}return fi.fill(p.l3_enc,0,576,0),!1};function r(k,p){var L=k.ATH,O=p.xr;if(p.block_type!=N.SHORT_TYPE)for(var g=!1,B=N.PSFB21-1;B>=0&&!g;B--){var R=k.scalefac_band.psfb21[B],C=k.scalefac_band.psfb21[B+1],I=n.athAdjust(L.adjust,L.psfb21[B],L.floor);k.nsPsy.longfact[21]>1e-12&&(I*=k.nsPsy.longfact[21]);for(var b=C-1;b>=R;b--)if(Math.abs(O[b])<I)O[b]=0;else{g=!0;break}}else for(var y=0;y<3;y++)for(var g=!1,B=N.PSFB12-1;B>=0&&!g;B--){var R=k.scalefac_band.s[12]*3+(k.scalefac_band.s[13]-k.scalefac_band.s[12])*y+(k.scalefac_band.psfb12[B]-k.scalefac_band.psfb12[0]),C=R+(k.scalefac_band.psfb12[B+1]-k.scalefac_band.psfb12[B]),_=n.athAdjust(L.adjust,L.psfb12[B],L.floor);k.nsPsy.shortfact[12]>1e-12&&(_*=k.nsPsy.shortfact[12]);for(var b=C-1;b>=R;b--)if(Math.abs(O[b])<_)O[b]=0;else{g=!0;break}}}this.init_outer_loop=function(k,p){p.part2_3_length=0,p.big_values=0,p.count1=0,p.global_gain=210,p.scalefac_compress=0,p.table_select[0]=0,p.table_select[1]=0,p.table_select[2]=0,p.subblock_gain[0]=0,p.subblock_gain[1]=0,p.subblock_gain[2]=0,p.subblock_gain[3]=0,p.region0_count=0,p.region1_count=0,p.preflag=0,p.scalefac_scale=0,p.count1table_select=0,p.part2_length=0,p.sfb_lmax=N.SBPSY_l,p.sfb_smin=N.SBPSY_s,p.psy_lmax=k.sfb21_extra?N.SBMAX_l:N.SBPSY_l,p.psymax=p.psy_lmax,p.sfbmax=p.sfb_lmax,p.sfbdivide=11;for(var L=0;L<N.SBMAX_l;L++)p.width[L]=k.scalefac_band.l[L+1]-k.scalefac_band.l[L],p.window[L]=3;if(p.block_type==N.SHORT_TYPE){var O=Xi(576);p.sfb_smin=0,p.sfb_lmax=0,p.mixed_block_flag!=0&&(p.sfb_smin=3,p.sfb_lmax=k.mode_gr*2+4),p.psymax=p.sfb_lmax+3*((k.sfb21_extra?N.SBMAX_s:N.SBPSY_s)-p.sfb_smin),p.sfbmax=p.sfb_lmax+3*(N.SBPSY_s-p.sfb_smin),p.sfbdivide=p.sfbmax-18,p.psy_lmax=p.sfb_lmax;var g=k.scalefac_band.l[p.sfb_lmax];Ss.arraycopy(p.xr,0,O,0,576);for(var L=p.sfb_smin;L<N.SBMAX_s;L++)for(var B=k.scalefac_band.s[L],R=k.scalefac_band.s[L+1],C=0;C<3;C++)for(var I=B;I<R;I++)p.xr[g++]=O[3*I+C];for(var b=p.sfb_lmax,L=p.sfb_smin;L<N.SBMAX_s;L++)p.width[b]=p.width[b+1]=p.width[b+2]=k.scalefac_band.s[L+1]-k.scalefac_band.s[L],p.window[b]=0,p.window[b+1]=1,p.window[b+2]=2,b+=3}p.count1bits=0,p.sfb_partition_table=n.nr_of_sfb_block[0][0],p.slen[0]=0,p.slen[1]=0,p.slen[2]=0,p.slen[3]=0,p.max_nonzero_coeff=575,fi.fill(p.scalefac,0),r(k,p)};function o(k){this.ordinal=k}o.BINSEARCH_NONE=new o(0),o.BINSEARCH_UP=new o(1),o.BINSEARCH_DOWN=new o(2);function m(k,p,L,O,g){var B,R=k.CurrentStep[O],C=!1,I=k.OldValue[O],b=o.BINSEARCH_NONE;for(p.global_gain=I,L-=p.part2_length;;){var y;if(B=s.count_bits(k,g,p,null),R==1||B==L)break;B>L?(b==o.BINSEARCH_DOWN&&(C=!0),C&&(R/=2),b=o.BINSEARCH_UP,y=R):(b==o.BINSEARCH_UP&&(C=!0),C&&(R/=2),b=o.BINSEARCH_DOWN,y=-R),p.global_gain+=y,p.global_gain<0&&(p.global_gain=0,C=!0),p.global_gain>255&&(p.global_gain=255,C=!0)}for(Gi(p.global_gain>=0),Gi(p.global_gain<256);B>L&&p.global_gain<255;)p.global_gain++,B=s.count_bits(k,g,p,null);return k.CurrentStep[O]=I-p.global_gain>=4?4:2,k.OldValue[O]=p.global_gain,p.part2_3_length=B,B}this.trancate_smallspectrums=function(k,p,L,O){var g=Xi(Ms.SFBMAX);if(!((k.substep_shaping&4)==0&&p.block_type==N.SHORT_TYPE||(k.substep_shaping&128)!=0)){n.calc_noise(p,L,g,new ac,null);for(var R=0;R<576;R++){var B=0;p.l3_enc[R]!=0&&(B=Math.abs(p.xr[R])),O[R]=B}var R=0,C=8;p.block_type==N.SHORT_TYPE&&(C=6);do{var I,b,y,_,w=p.width[C];if(R+=w,!(g[C]>=1)&&(fi.sort(O,R-w,w),!BitStream.EQ(O[R-1],0))){I=(1-g[C])*L[C],b=0,_=0;do{var E;for(y=1;_+y<w&&!BitStream.NEQ(O[_+R-w],O[_+R+y-w]);y++);if(E=O[_+R-w]*O[_+R-w]*y,I<E){_!=0&&(b=O[_+R-w-1]);break}I-=E,_+=y}while(_<w);if(!BitStream.EQ(b,0))do Math.abs(p.xr[R-w])<=b&&(p.l3_enc[R-w]=0);while(--w>0)}}while(++C<p.psymax);p.part2_3_length=s.noquant_count_bits(k,p,null)}};function u(k){for(var p=0;p<k.sfbmax;p++)if(k.scalefac[p]+k.subblock_gain[k.window[p]]==0)return!1;return!0}function d(k){return sc.FAST_LOG10(.368+.632*k*k*k)}function l(k,p){for(var L=1e-37,O=0;O<p.psymax;O++)L+=d(k[O]);return Math.max(1e-20,L)}function c(k,p,L,O,g){var B;switch(k){default:case 9:{p.over_count>0?(B=L.over_SSD<=p.over_SSD,L.over_SSD==p.over_SSD&&(B=L.bits<p.bits)):B=L.max_noise<0&&L.max_noise*10+L.bits<=p.max_noise*10+p.bits;break}case 0:B=L.over_count<p.over_count||L.over_count==p.over_count&&L.over_noise<p.over_noise||L.over_count==p.over_count&&BitStream.EQ(L.over_noise,p.over_noise)&&L.tot_noise<p.tot_noise;break;case 8:L.max_noise=l(g,O);case 1:B=L.max_noise<p.max_noise;break;case 2:B=L.tot_noise<p.tot_noise;break;case 3:B=L.tot_noise<p.tot_noise&&L.max_noise<p.max_noise;break;case 4:B=L.max_noise<=0&&p.max_noise>.2||L.max_noise<=0&&p.max_noise<0&&p.max_noise>L.max_noise-.2&&L.tot_noise<p.tot_noise||L.max_noise<=0&&p.max_noise>0&&p.max_noise>L.max_noise-.2&&L.tot_noise<p.tot_noise+p.over_noise||L.max_noise>0&&p.max_noise>-.05&&p.max_noise>L.max_noise-.1&&L.tot_noise+L.over_noise<p.tot_noise+p.over_noise||L.max_noise>0&&p.max_noise>-.1&&p.max_noise>L.max_noise-.15&&L.tot_noise+L.over_noise+L.over_noise<p.tot_noise+p.over_noise+p.over_noise;break;case 5:B=L.over_noise<p.over_noise||BitStream.EQ(L.over_noise,p.over_noise)&&L.tot_noise<p.tot_noise;break;case 6:B=L.over_noise<p.over_noise||BitStream.EQ(L.over_noise,p.over_noise)&&(L.max_noise<p.max_noise||BitStream.EQ(L.max_noise,p.max_noise)&&L.tot_noise<=p.tot_noise);break;case 7:B=L.over_count<p.over_count||L.over_noise<p.over_noise;break}return p.over_count==0&&(B=B&&L.bits<p.bits),B}function v(k,p,L,O,g){var B=k.internal_flags,R;p.scalefac_scale==0?R=1.2968395546510096:R=1.6817928305074292;for(var C=0,I=0;I<p.sfbmax;I++)C<L[I]&&(C=L[I]);var b=B.noise_shaping_amp;switch(b==3&&(g?b=2:b=1),b){case 2:break;case 1:C>1?C=Math.pow(C,.5):C*=.95;break;case 0:default:C>1?C=1:C*=.95;break}for(var y=0,I=0;I<p.sfbmax;I++){var _=p.width[I],w;if(y+=_,!(L[I]<C)){if((B.substep_shaping&2)!=0&&(B.pseudohalf[I]=B.pseudohalf[I]==0?1:0,B.pseudohalf[I]==0&&B.noise_shaping_amp==2))return;for(p.scalefac[I]++,w=-_;w<0;w++)O[y+w]*=R,O[y+w]>p.xrpow_max&&(p.xrpow_max=O[y+w]);if(B.noise_shaping_amp==2)return}}}function h(k,p){for(var L=1.2968395546510096,O=0,g=0;g<k.sfbmax;g++){var B=k.width[g],R=k.scalefac[g];if(k.preflag!=0&&(R+=n.pretab[g]),O+=B,(R&1)!=0){R++;for(var C=-B;C<0;C++)p[O+C]*=L,p[O+C]>k.xrpow_max&&(k.xrpow_max=p[O+C])}k.scalefac[g]=R>>1}k.preflag=0,k.scalefac_scale=1}function A(k,p,L){var O,g=p.scalefac;for(O=0;O<p.sfb_lmax;O++)if(g[O]>=16)return!0;for(var B=0;B<3;B++){var R=0,C=0;for(O=p.sfb_lmax+B;O<p.sfbdivide;O+=3)R<g[O]&&(R=g[O]);for(;O<p.sfbmax;O+=3)C<g[O]&&(C=g[O]);if(!(R<16&&C<8)){if(p.subblock_gain[B]>=7)return!0;p.subblock_gain[B]++;var I=k.scalefac_band.l[p.sfb_lmax];for(O=p.sfb_lmax+B;O<p.sfbmax;O+=3){var b,y=p.width[O],_=g[O];if(_=_-(4>>p.scalefac_scale),_>=0){g[O]=_,I+=y*3;continue}g[O]=0;{var w=210+(_<<p.scalefac_scale+1);b=n.IPOW20(w)}I+=y*(B+1);for(var E=-y;E<0;E++)L[I+E]*=b,L[I+E]>p.xrpow_max&&(p.xrpow_max=L[I+E]);I+=y*(3-B-1)}{var b=n.IPOW20(202);I+=p.width[O]*(B+1);for(var E=-p.width[O];E<0;E++)L[I+E]*=b,L[I+E]>p.xrpow_max&&(p.xrpow_max=L[I+E])}}}return!1}function T(k,p,L,O,g){var B=k.internal_flags;v(k,p,L,O,g);var R=u(p);return R?!1:(B.mode_gr==2?R=s.scale_bitcount(p):R=s.scale_bitcount_lsf(B,p),R?(B.noise_shaping>1&&(fi.fill(B.pseudohalf,0),p.scalefac_scale==0?(h(p,O),R=!1):p.block_type==N.SHORT_TYPE&&B.subblock_gain>0&&(R=A(B,p,O)||u(p))),R||(B.mode_gr==2?R=s.scale_bitcount(p):R=s.scale_bitcount_lsf(B,p)),!R):!0)}this.outer_loop=function(k,p,L,O,g,B){var R=k.internal_flags,C=new Do,I=Xi(576),b=Xi(Ms.SFBMAX),y=new ac,_,w=new M6,E=9999999,M=!1,V=!1,q=0;if(m(R,p,B,g,O),R.noise_shaping==0)return 100;n.calc_noise(p,L,b,y,w),y.bits=p.part2_3_length,C.assign(p);var $=0;for(Ss.arraycopy(O,0,I,0,576);!M;){do{var U=new ac,f,x=255;if((R.substep_shaping&2)!=0?f=20:f=3,R.sfb21_extra&&(b[C.sfbmax]>1||C.block_type==N.SHORT_TYPE&&(b[C.sfbmax+1]>1||b[C.sfbmax+2]>1))||!T(k,C,b,O,V))break;C.scalefac_scale!=0&&(x=254);var H=B-C.part2_length;if(H<=0)break;for(;(C.part2_3_length=s.count_bits(R,O,C,w))>H&&C.global_gain<=x;)C.global_gain++;if(C.global_gain>x)break;if(y.over_count==0){for(;(C.part2_3_length=s.count_bits(R,O,C,w))>E&&C.global_gain<=x;)C.global_gain++;if(C.global_gain>x)break}if(n.calc_noise(C,L,b,U,w),U.bits=C.part2_3_length,p.block_type!=N.SHORT_TYPE?_=k.quant_comp:_=k.quant_comp_short,_=c(_,y,U,C,b)?1:0,_!=0)E=p.part2_3_length,y=U,p.assign(C),$=0,Ss.arraycopy(O,0,I,0,576);else if(R.full_outer_loop==0&&(++$>f&&y.over_count==0||R.noise_shaping_amp==3&&V&&$>30||R.noise_shaping_amp==3&&V&&C.global_gain-q>15))break}while(C.global_gain+C.scalefac_scale<255);R.noise_shaping_amp==3?V?M=!0:(C.assign(p),Ss.arraycopy(I,0,O,0,576),$=0,q=C.global_gain,V=!0):M=!0}return Gi(p.global_gain+p.scalefac_scale<=255),k.VBR==rm.vbr_rh||k.VBR==rm.vbr_mtrh?Ss.arraycopy(I,0,O,0,576):(R.substep_shaping&1)!=0&&trancate_smallspectrums(R,p,L,O),y.over_count},this.iteration_finish_one=function(k,p,L){var O=k.l3_side,g=O.tt[p][L];s.best_scalefac_store(k,p,L,O),k.use_best_huffman==1&&s.best_huffman_divide(k,g),t.ResvAdjust(k,g)},this.VBR_encode_granule=function(k,p,L,O,g,B,R){var C=k.internal_flags,I=new Do,b=Xi(576),y=R,_=R+1,w=(R+B)/2,E,M,V=0,q=C.sfb21_extra;Gi(y<=LameInternalFlags.MAX_BITS_PER_CHANNEL),fi.fill(I.l3_enc,0);do w>y-42?C.sfb21_extra=!1:C.sfb21_extra=q,M=outer_loop(k,p,L,O,g,w),M<=0?(V=1,_=p.part2_3_length,I.assign(p),Ss.arraycopy(O,0,b,0,576),R=_-32,E=R-B,w=(R+B)/2):(B=w+32,E=R-B,w=(R+B)/2,V!=0&&(V=2,p.assign(I),Ss.arraycopy(b,0,O,0,576)));while(E>12);C.sfb21_extra=q,V==2&&Ss.arraycopy(I.l3_enc,0,p.l3_enc,0,576),Gi(p.part2_3_length<=y)},this.get_framebits=function(k,p){var L=k.internal_flags;L.bitrate_index=L.VBR_min_bitrate;var O=e.getframebits(k);L.bitrate_index=1,O=e.getframebits(k);for(var g=1;g<=L.VBR_max_bitrate;g++){L.bitrate_index=g;var B=new MeanBits(O);p[g]=t.ResvFrameBegin(k,B),O=B.bits}},this.VBR_old_prepare=function(k,p,L,O,g,B,R,C,I){var b=k.internal_flags,y,_=0,w=1,E=0;b.bitrate_index=b.VBR_max_bitrate;var M=t.ResvFrameBegin(k,new MeanBits(0))/b.mode_gr;get_framebits(k,B);for(var V=0;V<b.mode_gr;V++){var q=n.on_pe(k,p,C[V],M,V,0);b.mode_ext==N.MPG_MD_MS_LR&&(ms_convert(b.l3_side,V),n.reduce_side(C[V],L[V],M,q));for(var $=0;$<b.channels_out;++$){var U=b.l3_side.tt[V][$];U.block_type!=N.SHORT_TYPE?(_=1.28/(1+Math.exp(3.5-p[V][$]/300))-.05,y=b.PSY.mask_adjust-_):(_=2.56/(1+Math.exp(3.5-p[V][$]/300))-.14,y=b.PSY.mask_adjust_short-_),b.masking_lower=Math.pow(10,y*.1),init_outer_loop(b,U),I[V][$]=n.calc_xmin(k,O[V][$],U,g[V][$]),I[V][$]!=0&&(w=0),R[V][$]=126,E+=C[V][$]}}for(var V=0;V<b.mode_gr;V++)for(var $=0;$<b.channels_out;$++)E>B[b.VBR_max_bitrate]&&(C[V][$]*=B[b.VBR_max_bitrate],C[V][$]/=E),R[V][$]>C[V][$]&&(R[V][$]=C[V][$]);return w},this.bitpressure_strategy=function(k,p,L,O){for(var g=0;g<k.mode_gr;g++)for(var B=0;B<k.channels_out;B++){for(var R=k.l3_side.tt[g][B],C=p[g][B],I=0,b=0;b<R.psy_lmax;b++)C[I++]*=1+.029*b*b/N.SBMAX_l/N.SBMAX_l;if(R.block_type==N.SHORT_TYPE)for(var b=R.sfb_smin;b<N.SBMAX_s;b++)C[I++]*=1+.029*b*b/N.SBMAX_s/N.SBMAX_s,C[I++]*=1+.029*b*b/N.SBMAX_s/N.SBMAX_s,C[I++]*=1+.029*b*b/N.SBMAX_s/N.SBMAX_s;O[g][B]=0|Math.max(L[g][B],.9*O[g][B])}},this.VBR_new_prepare=function(k,p,L,O,g,B){var R=k.internal_flags,C=1,I=0,b=0,y;if(k.free_format){R.bitrate_index=0;var _=new MeanBits(I);y=t.ResvFrameBegin(k,_),I=_.bits,g[0]=y}else{R.bitrate_index=R.VBR_max_bitrate;var _=new MeanBits(I);t.ResvFrameBegin(k,_),I=_.bits,get_framebits(k,g),y=g[R.VBR_max_bitrate]}for(var w=0;w<R.mode_gr;w++){n.on_pe(k,p,B[w],I,w,0),R.mode_ext==N.MPG_MD_MS_LR&&ms_convert(R.l3_side,w);for(var E=0;E<R.channels_out;++E){var M=R.l3_side.tt[w][E];R.masking_lower=Math.pow(10,R.PSY.mask_adjust*.1),init_outer_loop(R,M),n.calc_xmin(k,L[w][E],M,O[w][E])!=0&&(C=0),b+=B[w][E]}}for(var w=0;w<R.mode_gr;w++)for(var E=0;E<R.channels_out;E++)b>y&&(B[w][E]*=y,B[w][E]/=b);return C},this.calc_target_bits=function(k,p,L,O,g,B){var R=k.internal_flags,C=R.l3_side,I,b,y,_,w=0;R.bitrate_index=R.VBR_max_bitrate;var E=new MeanBits(w);for(B[0]=t.ResvFrameBegin(k,E),w=E.bits,R.bitrate_index=1,w=e.getframebits(k)-R.sideinfo_len*8,g[0]=w/(R.mode_gr*R.channels_out),w=k.VBR_mean_bitrate_kbps*k.framesize*1e3,(R.substep_shaping&1)!=0&&(w*=1.09),w/=k.out_samplerate,w-=R.sideinfo_len*8,w/=R.mode_gr*R.channels_out,I=.93+.07*(11-k.compression_ratio)/(11-5.5),I<.9&&(I=.9),I>1&&(I=1),b=0;b<R.mode_gr;b++){var M=0;for(y=0;y<R.channels_out;y++){if(O[b][y]=int(I*w),p[b][y]>700){var V=int((p[b][y]-700)/1.4),q=C.tt[b][y];O[b][y]=int(I*w),q.block_type==N.SHORT_TYPE&&V<w/2&&(V=w/2),V>w*3/2?V=w*3/2:V<0&&(V=0),O[b][y]+=V}O[b][y]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(O[b][y]=LameInternalFlags.MAX_BITS_PER_CHANNEL),M+=O[b][y]}if(M>LameInternalFlags.MAX_BITS_PER_GRANULE)for(y=0;y<R.channels_out;++y)O[b][y]*=LameInternalFlags.MAX_BITS_PER_GRANULE,O[b][y]/=M}if(R.mode_ext==N.MPG_MD_MS_LR)for(b=0;b<R.mode_gr;b++)n.reduce_side(O[b],L[b],w*R.channels_out,LameInternalFlags.MAX_BITS_PER_GRANULE);for(_=0,b=0;b<R.mode_gr;b++)for(y=0;y<R.channels_out;y++)O[b][y]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(O[b][y]=LameInternalFlags.MAX_BITS_PER_CHANNEL),_+=O[b][y];if(_>B[0])for(b=0;b<R.mode_gr;b++)for(y=0;y<R.channels_out;y++)O[b][y]*=B[0],O[b][y]/=_}}var om=ze.assert;function I6(){var e;this.setModules=function(t){e=t},this.ResvFrameBegin=function(t,n){var a=t.internal_flags,s,i=a.l3_side,r=e.getframebits(t);n.bits=(r-a.sideinfo_len*8)/a.mode_gr;var o=8*256*a.mode_gr-8;t.brate>320?s=8*int(t.brate*1e3/(t.out_samplerate/1152)/8+.5):(s=8*1440,t.strict_ISO&&(s=8*int(32e4/(t.out_samplerate/1152)/8+.5))),a.ResvMax=s-r,a.ResvMax>o&&(a.ResvMax=o),(a.ResvMax<0||t.disable_reservoir)&&(a.ResvMax=0);var m=n.bits*a.mode_gr+Math.min(a.ResvSize,a.ResvMax);return m>s&&(m=s),om(a.ResvMax%8==0),om(a.ResvMax>=0),i.resvDrain_pre=0,a.pinfo!=null&&(a.pinfo.mean_bits=n.bits/2,a.pinfo.resvsize=a.ResvSize),m},this.ResvMaxBits=function(t,n,a,s){var i=t.internal_flags,r,o=i.ResvSize,m=i.ResvMax;s!=0&&(o+=n),(i.substep_shaping&1)!=0&&(m*=.9),a.bits=n,o*10>m*9?(r=o-m*9/10,a.bits+=r,i.substep_shaping|=128):(r=0,i.substep_shaping&=127,!t.disable_reservoir&&(i.substep_shaping&1)==0&&(a.bits-=.1*n));var u=o<i.ResvMax*6/10?o:i.ResvMax*6/10;return u-=r,u<0&&(u=0),u},this.ResvAdjust=function(t,n){t.ResvSize-=n.part2_3_length+n.part2_length},this.ResvFrameEnd=function(t,n){var a,s=t.l3_side;t.ResvSize+=n*t.mode_gr;var i=0;s.resvDrain_post=0,s.resvDrain_pre=0,(a=t.ResvSize%8)!=0&&(i+=a),a=t.ResvSize-i-t.ResvMax,a>0&&(i+=a);{var r=Math.min(s.main_data_begin*8,i)/8;s.resvDrain_pre+=8*r,i-=8*r,t.ResvSize-=8*r,s.main_data_begin-=r}s.resvDrain_post+=i,t.ResvSize-=i}}function B6(){var e="http://www.mp3dev.org/",t=3,n=98,a=4,s=0,i=93;this.getLameVersion=function(){return t+"."+n+"."+a},this.getLameShortVersion=function(){return t+"."+n+"."+a},this.getLameVeryShortVersion=function(){return"LAME"+t+"."+n+"r"},this.getPsyVersion=function(){return s+"."+i},this.getLameUrl=function(){return e},this.getLameOsBitness=function(){return"32bits"}}var L6=ze.System,ic=ze.VbrMode,lm=ze.ShortBlock,O6=ze.Arrays,mo=ze.new_byte,F6=ze.assert;wr.NUMTOCENTRIES=100;wr.MAXFRAMESIZE=2880;function wr(){var e,t,n;this.setModules=function(w,E,M){e=w,t=E,n=M};var a=1,s=2,i=4,r=8,o=wr.NUMTOCENTRIES,m=wr.MAXFRAMESIZE,u=o+4+4+4+4+4,d=u+9+1+1+8+1+1+3+1+1+2+4+2+2,l=128,c=64,v=32,h=null,A="Xing",T="Info",k=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];function p(w,E){if(w.nVbrNumFrames++,w.sum+=E,w.seen++,!(w.seen<w.want)&&(w.pos<w.size&&(w.bag[w.pos]=w.sum,w.pos++,w.seen=0),w.pos==w.size)){for(var M=1;M<w.size;M+=2)w.bag[M/2]=w.bag[M];w.want*=2,w.pos/=2}}function L(w,E){if(!(w.pos<=0))for(var M=1;M<o;++M){var V=M/o,q,$,U=0|Math.floor(V*w.pos);U>w.pos-1&&(U=w.pos-1),q=w.bag[U],$=w.sum;var f=0|256*q/$;f>255&&(f=255),E[M]=255&f}}this.addVbrFrame=function(w){var E=w.internal_flags,M=Tables.bitrate_table[w.version][E.bitrate_index];F6(E.VBR_seek_table.bag!=null),p(E.VBR_seek_table,M)};function O(w,E){var M=w[E+0]&255;return M<<=8,M|=w[E+1]&255,M<<=8,M|=w[E+2]&255,M<<=8,M|=w[E+3]&255,M}function g(w,E,M){w[E+0]=255&(M>>24&255),w[E+1]=255&(M>>16&255),w[E+2]=255&(M>>8&255),w[E+3]=255&(M&255)}function B(w,E,M){w[E+0]=255&(M>>8&255),w[E+1]=255&(M&255)}function R(w,E){return new String(w,E,A.length(),h).equals(A)||new String(w,E,T.length(),h).equals(T)}function C(w,E,M){return 255&(w<<E|M&~(-1<<E))}function I(w,E){var M=w.internal_flags;E[0]=C(E[0],8,255),E[1]=C(E[1],3,7),E[1]=C(E[1],1,w.out_samplerate<16e3?0:1),E[1]=C(E[1],1,w.version),E[1]=C(E[1],2,1),E[1]=C(E[1],1,w.error_protection?0:1),E[2]=C(E[2],4,M.bitrate_index),E[2]=C(E[2],2,M.samplerate_index),E[2]=C(E[2],1,0),E[2]=C(E[2],1,w.extension),E[3]=C(E[3],2,w.mode.ordinal()),E[3]=C(E[3],2,M.mode_ext),E[3]=C(E[3],1,w.copyright),E[3]=C(E[3],1,w.original),E[3]=C(E[3],2,w.emphasis),E[0]=255;var V=255&(E[1]&241),q;w.version==1?q=l:w.out_samplerate<16e3?q=v:q=c,w.VBR==ic.vbr_off&&(q=w.brate);var $;w.free_format?$=0:$=255&16*e.BitrateIndex(q,w.version,w.out_samplerate),w.version==1?(E[1]=255&(V|10),V=255&(E[2]&13),E[2]=255&($|V)):(E[1]=255&(V|2),V=255&(E[2]&13),E[2]=255&($|V))}this.getVbrTag=function(w){var E=new VBRTagData,M=0;E.flags=0;var V=w[M+1]>>3&1,q=w[M+2]>>2&3,$=w[M+3]>>6&3,U=w[M+2]>>4&15;if(U=Tables.bitrate_table[V][U],w[M+1]>>4==14?E.samprate=Tables.samplerate_table[2][q]:E.samprate=Tables.samplerate_table[V][q],V!=0?$!=3?M+=36:M+=21:$!=3?M+=21:M+=13,!R(w,M))return null;M+=4,E.hId=V;var f=E.flags=O(w,M);if(M+=4,(f&a)!=0&&(E.frames=O(w,M),M+=4),(f&s)!=0&&(E.bytes=O(w,M),M+=4),(f&i)!=0){if(E.toc!=null)for(var x=0;x<o;x++)E.toc[x]=w[M+x];M+=o}E.vbrScale=-1,(f&r)!=0&&(E.vbrScale=O(w,M),M+=4),E.headersize=(V+1)*72e3*U/E.samprate,M+=21;var H=w[M+0]<<4;H+=w[M+1]>>4;var F=(w[M+1]&15)<<8;return F+=w[M+2]&255,(H<0||H>3e3)&&(H=-1),(F<0||F>3e3)&&(F=-1),E.encDelay=H,E.encPadding=F,E},this.InitVbrTag=function(w){var E=w.internal_flags,M;w.version==1?M=l:w.out_samplerate<16e3?M=v:M=c,w.VBR==ic.vbr_off&&(M=w.brate);var V=(w.version+1)*72e3*M/w.out_samplerate,q=E.sideinfo_len+d;if(E.VBR_seek_table.TotalFrameSize=V,V<q||V>m){w.bWriteVbrTag=!1;return}E.VBR_seek_table.nVbrNumFrames=0,E.VBR_seek_table.nBytesWritten=0,E.VBR_seek_table.sum=0,E.VBR_seek_table.seen=0,E.VBR_seek_table.want=1,E.VBR_seek_table.pos=0,E.VBR_seek_table.bag==null&&(E.VBR_seek_table.bag=new int[400],E.VBR_seek_table.size=400);var $=mo(m);I(w,$);for(var U=E.VBR_seek_table.TotalFrameSize,f=0;f<U;++f)t.add_dummy_byte(w,$[f]&255,1)};function b(w,E){var M=E^w;return E=E>>8^k[M&255],E}this.updateMusicCRC=function(w,E,M,V){for(var q=0;q<V;++q)w[0]=b(E[M+q],w[0])};function y(w,E,M,V,q){var $=w.internal_flags,U=0,f=w.encoder_delay,x=w.encoder_padding,H=100-10*w.VBR_q-w.quality,F=n.getLameVeryShortVersion(),se,me=0,X,G=[1,5,3,2,4,0,3],ue=0|(w.lowpassfreq/100+.5>255?255:w.lowpassfreq/100+.5),be=0,ke=0,je=0,Y=w.internal_flags.noise_shaping,Z=0,de=0,xe=0,Te=0,Be=0,$e=(w.exp_nspsytune&1)!=0,Fe=(w.exp_nspsytune&2)!=0,Ve=!1,Re=!1,Qe=w.internal_flags.nogap_total,Ke=w.internal_flags.nogap_current,Ge=w.ATHtype,tt=0,st;switch(w.VBR){case vbr_abr:st=w.VBR_mean_bitrate_kbps;break;case vbr_off:st=w.brate;break;default:st=w.VBR_min_bitrate_kbps}switch(w.VBR.ordinal()<G.length?se=G[w.VBR.ordinal()]:se=0,X=16*me+se,$.findReplayGain&&($.RadioGain>510&&($.RadioGain=510),$.RadioGain<-510&&($.RadioGain=-510),ke=8192,ke|=3072,$.RadioGain>=0?ke|=$.RadioGain:(ke|=512,ke|=-$.RadioGain)),$.findPeakSample&&(be=Math.abs(0|$.PeakSample/32767*Math.pow(2,23)+.5)),Qe!=-1&&(Ke>0&&(Re=!0),Ke<Qe-1&&(Ve=!0)),tt=Ge+(($e?1:0)<<4)+((Fe?1:0)<<5)+((Ve?1:0)<<6)+((Re?1:0)<<7),H<0&&(H=0),w.mode){case MONO:Z=0;break;case STEREO:Z=1;break;case DUAL_CHANNEL:Z=2;break;case JOINT_STEREO:w.force_ms?Z=4:Z=3;break;case NOT_SET:default:Z=7;break}w.in_samplerate<=32e3?xe=0:w.in_samplerate==48e3?xe=2:w.in_samplerate>48e3?xe=3:xe=1,(w.short_blocks==lm.short_block_forced||w.short_blocks==lm.short_block_dispensed||w.lowpassfreq==-1&&w.highpassfreq==-1||w.scale_left<w.scale_right||w.scale_left>w.scale_right||w.disable_reservoir&&w.brate<320||w.noATH||w.ATHonly||Ge==0||w.in_samplerate<=32e3)&&(de=1),Te=Y+(Z<<2)+(de<<5)+(xe<<6),Be=$.nMusicCRC,g(M,V+U,H),U+=4;for(var ge=0;ge<9;ge++)M[V+U+ge]=255&F.charAt(ge);U+=9,M[V+U]=255&X,U++,M[V+U]=255&ue,U++,g(M,V+U,be),U+=4,B(M,V+U,ke),U+=2,B(M,V+U,je),U+=2,M[V+U]=255&tt,U++,st>=255?M[V+U]=255:M[V+U]=255&st,U++,M[V+U]=255&f>>4,M[V+U+1]=255&(f<<4)+(x>>8),M[V+U+2]=255&x,U+=3,M[V+U]=255&Te,U++,M[V+U++]=0,B(M,V+U,w.preset),U+=2,g(M,V+U,E),U+=4,B(M,V+U,Be),U+=2;for(var z=0;z<U;z++)q=b(M[V+z],q);return B(M,V+U,q),U+=2,U}function _(w){w.seek(0);var E=mo(10);w.readFully(E);var M;return new String(E,"ISO-8859-1").startsWith("ID3")?M=0:M=((E[6]&127)<<21|(E[7]&127)<<14|(E[8]&127)<<7|E[9]&127)+E.length,M}this.getLameTagFrame=function(w,E){var M=w.internal_flags;if(!w.bWriteVbrTag||M.Class_ID!=Lame.LAME_ID||M.VBR_seek_table.pos<=0)return 0;if(E.length<M.VBR_seek_table.TotalFrameSize)return M.VBR_seek_table.TotalFrameSize;O6.fill(E,0,M.VBR_seek_table.TotalFrameSize,0),I(w,E);var V=mo(o);if(w.free_format)for(var q=1;q<o;++q)V[q]=255&255*q/100;else L(M.VBR_seek_table,V);var $=M.sideinfo_len;w.error_protection&&($-=2),w.VBR==ic.vbr_off?(E[$++]=255&T.charAt(0),E[$++]=255&T.charAt(1),E[$++]=255&T.charAt(2),E[$++]=255&T.charAt(3)):(E[$++]=255&A.charAt(0),E[$++]=255&A.charAt(1),E[$++]=255&A.charAt(2),E[$++]=255&A.charAt(3)),g(E,$,a+s+i+r),$+=4,g(E,$,M.VBR_seek_table.nVbrNumFrames),$+=4;var U=M.VBR_seek_table.nBytesWritten+M.VBR_seek_table.TotalFrameSize;g(E,$,0|U),$+=4,L6.arraycopy(V,0,E,$,V.length),$+=V.length,w.error_protection&&t.CRC_writeheader(M,E);for(var f=0,q=0;q<$;q++)f=b(E[q],f);return $+=y(w,U,E,$,f),M.VBR_seek_table.TotalFrameSize},this.putVbrTag=function(w,E){var M=w.internal_flags;if(M.VBR_seek_table.pos<=0||(E.seek(E.length()),E.length()==0))return-1;var V=_(E);E.seek(V);var q=mo(m),$=getLameTagFrame(w,q);return $>q.length?-1:($<1||E.write(q,0,$),0)}}var cm=ze.new_byte,V6=ze.assert;function P6(){this.setModules=function(e,t){}}function D6(){this.setModules=function(e,t,n){}}function j6(){}function N6(){this.setModules=function(e,t){}}function $6(e,t,n){arguments.length!=3&&(console.error("WARN: Mp3Encoder(channels, samplerate, kbps) not specified"),e=1,t=44100,n=128);var a=new pt,s=new P6,i=new cn,r=new ra,o=new C6,m=new Tn,u=new R6,d=new wr,l=new B6,c=new N6,v=new I6,h=new yr,A=new D6,T=new j6;a.setModules(i,r,o,m,u,d,l,c,T),r.setModules(i,T,l,d),c.setModules(r,l),o.setModules(a),u.setModules(r,v,m,h),m.setModules(h,v,a.enc.psy),v.setModules(r),h.setModules(m),d.setModules(a,r,l),s.setModules(A,T),A.setModules(l,c,o);var k=a.lame_init();k.num_channels=e,k.in_samplerate=t,k.brate=n,k.mode=Ot.STEREO,k.quality=3,k.bWriteVbrTag=!1,k.disable_reservoir=!0,k.write_id3tag_automatic=!1,a.lame_init_params(k);var p=1152,L=0|1.25*p+7200,O=cm(L);this.encodeBuffer=function(g,B){e==1&&(B=g),V6(g.length==B.length),g.length>p&&(p=g.length,L=0|1.25*p+7200,O=cm(L));var R=a.lame_encode_buffer(k,g,B,g.length,O,0,L);return new Int8Array(O.subarray(0,R))},this.flush=function(){var g=a.lame_encode_flush(k,O,0,L);return new Int8Array(O.subarray(0,g))}}function fl(e){return e.charCodeAt(0)<<24|e.charCodeAt(1)<<16|e.charCodeAt(2)<<8|e.charCodeAt(3)}fl("RIFF");fl("WAVE");fl("fmt ");fl("data");class H6{constructor(t){this.bitRate=t.bitRate,this.sampleRate=t.sampleRate,this.dataBuffer=[],this.encoder=new $6(1,this.sampleRate,this.bitRate)}encode(t){const a=this._convertBuffer(t);let s=a.length;for(let i=0;s>=0;i+=1152){const r=a.subarray(i,i+1152),o=this.encoder.encodeBuffer(r);this.dataBuffer.push(new Int8Array(o)),s-=1152}}finish(){this.dataBuffer.push(this.encoder.flush());const t=new Blob(this.dataBuffer,{type:"audio/mp3"});return this.dataBuffer=[],{id:Date.now(),blob:t,url:URL.createObjectURL(t)}}_floatTo16BitPCM(t,n){for(let a=0;a<t.length;a++){const s=Math.max(-1,Math.min(1,t[a]));n[a]=s<0?s*32768:s*32767}}_convertBuffer(t){const n=new Float32Array(t),a=new Int16Array(t.length);return this._floatTo16BitPCM(n,a),a}}class z6{constructor(t={}){this.beforeRecording=t.beforeRecording,this.pauseRecording=t.pauseRecording,this.afterRecording=t.afterRecording,this.micFailed=t.micFailed,this.encoderOptions={bitRate:t.bitRate,sampleRate:t.sampleRate},this.bufferSize=4096,this.records=[],this.isPause=!1,this.isRecording=!1,this.duration=0,this.volume=0,this._duration=0}start(){const t={video:!1,audio:{channelCount:1,echoCancellation:!1}};this.beforeRecording&&this.beforeRecording("start recording"),navigator.mediaDevices.getUserMedia(t).then(this._micCaptured.bind(this)).catch(this._micError.bind(this)),this.isPause=!1,this.isRecording=!0,this.lameEncoder||(this.lameEncoder=new H6(this.encoderOptions))}stop(){this.stream.getTracks().forEach(n=>n.stop()),this.input.disconnect(),this.processor.disconnect(),this.context.close();let t=null;t=this.lameEncoder.finish(),t.duration=this.duration,this.records.push(t),this._duration=0,this.duration=0,this.isPause=!1,this.isRecording=!1,this.afterRecording&&this.afterRecording(t)}pause(){this.stream.getTracks().forEach(t=>t.stop()),this.input.disconnect(),this.processor.disconnect(),this._duration=this.duration,this.isPause=!0,this.pauseRecording&&this.pauseRecording("pause recording")}_micCaptured(t){this.context=new(window.AudioContext||window.webkitAudioContext),this.duration=this._duration,this.input=this.context.createMediaStreamSource(t),this.processor=this.context.createScriptProcessor(this.bufferSize,1,1),this.stream=t,this.processor.onaudioprocess=n=>{const a=n.inputBuffer.getChannelData(0);let s=0;this.lameEncoder&&this.lameEncoder.encode(a);for(let i=0;i<a.length;++i)s+=a[i]*a[i];this.duration=parseFloat(this._duration)+parseFloat(this.context.currentTime.toFixed(2)),this.volume=Math.sqrt(s/a.length).toFixed(2)},this.input.connect(this.processor),this.processor.connect(this.context.destination)}_micError(t){this.micFailed&&this.micFailed(t)}}var um=window.chrome,Ku=window.navigator,U6=Ku.vendor,q6=typeof window.opr<"u",W6=Ku.userAgent.indexOf("Edg")>-1,Y6=Ku.userAgent.match("CriOS");function X6(){return Y6?!0:um!==null&&typeof um<"u"&&U6==="Google Inc."&&q6===!1&&W6===!1}function dm(){var e=G6(),t=e.substr(0,4);return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw(n|u)|c55\/|capi|ccwa|cdm|cell|chtm|cldc|cmd|co(mp|nd)|craw|da(it|ll|ng)|dbte|dcs|devi|dica|dmob|do(c|p)o|ds(12|d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(|_)|g1 u|g560|gene|gf5|gmo|go(\.w|od)|gr(ad|un)|haie|hcit|hd(m|p|t)|hei|hi(pt|ta)|hp( i|ip)|hsc|ht(c(| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i(20|go|ma)|i230|iac( ||\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|[a-w])|libw|lynx|m1w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|mcr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|([1-8]|c))|phil|pire|pl(ay|uc)|pn2|po(ck|rt|se)|prox|psio|ptg|qaa|qc(07|12|21|32|60|[2-7]|i)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h|oo|p)|sdk\/|se(c(|0|1)|47|mc|nd|ri)|sgh|shar|sie(|m)|sk0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h|v|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl|tdg|tel(i|m)|tim|tmo|to(pl|sh)|ts(70|m|m3|m5)|tx9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas|your|zeto|zte/i.test(t)}function G6(){var e=navigator.userAgent||navigator.vendor||window.opera||null;if(!e)throw new Error("Failed to look for user agent information.");return e}const K6={name:"RoomFooter",components:{SvgIcon:kn,EmojiPickerContainer:d0,RoomFiles:Q9,RoomMessageReply:S8,RoomUsersTag:M8,RoomEmojis:O8,RoomTemplatesText:H8},directives:{clickOutside:ul},props:{room:{type:Object,required:!0},roomId:{type:[String,Number],required:!0},roomMessage:{type:String,default:null},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},textMessages:{type:Object,required:!0},showSendIcon:{type:Boolean,required:!0},showFiles:{type:Boolean,required:!0},showAudio:{type:Boolean,required:!0},showEmojis:{type:Boolean,required:!0},showFooter:{type:Boolean,required:!0},acceptedFiles:{type:String,required:!0},multipleFiles:{type:Boolean,default:!0},captureFiles:{type:String,required:!0},textareaActionEnabled:{type:Boolean,required:!0},textareaAutoFocus:{type:Boolean,required:!0},userTagsEnabled:{type:Boolean,required:!0},emojisSuggestionEnabled:{type:Boolean,required:!0},templatesText:{type:Array,default:null},audioBitRate:{type:Number,required:!0},audioSampleRate:{type:Number,required:!0},initReplyMessage:{type:Object,default:null},initEditMessage:{type:Object,default:null},droppedFiles:{type:Array,default:null},emojiDataSource:{type:String,default:void 0}},emits:["edit-message","send-message","update-edited-message-id","textarea-action-handler","typing-message"],data(){return{message:"",editedMessage:{},messageReply:null,cursorRangePosition:null,files:[],fileDialog:!1,selectUsersTagItem:null,selectEmojiItem:null,selectTemplatesTextItem:null,format:"mp3",activeUpOrDownEmojis:null,activeUpOrDownUsersTag:null,activeUpOrDownTemplatesText:null,emojisDB:new Zv({dataSource:this.emojiDataSource}),emojiOpened:!1,keepKeyboardOpen:!1,filteredEmojis:[],filteredUsersTag:[],selectedUsersTag:[],filteredTemplatesText:[],recorder:this.initRecorder(),isRecording:!1}},computed:{isMessageEmpty(){return!this.files.length&&!this.message.trim()},isFileLoading(){return this.files.some(e=>e.loading)},recordedTime(){return new Date(this.recorder.duration*1e3).toISOString().substr(14,5)},shadowFooter(){return!!this.filteredEmojis.length||!!this.filteredUsersTag.length||!!this.filteredTemplatesText.length||!!this.files.length||!!this.messageReply}},watch:{roomId(){this.resetMessage(!0,!0),this.roomMessage&&(this.message=this.roomMessage,setTimeout(()=>this.onChangeInput()))},message(e){this.getTextareaRef().value=e},roomMessage:{immediate:!0,handler(e){e&&(this.message=this.roomMessage)}},editedMessage(e){this.$emit("update-edited-message-id",e._id)},initReplyMessage(e){e&&this.replyMessage(e)},initEditMessage(e){e&&this.editMessage(e)},droppedFiles(e){e&&this.onFileChange(e)}},mounted(){const e=dm();let t=!0;this.getTextareaRef().addEventListener("keyup",n=>{n.key==="Enter"&&!n.shiftKey&&!this.fileDialog&&(e?(this.message=this.message+`
`,setTimeout(()=>this.onChangeInput())):t&&!this.filteredEmojis.length&&!this.filteredUsersTag.length&&!this.filteredTemplatesText.length&&this.sendMessage()),t=!n.isComposing,setTimeout(()=>{this.updateFooterLists()},60)}),this.getTextareaRef().addEventListener("click",()=>{e&&(this.keepKeyboardOpen=!0),this.updateFooterLists()}),this.getTextareaRef().addEventListener("blur",()=>{setTimeout(()=>{this.resetFooterList()},100),e&&setTimeout(()=>this.keepKeyboardOpen=!1)})},beforeUnmount(){this.stopRecorder()},methods:{getTextareaRef(){return this.$refs.roomTextarea},focusTextarea(e){dm()&&e||this.getTextareaRef()&&(this.getTextareaRef().focus(),this.cursorRangePosition&&setTimeout(()=>{const t=X6()?0:1;this.getTextareaRef().setSelectionRange(this.cursorRangePosition+t,this.cursorRangePosition+t),this.cursorRangePosition=null}))},onChangeInput(){var e,t,n;((e=this.getTextareaRef())!=null&&e.value||((t=this.getTextareaRef())==null?void 0:t.value)==="")&&(this.message=(n=this.getTextareaRef())==null?void 0:n.value),this.keepKeyboardOpen=!0,this.resizeTextarea(),this.$emit("typing-message",this.message)},resizeTextarea(){const e=this.getTextareaRef();if(!e)return;const t=window.getComputedStyle(e,null).getPropertyValue("padding-top").replace("px","");e.style.height=0,e.style.height=e.scrollHeight-t*2+"px"},escapeTextarea(){this.filteredEmojis.length?this.filteredEmojis=[]:this.filteredUsersTag.length?this.filteredUsersTag=[]:this.filteredTemplatesText.length?this.filteredTemplatesText=[]:this.resetMessage()},onPasteImage(e){var t;const n=(t=e.clipboardData)==null?void 0:t.items;n&&Array.from(n).forEach(a=>{if(a.type.includes("image")){const s=a.getAsFile();this.onFileChange([s])}})},updateActiveUpOrDown(e,t){this.filteredEmojis.length?(this.activeUpOrDownEmojis=t,e.preventDefault()):this.filteredUsersTag.length?(this.activeUpOrDownUsersTag=t,e.preventDefault()):this.filteredTemplatesText.length&&(this.activeUpOrDownTemplatesText=t,e.preventDefault())},selectItem(){this.filteredEmojis.length?this.selectEmojiItem=!0:this.filteredUsersTag.length?this.selectUsersTagItem=!0:this.filteredTemplatesText.length&&(this.selectTemplatesTextItem=!0)},selectEmoji(e){if(this.selectEmojiItem=!1,!e)return;const{position:t,endPosition:n}=this.getCharPosition(":");this.message=this.message.substr(0,t-1)+e+this.message.substr(n,this.message.length-1),this.cursorRangePosition=t,this.focusTextarea()},selectTemplateText(e){if(this.selectTemplatesTextItem=!1,!e)return;const{position:t,endPosition:n}=this.getCharPosition("/"),a=this.message.substr(n,n).length?"":" ";this.message=this.message.substr(0,t-1)+e.text+a+this.message.substr(n,this.message.length-1),this.cursorRangePosition=t+e.text.length+a.length+1,this.focusTextarea()},addEmoji(e){this.message+=e.unicode,this.focusTextarea(!0)},launchFilePicker(){this.$refs.file.value="",this.$refs.file.click()},async onFileChange(e){this.fileDialog=!0,this.focusTextarea(),Array.from(e).forEach(async t=>{const n=URL.createObjectURL(t),a=t.name.lastIndexOf(".");this.files.push({loading:!0,name:t.name.substring(0,a),size:t.size,type:t.type,extension:t.name.substring(a+1),localUrl:n});const s=await fetch(n).then(r=>r.blob());let i=this.files.find(r=>r.localUrl===n);i&&(i.blob=s,i.loading=!1,delete i.loading)}),setTimeout(()=>this.fileDialog=!1,500)},removeFile(e){this.files.splice(e,1),this.focusTextarea()},toggleRecorder(e){if(this.isRecording=e,!this.recorder.isRecording)setTimeout(()=>this.recorder.start(),200);else try{this.recorder.stop();const t=this.recorder.records[0];this.files.push({blob:t.blob,name:`audio.${this.format}`,size:t.blob.size,duration:t.duration,type:t.blob.type,audio:!0,localUrl:URL.createObjectURL(t.blob)}),this.recorder=this.initRecorder(),this.sendMessage()}catch{setTimeout(()=>this.stopRecorder(),100)}},stopRecorder(){if(this.recorder.isRecording)try{this.recorder.stop(),this.recorder=this.initRecorder()}catch{setTimeout(()=>this.stopRecorder(),100)}},textareaActionHandler(){this.$emit("textarea-action-handler",this.message)},sendMessage(){var e;let t=this.message.trim();if(!this.files.length&&!t||this.isFileLoading)return;this.selectedUsersTag.forEach(a=>{t=t.replace(`@${a.username}`,`<usertag>${a._id}</usertag>`)});const n=this.files.length?this.files:null;this.editedMessage._id?(this.editedMessage.content!==t||(e=this.editedMessage.files)!=null&&e.length||this.files.length)&&this.$emit("edit-message",{messageId:this.editedMessage._id,newContent:t,files:n,replyMessage:this.messageReply,usersTag:this.selectedUsersTag}):this.$emit("send-message",{content:t,files:n,replyMessage:this.messageReply,usersTag:this.selectedUsersTag}),this.resetMessage(!0)},editMessage(e){this.resetMessage(),this.editedMessage={...e};let t=e.content;const n=t,a="<usertag>",s="</usertag>";[...t.matchAll(new RegExp(a,"gi"))].map(r=>r.index).forEach(r=>{const o=n.substring(r+a.length,n.indexOf(s,r)),m=this.room.users.find(u=>u._id===o);t=t.replace(`${a}${o}${s}`,`@${m?.username||"unknown"}`),this.selectUserTag(m,!0)}),this.message=t,e.files&&(this.files=[...e.files]),setTimeout(()=>this.resizeTextarea())},replyMessage(e){this.editedMessage={},this.messageReply=e,this.focusTextarea()},updateFooterLists(){this.updateFooterList("@"),this.updateFooterList(":"),this.updateFooterList("/")},updateFooterList(e){if(!this.getTextareaRef()||e===":"&&!this.emojisSuggestionEnabled||e==="@"&&(!this.userTagsEnabled||!this.room.users)||e==="/"&&!this.templatesText)return;const t=this.getTextareaRef().selectionStart;let n=t;for(;n>0&&this.message.charAt(n-1)!==e&&(this.message.charAt(n-1)!==" "||e!==":");)n--;const a=this.message.charAt(n-2),s=!a.match(/^[0-9a-zA-Z]+$/);if(this.message.charAt(n-1)===e&&(!a||a===" "||s)){const i=this.message.substring(n,t);e===":"?this.updateEmojis(i):e==="@"?this.updateShowUsersTag(i):e==="/"&&this.updateShowTemplatesText(i)}else this.resetFooterList(e)},updateShowUsersTag(e){this.filteredUsersTag=jc(this.room.users,"username",e,!0).filter(t=>t._id!==this.currentUserId)},selectUserTag(e,t=!1){if(this.selectUsersTagItem=!1,!e)return;const{position:n,endPosition:a}=this.getCharPosition("@"),s=this.message.substr(a,a).length?"":" ";this.message=this.message.substr(0,n)+e.username+s+this.message.substr(a,this.message.length-1),this.selectedUsersTag=[...this.selectedUsersTag,{...e}],t||(this.cursorRangePosition=n+e.username.length+s.length+1),this.focusTextarea()},updateShowTemplatesText(e){this.filteredTemplatesText=jc(this.templatesText,"tag",e,!0)},getCharPosition(e){let n=this.getTextareaRef().selectionStart;for(;n>0&&this.message.charAt(n-1)!==e;)n--;const a=this.getTextareaRef().selectionEnd;return{position:n,endPosition:a}},async updateEmojis(e){if(!e)return;const t=await this.emojisDB.getEmojiBySearchQuery(e);this.filteredEmojis=t.map(n=>n.unicode)},resetFooterList(e=null){e===":"?this.filteredEmojis=[]:e==="@"?this.filteredUsersTag=[]:e==="/"?this.filteredTemplatesText=[]:(this.filteredEmojis=[],this.filteredUsersTag=[],this.filteredTemplatesText=[])},resetMessage(e=!1,t=!1){t||this.$emit("typing-message",null),this.selectedUsersTag=[],this.resetFooterList(),this.resetTextareaSize(),this.message="",this.editedMessage={},this.messageReply=null,this.files=[],this.emojiOpened=!1,this.preventKeyboardFromClosing(),(this.textareaAutoFocus||!t)&&setTimeout(()=>this.focusTextarea(e))},resetTextareaSize(){this.getTextareaRef()&&(this.getTextareaRef().style.height="20px")},preventKeyboardFromClosing(){this.keepKeyboardOpen&&this.getTextareaRef().focus()},initRecorder(){return this.isRecording=!1,new z6({bitRate:Number(this.audioBitRate),sampleRate:Number(this.audioSampleRate),beforeRecording:null,afterRecording:null,pauseRecording:null,micFailed:this.micFailed})},micFailed(){this.isRecording=!1,this.recorder=this.initRecorder()}}},Z6={key:0,class:"vac-icon-textarea-left"},Q6=Pe("div",{class:"vac-dot-audio-record"},null,-1),J6={class:"vac-dot-audio-record-time"},ew=["placeholder"],tw={class:"vac-icon-textarea"},nw={key:1},aw=["multiple","accept","capture"];function sw(e,t,n,a,s,i){const r=dt("room-emojis"),o=dt("room-users-tag"),m=dt("room-templates-text"),u=dt("room-message-reply"),d=dt("room-files"),l=dt("svg-icon"),c=dt("emoji-picker-container"),v=sl("click-outside");return ss((oe(),Ce("div",{id:"room-footer",class:kt(["vac-room-footer",{"vac-app-box-shadow":i.shadowFooter}])},[Xe(r,{"filtered-emojis":s.filteredEmojis,"select-item":s.selectEmojiItem,"active-up-or-down":s.activeUpOrDownEmojis,onSelectEmoji:t[0]||(t[0]=h=>i.selectEmoji(h)),onActivateItem:t[1]||(t[1]=h=>s.activeUpOrDownEmojis=0)},null,8,["filtered-emojis","select-item","active-up-or-down"]),Xe(o,{"filtered-users-tag":s.filteredUsersTag,"select-item":s.selectUsersTagItem,"active-up-or-down":s.activeUpOrDownUsersTag,onSelectUserTag:t[2]||(t[2]=h=>i.selectUserTag(h)),onActivateItem:t[3]||(t[3]=h=>s.activeUpOrDownUsersTag=0)},null,8,["filtered-users-tag","select-item","active-up-or-down"]),Xe(m,{"filtered-templates-text":s.filteredTemplatesText,"select-item":s.selectTemplatesTextItem,"active-up-or-down":s.activeUpOrDownTemplatesText,onSelectTemplateText:t[4]||(t[4]=h=>i.selectTemplateText(h)),onActivateItem:t[5]||(t[5]=h=>s.activeUpOrDownTemplatesText=0)},null,8,["filtered-templates-text","select-item","active-up-or-down"]),Xe(u,{room:n.room,"message-reply":s.messageReply,"text-formatting":n.textFormatting,"link-options":n.linkOptions,onResetMessage:i.resetMessage},$t({_:2},[St(e.$slots,(h,A)=>({name:A,fn:mt(T=>[qe(e.$slots,A,Nt(Dt(T)))])}))]),1032,["room","message-reply","text-formatting","link-options","onResetMessage"]),Xe(d,{files:s.files,onRemoveFile:i.removeFile,onResetMessage:i.resetMessage},$t({_:2},[St(e.$slots,(h,A)=>({name:A,fn:mt(T=>[qe(e.$slots,A,Nt(Dt(T)))])}))]),1032,["files","onRemoveFile","onResetMessage"]),Pe("div",{class:kt(["vac-box-footer",{"vac-box-footer-border":!s.files.length}])},[n.showAudio&&!s.files.length?(oe(),Ce("div",Z6,[s.isRecording?(oe(),Ce(At,{key:0},[Pe("div",{class:"vac-svg-button vac-icon-audio-stop",onClick:t[6]||(t[6]=(...h)=>i.stopRecorder&&i.stopRecorder(...h))},[qe(e.$slots,"audio-stop-icon",{},()=>[Xe(l,{name:"close-outline"})])]),Q6,Pe("div",J6,_t(i.recordedTime),1),Pe("div",{class:"vac-svg-button vac-icon-audio-confirm",onClick:t[7]||(t[7]=h=>i.toggleRecorder(!1))},[qe(e.$slots,"audio-check-icon",{},()=>[Xe(l,{name:"checkmark"})])])],64)):(oe(),Ce("div",{key:1,class:"vac-svg-button",onClick:t[8]||(t[8]=h=>i.toggleRecorder(!0))},[qe(e.$slots,"microphone-icon",{},()=>[Xe(l,{name:"microphone",class:"vac-icon-microphone"})])]))])):Ue("",!0),Pe("textarea",{id:"roomTextarea",ref:"roomTextarea",placeholder:n.textMessages.TYPE_MESSAGE,class:kt(["vac-textarea",{"vac-textarea-outline":s.editedMessage._id}]),style:{"min-height":"20px","padding-left":"12px"},onInput:t[9]||(t[9]=(...h)=>i.onChangeInput&&i.onChangeInput(...h)),onKeydown:[t[10]||(t[10]=Ks((...h)=>i.escapeTextarea&&i.escapeTextarea(...h),["esc"])),t[11]||(t[11]=Ks(Da((...h)=>i.selectItem&&i.selectItem(...h),["exact","prevent"]),["enter"])),t[13]||(t[13]=Ks(Da(()=>{},["exact","prevent"]),["tab"])),t[14]||(t[14]=Ks((...h)=>i.selectItem&&i.selectItem(...h),["tab"])),t[15]||(t[15]=Ks(h=>i.updateActiveUpOrDown(h,-1),["up"])),t[16]||(t[16]=Ks(h=>i.updateActiveUpOrDown(h,1),["down"]))],onPaste:t[12]||(t[12]=(...h)=>i.onPasteImage&&i.onPasteImage(...h))},null,42,ew),Pe("div",tw,[s.editedMessage._id?(oe(),Ce("div",{key:0,class:"vac-svg-button",onClick:t[17]||(t[17]=(...h)=>i.resetMessage&&i.resetMessage(...h))},[qe(e.$slots,"edit-close-icon",{},()=>[Xe(l,{name:"close-outline"})])])):Ue("",!0),n.showEmojis?ss((oe(),Ce("div",nw,[qe(e.$slots,"emoji-picker",Ou({emojiOpened:s.emojiOpened},{addEmoji:i.addEmoji}),()=>[Xe(c,{"emoji-opened":s.emojiOpened,"position-top":!0,"emoji-data-source":n.emojiDataSource,onAddEmoji:i.addEmoji,onOpenEmoji:t[18]||(t[18]=h=>s.emojiOpened=h)},{"emoji-picker-icon":mt(()=>[qe(e.$slots,"emoji-picker-icon")]),_:3},8,["emoji-opened","emoji-data-source","onAddEmoji"])])])),[[v,()=>s.emojiOpened=!1]]):Ue("",!0),n.showFiles?(oe(),Ce("div",{key:2,class:"vac-svg-button",onClick:t[19]||(t[19]=(...h)=>i.launchFilePicker&&i.launchFilePicker(...h))},[qe(e.$slots,"paperclip-icon",{},()=>[Xe(l,{name:"paperclip"})])])):Ue("",!0),n.textareaActionEnabled?(oe(),Ce("div",{key:3,class:"vac-svg-button",onClick:t[20]||(t[20]=(...h)=>i.textareaActionHandler&&i.textareaActionHandler(...h))},[qe(e.$slots,"custom-action-icon",{},()=>[Xe(l,{name:"deleted"})])])):Ue("",!0),n.showFiles?(oe(),Ce("input",{key:4,ref:"file",type:"file",multiple:n.multipleFiles?!0:null,accept:n.acceptedFiles,capture:n.captureFiles,style:{display:"none"},onChange:t[21]||(t[21]=h=>i.onFileChange(h.target.files))},null,40,aw)):Ue("",!0),n.showSendIcon?(oe(),Ce("div",{key:5,class:kt(["vac-svg-button",{"vac-send-disabled":i.isMessageEmpty}]),onClick:t[22]||(t[22]=(...h)=>i.sendMessage&&i.sendMessage(...h))},[qe(e.$slots,"send-icon",{},()=>[Xe(l,{name:"send",param:i.isMessageEmpty||i.isFileLoading?"disabled":""},null,8,["param"])])],2)):Ue("",!0)])],2)],2)),[[ol,Object.keys(n.room).length&&n.showFooter]])}var iw=Xt(K6,[["render",sw]]);const rw={name:"MessageReply",components:{AudioPlayer:Gu,SvgIcon:kn,FormatMessage:Lr},props:{message:{type:Object,required:!0},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},roomUsers:{type:Array,required:!0}},computed:{replyUsername(){const{senderId:e}=this.message.replyMessage,t=this.roomUsers.find(n=>n._id===e);return t?t.username:""},firstFile(){var e,t;return(t=(e=this.message.replyMessage)==null?void 0:e.files)!=null&&t.length?this.message.replyMessage.files[0]:{}},isAudio(){return dl(this.firstFile)},isImage(){return Ei(this.firstFile)},isVideo(){return Or(this.firstFile)},isOtherFile(){var e;return((e=this.message.replyMessage.files)==null?void 0:e.length)&&!this.isAudio&&!this.isVideo&&!this.isImage}}},ow={class:"vac-reply-message"},lw={class:"vac-reply-username"},cw={key:0,class:"vac-image-reply-container"},uw={key:1,class:"vac-video-reply-container"},dw={controls:""},mw=["src"],fw={key:3,class:"vac-file-container"},vw={class:"vac-text-ellipsis"},hw={key:0,class:"vac-text-ellipsis vac-text-extension"},gw={class:"vac-reply-content"};function pw(e,t,n,a,s,i){const r=dt("audio-player"),o=dt("svg-icon"),m=dt("format-message");return oe(),Ce("div",ow,[Pe("div",lw,_t(i.replyUsername),1),i.isImage?(oe(),Ce("div",cw,[Pe("div",{class:"vac-message-image vac-message-image-reply",style:Qt({"background-image":`url('${i.firstFile.url}')`})},null,4)])):i.isVideo?(oe(),Ce("div",uw,[Pe("video",dw,[Pe("source",{src:i.firstFile.url},null,8,mw)])])):i.isAudio?(oe(),Pt(r,{key:2,src:i.firstFile.url,"message-selection-enabled":!1,onUpdateProgressTime:t[0]||(t[0]=u=>e.progressTime=u),onHoverAudioProgress:t[1]||(t[1]=u=>e.hoverAudioProgress=u)},$t({_:2},[St(e.$slots,(u,d)=>({name:d,fn:mt(l=>[qe(e.$slots,d,Nt(Dt(l)))])}))]),1032,["src"])):i.isOtherFile?(oe(),Ce("div",fw,[Pe("div",null,[qe(e.$slots,"file-icon",{},()=>[Xe(o,{name:"file"})])]),Pe("div",vw,_t(i.firstFile.name),1),i.firstFile.extension?(oe(),Ce("div",hw,_t(i.firstFile.extension),1)):Ue("",!0)])):Ue("",!0),Pe("div",gw,[Xe(m,{"message-id":n.message.replyMessage._id,content:n.message.replyMessage.content,users:n.roomUsers,"text-formatting":n.textFormatting,"link-options":n.linkOptions,reply:!0},null,8,["message-id","content","users","text-formatting","link-options"])])])}var _w=Xt(rw,[["render",pw]]);const bw={name:"ProgressBar",props:{progress:{type:Number,default:0}},data(){return{radius:35,stroke:4,normalizedRadius:27,circumference:54*Math.PI}},computed:{strokeDashoffset(){return this.circumference-this.progress/100*this.circumference}}},yw={ref:"progress",class:"vac-progress-wrapper"},ww=["height","width"],Sw=["stroke-dasharray","stroke-width","r","cx","cy"],kw={class:"vac-progress-text"},xw=Pe("span",{class:"vac-progress-pourcent"},"%",-1);function Tw(e,t,n,a,s,i){return oe(),Pt(mn,{name:"vac-fade-spinner",appear:""},{default:mt(()=>[Pe("div",yw,[(oe(),Ce("svg",{height:s.radius*2,width:s.radius*2},[Pe("circle",{stroke:"rgba(255, 255, 255, 0.7)","stroke-dasharray":s.circumference+" "+s.circumference,style:Qt({strokeDashoffset:i.strokeDashoffset,strokeLinecap:"round"}),"stroke-width":s.stroke,fill:"transparent",r:s.normalizedRadius,cx:s.radius,cy:s.radius},null,12,Sw)],8,ww)),Pe("div",{class:"vac-progress-content",style:Qt({height:s.radius*2-19+"px",width:s.radius*2-19+"px"})},[Pe("div",kw,[is(_t(n.progress),1),xw])],4)],512)]),_:1})}var w0=Xt(bw,[["render",Tw]]);const Cw={name:"MessageFile",components:{SvgIcon:kn,Loader:ll,ProgressBar:w0},props:{currentUserId:{type:[String,Number],required:!0},message:{type:Object,required:!0},file:{type:Object,required:!0},index:{type:Number,required:!0},messageSelectionEnabled:{type:Boolean,required:!0}},emits:["open-file"],data(){return{imageResponsive:"",imageLoading:!1,imageHover:!1}},computed:{isImageLoading(){return this.file.url.indexOf("blob:http")!==-1||this.imageLoading},isImage(){return Ei(this.file)},isVideo(){return Or(this.file)}},watch:{file:{immediate:!0,handler(){this.checkImgLoad()}}},mounted(){const e=this.$refs["imageRef"+this.index];e&&(this.imageResponsive={maxHeight:e.clientWidth-18,loaderTop:e.clientHeight/2-9})},methods:{checkImgLoad(){if(!Ei(this.file))return;this.imageLoading=!0;const e=new Image;e.src=this.file.url,e.addEventListener("load",()=>this.imageLoading=!1)},openFile(e,t){this.messageSelectionEnabled||(e.stopPropagation(),this.$emit("open-file",{file:this.file,action:t}))}}},Aw={class:"vac-message-file-container"},Ew={key:0,class:"vac-image-buttons"},Mw={controls:""},Rw=["src"];function Iw(e,t,n,a,s,i){const r=dt("progress-bar"),o=dt("loader"),m=dt("svg-icon");return oe(),Ce("div",Aw,[i.isImage?(oe(),Ce("div",{key:0,ref:"imageRef"+n.index,class:"vac-message-image-container",onMouseover:t[2]||(t[2]=u=>s.imageHover=!0),onMouseleave:t[3]||(t[3]=u=>s.imageHover=!1),onClick:t[4]||(t[4]=u=>i.openFile(u,"preview"))},[n.file.progress>=0?(oe(),Pt(r,{key:0,progress:n.file.progress,style:Qt({top:`${s.imageResponsive.loaderTop}px`})},null,8,["progress","style"])):(oe(),Pt(o,{key:1,show:i.isImageLoading,type:"message-file","message-id":n.message._id,style:Qt({top:`${s.imageResponsive.loaderTop}px`})},$t({_:2},[St(e.$slots,(u,d)=>({name:d,fn:mt(l=>[qe(e.$slots,d,Nt(Dt(l)))])}))]),1032,["show","message-id","style"])),Pe("div",{class:kt(["vac-message-image",{"vac-blur-loading":i.isImageLoading&&n.message.senderId===n.currentUserId}]),style:Qt({"background-image":`url('${i.isImageLoading&&n.file.preview||n.file.url}')`,"max-height":`${s.imageResponsive.maxHeight}px`})},[Xe(mn,{name:"vac-fade-image"},{default:mt(()=>[!n.messageSelectionEnabled&&s.imageHover&&!i.isImageLoading?(oe(),Ce("div",Ew,[Pe("div",{class:"vac-svg-button vac-button-view",onClick:t[0]||(t[0]=u=>i.openFile(u,"preview"))},[qe(e.$slots,"eye-icon_"+n.message._id,{},()=>[Xe(m,{name:"eye"})])]),Pe("div",{class:"vac-svg-button vac-button-download",onClick:t[1]||(t[1]=u=>i.openFile(u,"download"))},[qe(e.$slots,"document-icon_"+n.message._id,{},()=>[Xe(m,{name:"document"})])])])):Ue("",!0)]),_:3})],6)],544)):i.isVideo?(oe(),Ce("div",{key:1,class:"vac-video-container",onClick:t[5]||(t[5]=Da(u=>i.openFile(u,"preview"),["prevent"]))},[n.file.progress>=0?(oe(),Pt(r,{key:0,progress:n.file.progress},null,8,["progress"])):Ue("",!0),Pe("video",Mw,[Pe("source",{src:n.file.url},null,8,Rw)])])):Ue("",!0)])}var Bw=Xt(Cw,[["render",Iw]]);const Lw={name:"MessageFiles",components:{SvgIcon:kn,FormatMessage:Lr,ProgressBar:w0,MessageFile:Bw},props:{currentUserId:{type:[String,Number],required:!0},message:{type:Object,required:!0},roomUsers:{type:Array,required:!0},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},messageSelectionEnabled:{type:Boolean,required:!0}},emits:["open-file","open-user-tag"],computed:{imageVideoFiles(){return this.message.files.filter(e=>C1(e))},otherFiles(){return this.message.files.filter(e=>!C1(e))}},methods:{openFile(e,t,n){this.messageSelectionEnabled||(e.stopPropagation(),this.$emit("open-file",{file:t,action:n}))}}},Ow={class:"vac-message-files-container"},Fw=["onClick"],Vw={class:"vac-svg-button"},Pw={class:"vac-text-ellipsis"},Dw={key:0,class:"vac-text-ellipsis vac-text-extension"};function jw(e,t,n,a,s,i){const r=dt("message-file"),o=dt("progress-bar"),m=dt("svg-icon"),u=dt("format-message");return oe(),Ce("div",Ow,[(oe(!0),Ce(At,null,St(i.imageVideoFiles,(d,l)=>(oe(),Ce("div",{key:l+"iv"},[Xe(r,{file:d,"current-user-id":n.currentUserId,message:n.message,index:l,"message-selection-enabled":n.messageSelectionEnabled,onOpenFile:t[0]||(t[0]=c=>e.$emit("open-file",c))},$t({_:2},[St(e.$slots,(c,v)=>({name:v,fn:mt(h=>[qe(e.$slots,v,Nt(Dt(h)))])}))]),1032,["file","current-user-id","message","index","message-selection-enabled"])]))),128)),(oe(!0),Ce(At,null,St(i.otherFiles,(d,l)=>(oe(),Ce("div",{key:l+"a",class:"vac-file-wrapper"},[d.progress>=0?(oe(),Pt(o,{key:0,progress:d.progress,style:{top:"44px"}},null,8,["progress"])):Ue("",!0),Pe("div",{class:kt(["vac-file-container",{"vac-file-container-progress":d.progress>=0}]),onClick:c=>i.openFile(c,d,"download")},[Pe("div",Vw,[qe(e.$slots,"document-icon",{},()=>[Xe(m,{name:"document"})])]),Pe("div",Pw,_t(d.name),1),d.extension?(oe(),Ce("div",Dw,_t(d.extension),1)):Ue("",!0)],10,Fw)]))),128)),Xe(u,{"message-id":n.message._id,content:n.message.content,users:n.roomUsers,"text-formatting":n.textFormatting,"link-options":n.linkOptions,onOpenUserTag:t[1]||(t[1]=d=>e.$emit("open-user-tag",d))},null,8,["message-id","content","users","text-formatting","link-options"])])}var Nw=Xt(Lw,[["render",jw]]);const $w={name:"MessageActions",components:{SvgIcon:kn,EmojiPickerContainer:d0},directives:{clickOutside:ul},props:{currentUserId:{type:[String,Number],required:!0},message:{type:Object,required:!0},messageActions:{type:Array,required:!0},showReactionEmojis:{type:Boolean,required:!0},messageHover:{type:Boolean,required:!0},hoverMessageId:{type:[String,Number],default:null},hoverAudioProgress:{type:Boolean,required:!0},emojiDataSource:{type:String,default:void 0}},emits:["update-emoji-opened","update-options-opened","update-message-hover","message-action-handler","send-message-reaction"],data(){return{menuOptionsTop:0,optionsOpened:!1,optionsClosing:!1,emojiOpened:!1}},computed:{isMessageActions(){return this.filteredMessageActions.length&&this.messageHover&&!this.message.deleted&&!this.message.disableActions&&!this.hoverAudioProgress},isMessageReactions(){return this.showReactionEmojis&&this.messageHover&&!this.message.deleted&&!this.message.disableReactions&&!this.hoverAudioProgress},filteredMessageActions(){return this.message.senderId===this.currentUserId?this.messageActions:this.messageActions.filter(e=>!e.onlyMe)}},watch:{emojiOpened(e){this.$emit("update-emoji-opened",e),e&&(this.optionsOpened=!1)},optionsOpened(e){this.$emit("update-options-opened",e)}},methods:{openOptions(){this.optionsClosing||(this.optionsOpened=!this.optionsOpened,this.optionsOpened&&setTimeout(()=>{const e=u0(this.$el,"#room-footer");if(!e||!this.$refs.menuOptions||!this.$refs.actionIcon)return;const t=this.$refs.menuOptions.getBoundingClientRect().height,n=this.$refs.actionIcon.getBoundingClientRect().top;e.getBoundingClientRect().top-n>t+50?this.menuOptionsTop=30:this.menuOptionsTop=-t}))},closeOptions(){this.optionsOpened=!1,this.optionsClosing=!0,this.updateMessageHover(),setTimeout(()=>this.optionsClosing=!1,100)},openEmoji(){this.emojiOpened=!this.emojiOpened},closeEmoji(){this.emojiOpened=!1,this.updateMessageHover()},updateMessageHover(){this.hoverMessageId!==this.message._id&&this.$emit("update-message-hover",!1)},messageActionHandler(e){this.closeOptions(),this.$emit("message-action-handler",e)},sendMessageReaction(e,t){this.$emit("send-message-reaction",{emoji:e,reaction:t}),this.closeEmoji()}}},Hw={class:"vac-message-actions-wrapper"},zw={key:"3"},Uw={class:"vac-menu-list"},qw=["onClick"];function Ww(e,t,n,a,s,i){const r=dt("svg-icon"),o=dt("emoji-picker-container"),m=sl("click-outside");return oe(),Ce("div",Hw,[Pe("div",{class:"vac-options-container",style:Qt({display:n.hoverAudioProgress?"none":"initial",width:i.filteredMessageActions.length&&n.showReactionEmojis?"70px":"45px"})},[Xe(Pu,{name:"vac-slide-left",tag:"span"},{default:mt(()=>[i.isMessageActions||i.isMessageReactions?(oe(),Ce("div",{key:"1",class:kt(["vac-blur-container",{"vac-options-me":n.message.senderId===n.currentUserId}])},null,2)):Ue("",!0),i.isMessageActions?(oe(),Ce("div",{ref:"actionIcon",key:"2",class:"vac-svg-button vac-message-options",onClick:t[0]||(t[0]=(...u)=>i.openOptions&&i.openOptions(...u))},[qe(e.$slots,"dropdown-icon_"+n.message._id,{},()=>[Xe(r,{name:"dropdown",param:"message"})])],512)):Ue("",!0),i.isMessageReactions?ss((oe(),Ce("div",zw,[qe(e.$slots,"emoji-picker",Ou({emojiOpened:s.emojiOpened},{addEmoji:i.sendMessageReaction}),()=>[Xe(o,{class:"vac-message-emojis",style:Qt({right:i.isMessageActions?"30px":"5px"}),"emoji-opened":s.emojiOpened,"emoji-reaction":!0,"position-right":n.message.senderId===n.currentUserId,"message-id":n.message._id,"emoji-data-source":n.emojiDataSource,onAddEmoji:i.sendMessageReaction,onOpenEmoji:i.openEmoji},$t({_:2},[St(e.$slots,(u,d)=>({name:d,fn:mt(l=>[qe(e.$slots,d,Nt(Dt(l)))])}))]),1032,["style","emoji-opened","position-right","message-id","emoji-data-source","onAddEmoji","onOpenEmoji"])])])),[[m,i.closeEmoji]]):Ue("",!0)]),_:3})],4),i.filteredMessageActions.length?(oe(),Pt(mn,{key:0,name:n.message.senderId===n.currentUserId?"vac-slide-left":"vac-slide-right"},{default:mt(()=>[s.optionsOpened?ss((oe(),Ce("div",{key:0,ref:"menuOptions",class:kt(["vac-menu-options",{"vac-menu-left":n.message.senderId!==n.currentUserId}]),style:Qt({top:`${s.menuOptionsTop}px`})},[Pe("div",Uw,[(oe(!0),Ce(At,null,St(i.filteredMessageActions,u=>(oe(),Ce("div",{key:u.name},[Pe("div",{class:"vac-menu-item",onClick:d=>i.messageActionHandler(u)},_t(u.title),9,qw)]))),128))])],6)),[[m,i.closeOptions]]):Ue("",!0)]),_:1},8,["name"])):Ue("",!0)])}var Yw=Xt($w,[["render",Ww]]);const Xw={name:"MessageReactions",props:{currentUserId:{type:[String,Number],required:!0},message:{type:Object,required:!0}},emits:["send-message-reaction"],methods:{sendMessageReaction(e,t){this.$emit("send-message-reaction",{emoji:e,reaction:t})}}},Gw=["onClick"];function Kw(e,t,n,a,s,i){return n.message.deleted?Ue("",!0):(oe(),Pt(Pu,{key:0,name:"vac-slide-left",tag:"span"},{default:mt(()=>[(oe(!0),Ce(At,null,St(n.message.reactions,(r,o)=>ss((oe(),Ce("button",{key:o+0,class:kt(["vac-button-reaction",{"vac-reaction-me":r.indexOf(n.currentUserId)!==-1}]),style:Qt({float:n.message.senderId===n.currentUserId?"right":"left"}),onClick:m=>i.sendMessageReaction({unicode:o},r)},[is(_t(o),1),Pe("span",null,_t(r.length),1)],14,Gw)),[[ol,r.length]])),128))]),_:1}))}var Zw=Xt(Xw,[["render",Kw]]);function Qw(e){if(!((a,s)=>s.every(i=>{let r=!1;return(i.type[0]==="array"&&Array.isArray(a[i.key])||i.type.find(o=>o===typeof a[i.key]))&&(r=!0),r&&Zu(a,i.key)}))(e,[{key:"roomId",type:["string","number"]},{key:"roomName",type:["string"]},{key:"users",type:["array"]}]))throw new Error("Rooms object is not valid! Must contain at least roomId[String, Number], roomName[String] and users[Array]")}function Jw(e){if(!((a,s)=>s.every(i=>i.type.find(o=>o===typeof a[i.key])&&Zu(a,i.key)))(e,[{key:"_id",type:["string","number"]},{key:"username",type:["string"]}]))throw new Error("Participants object is not valid! Must contain at least _id[String, Number] and username[String]")}function eS(e){if(!((a,s)=>s.every(i=>i.type.find(o=>o===typeof a[i.key])&&Zu(a,i.key)))(e,[{key:"_id",type:["string","number"]},{key:"senderId",type:["string","number"]}]))throw new Error("Messages object is not valid! Must contain at least _id[String, Number] and senderId[String, Number]")}function Zu(e,t){return Object.prototype.hasOwnProperty.call(e,t)&&e[t]!==null&&e[t]!==void 0}const tS={name:"RoomMessage",components:{SvgIcon:kn,FormatMessage:Lr,AudioPlayer:Gu,MessageReply:_w,MessageFiles:Nw,MessageActions:Yw,MessageReactions:Zw},props:{currentUserId:{type:[String,Number],required:!0},textMessages:{type:Object,required:!0},index:{type:Number,required:!0},message:{type:Object,required:!0},messages:{type:Array,required:!0},editedMessageId:{type:[String,Number],default:null},roomUsers:{type:Array,default:()=>[]},messageActions:{type:Array,required:!0},newMessages:{type:Array,default:()=>[]},showReactionEmojis:{type:Boolean,required:!0},showNewMessagesDivider:{type:Boolean,required:!0},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},usernameOptions:{type:Object,required:!0},messageSelectionEnabled:{type:Boolean,required:!0},selectedMessages:{type:Array,default:()=>[]},emojiDataSource:{type:String,default:void 0}},emits:["message-added","open-file","open-user-tag","open-failed-message","message-action-handler","send-message-reaction","select-message","unselect-message"],data(){return{hoverMessageId:null,messageHover:!1,optionsOpened:!1,emojiOpened:!1,newMessage:{},progressTime:"- : -",hoverAudioProgress:!1}},computed:{showUsername(){return!this.usernameOptions.currentUser&&this.message.senderId===this.currentUserId?!1:this.roomUsers.length>=this.usernameOptions.minUsers},showDate(){return this.index>0&&this.message.date!==this.messages[this.index-1].date},messageOffset(){return this.index>0&&this.message.senderId!==this.messages[this.index-1].senderId},isMessageHover(){return this.editedMessageId===this.message._id||this.hoverMessageId===this.message._id},isAudio(){var e;return(e=this.message.files)==null?void 0:e.some(t=>dl(t))},isCheckmarkVisible(){return this.message.senderId===this.currentUserId&&!this.message.deleted&&(this.message.saved||this.message.distributed||this.message.seen)},hasCurrentUserAvatar(){return this.messages.some(e=>e.senderId===this.currentUserId&&e.avatar)},hasSenderUserAvatar(){return this.messages.some(e=>e.senderId!==this.currentUserId&&e.avatar)},isMessageSelected(){return this.messageSelectionEnabled&&!!this.selectedMessages.find(e=>e._id===this.message._id)}},watch:{newMessages:{immediate:!0,deep:!0,handler(e){if(!e.length||!this.showNewMessagesDivider){this.newMessage={};return}this.newMessage=e.reduce((t,n)=>n.index<t.index?n:t)}},messageSelectionEnabled(){this.resetMessageHover()}},mounted(){eS(this.message),this.$emit("message-added",{message:this.message,index:this.index,ref:this.$refs.message})},methods:{onHoverMessage(){this.messageSelectionEnabled||(this.messageHover=!0,this.canEditMessage()&&(this.hoverMessageId=this.message._id))},canEditMessage(){return!this.message.deleted},onLeaveMessage(){this.messageSelectionEnabled||(!this.optionsOpened&&!this.emojiOpened&&(this.messageHover=!1),this.hoverMessageId=null)},resetMessageHover(){this.messageHover=!1,this.hoverMessageId=null},openFile(e){this.$emit("open-file",{message:this.message,file:e})},openUserTag(e){this.$emit("open-user-tag",{user:e})},messageActionHandler(e){this.resetMessageHover(),setTimeout(()=>{this.$emit("message-action-handler",{action:e,message:this.message})},300)},sendMessageReaction({emoji:e,reaction:t}){this.$emit("send-message-reaction",{messageId:this.message._id,reaction:e,remove:t&&t.indexOf(this.currentUserId)!==-1}),this.messageHover=!1},selectMessage(){this.messageSelectionEnabled&&(this.isMessageSelected?this.$emit("unselect-message",this.message._id):this.$emit("select-message",this.message))}}},nS=["id"],aS={key:0,class:"vac-card-info vac-card-date"},sS={key:1,class:"vac-line-new"},iS={key:2,class:"vac-card-info vac-card-system"},rS={key:1,class:"vac-avatar-offset"},oS={key:0,class:"vac-progress-time"},lS={class:"vac-text-timestamp"},cS={key:0,class:"vac-icon-edited"},uS={key:1},dS=Pe("div",{class:"vac-failure-text"},"!",-1),mS=[dS],fS={key:3,class:"vac-avatar-current-offset"};function vS(e,t,n,a,s,i){const r=dt("format-message"),o=dt("message-reply"),m=dt("message-files"),u=dt("audio-player"),d=dt("svg-icon"),l=dt("message-actions"),c=dt("message-reactions");return oe(),Ce("div",{id:n.message._id,ref:"message",class:"vac-message-wrapper"},[i.showDate?(oe(),Ce("div",aS,_t(n.message.date),1)):Ue("",!0),s.newMessage._id===n.message._id?(oe(),Ce("div",sS,_t(n.textMessages.NEW_MESSAGES),1)):Ue("",!0),n.message.system?(oe(),Ce("div",iS,[qe(e.$slots,"message_"+n.message._id,{},()=>[Xe(r,{"message-id":n.message._id,content:n.message.content,deleted:!!n.message.deleted,users:n.roomUsers,"text-messages":n.textMessages,"text-formatting":n.textFormatting,"link-options":n.linkOptions,onOpenUserTag:i.openUserTag},$t({_:2},[St(e.$slots,(v,h)=>({name:h,fn:mt(A=>[qe(e.$slots,h,Nt(Dt(A)))])}))]),1032,["message-id","content","deleted","users","text-messages","text-formatting","link-options","onOpenUserTag"])])])):(oe(),Ce("div",{key:3,class:kt(["vac-message-box",{"vac-offset-current":n.message.senderId===n.currentUserId}]),onClick:t[8]||(t[8]=(...v)=>i.selectMessage&&i.selectMessage(...v))},[qe(e.$slots,"message_"+n.message._id,{},()=>[n.message.senderId!==n.currentUserId?qe(e.$slots,"message-avatar_"+n.message._id,{key:0},()=>[n.message.avatar?(oe(),Ce("div",{key:0,class:"vac-avatar",style:Qt({"background-image":`url('${n.message.avatar}')`})},null,4)):Ue("",!0)]):Ue("",!0),i.hasSenderUserAvatar&&!n.message.avatar?(oe(),Ce("div",rS)):Ue("",!0),Pe("div",{class:kt(["vac-message-container",{"vac-message-container-offset":i.messageOffset}])},[Pe("div",{class:kt(["vac-message-card",{"vac-message-highlight":i.isMessageHover,"vac-message-current":n.message.senderId===n.currentUserId,"vac-message-deleted":n.message.deleted,"vac-item-clickable":n.messageSelectionEnabled,"vac-message-selected":i.isMessageSelected}]),onMouseover:t[5]||(t[5]=(...v)=>i.onHoverMessage&&i.onHoverMessage(...v)),onMouseleave:t[6]||(t[6]=(...v)=>i.onLeaveMessage&&i.onLeaveMessage(...v))},[i.showUsername?(oe(),Ce("div",{key:0,class:kt(["vac-text-username",{"vac-username-reply":!n.message.deleted&&n.message.replyMessage}])},[Pe("span",null,_t(n.message.username),1)],2)):Ue("",!0),!n.message.deleted&&n.message.replyMessage?(oe(),Pt(o,{key:1,message:n.message,"room-users":n.roomUsers,"text-formatting":n.textFormatting,"link-options":n.linkOptions},$t({_:2},[St(e.$slots,(v,h)=>({name:h,fn:mt(A=>[qe(e.$slots,h,Nt(Dt(A)))])}))]),1032,["message","room-users","text-formatting","link-options"])):Ue("",!0),n.message.deleted||!n.message.files||!n.message.files.length?(oe(),Pt(r,{key:2,"message-id":n.message._id,content:n.message.content,deleted:!!n.message.deleted,users:n.roomUsers,"text-formatting":n.textFormatting,"text-messages":n.textMessages,"link-options":n.linkOptions,onOpenUserTag:i.openUserTag},$t({_:2},[St(e.$slots,(v,h)=>({name:h,fn:mt(A=>[qe(e.$slots,h,Nt(Dt(A)))])}))]),1032,["message-id","content","deleted","users","text-formatting","text-messages","link-options","onOpenUserTag"])):!i.isAudio||n.message.files.length>1?(oe(),Pt(m,{key:3,"current-user-id":n.currentUserId,message:n.message,"room-users":n.roomUsers,"text-formatting":n.textFormatting,"link-options":n.linkOptions,"message-selection-enabled":n.messageSelectionEnabled,onOpenFile:i.openFile,onOpenUserTag:i.openUserTag},$t({_:2},[St(e.$slots,(v,h)=>({name:h,fn:mt(A=>[qe(e.$slots,h,Nt(Dt(A)))])}))]),1032,["current-user-id","message","room-users","text-formatting","link-options","message-selection-enabled","onOpenFile","onOpenUserTag"])):(oe(),Ce(At,{key:4},[Xe(u,{"message-id":n.message._id,src:n.message.files[0].url,"message-selection-enabled":n.messageSelectionEnabled,onUpdateProgressTime:t[0]||(t[0]=v=>s.progressTime=v),onHoverAudioProgress:t[1]||(t[1]=v=>s.hoverAudioProgress=v)},$t({_:2},[St(e.$slots,(v,h)=>({name:h,fn:mt(A=>[qe(e.$slots,h,Nt(Dt(A)))])}))]),1032,["message-id","src","message-selection-enabled"]),n.message.deleted?Ue("",!0):(oe(),Ce("div",oS,_t(s.progressTime),1))],64)),Pe("div",lS,[n.message.edited&&!n.message.deleted?(oe(),Ce("div",cS,[qe(e.$slots,"pencil-icon_"+n.message._id,{},()=>[Xe(d,{name:"pencil"})])])):Ue("",!0),Pe("span",null,_t(n.message.timestamp),1),i.isCheckmarkVisible?(oe(),Ce("span",uS,[qe(e.$slots,"checkmark-icon_"+n.message._id,{},()=>[Xe(d,{name:n.message.distributed?"double-checkmark":"checkmark",param:n.message.seen?"seen":"",class:"vac-icon-check"},null,8,["name","param"])])])):Ue("",!0)]),Xe(l,{"current-user-id":n.currentUserId,message:n.message,"message-actions":n.messageActions,"show-reaction-emojis":n.showReactionEmojis,"message-hover":s.messageHover,"hover-message-id":s.hoverMessageId,"hover-audio-progress":s.hoverAudioProgress,"emoji-data-source":n.emojiDataSource,onUpdateMessageHover:t[2]||(t[2]=v=>s.messageHover=v),onUpdateOptionsOpened:t[3]||(t[3]=v=>s.optionsOpened=v),onUpdateEmojiOpened:t[4]||(t[4]=v=>s.emojiOpened=v),onMessageActionHandler:i.messageActionHandler,onSendMessageReaction:i.sendMessageReaction},$t({_:2},[St(e.$slots,(v,h)=>({name:h,fn:mt(A=>[qe(e.$slots,h,Nt(Dt(A)))])}))]),1032,["current-user-id","message","message-actions","show-reaction-emojis","message-hover","hover-message-id","hover-audio-progress","emoji-data-source","onMessageActionHandler","onSendMessageReaction"])],34),Xe(c,{"current-user-id":n.currentUserId,message:n.message,onSendMessageReaction:i.sendMessageReaction},null,8,["current-user-id","message","onSendMessageReaction"])],2),qe(e.$slots,"message-failure_"+n.message._id,{},()=>[n.message.failure&&n.message.senderId===n.currentUserId?(oe(),Ce("div",{key:0,class:kt(["vac-failure-container vac-svg-button",{"vac-failure-container-avatar":n.message.avatar&&n.message.senderId===n.currentUserId}]),onClick:t[7]||(t[7]=v=>e.$emit("open-failed-message",{message:n.message}))},mS,2)):Ue("",!0)]),n.message.senderId===n.currentUserId?qe(e.$slots,"message-avatar_"+n.message._id,{key:2},()=>[n.message.avatar?(oe(),Ce("div",{key:0,class:"vac-avatar vac-avatar-current",style:Qt({"background-image":`url('${n.message.avatar}')`})},null,4)):Ue("",!0)]):Ue("",!0),i.hasCurrentUserAvatar&&!n.message.avatar?(oe(),Ce("div",fS)):Ue("",!0)])],2))],8,nS)}var hS=Xt(tS,[["render",vS]]);const gS={name:"ChatRoom",components:{Loader:ll,SvgIcon:kn,RoomHeader:o5,RoomFooter:iw,RoomMessage:hS},props:{currentUserId:{type:[String,Number],required:!0},textMessages:{type:Object,required:!0},singleRoom:{type:Boolean,required:!0},showRoomsList:{type:Boolean,required:!0},isMobile:{type:Boolean,required:!0},rooms:{type:Array,required:!0},roomId:{type:[String,Number],required:!0},loadFirstRoom:{type:Boolean,required:!0},messages:{type:Array,required:!0},roomMessage:{type:String,default:null},messagesLoaded:{type:Boolean,required:!0},menuActions:{type:Array,required:!0},messageActions:{type:Array,required:!0},messageSelectionActions:{type:Array,required:!0},autoScroll:{type:Object,required:!0},showSendIcon:{type:Boolean,required:!0},showFiles:{type:Boolean,required:!0},showAudio:{type:Boolean,required:!0},audioBitRate:{type:Number,required:!0},audioSampleRate:{type:Number,required:!0},showEmojis:{type:Boolean,required:!0},showReactionEmojis:{type:Boolean,required:!0},showNewMessagesDivider:{type:Boolean,required:!0},showFooter:{type:Boolean,required:!0},acceptedFiles:{type:String,required:!0},captureFiles:{type:String,required:!0},multipleFiles:{type:Boolean,default:!0},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},loadingRooms:{type:Boolean,required:!0},roomInfoEnabled:{type:Boolean,required:!0},textareaActionEnabled:{type:Boolean,required:!0},textareaAutoFocus:{type:Boolean,required:!0},userTagsEnabled:{type:Boolean,required:!0},emojisSuggestionEnabled:{type:Boolean,required:!0},scrollDistance:{type:Number,required:!0},templatesText:{type:Array,default:null},usernameOptions:{type:Object,required:!0},emojiDataSource:{type:String,default:void 0}},emits:["toggle-rooms-list","room-info","menu-action-handler","message-selection-action-handler","edit-message","send-message","delete-message","message-action-handler","fetch-messages","send-message-reaction","typing-message","open-file","open-user-tag","open-failed-message","textarea-action-handler"],data(){return{editedMessageId:null,initReplyMessage:null,initEditMessage:null,loadingMessages:!1,observer:null,showLoader:!0,loadingMoreMessages:!1,scrollIcon:!1,scrollMessagesCount:0,newMessages:[],messageSelectionEnabled:!1,selectedMessages:[],droppedFiles:[]}},computed:{room(){return this.rooms.find(e=>e.roomId===this.roomId)||{}},showNoMessages(){return this.roomId&&!this.messages.length&&!this.loadingMessages&&!this.loadingRooms},showNoRoom(){const e=!this.rooms.length&&!this.loadingRooms||!this.roomId&&!this.loadFirstRoom;return e&&this.updateLoadingMessages(!1),e},showMessagesStarted(){return this.messages.length&&this.messagesLoaded}},watch:{roomId:{immediate:!0,handler(){this.onRoomChanged()}},messages:{deep:!0,handler(e,t){e.forEach((n,a)=>{this.showNewMessagesDivider&&!n.seen&&n.senderId!==this.currentUserId&&this.newMessages.push({_id:n._id,index:a})}),t?.length===e?.length-1&&(this.newMessages=[]),setTimeout(()=>this.loadingMoreMessages=!1)}},messagesLoaded(e){e&&this.updateLoadingMessages(!1)}},mounted(){this.newMessages=[]},methods:{updateLoadingMessages(e){this.loadingMessages=e,e||setTimeout(()=>this.initIntersectionObserver())},initIntersectionObserver(){this.observer&&(this.showLoader=!0,this.observer.disconnect());const e=this.$el.querySelector("#infinite-loader-messages");if(e){const t={root:this.$el.querySelector("#messages-list"),rootMargin:`${this.scrollDistance}px`,threshold:0};this.observer=new IntersectionObserver(n=>{n[0].isIntersecting&&this.loadMoreMessages()},t),this.observer.observe(e)}},preventTopScroll(){const e=this.$refs.scrollContainer,t=e.scrollHeight,n=new ResizeObserver(s=>{e.scrollHeight!==t&&this.$refs.scrollContainer&&(this.$refs.scrollContainer.scrollTo({top:e.scrollHeight-t}),n.disconnect())});for(var a=0;a<e.children.length;a++)n.observe(e.children[a])},touchStart(e){if(!this.singleRoom&&e.changedTouches.length===1){const t=e.changedTouches[0].clientX,n=e.changedTouches[0].clientY;addEventListener("touchend",a=>this.touchEnd(a,t,n),{once:!0})}},touchEnd(e,t,n){if(e.changedTouches.length===1){const a=e.changedTouches[0].clientX,s=e.changedTouches[0].clientY,i=a-t>100,r=Math.abs(s-n)>50;i&&!r&&this.$emit("toggle-rooms-list")}},onRoomChanged(){this.updateLoadingMessages(!0),this.scrollIcon=!1,this.scrollMessagesCount=0,this.resetMessageSelection();const e=this.$watch(()=>this.messages,t=>{if(!t||!t.length)return;const n=this.$refs.scrollContainer;n&&(e(),setTimeout(()=>{n.scrollTo({top:n.scrollHeight}),this.updateLoadingMessages(!1)}))})},resetMessageSelection(){this.messageSelectionEnabled=!1,this.selectedMessages=[]},selectMessage(e){this.selectedMessages.push(e)},unselectMessage(e){this.selectedMessages=this.selectedMessages.filter(t=>t._id!==e)},onMessageAdded({message:e,index:t,ref:n}){if(t!==this.messages.length-1)return;const a=n.offsetHeight+60;setTimeout(()=>{const s=this.$refs.scrollContainer;let i=!1;s&&(i=this.getBottomScroll(s)>a),e.senderId===this.currentUserId?i?this.autoScroll.send.newAfterScrollUp&&this.scrollToBottom():this.autoScroll.send.new&&this.scrollToBottom():i?this.autoScroll.receive.newAfterScrollUp?this.scrollToBottom():(this.scrollIcon=!0,this.scrollMessagesCount++):this.autoScroll.receive.new?this.scrollToBottom():(this.scrollIcon=!0,this.scrollMessagesCount++)})},onContainerScroll(e){if(!e.target)return;const t=this.getBottomScroll(e.target);t<60&&(this.scrollMessagesCount=0),this.scrollIcon=t>500||this.scrollMessagesCount},loadMoreMessages(){this.loadingMessages||setTimeout(()=>{if(!this.loadingMoreMessages){if(this.messagesLoaded||!this.roomId){this.loadingMoreMessages=!1,this.showLoader=!1;return}this.preventTopScroll(),this.$emit("fetch-messages"),this.loadingMoreMessages=!0}},500)},messageActionHandler({action:e,message:t}){switch(e.name){case"replyMessage":this.initReplyMessage=t,setTimeout(()=>{this.initReplyMessage=null});return;case"editMessage":this.initEditMessage=t,setTimeout(()=>{this.initEditMessage=null});return;case"deleteMessage":return this.$emit("delete-message",t);case"selectMessages":this.selectedMessages=[t],this.messageSelectionEnabled=!0;return;default:return this.$emit("message-action-handler",{action:e,message:t})}},messageSelectionActionHandler(e){this.$emit("message-selection-action-handler",{action:e,messages:this.selectedMessages}),this.resetMessageSelection()},sendMessageReaction(e){this.$emit("send-message-reaction",e)},getBottomScroll(e){const{scrollHeight:t,clientHeight:n,scrollTop:a}=e;return t-n-a},scrollToBottom(){setTimeout(()=>{const e=this.$refs.scrollContainer;e&&(e.classList.add("vac-scroll-smooth"),e.scrollTo({top:e.scrollHeight,behavior:"smooth"}),setTimeout(()=>e.classList.remove("vac-scroll-smooth")))},50)},openFile({message:e,file:t}){this.$emit("open-file",{message:e,file:t})},openUserTag(e){this.$emit("open-user-tag",e)},onDropFiles(e){this.showFiles&&(this.droppedFiles=e.dataTransfer.files)}}},pS={class:"vac-container-center vac-room-empty"},_S={class:"vac-messages-container"},bS={key:0,class:"vac-text-started"},yS={key:1,class:"vac-text-started"},wS={key:0,id:"infinite-loader-messages"},SS={key:2},kS={key:0,class:"vac-badge-counter vac-messages-count"};function xS(e,t,n,a,s,i){const r=dt("room-header"),o=dt("loader"),m=dt("room-message"),u=dt("svg-icon"),d=dt("room-footer");return ss((oe(),Ce("div",{class:"vac-col-messages",onDrop:t[12]||(t[12]=Da((...l)=>i.onDropFiles&&i.onDropFiles(...l),["prevent"])),onDragenter:t[13]||(t[13]=Da(()=>{},["prevent"])),onDragover:t[14]||(t[14]=Da(()=>{},["prevent"])),onDragleave:t[15]||(t[15]=Da(()=>{},["prevent"])),onTouchstart:t[16]||(t[16]=(...l)=>i.touchStart&&i.touchStart(...l))},[i.showNoRoom?qe(e.$slots,"no-room-selected",{key:0},()=>[Pe("div",pS,[Pe("div",null,_t(n.textMessages.ROOM_EMPTY),1)])]):(oe(),Pt(r,{key:1,"current-user-id":n.currentUserId,"text-messages":n.textMessages,"single-room":n.singleRoom,"show-rooms-list":n.showRoomsList,"is-mobile":n.isMobile,"room-info-enabled":n.roomInfoEnabled,"menu-actions":n.menuActions,room:i.room,"message-selection-enabled":s.messageSelectionEnabled,"message-selection-actions":n.messageSelectionActions,"selected-messages-total":s.selectedMessages.length,onToggleRoomsList:t[0]||(t[0]=l=>e.$emit("toggle-rooms-list")),onRoomInfo:t[1]||(t[1]=l=>e.$emit("room-info")),onMenuActionHandler:t[2]||(t[2]=l=>e.$emit("menu-action-handler",l)),onMessageSelectionActionHandler:i.messageSelectionActionHandler,onCancelMessageSelection:t[3]||(t[3]=l=>s.messageSelectionEnabled=!1)},$t({_:2},[St(e.$slots,(l,c)=>({name:c,fn:mt(v=>[qe(e.$slots,c,Nt(Dt(v)))])}))]),1032,["current-user-id","text-messages","single-room","show-rooms-list","is-mobile","room-info-enabled","menu-actions","room","message-selection-enabled","message-selection-actions","selected-messages-total","onMessageSelectionActionHandler"])),Pe("div",{id:"messages-list",ref:"scrollContainer",class:"vac-container-scroll",onScroll:t[5]||(t[5]=(...l)=>i.onContainerScroll&&i.onContainerScroll(...l))},[Xe(o,{show:s.loadingMessages,type:"messages"},$t({_:2},[St(e.$slots,(l,c)=>({name:c,fn:mt(v=>[qe(e.$slots,c,Nt(Dt(v)))])}))]),1032,["show"]),Pe("div",_S,[Pe("div",{class:kt({"vac-messages-hidden":s.loadingMessages})},[Xe(mn,{name:"vac-fade-message"},{default:mt(()=>[Pe("div",null,[i.showNoMessages?(oe(),Ce("div",bS,[qe(e.$slots,"messages-empty",{},()=>[is(_t(n.textMessages.MESSAGES_EMPTY),1)])])):Ue("",!0),i.showMessagesStarted?(oe(),Ce("div",yS,_t(n.textMessages.CONVERSATION_STARTED)+" "+_t(n.messages[0].date),1)):Ue("",!0)])]),_:3}),n.messages.length&&!n.messagesLoaded?(oe(),Ce("div",wS,[Xe(o,{show:!0,infinite:!0,type:"infinite-messages"},$t({_:2},[St(e.$slots,(l,c)=>({name:c,fn:mt(v=>[qe(e.$slots,c,Nt(Dt(v)))])}))]),1024)])):Ue("",!0),(oe(),Pt(Pu,{key:n.roomId,name:"vac-fade-message",tag:"span"},{default:mt(()=>[(oe(!0),Ce(At,null,St(n.messages,(l,c)=>(oe(),Ce("div",{key:l.indexId||l._id},[Xe(m,{"current-user-id":n.currentUserId,message:l,index:c,messages:n.messages,"edited-message-id":s.editedMessageId,"message-actions":n.messageActions,"room-users":i.room.users,"text-messages":n.textMessages,"new-messages":s.newMessages,"show-reaction-emojis":n.showReactionEmojis,"show-new-messages-divider":n.showNewMessagesDivider,"text-formatting":n.textFormatting,"link-options":n.linkOptions,"username-options":n.usernameOptions,"message-selection-enabled":s.messageSelectionEnabled,"selected-messages":s.selectedMessages,"emoji-data-source":n.emojiDataSource,onMessageAdded:i.onMessageAdded,onMessageActionHandler:i.messageActionHandler,onOpenFile:i.openFile,onOpenUserTag:i.openUserTag,onOpenFailedMessage:t[4]||(t[4]=v=>e.$emit("open-failed-message",v)),onSendMessageReaction:i.sendMessageReaction,onSelectMessage:i.selectMessage,onUnselectMessage:i.unselectMessage},$t({_:2},[St(e.$slots,(v,h)=>({name:h,fn:mt(A=>[qe(e.$slots,h,Nt(Dt(A)))])}))]),1032,["current-user-id","message","index","messages","edited-message-id","message-actions","room-users","text-messages","new-messages","show-reaction-emojis","show-new-messages-divider","text-formatting","link-options","username-options","message-selection-enabled","selected-messages","emoji-data-source","onMessageAdded","onMessageActionHandler","onOpenFile","onOpenUserTag","onSendMessageReaction","onSelectMessage","onUnselectMessage"])]))),128))]),_:3}))],2)])],544),s.loadingMessages?Ue("",!0):(oe(),Ce("div",SS,[Xe(mn,{name:"vac-bounce"},{default:mt(()=>[s.scrollIcon?(oe(),Ce("div",{key:0,class:"vac-icon-scroll",onClick:t[6]||(t[6]=(...l)=>i.scrollToBottom&&i.scrollToBottom(...l))},[Xe(mn,{name:"vac-bounce"},{default:mt(()=>[s.scrollMessagesCount?(oe(),Ce("div",kS,_t(s.scrollMessagesCount),1)):Ue("",!0)]),_:1}),qe(e.$slots,"scroll-icon",{},()=>[Xe(u,{name:"dropdown",param:"scroll"})])])):Ue("",!0)]),_:3})])),Xe(d,{room:i.room,"room-id":n.roomId,"room-message":n.roomMessage,"text-messages":n.textMessages,"show-send-icon":n.showSendIcon,"show-files":n.showFiles,"show-audio":n.showAudio,"show-emojis":n.showEmojis,"show-footer":n.showFooter,"accepted-files":n.acceptedFiles,"capture-files":n.captureFiles,"multiple-files":n.multipleFiles,"textarea-action-enabled":n.textareaActionEnabled,"textarea-auto-focus":n.textareaAutoFocus,"user-tags-enabled":n.userTagsEnabled,"emojis-suggestion-enabled":n.emojisSuggestionEnabled,"templates-text":n.templatesText,"text-formatting":n.textFormatting,"link-options":n.linkOptions,"audio-bit-rate":n.audioBitRate,"audio-sample-rate":n.audioSampleRate,"init-reply-message":s.initReplyMessage,"init-edit-message":s.initEditMessage,"dropped-files":s.droppedFiles,"emoji-data-source":n.emojiDataSource,onUpdateEditedMessageId:t[7]||(t[7]=l=>s.editedMessageId=l),onEditMessage:t[8]||(t[8]=l=>e.$emit("edit-message",l)),onSendMessage:t[9]||(t[9]=l=>e.$emit("send-message",l)),onTypingMessage:t[10]||(t[10]=l=>e.$emit("typing-message",l)),onTextareaActionHandler:t[11]||(t[11]=l=>e.$emit("textarea-action-handler",l))},$t({_:2},[St(e.$slots,(l,c)=>({name:c,fn:mt(v=>[qe(e.$slots,c,Nt(Dt(v)))])}))]),1032,["room","room-id","room-message","text-messages","show-send-icon","show-files","show-audio","show-emojis","show-footer","accepted-files","capture-files","multiple-files","textarea-action-enabled","textarea-auto-focus","user-tags-enabled","emojis-suggestion-enabled","templates-text","text-formatting","link-options","audio-bit-rate","audio-sample-rate","init-reply-message","init-edit-message","dropped-files","emoji-data-source"])],544)),[[ol,n.isMobile&&!n.showRoomsList||!n.isMobile||n.singleRoom]])}var TS=Xt(gS,[["render",xS]]);const CS={name:"MediaPreview",components:{SvgIcon:kn},props:{file:{type:Object,required:!0}},emits:["close-media-preview"],computed:{isImage(){return Ei(this.file)},isVideo(){return Or(this.file)}},mounted(){this.$refs.modal.focus()},methods:{closeModal(){this.$emit("close-media-preview")}}},AS={key:0,class:"vac-media-preview-container"},ES={key:1,class:"vac-media-preview-container"},MS={controls:"",autoplay:""},RS=["src"],IS={class:"vac-svg-button"};function BS(e,t,n,a,s,i){const r=dt("svg-icon");return oe(),Ce("div",{ref:"modal",tabindex:"0",class:"vac-media-preview",onClick:t[0]||(t[0]=Da((...o)=>i.closeModal&&i.closeModal(...o),["stop"])),onKeydown:t[1]||(t[1]=Ks((...o)=>i.closeModal&&i.closeModal(...o),["esc"]))},[Xe(mn,{name:"vac-bounce-preview",appear:""},{default:mt(()=>[i.isImage?(oe(),Ce("div",AS,[Pe("div",{class:"vac-image-preview",style:Qt({"background-image":`url('${n.file.url}')`})},null,4)])):i.isVideo?(oe(),Ce("div",ES,[Pe("video",MS,[Pe("source",{src:n.file.url},null,8,RS)])])):Ue("",!0)]),_:1}),Pe("div",IS,[qe(e.$slots,"preview-close-icon",{},()=>[Xe(r,{name:"close-outline",param:"preview"})])])],544)}var LS=Xt(CS,[["render",BS]]),OS={ROOMS_EMPTY:"No rooms",ROOM_EMPTY:"No room selected",NEW_MESSAGES:"New Messages",MESSAGE_DELETED:"This message was deleted",MESSAGES_EMPTY:"No messages",CONVERSATION_STARTED:"Conversation started on:",TYPE_MESSAGE:"Type message",SEARCH:"Search",IS_ONLINE:"is online",LAST_SEEN:"last seen ",IS_TYPING:"is writing...",CANCEL_SELECT_MESSAGE:"Cancel"};const FS={light:{general:{color:"#0a0a0a",colorButtonClear:"#1976d2",colorButton:"#fff",backgroundColorButton:"#1976d2",backgroundInput:"#fff",colorPlaceholder:"#9ca6af",colorCaret:"#1976d2",colorSpinner:"#333",borderStyle:"1px solid #e1e4e8",backgroundScrollIcon:"#fff"},container:{border:"none",borderRadius:"4px",boxShadow:"0px 1px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)"},header:{background:"#fff",colorRoomName:"#0a0a0a",colorRoomInfo:"#9ca6af",position:"absolute",width:"100%"},footer:{background:"#f8f9fa",borderStyleInput:"1px solid #e1e4e8",borderInputSelected:"#1976d2",backgroundReply:"#e5e5e6",backgroundTagActive:"#e5e5e6",backgroundTag:"#f8f9fa"},content:{background:"#f8f9fa"},sidemenu:{background:"#fff",backgroundHover:"#f6f6f6",backgroundActive:"#e5effa",colorActive:"#1976d2",borderColorSearch:"#e1e5e8"},dropdown:{background:"#fff",backgroundHover:"#f6f6f6"},message:{background:"#fff",backgroundMe:"#ccf2cf",color:"#0a0a0a",colorStarted:"#9ca6af",backgroundDeleted:"#dadfe2",backgroundSelected:"#c2dcf2",colorDeleted:"#757e85",colorUsername:"#9ca6af",colorTimestamp:"#828c94",backgroundDate:"#e5effa",colorDate:"#505a62",backgroundSystem:"#e5effa",colorSystem:"#505a62",backgroundMedia:"rgba(0, 0, 0, 0.15)",backgroundReply:"rgba(0, 0, 0, 0.08)",colorReplyUsername:"#0a0a0a",colorReply:"#6e6e6e",colorTag:"#0d579c",backgroundImage:"#ddd",colorNewMessages:"#1976d2",backgroundScrollCounter:"#0696c7",colorScrollCounter:"#fff",backgroundReaction:"#eee",borderStyleReaction:"1px solid #eee",backgroundReactionHover:"#fff",borderStyleReactionHover:"1px solid #ddd",colorReactionCounter:"#0a0a0a",backgroundReactionMe:"#cfecf5",borderStyleReactionMe:"1px solid #3b98b8",backgroundReactionHoverMe:"#cfecf5",borderStyleReactionHoverMe:"1px solid #3b98b8",colorReactionCounterMe:"#0b59b3",backgroundAudioRecord:"#eb4034",backgroundAudioLine:"rgba(0, 0, 0, 0.15)",backgroundAudioProgress:"#455247",backgroundAudioProgressSelector:"#455247",colorFileExtension:"#757e85"},markdown:{background:"rgba(239, 239, 239, 0.7)",border:"rgba(212, 212, 212, 0.9)",color:"#e01e5a",colorMulti:"#0a0a0a"},room:{colorUsername:"#0a0a0a",colorMessage:"#67717a",colorTimestamp:"#a2aeb8",colorStateOnline:"#4caf50",colorStateOffline:"#9ca6af",backgroundCounterBadge:"#0696c7",colorCounterBadge:"#fff"},emoji:{background:"#fff"},icons:{search:"#9ca6af",add:"#1976d2",toggle:"#0a0a0a",menu:"#0a0a0a",close:"#9ca6af",closeImage:"#fff",file:"#1976d2",paperclip:"#1976d2",closeOutline:"#000",closePreview:"#fff",send:"#1976d2",sendDisabled:"#9ca6af",emoji:"#1976d2",emojiReaction:"rgba(0, 0, 0, 0.3)",document:"#1976d2",pencil:"#9e9e9e",checkmark:"#9e9e9e",checkmarkSeen:"#0696c7",eye:"#fff",dropdownMessage:"#fff",dropdownMessageBackground:"rgba(0, 0, 0, 0.25)",dropdownRoom:"#9e9e9e",dropdownScroll:"#0a0a0a",microphone:"#1976d2",audioPlay:"#455247",audioPause:"#455247",audioCancel:"#eb4034",audioConfirm:"#1ba65b"}},dark:{general:{color:"#fff",colorButtonClear:"#fff",colorButton:"#fff",backgroundColorButton:"#1976d2",backgroundInput:"#202223",colorPlaceholder:"#596269",colorCaret:"#fff",colorSpinner:"#fff",borderStyle:"none",backgroundScrollIcon:"#fff"},container:{border:"none",borderRadius:"4px",boxShadow:"0px 1px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)"},header:{background:"#181a1b",colorRoomName:"#fff",colorRoomInfo:"#9ca6af",position:"absolute",width:"100%"},footer:{background:"#131415",borderStyleInput:"none",borderInputSelected:"#1976d2",backgroundReply:"#1b1c1c",backgroundTagActive:"#1b1c1c",backgroundTag:"#131415"},content:{background:"#131415"},sidemenu:{background:"#181a1b",backgroundHover:"#202224",backgroundActive:"#151617",colorActive:"#fff",borderColorSearch:"#181a1b"},dropdown:{background:"#2a2c33",backgroundHover:"#26282e"},message:{background:"#22242a",backgroundMe:"#1f7e80",color:"#fff",colorStarted:"#9ca6af",backgroundDeleted:"#1b1c21",backgroundSelected:"#c2dcf2",colorDeleted:"#a2a5a8",colorUsername:"#b3bac9",colorTimestamp:"#ebedf2",backgroundDate:"rgba(0, 0, 0, 0.3)",colorDate:"#bec5cc",backgroundSystem:"rgba(0, 0, 0, 0.3)",colorSystem:"#bec5cc",backgroundMedia:"rgba(0, 0, 0, 0.18)",backgroundReply:"rgba(0, 0, 0, 0.18)",colorReplyUsername:"#fff",colorReply:"#d6d6d6",colorTag:"#f0c60a",backgroundImage:"#ddd",colorNewMessages:"#fff",backgroundScrollCounter:"#1976d2",colorScrollCounter:"#fff",backgroundReaction:"none",borderStyleReaction:"none",backgroundReactionHover:"#202223",borderStyleReactionHover:"none",colorReactionCounter:"#fff",backgroundReactionMe:"#4e9ad1",borderStyleReactionMe:"none",backgroundReactionHoverMe:"#4e9ad1",borderStyleReactionHoverMe:"none",colorReactionCounterMe:"#fff",backgroundAudioRecord:"#eb4034",backgroundAudioLine:"rgba(255, 255, 255, 0.15)",backgroundAudioProgress:"#b7d4d3",backgroundAudioProgressSelector:"#b7d4d3",colorFileExtension:"#a2a5a8"},markdown:{background:"rgba(239, 239, 239, 0.7)",border:"rgba(212, 212, 212, 0.9)",color:"#e01e5a",colorMulti:"#0a0a0a"},room:{colorUsername:"#fff",colorMessage:"#6c7278",colorTimestamp:"#6c7278",colorStateOnline:"#4caf50",colorStateOffline:"#596269",backgroundCounterBadge:"#1976d2",colorCounterBadge:"#fff"},emoji:{background:"#343740"},icons:{search:"#596269",add:"#fff",toggle:"#fff",menu:"#fff",close:"#9ca6af",closeImage:"#fff",file:"#1976d2",paperclip:"#fff",closeOutline:"#fff",closePreview:"#fff",send:"#fff",sendDisabled:"#646a70",emoji:"#fff",emojiReaction:"#fff",document:"#1976d2",pencil:"#ebedf2",checkmark:"#ebedf2",checkmarkSeen:"#f0d90a",eye:"#fff",dropdownMessage:"#fff",dropdownMessageBackground:"rgba(0, 0, 0, 0.25)",dropdownRoom:"#fff",dropdownScroll:"#0a0a0a",microphone:"#fff",audioPlay:"#b7d4d3",audioPause:"#b7d4d3",audioCancel:"#eb4034",audioConfirm:"#1ba65b"}}},VS=({general:e,container:t,header:n,footer:a,sidemenu:s,content:i,dropdown:r,message:o,markdown:m,room:u,emoji:d,icons:l})=>({"--chat-color":e.color,"--chat-color-button-clear":e.colorButtonClear,"--chat-color-button":e.colorButton,"--chat-bg-color-button":e.backgroundColorButton,"--chat-bg-color-input":e.backgroundInput,"--chat-color-spinner":e.colorSpinner,"--chat-color-placeholder":e.colorPlaceholder,"--chat-color-caret":e.colorCaret,"--chat-border-style":e.borderStyle,"--chat-bg-scroll-icon":e.backgroundScrollIcon,"--chat-container-border":t.border,"--chat-container-border-radius":t.borderRadius,"--chat-container-box-shadow":t.boxShadow,"--chat-header-bg-color":n.background,"--chat-header-color-name":n.colorRoomName,"--chat-header-color-info":n.colorRoomInfo,"--chat-header-position":n.position,"--chat-header-width":n.width,"--chat-footer-bg-color":a.background,"--chat-border-style-input":a.borderStyleInput,"--chat-border-color-input-selected":a.borderInputSelected,"--chat-footer-bg-color-reply":a.backgroundReply,"--chat-footer-bg-color-tag-active":a.backgroundTagActive,"--chat-footer-bg-color-tag":a.backgroundTag,"--chat-content-bg-color":i.background,"--chat-sidemenu-bg-color":s.background,"--chat-sidemenu-bg-color-hover":s.backgroundHover,"--chat-sidemenu-bg-color-active":s.backgroundActive,"--chat-sidemenu-color-active":s.colorActive,"--chat-sidemenu-border-color-search":s.borderColorSearch,"--chat-dropdown-bg-color":r.background,"--chat-dropdown-bg-color-hover":r.backgroundHover,"--chat-message-bg-color":o.background,"--chat-message-bg-color-me":o.backgroundMe,"--chat-message-color-started":o.colorStarted,"--chat-message-bg-color-deleted":o.backgroundDeleted,"--chat-message-bg-color-selected":o.backgroundSelected,"--chat-message-color-deleted":o.colorDeleted,"--chat-message-color-username":o.colorUsername,"--chat-message-color-timestamp":o.colorTimestamp,"--chat-message-bg-color-date":o.backgroundDate,"--chat-message-color-date":o.colorDate,"--chat-message-bg-color-system":o.backgroundSystem,"--chat-message-color-system":o.colorSystem,"--chat-message-color":o.color,"--chat-message-bg-color-media":o.backgroundMedia,"--chat-message-bg-color-reply":o.backgroundReply,"--chat-message-color-reply-username":o.colorReplyUsername,"--chat-message-color-reply-content":o.colorReply,"--chat-message-color-tag":o.colorTag,"--chat-message-bg-color-image":o.backgroundImage,"--chat-message-color-new-messages":o.colorNewMessages,"--chat-message-bg-color-scroll-counter":o.backgroundScrollCounter,"--chat-message-color-scroll-counter":o.colorScrollCounter,"--chat-message-bg-color-reaction":o.backgroundReaction,"--chat-message-border-style-reaction":o.borderStyleReaction,"--chat-message-bg-color-reaction-hover":o.backgroundReactionHover,"--chat-message-border-style-reaction-hover":o.borderStyleReactionHover,"--chat-message-color-reaction-counter":o.colorReactionCounter,"--chat-message-bg-color-reaction-me":o.backgroundReactionMe,"--chat-message-border-style-reaction-me":o.borderStyleReactionMe,"--chat-message-bg-color-reaction-hover-me":o.backgroundReactionHoverMe,"--chat-message-border-style-reaction-hover-me":o.borderStyleReactionHoverMe,"--chat-message-color-reaction-counter-me":o.colorReactionCounterMe,"--chat-message-bg-color-audio-record":o.backgroundAudioRecord,"--chat-message-bg-color-audio-line":o.backgroundAudioLine,"--chat-message-bg-color-audio-progress":o.backgroundAudioProgress,"--chat-message-bg-color-audio-progress-selector":o.backgroundAudioProgressSelector,"--chat-message-color-file-extension":o.colorFileExtension,"--chat-markdown-bg":m.background,"--chat-markdown-border":m.border,"--chat-markdown-color":m.color,"--chat-markdown-color-multi":m.colorMulti,"--chat-room-color-username":u.colorUsername,"--chat-room-color-message":u.colorMessage,"--chat-room-color-timestamp":u.colorTimestamp,"--chat-room-color-online":u.colorStateOnline,"--chat-room-color-offline":u.colorStateOffline,"--chat-room-bg-color-badge":u.backgroundCounterBadge,"--chat-room-color-badge":u.colorCounterBadge,"--chat-emoji-bg-color":d.background,"--chat-icon-color-search":l.search,"--chat-icon-color-add":l.add,"--chat-icon-color-toggle":l.toggle,"--chat-icon-color-menu":l.menu,"--chat-icon-color-close":l.close,"--chat-icon-color-close-image":l.closeImage,"--chat-icon-color-file":l.file,"--chat-icon-color-paperclip":l.paperclip,"--chat-icon-color-close-outline":l.closeOutline,"--chat-icon-color-close-preview":l.closePreview,"--chat-icon-color-send":l.send,"--chat-icon-color-send-disabled":l.sendDisabled,"--chat-icon-color-emoji":l.emoji,"--chat-icon-color-emoji-reaction":l.emojiReaction,"--chat-icon-color-document":l.document,"--chat-icon-color-pencil":l.pencil,"--chat-icon-color-checkmark":l.checkmark,"--chat-icon-color-checkmark-seen":l.checkmarkSeen,"--chat-icon-color-eye":l.eye,"--chat-icon-color-dropdown-message":l.dropdownMessage,"--chat-icon-bg-dropdown-message":l.dropdownMessageBackground,"--chat-icon-color-dropdown-room":l.dropdownRoom,"--chat-icon-color-dropdown-scroll":l.dropdownScroll,"--chat-icon-color-microphone":l.microphone,"--chat-icon-color-audio-play":l.audioPlay,"--chat-icon-color-audio-pause":l.audioPause,"--chat-icon-color-audio-cancel":l.audioCancel,"--chat-icon-color-audio-confirm":l.audioConfirm});var PS=`.vac-fade-spinner-enter-from{opacity:0}.vac-fade-spinner-enter-active{transition:opacity .8s}.vac-fade-spinner-leave-active{transition:opacity .2s;opacity:0}.vac-fade-image-enter-from{opacity:0}.vac-fade-image-enter-active{transition:opacity 1s}.vac-fade-image-leave-active{transition:opacity .5s;opacity:0}.vac-fade-message-enter-from{opacity:0}.vac-fade-message-enter-active{transition:opacity .5s}.vac-fade-message-leave-active{transition:opacity .2s;opacity:0}.vac-slide-left-enter-active,.vac-slide-right-enter-active{transition:all .3s ease;transition-property:transform,opacity}.vac-slide-left-leave-active,.vac-slide-right-leave-active{transition:all .2s cubic-bezier(1,.5,.8,1)!important;transition-property:transform,opacity}.vac-slide-left-enter-from,.vac-slide-left-leave-to{transform:translate(10px);opacity:0}.vac-slide-right-enter-from,.vac-slide-right-leave-to{transform:translate(-10px);opacity:0}.vac-slide-up-enter-active{transition:all .3s ease}.vac-slide-up-leave-active{transition:all .2s cubic-bezier(1,.5,.8,1)}.vac-slide-up-enter-from,.vac-slide-up-leave-to{transform:translateY(10px);opacity:0}.vac-bounce-enter-active{animation:vac-bounce-in .5s}.vac-bounce-leave-active{animation:vac-bounce-in .3s reverse}@keyframes vac-bounce-in{0%{transform:scale(0)}50%{transform:scale(1.05)}to{transform:scale(1)}}.vac-fade-preview-enter{opacity:0}.vac-fade-preview-enter-active{transition:opacity .1s}.vac-fade-preview-leave-active{transition:opacity .2s;opacity:0}.vac-bounce-preview-enter-active{animation:vac-bounce-image-in .4s}.vac-bounce-preview-leave-active{animation:vac-bounce-image-in .3s reverse}@keyframes vac-bounce-image-in{0%{transform:scale(.6)}to{transform:scale(1)}}.vac-menu-list{border-radius:4px;display:block;cursor:pointer;background:var(--chat-dropdown-bg-color);padding:6px 0}.vac-menu-list :hover{background:var(--chat-dropdown-bg-color-hover);transition:background-color .3s cubic-bezier(.25,.8,.5,1)}.vac-menu-list :not(:hover){transition:background-color .3s cubic-bezier(.25,.8,.5,1)}.vac-menu-item{-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-ms-flex:1 1 100%;flex:1 1 100%;min-height:30px;padding:5px 16px;position:relative;white-space:nowrap;line-height:30px}.vac-menu-options{position:absolute;right:10px;top:20px;z-index:9999;min-width:150px;display:inline-block;border-radius:4px;font-size:14px;color:var(--chat-color);overflow-y:auto;overflow-x:hidden;contain:content;box-shadow:0 2px 2px -4px #0000001a,0 2px 2px 1px #0000001f,0 1px 8px 1px #0000001f}.vac-app-border{border:var(--chat-border-style)}.vac-app-border-t{border-top:var(--chat-border-style)}.vac-app-border-r{border-right:var(--chat-border-style)}.vac-app-border-b{border-bottom:var(--chat-border-style)}.vac-app-box-shadow{transition:all .5s;box-shadow:0 2px 2px -4px #0000001a,0 2px 2px 1px #0000001f,0 1px 8px 1px #0000001f}.vac-item-clickable{cursor:pointer}.vac-vertical-center{display:flex;align-items:center;height:100%}.vac-vertical-center .vac-vertical-container{width:100%;text-align:center}.vac-svg-button{max-height:30px;display:flex;cursor:pointer;transition:all .2s}.vac-svg-button:hover{transform:scale(1.1);opacity:.7}.vac-avatar{background-size:cover;background-position:center center;background-repeat:no-repeat;background-color:#ddd;height:42px;width:42px;min-height:42px;min-width:42px;margin-right:15px;border-radius:50%}.vac-blur-loading{filter:blur(3px)}.vac-badge-counter{height:13px;width:auto;min-width:13px;border-radius:50%;display:flex;align-items:center;justify-content:center;padding:3px;font-size:11px;font-weight:500}.vac-text-ellipsis{width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.vac-text-tag{color:var(--chat-message-color-tag);cursor:pointer}.vac-file-container{display:flex;align-content:center;justify-content:center;flex-wrap:wrap;text-align:center;background:var(--chat-bg-color-input);border:var(--chat-border-style-input);border-radius:4px;padding:10px}.vac-file-container svg{height:28px;width:28px}.vac-file-container .vac-text-extension{font-size:12px;color:var(--chat-message-color-file-extension);margin-top:-2px}.markdown p{margin:0}.markdown ol{display:flex;flex-direction:column;list-style-position:inside}.markdown ul{display:flex;flex-direction:column}.markdown code{display:block;font-size:12px;color:var(--chat-markdown-color-multi);background:var(--chat-markdown-bg);border:1px solid var(--chat-markdown-border);border-radius:3px;margin:4px 0;padding:7px}.markdown p code{display:inline-block;font-size:12px;color:var(--chat-markdown-color);background:var(--chat-markdown-bg);border:1px solid var(--chat-markdown-border);border-radius:3px;margin:2px 0;padding:2px 3px}.vac-card-window{width:100%;display:block;max-width:100%;background:var(--chat-content-bg-color);color:var(--chat-color);overflow-wrap:break-word;white-space:normal;border:var(--chat-container-border);border-radius:var(--chat-container-border-radius);box-shadow:var(--chat-container-box-shadow);-webkit-tap-highlight-color:transparent}.vac-card-window *{font-family:inherit}.vac-card-window a{color:#0d579c;font-weight:500}.vac-card-window .vac-chat-container{height:100%;display:flex}.vac-card-window .vac-chat-container input{min-width:10px}.vac-card-window .vac-chat-container textarea,.vac-card-window .vac-chat-container input[type=text],.vac-card-window .vac-chat-container input[type=search]{-webkit-appearance:none}.vac-media-preview{position:fixed;top:0;left:0;z-index:99;width:100vw;height:100vh;display:flex;align-items:center;background-color:#000c;outline:none}.vac-media-preview .vac-media-preview-container{height:calc(100% - 140px);width:calc(100% - 80px);padding:70px 40px;margin:0 auto}.vac-media-preview .vac-image-preview{width:100%;height:100%;background-size:contain;background-repeat:no-repeat;background-position:center}.vac-media-preview video{width:100%;height:100%}.vac-media-preview .vac-svg-button{position:absolute;top:30px;right:30px;transform:scale(1.4)}@media only screen and (max-width: 768px){.vac-media-preview .vac-svg-button{top:20px;right:20px;transform:scale(1.2)}.vac-media-preview .vac-media-preview-container{width:calc(100% - 40px);padding:70px 20px}}.vac-col-messages{position:relative;height:100%;flex:1;overflow:hidden;display:flex;flex-flow:column}.vac-col-messages .vac-container-center{height:100%;width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center}.vac-col-messages .vac-room-empty{font-size:14px;color:#9ca6af;font-style:italic;line-height:20px;white-space:pre-line}.vac-col-messages .vac-room-empty div{padding:0 10%}.vac-col-messages .vac-container-scroll{background:var(--chat-content-bg-color);flex:1;overflow-y:auto;margin-right:1px;margin-top:65px;-webkit-overflow-scrolling:touch}.vac-col-messages .vac-container-scroll.vac-scroll-smooth{scroll-behavior:smooth}.vac-col-messages .vac-messages-container{padding:0 5px 5px}.vac-col-messages .vac-text-started{font-size:14px;color:var(--chat-message-color-started);font-style:italic;text-align:center;margin-top:25px;margin-bottom:20px}.vac-col-messages .vac-icon-scroll{position:absolute;bottom:80px;right:20px;padding:8px;background:var(--chat-bg-scroll-icon);border-radius:50%;box-shadow:0 1px 1px -1px #0003,0 1px 1px #00000024,0 1px 2px #0000001f;display:flex;cursor:pointer;z-index:10}.vac-col-messages .vac-icon-scroll svg{height:25px;width:25px}.vac-col-messages .vac-messages-count{position:absolute;top:-8px;left:11px;background-color:var(--chat-message-bg-color-scroll-counter);color:var(--chat-message-color-scroll-counter)}.vac-col-messages .vac-messages-hidden{opacity:0}@media only screen and (max-width: 768px){.vac-col-messages .vac-container-scroll{margin-top:50px}.vac-col-messages .vac-text-started{margin-top:20px}.vac-col-messages .vac-icon-scroll{bottom:70px}}.vac-room-header{position:var(--chat-header-position);display:flex;align-items:center;height:64px;width:var(--chat-header-width);z-index:10;margin-right:1px;background:var(--chat-header-bg-color);border-top-right-radius:var(--chat-container-border-radius)}.vac-room-header .vac-room-wrapper{display:flex;align-items:center;min-width:0;height:100%;width:100%;padding:0 16px}.vac-room-header .vac-toggle-button{margin-right:15px}.vac-room-header .vac-toggle-button svg{height:26px;width:26px}.vac-room-header .vac-rotate-icon{transform:rotate(180deg)!important}.vac-room-header .vac-rotate-icon-init{transform:rotate(360deg)}.vac-room-header .vac-info-wrapper,.vac-room-header .vac-room-selection{display:flex;align-items:center;min-width:0;width:100%;height:100%}.vac-room-header .vac-room-selection .vac-selection-button{padding:8px 16px;color:var(--chat-color-button);background-color:var(--chat-bg-color-button);border-radius:4px;margin-right:10px;cursor:pointer;transition:all .2s}.vac-room-header .vac-room-selection .vac-selection-button:hover{opacity:.7}.vac-room-header .vac-room-selection .vac-selection-button:active{opacity:.9}.vac-room-header .vac-room-selection .vac-selection-button .vac-selection-button-count{margin-left:6px;opacity:.9}.vac-room-header .vac-room-selection .vac-selection-cancel{display:flex;align-items:center;margin-left:auto;white-space:nowrap;color:var(--chat-color-button-clear);transition:all .2s}.vac-room-header .vac-room-selection .vac-selection-cancel:hover{opacity:.7}.vac-room-header .vac-room-name{font-size:17px;font-weight:500;line-height:22px;color:var(--chat-header-color-name)}.vac-room-header .vac-room-info{font-size:13px;line-height:18px;color:var(--chat-header-color-info)}.vac-room-header .vac-room-options{margin-left:auto}@media only screen and (max-width: 768px){.vac-room-header{height:50px}.vac-room-header .vac-room-wrapper{padding:0 10px}.vac-room-header .vac-room-name{font-size:16px;line-height:22px}.vac-room-header .vac-room-info{font-size:12px;line-height:16px}.vac-room-header .vac-avatar{height:37px;width:37px;min-height:37px;min-width:37px}}.vac-room-footer{width:100%;border-bottom-right-radius:4px;z-index:10}.vac-box-footer{display:flex;position:relative;background:var(--chat-footer-bg-color);padding:10px 8px}.vac-textarea{max-height:300px;overflow-y:auto;height:20px;width:100%;line-height:20px;outline:0;resize:none;border-radius:20px;padding:12px 16px;box-sizing:content-box;font-size:16px;background:var(--chat-bg-color-input);color:var(--chat-color);caret-color:var(--chat-color-caret);border:var(--chat-border-style-input)}.vac-textarea::placeholder{color:var(--chat-color-placeholder);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.vac-textarea-outline{border:1px solid var(--chat-border-color-input-selected);box-shadow:inset 0 0 0 1px var(--chat-border-color-input-selected)}.vac-icon-textarea,.vac-icon-textarea-left{display:flex;align-items:center}.vac-icon-textarea svg,.vac-icon-textarea .vac-wrapper,.vac-icon-textarea-left svg,.vac-icon-textarea-left .vac-wrapper{margin:0 7px}.vac-icon-textarea{margin-left:5px}.vac-icon-textarea-left{display:flex;align-items:center;margin-right:5px}.vac-icon-textarea-left svg,.vac-icon-textarea-left .vac-wrapper{margin:0 7px}.vac-icon-textarea-left .vac-icon-microphone{fill:var(--chat-icon-color-microphone);margin:0 7px}.vac-icon-textarea-left .vac-dot-audio-record{height:15px;width:15px;border-radius:50%;background-color:var(--chat-message-bg-color-audio-record);animation:vac-scaling .8s ease-in-out infinite alternate}@keyframes vac-scaling{0%{transform:scale(1);opacity:.4}to{transform:scale(1.1);opacity:1}}.vac-icon-textarea-left .vac-dot-audio-record-time{font-size:16px;color:var(--chat-color);margin-left:8px;width:45px}.vac-icon-textarea-left .vac-icon-audio-stop,.vac-icon-textarea-left .vac-icon-audio-confirm{min-height:28px;min-width:28px}.vac-icon-textarea-left .vac-icon-audio-stop svg,.vac-icon-textarea-left .vac-icon-audio-confirm svg{min-height:28px;min-width:28px}.vac-icon-textarea-left .vac-icon-audio-stop{margin-right:20px}.vac-icon-textarea-left .vac-icon-audio-stop #vac-icon-close-outline{fill:var(--chat-icon-color-audio-cancel)}.vac-icon-textarea-left .vac-icon-audio-confirm{margin-right:3px;margin-left:12px}.vac-icon-textarea-left .vac-icon-audio-confirm #vac-icon-checkmark{fill:var(--chat-icon-color-audio-confirm)}.vac-send-disabled,.vac-send-disabled svg{cursor:none!important;pointer-events:none!important;transform:none!important}@media only screen and (max-width: 768px){.vac-room-footer{width:100%}.vac-box-footer{padding:7px 2px 7px 7px}.vac-box-footer.vac-box-footer-border{border-top:var(--chat-border-style-input)}.vac-textarea{padding:7px;line-height:18px}.vac-textarea::placeholder{color:transparent}.vac-icon-textarea svg,.vac-icon-textarea .vac-wrapper,.vac-icon-textarea-left svg,.vac-icon-textarea-left .vac-wrapper{margin:0 5px!important}}@media only screen and (max-height: 768px){.vac-textarea{max-height:120px}}.vac-emojis-container{width:calc(100% - 16px);padding:10px 8px;background:var(--chat-footer-bg-color);display:flex;align-items:center;overflow:auto}.vac-emojis-container .vac-emoji-element{padding:0 8px;font-size:30px;border-radius:4px;cursor:pointer;background:var(--chat-footer-bg-color-tag);transition:background-color .3s cubic-bezier(.25,.8,.5,1)}.vac-emojis-container .vac-emoji-element-active{background:var(--chat-footer-bg-color-tag-active)}@media only screen and (max-width: 768px){.vac-emojis-container{width:calc(100% - 10px);padding:7px 5px}.vac-emojis-container .vac-emoji-element{padding:0 7px;font-size:26px}}.vac-reply-container{display:flex;padding:10px 10px 0;background:var(--chat-footer-bg-color);align-items:center;width:calc(100% - 20px)}.vac-reply-container .vac-reply-box{width:100%;overflow:hidden;background:var(--chat-footer-bg-color-reply);border-radius:4px;padding:8px 10px}.vac-reply-container .vac-reply-info{overflow:hidden}.vac-reply-container .vac-reply-username{color:var(--chat-message-color-reply-username);font-size:12px;line-height:15px;margin-bottom:2px}.vac-reply-container .vac-reply-content{font-size:12px;color:var(--chat-message-color-reply-content);white-space:pre-line}.vac-reply-container .vac-icon-reply{margin-left:10px}.vac-reply-container .vac-icon-reply svg{height:20px;width:20px}.vac-reply-container .vac-image-reply{max-height:100px;max-width:200px;margin:4px 10px 0 0;border-radius:4px}.vac-reply-container .vac-audio-reply{margin-right:10px}.vac-reply-container .vac-file-container{max-width:80px}@media only screen and (max-width: 768px){.vac-reply-container{padding:5px 8px;width:calc(100% - 16px)}}.vac-room-files-container{display:flex;align-items:center;padding:10px 6px 0;background:var(--chat-footer-bg-color)}.vac-room-files-container .vac-files-box{display:flex;overflow:auto;width:calc(100% - 30px)}.vac-room-files-container video{height:100px;border:var(--chat-border-style-input);border-radius:4px}.vac-room-files-container .vac-icon-close{margin-left:auto}.vac-room-files-container .vac-icon-close svg{height:20px;width:20px}@media only screen and (max-width: 768px){.vac-files-container{padding:6px 4px 4px 2px}}.vac-room-file-container{display:flex;position:relative;margin:0 4px}.vac-room-file-container .vac-message-image{position:relative;background-color:var(--chat-message-bg-color-image)!important;background-size:cover!important;background-position:center center!important;background-repeat:no-repeat!important;height:100px;width:100px;border:var(--chat-border-style-input);border-radius:4px}.vac-room-file-container .vac-file-container{height:80px;width:80px}.vac-room-file-container .vac-icon-remove{position:absolute;top:6px;left:6px;z-index:10}.vac-room-file-container .vac-icon-remove svg{height:20px;width:20px;border-radius:50%}.vac-room-file-container .vac-icon-remove:before{content:" ";position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);border-radius:50%;z-index:-1}.vac-tags-container{display:flex;flex-direction:column;align-items:center;width:100%}.vac-tags-container .vac-tags-box{display:flex;width:100%;height:54px;overflow:hidden;cursor:pointer;background:var(--chat-footer-bg-color-tag);transition:background-color .3s cubic-bezier(.25,.8,.5,1)}.vac-tags-container .vac-tags-box-active{background:var(--chat-footer-bg-color-tag-active)}.vac-tags-container .vac-tags-info{display:flex;overflow:hidden;padding:0 20px;align-items:center}.vac-tags-container .vac-tags-avatar{height:34px;width:34px;min-height:34px;min-width:34px}.vac-tags-container .vac-tags-username{font-size:14px}@media only screen and (max-width: 768px){.vac-tags-container .vac-tags-box{height:50px}.vac-tags-container .vac-tags-info{padding:0 12px}}.vac-template-container{display:flex;flex-direction:column;align-items:center;width:100%}.vac-template-container .vac-template-box{display:flex;width:100%;height:54px;overflow:hidden;cursor:pointer;background:var(--chat-footer-bg-color-tag);transition:background-color .3s cubic-bezier(.25,.8,.5,1)}.vac-template-container .vac-template-active{background:var(--chat-footer-bg-color-tag-active)}.vac-template-container .vac-template-info{display:flex;overflow:hidden;padding:0 20px;align-items:center}.vac-template-container .vac-template-tag{font-size:14px;font-weight:700;margin-right:10px}.vac-template-container .vac-template-text{font-size:14px}@media only screen and (max-width: 768px){.vac-template-container .vac-template-box{height:50px}.vac-template-container .vac-template-info{padding:0 12px}}.vac-rooms-container{display:flex;flex-flow:column;flex:0 0 25%;min-width:260px;max-width:500px;position:relative;background:var(--chat-sidemenu-bg-color);height:100%;border-top-left-radius:var(--chat-container-border-radius);border-bottom-left-radius:var(--chat-container-border-radius)}.vac-rooms-container.vac-rooms-container-full{flex:0 0 100%;max-width:100%}.vac-rooms-container .vac-rooms-empty{font-size:14px;color:#9ca6af;font-style:italic;text-align:center;margin:40px 0;line-height:20px;white-space:pre-line}.vac-rooms-container .vac-room-list{flex:1;position:relative;max-width:100%;padding:0 10px 5px;overflow-y:auto}.vac-rooms-container .vac-room-item{border-radius:8px;align-items:center;display:flex;flex:1 1 100%;margin-bottom:5px;padding:0 14px;position:relative;min-height:71px;transition:background-color .3s cubic-bezier(.25,.8,.5,1)}.vac-rooms-container .vac-room-item:hover{background:var(--chat-sidemenu-bg-color-hover)}.vac-rooms-container .vac-room-item:not(.vac-room-selected){cursor:pointer}.vac-rooms-container .vac-room-selected{color:var(--chat-sidemenu-color-active)!important;background:var(--chat-sidemenu-bg-color-active)!important}.vac-rooms-container .vac-room-selected:hover{background:var(--chat-sidemenu-bg-color-active)!important}@media only screen and (max-width: 768px){.vac-rooms-container .vac-room-list{padding:0 7px 5px}.vac-rooms-container .vac-room-item{min-height:60px;padding:0 8px}}.vac-room-container{display:flex;flex:1;align-items:center;width:100%}.vac-room-container .vac-name-container{flex:1}.vac-room-container .vac-title-container{display:flex;align-items:center;line-height:25px}.vac-room-container .vac-state-circle{width:9px;height:9px;border-radius:50%;background-color:var(--chat-room-color-offline);margin-right:6px;transition:.3s}.vac-room-container .vac-state-online{background-color:var(--chat-room-color-online)}.vac-room-container .vac-room-name{flex:1;color:var(--chat-room-color-username);font-weight:500}.vac-room-container .vac-text-date{margin-left:5px;font-size:11px;color:var(--chat-room-color-timestamp)}.vac-room-container .vac-text-last{display:flex;align-items:center;font-size:12px;line-height:19px;color:var(--chat-room-color-message)}.vac-room-container .vac-message-new{color:var(--chat-room-color-username);font-weight:500}.vac-room-container .vac-icon-check{display:flex;vertical-align:middle;height:14px;width:14px;margin-top:-2px;margin-right:2px}.vac-room-container .vac-icon-microphone{height:15px;width:15px;vertical-align:middle;margin:-3px 1px 0 -2px;fill:var(--chat-room-color-message)}.vac-room-container .vac-room-options-container{display:flex;margin-left:auto}.vac-room-container .vac-room-badge{background-color:var(--chat-room-bg-color-badge);color:var(--chat-room-color-badge);margin-left:5px}.vac-room-container .vac-list-room-options{height:19px;width:19px;align-items:center;margin-left:5px}.vac-box-empty{margin-top:10px}@media only screen and (max-width: 768px){.vac-box-empty{margin-top:7px}}.vac-box-search{position:sticky;display:flex;align-items:center;height:64px;padding:0 15px}.vac-box-search .vac-icon-search{display:flex;position:absolute;left:30px}.vac-box-search .vac-icon-search svg{width:18px;height:18px}.vac-box-search .vac-input{height:38px;width:100%;background:var(--chat-bg-color-input);color:var(--chat-color);font-size:15px;outline:0;caret-color:var(--chat-color-caret);padding:10px 10px 10px 40px;border:1px solid var(--chat-sidemenu-border-color-search);border-radius:20px}.vac-box-search .vac-input::placeholder{color:var(--chat-color-placeholder)}.vac-box-search .vac-add-icon{margin-left:auto;padding-left:10px}@media only screen and (max-width: 768px){.vac-box-search{height:58px}}.vac-message-wrapper .vac-card-info{border-radius:4px;text-align:center;margin:10px auto;font-size:12px;padding:4px;display:block;overflow-wrap:break-word;position:relative;white-space:normal;box-shadow:0 1px 1px -1px #0000001a,0 1px 1px -1px #0000001c,0 1px 2px -1px #0000001c}.vac-message-wrapper .vac-card-date{max-width:150px;font-weight:500;text-transform:uppercase;color:var(--chat-message-color-date);background-color:var(--chat-message-bg-color-date)}.vac-message-wrapper .vac-card-system{max-width:250px;padding:8px 4px;color:var(--chat-message-color-system);background-color:var(--chat-message-bg-color-system)}.vac-message-wrapper .vac-line-new{color:var(--chat-message-color-new-messages);position:relative;text-align:center;font-size:13px;padding:10px 0}.vac-message-wrapper .vac-line-new:after,.vac-message-wrapper .vac-line-new:before{border-top:1px solid var(--chat-message-color-new-messages);content:"";left:0;position:absolute;top:50%;width:calc(50% - 60px)}.vac-message-wrapper .vac-line-new:before{left:auto;right:0}.vac-message-wrapper .vac-message-box{display:flex;flex:0 0 50%;max-width:50%;justify-content:flex-start;line-height:1.4}.vac-message-wrapper .vac-avatar{height:28px;width:28px;min-height:28px;min-width:28px;margin:0 0 2px;align-self:flex-end}.vac-message-wrapper .vac-avatar-current-offset{margin-right:28px}.vac-message-wrapper .vac-avatar-offset{margin-left:28px}.vac-message-wrapper .vac-failure-container{position:relative;align-self:flex-end;height:20px;width:20px;margin:0 0 2px -4px;border-radius:50%;background-color:#f44336}.vac-message-wrapper .vac-failure-container.vac-failure-container-avatar{margin-right:6px}.vac-message-wrapper .vac-failure-container .vac-failure-text{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;font-size:15px;font-weight:700}.vac-message-wrapper .vac-message-container{position:relative;padding:2px 10px;align-items:end;min-width:100px;box-sizing:content-box}.vac-message-wrapper .vac-message-container-offset{margin-top:10px}.vac-message-wrapper .vac-offset-current{margin-left:50%;justify-content:flex-end}.vac-message-wrapper .vac-message-card{background-color:var(--chat-message-bg-color);color:var(--chat-message-color);border-radius:8px;font-size:14px;padding:6px 9px 3px;white-space:pre-line;max-width:100%;-webkit-transition-property:box-shadow,opacity;transition-property:box-shadow,opacity;transition:box-shadow .28s cubic-bezier(.4,0,.2,1);will-change:box-shadow;box-shadow:0 1px 1px -1px #0000001a,0 1px 1px -1px #0000001c,0 1px 2px -1px #0000001c}.vac-message-wrapper .vac-message-highlight{box-shadow:0 1px 2px -1px #0000001a,0 1px 2px -1px #0000001c,0 1px 5px -1px #0000001c}.vac-message-wrapper .vac-message-current{background-color:var(--chat-message-bg-color-me)!important}.vac-message-wrapper .vac-message-deleted{color:var(--chat-message-color-deleted)!important;font-size:13px!important;font-style:italic!important;background-color:var(--chat-message-bg-color-deleted)!important}.vac-message-wrapper .vac-message-selected{background-color:var(--chat-message-bg-color-selected)!important;transition:background-color .2s}.vac-message-wrapper .vac-message-image{position:relative;background-color:var(--chat-message-bg-color-image)!important;background-size:cover!important;background-position:center center!important;background-repeat:no-repeat!important;height:250px;width:250px;max-width:100%;border-radius:4px;margin:4px auto 5px;transition:.4s filter linear}.vac-message-wrapper .vac-text-username{font-size:13px;color:var(--chat-message-color-username);margin-bottom:2px}.vac-message-wrapper .vac-username-reply{margin-bottom:5px}.vac-message-wrapper .vac-text-timestamp{font-size:10px;color:var(--chat-message-color-timestamp);text-align:right}.vac-message-wrapper .vac-progress-time{float:left;margin:-2px 0 0 40px;color:var(--chat-color);font-size:12px}.vac-message-wrapper .vac-icon-edited{-webkit-box-align:center;align-items:center;display:-webkit-inline-box;display:inline-flex;justify-content:center;letter-spacing:normal;line-height:1;text-indent:0;vertical-align:middle;margin:0 4px 2px}.vac-message-wrapper .vac-icon-edited svg{height:12px;width:12px}.vac-message-wrapper .vac-icon-check{height:14px;width:14px;vertical-align:middle;margin:-3px -3px 0 3px}@media only screen and (max-width: 768px){.vac-message-wrapper .vac-message-container{padding:2px 3px 1px}.vac-message-wrapper .vac-message-container-offset{margin-top:10px}.vac-message-wrapper .vac-message-box{flex:0 0 80%;max-width:80%}.vac-message-wrapper .vac-avatar{height:25px;width:25px;min-height:25px;min-width:25px;margin:0 6px 1px 0}.vac-message-wrapper .vac-avatar.vac-avatar-current{margin:0 0 1px 6px}.vac-message-wrapper .vac-avatar-current-offset{margin-right:31px}.vac-message-wrapper .vac-avatar-offset{margin-left:31px}.vac-message-wrapper .vac-failure-container{margin-left:2px}.vac-message-wrapper .vac-failure-container.vac-failure-container-avatar{margin-right:0}.vac-message-wrapper .vac-offset-current{margin-left:20%}.vac-message-wrapper .vac-progress-time{margin-left:37px}}.vac-audio-player{display:flex;margin:8px 0 5px}.vac-audio-player .vac-svg-button{max-width:18px;margin-left:7px}@media only screen and (max-width: 768px){.vac-audio-player{margin:4px 0 0}.vac-audio-player .vac-svg-button{max-width:16px;margin-left:5px}}.vac-player-bar{display:flex;align-items:center;max-width:calc(100% - 18px);margin-right:7px;margin-left:20px}.vac-player-bar .vac-player-progress{width:190px}.vac-player-bar .vac-player-progress .vac-line-container{position:relative;height:4px;border-radius:5px;background-color:var(--chat-message-bg-color-audio-line)}.vac-player-bar .vac-player-progress .vac-line-container .vac-line-progress{position:absolute;height:inherit;background-color:var(--chat-message-bg-color-audio-progress);border-radius:inherit}.vac-player-bar .vac-player-progress .vac-line-container .vac-line-dot{position:absolute;top:-5px;margin-left:-7px;height:14px;width:14px;border-radius:50%;background-color:var(--chat-message-bg-color-audio-progress-selector);transition:transform .25s}.vac-player-bar .vac-player-progress .vac-line-container .vac-line-dot__active{transform:scale(1.2)}@media only screen and (max-width: 768px){.vac-player-bar{margin-right:5px}.vac-player-bar .vac-player-progress .vac-line-container{height:3px}.vac-player-bar .vac-player-progress .vac-line-container .vac-line-dot{height:12px;width:12px;top:-5px;margin-left:-5px}}.vac-message-actions-wrapper .vac-options-container{position:absolute;top:2px;right:10px;height:40px;width:70px;overflow:hidden;border-top-right-radius:8px}.vac-message-actions-wrapper .vac-blur-container{position:absolute;height:100%;width:100%;left:8px;bottom:10px;background:var(--chat-message-bg-color);filter:blur(3px);border-bottom-left-radius:8px}.vac-message-actions-wrapper .vac-options-me{background:var(--chat-message-bg-color-me)}.vac-message-actions-wrapper .vac-message-options{background:var(--chat-icon-bg-dropdown-message);border-radius:50%;position:absolute;top:7px;right:7px}.vac-message-actions-wrapper .vac-message-options svg{height:17px;width:17px;padding:5px;margin:-5px}.vac-message-actions-wrapper .vac-message-emojis{position:absolute;top:6px;right:30px}.vac-message-actions-wrapper .vac-menu-options{right:15px}.vac-message-actions-wrapper .vac-menu-left{right:-118px}@media only screen and (max-width: 768px){.vac-message-actions-wrapper .vac-options-container{right:3px}.vac-message-actions-wrapper .vac-menu-left{right:-50px}}.vac-message-files-container .vac-file-wrapper{position:relative;width:fit-content}.vac-message-files-container .vac-file-wrapper .vac-file-container{height:60px;width:60px;margin:3px 0 5px;cursor:pointer;transition:all .6s}.vac-message-files-container .vac-file-wrapper .vac-file-container:hover{opacity:.85}.vac-message-files-container .vac-file-wrapper .vac-file-container svg{height:30px;width:30px}.vac-message-files-container .vac-file-wrapper .vac-file-container.vac-file-container-progress{background-color:#0000004d}.vac-message-file-container{position:relative;z-index:0}.vac-message-file-container .vac-message-image-container{cursor:pointer}.vac-message-file-container .vac-image-buttons{position:absolute;width:100%;height:100%;border-radius:4px;background:linear-gradient(to bottom,rgba(0,0,0,0) 55%,rgba(0,0,0,.02) 60%,rgba(0,0,0,.05) 65%,rgba(0,0,0,.1) 70%,rgba(0,0,0,.2) 75%,rgba(0,0,0,.3) 80%,rgba(0,0,0,.5) 85%,rgba(0,0,0,.6) 90%,rgba(0,0,0,.7) 95%,rgba(0,0,0,.8) 100%)}.vac-message-file-container .vac-image-buttons svg{height:26px;width:26px}.vac-message-file-container .vac-image-buttons .vac-button-view,.vac-message-file-container .vac-image-buttons .vac-button-download{position:absolute;bottom:6px;left:7px}.vac-message-file-container .vac-image-buttons :first-child{left:40px}.vac-message-file-container .vac-image-buttons .vac-button-view{max-width:18px;bottom:8px}.vac-message-file-container .vac-video-container{width:350px;max-width:100%;margin:4px auto 5px;cursor:pointer}.vac-message-file-container .vac-video-container video{width:100%;height:100%;border-radius:4px}.vac-button-reaction{display:inline-flex;align-items:center;border:var(--chat-message-border-style-reaction);outline:none;background:var(--chat-message-bg-color-reaction);border-radius:4px;margin:4px 2px 0;transition:.3s;padding:0 5px;font-size:18px;line-height:23px}.vac-button-reaction span{font-size:11px;font-weight:500;min-width:7px;color:var(--chat-message-color-reaction-counter)}.vac-button-reaction:hover{border:var(--chat-message-border-style-reaction-hover);background:var(--chat-message-bg-color-reaction-hover);cursor:pointer}.vac-button-reaction.vac-reaction-me{border:var(--chat-message-border-style-reaction-me);background:var(--chat-message-bg-color-reaction-me)}.vac-button-reaction.vac-reaction-me span{color:var(--chat-message-color-reaction-counter-me)}.vac-button-reaction.vac-reaction-me:hover{border:var(--chat-message-border-style-reaction-hover-me);background:var(--chat-message-bg-color-reaction-hover-me)}.vac-reply-message{background:var(--chat-message-bg-color-reply);border-radius:4px;margin:-1px -5px 8px;padding:8px 10px}.vac-reply-message .vac-reply-username{color:var(--chat-message-color-reply-username);font-size:12px;line-height:15px;margin-bottom:2px}.vac-reply-message .vac-image-reply-container{width:70px}.vac-reply-message .vac-image-reply-container .vac-message-image-reply{height:70px;width:70px;margin:4px auto 3px}.vac-reply-message .vac-video-reply-container{width:200px;max-width:100%}.vac-reply-message .vac-video-reply-container video{width:100%;height:100%;border-radius:4px}.vac-reply-message .vac-reply-content{font-size:12px;color:var(--chat-message-color-reply-content)}.vac-reply-message .vac-file-container{height:60px;width:60px}.vac-emoji-wrapper{position:relative;display:flex}.vac-emoji-wrapper .vac-emoji-reaction svg{height:19px;width:19px}.vac-emoji-wrapper .vac-emoji-picker{position:absolute;z-index:9999;bottom:32px;right:10px;width:300px;padding-top:4px;overflow:scroll;box-sizing:border-box;border-radius:.5rem;background:var(--chat-emoji-bg-color);box-shadow:0 1px 2px -2px #0000001a,0 1px 2px -1px #0000001a,0 1px 2px 1px #0000001a;scrollbar-width:none}.vac-emoji-wrapper .vac-emoji-picker::-webkit-scrollbar{display:none}.vac-emoji-wrapper .vac-emoji-picker.vac-picker-reaction{position:fixed;top:initial;right:initial}.vac-emoji-wrapper .vac-emoji-picker emoji-picker{height:100%;width:100%;--emoji-size: 1.2rem;--background: var(--chat-emoji-bg-color);--emoji-padding: .4rem;--border-color: var(--chat-sidemenu-border-color-search);--button-hover-background: var(--chat-sidemenu-bg-color-hover);--button-active-background: var(--chat-sidemenu-bg-color-hover)}.vac-format-message-wrapper .vac-format-container{display:inline}.vac-format-message-wrapper .vac-icon-deleted{height:14px;width:14px;vertical-align:middle;margin:-2px 2px 0 0;fill:var(--chat-message-color-deleted)}.vac-format-message-wrapper .vac-icon-deleted.vac-icon-deleted-room{margin:-3px 1px 0 0;fill:var(--chat-room-color-message)}.vac-format-message-wrapper .vac-image-link-container{background-color:var(--chat-message-bg-color-media);padding:8px;margin:2px auto;border-radius:4px}.vac-format-message-wrapper .vac-image-link{position:relative;background-color:var(--chat-message-bg-color-image)!important;background-size:contain;background-position:center center!important;background-repeat:no-repeat!important;height:150px;width:150px;max-width:100%;border-radius:4px;margin:0 auto}.vac-format-message-wrapper .vac-image-link-message{max-width:166px;font-size:12px}.vac-loader-wrapper.vac-container-center{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);z-index:9}.vac-loader-wrapper.vac-container-top{padding:21px}.vac-loader-wrapper.vac-container-top #vac-circle{height:20px;width:20px}.vac-loader-wrapper #vac-circle{margin:auto;height:28px;width:28px;border:3px rgba(0,0,0,.25) solid;border-top:3px var(--chat-color-spinner) solid;border-right:3px var(--chat-color-spinner) solid;border-bottom:3px var(--chat-color-spinner) solid;border-radius:50%;-webkit-animation:vac-spin 1s infinite linear;animation:vac-spin 1s infinite linear}@media only screen and (max-width: 768px){.vac-loader-wrapper #vac-circle{height:24px;width:24px}.vac-loader-wrapper.vac-container-top{padding:18px}.vac-loader-wrapper.vac-container-top #vac-circle{height:16px;width:16px}}@-webkit-keyframes vac-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}@keyframes vac-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}#vac-icon-search{fill:var(--chat-icon-color-search)}#vac-icon-add{fill:var(--chat-icon-color-add)}#vac-icon-toggle{fill:var(--chat-icon-color-toggle)}#vac-icon-menu{fill:var(--chat-icon-color-menu)}#vac-icon-close{fill:var(--chat-icon-color-close)}#vac-icon-close-image{fill:var(--chat-icon-color-close-image)}#vac-icon-file{fill:var(--chat-icon-color-file)}#vac-icon-paperclip{fill:var(--chat-icon-color-paperclip)}#vac-icon-close-outline{fill:var(--chat-icon-color-close-outline)}#vac-icon-close-outline-preview{fill:var(--chat-icon-color-close-preview)}#vac-icon-send{fill:var(--chat-icon-color-send)}#vac-icon-send-disabled{fill:var(--chat-icon-color-send-disabled)}#vac-icon-emoji{fill:var(--chat-icon-color-emoji)}#vac-icon-emoji-reaction{fill:var(--chat-icon-color-emoji-reaction)}#vac-icon-document{fill:var(--chat-icon-color-document)}#vac-icon-pencil{fill:var(--chat-icon-color-pencil)}#vac-icon-checkmark,#vac-icon-double-checkmark{fill:var(--chat-icon-color-checkmark)}#vac-icon-checkmark-seen,#vac-icon-double-checkmark-seen{fill:var(--chat-icon-color-checkmark-seen)}#vac-icon-eye{fill:var(--chat-icon-color-eye)}#vac-icon-dropdown-message{fill:var(--chat-icon-color-dropdown-message)}#vac-icon-dropdown-room{fill:var(--chat-icon-color-dropdown-room)}#vac-icon-dropdown-scroll{fill:var(--chat-icon-color-dropdown-scroll)}#vac-icon-audio-play{fill:var(--chat-icon-color-audio-play)}#vac-icon-audio-pause{fill:var(--chat-icon-color-audio-pause)}.vac-progress-wrapper{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);z-index:9}.vac-progress-wrapper circle{transition:stroke-dashoffset .35s;transform:rotate(-90deg);transform-origin:50% 50%}.vac-progress-wrapper .vac-progress-content{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);z-index:-1;margin-top:-2px;background-color:#000000b3;border-radius:50%}.vac-progress-wrapper .vac-progress-content .vac-progress-text{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);font-weight:700;color:#fff}.vac-progress-wrapper .vac-progress-content .vac-progress-text .vac-progress-pourcent{font-size:9px;font-weight:400}
`;const DS={name:"ChatContainer",components:{RoomsList:q4,Room:TS,MediaPreview:LS},props:{height:{type:String,default:"600px"},theme:{type:String,default:"light"},styles:{type:[Object,String],default:()=>({})},responsiveBreakpoint:{type:Number,default:900},singleRoom:{type:[Boolean,String],default:!1},roomsListOpened:{type:[Boolean,String],default:!0},textMessages:{type:[Object,String],default:()=>({})},currentUserId:{type:String,default:""},rooms:{type:[Array,String],default:()=>[]},roomsOrder:{type:String,default:"desc"},loadingRooms:{type:[Boolean,String],default:!1},roomsLoaded:{type:[Boolean,String],default:!1},roomId:{type:String,default:null},loadFirstRoom:{type:[Boolean,String],default:!0},messages:{type:[Array,String],default:()=>[]},messagesLoaded:{type:[Boolean,String],default:!1},roomActions:{type:[Array,String],default:()=>[]},menuActions:{type:[Array,String],default:()=>[]},messageActions:{type:[Array,String],default:()=>[{name:"replyMessage",title:"Reply"},{name:"editMessage",title:"Edit Message",onlyMe:!0},{name:"deleteMessage",title:"Delete Message",onlyMe:!0},{name:"selectMessages",title:"Select"}]},messageSelectionActions:{type:[Array,String],default:()=>[]},autoScroll:{type:[Object,String],default:()=>({send:{new:!0,newAfterScrollUp:!0},receive:{new:!0,newAfterScrollUp:!1}})},customSearchRoomEnabled:{type:[Boolean,String],default:!1},showSearch:{type:[Boolean,String],default:!0},showAddRoom:{type:[Boolean,String],default:!0},showSendIcon:{type:[Boolean,String],default:!0},showFiles:{type:[Boolean,String],default:!0},showAudio:{type:[Boolean,String],default:!0},audioBitRate:{type:Number,default:128},audioSampleRate:{type:Number,default:new(window.AudioContext||window.webkitAudioContext)().sampleRate},showEmojis:{type:[Boolean,String],default:!0},showReactionEmojis:{type:[Boolean,String],default:!0},showNewMessagesDivider:{type:[Boolean,String],default:!0},showFooter:{type:[Boolean,String],default:!0},textFormatting:{type:[Object,String],default:()=>({disabled:!1})},linkOptions:{type:[Object,String],default:()=>({disabled:!1,target:"_blank",rel:null})},roomInfoEnabled:{type:[Boolean,String],default:!1},textareaActionEnabled:{type:[Boolean,String],default:!1},textareaAutoFocus:{type:[Boolean,String],default:!0},userTagsEnabled:{type:[Boolean,String],default:!0},emojisSuggestionEnabled:{type:[Boolean,String],default:!0},roomMessage:{type:String,default:""},scrollDistance:{type:Number,default:60},acceptedFiles:{type:String,default:"*"},captureFiles:{type:String,default:""},multipleFiles:{type:[Boolean,String],default:!0},templatesText:{type:[Array,String],default:()=>[]},mediaPreviewEnabled:{type:[Boolean,String],default:!0},usernameOptions:{type:[Object,String],default:()=>({minUsers:3,currentUser:!1})},emojiDataSource:{type:String,default:void 0}},emits:["toggle-rooms-list","room-info","fetch-messages","send-message","edit-message","delete-message","open-file","open-user-tag","open-failed-message","menu-action-handler","message-action-handler","send-message-reaction","typing-message","textarea-action-handler","fetch-more-rooms","add-room","search-room","room-action-handler","message-selection-action-handler"],data(){return{slots:[],room:{},loadingMoreRooms:!1,showRoomsList:!0,isMobile:!1,showMediaPreview:!1,previewFile:{}}},computed:{t(){return{...OS,...this.textMessagesCasted}},cssVars(){const e=FS[this.theme],t={};return Object.keys(e).map(n=>{t[n]={...e[n],...this.stylesCasted[n]||{}}}),VS(t)},orderedRooms(){return this.roomsCasted.slice().sort((e,t)=>{const n=e.index||0,a=t.index||0;return this.roomsOrder==="asc"?n<a?-1:a<n?1:0:n>a?-1:a>n?1:0})},singleRoomCasted(){return this.castBoolean(this.singleRoom)},roomsListOpenedCasted(){return this.castBoolean(this.roomsListOpened)},loadingRoomsCasted(){return this.castBoolean(this.loadingRooms)},roomsLoadedCasted(){return this.castBoolean(this.roomsLoaded)},loadFirstRoomCasted(){return this.castBoolean(this.loadFirstRoom)},messagesLoadedCasted(){return this.castBoolean(this.messagesLoaded)},multipleFilesCasted(){return this.castBoolean(this.multipleFiles)},showSearchCasted(){return this.castBoolean(this.showSearch)},showAddRoomCasted(){return this.castBoolean(this.showAddRoom)},showSendIconCasted(){return this.castBoolean(this.showSendIcon)},showFilesCasted(){return this.castBoolean(this.showFiles)},showAudioCasted(){return this.castBoolean(this.showAudio)},showEmojisCasted(){return this.castBoolean(this.showEmojis)},showReactionEmojisCasted(){return this.castBoolean(this.showReactionEmojis)},showNewMessagesDividerCasted(){return this.castBoolean(this.showNewMessagesDivider)},showFooterCasted(){return this.castBoolean(this.showFooter)},roomInfoEnabledCasted(){return this.castBoolean(this.roomInfoEnabled)},textareaActionEnabledCasted(){return this.castBoolean(this.textareaActionEnabled)},textareaAutoFocusCasted(){return this.castBoolean(this.textareaAutoFocus)},userTagsEnabledCasted(){return this.castBoolean(this.userTagsEnabled)},emojisSuggestionEnabledCasted(){return this.castBoolean(this.emojisSuggestionEnabled)},mediaPreviewEnabledCasted(){return this.castBoolean(this.mediaPreviewEnabled)},roomsCasted(){return this.castArray(this.rooms)},messagesCasted(){return this.castArray(this.messages)},roomActionsCasted(){return this.castArray(this.roomActions)},menuActionsCasted(){return this.castArray(this.menuActions)},messageActionsCasted(){return this.castArray(this.messageActions)},messageSelectionActionsCasted(){return this.castArray(this.messageSelectionActions)},templatesTextCasted(){return this.castArray(this.templatesText)},stylesCasted(){return this.castObject(this.styles)},textMessagesCasted(){return this.castObject(this.textMessages)},autoScrollCasted(){return this.castObject(this.autoScroll)},textFormattingCasted(){return this.castObject(this.textFormatting)},linkOptionsCasted(){return this.castObject(this.linkOptions)},usernameOptionsCasted(){return this.castObject(this.usernameOptions)}},watch:{roomsCasted:{immediate:!0,deep:!0,handler(e,t){if((!e[0]||!e.find(n=>n.roomId===this.room.roomId))&&(this.showRoomsList=!0),!this.loadingMoreRooms&&this.loadFirstRoomCasted&&e[0]&&(!t||e.length!==t.length))if(this.roomId){const n=e.find(a=>a.roomId===this.roomId)||{};this.fetchRoom({room:n})}else!this.isMobile||this.singleRoomCasted?this.fetchRoom({room:this.orderedRooms[0]}):this.showRoomsList=!0}},loadingRoomsCasted(e){e&&(this.room={})},roomId:{immediate:!0,handler(e,t){if(e&&!this.loadingRoomsCasted&&this.roomsCasted.length){const n=this.roomsCasted.find(a=>a.roomId===e);this.fetchRoom({room:n})}else t&&!e&&(this.room={})}},room(e){!e||Object.entries(e).length===0||(Qw(e),e.users.forEach(t=>{Jw(t)}))},roomsListOpenedCasted:{immediate:!0,handler(e){this.showRoomsList=e}}},created(){this.updateResponsive(),window.addEventListener("resize",e=>{e.isTrusted&&this.updateResponsive()})},updated(){const e=document.querySelectorAll("[slot]");this.slots.length!==e.length&&(this.slots=e)},methods:{castBoolean(e){return e==="true"||e===!0},castArray(e){return e?Array.isArray(e)?e:JSON.parse(e):[]},castObject(e){return e?typeof e=="object"?e:JSON.parse(e):{}},updateResponsive(){this.isMobile=window.innerWidth<Number(this.responsiveBreakpoint)},toggleRoomsList(){this.showRoomsList=!this.showRoomsList,this.isMobile&&(this.room={}),this.$emit("toggle-rooms-list",{opened:this.showRoomsList})},fetchRoom({room:e}){this.room=e,this.fetchMessages({reset:!0}),this.isMobile&&(this.showRoomsList=!1)},fetchMoreRooms(){this.$emit("fetch-more-rooms")},roomInfo(){this.$emit("room-info",this.room)},addRoom(){this.$emit("add-room")},searchRoom(e){this.$emit("search-room",{value:e,roomId:this.room.roomId})},fetchMessages(e){this.$emit("fetch-messages",{room:this.room,options:e})},sendMessage(e){this.$emit("send-message",{...e,roomId:this.room.roomId})},editMessage(e){this.$emit("edit-message",{...e,roomId:this.room.roomId})},deleteMessage(e){this.$emit("delete-message",{message:e,roomId:this.room.roomId})},openFile({message:e,file:t}){this.mediaPreviewEnabledCasted&&t.action==="preview"?(this.previewFile=t.file,this.showMediaPreview=!0):this.$emit("open-file",{message:e,file:t})},openUserTag({user:e}){this.$emit("open-user-tag",{user:e})},openFailedMessage({message:e}){this.$emit("open-failed-message",{message:e,roomId:this.room.roomId})},menuActionHandler(e){this.$emit("menu-action-handler",{action:e,roomId:this.room.roomId})},roomActionHandler({action:e,roomId:t}){this.$emit("room-action-handler",{action:e,roomId:t})},messageActionHandler(e){this.$emit("message-action-handler",{...e,roomId:this.room.roomId})},messageSelectionActionHandler(e){this.$emit("message-selection-action-handler",{...e,roomId:this.room.roomId})},sendMessageReaction(e){this.$emit("send-message-reaction",{...e,roomId:this.room.roomId})},typingMessage(e){this.$emit("typing-message",{message:e,roomId:this.room.roomId})},textareaActionHandler(e){this.$emit("textarea-action-handler",{message:e,roomId:this.room.roomId})}}},jS={class:"vac-chat-container"};function NS(e,t,n,a,s,i){const r=dt("rooms-list"),o=dt("room"),m=dt("media-preview");return oe(),Ce("div",{class:"vac-card-window",style:Qt([{height:n.height},i.cssVars])},[Pe("div",jS,[i.singleRoomCasted?Ue("",!0):(oe(),Pt(r,{key:0,"current-user-id":n.currentUserId,rooms:i.orderedRooms,"loading-rooms":i.loadingRoomsCasted,"rooms-loaded":i.roomsLoadedCasted,room:s.room,"room-actions":i.roomActionsCasted,"custom-search-room-enabled":n.customSearchRoomEnabled,"text-messages":i.t,"show-search":i.showSearchCasted,"show-add-room":i.showAddRoomCasted,"show-rooms-list":s.showRoomsList&&i.roomsListOpenedCasted,"text-formatting":i.textFormattingCasted,"link-options":i.linkOptionsCasted,"is-mobile":s.isMobile,"scroll-distance":n.scrollDistance,onFetchRoom:i.fetchRoom,onFetchMoreRooms:i.fetchMoreRooms,onLoadingMoreRooms:t[0]||(t[0]=u=>s.loadingMoreRooms=u),onAddRoom:i.addRoom,onSearchRoom:i.searchRoom,onRoomActionHandler:i.roomActionHandler},$t({_:2},[St(s.slots,u=>({name:u.slot,fn:mt(d=>[qe(e.$slots,u.slot,Nt(Dt(d)))])}))]),1032,["current-user-id","rooms","loading-rooms","rooms-loaded","room","room-actions","custom-search-room-enabled","text-messages","show-search","show-add-room","show-rooms-list","text-formatting","link-options","is-mobile","scroll-distance","onFetchRoom","onFetchMoreRooms","onAddRoom","onSearchRoom","onRoomActionHandler"])),Xe(o,{"current-user-id":n.currentUserId,rooms:i.roomsCasted,"room-id":s.room.roomId||"","load-first-room":i.loadFirstRoomCasted,messages:i.messagesCasted,"room-message":n.roomMessage,"messages-loaded":i.messagesLoadedCasted,"menu-actions":i.menuActionsCasted,"message-actions":i.messageActionsCasted,"message-selection-actions":i.messageSelectionActionsCasted,"auto-scroll":i.autoScrollCasted,"show-send-icon":i.showSendIconCasted,"show-files":i.showFilesCasted,"show-audio":i.showAudioCasted,"audio-bit-rate":n.audioBitRate,"audio-sample-rate":n.audioSampleRate,"show-emojis":i.showEmojisCasted,"show-reaction-emojis":i.showReactionEmojisCasted,"show-new-messages-divider":i.showNewMessagesDividerCasted,"show-footer":i.showFooterCasted,"text-messages":i.t,"single-room":i.singleRoomCasted,"show-rooms-list":s.showRoomsList&&i.roomsListOpenedCasted,"text-formatting":i.textFormattingCasted,"link-options":i.linkOptionsCasted,"is-mobile":s.isMobile,"loading-rooms":i.loadingRoomsCasted,"room-info-enabled":i.roomInfoEnabledCasted,"textarea-action-enabled":i.textareaActionEnabledCasted,"textarea-auto-focus":i.textareaAutoFocusCasted,"user-tags-enabled":i.userTagsEnabledCasted,"emojis-suggestion-enabled":i.emojisSuggestionEnabledCasted,"scroll-distance":n.scrollDistance,"accepted-files":n.acceptedFiles,"capture-files":n.captureFiles,"multiple-files":i.multipleFilesCasted,"templates-text":i.templatesTextCasted,"username-options":i.usernameOptionsCasted,"emoji-data-source":n.emojiDataSource,onToggleRoomsList:i.toggleRoomsList,onRoomInfo:i.roomInfo,onFetchMessages:i.fetchMessages,onSendMessage:i.sendMessage,onEditMessage:i.editMessage,onDeleteMessage:i.deleteMessage,onOpenFile:i.openFile,onOpenUserTag:i.openUserTag,onOpenFailedMessage:i.openFailedMessage,onMenuActionHandler:i.menuActionHandler,onMessageActionHandler:i.messageActionHandler,onMessageSelectionActionHandler:i.messageSelectionActionHandler,onSendMessageReaction:i.sendMessageReaction,onTypingMessage:i.typingMessage,onTextareaActionHandler:i.textareaActionHandler},$t({_:2},[St(s.slots,u=>({name:u.slot,fn:mt(d=>[qe(e.$slots,u.slot,Nt(Dt(d)))])}))]),1032,["current-user-id","rooms","room-id","load-first-room","messages","room-message","messages-loaded","menu-actions","message-actions","message-selection-actions","auto-scroll","show-send-icon","show-files","show-audio","audio-bit-rate","audio-sample-rate","show-emojis","show-reaction-emojis","show-new-messages-divider","show-footer","text-messages","single-room","show-rooms-list","text-formatting","link-options","is-mobile","loading-rooms","room-info-enabled","textarea-action-enabled","textarea-auto-focus","user-tags-enabled","emojis-suggestion-enabled","scroll-distance","accepted-files","capture-files","multiple-files","templates-text","username-options","emoji-data-source","onToggleRoomsList","onRoomInfo","onFetchMessages","onSendMessage","onEditMessage","onDeleteMessage","onOpenFile","onOpenUserTag","onOpenFailedMessage","onMenuActionHandler","onMessageActionHandler","onMessageSelectionActionHandler","onSendMessageReaction","onTypingMessage","onTextareaActionHandler"])]),Xe(mn,{name:"vac-fade-preview",appear:""},{default:mt(()=>[s.showMediaPreview?(oe(),Pt(m,{key:0,file:s.previewFile,onCloseMediaPreview:t[1]||(t[1]=u=>s.showMediaPreview=!1)},$t({_:2},[St(s.slots,u=>({name:u.slot,fn:mt(d=>[qe(e.$slots,u.slot,Nt(Dt(d)))])}))]),1032,["file"])):Ue("",!0)]),_:3})],4)}var $S=Xt(DS,[["render",NS],["styles",[PS]]]);const HS=E2($S),mm="vue-advanced-chat";function zS(){customElements.get(mm)||customElements.define(mm,HS)}const ka=au("aetherTerminalService",()=>{const e=he({isConnected:!1,isConnecting:!1,isReconnecting:!1,reconnectAttempts:0,maxReconnectAttempts:5,latency:0}),t=he(null),n=he({id:"",isActive:!1,isPaused:!1,isReconnecting:!1,lastActivity:new Date,supervisorControlled:!1,aiMonitoring:!0}),a=he([]),s=he([]),i=he([]),r=he(!1),o=he({isActive:!0,monitoringRules:["System file modification detection","Privilege escalation monitoring","Network configuration changes","Service management operations","Data destruction prevention"],currentProcedure:"System maintenance checklist",procedureStep:1,totalSteps:5,lastAnalysis:new Date,riskAssessment:"low",suggestedActions:[]}),m=he([]),u=he({onShellOutput:[],onChatMessage:[],onAskAI:[]}),d=ee(()=>a.value.length>0),l=ee(()=>n.value.isPaused||n.value.isReconnecting||d.value||!e.value.isConnected),c=ee(()=>a.value.filter(f=>f.riskLevel==="critical")),v=ee(()=>e.value.isConnected?"connected":e.value.isConnecting?"connecting":e.value.isReconnecting?"reconnecting":"disconnected"),h=f=>{t.value=f,console.log("Setting socket value:",f)},A=()=>{if(!t.value)return;const f=t.value;f.on("connect",()=>{console.log("🟢 STORE: Socket connected successfully!"),console.log("🟢 STORE: Socket ID:",f.id),e.value.isConnected=!0,e.value.isConnecting=!1,e.value.isReconnecting=!1,e.value.reconnectAttempts=0,e.value.lastConnected=new Date,e.value.connectionError=void 0,U("[SYSTEM] Connected to AetherTerm service"),console.log("🔧 STORE: Emitting create_terminal event..."),f.emit("create_terminal",{session:n.value.id||"",user:"",path:""}),console.log("✅ STORE: create_terminal event sent")}),f.on("disconnect",x=>{e.value.isConnected=!1,e.value.lastDisconnected=new Date,e.value.connectionError=x,U(`[SYSTEM] Disconnected from AetherTerm service: ${x}`),x!=="io client disconnect"&&T()}),f.on("reconnect",x=>{e.value.isReconnecting=!1,e.value.reconnectAttempts=x,U(`[SYSTEM] Reconnected after ${x} attempts`)}),f.on("reconnect_attempt",x=>{e.value.reconnectAttempts=x,U(`[SYSTEM] Reconnection attempt ${x}`)}),f.on("reconnect_failed",()=>{e.value.isReconnecting=!1,e.value.connectionError="Max reconnection attempts reached",U("[SYSTEM] Failed to reconnect after maximum attempts")}),f.on("connect_error",x=>{e.value.connectionError=x.message,U(`[SYSTEM] Connection error: ${x.message}`)}),f.on("terminal_output",x=>{console.log("Received terminal_output:",x),x&&x.data&&u.value.onShellOutput.forEach(H=>H(x.data))}),f.on("terminal_ready",x=>{console.log("🟢 STORE: Terminal ready event received:",x),console.log("🔧 STORE: Setting session ID to:",x.session),n.value.id=x.session||"",n.value.isActive=!0,console.log("✅ STORE: Session updated:",{id:n.value.id,isActive:n.value.isActive})}),f.on("terminal_error",x=>{console.log("Terminal error:",x),U(`[ERROR] ${x.error||"Unknown terminal error"}`)}),f.on("terminal_closed",x=>{console.log("Terminal closed:",x),n.value.isActive=!1,U("[SYSTEM] Terminal session closed")}),f.on("shell_output",x=>{console.log("Received shell_output:",x),u.value.onShellOutput.forEach(H=>H(x))}),f.on("admin_pause_terminal",x=>{console.log("Received admin_pause_terminal event",x),b(x.reason)}),f.on("admin_resume_terminal",()=>{console.log("Received admin_resume_terminal event"),y()}),f.on("command_approval",x=>{x.approved?M(x.commandId):V(x.commandId,x.reason||"Rejected by admin")}),f.on("chat_message",x=>{u.value.onChatMessage.forEach(H=>H(x))})},T=()=>{e.value.reconnectAttempts>=e.value.maxReconnectAttempts||(e.value.isReconnecting=!0,n.value.isReconnecting=!0,U("[SYSTEM] Starting reconnection process..."))},k=()=>{if(console.log("🔌 STORE: Connect function called"),console.log("🔌 STORE: Current state:",{isConnected:e.value.isConnected,isConnecting:e.value.isConnecting,socketExists:!!t.value,socketConnected:t.value?.connected}),e.value.isConnected||e.value.isConnecting){console.log("⚠️ STORE: Already connected or connecting, returning");return}e.value.isConnecting=!0,U("[SYSTEM] Connecting to AetherTerm service..."),console.log("🔧 STORE: Setting connecting state to true"),t.value?(console.log("🔧 STORE: Socket exists, setting up listeners..."),A(),t.value.connected?console.log("✅ STORE: Socket already connected"):(console.log("🔧 STORE: Socket not connected, initiating connection..."),t.value.connect())):console.error("❌ STORE: No socket available!")},p=f=>{u.value.onShellOutput.push(f)},L=f=>{u.value.onChatMessage.push(f)},O=f=>{if(f){const x=u.value.onShellOutput.indexOf(f);x!==-1&&u.value.onShellOutput.splice(x,1)}else u.value.onShellOutput=[]},g=f=>{if(f){const x=u.value.onChatMessage.indexOf(f);x!==-1&&u.value.onChatMessage.splice(x,1)}else u.value.onChatMessage=[]},B=f=>{u.value.onAskAI.push(f)},R=f=>{if(f){const x=u.value.onAskAI.indexOf(f);x!==-1&&u.value.onAskAI.splice(x,1)}else u.value.onAskAI=[]},C=f=>{console.log("AetherTerminalServiceStore: Triggering Ask AI with text:",f),u.value.onAskAI.forEach(x=>x(f))},I=f=>{n.value.id=f,n.value.isActive=!0,n.value.lastActivity=new Date,U(`[SYSTEM] Terminal session initialized: ${f}`)},b=f=>{n.value.isPaused=!0,r.value=!0,U(`[SYSTEM] Terminal paused: ${f}`)},y=()=>{n.value.isPaused=!1,r.value=!1,U("[SYSTEM] Terminal resumed")},_=f=>{const x=Date.now().toString();let H="low",F="";return m.value.some(me=>f.toLowerCase().includes(me.toLowerCase()))?(H="critical",F="This command may cause system damage or data loss. Consider using safer alternatives."):f.includes("sudo")?(H="high",F="This command requires elevated privileges. Ensure you understand its implications."):(f.includes("chmod")||f.includes("chown"))&&(H="medium",F="This command modifies file permissions. Verify the target files and permissions."),{id:x,command:f,timestamp:new Date,status:H==="critical"?"pending":"approved",riskLevel:H,aiSuggestion:F,source:"user"}},w=f=>{const x=_(f);return x.status==="pending"?(a.value.push(x),U(`[AI] Command blocked for review: ${f}`),U(`[AI] Reason: ${x.aiSuggestion}`),t.value&&t.value.emit("command_review_required",{commandId:x.id,command:x.command,riskLevel:x.riskLevel,aiSuggestion:x.aiSuggestion}),!1):(s.value.push(x),n.value.lastActivity=new Date,t.value&&t.value.emit("terminal_command",{command:x.command,commandId:x.id}),!0)},E=f=>{n.value.lastActivity=new Date,t.value&&t.value.emit("terminal_input",{session:n.value.id,data:f})},M=f=>{const x=a.value.findIndex(H=>H.id===f);if(x!==-1){const H=a.value[x];return H.status="approved",s.value.push(H),a.value.splice(x,1),U(`[ADMIN] Command approved: ${H.command}`),t.value&&t.value.emit("terminal_command",{command:H.command,commandId:H.id}),H}return null},V=(f,x)=>{const H=a.value.findIndex(F=>F.id===f);if(H!==-1){const F=a.value[H];F.status="rejected",F.rejectionReason=x,s.value.push(F),a.value.splice(H,1),U(`[ADMIN] Command rejected: ${F.command}`),U(`[ADMIN] Reason: ${x}`)}},q=f=>{t.value&&t.value.emit("chat_message",f)},$=(f,x)=>{t.value&&n.value.id&&(console.log(`Sending terminal resize: ${f}x${x} for session ${n.value.id}`),t.value.emit("terminal_resize",{session:n.value.id,cols:f,rows:x}))},U=f=>{console.log("addToOutput called with:",f),i.value.push(`[${new Date().toLocaleTimeString()}] ${f}`),i.value.length>1e3&&(i.value=i.value.slice(-1e3))};return{connectionState:e,socket:t,session:n,pendingCommands:a,commandHistory:s,outputBuffer:i,isSupervisorLocked:r,dangerousCommands:m,aiMonitoring:o,hasPendingCommands:d,isTerminalBlocked:l,criticalCommandsPending:c,connectionStatus:v,connect:k,startReconnection:T,onShellOutput:p,onChatMessage:L,onAskAI:B,offShellOutput:O,offChatMessage:g,offAskAI:R,triggerAskAI:C,initializeSession:I,pauseTerminal:b,resumeTerminal:y,analyzeCommand:_,submitCommand:w,sendInput:E,approveCommand:M,rejectCommand:V,sendChatMessage:q,sendResize:$,addToOutput:U,setSocket:h}});function vl(e){try{const t=e.split(".");if(t.length!==3)return null;const n=t[1],a=atob(n.replace(/-/g,"+").replace(/_/g,"/"));return JSON.parse(a)}catch(t){return console.error("Failed to decode JWT:",t),null}}function S0(e){return e.exp?Date.now()>=e.exp*1e3:!0}function hl(){const e=localStorage.getItem("jwt_token")||localStorage.getItem("auth_token");if(e)return e;const t=sessionStorage.getItem("jwt_token")||sessionStorage.getItem("auth_token");if(t)return t;const a=new URLSearchParams(window.location.search).get("token");if(a)return a;const s=document.cookie.split(";");for(const i of s){const[r,o]=i.trim().split("=");if(r==="jwt_token"||r==="auth_token")return decodeURIComponent(o)}return null}function k0(){const e=hl();if(!e)return!1;const t=vl(e);return!t||S0(t)?!1:!!(t.isSupervisor===!0||t.roles?.includes("supervisor")||t.roles?.includes("admin")||t.permissions?.includes("terminal:supervise")||t.permissions?.includes("admin:all"))}function US(){const e=hl();if(!e)return null;const t=vl(e);return!t||S0(t)?null:{email:t.email,roles:t.roles,isSupervisor:k0()}}const qS={key:0,class:"supervisor-control-panel"},WS={class:"panel-header"},YS={class:"control-section priority"},XS={class:"status-grid"},GS={class:"status-item"},KS={class:"value"},ZS={class:"status-item"},QS={class:"status-item"},JS={class:"status-item"},ek={class:"value"},tk={class:"control-section"},nk={class:"ai-status"},ak={key:0,class:"current-procedure"},sk={class:"procedure-info"},ik={class:"procedure-name"},rk={class:"procedure-progress"},ok={class:"progress-bar"},lk={class:"progress-text"},ck={class:"monitoring-rules"},uk={class:"rules-list"},dk={key:1,class:"suggested-actions"},mk={class:"suggestions-list"},fk={class:"control-section"},vk={class:"control-buttons"},hk={key:0,class:"control-section"},gk={class:"pending-commands-list"},pk={class:"command-info"},_k={class:"command-header"},bk={class:"command-text"},yk={class:"command-meta"},wk={class:"timestamp"},Sk={key:0,class:"ai-analysis"},kk={class:"analysis-content"},xk={class:"interactive-dialog"},Tk={class:"dialog-options"},Ck=["onClick"],Ak=["onClick"],Ek={class:"control-section"},Mk={class:"command-history"},Rk={class:"command-text"},Ik={class:"command-meta"},Bk={class:"timestamp"},Lk={key:0,class:"rejection-reason"},Ok={class:"command-to-reject"},Fk={class:"form-group"},Vk={key:1,class:"access-denied"},Pk={class:"access-denied-content"},Dk={key:0,class:"auth-error"},jk={key:1,class:"privilege-error"},Nk={class:"user-info"},$k=Jt({__name:"SupervisorControlPanel",setup(e){const t=ka(),n=he(null);gn(()=>{n.value=US(),console.log("=== JWT Authentication Debug ==="),console.log("User info loaded:",n.value);const h=hl();if(h){console.log("JWT token found:",h.substring(0,50)+"...");const A=vl(h);console.log("JWT payload:",A),console.log("Is supervisor?",k0())}else console.log("No JWT token found");console.log("=================================")});const a=he(!1),s=he(null),i=he(""),r=ee(()=>{switch(t.connectionStatus){case"connected":return"status-connected";case"connecting":return"status-connecting";case"reconnecting":return"status-reconnecting";default:return"status-disconnected"}}),o=ee(()=>t.commandHistory.slice(-10).reverse()),m=()=>{t.session.isPaused?t.resumeTerminal():t.pauseTerminal("Paused by supervisor")},u=h=>{t.approveCommand(h)},d=h=>{s.value=h,i.value="",a.value=!0},l=()=>{a.value=!1,s.value=null,i.value=""},c=()=>{s.value&&i.value.trim()&&(t.rejectCommand(s.value.id,i.value.trim()),l())},v=h=>new Date(h).toLocaleTimeString();return(h,A)=>n.value?.isSupervisor?(fe(),_e("div",qS,[S("div",WS,[A[2]||(A[2]=S("h3",null,"Supervisor Control Panel",-1)),S("div",{class:Me(["connection-status",r.value])},ie(xt(t).connectionStatus),3)]),S("div",YS,[A[10]||(A[10]=S("h4",null,"System Status",-1)),S("div",XS,[S("div",GS,[A[3]||(A[3]=S("span",{class:"label"},"Session ID:",-1)),S("span",KS,ie(xt(t).session.id),1),A[4]||(A[4]=Zt(" ------- "))]),S("div",ZS,[A[5]||(A[5]=S("span",{class:"label"},"Supervisor Control:",-1)),S("span",{class:Me(["value",{active:xt(t).session.supervisorControlled}])},ie(xt(t).session.supervisorControlled?"Enabled":"Disabled"),3),A[6]||(A[6]=Zt(" ------- "))]),S("div",QS,[A[7]||(A[7]=S("span",{class:"label"},"AIRisk:",-1)),S("span",{class:Me(["value",`risk-${xt(t).aiMonitoring.riskAssessment}`])},ie(xt(t).aiMonitoring.riskAssessment.toUpperCase()),3)]),A[9]||(A[9]=Zt(" ------- ")),S("div",JS,[A[8]||(A[8]=S("span",{class:"label"},"Procedure Status:",-1)),S("span",ek,ie(xt(t).aiMonitoring.procedureStep)+"/"+ie(xt(t).aiMonitoring.totalSteps),1)])])]),S("div",tk,[A[17]||(A[17]=S("h4",null,"AI Monitoring Status",-1)),S("div",nk,[S("div",{class:Me(["monitoring-indicator",{active:xt(t).aiMonitoring.isActive}])},[A[11]||(A[11]=S("span",{class:"indicator-dot"},null,-1)),Zt(" "+ie(xt(t).aiMonitoring.isActive?"Active":"Inactive"),1)],2),xt(t).aiMonitoring.currentProcedure?(fe(),_e("div",ak,[A[12]||(A[12]=S("h5",null,"Current Procedure",-1)),S("div",sk,[S("div",ik,ie(xt(t).aiMonitoring.currentProcedure),1),S("div",rk,[S("div",ok,[S("div",{class:"progress-fill",style:vt({width:xt(t).aiMonitoring.procedureStep/xt(t).aiMonitoring.totalSteps*100+"%"})},null,4)]),S("span",lk," Step "+ie(xt(t).aiMonitoring.procedureStep)+" of "+ie(xt(t).aiMonitoring.totalSteps),1)])])])):nt("",!0),S("div",ck,[A[14]||(A[14]=S("h5",null,"Active Monitoring Rules",-1)),S("div",uk,[(fe(!0),_e(lt,null,Ut(xt(t).aiMonitoring.monitoringRules,T=>(fe(),_e("div",{key:T,class:"rule-item"},[A[13]||(A[13]=S("span",{class:"rule-indicator"},"✓",-1)),Zt(" "+ie(T),1)]))),128))])]),xt(t).aiMonitoring.suggestedActions.length>0?(fe(),_e("div",dk,[A[16]||(A[16]=S("h5",null,"AI Suggestions",-1)),S("div",mk,[(fe(!0),_e(lt,null,Ut(xt(t).aiMonitoring.suggestedActions,T=>(fe(),_e("div",{key:T,class:"suggestion-item"},[A[15]||(A[15]=S("span",{class:"suggestion-icon"},"💡",-1)),Zt(" "+ie(T),1)]))),128))])])):nt("",!0)])]),S("div",fk,[A[18]||(A[18]=S("h4",null,"Terminal Control",-1)),S("div",vk,[S("button",{onClick:m,class:Me([{active:xt(t).session.isPaused},"control-btn pause-btn"])},ie(xt(t).session.isPaused?"Resume":"Pause")+" Terminal ",3)])]),xt(t).hasPendingCommands?(fe(),_e("div",hk,[S("h4",null,"AI Command Review ("+ie(xt(t).pendingCommands.length)+")",1),S("div",gk,[(fe(!0),_e(lt,null,Ut(xt(t).pendingCommands,T=>(fe(),_e("div",{key:T.id,class:"pending-command-item"},[S("div",pk,[S("div",_k,[S("div",bk,[S("code",null,ie(T.command),1)]),S("div",yk,[S("span",{class:Me(["risk-level",T.riskLevel])},ie(T.riskLevel.toUpperCase()),3),S("span",wk,ie(v(T.timestamp)),1)])]),T.aiSuggestion?(fe(),_e("div",Sk,[A[19]||(A[19]=S("div",{class:"analysis-header"},[S("span",{class:"ai-icon"},"🤖"),S("strong",null,"AI Analysis & Recommendation")],-1)),S("div",kk,ie(T.aiSuggestion),1)])):nt("",!0),S("div",xk,[A[20]||(A[20]=S("div",{class:"dialog-question"},[S("strong",null,"Do you want to proceed with this command?")],-1)),S("div",Tk,[S("button",{onClick:k=>u(T.id),class:"action-btn approve-btn"}," ✓ Yes, Execute ",8,Ck),S("button",{onClick:k=>d(T),class:"action-btn reject-btn"}," ✗ No, Block ",8,Ak)])])])]))),128))])])):nt("",!0),S("div",Ek,[A[22]||(A[22]=S("h4",null,"Recent Commands",-1)),S("div",Mk,[(fe(!0),_e(lt,null,Ut(o.value,T=>(fe(),_e("div",{key:T.id,class:Me(["history-item",T.status])},[S("div",Rk,[S("code",null,ie(T.command),1)]),S("div",Ik,[S("span",{class:Me(["status",T.status])},ie(T.status.toUpperCase()),3),S("span",Bk,ie(v(T.timestamp)),1)]),T.rejectionReason?(fe(),_e("div",Lk,[A[21]||(A[21]=S("strong",null,"Rejected:",-1)),Zt(" "+ie(T.rejectionReason),1)])):nt("",!0)],2))),128))])]),a.value?(fe(),_e("div",{key:1,class:"modal-overlay",onClick:l},[S("div",{class:"modal-content",onClick:A[1]||(A[1]=Hn(()=>{},["stop"]))},[A[24]||(A[24]=S("h3",null,"Reject Command",-1)),S("div",Ok,[S("code",null,ie(s.value?.command),1)]),S("div",Fk,[A[23]||(A[23]=S("label",null,"Rejection Reason:",-1)),on(S("textarea",{"onUpdate:modelValue":A[0]||(A[0]=T=>i.value=T),placeholder:"Enter reason for rejection...",rows:"3"},null,512),[[Er,i.value]])]),S("div",{class:"modal-actions"},[S("button",{onClick:c,class:"action-btn reject-btn"}," Reject Command "),S("button",{onClick:l,class:"action-btn cancel-btn"},"Cancel")])])])):nt("",!0)])):(fe(),_e("div",Vk,[S("div",Pk,[n.value?(fe(),_e("div",jk,[A[28]||(A[28]=S("h3",null,"🔒 Access Restricted",-1)),A[29]||(A[29]=S("p",null,"Supervisor privileges required to access this panel.",-1)),S("div",Nk,[S("p",null,[A[26]||(A[26]=S("strong",null,"Current user:",-1)),Zt(" "+ie(n.value.email||"Unknown"),1)]),S("p",null,[A[27]||(A[27]=S("strong",null,"Roles:",-1)),Zt(" "+ie(n.value.roles?.join(", ")||"None"),1)])]),A[30]||(A[30]=S("div",{class:"privilege-requirements"},[S("h4",null,"Required privileges (any of):"),S("ul",null,[S("li",null,[S("code",null,"isSupervisor: true")]),S("li",null,[S("code",null,'roles: ["supervisor", "admin"]')]),S("li",null,[S("code",null,'permissions: ["terminal:supervise", "admin:all"]')])])],-1))])):(fe(),_e("div",Dk,A[25]||(A[25]=[S("h3",null,"🔑 Authentication Required",-1),S("p",null,"Please log in to access the Supervisor Control Panel.",-1),S("div",{class:"auth-details"},[S("p",null,"No valid JWT token found."),S("small",null,"Token sources checked: localStorage, sessionStorage, URL params, cookies")],-1)])))])]))}}),tn=(e,t)=>{const n=e.__vccOpts||e;for(const[a,s]of t)n[a]=s;return n},Hk=tn($k,[["__scopeId","data-v-026aca9c"]]),zk=au("chat",()=>{const e=he({id:"1",username:"User",role:"user",status:"online",permissions:{canControlTerminal:!1,canApproveCommands:!1,canViewLogs:!0},lastSeen:new Date}),t=he([{id:"general",name:"General Chat",type:"general",participants:[],unreadCount:0,isActive:!0,permissions:{canSendMessages:!0,canControlTerminal:!1,canViewHistory:!0}},{id:"terminal-control",name:"Terminal Control",type:"terminal-control",participants:[],unreadCount:0,isActive:!0,permissions:{canSendMessages:!0,canControlTerminal:!0,canViewHistory:!0}},{id:"ai-assistance",name:"AI Assistant",type:"ai-assistance",participants:[],unreadCount:0,isActive:!0,permissions:{canSendMessages:!0,canControlTerminal:!1,canViewHistory:!0}}]),n=he(new Map),a=he("general"),s=he(!1),i=he(!1),r=he(new Map);t.value.forEach(_=>{n.value.set(_.id,[])});const o=ee(()=>t.value.find(_=>_.id===a.value)),m=ee(()=>n.value.get(a.value)||[]),u=ee(()=>t.value.reduce((_,w)=>_+w.unreadCount,0)),d=ee(()=>t.value.flatMap(_=>_.participants).filter(_=>_.status==="online")),l=ee(()=>t.value.flatMap(_=>_.participants).filter(_=>_.role==="admin")),c=_=>{Object.assign(e.value,_)},v=_=>{s.value=_,_&&(i.value=!1)},h=_=>{i.value=_},A=_=>{const w=t.value.find(E=>E.id===_);w&&(a.value=_,w.unreadCount=0)},T=(_,w)=>{const E={...w,id:Date.now().toString()+Math.random().toString(36).substr(2,9),timestamp:new Date},M=n.value.get(_)||[];M.push(E),n.value.set(_,M);const V=t.value.find(q=>q.id===_);return V&&(V.lastMessage=E,_!==a.value&&w.senderId!==e.value.id&&V.unreadCount++),E},k=(_,w="text",E)=>T(a.value,{content:_,senderId:e.value.id,username:e.value.username,avatar:e.value.avatar,roomId:a.value,type:w,status:"sending",metadata:E}),p=(_,w)=>{for(const[E,M]of n.value.entries()){const V=M.find(q=>q.id===_);if(V){V.status=w;break}}},L=(_,w,E)=>T(_,{content:w,senderId:"system",username:"System",roomId:_,type:"system",status:"sent",metadata:E});return{currentUser:e,rooms:t,messages:n,activeRoomId:a,isConnected:s,isReconnecting:i,typingUsers:r,activeRoom:o,activeMessages:m,totalUnreadCount:u,onlineUsers:d,adminUsers:l,setCurrentUser:c,setConnectionStatus:v,setReconnecting:h,switchRoom:A,addMessage:T,sendMessage:k,updateMessageStatus:p,addSystemMessage:L,addCommandMessage:(_,w,E)=>T(_,{content:`Command: ${w}`,senderId:e.value.id,username:e.value.username,roomId:_,type:"command",status:"sent",metadata:{commandId:E}}),addUserToRoom:(_,w)=>{const E=t.value.find(M=>M.id===_);if(E){const M=E.participants.find(V=>V.id===w.id);M?Object.assign(M,w):(E.participants.push(w),L(_,`${w.username} joined the room`))}},removeUserFromRoom:(_,w)=>{const E=t.value.find(M=>M.id===_);if(E){const M=E.participants.findIndex(V=>V.id===w);if(M!==-1){const V=E.participants[M];E.participants.splice(M,1),L(_,`${V.username} left the room`)}}},updateUserStatus:(_,w)=>{t.value.forEach(E=>{const M=E.participants.find(V=>V.id===_);M&&(M.status=w,M.lastSeen=new Date)})},setUserTyping:(_,w,E)=>{const M=r.value.get(_)||[];if(E)M.includes(w)||M.push(w);else{const V=M.indexOf(w);V!==-1&&M.splice(V,1)}r.value.set(_,M)},getTypingUsers:_=>{const w=r.value.get(_)||[],E=t.value.find(M=>M.id===_);return E?w.map(M=>E.participants.find(V=>V.id===M)).filter(M=>M&&M.id!==e.value.id):[]},clearMessages:_=>{n.value.set(_,[])},markAllAsRead:_=>{const w=t.value.find(E=>E.id===_);w&&(w.unreadCount=0)}}}),Uk={class:"simple-chat-container"},qk={class:"chat-header"},Wk={class:"status-info"},Yk={key:0,class:"ai-info"},Xk={class:"provider"},Gk={key:0,class:"model"},Kk={class:"message-header"},Zk={class:"username"},Qk={class:"timestamp"},Jk={class:"message-content"},e7={key:0,class:"streaming-content"},t7={key:1},n7={key:0,class:"command-suggestions"},a7={class:"commands-list"},s7={class:"command-text"},i7=["onClick","title"],r7={key:0,class:"ai-typing"},o7={key:1,class:"no-messages"},l7={class:"chat-input"},c7=["onKeydown","placeholder","disabled"],u7={class:"input-actions"},d7={class:"input-help"},m7=["disabled"],f7=Jt({__name:"SimpleChatComponent",setup(e,{expose:t}){const n=ka(),a=he([]),s=he(""),i=he(null),r=he(null),o=he({provider:"unknown",model:"unknown",available:!1,status:"disconnected"}),m=ee(()=>n.connectionState.isConnected&&o.value.available),u=ee(()=>n.connectionState.isConnected?o.value.available?"Type a message... (Ctrl+Enter to send)":"AI unavailable - please wait for connection":"Terminal disconnected - cannot send messages"),d=ee(()=>n.connectionState.isConnected?o.value.available?"Ctrl+Enter to send":"Waiting for AI connection":"Connect to terminal first"),l=(R,C,I="user")=>{const b={id:Date.now().toString(),username:R,content:C,timestamp:new Date,type:I};return a.value.push(b),en(()=>{i.value&&(i.value.scrollTop=i.value.scrollHeight)}),b},c=()=>{if(!s.value.trim()||!m.value){n.connectionState.isConnected?o.value.available||l("System","Cannot send message: AI service unavailable","system"):l("System","Cannot send message: Terminal not connected","system");return}const R=s.value.trim();l("You",R,"user"),A(R),s.value="",en(()=>{r.value?.focus()})},v=he(!1),h=he(""),A=async R=>{if(!n.socket||!n.connectionState.isConnected){console.warn("Socket not available for AI chat"),l("System","Cannot send message: Terminal connection unavailable","system");return}if(!o.value.available){console.warn("AI service not available"),l("System","Cannot send message: AI service unavailable. Please wait for AI to connect.","system");return}const C=Date.now().toString()+Math.random().toString(36).substr(2,9);h.value=C;const I=l("Aether AI","","ai");I.streaming=!0,I.messageId=C,v.value=!0,n.socket.emit("ai_chat_message",{message:R,message_id:C,terminal_session:n.session.id})},T=R=>{console.log("SimpleChatComponent: Received external message:",R),l("Terminal Selection",R,"user"),A(R)};t({handleExternalMessage:T}),gn(()=>{l("Aether AI","Welcome to Aether Assistant! I am your AI assistant for terminal operations, troubleshooting, and guidance.","system"),n.onChatMessage(y=>{console.log("Received chat message:",y),l(y.username||"Unknown User",y.message||y.content,"user")}),n.onAskAI(y=>{console.log("SimpleChatComponent: Received Ask AI event:",y);const _=`Please analyze this terminal output: "${y}"`;T(_)});const R=()=>{n.socket&&(n.socket.off("ai_chat_typing"),n.socket.off("ai_chat_chunk"),n.socket.off("ai_chat_complete"),n.socket.off("ai_chat_error"),n.socket.off("ai_info_response"),n.socket.on("ai_chat_typing",y=>{v.value=y.typing}),n.socket.on("ai_chat_chunk",y=>{const _=y.message_id,w=y.chunk,E=a.value.find(M=>M.messageId===_);E&&(E.content+=w,en(()=>{i.value&&(i.value.scrollTop=i.value.scrollHeight)}))}),n.socket.on("ai_chat_complete",y=>{const _=y.message_id,w=y.full_response,E=a.value.find(M=>M.messageId===_);E&&(E.content=w,E.streaming=!1),v.value=!1,h.value=""}),n.socket.on("ai_chat_error",y=>{const _=y.message_id,w=y.error,E=a.value.find(M=>M.messageId===_);E&&(E.content=`Sorry, I encountered an error: ${w}`,E.streaming=!1,E.type="system"),v.value=!1,h.value=""}),n.socket.on("ai_info_response",y=>{o.value={provider:y.provider||"unknown",model:y.model||"unknown",available:y.available||!1,status:y.status||"disconnected",error:y.error},console.log("AI Info received:",o.value)}))};R();let C=!1;const b=setInterval(()=>{n.connectionState.isConnected&&n.socket&&!C&&(R(),L(),C=!0)},1e3);Ii(()=>{clearInterval(b),n.offChatMessage(),n.offAskAI(),n.socket&&(n.socket.off("ai_chat_typing"),n.socket.off("ai_chat_chunk"),n.socket.off("ai_chat_complete"),n.socket.off("ai_chat_error"),n.socket.off("ai_info_response"))})});const k=R=>R.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),p=()=>n.connectionState.isConnected?o.value.available?"Connected":"AI Unavailable":"Terminal Disconnected",L=()=>{n.socket&&n.connectionState.isConnected&&n.socket.emit("ai_get_info",{})},O=R=>{if(!R)return[];const C=[],I=/```(?:bash|shell|sh)?\s*\n?(.*?)\n?```/gis,b=R.match(I);b&&b.forEach(w=>{const E=w.replace(/```(?:bash|shell|sh)?\s*\n?|\n?```/gi,"").trim();if(E&&g(E)){const M=E.split(`
`).map(V=>V.trim()).filter(V=>V);C.push(...M)}});const y=/`([^`]+)`/g;let _;for(;(_=y.exec(R))!==null;){const w=_[1].trim();g(w)&&!C.includes(w)&&C.push(w)}return C.slice(0,5)},g=R=>{if(!R||R.length<2||R.length>200)return!1;const C=["ls","cd","pwd","mkdir","rmdir","rm","cp","mv","touch","cat","less","more","grep","find","which","whereis","locate","du","df","ps","top","htop","kill","killall","jobs","nohup","screen","tmux","chmod","chown","chgrp","tar","gzip","gunzip","zip","unzip","wget","curl","ssh","scp","rsync","git","docker","npm","yarn","pip","apt","yum","brew","systemctl","service","sudo","su","whoami","id","groups","history","echo","printf","date","uptime","uname","hostname","w","who","last","crontab","at","watch"],I=R.split(/\s+/)[0].toLowerCase();return C.some(b=>I.startsWith(b))||/^[a-zA-Z][a-zA-Z0-9_-]*(\s|$)/.test(R)||/^\.\/[a-zA-Z0-9_.-]+/.test(R)||/^~?\/[a-zA-Z0-9_.-/]+/.test(R)},B=R=>{if(!n.connectionState.isConnected){l("System","Cannot send command: Terminal not connected","system");return}const C=R+"\r";n.sendInput(C),l("System",`Command sent to terminal: ${R}`,"system"),console.log("Command sent to terminal:",R)};return(R,C)=>(fe(),_e("div",Uk,[S("div",qk,[C[1]||(C[1]=S("h3",null,"Aether Assistant",-1)),S("div",Wk,[o.value.provider&&o.value.provider!=="unknown"?(fe(),_e("div",Yk,[S("span",Xk,ie(o.value.provider),1),o.value.model&&o.value.model!=="unknown"?(fe(),_e("span",Gk,ie(o.value.model),1)):nt("",!0)])):nt("",!0),S("div",{class:Me(["connection-status",{connected:xt(n).connectionState.isConnected&&o.value.available}])},ie(p()),3)])]),S("div",{class:"chat-messages",ref_key:"messagesContainer",ref:i},[(fe(!0),_e(lt,null,Ut(a.value,I=>(fe(),_e("div",{key:I.id,class:Me(["message",I.type])},[S("div",Kk,[S("span",Zk,ie(I.username),1),S("span",Qk,ie(k(I.timestamp)),1)]),S("div",Jk,[I.streaming?(fe(),_e("span",e7,[Zt(ie(I.content),1),C[2]||(C[2]=S("span",{class:"cursor"},"|",-1))])):(fe(),_e("div",t7,[Zt(ie(I.content)+" ",1),I.type==="ai"&&O(I.content).length>0?(fe(),_e("div",n7,[C[3]||(C[3]=S("div",{class:"commands-header"},[S("span",null,"🤖 Suggested Commands:")],-1)),S("div",a7,[(fe(!0),_e(lt,null,Ut(O(I.content),(b,y)=>(fe(),_e("div",{key:y,class:"command-item"},[S("code",s7,ie(b),1),S("button",{onClick:_=>B(b),class:"send-command-btn",title:`Send '${b}' to terminal`}," 📤 Send ",8,i7)]))),128))])])):nt("",!0)]))])],2))),128)),v.value?(fe(),_e("div",r7,C[4]||(C[4]=[S("div",{class:"typing-indicator"},[S("span",{class:"username"},"Aether AI"),S("div",{class:"typing-dots"},[S("span"),S("span"),S("span")])],-1)]))):nt("",!0),a.value.length===0?(fe(),_e("div",o7,C[5]||(C[5]=[S("p",null,"No messages yet. Start a conversation with Aether AI!",-1)]))):nt("",!0)],512),S("div",l7,[on(S("textarea",{"onUpdate:modelValue":C[0]||(C[0]=I=>s.value=I),onKeydown:[vc(Hn(c,["ctrl"]),["enter"]),vc(Hn(c,["meta"]),["enter"])],placeholder:u.value,disabled:!m.value,class:"message-input",rows:"3",ref_key:"messageTextarea",ref:r},null,40,c7),[[Er,s.value]]),S("div",u7,[S("div",d7,[S("small",null,ie(d.value),1)]),S("button",{onClick:c,disabled:!s.value.trim()||!m.value,class:"send-button"}," Send ",8,m7)])])]))}}),x0=tn(f7,[["__scopeId","data-v-74ea40b9"]]),v7={class:"status-content"},h7={class:"status-indicator"},g7={class:"status-text"},p7={key:0,class:"brand-section"},_7={key:1,class:"actions"},b7=Jt({__name:"ConnectionStatusBanner",setup(e){const t=ka(),n=ee(()=>t.connectionStatus),a=ee(()=>t.connectionState.isReconnecting),s=ee(()=>n.value!=="connected"),i=ee(()=>`status-${n.value}`),r=ee(()=>`dot-${n.value}`),o=ee(()=>{switch(n.value){case"connected":return"接続済み";case"connecting":return"接続中...";case"reconnecting":return"再接続中...";case"disconnected":default:return"切断済み"}}),m=()=>{t.connect()};return(u,d)=>{const l=La("v-icon"),c=La("v-btn");return s.value?(fe(),_e("div",{key:0,class:Me(["connection-status-banner",i.value])},[S("div",v7,[S("div",h7,[S("div",{class:Me(["status-dot",r.value])},null,2),S("span",g7,ie(o.value),1)]),n.value==="disconnected"?(fe(),_e("div",p7,d[0]||(d[0]=[jm('<div class="aether-logo" data-v-a3349699><svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-a3349699><path d="M16 2L28 8V24L16 30L4 24V8L16 2Z" stroke="currentColor" stroke-width="2" fill="none" data-v-a3349699></path><path d="M16 8L22 12V20L16 24L10 20V12L16 8Z" stroke="currentColor" stroke-width="1.5" fill="none" data-v-a3349699></path><circle cx="16" cy="16" r="3" fill="currentColor" data-v-a3349699></circle></svg></div><div class="brand-text" data-v-a3349699><div class="brand-name" data-v-a3349699>AetherTerm</div><div class="brand-subtitle" data-v-a3349699>AI Terminal Platform</div></div>',2)]))):nt("",!0),n.value==="disconnected"?(fe(),_e("div",_7,[Q(c,{color:"primary",variant:"outlined",size:"small",onClick:m,loading:a.value},{default:Lt(()=>[Q(l,{start:""},{default:Lt(()=>d[1]||(d[1]=[Zt("mdi-connection")])),_:1,__:[1]}),d[2]||(d[2]=Zt(" 再接続 "))]),_:1,__:[2]},8,["loading"])])):nt("",!0)])],2)):nt("",!0)}}}),y7=tn(b7,[["__scopeId","data-v-a3349699"]]),Vi=au("terminalTab",()=>{const e=he([]),t=he(null),n=he(1),a=he(null),s=ee(()=>e.value.filter(y=>y.isActive)),i=ee(()=>e.value.filter(y=>y.isActive)),r=ee(()=>t.value==="log-monitor-fixed"?a.value:e.value.find(y=>y.id===t.value)||null),o=ee(()=>e.value.filter(y=>y.type==="terminal")),m=ee(()=>e.value.filter(y=>y.type==="ai-agent")),u=ee(()=>e.value.filter(y=>y.type==="log-monitor")),d=ee(()=>t.value==="log-monitor-fixed"),l=(y,_,w,E)=>{console.log("📋 STORE: createTab called with:",{type:y,title:_,subType:w,serverContext:E});const M=`tab-${n.value++}`;let V=y==="terminal"?`Terminal ${o.value.length+1}`:`AI Chat ${m.value.length+1}`;y==="terminal"&&w==="inventory"&&E&&(V=`${E.name}`);const q={id:M,title:_||V,type:y,subType:w,isActive:!0,lastActivity:new Date,status:"connecting",serverContext:E};return console.log("📋 STORE: Created new tab:",q),e.value.push(q),t.value=M,console.log("📋 STORE: Tab added to store, total tabs:",e.value.length),console.log("📋 STORE: Active tab ID set to:",M),q},c=y=>{const _=e.value.findIndex(E=>E.id===y);if(_===-1)return;const w=e.value[_];if(w.isActive=!1,t.value===y){const E=e.value.filter(M=>M.isActive&&M.id!==y);t.value=E.length>0?E[E.length-1].id:null}setTimeout(()=>{const E=e.value.findIndex(M=>M.id===y);E!==-1&&e.value.splice(E,1)},100)},v=y=>{if(y==="log-monitor-fixed"){t.value=y,a.value&&(a.value.lastActivity=new Date);return}const _=e.value.find(w=>w.id===y);_&&_.isActive&&(t.value=y,_.lastActivity=new Date)},h=()=>{t.value="log-monitor-fixed",a.value&&(a.value.lastActivity=new Date)},A=(y,_)=>{const w=e.value.find(E=>E.id===y);w&&(w.title=_)},T=(y,_)=>{const w=e.value.find(E=>E.id===y);w&&(w.status=_)},k=y=>{const _=e.value.find(w=>w.id===y);_&&(_.commandsExecuted=!0)},p=y=>e.value.find(w=>w.id===y)?.preExecutionCommands||[],L=y=>{const _=e.value.find(w=>w.id===y);return!!(_&&_.preExecutionCommands&&!_.commandsExecuted)},O=(y,_)=>{const w=e.value.find(E=>E.id===y);w&&(w.sessionId=_)},g=y=>{const _=l("terminal",void 0,"inventory",y);return _.preExecutionCommands=R(y),_.commandsExecuted=!1,_},B=()=>{const y=u.value.find(_=>_.isActive);if(y)return v(y.id),y;{if(a.value)return h(),a.value;const _={id:`tab-${n.value++}`,title:"Log Monitor",type:"log-monitor",isActive:!0,lastActivity:new Date,status:"active"};return e.value.push(_),t.value=_.id,_}},R=y=>{const _=[],w=C(y.name);if(_.push({id:"welcome",command:`echo "=== Connecting to ${w} Server: ${y.name} ==="\r`,description:"Display welcome message",order:1}),_.push({id:"server-info",command:`echo "Server: ${y.name} (${y.ip})"\r`,description:"Display server information",order:2}),_.push({id:"os-info",command:`echo "OS: ${y.os}"\r`,description:"Display OS information",order:3}),_.push({id:"status-info",command:`echo "Status: ${y.status.toUpperCase()}"\r`,description:"Display server status",order:4}),(y.status==="warning"||y.status==="maintenance")&&_.push({id:"warning",command:`echo "⚠️  WARNING: Server has ${y.status} status"\r`,description:"Display warning message",order:5}),y.cpu||y.memory||y.disk){const M=[];y.cpu&&y.cpu>80&&M.push("HIGH CPU"),y.memory&&y.memory>80&&M.push("HIGH MEMORY"),y.disk&&y.disk>80&&M.push("HIGH DISK"),_.push({id:"resources",command:`echo "Resources - CPU: ${y.cpu}% | Memory: ${y.memory}% | Disk: ${y.disk}%${M.length>0?" ⚠️  "+M.join(", "):""}"\r`,description:"Display resource usage",order:6})}return I(w).forEach(M=>_.push(M)),_.push({id:"separator",command:'echo "=== Initiating SSH Connection ==="\r',description:"Display connection separator",order:9}),_.push({id:"ssh-connect",command:`ssh ${y.name}@${y.ip}\r`,description:"Connect via SSH",order:10}),_.sort((M,V)=>M.order-V.order)},C=y=>{const _=y.toLowerCase();return _.includes("database")||_.includes("db")?"Database":_.includes("web")?"Web":_.includes("api")?"API":_.includes("load-balancer")||_.includes("lb")?"Load Balancer":_.includes("monitoring")||_.includes("monitor")?"Monitoring":"General"},I=(y,_)=>{const w=[];switch(y){case"Database":w.push({id:"db-check",command:'echo "Checking database services..."\r',description:"Database service check",order:7});break;case"Web":w.push({id:"web-check",command:'echo "Checking web server status..."\r',description:"Web server status check",order:7});break;case"API":w.push({id:"api-check",command:'echo "Checking API endpoints..."\r',description:"API endpoint check",order:7});break;case"Load Balancer":w.push({id:"lb-check",command:'echo "Checking load balancer configuration..."\r',description:"Load balancer check",order:7});break;case"Monitoring":w.push({id:"monitor-check",command:'echo "Checking monitoring services..."\r',description:"Monitoring service check",order:7});break;default:w.push({id:"general-check",command:'echo "Performing general system check..."\r',description:"General system check",order:7})}return w};return{tabs:e,activeTabId:t,logMonitorTab:a,activeTabs:s,displayTabs:i,activeTab:r,terminalTabs:o,aiChatTabs:m,logMonitorTabs:u,isLogMonitorActive:d,createTab:l,createInventoryTerminal:g,createLogMonitorTab:B,closeTab:c,switchToTab:v,switchToLogMonitor:h,updateTabTitle:A,updateTabStatus:T,updateTabSessionId:O,initializeDefaultTab:()=>{if(e.value.length===0&&l("terminal","Terminal 1"),!a.value){const y={id:"log-monitor-fixed",title:"Log Monitor",type:"log-monitor",isActive:!0,lastActivity:new Date,status:"active"};a.value=y}},markCommandsExecuted:k,getTabCommands:p,hasUnexecutedCommands:L,getServerType:C}}),w7={class:"add-tab-container"},S7={class:"menu-section"},k7={class:"submenu-content"},x7=Jt({__name:"TabCreationMenu",emits:["add-tab"],setup(e,{emit:t}){const n=t,a=he(!1),s=he(!1),i=()=>{a.value=!a.value,a.value||(s.value=!1)},r=()=>{s.value=!s.value},o=()=>{s.value||(s.value=!0)},m=(c,v)=>{n("add-tab",c,v),a.value=!1,s.value=!1},u=()=>{},d=c=>{c.target.closest(".add-tab-container")||(a.value=!1,s.value=!1)},l=c=>{c.key==="Escape"&&a.value&&(a.value=!1,s.value=!1)};return gn(()=>{document.addEventListener("click",d),document.addEventListener("keydown",l)}),Ii(()=>{document.removeEventListener("click",d),document.removeEventListener("keydown",l)}),(c,v)=>(fe(),_e("div",w7,[S("button",{onClick:i,class:Me(["add-tab-btn",{"menu-open":a.value}]),title:"Add New Tab"}," + ",2),a.value?(fe(),_e("div",{key:0,class:"add-tab-menu",onClick:v[3]||(v[3]=Hn(()=>{},["stop"]))},[S("div",S7,[S("button",{onClick:r,onMouseenter:o,class:Me(["menu-item section-header",{expanded:s.value}])},[v[6]||(v[6]=S("span",{class:"menu-icon"},"💻",-1)),v[7]||(v[7]=S("span",{class:"menu-text"},"Terminal",-1)),S("span",{class:Me(["expand-arrow",{rotated:s.value}])},v[5]||(v[5]=[S("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"currentColor"},[S("path",{d:"M3 4.5L6 7.5L9 4.5",stroke:"currentColor","stroke-width":"1.5",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]),2)],34),S("div",{class:Me(["submenu",{expanded:s.value}]),onTransitionend:u},[S("div",k7,[S("button",{onClick:v[0]||(v[0]=h=>m("terminal","pure")),class:"menu-item submenu-item pure-terminal-item"},v[8]||(v[8]=[S("span",{class:"menu-icon"},"⚡",-1),S("span",{class:"menu-text"},"Pure Terminal",-1)])),S("button",{onClick:v[1]||(v[1]=h=>m("terminal","inventory")),class:"menu-item submenu-item inventory-terminal-item"},v[9]||(v[9]=[S("span",{class:"menu-icon"},"📊",-1),S("span",{class:"menu-text"},"Inventory Terminal",-1)]))])],34)]),S("button",{onClick:v[2]||(v[2]=h=>m("ai-agent")),class:"menu-item ai-agent-item"},v[10]||(v[10]=[S("span",{class:"menu-icon"},"🤖",-1),S("span",{class:"menu-text"},"AI Agent",-1)]))])):nt("",!0),a.value?(fe(),_e("div",{key:1,onClick:v[4]||(v[4]=h=>a.value=!1),class:"menu-overlay"})):nt("",!0)]))}}),T7=tn(x7,[["__scopeId","data-v-c4830ace"]]),C7=["data-sidebar-state"],A7={class:"tab-list"},E7=["onClick"],M7={class:"tab-content"},R7={class:"tab-icon"},I7={class:"tab-title"},B7=["onClick"],L7=Jt({__name:"TabBarContainer",setup(e){const t=Vi(),n=he(!1),a=()=>{if(typeof window<"u"){const d=document.getElementById("supervisor-container")!==null;d!==n.value&&(n.value=d)}},s=ee(()=>n.value),i=ee(()=>t.isLogMonitorActive),r=()=>{t.switchToLogMonitor()},o=(u,d)=>{console.log("🔥 ADD NEW TAB CALLED:",{type:u,subType:d});const l=t.createTab(u,void 0,d);console.log("🔥 NEW TAB CREATED:",l)};let m=null;return gn(async()=>{t.initializeDefaultTab(),await en(),a(),m=new MutationObserver(()=>{a()}),m.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["id","class"]})}),Ii(()=>{m&&m.disconnect()}),(u,d)=>(fe(),_e("div",{class:Me(["terminal-tab-bar",{"sidebar-closed":!s.value,"sidebar-open":s.value}]),onContextmenu:d[0]||(d[0]=Hn(()=>{},["prevent"])),"data-sidebar-state":s.value?"open":"closed"},[S("div",A7,[(fe(!0),_e(lt,null,Ut(xt(t).displayTabs,l=>(fe(),_e("div",{key:l.id,class:Me(["terminal-tab",{active:l.id===xt(t).activeTabId,terminal:l.type==="terminal","ai-agent":l.type==="ai-agent","log-monitor":l.type==="log-monitor","pure-terminal":l.type==="terminal"&&l.subType==="pure","inventory-terminal":l.type==="terminal"&&l.subType==="inventory",connecting:l.status==="connecting",error:l.status==="error"}]),onClick:c=>xt(t).switchToTab(l.id)},[S("div",M7,[S("span",R7,ie(l.type==="terminal"?l.subType==="inventory"?"📊":"💻":l.type==="ai-agent"?"🤖":"📈"),1),S("span",I7,ie(l.title),1),S("span",{class:Me(["tab-status-indicator",l.status])},null,2)]),xt(t).displayTabs.length>1?(fe(),_e("button",{key:0,onClick:Hn(c=>xt(t).closeTab(l.id),["stop"]),class:"tab-close-btn",title:"Close Tab"}," ✕ ",8,B7)):nt("",!0)],10,E7))),128))]),Q(T7,{onAddTab:o}),S("div",{class:Me(["terminal-tab fixed-tab log-monitor-tab",{active:i.value}]),onClick:r},d[1]||(d[1]=[S("div",{class:"tab-content"},[S("span",{class:"tab-icon"},"📈"),S("span",{class:"tab-title"},"Log Monitor")],-1)]),2)],42,C7))}}),O7=tn(L7,[["__scopeId","data-v-a5034716"]]),F7={class:"context-menu-header"},V7={class:"selected-text-preview"},P7={class:"text-length"},D7=Jt({__name:"SelectionActionPopup",props:{show:{type:Boolean},position:{},selectedText:{}},emits:["copy","hide","sendToAi"],setup(e,{emit:t}){const n=e,a=t,s=ka(),i=ee(()=>{const u=n.selectedText.trim();return u.length<=50?u:u.substring(0,47)+"..."}),r=async()=>{try{await navigator.clipboard.writeText(n.selectedText),console.log("Text copied to clipboard:",n.selectedText),a("copy"),a("hide")}catch(u){console.error("Failed to copy text to clipboard:",u);const d=document.createElement("textarea");d.value=n.selectedText,document.body.appendChild(d),d.select(),document.execCommand("copy"),document.body.removeChild(d),a("copy"),a("hide")}},o=()=>{console.log("Sending text to side panel AI:",n.selectedText),s.triggerAskAI(n.selectedText),a("hide")},m=()=>{a("hide")};return(u,d)=>(fe(),_e(lt,null,[u.show?(fe(),_e("div",{key:0,class:"selection-context-menu",style:vt({top:u.position.y+"px",left:u.position.x+"px"}),onClick:d[0]||(d[0]=Hn(()=>{},["stop"]))},[S("div",F7,[S("span",V7,ie(i.value),1),S("span",P7,"("+ie(u.selectedText.length)+" chars)",1)]),d[3]||(d[3]=S("div",{class:"menu-divider"},null,-1)),S("button",{class:"menu-item",onClick:r},d[1]||(d[1]=[S("span",{class:"icon"},"📋",-1),S("span",{class:"label"},"Copy Text",-1)])),d[4]||(d[4]=S("div",{class:"menu-divider"},null,-1)),S("button",{class:"menu-item ai-item",onClick:o},d[2]||(d[2]=[S("span",{class:"icon"},"🤖",-1),S("span",{class:"label"},"Ask AI",-1)]))],4)):nt("",!0),u.show?(fe(),_e("div",{key:1,class:"context-menu-backdrop",onClick:m})):nt("",!0)],64))}}),j7=tn(D7,[["__scopeId","data-v-00408c87"]]);var N7=pg(),rc={exports:{}},fm;function $7(){return fm||(fm=1,function(e,t){(function(n,a){e.exports=a()})(self,()=>(()=>{var n={};return(()=>{var a=n;Object.defineProperty(a,"__esModule",{value:!0}),a.FitAddon=void 0,a.FitAddon=class{activate(s){this._terminal=s}dispose(){}fit(){const s=this.proposeDimensions();if(!s||!this._terminal||isNaN(s.cols)||isNaN(s.rows))return;const i=this._terminal._core;this._terminal.rows===s.rows&&this._terminal.cols===s.cols||(i._renderService.clear(),this._terminal.resize(s.cols,s.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const s=this._terminal._core,i=s._renderService.dimensions;if(i.css.cell.width===0||i.css.cell.height===0)return;const r=this._terminal.options.scrollback===0?0:s.viewport.scrollBarWidth,o=window.getComputedStyle(this._terminal.element.parentElement),m=parseInt(o.getPropertyValue("height")),u=Math.max(0,parseInt(o.getPropertyValue("width"))),d=window.getComputedStyle(this._terminal.element),l=m-(parseInt(d.getPropertyValue("padding-top"))+parseInt(d.getPropertyValue("padding-bottom"))),c=u-(parseInt(d.getPropertyValue("padding-right"))+parseInt(d.getPropertyValue("padding-left")))-r;return{cols:Math.max(2,Math.floor(c/i.css.cell.width)),rows:Math.max(1,Math.floor(l/i.css.cell.height))}}}})(),n})())}(rc)),rc.exports}var H7=$7();const z7={class:"terminal-tab-container"},U7={key:0,class:"terminal-status-bar"},q7={key:0,class:"progress-bar"},W7=["id"],Y7=Jt({__name:"TerminalTab",props:{tabId:{},subType:{}},emits:["click"],setup(e){const t=e,n=he(null),a=he(null),s=he(null),i=he(!1),r=he(!1),o=ka();Vi();const m=async()=>{if(console.log("=== INITIALIZING TERMINAL ==="),console.log("Tab ID:",t.tabId),console.log("Sub Type:",t.subType),await en(),s.value=document.getElementById(`terminal-${t.tabId}`),!s.value){console.error("❌ Terminal element not found:",`terminal-${t.tabId}`),console.log('All available elements with "terminal" in ID:',Array.from(document.querySelectorAll('[id*="terminal"]')).map(l=>l.id));return}console.log("✅ Terminal element found:",s.value,"for tab:",t.tabId),console.log("Element dimensions:",{width:s.value.offsetWidth,height:s.value.offsetHeight,display:getComputedStyle(s.value).display,visibility:getComputedStyle(s.value).visibility}),n.value=new N7.Terminal({fontSize:14,fontFamily:'"Cascadia Code", "Fira Code", "JetBrains Mono", Consolas, "Courier New", monospace',theme:{background:"#1e1e1e",foreground:"#cccccc",cursor:"#ffffff",cursorAccent:"#000000",selection:"#264f78",black:"#000000",red:"#cd3131",green:"#0dbc79",yellow:"#e5e510",blue:"#2472c8",magenta:"#bc3fbc",cyan:"#11a8cd",white:"#e5e5e5",brightBlack:"#666666",brightRed:"#f14c4c",brightGreen:"#23d18b",brightYellow:"#f5f543",brightBlue:"#3b8eea",brightMagenta:"#d670d6",brightCyan:"#29b8db",brightWhite:"#e5e5e5"},cursorBlink:!0,cursorStyle:"block",scrollback:1e3,tabStopWidth:4,convertEol:!0,disableStdin:!1,allowTransparency:!0}),a.value=new H7.FitAddon,n.value.loadAddon(a.value),console.log("🔧 Opening terminal in DOM element..."),n.value.open(s.value),console.log("✅ Terminal opened"),setTimeout(()=>{a.value&&(console.log("🔧 Fitting terminal to container..."),a.value.fit(),console.log("✅ Terminal fitted, dimensions:",{cols:n.value?.cols,rows:n.value?.rows}))},100),console.log("🔧 Setting up terminal event handlers..."),u(),console.log("✅ Event handlers set up"),console.log("🔧 Connecting to backend..."),o.socket&&o.session.id?(console.log("Using existing session:",o.session.id),d()):(console.log("Creating new connection for tab:",t.tabId),await o.connect(),d()),console.log("✅ Backend connection initiated")},u=()=>{n.value&&(n.value.onResize(l=>{console.log("Terminal resized:",l),o.socket&&o.session.id&&o.socket.emit("resize",{sessionId:o.session.id,cols:l.cols,rows:l.rows})}),n.value.onData(l=>{o.socket&&o.session.id&&o.socket.emit("input",{sessionId:o.session.id,data:l})}))},d=()=>{if(console.log("=== CONNECTING TERMINAL ==="),console.log("Socket exists:",!!o.socket),console.log("Terminal exists:",!!n.value),!o.socket||!n.value){console.error("❌ Cannot connect - missing socket or terminal");return}console.log("🔧 Setting up output listener..."),o.socket.on("output",l=>{console.log("📨 TerminalTab received output:",{receivedSessionId:l.sessionId,currentSessionId:o.session.id,dataLength:l.data?.length,terminalExists:!!n.value,preview:l.data.substring(0,50)+(l.data.length>50?"...":"")}),l.sessionId===o.session.id&&n.value?(console.log("✅ Writing data to terminal"),n.value.write(l.data)):console.warn("⚠️ Not writing data - session mismatch or terminal not ready")}),console.log("🔧 Requesting new session..."),o.socket.emit("createSession",{tabId:t.tabId,subType:t.subType}),console.log("✅ Session request sent")};return rt(()=>o.session.id,(l,c)=>{console.log("🔄 Session ID changed:",{old:c,new:l,terminalExists:!!n.value}),l&&n.value?(console.log("✅ Reconnecting terminal with new session:",l),d()):console.warn("⚠️ Cannot reconnect - missing session or terminal")}),gn(()=>{console.log("🟢 TerminalTab MOUNTED for tab:",t.tabId,"subType:",t.subType),m()}),Ii(()=>{console.log("🔴 TerminalTab UNMOUNTED for tab:",t.tabId),n.value&&(console.log("🔧 Disposing terminal instance"),n.value.dispose(),console.log("✅ Terminal disposed"))}),(l,c)=>(fe(),_e("div",z7,[l.subType==="inventory"&&i.value?(fe(),_e("div",U7,[c[2]||(c[2]=S("div",{class:"status-indicator"},[S("span",{class:"status-dot connecting"}),S("span",{class:"status-text"},"Initializing terminal...")],-1)),r.value?(fe(),_e("div",q7,c[1]||(c[1]=[S("div",{class:"progress-fill",style:{width:"0%"}},null,-1)]))):nt("",!0)])):nt("",!0),S("div",{id:`terminal-${l.tabId}`,class:"xterm-container",onClick:c[0]||(c[0]=v=>l.$emit("click"))},null,8,W7)]))}}),X7=tn(Y7,[["__scopeId","data-v-2731cb75"]]),G7={class:"ai-agent-tab-container"},K7=Jt({__name:"AIAgentTab",props:{tabId:{}},setup(e){return(t,n)=>(fe(),_e("div",G7,[Q(x0,{"tab-id":t.tabId},null,8,["tab-id"])]))}}),Z7=tn(K7,[["__scopeId","data-v-0c71472f"]]),Q7={class:"terminal-log-monitor-panel"},J7={class:"panel-header"},ex={class:"refresh-controls"},tx={class:"monitor-section"},nx={class:"overview-grid"},ax={class:"metric-card"},sx={class:"metric-value"},ix={class:"metric-card"},rx={class:"metric-value"},ox={class:"metric-card"},lx={class:"metric-value"},cx={class:"metric-card"},ux={class:"monitor-section"},dx={class:"unprocessed-grid"},mx={class:"unprocessed-card"},fx={class:"unprocessed-card"},vx={class:"unprocessed-card"},hx={class:"unprocessed-card total"},gx={class:"unprocessed-value total-value"},px={class:"unprocessed-label"},_x={class:"monitor-section"},bx={class:"pattern-ranking"},yx={class:"ranking-tabs"},wx={class:"pattern-list"},Sx={class:"pattern-rank"},kx={class:"pattern-matches"},xx={class:"matches-number"},Tx={class:"matches-frequency"},Cx={class:"pattern-trend"},Ax={class:"pattern-content"},Ex={class:"error-pattern-summary"},Mx={class:"error-stats-grid"},Rx={class:"error-stat-card"},Ix={class:"stat-value error"},Bx={class:"error-stat-card"},Lx={class:"stat-value warning"},Ox={class:"error-stat-card"},Fx={class:"stat-value critical"},Vx={class:"error-stat-card"},Px={class:"stat-value total"},Dx={class:"error-pattern-list"},jx={class:"error-pattern-header"},Nx={class:"error-matches"},$x={class:"error-severity"},Hx={class:"error-pattern-content"},zx={class:"error-pattern-details"},Ux={class:"detail-item"},qx={class:"detail-item"},Wx={class:"detail-item"},Yx={class:"command-pattern-list"},Xx={class:"command-pattern-header"},Gx={class:"command-type"},Kx={class:"command-frequency"},Zx={class:"command-content"},Qx={class:"command-stats"},Jx={class:"stat-item"},eT={class:"stat-item"},tT={class:"stat-item"},nT={class:"monitor-section"},aT={class:"terminal-list"},sT=["onClick"],iT={class:"terminal-header"},rT={class:"terminal-id"},oT={class:"terminal-metrics"},lT={class:"metric"},cT={class:"metric-value"},uT={class:"metric"},dT={class:"metric-value"},mT={class:"metric"},fT={class:"metric-value error"},vT={class:"metric"},hT={class:"metric-value"},gT={class:"log-volume-chart"},pT={class:"volume-bars"},_T=["title"],bT={key:0,class:"monitor-section"},yT={class:"terminal-details"},wT={class:"detail-tabs"},ST={class:"log-entries"},kT={class:"log-header"},xT={class:"log-timestamp"},TT={class:"log-level"},CT={class:"log-type"},AT={class:"log-content"},ET={key:0,class:"log-command"},MT={class:"log-output"},RT={class:"error-summary"},IT={class:"error-header"},BT={class:"error-count"},LT={class:"error-time"},OT={class:"error-message"},FT={class:"pattern-analysis"},VT={class:"pattern-header"},PT={class:"pattern-type"},DT={class:"pattern-frequency"},jT={class:"pattern-score"},NT={class:"pattern-content"},$T={class:"monitor-section"},HT={class:"search-interface"},zT={class:"search-controls"},UT={class:"search-input-group"},qT={class:"search-filters"},WT={key:0,class:"search-results"},YT={class:"results-header"},XT={class:"results-controls"},GT={key:0,class:"timeline-view"},KT={class:"timeline-container"},ZT={class:"timeline-date-header"},QT={class:"date-count"},JT={class:"timeline-events"},eC={class:"timeline-content"},tC={class:"timeline-header"},nC={class:"timeline-time"},aC={class:"timeline-terminal"},sC={class:"timeline-body"},iC={key:0,class:"timeline-command"},rC={class:"timeline-text"},oC={key:1,class:"list-view"},lC={class:"results-tabs"},cC={class:"search-result-list"},uC={class:"result-header"},dC={class:"result-terminal"},mC={class:"result-timestamp"},fC={class:"result-type"},vC={class:"result-content"},hC=["innerHTML"],gC={class:"search-result-list"},pC={class:"result-header"},_C={class:"result-terminal"},bC={class:"result-timestamp"},yC={class:"result-type"},wC={class:"result-content"},SC={key:0,class:"result-command"},kC=["innerHTML"],xC={class:"result-output"},TC=["innerHTML"],CC={class:"search-result-list"},AC={class:"result-header"},EC={class:"result-frequency"},MC={class:"result-similarity"},RC={class:"result-terminals"},IC={class:"result-content"},BC=["innerHTML"],LC={class:"pattern-metadata"},OC={key:0,class:"metadata-item"},FC={key:1,class:"metadata-item"},VC={key:2,class:"metadata-item"},PC={key:1,class:"no-results"},DC={key:2,class:"search-help"},jC={class:"monitor-section"},NC={class:"pipeline-status"},$C={__name:"TerminalLogMonitorPanel",setup(e){const t=ka(),n=he(!1),a=he(!0),s=he(null),i=he(!1),r=he("recent"),o=he({}),m=he({}),u=he([]),d=he([]),l=he([]),c=he({}),v=he("matches"),h=he([]),A=he([]),T=he([]),k=he({});let p=null;const L=ee(()=>{const ge=m.value;let z=0;return Object.values(ge).forEach(Ae=>{z+=Ae.total_entries||0}),z.toLocaleString()}),O=ee(()=>({"status-active":o.value.system_status?.processing_active,"status-inactive":!o.value.system_status?.processing_active})),g=ee(()=>{const ge=c.value.redis_pending||0,z=c.value.sql_pending||0,Ae=c.value.vector_pending||0;return ge+z+Ae}),B=async()=>{if(!n.value){n.value=!0;try{try{const z=await fetch("/api/log-processing/statistics");z.ok?o.value=await z.json():(console.warn("System statistics not available, using mock data"),o.value=U())}catch{console.warn("System statistics API not available, using mock data"),o.value=U()}const ge=o.value.activeTerminals?.terminal_ids||[];if(ge.length>0){const z=ge.map(async le=>{try{const Ne=await fetch(`/api/log-processing/terminal/${le}/statistics`);if(Ne.ok){const D=await Ne.json();return{[le]:D}}}catch{console.warn(`Failed to get statistics for terminal ${le}, using mock data`)}return{[le]:f(le)}}),Ae=await Promise.all(z);m.value=Object.assign({},...Ae)}else m.value=x();try{c.value=await H()}catch{console.warn("Processing queue not available, using mock data"),c.value=H()}await F(),s.value&&await C(s.value)}catch(ge){console.error("Failed to refresh statistics:",ge),o.value=U(),m.value=x(),c.value=H()}finally{n.value=!1}}},R=async ge=>{s.value=ge,await C(ge)},C=async ge=>{try{const z=await fetch(`/api/log-processing/terminal/${ge}/logs?limit=20`);z.ok&&(u.value=await z.json());const Ae=await fetch(`/api/log-processing/terminal/${ge}/errors`);Ae.ok&&(d.value=await Ae.json());const le=await fetch(`/api/log-processing/terminal/${ge}/patterns`);le.ok&&(l.value=await le.json())}catch(z){console.error(`Failed to refresh details for terminal ${ge}:`,z)}},I=ge=>m.value[ge]?.total_entries||0,b=ge=>m.value[ge]?.total_bytes||0,y=ge=>0,_=ge=>m.value[ge]?.last_update||null,w=ge=>{const z=m.value[ge];return{"status-active":z&&z.last_update,"status-inactive":!z||!z.last_update}},E=ge=>Array.from({length:24},()=>Math.floor(Math.random()*100)),M=ge=>{if(ge===0)return"0 B";const z=1024,Ae=["B","KB","MB","GB"],le=Math.floor(Math.log(ge)/Math.log(z));return parseFloat((ge/Math.pow(z,le)).toFixed(1))+" "+Ae[le]},V=ge=>ge?new Date(ge).toLocaleString():"N/A",q=(ge,z)=>ge?ge.length>z?ge.substring(0,z)+"...":ge:"",$=ge=>({"log-error":ge==="ERROR","log-warning":ge==="WARNING","log-info":ge==="INFO","log-debug":ge==="DEBUG"}),U=()=>({activeTerminals:{count:3,terminal_ids:["terminal-1","terminal-2","terminal-dev"]},pattern_analysis:{vector_storage:{total_documents:247}},system_status:{processing_active:!0,background_tasks:2}}),f=ge=>({total_entries:Math.floor(Math.random()*1e3)+100,total_bytes:Math.floor(Math.random()*1e6)+5e4,last_update:new Date().toISOString()}),x=()=>({"terminal-1":f(),"terminal-2":f(),"terminal-dev":f()}),H=()=>({redis_pending:Math.floor(Math.random()*50),sql_pending:Math.floor(Math.random()*20),vector_pending:Math.floor(Math.random()*10),processing_rate:Math.floor(Math.random()*100)+50}),F=async()=>{h.value=[{id:"1",type:"ERROR",matches:45,frequency:78,trend:"up",content:"FileNotFoundError: [Errno 2] No such file or directory"},{id:"2",type:"COMMAND",matches:32,frequency:156,trend:"stable",content:"npm install express"},{id:"3",type:"WARNING",matches:28,frequency:43,trend:"down",content:"DeprecationWarning: Use of deprecated function"}],A.value=[{id:"1",error_level:"ERROR",matches_24h:15,severity_score:.8,content:"Connection timeout to database server",terminal_count:2,total_frequency:45,first_seen:new Date(Date.now()-864e5).toISOString()}],T.value=[{id:"1",command_type:"NPM",frequency:25,success_rate:.92,content:"npm run build",error_count:2,risk_score:.1,last_seen:new Date().toISOString()}],k.value={total_error_patterns:12,total_warning_patterns:8,critical_errors:3,total_error_matches:67}},se=ge=>{const z=c.value[`${ge}_pending`]||0;return z>100?"queue-high":z>50?"queue-medium":"queue-normal"},me=ge=>{switch(ge){case"up":return"↗️";case"down":return"↘️";default:return"→"}},X=ge=>({"success-high":ge>.9,"success-medium":ge>.7,"success-low":ge<=.7}),G=he(""),ue=he({dataSource:"all",terminalId:null,logLevel:null,timeRange:"24h"}),be=he([]),ke=he("recent"),je=he(!1),Y=he(!1),Z=he(!1),de=[{title:"All Sources",value:"all"},{title:"Recent Logs",value:"recent"},{title:"Structured Logs",value:"structured"},{title:"Patterns",value:"patterns"}],xe=ee(()=>[{title:"All Terminals",value:null},...Object.keys(m.value).map(ge=>({title:ge,value:ge}))]),Te=[{title:"All Levels",value:null},{title:"ERROR",value:"ERROR"},{title:"WARNING",value:"WARNING"},{title:"INFO",value:"INFO"},{title:"DEBUG",value:"DEBUG"}],Be=[{title:"Last Hour",value:"1h"},{title:"Last 24 Hours",value:"24h"},{title:"Last 7 Days",value:"7d"},{title:"Last 30 Days",value:"30d"}],$e=async()=>{if(G.value.trim()){Y.value=!0,je.value=!0;try{be.value=[{id:"1",source:"recent",terminal_id:"terminal-1",timestamp:new Date().toISOString(),raw_output:`Error: ${G.value} not found in system logs`,content:`Error: ${G.value} not found in system logs`},{id:"2",source:"structured",terminal_id:"terminal-2",timestamp:new Date(Date.now()-36e5).toISOString(),log_type:"COMMAND",error_level:"INFO",command:`search ${G.value}`,output_text:`Searching for ${G.value}...`}],G.value.toLowerCase().includes("error")&&be.value.push({id:"3",source:"patterns",pattern_type:"ERROR",frequency:15,similarity:.85,content:`Pattern match for error: ${G.value}`,terminal_count:2,severity_score:.7})}catch(ge){console.error("Search failed:",ge)}finally{Y.value=!1}}},Fe=ee(()=>{const ge={};return be.value.forEach(z=>{const Ae=new Date(z.timestamp).toDateString();ge[Ae]||(ge[Ae]=[]),ge[Ae].push(z)}),ge}),Ve=(ge,z)=>{if(!ge||!z)return ge;const Ae=new RegExp(`(${z})`,"gi");return ge.replace(Ae,"<mark>$1</mark>")},Re=ge=>({"timeline-error":ge.error_level==="ERROR","timeline-warning":ge.error_level==="WARNING","timeline-pattern":ge.source==="patterns"}),Qe=ge=>({"marker-error":ge.error_level==="ERROR","marker-warning":ge.error_level==="WARNING","marker-pattern":ge.source==="patterns"}),Ke=ge=>new Date(ge).toLocaleDateString(),Ge=ge=>new Date(ge).toLocaleTimeString(),tt=()=>{if(!t.service||!t.service.socket){console.warn("Socket.IO not available for log monitoring");return}const ge=t.service.socket;ge.on("log_system_stats",z=>{o.value=z.stats}),ge.on("log_terminal_stats",z=>{z.terminal_id&&z.stats&&(m.value[z.terminal_id]=z.stats)}),ge.on("log_monitor_subscribed",z=>{console.log("Subscribed to log monitoring:",z),i.value=!0}),ge.on("log_monitor_error",z=>{console.error("Log monitor error:",z.error),i.value=!1}),ge.on("log_search_results",z=>{z.query===G.value&&(be.value=z.results)}),ge.emit("log_monitor_subscribe",{terminal_id:"all"}),i.value=!0},st=()=>{if(!t.service||!t.service.socket)return;const ge=t.service.socket;ge.emit("log_monitor_unsubscribe",{terminal_id:"all"}),ge.off("log_system_stats"),ge.off("log_terminal_stats"),ge.off("log_monitor_subscribed"),ge.off("log_monitor_error"),ge.off("log_search_results"),i.value=!1};return gn(()=>{B(),tt(),a.value&&!i.value&&(p=setInterval(B,1e4))}),Ii(()=>{p&&clearInterval(p),st()}),rt(a,ge=>{p&&(clearInterval(p),p=null),ge&&!i.value&&(p=setInterval(B,1e4))}),rt(i,ge=>{ge&&p?(clearInterval(p),p=null):!ge&&a.value&&(p=setInterval(B,1e4))}),(ge,z)=>{const Ae=La("v-btn"),le=La("v-switch"),Ne=La("v-tab"),D=La("v-tabs"),j=La("v-tabs-window-item"),W=La("v-tabs-window"),K=La("v-text-field"),J=La("v-select");return fe(),_e("div",Q7,[S("div",J7,[z[13]||(z[13]=S("h3",null,"Terminal Log Monitor",-1)),S("div",ex,[Q(Ae,{size:"small",icon:"mdi-refresh",onClick:B,loading:n.value},null,8,["loading"]),Q(le,{modelValue:a.value,"onUpdate:modelValue":z[0]||(z[0]=P=>a.value=P),label:"Auto Refresh",density:"compact","hide-details":""},null,8,["modelValue"])])]),S("div",tx,[z[18]||(z[18]=S("h4",null,"System Overview",-1)),S("div",nx,[S("div",ax,[S("div",sx,ie(o.value.activeTerminals?.count||0),1),z[14]||(z[14]=S("div",{class:"metric-label"},"Active Terminals",-1))]),S("div",ix,[S("div",rx,ie(L.value),1),z[15]||(z[15]=S("div",{class:"metric-label"},"Total Log Volume",-1))]),S("div",ox,[S("div",lx,ie(o.value.pattern_analysis?.vector_storage?.total_documents||0),1),z[16]||(z[16]=S("div",{class:"metric-label"},"Stored Patterns",-1))]),S("div",cx,[S("div",{class:Me(["metric-value",O.value])},ie(o.value.system_status?.processing_active?"Active":"Inactive"),3),z[17]||(z[17]=S("div",{class:"metric-label"},"Processing Status",-1))])])]),S("div",ux,[z[26]||(z[26]=S("h4",null,"Unprocessed Logs",-1)),S("div",dx,[S("div",mx,[z[19]||(z[19]=S("div",{class:"unprocessed-header"},[S("span",{class:"stage-icon"},"📥"),S("span",{class:"stage-name"},"Redis Queue")],-1)),S("div",{class:Me(["unprocessed-value",se("redis")])},ie(c.value.redis_pending||0),3),z[20]||(z[20]=S("div",{class:"unprocessed-label"},"Pending logs in Redis buffer",-1))]),S("div",fx,[z[21]||(z[21]=S("div",{class:"unprocessed-header"},[S("span",{class:"stage-icon"},"⚙️"),S("span",{class:"stage-name"},"SQL Processing")],-1)),S("div",{class:Me(["unprocessed-value",se("sql")])},ie(c.value.sql_pending||0),3),z[22]||(z[22]=S("div",{class:"unprocessed-label"},"Waiting for SQL processing",-1))]),S("div",vx,[z[23]||(z[23]=S("div",{class:"unprocessed-header"},[S("span",{class:"stage-icon"},"🧠"),S("span",{class:"stage-name"},"Vector Processing")],-1)),S("div",{class:Me(["unprocessed-value",se("vector")])},ie(c.value.vector_pending||0),3),z[24]||(z[24]=S("div",{class:"unprocessed-label"},"Awaiting pattern extraction",-1))]),S("div",hx,[z[25]||(z[25]=S("div",{class:"unprocessed-header"},[S("span",{class:"stage-icon"},"📊"),S("span",{class:"stage-name"},"Total Unprocessed")],-1)),S("div",gx,ie(g.value),1),S("div",px,ie(c.value.processing_rate||0)+" logs/min processing rate",1)])])]),S("div",_x,[z[35]||(z[35]=S("h4",null,"Pattern Analysis & Ranking",-1)),S("div",bx,[S("div",yx,[Q(D,{modelValue:v.value,"onUpdate:modelValue":z[1]||(z[1]=P=>v.value=P),density:"compact"},{default:Lt(()=>[Q(Ne,{value:"matches"},{default:Lt(()=>z[27]||(z[27]=[Zt("Top Matches")])),_:1,__:[27]}),Q(Ne,{value:"errors"},{default:Lt(()=>z[28]||(z[28]=[Zt("Error Patterns")])),_:1,__:[28]}),Q(Ne,{value:"commands"},{default:Lt(()=>z[29]||(z[29]=[Zt("Command Patterns")])),_:1,__:[29]})]),_:1},8,["modelValue"])]),Q(W,{modelValue:v.value,"onUpdate:modelValue":z[2]||(z[2]=P=>v.value=P)},{default:Lt(()=>[Q(j,{value:"matches"},{default:Lt(()=>[S("div",wx,[z[30]||(z[30]=S("div",{class:"pattern-header-row"},[S("span",{class:"pattern-col-rank"},"#"),S("span",{class:"pattern-col-type"},"Type"),S("span",{class:"pattern-col-matches"},"Matches (24h)"),S("span",{class:"pattern-col-trend"},"Trend"),S("span",{class:"pattern-col-content"},"Pattern")],-1)),(fe(!0),_e(lt,null,Ut(h.value,(P,te)=>(fe(),_e("div",{key:P.id,class:Me(["pattern-ranking-item",{"high-activity":P.matches>50}])},[S("span",Sx,ie(te+1),1),S("span",{class:Me(["pattern-type",`type-${P.type.toLowerCase()}`])},ie(P.type),3),S("span",kx,[S("span",xx,ie(P.matches),1),S("span",Tx,ie(P.frequency)+"x total",1)]),S("span",Cx,[S("div",{class:Me(["trend-indicator",P.trend])},ie(me(P.trend)),3)]),S("span",Ax,ie(q(P.content,80)),1)],2))),128))])]),_:1}),Q(j,{value:"errors"},{default:Lt(()=>[S("div",Ex,[S("div",Mx,[S("div",Rx,[S("div",Ix,ie(k.value.total_error_patterns||0),1),z[31]||(z[31]=S("div",{class:"stat-label"},"Error Patterns",-1))]),S("div",Bx,[S("div",Lx,ie(k.value.total_warning_patterns||0),1),z[32]||(z[32]=S("div",{class:"stat-label"},"Warning Patterns",-1))]),S("div",Ox,[S("div",Fx,ie(k.value.critical_errors||0),1),z[33]||(z[33]=S("div",{class:"stat-label"},"Critical Errors (24h)",-1))]),S("div",Vx,[S("div",Px,ie(k.value.total_error_matches||0),1),z[34]||(z[34]=S("div",{class:"stat-label"},"Total Error Matches",-1))])]),S("div",Dx,[(fe(!0),_e(lt,null,Ut(A.value,P=>(fe(),_e("div",{key:P.id,class:Me(["error-pattern-item",`severity-${P.severity_level}`])},[S("div",jx,[S("span",{class:Me(["error-level",`level-${P.error_level.toLowerCase()}`])},ie(P.error_level),3),S("span",Nx,ie(P.matches_24h)+" matches today",1),S("span",$x," Severity: "+ie((P.severity_score*10).toFixed(1))+"/10 ",1)]),S("div",Hx,ie(q(P.content,120)),1),S("div",zx,[S("span",Ux,"Terminals: "+ie(P.terminal_count),1),S("span",qx,"Total: "+ie(P.total_frequency)+"x",1),S("span",Wx,"First: "+ie(V(P.first_seen)),1)])],2))),128))])])]),_:1}),Q(j,{value:"commands"},{default:Lt(()=>[S("div",Yx,[(fe(!0),_e(lt,null,Ut(T.value,P=>(fe(),_e("div",{key:P.id,class:Me(["command-pattern-item",{"high-risk":P.risk_score>.7}])},[S("div",Xx,[S("span",Gx,ie(P.command_type||"GENERAL"),1),S("span",Kx,ie(P.frequency)+"x executed",1),S("span",{class:Me(["command-success-rate",X(P.success_rate)])},ie((P.success_rate*100).toFixed(1))+"% success ",3)]),S("div",Zx,[S("code",null,ie(q(P.content,100)),1)]),S("div",Qx,[S("span",Jx,"Errors: "+ie(P.error_count),1),S("span",eT,"Risk: "+ie((P.risk_score*10).toFixed(1))+"/10",1),S("span",tT,"Last: "+ie(V(P.last_seen)),1)])],2))),128))])]),_:1})]),_:1},8,["modelValue"])])]),S("div",nT,[z[42]||(z[42]=S("h4",null,"Terminal Activity",-1)),S("div",aT,[(fe(!0),_e(lt,null,Ut(o.value.activeTerminals?.terminal_ids||[],P=>(fe(),_e("div",{key:P,class:Me(["terminal-item",{selected:s.value===P}]),onClick:te=>R(P)},[S("div",iT,[S("div",rT,ie(P),1),S("div",{class:Me(["terminal-status",w(P)])},z[36]||(z[36]=[S("span",{class:"status-dot"},null,-1),Zt(" Active ")]),2)]),S("div",oT,[S("div",lT,[z[37]||(z[37]=S("span",{class:"metric-name"},"Logs:",-1)),S("span",cT,ie(I(P)),1)]),S("div",uT,[z[38]||(z[38]=S("span",{class:"metric-name"},"Bytes:",-1)),S("span",dT,ie(M(b(P))),1)]),S("div",mT,[z[39]||(z[39]=S("span",{class:"metric-name"},"Errors:",-1)),S("span",fT,ie(y()),1)]),S("div",vT,[z[40]||(z[40]=S("span",{class:"metric-name"},"Last Update:",-1)),S("span",hT,ie(V(_(P))),1)])]),S("div",gT,[z[41]||(z[41]=S("div",{class:"chart-title"},"Recent Activity (1h)",-1)),S("div",pT,[(fe(!0),_e(lt,null,Ut(E(),(te,ae)=>(fe(),_e("div",{key:ae,class:"volume-bar",style:vt({height:`${Math.min(te/100,100)}%`}),title:`${te} logs`},null,12,_T))),128))])])],10,sT))),128))])]),s.value?(fe(),_e("div",bT,[S("h4",null,"Terminal Details: "+ie(s.value),1),S("div",yT,[S("div",wT,[Q(D,{modelValue:r.value,"onUpdate:modelValue":z[3]||(z[3]=P=>r.value=P),density:"compact"},{default:Lt(()=>[Q(Ne,{value:"recent"},{default:Lt(()=>z[43]||(z[43]=[Zt("Recent Logs")])),_:1,__:[43]}),Q(Ne,{value:"errors"},{default:Lt(()=>z[44]||(z[44]=[Zt("Errors")])),_:1,__:[44]}),Q(Ne,{value:"patterns"},{default:Lt(()=>z[45]||(z[45]=[Zt("Patterns")])),_:1,__:[45]})]),_:1},8,["modelValue"])]),Q(W,{modelValue:r.value,"onUpdate:modelValue":z[4]||(z[4]=P=>r.value=P)},{default:Lt(()=>[Q(j,{value:"recent"},{default:Lt(()=>[S("div",ST,[(fe(!0),_e(lt,null,Ut(u.value,P=>(fe(),_e("div",{key:P.timestamp,class:Me(["log-entry",$(P.error_level)])},[S("div",kT,[S("span",xT,ie(V(P.timestamp)),1),S("span",TT,ie(P.error_level),1),S("span",CT,ie(P.log_type),1)]),S("div",AT,[P.command?(fe(),_e("div",ET,"$ "+ie(P.command),1)):nt("",!0),S("div",MT,ie(q(P.output_text,200)),1)])],2))),128))])]),_:1}),Q(j,{value:"errors"},{default:Lt(()=>[S("div",RT,[(fe(!0),_e(lt,null,Ut(d.value,P=>(fe(),_e("div",{key:P.id,class:"error-item"},[S("div",IT,[S("span",{class:Me(["error-level",$(P.error_level)])},ie(P.error_level),3),S("span",BT,ie(P.count)+"x",1),S("span",LT,ie(V(P.last_seen)),1)]),S("div",OT,ie(q(P.output_text,150)),1)]))),128))])]),_:1}),Q(j,{value:"patterns"},{default:Lt(()=>[S("div",FT,[(fe(!0),_e(lt,null,Ut(l.value,P=>(fe(),_e("div",{key:P.id,class:"pattern-item"},[S("div",VT,[S("span",PT,ie(P.pattern_type),1),S("span",DT,ie(P.frequency)+"x",1),S("span",jT,"Score: "+ie(P.severity_score?.toFixed(2)),1)]),S("div",NT,ie(q(P.content,100)),1)]))),128))])]),_:1})]),_:1},8,["modelValue"])])])):nt("",!0),S("div",$T,[z[51]||(z[51]=S("h4",null,"Log Search & Analysis",-1)),S("div",HT,[S("div",zT,[S("div",UT,[Q(K,{modelValue:G.value,"onUpdate:modelValue":z[5]||(z[5]=P=>G.value=P),label:"Search logs, patterns, or commands","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"compact",onKeyup:vc($e,["enter"]),clearable:""},null,8,["modelValue"]),Q(Ae,{color:"primary",onClick:$e,loading:Y.value,size:"large"},{default:Lt(()=>z[46]||(z[46]=[Zt(" Search ")])),_:1,__:[46]},8,["loading"])]),S("div",qT,[Q(J,{modelValue:ue.value.dataSource,"onUpdate:modelValue":z[6]||(z[6]=P=>ue.value.dataSource=P),items:de,label:"Data Source",variant:"outlined",density:"compact",style:{"max-width":"200px"}},null,8,["modelValue"]),Q(J,{modelValue:ue.value.terminalId,"onUpdate:modelValue":z[7]||(z[7]=P=>ue.value.terminalId=P),items:xe.value,label:"Terminal",variant:"outlined",density:"compact",style:{"max-width":"200px"},clearable:""},null,8,["modelValue","items"]),Q(J,{modelValue:ue.value.logLevel,"onUpdate:modelValue":z[8]||(z[8]=P=>ue.value.logLevel=P),items:Te,label:"Log Level",variant:"outlined",density:"compact",style:{"max-width":"150px"},clearable:""},null,8,["modelValue"]),Q(J,{modelValue:ue.value.timeRange,"onUpdate:modelValue":z[9]||(z[9]=P=>ue.value.timeRange=P),items:Be,label:"Time Range",variant:"outlined",density:"compact",style:{"max-width":"150px"}},null,8,["modelValue"])])]),be.value.length>0||je.value?(fe(),_e("div",WT,[S("div",YT,[S("h5",null,"Search Results ("+ie(be.value.length)+")",1),S("div",XT,[Q(Ae,{size:"small",variant:"outlined",onClick:z[10]||(z[10]=P=>Z.value=!Z.value),color:Z.value?"primary":"default"},{default:Lt(()=>[Zt(ie(Z.value?"List View":"Timeline View"),1)]),_:1},8,["color"])])]),Z.value?(fe(),_e("div",GT,[S("div",KT,[z[47]||(z[47]=S("div",{class:"timeline-line"},null,-1)),(fe(!0),_e(lt,null,Ut(Fe.value,(P,te)=>(fe(),_e("div",{key:te,class:"timeline-day-group"},[S("div",ZT,[S("h6",null,ie(Ke(te)),1),S("span",QT,ie(P.length)+" events",1)]),S("div",JT,[(fe(!0),_e(lt,null,Ut(P,ae=>(fe(),_e("div",{key:`timeline-${ae.source}-${ae.id}`,class:Me(["timeline-event",Re(ae)])},[S("div",{class:Me(["timeline-marker",Qe(ae)])},null,2),S("div",eC,[S("div",tC,[S("span",nC,ie(Ge(ae.timestamp)),1),S("span",aC,ie(ae.terminal_id),1),S("span",{class:Me(["timeline-type",`type-${ae.source}`])},ie(ae.source),3),ae.error_level?(fe(),_e("span",{key:0,class:Me(["timeline-level",$(ae.error_level)])},ie(ae.error_level),3)):nt("",!0)]),S("div",sC,[ae.command?(fe(),_e("div",iC,[S("code",null,ie(q(ae.command,60)),1)])):nt("",!0),S("div",rC,ie(q(ae.content||ae.output_text||ae.raw_output,100)),1)])])],2))),128))])]))),128))])])):(fe(),_e("div",oC,[S("div",lC,[Q(D,{modelValue:ke.value,"onUpdate:modelValue":z[11]||(z[11]=P=>ke.value=P),density:"compact"},{default:Lt(()=>[Q(Ne,{value:"recent"},{default:Lt(()=>[Zt("Recent Logs ("+ie(be.value.filter(P=>P.source==="recent").length)+")",1)]),_:1}),Q(Ne,{value:"structured"},{default:Lt(()=>[Zt("Structured ("+ie(be.value.filter(P=>P.source==="structured").length)+")",1)]),_:1}),Q(Ne,{value:"patterns"},{default:Lt(()=>[Zt("Patterns ("+ie(be.value.filter(P=>P.source==="patterns").length)+")",1)]),_:1})]),_:1},8,["modelValue"])]),Q(W,{modelValue:ke.value,"onUpdate:modelValue":z[12]||(z[12]=P=>ke.value=P)},{default:Lt(()=>[Q(j,{value:"recent"},{default:Lt(()=>[S("div",cC,[(fe(!0),_e(lt,null,Ut(be.value.filter(P=>P.source==="recent"),P=>(fe(),_e("div",{key:`recent-${P.id}`,class:"search-result-item"},[S("div",uC,[S("span",dC,ie(P.terminal_id),1),S("span",mC,ie(V(P.timestamp)),1),S("span",fC,ie(P.raw_output?"Raw Output":"Processed Log"),1)]),S("div",vC,[S("div",{innerHTML:Ve(P.content||P.raw_output,G.value)},null,8,hC)])]))),128))])]),_:1}),Q(j,{value:"structured"},{default:Lt(()=>[S("div",gC,[(fe(!0),_e(lt,null,Ut(be.value.filter(P=>P.source==="structured"),P=>(fe(),_e("div",{key:`structured-${P.id}`,class:Me(["search-result-item structured",$(P.error_level)])},[S("div",pC,[S("span",_C,ie(P.terminal_id),1),S("span",bC,ie(V(P.timestamp)),1),S("span",{class:Me(["result-level",$(P.error_level)])},ie(P.error_level),3),S("span",yC,ie(P.log_type),1)]),S("div",wC,[P.command?(fe(),_e("div",SC,[z[48]||(z[48]=S("strong",null,"Command:",-1)),S("code",{innerHTML:Ve(P.command,G.value)},null,8,kC)])):nt("",!0),S("div",xC,[S("div",{innerHTML:Ve(P.output_text,G.value)},null,8,TC)])])],2))),128))])]),_:1}),Q(j,{value:"patterns"},{default:Lt(()=>[S("div",CC,[(fe(!0),_e(lt,null,Ut(be.value.filter(P=>P.source==="patterns"),P=>(fe(),_e("div",{key:`pattern-${P.id}`,class:"search-result-item pattern"},[S("div",AC,[S("span",{class:Me(["result-type pattern-type",`type-${P.pattern_type?.toLowerCase()}`])},ie(P.pattern_type||"UNKNOWN"),3),S("span",EC,ie(P.frequency)+"x occurrences",1),S("span",MC,ie((P.similarity*100).toFixed(1))+"% match",1),S("span",RC,ie(P.terminal_count||0)+" terminals",1)]),S("div",IC,[S("div",{innerHTML:Ve(P.content,G.value)},null,8,BC)]),S("div",LC,[P.severity_score?(fe(),_e("span",OC," Severity: "+ie((P.severity_score*10).toFixed(1))+"/10 ",1)):nt("",!0),P.risk_score?(fe(),_e("span",FC," Risk: "+ie((P.risk_score*10).toFixed(1))+"/10 ",1)):nt("",!0),P.first_seen?(fe(),_e("span",VC," First seen: "+ie(V(P.first_seen)),1)):nt("",!0)])]))),128))])]),_:1})]),_:1},8,["modelValue"])]))])):je.value&&be.value.length===0?(fe(),_e("div",PC,z[49]||(z[49]=[S("div",{class:"no-results-icon"},"🔍",-1),S("div",{class:"no-results-text"},[S("h6",null,"No results found"),S("p",null,"Try adjusting your search query or filters")],-1)]))):(fe(),_e("div",DC,z[50]||(z[50]=[jm('<h6 data-v-fd363fee>Search across all log data</h6><div class="search-tips" data-v-fd363fee><div class="tip-section" data-v-fd363fee><strong data-v-fd363fee>Data Sources:</strong><ul data-v-fd363fee><li data-v-fd363fee><strong data-v-fd363fee>Recent Logs:</strong> Raw terminal output from Redis buffer</li><li data-v-fd363fee><strong data-v-fd363fee>Structured:</strong> Processed logs with command/output separation</li><li data-v-fd363fee><strong data-v-fd363fee>Patterns:</strong> Extracted patterns from Vector DB</li></ul></div><div class="tip-section" data-v-fd363fee><strong data-v-fd363fee>Search Tips:</strong><ul data-v-fd363fee><li data-v-fd363fee>Use quotes for exact phrases: &quot;error message&quot;</li><li data-v-fd363fee>Search for error types, commands, or file names</li><li data-v-fd363fee>Combine filters to narrow down results</li></ul></div></div>',2)])))])]),S("div",jC,[z[57]||(z[57]=S("h4",null,"Processing Pipeline",-1)),S("div",NC,[S("div",{class:Me(["pipeline-stage",{active:o.value.system_status?.processing_active}])},z[52]||(z[52]=[S("div",{class:"stage-icon"},"📥",-1),S("div",{class:"stage-name"},"Log Capture",-1),S("div",{class:"stage-status"},"Redis Buffer",-1)]),2),z[55]||(z[55]=S("div",{class:"pipeline-arrow"},"→",-1)),S("div",{class:Me(["pipeline-stage",{active:o.value.system_status?.processing_active}])},z[53]||(z[53]=[S("div",{class:"stage-icon"},"⚙️",-1),S("div",{class:"stage-name"},"Processing",-1),S("div",{class:"stage-status"},"SQL Storage",-1)]),2),z[56]||(z[56]=S("div",{class:"pipeline-arrow"},"→",-1)),S("div",{class:Me(["pipeline-stage",{active:o.value.system_status?.processing_active}])},z[54]||(z[54]=[S("div",{class:"stage-icon"},"🧠",-1),S("div",{class:"stage-name"},"Pattern Analysis",-1),S("div",{class:"stage-status"},"Vector DB",-1)]),2)])])])}}},HC=tn($C,[["__scopeId","data-v-fd363fee"]]),zC={class:"log-monitor-tab-container"},UC=Jt({__name:"LogMonitorTab",setup(e){return(t,n)=>(fe(),_e("div",zC,[Q(HC)]))}}),qC=tn(UC,[["__scopeId","data-v-8b9a84ef"]]),WC=Jt({__name:"CommandQueueManager",props:{activeTab:{}},setup(e,{expose:t}){const n=e,a=he([]),s=he(!1),i=he(!1),r=Vi(),o=ka();rt(i,A=>{A&&!s.value&&u()}),rt(()=>o.session.id,A=>{A&&!i.value&&setTimeout(()=>{i.value||(i.value=!0)},200)}),rt(()=>n.activeTab,(A,T)=>{A&&A.id!==T?.id&&(i.value=!1,a.value=[],A.subType==="inventory"&&A.serverContext&&m(A))});const m=A=>{if(!A||A.subType!=="inventory"||!A.serverContext)return;a.value=a.value.filter(k=>k.tabId!==A.id),r.getTabCommands(A.id).forEach(k=>{a.value.push({id:`${A.id}-${k.id}`,command:k.command,timestamp:new Date,executed:!1,tabId:A.id})}),i.value&&u()},u=async()=>{if(!n.activeTab||s.value)return;const A=a.value.filter(T=>T.tabId===n.activeTab.id&&!T.executed);if(A.length!==0){s.value=!0;try{o.session.id||await d(),await new Promise(T=>setTimeout(T,300));for(const T of A)o.session.id&&(await l(T.command),T.executed=!0);n.activeTab.id&&r.markCommandsExecuted(n.activeTab.id)}catch(T){console.error("Error executing queued commands:",T)}finally{s.value=!1,a.value=a.value.filter(T=>!T.executed)}}},d=()=>new Promise((A,T)=>{const k=setTimeout(()=>{T(new Error("Terminal session timeout"))},1e4),p=()=>{o.session.id?(clearTimeout(k),A()):setTimeout(p,100)};p()}),l=A=>new Promise(T=>{o.sendInput(A);const k=A.includes("ssh ")?1e3:300;setTimeout(T,k)});return t({commandQueue:a,isExecutingQueue:s,terminalReady:i,queueInventoryCommands:m,executeQueuedCommands:u,getStatusClass:()=>o.session.id?s.value?"executing":i.value?"ready":"waiting":"connecting",getStatusText:()=>o.session.id?s.value?"Executing commands...":i.value&&a.value.length>0?"Ready to execute":i.value?"Terminal ready":"Waiting for terminal...":"Connecting to terminal...",getProgressPercentage:()=>{if(a.value.length===0)return 0;const A=a.value.filter(T=>T.executed).length;return Math.round(A/a.value.length*100)}}),(A,T)=>null}}),YC=Jt({__name:"SelectionPopupManager",setup(e,{expose:t}){const n=he(!1),a=he({x:0,y:0}),s=he(""),i=Vi(),r=ka(),o=()=>{n.value=!1,s.value=""},m=async()=>{await d()?console.log("Text copied successfully"):console.warn("Failed to copy text to clipboard")},u=(l,c)=>{console.log("Sending text to AI:",l,"with prompt:",c);const v=i.createTab("ai-agent","AI Analysis");i.switchToTab(v.id);const A={type:"user",message:c||`Please analyze this terminal output: ${l}`,timestamp:new Date,source:"terminal_selection",terminalOutput:l};r.sendChatMessage(A)},d=async()=>{if(s.value)try{return await navigator.clipboard.writeText(s.value),console.log("Text copied to clipboard"),!0}catch(l){return console.warn("Failed to copy to clipboard:",l),!1}return!1};return t({showSelectionPopup:n,popupPosition:a,selectedText:s,hideSelectionPopup:o,onCopyAction:m,onSendToAI:u,copySelection:d}),(l,c)=>null}}),XC={key:0,class:"command-execution-overlay"},GC={class:"execution-status"},KC={class:"progress-info"},ZC={key:1,class:"tab-content"},QC={key:2,class:"unknown-tab-content"},JC={class:"unknown-message"},eA={key:2,class:"no-tabs-message"},tA=Jt({__name:"TabContentArea",props:{isTerminalPaused:{type:Boolean},isSupervisorLocked:{type:Boolean}},emits:["terminal-initialized"],setup(e){const t=he(null),n=he(null),a=Vi(),s=ee(()=>a.activeTab),i=ee(()=>t.value?.isExecutingQueue||!1),r=ee(()=>t.value?.commandQueue||[]),o=ee(()=>n.value?.showSelectionPopup||!1),m=ee(()=>n.value?.popupPosition||{x:0,y:0}),u=ee(()=>n.value?.selectedText||"");gn(async()=>{console.log("TerminalView mounted")});const d=()=>{n.value?.hideSelectionPopup()};return(l,c)=>(fe(),_e("div",{class:"terminal-view",onContextmenu:c[0]||(c[0]=Hn(()=>{},["prevent"]))},[i.value&&xt(a).activeTab?.subType==="inventory"?(fe(),_e("div",XC,[S("div",GC,[c[1]||(c[1]=S("div",{class:"spinner"},null,-1)),S("h3",null,"Initializing "+ie(xt(a).activeTab?.serverContext?.name)+"...",1),c[2]||(c[2]=S("p",null,"Executing pre-configured commands",-1)),S("div",KC,ie(r.value.filter(v=>v.executed).length)+" / "+ie(r.value.length)+" commands completed ",1)])])):nt("",!0),xt(a).isLogMonitorActive?(fe(),_e("div",ZC,[Q(qC)])):nt("",!0),(fe(!0),_e(lt,null,Ut(xt(a).tabs,v=>on((fe(),_e("div",{key:v.id,class:"tab-content"},[v.type==="terminal"?(fe(),Qa(X7,{key:0,"tab-id":v.id,"sub-type":v.subType,onClick:d},null,8,["tab-id","sub-type"])):v.type==="ai-agent"?(fe(),Qa(Z7,{key:1,"tab-id":v.id},null,8,["tab-id"])):(fe(),_e("div",QC,[S("div",JC,[S("h4",null,"Unknown tab type: "+ie(v.type),1),c[3]||(c[3]=S("p",null,"This tab type is not supported.",-1))])]))])),[[os,v.isActive&&!xt(a).isLogMonitorActive]])),128)),xt(a).tabs.length===0?(fe(),_e("div",eA,c[4]||(c[4]=[S("h3",null,"No active sessions",-1),S("p",null,"Click the + button to create a new terminal or AI chat session.",-1)]))):nt("",!0),Q(j7,{show:o.value,position:m.value,"selected-text":u.value,onCopy:n.value?.onCopyAction,onSendToAi:n.value?.onSendToAI,onHide:n.value?.hideSelectionPopup},null,8,["show","position","selected-text","onCopy","onSendToAi","onHide"]),Q(WC,{ref_key:"commandQueueManagerRef",ref:t,"active-tab":s.value,style:{display:"none"}},null,8,["active-tab"]),Q(YC,{ref_key:"selectionPopupManagerRef",ref:n,style:{display:"none"}},null,512)],32))}}),nA=tn(tA,[["__scopeId","data-v-e7cefe16"]]),aA=Jt({__name:"MainContentView",props:{isTerminalPaused:{type:Boolean},isSupervisorLocked:{type:Boolean}},emits:["terminal-initialized"],setup(e){return(t,n)=>(fe(),_e("div",{class:"main-content-view",onContextmenu:n[1]||(n[1]=Hn(()=>{},["prevent"]))},[Q(nA,{"is-terminal-paused":t.isTerminalPaused,"is-supervisor-locked":t.isSupervisorLocked,onTerminalInitialized:n[0]||(n[0]=a=>t.$emit("terminal-initialized"))},null,8,["is-terminal-paused","is-supervisor-locked"])],32))}}),sA=tn(aA,[["__scopeId","data-v-82430cfd"]]),iA=Jt({__name:"MainContainer",setup(e,{expose:t}){const n=ka(),a=he(!1),s=ee(()=>n.isSupervisorLocked),i=()=>{a.value=!1},r=()=>{a.value=!0},o=()=>{console.log("Terminal initialized in container")};return gn(async()=>{console.log("MainContainer mounted"),n.connect()}),t({pauseTerminal:r,resumeTerminal:i}),(m,u)=>(fe(),_e("div",{class:"main-container",onContextmenu:u[0]||(u[0]=Hn(()=>{},["prevent"]))},[Q(O7),Q(sA,{"is-terminal-paused":a.value,"is-supervisor-locked":s.value,onTerminalInitialized:o},null,8,["is-terminal-paused","is-supervisor-locked"]),Q(y7)],32))}}),rA=tn(iA,[["__scopeId","data-v-2bde2349"]]),oA=Jt({__name:"TerminalComponent",setup(e){return(t,n)=>(fe(),Qa(rA))}}),T0=tn(oA,[["__scopeId","data-v-8545aa50"]]),lA={class:"dev-jwt-register"},cA={class:"user-options"},uA={class:"user-type-buttons"},dA=["disabled"],mA=["disabled"],fA={key:0,class:"current-auth"},vA={class:"auth-info"},hA={class:"auth-field"},gA={class:"value"},pA={class:"auth-field"},_A={class:"auth-field"},bA={class:"value"},yA={class:"auth-field"},wA={class:"value"},SA={key:2,class:"jwt-display"},kA={class:"jwt-token"},xA=Jt({__name:"DevJWTRegister",setup(e){const t=he(!1),n=he(""),a=he("success"),s=he(""),i=he(null),r=h=>{const A={alg:"HS256",typ:"JWT"},T=Math.floor(Date.now()/1e3),k=T+24*60*60,p=h==="supervisor"?{sub:"dev-supervisor-001",email:"supervisor@aetherterm.dev",name:"Development Supervisor",isSupervisor:!0,roles:["supervisor","admin"],permissions:["terminal:supervise","admin:all"],iat:T,exp:k,iss:"aetherterm-dev"}:{sub:"dev-user-001",email:"user@aetherterm.dev",name:"Development User",isSupervisor:!1,roles:["user"],permissions:["terminal:access"],iat:T,exp:k,iss:"aetherterm-dev"},L=R=>btoa(JSON.stringify(R)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,""),O=L(A),g=L(p);return`${O}.${g}.dev-signature-not-verified`},o=async h=>{t.value=!0,n.value="";try{const A=r(h);localStorage.setItem("jwt_token",A),s.value=A,d(),n.value=`Successfully registered as ${h==="supervisor"?"Supervisor":"General User"}! Token stored in localStorage.`,a.value="success",setTimeout(()=>{window.location.reload()},2e3)}catch(A){console.error("Registration failed:",A),n.value="Registration failed. Please try again.",a.value="error"}finally{t.value=!1}},m=()=>{localStorage.removeItem("jwt_token"),sessionStorage.removeItem("jwt_token"),localStorage.removeItem("auth_token"),sessionStorage.removeItem("auth_token"),document.cookie="jwt_token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",document.cookie="auth_token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",s.value="",i.value=null,n.value="Authentication cleared. Page will refresh...",a.value="success",setTimeout(()=>{window.location.reload()},1500)},u=()=>{d()},d=()=>{const h=hl();if(h){const A=vl(h);A&&(i.value=A)}else i.value=null},l=h=>h?new Date(h*1e3).toLocaleString():"Not set",c=h=>{h.target.select()},v=async()=>{try{await navigator.clipboard.writeText(s.value),n.value="JWT token copied to clipboard!",a.value="success",setTimeout(()=>{n.value=""},3e3)}catch(h){console.error("Failed to copy to clipboard:",h),n.value="Failed to copy to clipboard",a.value="error"}};return gn(()=>{d()}),(h,A)=>(fe(),_e("div",lA,[A[10]||(A[10]=S("div",{class:"register-header"},[S("h3",null,"🔧 Development JWT Registration"),S("div",{class:"dev-notice"},[S("small",null,"⚠️ This is for development only and should be disabled in production")])],-1)),S("div",cA,[S("div",uA,[S("button",{onClick:A[0]||(A[0]=T=>o("general")),class:"register-btn general-user",disabled:t.value}," 👤 Register as General User ",8,dA),S("button",{onClick:A[1]||(A[1]=T=>o("supervisor")),class:"register-btn supervisor-user",disabled:t.value}," 👑 Register as Supervisor ",8,mA)]),S("div",{class:"quick-actions"},[S("button",{onClick:m,class:"clear-btn"},"🗑️ Clear Authentication"),S("button",{onClick:u,class:"show-auth-btn"},"🔍 Show Current Auth")])]),i.value?(fe(),_e("div",fA,[A[7]||(A[7]=S("h4",null,"Current Authentication",-1)),S("div",vA,[S("div",hA,[A[3]||(A[3]=S("span",{class:"label"},"Email:",-1)),S("span",gA,ie(i.value.email||"Not set"),1)]),S("div",pA,[A[4]||(A[4]=S("span",{class:"label"},"User Type:",-1)),S("span",{class:Me(["value",{supervisor:i.value.isSupervisor}])},ie(i.value.isSupervisor?"Supervisor":"General User"),3)]),S("div",_A,[A[5]||(A[5]=S("span",{class:"label"},"Roles:",-1)),S("span",bA,ie(i.value.roles?.join(", ")||"None"),1)]),S("div",yA,[A[6]||(A[6]=S("span",{class:"label"},"Token Expires:",-1)),S("span",wA,ie(l(i.value.exp)),1)])])])):nt("",!0),n.value?(fe(),_e("div",{key:1,class:Me(["registration-message",a.value])},ie(n.value),3)):nt("",!0),s.value?(fe(),_e("div",SA,[A[8]||(A[8]=S("h4",null,"Generated JWT Token",-1)),S("div",kA,[on(S("textarea",{"onUpdate:modelValue":A[2]||(A[2]=T=>s.value=T),readonly:"",rows:"8",class:"jwt-textarea",onClick:c},null,512),[[Er,s.value]]),S("button",{onClick:v,class:"copy-btn"},"📋 Copy Token")]),A[9]||(A[9]=S("div",{class:"jwt-info"},[S("small",null,"This token has been automatically stored in localStorage as 'jwt_token'")],-1))])):nt("",!0)]))}}),TA=tn(xA,[["__scopeId","data-v-41184933"]]),vi=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||window.location.hostname.includes("dev")||window.location.port!=="",C0={isDevelopment:vi,isProduction:!vi,enableDevTools:vi,enableJWTDevRegister:vi,apiBaseUrl:vi?"http://localhost:57575":"",socketUrl:vi?"http://localhost:57575":""},{isDevelopment:CA,enableJWTDevRegister:AA,apiBaseUrl:A0,socketUrl:EA}=C0;CA&&(console.log("🔧 AetherTerm Environment Configuration:",C0),console.log("🌍 Current location:",{hostname:window.location.hostname,port:window.location.port,protocol:window.location.protocol,href:window.location.href}),console.log("⚡ Vite Environment:",{DEV:!1,PROD:!0,MODE:"production"}));class MA{baseUrl;constructor(){this.baseUrl=`${A0}/api/inventory`}async makeRequest(t,n={}){const a=`${this.baseUrl}${t}`;try{const s=await fetch(a,{headers:{"Content-Type":"application/json",...n.headers},...n});if(!s.ok){const i=await s.json().catch(()=>({detail:"Unknown error"}));throw new Error(`HTTP ${s.status}: ${i.detail||i.message||"Request failed"}`)}return await s.json()}catch(s){throw console.error(`Inventory API request failed [${t}]:`,s),s}}async healthCheck(){return this.makeRequest("/health")}async getServiceStatus(){return this.makeRequest("/status")}async getInventorySummary(){return this.makeRequest("/summary")}async getResources(t={}){const n=new URLSearchParams;t.limit&&n.append("limit",t.limit.toString()),t.provider&&n.append("provider",t.provider),t.resource_type&&n.append("resource_type",t.resource_type);const a=`/resources${n.toString()?`?${n.toString()}`:""}`;return this.makeRequest(a)}async searchInventory(t){return this.makeRequest("/search",{method:"POST",body:JSON.stringify(t)})}async executeQuery(t){return this.makeRequest("/query",{method:"POST",body:JSON.stringify(t)})}async listConnections(){return this.makeRequest("/connections")}async addConnection(t){return this.makeRequest("/connections",{method:"POST",body:JSON.stringify(t)})}async removeConnection(t){return this.makeRequest(`/connections/${encodeURIComponent(t)}`,{method:"DELETE"})}async getSupportedProviders(){return this.makeRequest("/providers")}async syncInventory(){return this.makeRequest("/sync",{method:"POST"})}convertToLegacyFormat(t){return t.map(n=>({id:n.resource_id,title:n.name,description:`${n.resource_type} from ${n.provider}`,type:this.mapResourceTypeToLegacyType(n.resource_type),icon:this.getIconForResourceType(n.resource_type),location:n.location,status:this.mapStatusToLegacyStatus(n.status),command:this.generateCommandForResource(n),aiAnalysisPrompt:`Analyze ${n.resource_type} ${n.name} from ${n.provider}`,metadata:n.metadata,provider:n.provider,resource_type:n.resource_type,last_updated:n.last_updated}))}mapResourceTypeToLegacyType(t){return{ec2_instance:"server",azure_compute_virtual_machine:"server",gcp_compute_instance:"server",kubernetes_node:"server",vsphere_virtual_machine:"server",docker_container:"container",kubernetes_pod:"container",rds_db_instance:"database",azure_sql_database:"database",gcp_sql_database_instance:"database",s3_bucket:"file",azure_storage_account:"file",gcp_storage_bucket:"file",lambda_function:"service",azure_function_app:"service",gcp_cloud_function:"service"}[t]||"service"}getIconForResourceType(t){return{ec2_instance:"🖥️",azure_compute_virtual_machine:"🖥️",gcp_compute_instance:"🖥️",kubernetes_node:"🖥️",vsphere_virtual_machine:"🖥️",docker_container:"📦",kubernetes_pod:"📦",rds_db_instance:"🗄️",azure_sql_database:"🗄️",gcp_sql_database_instance:"🗄️",s3_bucket:"📁",azure_storage_account:"📁",gcp_storage_bucket:"📁",lambda_function:"⚡",azure_function_app:"⚡",gcp_cloud_function:"⚡",load_balancer:"⚖️",security_group:"🛡️",vpc:"🌐",subnet:"🌐"}[t]||"📄"}mapStatusToLegacyStatus(t){return{running:"running",stopped:"stopped",pending:"unknown",terminated:"error",error:"error",available:"running",unavailable:"stopped"}[t.toLowerCase()]||"unknown"}generateCommandForResource(t){const n=t.resource_type.toLowerCase();return n.includes("instance")||n.includes("virtual_machine")?`# Connect to ${t.name}
echo "Server: ${t.name} (${t.provider})"
echo "Status: ${t.status}"`:n.includes("container")||n.includes("pod")?`# Container info for ${t.name}
echo "Container: ${t.name}"
echo "Provider: ${t.provider}"`:n.includes("database")?`# Database info for ${t.name}
echo "Database: ${t.name}"
echo "Status: ${t.status}"`:n.includes("bucket")||n.includes("storage")?`# Storage info for ${t.name}
echo "Storage: ${t.name}"
echo "Location: ${t.location}"`:`# Resource info for ${t.name}
echo "Resource: ${t.name} (${t.resource_type})"
echo "Provider: ${t.provider}"`}}const vm=new MA,RA={class:"search-container"},IA={class:"search-input-wrapper"},BA=["placeholder"],LA={key:0,class:"search-info"},OA={class:"search-results-count"},FA=Jt({__name:"SearchInput",props:{placeholder:{default:"Type to search..."},resultsCount:{default:0}},emits:["search","clear","key-down","jump-to-results"],setup(e,{expose:t,emit:n}){const a=e,s=n,i=he(),r=he(""),o=()=>{s("search",r.value)},m=()=>{r.value="",s("clear"),i.value?.focus()},u=l=>{s("key-down",l)},d=()=>{i.value?.focus()};return rt(()=>a.resultsCount,()=>{}),t({focus:d,clearSearch:m}),(l,c)=>(fe(),_e("div",RA,[S("div",IA,[c[2]||(c[2]=S("div",{class:"search-icon"},"🔍",-1)),on(S("input",{ref_key:"searchInput",ref:i,"onUpdate:modelValue":c[0]||(c[0]=v=>r.value=v),onInput:o,onKeydown:u,placeholder:l.placeholder,class:"search-input",autocomplete:"off"},null,40,BA),[[Er,r.value]]),r.value?(fe(),_e("div",{key:0,class:"search-clear",onClick:m},"✕")):nt("",!0)]),r.value?(fe(),_e("div",LA,[S("span",OA,ie(l.resultsCount)+" result"+ie(l.resultsCount!==1?"s":"")+" found ",1),l.resultsCount>0?(fe(),_e("button",{key:0,onClick:c[1]||(c[1]=v=>l.$emit("jump-to-results")),class:"jump-to-results"}," Jump to Results → ")):nt("",!0)])):nt("",!0)]))}}),VA=tn(FA,[["__scopeId","data-v-f4776bd8"]]),PA={class:"search-results-container"},DA={key:0,class:"search-results"},jA={class:"search-results-list"},NA=["onClick"],$A={class:"result-content"},HA=["innerHTML"],zA={class:"result-details"},UA=["innerHTML"],qA={key:1,class:"result-region"},WA={key:2,class:"result-layer"},YA={key:0,class:"result-description"},XA={class:"result-actions"},GA=["onClick"],KA=["onClick"],ZA={key:1,class:"no-search-results"},QA=Jt({__name:"SearchResults",props:{results:{},searchQuery:{},selectedIndex:{}},emits:["select-result","terminal-action","ai-action"],setup(e,{emit:t}){const n=t,a=m=>{n("select-result",m)},s=m=>{n("terminal-action",m)},i=m=>{n("ai-action",m)},r=(m,u)=>{if(!u.trim())return m;const d=new RegExp(`(${o(u)})`,"gi");return m.replace(d,'<mark class="search-highlight">$1</mark>')},o=m=>m.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return(m,u)=>(fe(),_e("div",PA,[m.results.length>0?(fe(),_e("div",DA,[u[0]||(u[0]=S("h4",null,"Search Results",-1)),S("div",jA,[(fe(!0),_e(lt,null,Ut(m.results,(d,l)=>(fe(),_e("div",{key:d.id,onClick:c=>a(d),class:Me(["search-result-item",{highlighted:l===m.selectedIndex}])},[S("div",{class:Me(["result-type-badge",d.type])},ie(d.type),3),S("div",$A,[S("div",{class:"result-name",innerHTML:r(d.name,m.searchQuery)},null,8,HA),S("div",zA,[d.ip?(fe(),_e("span",{key:0,class:"result-ip",innerHTML:r(d.ip,m.searchQuery)},null,8,UA)):nt("",!0),d.region?(fe(),_e("span",qA,ie(d.region),1)):nt("",!0),d.layer?(fe(),_e("span",WA,ie(d.layer),1)):nt("",!0)]),d.description?(fe(),_e("div",YA,ie(d.description),1)):nt("",!0)]),S("div",XA,[S("button",{onClick:Hn(c=>s(d),["stop"]),class:"result-action-btn terminal"},"💻",8,GA),S("button",{onClick:Hn(c=>i(d),["stop"]),class:"result-action-btn ai"},"🤖",8,KA)])],10,NA))),128))])])):m.searchQuery?(fe(),_e("div",ZA,[u[1]||(u[1]=S("div",{class:"no-results-icon"},"🤷‍♂️",-1)),u[2]||(u[2]=S("h4",null,"No results found",-1)),S("p",null,'No items match "'+ie(m.searchQuery)+'"',1),u[3]||(u[3]=S("div",{class:"search-suggestions"},[S("p",null,"Try searching for:"),S("ul",null,[S("li",null,"Server names (web-server-01, api-server)"),S("li",null,"IP addresses (10.0.1.10, 192.168)"),S("li",null,"Regions (us-east, europe, tokyo)"),S("li",null,"Server types (web, database, api)")])],-1))])):nt("",!0)]))}}),JA=tn(QA,[["__scopeId","data-v-ff752dd5"]]),eE={class:"wizard-step"},tE={class:"step-header"},nE={class:"step-progress"},aE={class:"step-indicator"},sE={key:0,class:"quick-access"},iE={class:"step-content"},rE={key:0,class:"step-navigation"},oE=Jt({__name:"WizardStep",props:{title:{},currentStep:{},totalSteps:{},hasSelection:{type:Boolean,default:!1},showQuickAccess:{type:Boolean,default:!0},showNavigation:{type:Boolean,default:!0}},emits:["previous","next","quick-access"],setup(e){return(t,n)=>(fe(),_e("div",eE,[S("div",tE,[S("h4",null,ie(t.title),1),S("div",nE,[S("div",aE," Step "+ie(t.currentStep+1)+" of "+ie(t.totalSteps),1),t.showQuickAccess?(fe(),_e("div",sE,[S("button",{onClick:n[0]||(n[0]=a=>t.$emit("quick-access")),class:"quick-access-btn"}," Quick Access ")])):nt("",!0)])]),S("div",iE,[ag(t.$slots,"default",{},void 0)]),t.showNavigation?(fe(),_e("div",rE,[t.currentStep>0?(fe(),_e("button",{key:0,onClick:n[1]||(n[1]=a=>t.$emit("previous")),class:"nav-btn secondary"}," ← Previous ")):nt("",!0),n[3]||(n[3]=S("div",{class:"nav-spacer"},null,-1)),t.currentStep<t.totalSteps-1&&t.hasSelection?(fe(),_e("button",{key:1,onClick:n[2]||(n[2]=a=>t.$emit("next")),class:"nav-btn primary"}," Next → ")):nt("",!0)])):nt("",!0)]))}}),fo=tn(oE,[["__scopeId","data-v-d7643d13"]]),lE={class:"layer-selection"},cE={class:"layer-grid"},uE=["onClick"],dE={class:"layer-icon"},mE={class:"layer-title"},fE={class:"layer-description"},vE={class:"layer-count"},hE=Jt({__name:"LayerSelection",props:{layers:{},selectedLayer:{}},emits:["select"],setup(e,{emit:t}){const n=t,a=s=>{n("select",s)};return(s,i)=>(fe(),_e("div",lE,[S("div",cE,[(fe(!0),_e(lt,null,Ut(s.layers,r=>(fe(),_e("button",{key:r.id,onClick:o=>a(r),class:Me(["layer-card",{selected:s.selectedLayer?.id===r.id}])},[S("div",dE,ie(r.icon),1),S("div",mE,ie(r.title),1),S("div",fE,ie(r.description),1),S("div",vE,ie(r.count)+" items",1)],10,uE))),128))])]))}}),gE=tn(hE,[["__scopeId","data-v-542d546b"]]),pE={class:"region-selection"},_E={class:"region-grid"},bE=["onClick"],yE={class:"region-flag"},wE={class:"region-name"},SE={class:"region-code"},kE={class:"region-count"},xE=Jt({__name:"RegionSelection",props:{regions:{},selectedRegion:{}},emits:["select"],setup(e,{emit:t}){const n=t,a=s=>{n("select",s)};return(s,i)=>(fe(),_e("div",pE,[S("div",_E,[(fe(!0),_e(lt,null,Ut(s.regions,r=>(fe(),_e("button",{key:r.id,onClick:o=>a(r),class:Me(["region-card",{selected:s.selectedRegion?.id===r.id}])},[S("div",yE,ie(r.flag),1),S("div",wE,ie(r.name),1),S("div",SE,ie(r.code),1),S("div",{class:Me(["region-status",r.status])},ie(r.status),3),S("div",kE,ie(r.serverCount)+" servers",1)],10,bE))),128))])]))}}),TE=tn(xE,[["__scopeId","data-v-d77af1dc"]]),CE={class:"server-type-selection"},AE={class:"type-grid"},EE=["onClick"],ME={class:"type-icon"},RE={class:"type-title"},IE={class:"type-description"},BE={class:"type-specs"},LE={class:"type-count"},OE=Jt({__name:"ServerTypeSelection",props:{serverTypes:{},selectedServerType:{}},emits:["select"],setup(e,{emit:t}){const n=t,a=s=>{n("select",s)};return(s,i)=>(fe(),_e("div",CE,[S("div",AE,[(fe(!0),_e(lt,null,Ut(s.serverTypes,r=>(fe(),_e("button",{key:r.id,onClick:o=>a(r),class:Me(["type-card",{selected:s.selectedServerType?.id===r.id}])},[S("div",ME,ie(r.icon),1),S("div",RE,ie(r.title),1),S("div",IE,ie(r.description),1),S("div",BE,ie(r.specs),1),S("div",LE,ie(r.count)+" instances",1)],10,EE))),128))])]))}}),FE=tn(OE,[["__scopeId","data-v-f73130c4"]]),VE={class:"server-selection"},PE={class:"server-list"},DE=["onClick"],jE={class:"server-content"},NE={class:"server-name"},$E={class:"server-details"},HE={class:"server-ip"},zE={class:"server-os"},UE={class:"server-uptime"},qE={class:"server-metrics"},WE={class:"metric"},YE={class:"metric-bar"},XE={class:"metric-value"},GE={class:"metric"},KE={class:"metric-bar"},ZE={class:"metric-value"},QE={class:"metric"},JE={class:"metric-bar"},eM={class:"metric-value"},tM={class:"server-actions"},nM=["onClick"],aM=["onClick"],sM=Jt({__name:"ServerSelection",props:{servers:{}},emits:["select","terminal-action","ai-action"],setup(e,{emit:t}){const n=t,a=r=>{n("select",r)},s=r=>{n("terminal-action",r)},i=r=>{n("ai-action",r)};return(r,o)=>(fe(),_e("div",VE,[S("div",PE,[(fe(!0),_e(lt,null,Ut(r.servers,m=>(fe(),_e("div",{key:m.id,onClick:u=>a(m),class:Me(["server-item",m.status])},[o[3]||(o[3]=S("div",{class:"server-icon"},"🖥️",-1)),S("div",jE,[S("div",NE,ie(m.name),1),S("div",$E,[S("span",HE,ie(m.ip),1),S("span",zE,ie(m.os),1),S("span",UE,"Uptime: "+ie(m.uptime),1)]),S("div",qE,[S("div",WE,[o[0]||(o[0]=S("span",{class:"metric-label"},"CPU",-1)),S("div",YE,[S("div",{class:"metric-fill",style:vt({width:m.cpu+"%"})},null,4)]),S("span",XE,ie(m.cpu)+"%",1)]),S("div",GE,[o[1]||(o[1]=S("span",{class:"metric-label"},"RAM",-1)),S("div",KE,[S("div",{class:"metric-fill",style:vt({width:m.memory+"%"})},null,4)]),S("span",ZE,ie(m.memory)+"%",1)]),S("div",QE,[o[2]||(o[2]=S("span",{class:"metric-label"},"Disk",-1)),S("div",JE,[S("div",{class:"metric-fill",style:vt({width:m.disk+"%"})},null,4)]),S("span",eM,ie(m.disk)+"%",1)])])]),S("div",{class:Me(["server-status",m.status])},ie(m.status),3),S("div",tM,[S("button",{onClick:Hn(u=>s(m),["stop"]),class:"action-btn terminal"},"💻",8,nM),S("button",{onClick:Hn(u=>i(m),["stop"]),class:"action-btn ai"},"🤖",8,aM)])],10,DE))),128))])]))}}),iM=tn(sM,[["__scopeId","data-v-7d466e16"]]),rM={class:"server-inventory-container"},oM={class:"inventory-header"},lM={class:"header-actions"},cM={class:"server-stats"},uM={class:"stat"},dM={class:"stat"},mM={class:"stat"},fM={class:"breadcrumb"},vM=["onClick"],hM={key:0,class:"breadcrumb-separator"},gM={class:"inventory-content"},pM={key:0,class:"loading-state"},_M={key:1,class:"error-state"},hi=4,bM=Jt({__name:"ServerInventoryContainer",setup(e){const t=Vi(),n=he(0),a=he(""),s=he(0),i=he(!1),r=he(null),o=he([]),m=he(null),u=he(null),d=he(null),l=he([]),c=he([]),v=he([]),h=he([]),A=ee(()=>{const X=["Infrastructure"];return m.value&&X.push(m.value.title),u.value&&X.push(u.value.name),d.value&&X.push(d.value.title),X}),T=ee(()=>l.value),k=ee(()=>c.value),p=ee(()=>v.value),L=ee(()=>h.value),O=ee(()=>{if(!a.value.trim())return[];const X=a.value.toLowerCase(),G=[];return h.value.forEach(ue=>{(ue.name.toLowerCase().includes(X)||ue.ip.toLowerCase().includes(X))&&G.push({id:ue.id,name:ue.name,type:"server",ip:ue.ip,description:`${ue.os} - ${ue.status}`,data:ue})}),o.value.forEach(ue=>{(ue.name.toLowerCase().includes(X)||ue.resource_type.toLowerCase().includes(X)||ue.provider.toLowerCase().includes(X))&&G.push({id:ue.resource_id,name:ue.name,type:"resource",description:`${ue.resource_type} from ${ue.provider}`,data:ue})}),l.value.forEach(ue=>{(ue.title.toLowerCase().includes(X)||ue.description.toLowerCase().includes(X))&&G.push({id:ue.id,name:ue.title,type:"layer",description:ue.description,data:ue})}),c.value.forEach(ue=>{(ue.name.toLowerCase().includes(X)||ue.code.toLowerCase().includes(X))&&G.push({id:ue.id,name:ue.name,type:"region",region:ue.code,description:`${ue.serverCount} servers`,data:ue})}),v.value.forEach(ue=>{(ue.title.toLowerCase().includes(X)||ue.description.toLowerCase().includes(X))&&G.push({id:ue.id,name:ue.title,type:"serverType",description:ue.description,data:ue})}),G}),g=async X=>{if(a.value=X,s.value=0,!!X.trim())try{const G=await vm.searchInventory({search_term:X});o.value=G,h.value=H(G),console.log("Server search performed:",{query:X,resultCount:G.length,searchTime:new Date().toISOString()})}catch(G){console.error("Search failed:",G),r.value=G instanceof Error?G.message:"Search failed"}},B=()=>{a.value="",s.value=0},R=X=>{if(O.value.length)switch(X.key){case"ArrowDown":X.preventDefault(),s.value=Math.min(s.value+1,O.value.length-1);break;case"ArrowUp":X.preventDefault(),s.value=Math.max(s.value-1,0);break;case"Enter":X.preventDefault(),O.value[s.value]&&I(O.value[s.value]);break;case"Escape":B();break}},C=()=>{s.value=0},I=X=>{X.type==="server"?$(X):(B(),X.type==="layer"?(n.value=0,E(X.data)):X.type==="region"?(n.value=1,M(X.data)):X.type==="serverType"&&(n.value=2,V(X.data)))},b=()=>{n.value<hi-1&&n.value++},y=()=>{n.value>0&&n.value--},_=X=>{X>=0&&X<A.value.length&&(n.value=X)},w=()=>{n.value=hi-1},E=X=>{m.value=X},M=X=>{u.value=X},V=X=>{d.value=X},q=X=>{f(X)},$=X=>{const G=X.data;console.log("Opening terminal for server:",G.name);const ue={id:G.id,name:G.name,ip:G.ip,os:G.os,uptime:G.uptime,status:G.status,cpu:G.cpu,memory:G.memory,disk:G.disk},be=t.createInventoryTerminal(ue);t.switchToTab(be.id),console.log(`Created inventory terminal for ${G.name} with ${be.preExecutionCommands?.length||0} pre-configured commands`)},U=X=>{const G=X.data;console.log("Opening AI chat for server:",G.name);const ue=t.createTab("ai-agent",`AI: ${G.name}`);t.switchToTab(ue.id);const be=`Server Information:
- Name: ${G.name}
- IP: ${G.ip}
- OS: ${G.os}
- Status: ${G.status}
- Uptime: ${G.uptime}
- Resources: CPU ${G.cpu}%, Memory ${G.memory}%, Disk ${G.disk}%

Please analyze this server and provide recommendations.`;console.log("AI Chat initialized with server context:",be)},f=X=>{console.log("Opening terminal for server:",X.name);const G={id:X.id,name:X.name,ip:X.ip,os:X.os,uptime:X.uptime,status:X.status,cpu:X.cpu,memory:X.memory,disk:X.disk},ue=t.createInventoryTerminal(G);t.switchToTab(ue.id),console.log(`Created enhanced inventory terminal for ${X.name}:`,{serverType:X.name.includes("database")?"Database":X.name.includes("web")?"Web":X.name.includes("api")?"API":"General",commands:ue.preExecutionCommands?.length||0,status:X.status})},x=X=>{console.log("Opening AI chat for server:",X.name);const G=t.createTab("ai-agent",`AI: ${X.name}`);t.switchToTab(G.id);const ue=X.name.includes("database")?"Database":X.name.includes("web")?"Web":X.name.includes("api")?"API":X.name.includes("load-balancer")?"Load Balancer":X.name.includes("monitoring")?"Monitoring":"General";`${ue}${X.name}${X.ip}${X.os}${X.status.toUpperCase()}${X.uptime}${X.cpu}${X.memory}${X.disk}`,X.status,X.cpu>80,X.memory>80,X.disk>80,console.log("Enhanced AI context prepared:",{serverType:ue,hasWarnings:X.status==="warning"})},H=X=>X.filter(G=>G.resource_type.toLowerCase().includes("instance")||G.resource_type.toLowerCase().includes("virtual_machine")||G.resource_type.toLowerCase().includes("server")).map(G=>({id:G.resource_id,name:G.name,ip:G.metadata.public_ip||G.metadata.private_ip||G.location,os:G.metadata.operating_system||G.metadata.platform||"Unknown",uptime:G.metadata.uptime||"Unknown",status:F(G.status),cpu:parseInt(G.metadata.cpu_utilization)||Math.floor(Math.random()*100),memory:parseInt(G.metadata.memory_utilization)||Math.floor(Math.random()*100),disk:parseInt(G.metadata.disk_utilization)||Math.floor(Math.random()*100)})),F=X=>({running:"online",available:"online",stopped:"offline",terminated:"offline",error:"warning",pending:"warning",stopping:"maintenance",starting:"maintenance"})[X.toLowerCase()]||"offline",se=async()=>{i.value=!0,r.value=null;try{const X=await vm.getResources({limit:1e3});o.value=X,h.value=H(X);const G=new Set(X.map(je=>je.resource_type));l.value=Array.from(G).slice(0,5).map((je,Y)=>({id:`layer-${Y}`,title:je.replace(/_/g," ").replace(/\b\w/g,Z=>Z.toUpperCase()),description:`All ${je} resources`,icon:me(je),count:X.filter(Z=>Z.resource_type===je).length}));const ue=new Set(X.map(je=>je.location).filter(Boolean));c.value=Array.from(ue).slice(0,5).map((je,Y)=>({id:`region-${Y}`,name:je,code:je.toLowerCase().replace(/[^a-z0-9]/g,"-"),flag:"🌍",status:"online",serverCount:X.filter(Z=>Z.location===je).length}));const be=X.filter(je=>je.resource_type.toLowerCase().includes("instance")||je.resource_type.toLowerCase().includes("virtual_machine")||je.resource_type.toLowerCase().includes("server")).map(je=>je.resource_type),ke=new Set(be);v.value=Array.from(ke).map((je,Y)=>({id:`type-${Y}`,title:je.replace(/_/g," ").replace(/\b\w/g,Z=>Z.toUpperCase()),description:`${je} servers`,icon:me(je),specs:"Variable specs",count:X.filter(Z=>Z.resource_type===je).length})),console.log(`Loaded ${X.length} inventory items, ${h.value.length} servers`)}catch(X){console.error("Failed to load inventory data:",X),r.value=X instanceof Error?X.message:"Failed to load inventory"}finally{i.value=!1}},me=X=>({ec2_instance:"🖥️",azure_compute_virtual_machine:"🖥️",gcp_compute_instance:"🖥️",docker_container:"📦",kubernetes_pod:"📦",rds_db_instance:"🗄️",lambda_function:"⚡",s3_bucket:"📁",load_balancer:"⚖️"})[X]||"📄";return gn(async()=>{await se()}),(X,G)=>(fe(),_e("div",rM,[S("div",oM,[G[0]||(G[0]=S("h3",null,"🖥️ Server Inventory",-1)),S("div",lM,[S("div",cM,[S("span",uM,ie(h.value.length)+" servers",1),S("span",dM,ie(h.value.filter(ue=>ue.status==="online").length)+" online",1),S("span",mM,ie(h.value.filter(ue=>ue.status==="warning").length)+" warnings",1)])]),S("div",fM,[(fe(!0),_e(lt,null,Ut(A.value,(ue,be)=>(fe(),_e("span",{key:be,class:"breadcrumb-item"},[S("button",{onClick:ke=>_(be),class:"breadcrumb-btn"},ie(ue),9,vM),be<A.value.length-1?(fe(),_e("span",hM,"›")):nt("",!0)]))),128))])]),Q(VA,{placeholder:"Type to search servers, IPs, regions, types...","results-count":O.value.length,onSearch:g,onClear:B,onKeyDown:R,onJumpToResults:C},null,8,["results-count"]),S("div",gM,[i.value?(fe(),_e("div",pM,G[1]||(G[1]=[S("div",{class:"loading-spinner"},null,-1),S("span",null,"Loading inventory data...",-1)]))):r.value?(fe(),_e("div",_M,[G[2]||(G[2]=S("span",{class:"error-icon"},"⚠️",-1)),S("p",null,"Error: "+ie(r.value),1),S("button",{onClick:se,class:"retry-btn"},"Retry")])):a.value?(fe(),Qa(JA,{key:2,results:O.value,"search-query":a.value,"selected-index":s.value,onSelectResult:I,onTerminalAction:$,onAiAction:U},null,8,["results","search-query","selected-index"])):(fe(),_e(lt,{key:3},[n.value===0?(fe(),Qa(fo,{key:0,title:"Select Infrastructure Layer","current-step":n.value,"total-steps":hi,"has-selection":!!m.value,onNext:b,onQuickAccess:w},{default:Lt(()=>[Q(gE,{layers:T.value,"selected-layer":m.value,onSelect:E},null,8,["layers","selected-layer"])]),_:1},8,["current-step","has-selection"])):nt("",!0),n.value===1?(fe(),Qa(fo,{key:1,title:"Select Region","current-step":n.value,"total-steps":hi,"has-selection":!!u.value,onPrevious:y,onNext:b,onQuickAccess:w},{default:Lt(()=>[Q(TE,{regions:k.value,"selected-region":u.value,onSelect:M},null,8,["regions","selected-region"])]),_:1},8,["current-step","has-selection"])):nt("",!0),n.value===2?(fe(),Qa(fo,{key:2,title:"Select Server Type","current-step":n.value,"total-steps":hi,"has-selection":!!d.value,onPrevious:y,onNext:b,onQuickAccess:w},{default:Lt(()=>[Q(FE,{"server-types":p.value,"selected-server-type":d.value,onSelect:V},null,8,["server-types","selected-server-type"])]),_:1},8,["current-step","has-selection"])):nt("",!0),n.value===3?(fe(),Qa(fo,{key:3,title:"Select Server","current-step":n.value,"total-steps":hi,"show-navigation":!1,onPrevious:y,onQuickAccess:w},{default:Lt(()=>[Q(iM,{servers:L.value,onSelect:q,onTerminalAction:f,onAiAction:x},null,8,["servers"])]),_:1},8,["current-step"])):nt("",!0)],64))])]))}}),yM=tn(bM,[["__scopeId","data-v-7081cd18"]]),wM=Jt({__name:"ServerInventoryPanel",setup(e){return(t,n)=>(fe(),Qa(yM))}}),SM=tn(wM,[["__scopeId","data-v-8189ed0c"]]),kM={id:"app-container"},xM={class:"main-content"},TM={id:"terminal-container"},CM={key:0,class:"resize-handle-container"},AM={class:"tab-navigation"},EM={key:1,class:"tab-content chat-tab"},MM={key:2,class:"tab-content inventory-tab"},RM={key:3,class:"tab-content supervisor-tab"},IM={key:4,class:"tab-content debug-tab"},BM={class:"sidebar"},LM={class:"sidebar-content"},OM=["title"],hm="aetherterm-panel-width",gm="aetherterm-panel-visible",FM=Jt({__name:"App",setup(e){const t=zk(),n=ka(),a=he("chat"),s=he(!1),i=he(!1),r=he(320),o=he(!1),m=he(0),u=he(0),d=he(!1),l=he({x:0,y:0}),c=he({x:20,y:60}),v=C=>{if(!d.value)return;const I=C.clientX-l.value.x,b=C.clientY-l.value.y,y=window.innerWidth-300,_=window.innerHeight-400;c.value={x:Math.max(0,Math.min(I,y)),y:Math.max(0,Math.min(b,_))}},h=()=>{d.value=!1,document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",h)};let A=0;const T=C=>{s.value||(o.value=!0,m.value=C.clientX,u.value=r.value,document.addEventListener("mousemove",k),document.addEventListener("mouseup",p),C.preventDefault())},k=C=>{o.value&&(A&&cancelAnimationFrame(A),A=requestAnimationFrame(()=>{const I=m.value-C.clientX,b=u.value+I,y=250,_=Math.min(600,window.innerWidth*.4);r.value=Math.max(y,Math.min(b,_)),A=0}))},p=()=>{o.value=!1,document.removeEventListener("mousemove",k),document.removeEventListener("mouseup",p),O()},L=()=>{const C=localStorage.getItem(hm);if(C){const I=parseInt(C,10);I>=250&&I<=600&&(r.value=I)}},O=()=>{localStorage.setItem(hm,r.value.toString())},g=()=>{const C=localStorage.getItem(gm);C!==null&&(i.value=C==="true")},B=()=>{localStorage.setItem(gm,i.value.toString())},R=()=>{i.value=!i.value,B()};return gn(()=>{L(),g(),n.onAskAI(C=>{console.log("App.vue: Ask AI triggered, showing side panel and switching to assistant tab"),a.value="chat",i.value=!0})}),Ii(()=>{document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",h),document.removeEventListener("mousemove",k),document.removeEventListener("mouseup",p),n.offAskAI()}),rt(t.activeMessages,C=>{C.length>0&&a.value!=="chat"&&(a.value="chat")}),(C,I)=>(fe(),_e("div",kM,[S("div",xM,[S("div",TM,[Q(T0)])]),i.value?(fe(),_e("div",{key:0,id:"supervisor-container",class:Me({"supervisor-floating":s.value,"supervisor-fixed":!s.value,dragging:d.value,resizing:o.value}),style:vt(s.value?{top:c.value.y+"px",right:"auto",left:c.value.x+"px"}:{width:r.value+"px"})},[s.value?nt("",!0):(fe(),_e("div",CM,[S("div",{class:Me(["resize-handle-button",{active:o.value}]),onMousedown:T},null,34)])),S("div",AM,[S("button",{onClick:R,class:"panel-close-btn",title:"Close Panel"}," » "),S("button",{class:Me({active:a.value==="chat"}),onClick:I[0]||(I[0]=b=>a.value="chat")},"Assistant",2),S("button",{class:Me({active:a.value==="inventory"}),onClick:I[1]||(I[1]=b=>a.value="inventory")}," 🖥️ Inventory ",2),S("button",{class:Me({active:a.value==="supervisor"}),onClick:I[2]||(I[2]=b=>a.value="supervisor")}," 👮 Admin ",2),xt(AA)?(fe(),_e("button",{key:0,class:Me([{active:a.value==="debug"},"debug-tab"]),onClick:I[3]||(I[3]=b=>a.value="debug")}," 🔧 Debug ",2)):nt("",!0)]),a.value==="chat"?(fe(),_e("div",EM,[Q(x0)])):nt("",!0),a.value==="inventory"?(fe(),_e("div",MM,[Q(SM)])):nt("",!0),a.value==="supervisor"?(fe(),_e("div",RM,[Q(Hk)])):nt("",!0),a.value==="debug"?(fe(),_e("div",IM,[Q(TA)])):nt("",!0)],6)):nt("",!0),on(S("div",BM,[S("div",LM,[S("button",{onClick:R,class:"sidebar-toggle-btn",title:i.value?"Hide Panel":"Show Panel"},ie(i.value?"→":"←"),9,OM),S("button",{onClick:I[4]||(I[4]=b=>{a.value="chat",R()}),class:Me(["sidebar-tab-btn",{active:a.value==="chat"}]),title:"Open Assistant"}," 🤖 ",2),S("button",{onClick:I[5]||(I[5]=b=>{a.value="inventory",R()}),class:Me(["sidebar-tab-btn",{active:a.value==="inventory"}]),title:"Open Server Inventory"}," 🖥️ ",2)])],512),[[os,!i.value]]),nt("",!0)]))}}),VM=tn(FM,[["__scopeId","data-v-69b96b34"]]),PM=sg({history:ig("./"),routes:[{path:"/",name:"terminal",component:T0},{path:"/:pathMatch(.*)*",redirect:"/"}]}),DM=He({...bt(),...bg({fullHeight:!0}),...un()},"VApp"),jM=et()({name:"VApp",props:DM(),setup(e,t){let{slots:n}=t;const a=_n(e),{layoutClasses:s,getLayoutItem:i,items:r,layoutRef:o}=_g(e),{rtlClasses:m}=ca();return ot(()=>S("div",{ref:o,class:Me(["v-application",a.themeClasses.value,s.value,m.value,e.class]),style:vt([e.style])},[S("div",{class:"v-application__wrap"},[n.default?.()])])),{getLayoutItem:i,items:r,theme:a}}}),Gt=He({tag:{type:[String,Object,Function],default:"div"}},"tag"),NM=He({text:String,...bt(),...Gt()},"VToolbarTitle"),E0=et()({name:"VToolbarTitle",props:NM(),setup(e,t){let{slots:n}=t;return ot(()=>{const a=!!(n.default||n.text||e.text);return Q(e.tag,{class:Me(["v-toolbar-title",e.class]),style:vt(e.style)},{default:()=>[a&&S("div",{class:"v-toolbar-title__placeholder"},[n.text?n.text():e.text,n.default?.()])]})}),{}}}),$M=He({disabled:Boolean,group:Boolean,hideOnLeave:Boolean,leaveAbsolute:Boolean,mode:String,origin:String},"transition");function ea(e,t,n){return et()({name:e,props:$M({mode:n,origin:t}),setup(a,s){let{slots:i}=s;const r={onBeforeEnter(o){a.origin&&(o.style.transformOrigin=a.origin)},onLeave(o){if(a.leaveAbsolute){const{offsetTop:m,offsetLeft:u,offsetWidth:d,offsetHeight:l}=o;o._transitionInitialStyles={position:o.style.position,top:o.style.top,left:o.style.left,width:o.style.width,height:o.style.height},o.style.position="absolute",o.style.top=`${m}px`,o.style.left=`${u}px`,o.style.width=`${d}px`,o.style.height=`${l}px`}a.hideOnLeave&&o.style.setProperty("display","none","important")},onAfterLeave(o){if(a.leaveAbsolute&&o?._transitionInitialStyles){const{position:m,top:u,left:d,width:l,height:c}=o._transitionInitialStyles;delete o._transitionInitialStyles,o.style.position=m||"",o.style.top=u||"",o.style.left=d||"",o.style.width=l||"",o.style.height=c||""}}};return()=>{const o=a.group?su:Rs;return Mr(o,{name:a.disabled?"":e,css:!a.disabled,...a.group?void 0:{mode:a.mode},...a.disabled?{}:r},i.default)}}})}function M0(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"in-out";return et()({name:e,props:{mode:{type:String,default:n},disabled:Boolean,group:Boolean},setup(a,s){let{slots:i}=s;const r=a.group?su:Rs;return()=>Mr(r,{name:a.disabled?"":e,css:!a.disabled,...a.disabled?{}:t},i.default)}})}function R0(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const n=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)?"width":"height",a=rg(`offset-${n}`);return{onBeforeEnter(r){r._parent=r.parentNode,r._initialStyle={transition:r.style.transition,overflow:r.style.overflow,[n]:r.style[n]}},onEnter(r){const o=r._initialStyle;if(!o)return;r.style.setProperty("transition","none","important"),r.style.overflow="hidden";const m=`${r[a]}px`;r.style[n]="0",r.offsetHeight,r.style.transition=o.transition,e&&r._parent&&r._parent.classList.add(e),requestAnimationFrame(()=>{r.style[n]=m})},onAfterEnter:i,onEnterCancelled:i,onLeave(r){r._initialStyle={transition:"",overflow:r.style.overflow,[n]:r.style[n]},r.style.overflow="hidden",r.style[n]=`${r[a]}px`,r.offsetHeight,requestAnimationFrame(()=>r.style[n]="0")},onAfterLeave:s,onLeaveCancelled:s};function s(r){e&&r._parent&&r._parent.classList.remove(e),i(r)}function i(r){if(!r._initialStyle)return;const o=r._initialStyle[n];r.style.overflow=r._initialStyle.overflow,o!=null&&(r.style[n]=o),delete r._initialStyle}}const HM=He({target:[Object,Array]},"v-dialog-transition"),oc=new WeakMap,Qu=et()({name:"VDialogTransition",props:HM(),setup(e,t){let{slots:n}=t;const a={onBeforeEnter(s){s.style.pointerEvents="none",s.style.visibility="hidden"},async onEnter(s,i){await new Promise(v=>requestAnimationFrame(v)),await new Promise(v=>requestAnimationFrame(v)),s.style.visibility="";const r=_m(e.target,s),{x:o,y:m,sx:u,sy:d,speed:l}=r;oc.set(s,r);const c=ei(s,[{transform:`translate(${o}px, ${m}px) scale(${u}, ${d})`,opacity:0},{}],{duration:225*l,easing:wg});pm(s)?.forEach(v=>{ei(v,[{opacity:0},{opacity:0,offset:.33},{}],{duration:225*2*l,easing:ur})}),c.finished.then(()=>i())},onAfterEnter(s){s.style.removeProperty("pointer-events")},onBeforeLeave(s){s.style.pointerEvents="none"},async onLeave(s,i){await new Promise(v=>requestAnimationFrame(v));let r;!oc.has(s)||Array.isArray(e.target)||e.target.offsetParent||e.target.getClientRects().length?r=_m(e.target,s):r=oc.get(s);const{x:o,y:m,sx:u,sy:d,speed:l}=r;ei(s,[{},{transform:`translate(${o}px, ${m}px) scale(${u}, ${d})`,opacity:0}],{duration:125*l,easing:yg}).finished.then(()=>i()),pm(s)?.forEach(v=>{ei(v,[{},{opacity:0,offset:.2},{opacity:0}],{duration:125*2*l,easing:ur})})},onAfterLeave(s){s.style.removeProperty("pointer-events")}};return()=>e.target?Q(Rs,at({name:"dialog-transition"},a,{css:!1}),n):Q(Rs,{name:"dialog-transition"},n)}});function pm(e){const t=e.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list")?.children;return t&&[...t]}function _m(e,t){const n=$m(e),a=ou(t),[s,i]=getComputedStyle(t).transformOrigin.split(" ").map(k=>parseFloat(k)),[r,o]=getComputedStyle(t).getPropertyValue("--v-overlay-anchor-origin").split(" ");let m=n.left+n.width/2;r==="left"||o==="left"?m-=n.width/2:(r==="right"||o==="right")&&(m+=n.width/2);let u=n.top+n.height/2;r==="top"||o==="top"?u-=n.height/2:(r==="bottom"||o==="bottom")&&(u+=n.height/2);const d=n.width/a.width,l=n.height/a.height,c=Math.max(1,d,l),v=d/c||0,h=l/c||0,A=a.width*a.height/(window.innerWidth*window.innerHeight),T=A>.12?Math.min(1.5,(A-.12)*10+1):1;return{x:m-(s+a.left),y:u-(i+a.top),sx:v,sy:h,speed:T}}ea("fab-transition","center center","out-in");ea("dialog-bottom-transition");ea("dialog-top-transition");const bm=ea("fade-transition"),zM=ea("scale-transition");ea("scroll-x-transition");ea("scroll-x-reverse-transition");ea("scroll-y-transition");ea("scroll-y-reverse-transition");ea("slide-x-transition");ea("slide-x-reverse-transition");const I0=ea("slide-y-transition");ea("slide-y-reverse-transition");const B0=M0("expand-transition",R0()),L0=M0("expand-x-transition",R0("",!0)),UM=He({defaults:Object,disabled:Boolean,reset:[Number,String],root:[Boolean,String],scoped:Boolean},"VDefaultsProvider"),rn=et(!1)({name:"VDefaultsProvider",props:UM(),setup(e,t){let{slots:n}=t;const{defaults:a,disabled:s,reset:i,root:r,scoped:o}=og(e);return ls(a,{reset:i,root:r,scoped:o,disabled:s}),()=>n.default?.()}}),xa=He({height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},"dimension");function Ta(e){return{dimensionStyles:ee(()=>{const n={},a=gt(e.height),s=gt(e.maxHeight),i=gt(e.maxWidth),r=gt(e.minHeight),o=gt(e.minWidth),m=gt(e.width);return a!=null&&(n.height=a),s!=null&&(n.maxHeight=s),i!=null&&(n.maxWidth=i),r!=null&&(n.minHeight=r),o!=null&&(n.minWidth=o),m!=null&&(n.width=m),n})}}function qM(e){return{aspectStyles:ee(()=>{const t=Number(e.aspectRatio);return t?{paddingBottom:String(1/t*100)+"%"}:void 0})}}const O0=He({aspectRatio:[String,Number],contentClass:null,inline:Boolean,...bt(),...xa()},"VResponsive"),ym=et()({name:"VResponsive",props:O0(),setup(e,t){let{slots:n}=t;const{aspectStyles:a}=qM(e),{dimensionStyles:s}=Ta(e);return ot(()=>S("div",{class:Me(["v-responsive",{"v-responsive--inline":e.inline},e.class]),style:vt([s.value,e.style])},[S("div",{class:"v-responsive__sizer",style:vt(a.value)},null),n.additional?.(),n.default&&S("div",{class:Me(["v-responsive__content",e.contentClass])},[n.default()])])),{}}});function Ju(e){return lu(()=>{const t=Is(e),n=[],a={};if(t.background)if(xd(t.background)){if(a.backgroundColor=t.background,!t.text&&Sg(t.background)){const s=kg(t.background);if(s.a==null||s.a===1){const i=xg(s);a.color=i,a.caretColor=i}}}else n.push(`bg-${t.background}`);return t.text&&(xd(t.text)?(a.color=t.text,a.caretColor=t.text):n.push(`text-${t.text}`)),{colorClasses:n,colorStyles:a}})}function Ha(e){const{colorClasses:t,colorStyles:n}=Ju(()=>({text:Is(e)}));return{textColorClasses:t,textColorStyles:n}}function Gn(e){const{colorClasses:t,colorStyles:n}=Ju(()=>({background:Is(e)}));return{backgroundColorClasses:t,backgroundColorStyles:n}}const ta=He({rounded:{type:[Boolean,Number,String],default:void 0},tile:Boolean},"rounded");function na(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:cs();return{roundedClasses:ee(()=>{const a=hc(e)?e.value:e.rounded,s=hc(e)?e.value:e.tile,i=[];if(a===!0||a==="")i.push(`${t}--rounded`);else if(typeof a=="string"||a===0)for(const r of String(a).split(" "))i.push(`rounded-${r}`);else(s||a===!1)&&i.push("rounded-0");return i})}}const Pr=He({transition:{type:null,default:"fade-transition",validator:e=>e!==!0}},"transition"),es=(e,t)=>{let{slots:n}=t;const{transition:a,disabled:s,group:i,...r}=e,{component:o=i?su:Rs,...m}=ko(a)?a:{};let u;return ko(a)?u=at(m,Tg({disabled:s,group:i}),r):u=at({name:s||!a?"":a},r),Mr(o,u,n)};function WM(e,t){if(!cu)return;const n=t.modifiers||{},a=t.value,{handler:s,options:i}=typeof a=="object"?a:{handler:a,options:{}},r=new IntersectionObserver(function(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],m=arguments.length>1?arguments[1]:void 0;const u=e._observe?.[t.instance.$.uid];if(!u)return;const d=o.some(l=>l.isIntersecting);s&&(!n.quiet||u.init)&&(!n.once||d||u.init)&&s(d,o,m),d&&n.once?F0(e,t):u.init=!0},i);e._observe=Object(e._observe),e._observe[t.instance.$.uid]={init:!1,observer:r},r.observe(e)}function F0(e,t){const n=e._observe?.[t.instance.$.uid];n&&(n.observer.unobserve(e),delete e._observe[t.instance.$.uid])}const Ri={mounted:WM,unmounted:F0},YM=He({absolute:Boolean,alt:String,cover:Boolean,color:String,draggable:{type:[Boolean,String],default:void 0},eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},crossorigin:String,referrerpolicy:String,srcset:String,position:String,...O0(),...bt(),...ta(),...Pr()},"VImg"),gl=et()({name:"VImg",directives:{vIntersect:Ri},props:YM(),emits:{loadstart:e=>!0,load:e=>!0,error:e=>!0},setup(e,t){let{emit:n,slots:a}=t;const{backgroundColorClasses:s,backgroundColorStyles:i}=Gn(()=>e.color),{roundedClasses:r}=na(e),o=ua("VImg"),m=ct(""),u=he(),d=ct(e.eager?"loading":"idle"),l=ct(),c=ct(),v=ee(()=>e.src&&typeof e.src=="object"?{src:e.src.src,srcset:e.srcset||e.src.srcset,lazySrc:e.lazySrc||e.src.lazySrc,aspect:Number(e.aspectRatio||e.src.aspect||0)}:{src:e.src,srcset:e.srcset,lazySrc:e.lazySrc,aspect:Number(e.aspectRatio||0)}),h=ee(()=>v.value.aspect||l.value/c.value||0);rt(()=>e.src,()=>{A(d.value!=="idle")}),rt(h,(_,w)=>{!_&&w&&u.value&&O(u.value)}),Uo(()=>A());function A(_){if(!(e.eager&&_)&&!(cu&&!_&&!e.eager)){if(d.value="loading",v.value.lazySrc){const w=new Image;w.src=v.value.lazySrc,O(w,null)}v.value.src&&en(()=>{n("loadstart",u.value?.currentSrc||v.value.src),setTimeout(()=>{if(!o.isUnmounted)if(u.value?.complete){if(u.value.naturalWidth||k(),d.value==="error")return;h.value||O(u.value,null),d.value==="loading"&&T()}else h.value||O(u.value),p()})})}}function T(){o.isUnmounted||(p(),O(u.value),d.value="loaded",n("load",u.value?.currentSrc||v.value.src))}function k(){o.isUnmounted||(d.value="error",n("error",u.value?.currentSrc||v.value.src))}function p(){const _=u.value;_&&(m.value=_.currentSrc||_.src)}let L=-1;Qn(()=>{clearTimeout(L)});function O(_){let w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;const E=()=>{if(clearTimeout(L),o.isUnmounted)return;const{naturalHeight:M,naturalWidth:V}=_;M||V?(l.value=V,c.value=M):!_.complete&&d.value==="loading"&&w!=null?L=window.setTimeout(E,w):(_.currentSrc.endsWith(".svg")||_.currentSrc.startsWith("data:image/svg+xml"))&&(l.value=1,c.value=1)};E()}const g=De(()=>({"v-img__img--cover":e.cover,"v-img__img--contain":!e.cover})),B=()=>{if(!v.value.src||d.value==="idle")return null;const _=S("img",{class:Me(["v-img__img",g.value]),style:{objectPosition:e.position},crossorigin:e.crossorigin,src:v.value.src,srcset:v.value.srcset,alt:e.alt,referrerpolicy:e.referrerpolicy,draggable:e.draggable,sizes:e.sizes,ref:u,onLoad:T,onError:k},null),w=a.sources?.();return Q(es,{transition:e.transition,appear:!0},{default:()=>[on(w?S("picture",{class:"v-img__picture"},[w,_]):_,[[os,d.value==="loaded"]])]})},R=()=>Q(es,{transition:e.transition},{default:()=>[v.value.lazySrc&&d.value!=="loaded"&&S("img",{class:Me(["v-img__img","v-img__img--preload",g.value]),style:{objectPosition:e.position},crossorigin:e.crossorigin,src:v.value.lazySrc,alt:e.alt,referrerpolicy:e.referrerpolicy,draggable:e.draggable},null)]}),C=()=>a.placeholder?Q(es,{transition:e.transition,appear:!0},{default:()=>[(d.value==="loading"||d.value==="error"&&!a.error)&&S("div",{class:"v-img__placeholder"},[a.placeholder()])]}):null,I=()=>a.error?Q(es,{transition:e.transition,appear:!0},{default:()=>[d.value==="error"&&S("div",{class:"v-img__error"},[a.error()])]}):null,b=()=>e.gradient?S("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${e.gradient})`}},null):null,y=ct(!1);{const _=rt(h,w=>{w&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{y.value=!0})}),_())})}return ot(()=>{const _=ym.filterProps(e);return on(Q(ym,at({class:["v-img",{"v-img--absolute":e.absolute,"v-img--booting":!y.value},s.value,r.value,e.class],style:[{width:gt(e.width==="auto"?l.value:e.width)},i.value,e.style]},_,{aspectRatio:h.value,"aria-label":e.alt,role:e.alt?"img":void 0}),{additional:()=>S(lt,null,[Q(B,null,null),Q(R,null,null),Q(b,null,null),Q(C,null,null),Q(I,null,null)]),default:a.default}),[[Ri,{handler:A,options:e.options},null,{once:!0}]])}),{currentSrc:m,image:u,state:d,naturalWidth:l,naturalHeight:c}}}),Xa=He({border:[Boolean,Number,String]},"border");function Ga(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:cs();return{borderClasses:ee(()=>{const a=e.border;return a===!0||a===""?`${t}--border`:typeof a=="string"||a===0?String(a).split(" ").map(s=>`border-${s}`):[]})}}const vs=He({elevation:{type:[Number,String],validator(e){const t=parseInt(e);return!isNaN(t)&&t>=0&&t<=24}}},"elevation");function hs(e){return{elevationClasses:De(()=>{const n=hc(e)?e.value:e.elevation;return n==null?[]:[`elevation-${n}`]})}}const XM=[null,"prominent","default","comfortable","compact"],V0=He({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>XM.includes(e)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...Xa(),...bt(),...vs(),...ta(),...Gt({tag:"header"}),...un()},"VToolbar"),Wc=et()({name:"VToolbar",props:V0(),setup(e,t){let{slots:n}=t;const{backgroundColorClasses:a,backgroundColorStyles:s}=Gn(()=>e.color),{borderClasses:i}=Ga(e),{elevationClasses:r}=hs(e),{roundedClasses:o}=na(e),{themeClasses:m}=_n(e),{rtlClasses:u}=ca(),d=ct(!!(e.extended||n.extension?.())),l=ee(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),c=ee(()=>d.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return ls({VBtn:{variant:"text"}}),ot(()=>{const v=!!(e.title||n.title),h=!!(n.image||e.image),A=n.extension?.();return d.value=!!(e.extended||A),Q(e.tag,{class:Me(["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},a.value,i.value,r.value,o.value,m.value,u.value,e.class]),style:vt([s.value,e.style])},{default:()=>[h&&S("div",{key:"image",class:"v-toolbar__image"},[n.image?Q(rn,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},n.image):Q(gl,{key:"image-img",cover:!0,src:e.image},null)]),Q(rn,{defaults:{VTabs:{height:gt(l.value)}}},{default:()=>[S("div",{class:"v-toolbar__content",style:{height:gt(l.value)}},[n.prepend&&S("div",{class:"v-toolbar__prepend"},[n.prepend?.()]),v&&Q(E0,{key:"title",text:e.title},{text:n.title}),n.default?.(),n.append&&S("div",{class:"v-toolbar__append"},[n.append?.()])])]}),Q(rn,{defaults:{VTabs:{height:gt(c.value)}}},{default:()=>[Q(B0,null,{default:()=>[d.value&&S("div",{class:"v-toolbar__extension",style:{height:gt(c.value)}},[A])]})]})]})}),{contentHeight:l,extensionHeight:c}}}),GM=He({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function KM(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:n}=t;let a=0,s=0;const i=he(null),r=ct(0),o=ct(0),m=ct(0),u=ct(!1),d=ct(!1),l=ee(()=>Number(e.scrollThreshold)),c=ee(()=>pa((l.value-r.value)/l.value||0)),v=()=>{const h=i.value;if(!h||n&&!n.value)return;a=r.value,r.value="window"in h?h.pageYOffset:h.scrollTop;const A=h instanceof Window?document.documentElement.scrollHeight:h.scrollHeight;if(s!==A){s=A;return}d.value=r.value<a,m.value=Math.abs(r.value-l.value)};return rt(d,()=>{o.value=o.value||r.value}),rt(u,()=>{o.value=0}),gn(()=>{rt(()=>e.scrollTarget,h=>{const A=h?document.querySelector(h):window;A&&A!==i.value&&(i.value?.removeEventListener("scroll",v),i.value=A,i.value.addEventListener("scroll",v,{passive:!0}))},{immediate:!0})}),Qn(()=>{i.value?.removeEventListener("scroll",v)}),n&&rt(n,v,{immediate:!0}),{scrollThreshold:l,currentScroll:r,currentThreshold:m,isScrollActive:u,scrollRatio:c,isScrollingUp:d,savedScroll:o}}function Dr(){const e=ct(!1);return gn(()=>{window.requestAnimationFrame(()=>{e.value=!0})}),{ssrBootStyles:De(()=>e.value?void 0:{transition:"none !important"}),isBooted:iu(e)}}const ZM=He({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...V0(),...zm(),...GM(),height:{type:[Number,String],default:64}},"VAppBar"),QM=et()({name:"VAppBar",props:ZM(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=he(),s=Wt(e,"modelValue"),i=ee(()=>{const p=new Set(e.scrollBehavior?.split(" ")??[]);return{hide:p.has("hide"),fullyHide:p.has("fully-hide"),inverted:p.has("inverted"),collapse:p.has("collapse"),elevate:p.has("elevate"),fadeImage:p.has("fade-image")}}),r=ee(()=>{const p=i.value;return p.hide||p.fullyHide||p.inverted||p.collapse||p.elevate||p.fadeImage||!s.value}),{currentScroll:o,scrollThreshold:m,isScrollingUp:u,scrollRatio:d}=KM(e,{canScroll:r}),l=De(()=>i.value.hide||i.value.fullyHide),c=ee(()=>e.collapse||i.value.collapse&&(i.value.inverted?d.value>0:d.value===0)),v=ee(()=>e.flat||i.value.fullyHide&&!s.value||i.value.elevate&&(i.value.inverted?o.value>0:o.value===0)),h=ee(()=>i.value.fadeImage?i.value.inverted?1-d.value:d.value:void 0),A=ee(()=>{if(i.value.hide&&i.value.inverted)return 0;const p=a.value?.contentHeight??0,L=a.value?.extensionHeight??0;return l.value?o.value<m.value||i.value.fullyHide?p+L:p:p+L});_a(()=>!!e.scrollBehavior,()=>{ja(()=>{l.value?i.value.inverted?s.value=o.value>m.value:s.value=u.value||o.value<m.value:s.value=!0})});const{ssrBootStyles:T}=Dr(),{layoutItemStyles:k}=Hm({id:e.name,order:ee(()=>parseInt(e.order,10)),position:De(()=>e.location),layoutSize:A,elementSize:ct(void 0),active:s,absolute:De(()=>e.absolute)});return ot(()=>{const p=Wc.filterProps(e);return Q(Wc,at({ref:a,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...k.value,"--v-toolbar-image-opacity":h.value,height:void 0,...T.value},e.style]},p,{collapse:c.value,flat:v.value}),n)}),{}}}),JM=[null,"default","comfortable","compact"],Ca=He({density:{type:String,default:"default",validator:e=>JM.includes(e)}},"density");function Ka(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:cs();return{densityClasses:De(()=>`${t}--density-${e.density}`)}}const eR=["elevated","flat","tonal","outlined","text","plain"];function jr(e,t){return S(lt,null,[e&&S("span",{key:"overlay",class:Me(`${t}__overlay`)},null),S("span",{key:"underlay",class:Me(`${t}__underlay`)},null)])}const Fs=He({color:String,variant:{type:String,default:"elevated",validator:e=>eR.includes(e)}},"variant");function Nr(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:cs();const n=De(()=>{const{variant:i}=Is(e);return`${t}--variant-${i}`}),{colorClasses:a,colorStyles:s}=Ju(()=>{const{variant:i,color:r}=Is(e);return{[["elevated","flat"].includes(i)?"background":"text"]:r}});return{colorClasses:a,colorStyles:s,variantClasses:n}}const P0=He({baseColor:String,divided:Boolean,...Xa(),...bt(),...Ca(),...vs(),...ta(),...Gt(),...un(),...Fs()},"VBtnGroup"),wm=et()({name:"VBtnGroup",props:P0(),setup(e,t){let{slots:n}=t;const{themeClasses:a}=_n(e),{densityClasses:s}=Ka(e),{borderClasses:i}=Ga(e),{elevationClasses:r}=hs(e),{roundedClasses:o}=na(e);ls({VBtn:{height:"auto",baseColor:De(()=>e.baseColor),color:De(()=>e.color),density:De(()=>e.density),flat:!0,variant:De(()=>e.variant)}}),ot(()=>Q(e.tag,{class:Me(["v-btn-group",{"v-btn-group--divided":e.divided},a.value,i.value,s.value,r.value,o.value,e.class]),style:vt(e.style)},n))}}),ed=He({modelValue:{type:null,default:void 0},multiple:Boolean,mandatory:[Boolean,String],max:Number,selectedClass:String,disabled:Boolean},"group"),td=He({value:null,disabled:Boolean,selectedClass:String},"group-item");function nd(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const a=ua("useGroupItem");if(!a)throw new Error("[Vuetify] useGroupItem composable must be used inside a component setup function");const s=qa();Wa(Symbol.for(`${t.description}:id`),s);const i=Jn(t,null);if(!i){if(!n)return i;throw new Error(`[Vuetify] Could not find useGroup injection with symbol ${t.description}`)}const r=De(()=>e.value),o=ee(()=>!!(i.disabled.value||e.disabled));i.register({id:s,value:r,disabled:o},a),Qn(()=>{i.unregister(s)});const m=ee(()=>i.isSelected(s)),u=ee(()=>i.items.value[0].id===s),d=ee(()=>i.items.value[i.items.value.length-1].id===s),l=ee(()=>m.value&&[i.selectedClass.value,e.selectedClass]);return rt(m,c=>{a.emit("group:selected",{value:c})},{flush:"sync"}),{id:s,isSelected:m,isFirst:u,isLast:d,toggle:()=>i.select(s,!m.value),select:c=>i.select(s,c),selectedClass:l,value:r,disabled:o,group:i}}function pl(e,t){let n=!1;const a=cr([]),s=Wt(e,"modelValue",[],c=>c==null?[]:D0(a,ba(c)),c=>{const v=nR(a,c);return e.multiple?v:v[0]}),i=ua("useGroup");function r(c,v){const h=c,A=Symbol.for(`${t.description}:id`),k=Cg(A,i?.vnode).indexOf(v);xt(h.value)==null&&(h.value=k,h.useIndexAsValue=!0),k>-1?a.splice(k,0,h):a.push(h)}function o(c){if(n)return;m();const v=a.findIndex(h=>h.id===c);a.splice(v,1)}function m(){const c=a.find(v=>!v.disabled);c&&e.mandatory==="force"&&!s.value.length&&(s.value=[c.id])}gn(()=>{m()}),Qn(()=>{n=!0}),lg(()=>{for(let c=0;c<a.length;c++)a[c].useIndexAsValue&&(a[c].value=c)});function u(c,v){const h=a.find(A=>A.id===c);if(!(v&&h?.disabled))if(e.multiple){const A=s.value.slice(),T=A.findIndex(p=>p===c),k=~T;if(v=v??!k,k&&e.mandatory&&A.length<=1||!k&&e.max!=null&&A.length+1>e.max)return;T<0&&v?A.push(c):T>=0&&!v&&A.splice(T,1),s.value=A}else{const A=s.value.includes(c);if(e.mandatory&&A||!A&&!v)return;s.value=v??!A?[c]:[]}}function d(c){if(e.multiple,s.value.length){const v=s.value[0],h=a.findIndex(k=>k.id===v);let A=(h+c)%a.length,T=a[A];for(;T.disabled&&A!==h;)A=(A+c)%a.length,T=a[A];if(T.disabled)return;s.value=[a[A].id]}else{const v=a.find(h=>!h.disabled);v&&(s.value=[v.id])}}const l={register:r,unregister:o,selected:s,select:u,disabled:De(()=>e.disabled),prev:()=>d(a.length-1),next:()=>d(1),isSelected:c=>s.value.includes(c),selectedClass:De(()=>e.selectedClass),items:De(()=>a),getItemIndex:c=>tR(a,c)};return Wa(t,l),l}function tR(e,t){const n=D0(e,[t]);return n.length?e.findIndex(a=>a.id===n[0]):-1}function D0(e,t){const n=[];return t.forEach(a=>{const s=e.find(r=>ts(a,r.value)),i=e[a];s?.value!=null?n.push(s.id):i!=null&&n.push(i.id)}),n}function nR(e,t){const n=[];return t.forEach(a=>{const s=e.findIndex(i=>i.id===a);if(~s){const i=e[s];n.push(i.value!=null?i.value:s)}}),n}const j0=Symbol.for("vuetify:v-btn-toggle"),aR=He({...P0(),...ed()},"VBtnToggle");et()({name:"VBtnToggle",props:aR(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{isSelected:a,next:s,prev:i,select:r,selected:o}=pl(e,j0);return ot(()=>{const m=wm.filterProps(e);return Q(wm,at({class:["v-btn-toggle",e.class]},m,{style:e.style}),{default:()=>[n.default?.({isSelected:a,next:s,prev:i,select:r,selected:o})]})}),{next:s,prev:i,select:r}}});const sR=["x-small","small","default","large","x-large"],$r=He({size:{type:[String,Number],default:"default"}},"size");function Hr(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:cs();return lu(()=>{const n=e.size;let a,s;return Ag(sR,n)?a=`${t}--size-${n}`:n&&(s={width:gt(n),height:gt(n)}),{sizeClasses:a,sizeStyles:s}})}const iR=He({color:String,disabled:Boolean,start:Boolean,end:Boolean,icon:Bt,opacity:[String,Number],...bt(),...$r(),...Gt({tag:"i"}),...un()},"VIcon"),hn=et()({name:"VIcon",props:iR(),setup(e,t){let{attrs:n,slots:a}=t;const s=ct(),{themeClasses:i}=Eg(),{iconData:r}=Mg(()=>s.value||e.icon),{sizeClasses:o}=Hr(e),{textColorClasses:m,textColorStyles:u}=Ha(()=>e.color);return ot(()=>{const d=a.default?.();d&&(s.value=Rg(d).filter(c=>c.type===cg&&c.children&&typeof c.children=="string")[0]?.children);const l=!!(n.onClick||n.onClickOnce);return Q(r.value.component,{tag:e.tag,icon:r.value.icon,class:Me(["v-icon","notranslate",i.value,o.value,m.value,{"v-icon--clickable":l,"v-icon--disabled":e.disabled,"v-icon--start":e.start,"v-icon--end":e.end},e.class]),style:vt([{"--v-icon-opacity":e.opacity},o.value?void 0:{fontSize:gt(e.size),height:gt(e.size),width:gt(e.size)},u.value,e.style]),role:l?"button":void 0,"aria-hidden":!l,tabindex:l?e.disabled?-1:0:void 0},{default:()=>[d]})}),{}}});function N0(e,t){const n=he(),a=ct(!1);if(cu){const s=new IntersectionObserver(i=>{a.value=!!i.find(r=>r.isIntersecting)},t);On(()=>{s.disconnect()}),rt(n,(i,r)=>{r&&(s.unobserve(r),a.value=!1),i&&s.observe(i)},{flush:"post"})}return{intersectionRef:n,isIntersecting:a}}const rR=He({bgColor:String,color:String,indeterminate:[Boolean,String],modelValue:{type:[Number,String],default:0},rotate:{type:[Number,String],default:0},width:{type:[Number,String],default:4},...bt(),...$r(),...Gt({tag:"div"}),...un()},"VProgressCircular"),ad=et()({name:"VProgressCircular",props:rR(),setup(e,t){let{slots:n}=t;const a=20,s=2*Math.PI*a,i=he(),{themeClasses:r}=_n(e),{sizeClasses:o,sizeStyles:m}=Hr(e),{textColorClasses:u,textColorStyles:d}=Ha(()=>e.color),{textColorClasses:l,textColorStyles:c}=Ha(()=>e.bgColor),{intersectionRef:v,isIntersecting:h}=N0(),{resizeRef:A,contentRect:T}=dr(),k=De(()=>pa(parseFloat(e.modelValue),0,100)),p=De(()=>Number(e.width)),L=De(()=>m.value?Number(e.size):T.value?T.value.width:Math.max(p.value,32)),O=De(()=>a/(1-p.value/L.value)*2),g=De(()=>p.value/L.value*O.value),B=De(()=>gt((100-k.value)/100*s));return ja(()=>{v.value=i.value,A.value=i.value}),ot(()=>Q(e.tag,{ref:i,class:Me(["v-progress-circular",{"v-progress-circular--indeterminate":!!e.indeterminate,"v-progress-circular--visible":h.value,"v-progress-circular--disable-shrink":e.indeterminate==="disable-shrink"},r.value,o.value,u.value,e.class]),style:vt([m.value,d.value,e.style]),role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":e.indeterminate?void 0:k.value},{default:()=>[S("svg",{style:{transform:`rotate(calc(-90deg + ${Number(e.rotate)}deg))`},xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${O.value} ${O.value}`},[S("circle",{class:Me(["v-progress-circular__underlay",l.value]),style:vt(c.value),fill:"transparent",cx:"50%",cy:"50%",r:a,"stroke-width":g.value,"stroke-dasharray":s,"stroke-dashoffset":0},null),S("circle",{class:"v-progress-circular__overlay",fill:"transparent",cx:"50%",cy:"50%",r:a,"stroke-width":g.value,"stroke-dasharray":s,"stroke-dashoffset":B.value},null)]),n.default&&S("div",{class:"v-progress-circular__content"},[n.default({value:k.value})])]})),{}}}),Sm={center:"center",top:"bottom",bottom:"top",left:"right",right:"left"},_l=He({location:String},"location");function bl(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2?arguments[2]:void 0;const{isRtl:a}=ca();return{locationStyles:ee(()=>{if(!e.location)return{};const{side:i,align:r}=gc(e.location.split(" ").length>1?e.location:`${e.location} center`,a.value);function o(u){return n?n(u):0}const m={};return i!=="center"&&(t?m[Sm[i]]=`calc(100% - ${o(i)}px)`:m[i]=0),r!=="center"?t?m[Sm[r]]=`calc(100% - ${o(r)}px)`:m[r]=0:(i==="center"?m.top=m.left="50%":m[{top:"left",bottom:"left",left:"top",right:"top"}[i]]="50%",m.transform={top:"translateX(-50%)",bottom:"translateX(-50%)",left:"translateY(-50%)",right:"translateY(-50%)",center:"translate(-50%, -50%)"}[i]),m})}}const oR=He({absolute:Boolean,active:{type:Boolean,default:!0},bgColor:String,bgOpacity:[Number,String],bufferValue:{type:[Number,String],default:0},bufferColor:String,bufferOpacity:[Number,String],clickable:Boolean,color:String,height:{type:[Number,String],default:4},indeterminate:Boolean,max:{type:[Number,String],default:100},modelValue:{type:[Number,String],default:0},opacity:[Number,String],reverse:Boolean,stream:Boolean,striped:Boolean,roundedBar:Boolean,...bt(),..._l({location:"top"}),...ta(),...Gt(),...un()},"VProgressLinear"),$0=et()({name:"VProgressLinear",props:oR(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=Wt(e,"modelValue"),{isRtl:s,rtlClasses:i}=ca(),{themeClasses:r}=_n(e),{locationStyles:o}=bl(e),{textColorClasses:m,textColorStyles:u}=Ha(()=>e.color),{backgroundColorClasses:d,backgroundColorStyles:l}=Gn(()=>e.bgColor||e.color),{backgroundColorClasses:c,backgroundColorStyles:v}=Gn(()=>e.bufferColor||e.bgColor||e.color),{backgroundColorClasses:h,backgroundColorStyles:A}=Gn(()=>e.color),{roundedClasses:T}=na(e),{intersectionRef:k,isIntersecting:p}=N0(),L=ee(()=>parseFloat(e.max)),O=ee(()=>parseFloat(e.height)),g=ee(()=>pa(parseFloat(e.bufferValue)/L.value*100,0,100)),B=ee(()=>pa(parseFloat(a.value)/L.value*100,0,100)),R=ee(()=>s.value!==e.reverse),C=ee(()=>e.indeterminate?"fade-transition":"slide-x-transition"),I=Sn&&window.matchMedia?.("(forced-colors: active)").matches;function b(y){if(!k.value)return;const{left:_,right:w,width:E}=k.value.getBoundingClientRect(),M=R.value?E-y.clientX+(w-E):y.clientX-_;a.value=Math.round(M/E*L.value)}return ot(()=>Q(e.tag,{ref:k,class:Me(["v-progress-linear",{"v-progress-linear--absolute":e.absolute,"v-progress-linear--active":e.active&&p.value,"v-progress-linear--reverse":R.value,"v-progress-linear--rounded":e.rounded,"v-progress-linear--rounded-bar":e.roundedBar,"v-progress-linear--striped":e.striped},T.value,r.value,i.value,e.class]),style:vt([{bottom:e.location==="bottom"?0:void 0,top:e.location==="top"?0:void 0,height:e.active?gt(O.value):0,"--v-progress-linear-height":gt(O.value),...e.absolute?o.value:{}},e.style]),role:"progressbar","aria-hidden":e.active?"false":"true","aria-valuemin":"0","aria-valuemax":e.max,"aria-valuenow":e.indeterminate?void 0:Math.min(parseFloat(a.value),L.value),onClick:e.clickable&&b},{default:()=>[e.stream&&S("div",{key:"stream",class:Me(["v-progress-linear__stream",m.value]),style:{...u.value,[R.value?"left":"right"]:gt(-O.value),borderTop:`${gt(O.value/2)} dotted`,opacity:parseFloat(e.bufferOpacity),top:`calc(50% - ${gt(O.value/4)})`,width:gt(100-g.value,"%"),"--v-progress-linear-stream-to":gt(O.value*(R.value?1:-1))}},null),S("div",{class:Me(["v-progress-linear__background",I?void 0:d.value]),style:vt([l.value,{opacity:parseFloat(e.bgOpacity),width:e.stream?0:void 0}])},null),S("div",{class:Me(["v-progress-linear__buffer",I?void 0:c.value]),style:vt([v.value,{opacity:parseFloat(e.bufferOpacity),width:gt(g.value,"%")}])},null),Q(Rs,{name:C.value},{default:()=>[e.indeterminate?S("div",{class:"v-progress-linear__indeterminate"},[["long","short"].map(y=>S("div",{key:y,class:Me(["v-progress-linear__indeterminate",y,I?void 0:h.value]),style:vt(A.value)},null))]):S("div",{class:Me(["v-progress-linear__determinate",I?void 0:h.value]),style:vt([A.value,{width:gt(B.value,"%")}])},null)]}),n.default&&S("div",{class:"v-progress-linear__content"},[n.default({value:B.value,buffer:g.value})])]})),{}}}),sd=He({loading:[Boolean,String]},"loader");function yl(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:cs();return{loaderClasses:De(()=>({[`${t}--loading`]:e.loading}))}}function id(e,t){let{slots:n}=t;return S("div",{class:Me(`${e.name}__loader`)},[n.default?.({color:e.color,isActive:e.active})||Q($0,{absolute:e.absolute,active:e.active,color:e.color,height:"2",indeterminate:!0},null)])}const lR=["static","relative","fixed","absolute","sticky"],rd=He({position:{type:String,validator:e=>lR.includes(e)}},"position");function od(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:cs();return{positionClasses:De(()=>e.position?`${t}--${e.position}`:void 0)}}function cR(){const e=ua("useRoute");return ee(()=>e?.proxy?.$route)}function H0(){return ua("useRouter")?.proxy?.$router}function wl(e,t){const n=ug("RouterLink"),a=De(()=>!!(e.href||e.to)),s=ee(()=>a?.value||Td(t,"click")||Td(e,"click"));if(typeof n=="string"||!("useLink"in n)){const d=De(()=>e.href);return{isLink:a,isClickable:s,href:d,linkProps:cr({href:d})}}const i=n.useLink({to:De(()=>e.to||""),replace:De(()=>e.replace)}),r=ee(()=>e.to?i:void 0),o=cR(),m=ee(()=>r.value?e.exact?o.value?r.value.isExactActive?.value&&ts(r.value.route.value.query,o.value.query):r.value.isExactActive?.value??!1:r.value.isActive?.value??!1:!1),u=ee(()=>e.to?r.value?.route.value.href:e.href);return{isLink:a,isClickable:s,isActive:m,route:r.value?.route,navigate:r.value?.navigate,href:u,linkProps:cr({href:u,"aria-current":De(()=>m.value?"page":void 0)})}}const Sl=He({href:String,replace:Boolean,to:[String,Object],exact:Boolean},"router");let lc=!1;function uR(e,t){let n=!1,a,s;Sn&&e?.beforeEach&&(en(()=>{window.addEventListener("popstate",i),a=e.beforeEach((r,o,m)=>{lc?n?t(m):m():setTimeout(()=>n?t(m):m()),lc=!0}),s=e?.afterEach(()=>{lc=!1})}),On(()=>{window.removeEventListener("popstate",i),a?.(),s?.()}));function i(r){r.state?.replaced||(n=!0,setTimeout(()=>n=!1))}}function dR(e,t){rt(()=>e.isActive?.value,n=>{e.isLink.value&&n!=null&&t&&en(()=>{t(n)})},{immediate:!0})}const Yc=Symbol("rippleStop"),mR=80;function km(e,t){e.style.transform=t,e.style.webkitTransform=t}function Xc(e){return e.constructor.name==="TouchEvent"}function z0(e){return e.constructor.name==="KeyboardEvent"}const fR=function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=0,s=0;if(!z0(e)){const l=t.getBoundingClientRect(),c=Xc(e)?e.touches[e.touches.length-1]:e;a=c.clientX-l.left,s=c.clientY-l.top}let i=0,r=.3;t._ripple?.circle?(r=.15,i=t.clientWidth/2,i=n.center?i:i+Math.sqrt((a-i)**2+(s-i)**2)/4):i=Math.sqrt(t.clientWidth**2+t.clientHeight**2)/2;const o=`${(t.clientWidth-i*2)/2}px`,m=`${(t.clientHeight-i*2)/2}px`,u=n.center?o:`${a-i}px`,d=n.center?m:`${s-i}px`;return{radius:i,scale:r,x:u,y:d,centerX:o,centerY:m}},jo={show(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!t?._ripple?.enabled)return;const a=document.createElement("span"),s=document.createElement("span");a.appendChild(s),a.className="v-ripple__container",n.class&&(a.className+=` ${n.class}`);const{radius:i,scale:r,x:o,y:m,centerX:u,centerY:d}=fR(e,t,n),l=`${i*2}px`;s.className="v-ripple__animation",s.style.width=l,s.style.height=l,t.appendChild(a);const c=window.getComputedStyle(t);c&&c.position==="static"&&(t.style.position="relative",t.dataset.previousPosition="static"),s.classList.add("v-ripple__animation--enter"),s.classList.add("v-ripple__animation--visible"),km(s,`translate(${o}, ${m}) scale3d(${r},${r},${r})`),s.dataset.activated=String(performance.now()),requestAnimationFrame(()=>{requestAnimationFrame(()=>{s.classList.remove("v-ripple__animation--enter"),s.classList.add("v-ripple__animation--in"),km(s,`translate(${u}, ${d}) scale3d(1,1,1)`)})})},hide(e){if(!e?._ripple?.enabled)return;const t=e.getElementsByClassName("v-ripple__animation");if(t.length===0)return;const n=t[t.length-1];if(n.dataset.isHiding)return;n.dataset.isHiding="true";const a=performance.now()-Number(n.dataset.activated),s=Math.max(250-a,0);setTimeout(()=>{n.classList.remove("v-ripple__animation--in"),n.classList.add("v-ripple__animation--out"),setTimeout(()=>{e.getElementsByClassName("v-ripple__animation").length===1&&e.dataset.previousPosition&&(e.style.position=e.dataset.previousPosition,delete e.dataset.previousPosition),n.parentNode?.parentNode===e&&e.removeChild(n.parentNode)},300)},s)}};function U0(e){return typeof e>"u"||!!e}function Sr(e){const t={},n=e.currentTarget;if(!(!n?._ripple||n._ripple.touched||e[Yc])){if(e[Yc]=!0,Xc(e))n._ripple.touched=!0,n._ripple.isTouch=!0;else if(n._ripple.isTouch)return;if(t.center=n._ripple.centered||z0(e),n._ripple.class&&(t.class=n._ripple.class),Xc(e)){if(n._ripple.showTimerCommit)return;n._ripple.showTimerCommit=()=>{jo.show(e,n,t)},n._ripple.showTimer=window.setTimeout(()=>{n?._ripple?.showTimerCommit&&(n._ripple.showTimerCommit(),n._ripple.showTimerCommit=null)},mR)}else jo.show(e,n,t)}}function xm(e){e[Yc]=!0}function Yn(e){const t=e.currentTarget;if(t?._ripple){if(window.clearTimeout(t._ripple.showTimer),e.type==="touchend"&&t._ripple.showTimerCommit){t._ripple.showTimerCommit(),t._ripple.showTimerCommit=null,t._ripple.showTimer=window.setTimeout(()=>{Yn(e)});return}window.setTimeout(()=>{t._ripple&&(t._ripple.touched=!1)}),jo.hide(t)}}function q0(e){const t=e.currentTarget;t?._ripple&&(t._ripple.showTimerCommit&&(t._ripple.showTimerCommit=null),window.clearTimeout(t._ripple.showTimer))}let kr=!1;function W0(e){!kr&&(e.keyCode===Cd.enter||e.keyCode===Cd.space)&&(kr=!0,Sr(e))}function Y0(e){kr=!1,Yn(e)}function X0(e){kr&&(kr=!1,Yn(e))}function G0(e,t,n){const{value:a,modifiers:s}=t,i=U0(a);if(i||jo.hide(e),e._ripple=e._ripple??{},e._ripple.enabled=i,e._ripple.centered=s.center,e._ripple.circle=s.circle,ko(a)&&a.class&&(e._ripple.class=a.class),i&&!n){if(s.stop){e.addEventListener("touchstart",xm,{passive:!0}),e.addEventListener("mousedown",xm);return}e.addEventListener("touchstart",Sr,{passive:!0}),e.addEventListener("touchend",Yn,{passive:!0}),e.addEventListener("touchmove",q0,{passive:!0}),e.addEventListener("touchcancel",Yn),e.addEventListener("mousedown",Sr),e.addEventListener("mouseup",Yn),e.addEventListener("mouseleave",Yn),e.addEventListener("keydown",W0),e.addEventListener("keyup",Y0),e.addEventListener("blur",X0),e.addEventListener("dragstart",Yn,{passive:!0})}else!i&&n&&K0(e)}function K0(e){e.removeEventListener("mousedown",Sr),e.removeEventListener("touchstart",Sr),e.removeEventListener("touchend",Yn),e.removeEventListener("touchmove",q0),e.removeEventListener("touchcancel",Yn),e.removeEventListener("mouseup",Yn),e.removeEventListener("mouseleave",Yn),e.removeEventListener("keydown",W0),e.removeEventListener("keyup",Y0),e.removeEventListener("dragstart",Yn),e.removeEventListener("blur",X0)}function vR(e,t){G0(e,t,!1)}function hR(e){delete e._ripple,K0(e)}function gR(e,t){if(t.value===t.oldValue)return;const n=U0(t.oldValue);G0(e,t,n)}const za={mounted:vR,unmounted:hR,updated:gR},Z0=He({active:{type:Boolean,default:void 0},activeColor:String,baseColor:String,symbol:{type:null,default:j0},flat:Boolean,icon:[Boolean,String,Function,Object],prependIcon:Bt,appendIcon:Bt,block:Boolean,readonly:Boolean,slim:Boolean,stacked:Boolean,ripple:{type:[Boolean,Object],default:!0},text:{type:[String,Number,Boolean],default:void 0},...Xa(),...bt(),...Ca(),...xa(),...vs(),...td(),...sd(),..._l(),...rd(),...ta(),...Sl(),...$r(),...Gt({tag:"button"}),...un(),...Fs({variant:"elevated"})},"VBtn"),xr=et()({name:"VBtn",props:Z0(),emits:{"group:selected":e=>!0},setup(e,t){let{attrs:n,slots:a}=t;const{themeClasses:s}=_n(e),{borderClasses:i}=Ga(e),{densityClasses:r}=Ka(e),{dimensionStyles:o}=Ta(e),{elevationClasses:m}=hs(e),{loaderClasses:u}=yl(e),{locationStyles:d}=bl(e),{positionClasses:l}=od(e),{roundedClasses:c}=na(e),{sizeClasses:v,sizeStyles:h}=Hr(e),A=nd(e,e.symbol,!1),T=wl(e,n),k=ee(()=>e.active!==void 0?e.active:T.isLink.value?T.isActive?.value:A?.isSelected.value),p=De(()=>k.value?e.activeColor??e.color:e.color),L=ee(()=>({color:A?.isSelected.value&&(!T.isLink.value||T.isActive?.value)||!A||T.isActive?.value?p.value??e.baseColor:e.baseColor,variant:e.variant})),{colorClasses:O,colorStyles:g,variantClasses:B}=Nr(L),R=ee(()=>A?.disabled.value||e.disabled),C=De(()=>e.variant==="elevated"&&!(e.disabled||e.flat||e.border)),I=ee(()=>{if(!(e.value===void 0||typeof e.value=="symbol"))return Object(e.value)===e.value?JSON.stringify(e.value,null,0):e.value});function b(y){R.value||T.isLink.value&&(y.metaKey||y.ctrlKey||y.shiftKey||y.button!==0||n.target==="_blank")||(T.navigate?.(y),A?.toggle())}return dR(T,A?.select),ot(()=>{const y=T.isLink.value?"a":e.tag,_=!!(e.prependIcon||a.prepend),w=!!(e.appendIcon||a.append),E=!!(e.icon&&e.icon!==!0);return on(Q(y,at({type:y==="a"?void 0:"button",class:["v-btn",A?.selectedClass.value,{"v-btn--active":k.value,"v-btn--block":e.block,"v-btn--disabled":R.value,"v-btn--elevated":C.value,"v-btn--flat":e.flat,"v-btn--icon":!!e.icon,"v-btn--loading":e.loading,"v-btn--readonly":e.readonly,"v-btn--slim":e.slim,"v-btn--stacked":e.stacked},s.value,i.value,O.value,r.value,m.value,u.value,l.value,c.value,v.value,B.value,e.class],style:[g.value,o.value,d.value,h.value,e.style],"aria-busy":e.loading?!0:void 0,disabled:R.value||void 0,tabindex:e.loading||e.readonly?-1:void 0,onClick:b,value:I.value},T.linkProps),{default:()=>[jr(!0,"v-btn"),!e.icon&&_&&S("span",{key:"prepend",class:"v-btn__prepend"},[a.prepend?Q(rn,{key:"prepend-defaults",disabled:!e.prependIcon,defaults:{VIcon:{icon:e.prependIcon}}},a.prepend):Q(hn,{key:"prepend-icon",icon:e.prependIcon},null)]),S("span",{class:"v-btn__content","data-no-activator":""},[!a.default&&E?Q(hn,{key:"content-icon",icon:e.icon},null):Q(rn,{key:"content-defaults",disabled:!E,defaults:{VIcon:{icon:e.icon}}},{default:()=>[a.default?.()??ie(e.text)]})]),!e.icon&&w&&S("span",{key:"append",class:"v-btn__append"},[a.append?Q(rn,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VIcon:{icon:e.appendIcon}}},a.append):Q(hn,{key:"append-icon",icon:e.appendIcon},null)]),!!e.loading&&S("span",{key:"loader",class:"v-btn__loader"},[a.loader?.()??Q(ad,{color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0,width:"2"},null)])]}),[[za,!R.value&&e.ripple,"",{center:!!e.icon}]])}),{group:A}}}),pR=He({start:Boolean,end:Boolean,icon:Bt,image:String,text:String,...Xa(),...bt(),...Ca(),...ta(),...$r(),...Gt(),...un(),...Fs({variant:"flat"})},"VAvatar"),ri=et()({name:"VAvatar",props:pR(),setup(e,t){let{slots:n}=t;const{themeClasses:a}=_n(e),{borderClasses:s}=Ga(e),{colorClasses:i,colorStyles:r,variantClasses:o}=Nr(e),{densityClasses:m}=Ka(e),{roundedClasses:u}=na(e),{sizeClasses:d,sizeStyles:l}=Hr(e);return ot(()=>Q(e.tag,{class:Me(["v-avatar",{"v-avatar--start":e.start,"v-avatar--end":e.end},a.value,s.value,i.value,m.value,u.value,d.value,o.value,e.class]),style:vt([r.value,l.value,e.style])},{default:()=>[n.default?Q(rn,{key:"content-defaults",defaults:{VImg:{cover:!0,src:e.image},VIcon:{icon:e.icon}}},{default:()=>[n.default()]}):e.image?Q(gl,{key:"image",src:e.image,alt:"",cover:!0},null):e.icon?Q(hn,{key:"icon",icon:e.icon},null):e.text,jr(!1,"v-avatar")]})),{}}}),_R=He({text:String,onClick:$n(),...bt(),...un()},"VLabel"),ld=et()({name:"VLabel",props:_R(),setup(e,t){let{slots:n}=t;return ot(()=>S("label",{class:Me(["v-label",{"v-label--clickable":!!e.onClick},e.class]),style:vt(e.style),onClick:e.onClick},[e.text,n.default?.()])),{}}}),Q0=Symbol.for("vuetify:selection-control-group"),cd=He({color:String,disabled:{type:Boolean,default:null},defaultsTarget:String,error:Boolean,id:String,inline:Boolean,falseIcon:Bt,trueIcon:Bt,ripple:{type:[Boolean,Object],default:!0},multiple:{type:Boolean,default:null},name:String,readonly:{type:Boolean,default:null},modelValue:null,type:String,valueComparator:{type:Function,default:ts},...bt(),...Ca(),...un()},"SelectionControlGroup"),bR=He({...cd({defaultsTarget:"VSelectionControl"})},"VSelectionControlGroup"),yR=et()({name:"VSelectionControlGroup",props:bR(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=Wt(e,"modelValue"),s=qa(),i=De(()=>e.id||`v-selection-control-group-${s}`),r=De(()=>e.name||i.value),o=new Set;return Wa(Q0,{modelValue:a,forceUpdate:()=>{o.forEach(m=>m())},onForceUpdate:m=>{o.add(m),On(()=>{o.delete(m)})}}),ls({[e.defaultsTarget]:{color:De(()=>e.color),disabled:De(()=>e.disabled),density:De(()=>e.density),error:De(()=>e.error),inline:De(()=>e.inline),modelValue:a,multiple:De(()=>!!e.multiple||e.multiple==null&&Array.isArray(a.value)),name:r,falseIcon:De(()=>e.falseIcon),trueIcon:De(()=>e.trueIcon),readonly:De(()=>e.readonly),ripple:De(()=>e.ripple),type:De(()=>e.type),valueComparator:De(()=>e.valueComparator)}}),ot(()=>S("div",{class:Me(["v-selection-control-group",{"v-selection-control-group--inline":e.inline},e.class]),style:vt(e.style),role:e.type==="radio"?"radiogroup":void 0},[n.default?.()])),{}}}),kl=He({label:String,baseColor:String,trueValue:null,falseValue:null,value:null,...bt(),...cd()},"VSelectionControl");function wR(e){const t=Jn(Q0,void 0),{densityClasses:n}=Ka(e),a=Wt(e,"modelValue"),s=ee(()=>e.trueValue!==void 0?e.trueValue:e.value!==void 0?e.value:!0),i=ee(()=>e.falseValue!==void 0?e.falseValue:!1),r=ee(()=>!!e.multiple||e.multiple==null&&Array.isArray(a.value)),o=ee({get(){const v=t?t.modelValue.value:a.value;return r.value?ba(v).some(h=>e.valueComparator(h,s.value)):e.valueComparator(v,s.value)},set(v){if(e.readonly)return;const h=v?s.value:i.value;let A=h;r.value&&(A=v?[...ba(a.value),h]:ba(a.value).filter(T=>!e.valueComparator(T,s.value))),t?t.modelValue.value=A:a.value=A}}),{textColorClasses:m,textColorStyles:u}=Ha(()=>{if(!(e.error||e.disabled))return o.value?e.color:e.baseColor}),{backgroundColorClasses:d,backgroundColorStyles:l}=Gn(()=>o.value&&!e.error&&!e.disabled?e.color:e.baseColor),c=ee(()=>o.value?e.trueIcon:e.falseIcon);return{group:t,densityClasses:n,trueValue:s,falseValue:i,model:o,textColorClasses:m,textColorStyles:u,backgroundColorClasses:d,backgroundColorStyles:l,icon:c}}const oi=et()({name:"VSelectionControl",directives:{vRipple:za},inheritAttrs:!1,props:kl(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:a}=t;const{group:s,densityClasses:i,icon:r,model:o,textColorClasses:m,textColorStyles:u,backgroundColorClasses:d,backgroundColorStyles:l,trueValue:c}=wR(e),v=qa(),h=ct(!1),A=ct(!1),T=he(),k=De(()=>e.id||`input-${v}`),p=De(()=>!e.disabled&&!e.readonly);s?.onForceUpdate(()=>{T.value&&(T.value.checked=o.value)});function L(R){p.value&&(h.value=!0,xo(R.target,":focus-visible")!==!1&&(A.value=!0))}function O(){h.value=!1,A.value=!1}function g(R){R.stopPropagation()}function B(R){if(!p.value){T.value&&(T.value.checked=o.value);return}e.readonly&&s&&en(()=>s.forceUpdate()),o.value=R.target.checked}return ot(()=>{const R=a.label?a.label({label:e.label,props:{for:k.value}}):e.label,[C,I]=Bi(n),b=S("input",at({ref:T,checked:o.value,disabled:!!e.disabled,id:k.value,onBlur:O,onFocus:L,onInput:B,"aria-disabled":!!e.disabled,"aria-label":e.label,type:e.type,value:c.value,name:e.name,"aria-checked":e.type==="checkbox"?o.value:void 0},I),null);return S("div",at({class:["v-selection-control",{"v-selection-control--dirty":o.value,"v-selection-control--disabled":e.disabled,"v-selection-control--error":e.error,"v-selection-control--focused":h.value,"v-selection-control--focus-visible":A.value,"v-selection-control--inline":e.inline},i.value,e.class]},C,{style:e.style}),[S("div",{class:Me(["v-selection-control__wrapper",m.value]),style:vt(u.value)},[a.default?.({backgroundColorClasses:d,backgroundColorStyles:l}),on(S("div",{class:Me(["v-selection-control__input"])},[a.input?.({model:o,textColorClasses:m,textColorStyles:u,backgroundColorClasses:d,backgroundColorStyles:l,inputNode:b,icon:r.value,props:{onFocus:L,onBlur:O,id:k.value}})??S(lt,null,[r.value&&Q(hn,{key:"icon",icon:r.value},null),b])]),[[za,e.ripple&&[!e.disabled&&!e.readonly,null,["center","circle"]]]])]),R&&Q(ld,{for:k.value,onClick:g},{default:()=>[R]})])}),{isFocused:h,input:T}}}),J0=He({indeterminate:Boolean,indeterminateIcon:{type:Bt,default:"$checkboxIndeterminate"},...kl({falseIcon:"$checkboxOff",trueIcon:"$checkboxOn"})},"VCheckboxBtn"),Gc=et()({name:"VCheckboxBtn",props:J0(),emits:{"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,t){let{slots:n}=t;const a=Wt(e,"indeterminate"),s=Wt(e,"modelValue");function i(m){a.value&&(a.value=!1)}const r=De(()=>a.value?e.indeterminateIcon:e.falseIcon),o=De(()=>a.value?e.indeterminateIcon:e.trueIcon);return ot(()=>{const m=us(oi.filterProps(e),["modelValue"]);return Q(oi,at(m,{modelValue:s.value,"onUpdate:modelValue":[u=>s.value=u,i],class:["v-checkbox-btn",e.class],style:e.style,type:"checkbox",falseIcon:r.value,trueIcon:o.value,"aria-checked":a.value?"mixed":void 0}),n)}),{}}});function eh(e){const{t}=qo();function n(a){let{name:s,color:i,...r}=a;const o={prepend:"prependAction",prependInner:"prependAction",append:"appendAction",appendInner:"appendAction",clear:"clear"}[s],m=e[`onClick:${s}`];function u(l){l.key!=="Enter"&&l.key!==" "||(l.preventDefault(),l.stopPropagation(),uu(m,new PointerEvent("click",l)))}const d=m&&o?t(`$vuetify.input.${o}`,e.label??""):void 0;return Q(hn,at({icon:e[`${s}Icon`],"aria-label":d,onClick:m,onKeydown:u,color:i},r),null)}return{InputIcon:n}}const SR=He({active:Boolean,color:String,messages:{type:[Array,String],default:()=>[]},...bt(),...Pr({transition:{component:I0,leaveAbsolute:!0,group:!0}})},"VMessages"),kR=et()({name:"VMessages",props:SR(),setup(e,t){let{slots:n}=t;const a=ee(()=>ba(e.messages)),{textColorClasses:s,textColorStyles:i}=Ha(()=>e.color);return ot(()=>Q(es,{transition:e.transition,tag:"div",class:Me(["v-messages",s.value,e.class]),style:vt([i.value,e.style])},{default:()=>[e.active&&a.value.map((r,o)=>S("div",{class:"v-messages__message",key:`${o}-${a.value}`},[n.message?n.message({message:r}):r]))]})),{}}}),th=He({focused:Boolean,"onUpdate:focused":$n()},"focus");function zr(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:cs();const n=Wt(e,"focused"),a=De(()=>({[`${t}--focused`]:n.value}));function s(){n.value=!0}function i(){n.value=!1}return{focusClasses:a,isFocused:n,focus:s,blur:i}}const xR=Symbol.for("vuetify:form");function nh(e){const t=Jn(xR,null);return{...t,isReadonly:ee(()=>!!(e?.readonly??t?.isReadonly.value)),isDisabled:ee(()=>!!(e?.disabled??t?.isDisabled.value))}}const TR=Symbol.for("vuetify:rules");function CR(e){const t=Jn(TR,null);return t?t(e):De(e)}const AR=He({disabled:{type:Boolean,default:null},error:Boolean,errorMessages:{type:[Array,String],default:()=>[]},maxErrors:{type:[Number,String],default:1},name:String,label:String,readonly:{type:Boolean,default:null},rules:{type:Array,default:()=>[]},modelValue:null,validateOn:String,validationValue:null,...th()},"validation");function ER(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:cs(),n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:qa();const a=Wt(e,"modelValue"),s=ee(()=>e.validationValue===void 0?a.value:e.validationValue),i=nh(e),r=CR(()=>e.rules),o=he([]),m=ct(!0),u=ee(()=>!!(ba(a.value===""?null:a.value).length||ba(s.value===""?null:s.value).length)),d=ee(()=>e.errorMessages?.length?ba(e.errorMessages).concat(o.value).slice(0,Math.max(0,Number(e.maxErrors))):o.value),l=ee(()=>{let O=(e.validateOn??i.validateOn?.value)||"input";O==="lazy"&&(O="input lazy"),O==="eager"&&(O="input eager");const g=new Set(O?.split(" ")??[]);return{input:g.has("input"),blur:g.has("blur")||g.has("input")||g.has("invalid-input"),invalidInput:g.has("invalid-input"),lazy:g.has("lazy"),eager:g.has("eager")}}),c=ee(()=>e.error||e.errorMessages?.length?!1:e.rules.length?m.value?o.value.length||l.value.lazy?null:!0:!o.value.length:!0),v=ct(!1),h=ee(()=>({[`${t}--error`]:c.value===!1,[`${t}--dirty`]:u.value,[`${t}--disabled`]:i.isDisabled.value,[`${t}--readonly`]:i.isReadonly.value})),A=ua("validation"),T=ee(()=>e.name??xt(n));Uo(()=>{i.register?.({id:T.value,vm:A,validate:L,reset:k,resetValidation:p})}),Qn(()=>{i.unregister?.(T.value)}),gn(async()=>{l.value.lazy||await L(!l.value.eager),i.update?.(T.value,c.value,d.value)}),_a(()=>l.value.input||l.value.invalidInput&&c.value===!1,()=>{rt(s,()=>{if(s.value!=null)L();else if(e.focused){const O=rt(()=>e.focused,g=>{g||L(),O()})}})}),_a(()=>l.value.blur,()=>{rt(()=>e.focused,O=>{O||L()})}),rt([c,d],()=>{i.update?.(T.value,c.value,d.value)});async function k(){a.value=null,await en(),await p()}async function p(){m.value=!0,l.value.lazy?o.value=[]:await L(!l.value.eager)}async function L(){let O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const g=[];v.value=!0;for(const B of r.value){if(g.length>=Number(e.maxErrors??1))break;const C=await(typeof B=="function"?B:()=>B)(s.value);if(C!==!0){if(C!==!1&&typeof C!="string"){console.warn(`${C} is not a valid value. Rule functions must return boolean true or a string.`);continue}g.push(C||"")}}return o.value=g,v.value=!1,m.value=O,o.value}return{errorMessages:d,isDirty:u,isDisabled:i.isDisabled,isReadonly:i.isReadonly,isPristine:m,isValid:c,isValidating:v,reset:k,resetValidation:p,validate:L,validationClasses:h}}const Pi=He({id:String,appendIcon:Bt,baseColor:String,centerAffix:{type:Boolean,default:!0},color:String,glow:Boolean,iconColor:[Boolean,String],prependIcon:Bt,hideDetails:[Boolean,String],hideSpinButtons:Boolean,hint:String,persistentHint:Boolean,messages:{type:[Array,String],default:()=>[]},direction:{type:String,default:"horizontal",validator:e=>["horizontal","vertical"].includes(e)},"onClick:prepend":$n(),"onClick:append":$n(),...bt(),...Ca(),...du(xa(),["maxWidth","minWidth","width"]),...un(),...AR()},"VInput"),Ua=et()({name:"VInput",props:{...Pi()},emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:a,emit:s}=t;const{densityClasses:i}=Ka(e),{dimensionStyles:r}=Ta(e),{themeClasses:o}=_n(e),{rtlClasses:m}=ca(),{InputIcon:u}=eh(e),d=qa(),l=ee(()=>e.id||`input-${d}`),c=ee(()=>`${l.value}-messages`),{errorMessages:v,isDirty:h,isDisabled:A,isReadonly:T,isPristine:k,isValid:p,isValidating:L,reset:O,resetValidation:g,validate:B,validationClasses:R}=ER(e,"v-input",l),C=ee(()=>({id:l,messagesId:c,isDirty:h,isDisabled:A,isReadonly:T,isPristine:k,isValid:p,isValidating:L,reset:O,resetValidation:g,validate:B})),I=De(()=>e.error||e.disabled?void 0:e.focused?e.color:e.baseColor),b=De(()=>{if(e.iconColor)return e.iconColor===!0?I.value:e.iconColor}),y=ee(()=>e.errorMessages?.length||!k.value&&v.value.length?v.value:e.hint&&(e.persistentHint||e.focused)?e.hint:e.messages);return ot(()=>{const _=!!(a.prepend||e.prependIcon),w=!!(a.append||e.appendIcon),E=y.value.length>0,M=!e.hideDetails||e.hideDetails==="auto"&&(E||!!a.details);return S("div",{class:Me(["v-input",`v-input--${e.direction}`,{"v-input--center-affix":e.centerAffix,"v-input--focused":e.focused,"v-input--glow":e.glow,"v-input--hide-spin-buttons":e.hideSpinButtons},i.value,o.value,m.value,R.value,e.class]),style:vt([r.value,e.style])},[_&&S("div",{key:"prepend",class:"v-input__prepend"},[a.prepend?.(C.value),e.prependIcon&&Q(u,{key:"prepend-icon",name:"prepend",color:b.value},null)]),a.default&&S("div",{class:"v-input__control"},[a.default?.(C.value)]),w&&S("div",{key:"append",class:"v-input__append"},[e.appendIcon&&Q(u,{key:"append-icon",name:"append",color:b.value},null),a.append?.(C.value)]),M&&S("div",{id:c.value,class:"v-input__details",role:"alert","aria-live":"polite"},[Q(kR,{active:E,messages:y.value},{message:a.message}),a.details?.(C.value)])])}),{reset:O,resetValidation:g,validate:B,isValid:p,errorMessages:v}}}),MR=He({...Pi(),...us(J0(),["inline"])},"VCheckbox"),RR=et()({name:"VCheckbox",inheritAttrs:!1,props:MR(),emits:{"update:modelValue":e=>!0,"update:focused":e=>!0},setup(e,t){let{attrs:n,slots:a}=t;const s=Wt(e,"modelValue"),{isFocused:i,focus:r,blur:o}=zr(e),m=qa();return ot(()=>{const[u,d]=Bi(n),l=Ua.filterProps(e),c=Gc.filterProps(e);return Q(Ua,at({class:["v-checkbox",e.class]},u,l,{modelValue:s.value,"onUpdate:modelValue":v=>s.value=v,id:e.id||`checkbox-${m}`,focused:i.value,style:e.style}),{...a,default:v=>{let{id:h,messagesId:A,isDisabled:T,isReadonly:k,isValid:p}=v;return Q(Gc,at(c,{id:h.value,"aria-describedby":A.value,disabled:T.value,readonly:k.value},d,{error:p.value===!1,modelValue:s.value,"onUpdate:modelValue":L=>s.value=L,onFocus:r,onBlur:o}),a)}})}),{}}});function IR(e){let{selectedElement:t,containerElement:n,isRtl:a,isHorizontal:s}=e;const i=Tr(s,n),r=ah(s,a,n),o=Tr(s,t),m=sh(s,t),u=o*.4;return r>m?m-u:r+i<m+o?m-i+o+u:r}function BR(e){let{selectedElement:t,containerElement:n,isHorizontal:a}=e;const s=Tr(a,n),i=sh(a,t),r=Tr(a,t);return i-s/2+r/2}function Tm(e,t){return t?.[e?"scrollWidth":"scrollHeight"]||0}function LR(e,t){return t?.[e?"clientWidth":"clientHeight"]||0}function ah(e,t,n){if(!n)return 0;const{scrollLeft:a,offsetWidth:s,scrollWidth:i}=n;return e?t?i-s+a:a:n.scrollTop}function Tr(e,t){return t?.[e?"offsetWidth":"offsetHeight"]||0}function sh(e,t){return t?.[e?"offsetLeft":"offsetTop"]||0}const OR=Symbol.for("vuetify:v-slide-group"),ud=He({centerActive:Boolean,direction:{type:String,default:"horizontal"},symbol:{type:null,default:OR},nextIcon:{type:Bt,default:"$next"},prevIcon:{type:Bt,default:"$prev"},showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["always","desktop","mobile"].includes(e)},...bt(),...Um({mobile:null}),...Gt(),...ed({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),No=et()({name:"VSlideGroup",props:ud(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{isRtl:a}=ca(),{displayClasses:s,mobile:i}=Wo(e),r=pl(e,e.symbol),o=ct(!1),m=ct(0),u=ct(0),d=ct(0),l=ee(()=>e.direction==="horizontal"),{resizeRef:c,contentRect:v}=dr(),{resizeRef:h,contentRect:A}=dr(),T=Ig(),k=ee(()=>({container:c.el,duration:200,easing:"easeOutQuart"})),p=ee(()=>r.selected.value.length?r.items.value.findIndex(x=>x.id===r.selected.value[0]):-1),L=ee(()=>r.selected.value.length?r.items.value.findIndex(x=>x.id===r.selected.value[r.selected.value.length-1]):-1);if(Sn){let x=-1;rt(()=>[r.selected.value,v.value,A.value,l.value],()=>{cancelAnimationFrame(x),x=requestAnimationFrame(()=>{if(v.value&&A.value){const H=l.value?"width":"height";u.value=v.value[H],d.value=A.value[H],o.value=u.value+1<d.value}if(p.value>=0&&h.el){const H=h.el.children[L.value];g(H,e.centerActive)}})})}const O=ct(!1);function g(x,H){let F=0;H?F=BR({containerElement:c.el,isHorizontal:l.value,selectedElement:x}):F=IR({containerElement:c.el,isHorizontal:l.value,isRtl:a.value,selectedElement:x}),B(F)}function B(x){if(!Sn||!c.el)return;const H=Tr(l.value,c.el),F=ah(l.value,a.value,c.el);if(!(Tm(l.value,c.el)<=H||Math.abs(x-F)<16)){if(l.value&&a.value&&c.el){const{scrollWidth:me,offsetWidth:X}=c.el;x=me-X-x}l.value?T.horizontal(x,k.value):T(x,k.value)}}function R(x){const{scrollTop:H,scrollLeft:F}=x.target;m.value=l.value?F:H}function C(x){if(O.value=!0,!(!o.value||!h.el)){for(const H of x.composedPath())for(const F of h.el.children)if(F===H){g(F);return}}}function I(x){O.value=!1}let b=!1;function y(x){!b&&!O.value&&!(x.relatedTarget&&h.el?.contains(x.relatedTarget))&&M(),b=!1}function _(){b=!0}function w(x){if(!h.el)return;function H(F){x.preventDefault(),M(F)}l.value?x.key==="ArrowRight"?H(a.value?"prev":"next"):x.key==="ArrowLeft"&&H(a.value?"next":"prev"):x.key==="ArrowDown"?H("next"):x.key==="ArrowUp"&&H("prev"),x.key==="Home"?H("first"):x.key==="End"&&H("last")}function E(x,H){if(!x)return;let F=x;do F=F?.[H==="next"?"nextElementSibling":"previousElementSibling"];while(F?.hasAttribute("disabled"));return F}function M(x){if(!h.el)return;let H;if(!x)H=To(h.el)[0];else if(x==="next"){if(H=E(h.el.querySelector(":focus"),x),!H)return M("first")}else if(x==="prev"){if(H=E(h.el.querySelector(":focus"),x),!H)return M("last")}else x==="first"?(H=h.el.firstElementChild,H?.hasAttribute("disabled")&&(H=E(H,"next"))):x==="last"&&(H=h.el.lastElementChild,H?.hasAttribute("disabled")&&(H=E(H,"prev")));H&&H.focus({preventScroll:!0})}function V(x){const H=l.value&&a.value?-1:1,F=(x==="prev"?-H:H)*u.value;let se=m.value+F;if(l.value&&a.value&&c.el){const{scrollWidth:me,offsetWidth:X}=c.el;se+=me-X}B(se)}const q=ee(()=>({next:r.next,prev:r.prev,select:r.select,isSelected:r.isSelected})),$=ee(()=>{switch(e.showArrows){case"always":return!0;case"desktop":return!i.value;case!0:return o.value||Math.abs(m.value)>0;case"mobile":return i.value||o.value||Math.abs(m.value)>0;default:return!i.value&&(o.value||Math.abs(m.value)>0)}}),U=ee(()=>Math.abs(m.value)>1),f=ee(()=>{if(!c.value)return!1;const x=Tm(l.value,c.el),H=LR(l.value,c.el);return x-H-Math.abs(m.value)>1});return ot(()=>Q(e.tag,{class:Me(["v-slide-group",{"v-slide-group--vertical":!l.value,"v-slide-group--has-affixes":$.value,"v-slide-group--is-overflowing":o.value},s.value,e.class]),style:vt(e.style),tabindex:O.value||r.selected.value.length?-1:0,onFocus:y},{default:()=>[$.value&&S("div",{key:"prev",class:Me(["v-slide-group__prev",{"v-slide-group__prev--disabled":!U.value}]),onMousedown:_,onClick:()=>U.value&&V("prev")},[n.prev?.(q.value)??Q(bm,null,{default:()=>[Q(hn,{icon:a.value?e.nextIcon:e.prevIcon},null)]})]),S("div",{key:"container",ref:c,class:"v-slide-group__container",onScroll:R},[S("div",{ref:h,class:"v-slide-group__content",onFocusin:C,onFocusout:I,onKeydown:w},[n.default?.(q.value)])]),$.value&&S("div",{key:"next",class:Me(["v-slide-group__next",{"v-slide-group__next--disabled":!f.value}]),onMousedown:_,onClick:()=>f.value&&V("next")},[n.next?.(q.value)??Q(bm,null,{default:()=>[Q(hn,{icon:a.value?e.prevIcon:e.nextIcon},null)]})])]})),{selected:r.selected,scrollTo:V,scrollOffset:m,focus:M,hasPrev:U,hasNext:f}}}),ih=Symbol.for("vuetify:v-chip-group"),FR=He({baseColor:String,column:Boolean,filter:Boolean,valueComparator:{type:Function,default:ts},...ud(),...bt(),...ed({selectedClass:"v-chip--selected"}),...Gt(),...un(),...Fs({variant:"tonal"})},"VChipGroup");et()({name:"VChipGroup",props:FR(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:a}=_n(e),{isSelected:s,select:i,next:r,prev:o,selected:m}=pl(e,ih);return ls({VChip:{baseColor:De(()=>e.baseColor),color:De(()=>e.color),disabled:De(()=>e.disabled),filter:De(()=>e.filter),variant:De(()=>e.variant)}}),ot(()=>{const u=No.filterProps(e);return Q(No,at(u,{class:["v-chip-group",{"v-chip-group--column":e.column},a.value,e.class],style:e.style}),{default:()=>[n.default?.({isSelected:s,select:i,next:r,prev:o,selected:m.value})]})}),{}}});const VR=He({activeClass:String,appendAvatar:String,appendIcon:Bt,baseColor:String,closable:Boolean,closeIcon:{type:Bt,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},draggable:Boolean,filter:Boolean,filterIcon:{type:Bt,default:"$complete"},label:Boolean,link:{type:Boolean,default:void 0},pill:Boolean,prependAvatar:String,prependIcon:Bt,ripple:{type:[Boolean,Object],default:!0},text:{type:[String,Number,Boolean],default:void 0},modelValue:{type:Boolean,default:!0},onClick:$n(),onClickOnce:$n(),...Xa(),...bt(),...Ca(),...vs(),...td(),...ta(),...Sl(),...$r(),...Gt({tag:"span"}),...un(),...Fs({variant:"tonal"})},"VChip"),rh=et()({name:"VChip",directives:{vRipple:za},props:VR(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0,"group:selected":e=>!0,click:e=>!0},setup(e,t){let{attrs:n,emit:a,slots:s}=t;const{t:i}=qo(),{borderClasses:r}=Ga(e),{densityClasses:o}=Ka(e),{elevationClasses:m}=hs(e),{roundedClasses:u}=na(e),{sizeClasses:d}=Hr(e),{themeClasses:l}=_n(e),c=Wt(e,"modelValue"),v=nd(e,ih,!1),h=wl(e,n),A=De(()=>e.link!==!1&&h.isLink.value),T=ee(()=>!e.disabled&&e.link!==!1&&(!!v||e.link||h.isClickable.value)),k=De(()=>({"aria-label":i(e.closeLabel),disabled:e.disabled,onClick(R){R.preventDefault(),R.stopPropagation(),c.value=!1,a("click:close",R)}})),{colorClasses:p,colorStyles:L,variantClasses:O}=Nr(()=>({color:!v||v.isSelected.value?e.color??e.baseColor:e.baseColor,variant:e.variant}));function g(R){a("click",R),T.value&&(h.navigate?.(R),v?.toggle())}function B(R){(R.key==="Enter"||R.key===" ")&&(R.preventDefault(),g(R))}return()=>{const R=h.isLink.value?"a":e.tag,C=!!(e.appendIcon||e.appendAvatar),I=!!(C||s.append),b=!!(s.close||e.closable),y=!!(s.filter||e.filter)&&v,_=!!(e.prependIcon||e.prependAvatar),w=!!(_||s.prepend);return c.value&&on(Q(R,at({class:["v-chip",{"v-chip--disabled":e.disabled,"v-chip--label":e.label,"v-chip--link":T.value,"v-chip--filter":y,"v-chip--pill":e.pill,[`${e.activeClass}`]:e.activeClass&&h.isActive?.value},l.value,r.value,p.value,o.value,m.value,u.value,d.value,O.value,v?.selectedClass.value,e.class],style:[L.value,e.style],disabled:e.disabled||void 0,draggable:e.draggable,tabindex:T.value?0:void 0,onClick:g,onKeydown:T.value&&!A.value&&B},h.linkProps),{default:()=>[jr(T.value,"v-chip"),y&&Q(L0,{key:"filter"},{default:()=>[on(S("div",{class:"v-chip__filter"},[s.filter?Q(rn,{key:"filter-defaults",disabled:!e.filterIcon,defaults:{VIcon:{icon:e.filterIcon}}},s.filter):Q(hn,{key:"filter-icon",icon:e.filterIcon},null)]),[[os,v.isSelected.value]])]}),w&&S("div",{key:"prepend",class:"v-chip__prepend"},[s.prepend?Q(rn,{key:"prepend-defaults",disabled:!_,defaults:{VAvatar:{image:e.prependAvatar,start:!0},VIcon:{icon:e.prependIcon,start:!0}}},s.prepend):S(lt,null,[e.prependIcon&&Q(hn,{key:"prepend-icon",icon:e.prependIcon,start:!0},null),e.prependAvatar&&Q(ri,{key:"prepend-avatar",image:e.prependAvatar,start:!0},null)])]),S("div",{class:"v-chip__content","data-no-activator":""},[s.default?.({isSelected:v?.isSelected.value,selectedClass:v?.selectedClass.value,select:v?.select,toggle:v?.toggle,value:v?.value.value,disabled:e.disabled})??ie(e.text)]),I&&S("div",{key:"append",class:"v-chip__append"},[s.append?Q(rn,{key:"append-defaults",disabled:!C,defaults:{VAvatar:{end:!0,image:e.appendAvatar},VIcon:{end:!0,icon:e.appendIcon}}},s.append):S(lt,null,[e.appendIcon&&Q(hn,{key:"append-icon",end:!0,icon:e.appendIcon},null),e.appendAvatar&&Q(ri,{key:"append-avatar",end:!0,image:e.appendAvatar},null)])]),b&&S("button",at({key:"close",class:"v-chip__close",type:"button","data-testid":"close-chip"},k.value),[s.close?Q(rn,{key:"close-defaults",defaults:{VIcon:{icon:e.closeIcon,size:"x-small"}}},s.close):Q(hn,{key:"close-icon",icon:e.closeIcon,size:"x-small"},null)])]}),[[za,T.value&&e.ripple,null]])}}}),Kc=Symbol.for("vuetify:list");function oh(){const e=Jn(Kc,{hasPrepend:ct(!1),updateHasPrepend:()=>null}),t={hasPrepend:ct(!1),updateHasPrepend:n=>{n&&(t.hasPrepend.value=n)}};return Wa(Kc,t),e}function lh(){return Jn(Kc,null)}const dd=e=>{const t={activate:n=>{let{id:a,value:s,activated:i}=n;return a=pn(a),e&&!s&&i.size===1&&i.has(a)||(s?i.add(a):i.delete(a)),i},in:(n,a,s)=>{let i=new Set;if(n!=null)for(const r of ba(n))i=t.activate({id:r,value:!0,activated:new Set(i),children:a,parents:s});return i},out:n=>Array.from(n)};return t},ch=e=>{const t=dd(e);return{activate:a=>{let{activated:s,id:i,...r}=a;i=pn(i);const o=s.has(i)?new Set([i]):new Set;return t.activate({...r,id:i,activated:o})},in:(a,s,i)=>{let r=new Set;if(a!=null){const o=ba(a);o.length&&(r=t.in(o.slice(0,1),s,i))}return r},out:(a,s,i)=>t.out(a,s,i)}},PR=e=>{const t=dd(e);return{activate:a=>{let{id:s,activated:i,children:r,...o}=a;return s=pn(s),r.has(s)?i:t.activate({id:s,activated:i,children:r,...o})},in:t.in,out:t.out}},DR=e=>{const t=ch(e);return{activate:a=>{let{id:s,activated:i,children:r,...o}=a;return s=pn(s),r.has(s)?i:t.activate({id:s,activated:i,children:r,...o})},in:t.in,out:t.out}},jR={open:e=>{let{id:t,value:n,opened:a,parents:s}=e;if(n){const i=new Set;i.add(t);let r=s.get(t);for(;r!=null;)i.add(r),r=s.get(r);return i}else return a.delete(t),a},select:()=>null},uh={open:e=>{let{id:t,value:n,opened:a,parents:s}=e;if(n){let i=s.get(t);for(a.add(t);i!=null&&i!==t;)a.add(i),i=s.get(i);return a}else a.delete(t);return a},select:()=>null},NR={open:uh.open,select:e=>{let{id:t,value:n,opened:a,parents:s}=e;if(!n)return a;const i=[];let r=s.get(t);for(;r!=null;)i.push(r),r=s.get(r);return new Set(i)}},md=e=>{const t={select:n=>{let{id:a,value:s,selected:i}=n;if(a=pn(a),e&&!s){const r=Array.from(i.entries()).reduce((o,m)=>{let[u,d]=m;return d==="on"&&o.push(u),o},[]);if(r.length===1&&r[0]===a)return i}return i.set(a,s?"on":"off"),i},in:(n,a,s)=>{const i=new Map;for(const r of n||[])t.select({id:r,value:!0,selected:i,children:a,parents:s});return i},out:n=>{const a=[];for(const[s,i]of n.entries())i==="on"&&a.push(s);return a}};return t},dh=e=>{const t=md(e);return{select:a=>{let{selected:s,id:i,...r}=a;i=pn(i);const o=s.has(i)?new Map([[i,s.get(i)]]):new Map;return t.select({...r,id:i,selected:o})},in:(a,s,i)=>a?.length?t.in(a.slice(0,1),s,i):new Map,out:(a,s,i)=>t.out(a,s,i)}},$R=e=>{const t=md(e);return{select:a=>{let{id:s,selected:i,children:r,...o}=a;return s=pn(s),r.has(s)?i:t.select({id:s,selected:i,children:r,...o})},in:t.in,out:t.out}},HR=e=>{const t=dh(e);return{select:a=>{let{id:s,selected:i,children:r,...o}=a;return s=pn(s),r.has(s)?i:t.select({id:s,selected:i,children:r,...o})},in:t.in,out:t.out}},mh=e=>{const t={select:n=>{let{id:a,value:s,selected:i,children:r,parents:o}=n;a=pn(a);const m=new Map(i),u=[a];for(;u.length;){const l=u.shift();i.set(pn(l),s?"on":"off"),r.has(l)&&u.push(...r.get(l))}let d=pn(o.get(a));for(;d;){const l=r.get(d),c=l.every(h=>i.get(pn(h))==="on"),v=l.every(h=>!i.has(pn(h))||i.get(pn(h))==="off");i.set(d,c?"on":v?"off":"indeterminate"),d=pn(o.get(d))}return e&&!s&&Array.from(i.entries()).reduce((c,v)=>{let[h,A]=v;return A==="on"&&c.push(h),c},[]).length===0?m:i},in:(n,a,s)=>{let i=new Map;for(const r of n||[])i=t.select({id:r,value:!0,selected:i,children:a,parents:s});return i},out:(n,a)=>{const s=[];for(const[i,r]of n.entries())r==="on"&&!a.has(i)&&s.push(i);return s}};return t},zR=e=>{const t=mh(e);return{select:t.select,in:t.in,out:(a,s,i)=>{const r=[];for(const[o,m]of a.entries())if(m==="on"){if(i.has(o)){const u=i.get(o);if(a.get(u)==="on")continue}r.push(o)}return r}}},Cr=Symbol.for("vuetify:nested"),fh={id:ct(),root:{register:()=>null,unregister:()=>null,parents:he(new Map),children:he(new Map),open:()=>null,openOnSelect:()=>null,activate:()=>null,select:()=>null,activatable:he(!1),selectable:he(!1),opened:he(new Set),activated:he(new Set),selected:he(new Map),selectedValues:he([]),getPath:()=>[]}},UR=He({activatable:Boolean,selectable:Boolean,activeStrategy:[String,Function,Object],selectStrategy:[String,Function,Object],openStrategy:[String,Object],opened:null,activated:null,selected:null,mandatory:Boolean},"nested"),qR=e=>{let t=!1;const n=he(new Map),a=he(new Map),s=Wt(e,"opened",e.opened,h=>new Set(h),h=>[...h.values()]),i=ee(()=>{if(typeof e.activeStrategy=="object")return e.activeStrategy;if(typeof e.activeStrategy=="function")return e.activeStrategy(e.mandatory);switch(e.activeStrategy){case"leaf":return PR(e.mandatory);case"single-leaf":return DR(e.mandatory);case"independent":return dd(e.mandatory);case"single-independent":default:return ch(e.mandatory)}}),r=ee(()=>{if(typeof e.selectStrategy=="object")return e.selectStrategy;if(typeof e.selectStrategy=="function")return e.selectStrategy(e.mandatory);switch(e.selectStrategy){case"single-leaf":return HR(e.mandatory);case"leaf":return $R(e.mandatory);case"independent":return md(e.mandatory);case"single-independent":return dh(e.mandatory);case"trunk":return zR(e.mandatory);case"classic":default:return mh(e.mandatory)}}),o=ee(()=>{if(typeof e.openStrategy=="object")return e.openStrategy;switch(e.openStrategy){case"list":return NR;case"single":return jR;case"multiple":default:return uh}}),m=Wt(e,"activated",e.activated,h=>i.value.in(h,n.value,a.value),h=>i.value.out(h,n.value,a.value)),u=Wt(e,"selected",e.selected,h=>r.value.in(h,n.value,a.value),h=>r.value.out(h,n.value,a.value));Qn(()=>{t=!0});function d(h){const A=[];let T=h;for(;T!=null;)A.unshift(T),T=a.value.get(T);return A}const l=ua("nested"),c=new Set,v={id:ct(),root:{opened:s,activatable:De(()=>e.activatable),selectable:De(()=>e.selectable),activated:m,selected:u,selectedValues:ee(()=>{const h=[];for(const[A,T]of u.value.entries())T==="on"&&h.push(A);return h}),register:(h,A,T)=>{if(c.has(h)){d(h).map(String).join(" -> "),d(A).concat(h).map(String).join(" -> ");return}else c.add(h);A&&h!==A&&a.value.set(h,A),T&&n.value.set(h,[]),A!=null&&n.value.set(A,[...n.value.get(A)||[],h])},unregister:h=>{if(t)return;c.delete(h),n.value.delete(h);const A=a.value.get(h);if(A){const T=n.value.get(A)??[];n.value.set(A,T.filter(k=>k!==h))}a.value.delete(h)},open:(h,A,T)=>{l.emit("click:open",{id:h,value:A,path:d(h),event:T});const k=o.value.open({id:h,value:A,opened:new Set(s.value),children:n.value,parents:a.value,event:T});k&&(s.value=k)},openOnSelect:(h,A,T)=>{const k=o.value.select({id:h,value:A,selected:new Map(u.value),opened:new Set(s.value),children:n.value,parents:a.value,event:T});k&&(s.value=k)},select:(h,A,T)=>{l.emit("click:select",{id:h,value:A,path:d(h),event:T});const k=r.value.select({id:h,value:A,selected:new Map(u.value),children:n.value,parents:a.value,event:T});k&&(u.value=k),v.root.openOnSelect(h,A,T)},activate:(h,A,T)=>{if(!e.activatable)return v.root.select(h,!0,T);l.emit("click:activate",{id:h,value:A,path:d(h),event:T});const k=i.value.activate({id:h,value:A,activated:new Set(m.value),children:n.value,parents:a.value,event:T});if(k.size!==m.value.size)m.value=k;else{for(const p of k)if(!m.value.has(p)){m.value=k;return}for(const p of m.value)if(!k.has(p)){m.value=k;return}}},children:n,parents:a,getPath:d}};return Wa(Cr,v),v.root},vh=(e,t)=>{const n=Jn(Cr,fh),a=Symbol("nested item"),s=ee(()=>Is(e)??a),i={...n,id:s,open:(r,o)=>n.root.open(s.value,r,o),openOnSelect:(r,o)=>n.root.openOnSelect(s.value,r,o),isOpen:ee(()=>n.root.opened.value.has(s.value)),parent:ee(()=>n.root.parents.value.get(s.value)),activate:(r,o)=>n.root.activate(s.value,r,o),isActivated:ee(()=>n.root.activated.value.has(pn(s.value))),select:(r,o)=>n.root.select(s.value,r,o),isSelected:ee(()=>n.root.selected.value.get(pn(s.value))==="on"),isIndeterminate:ee(()=>n.root.selected.value.get(pn(s.value))==="indeterminate"),isLeaf:ee(()=>!n.root.children.value.get(s.value)),isGroupActivator:n.isGroupActivator};return Uo(()=>{!n.isGroupActivator&&n.root.register(s.value,n.id.value,t)}),Qn(()=>{!n.isGroupActivator&&n.root.unregister(s.value)}),t&&Wa(Cr,i),i},WR=()=>{const e=Jn(Cr,fh);Wa(Cr,{...e,isGroupActivator:!0})},YR=Bg({name:"VListGroupActivator",setup(e,t){let{slots:n}=t;return WR(),()=>n.default?.()}}),XR=He({activeColor:String,baseColor:String,color:String,collapseIcon:{type:Bt,default:"$collapse"},expandIcon:{type:Bt,default:"$expand"},rawId:[String,Number],prependIcon:Bt,appendIcon:Bt,fluid:Boolean,subgroup:Boolean,title:String,value:null,...bt(),...Gt()},"VListGroup"),Cm=et()({name:"VListGroup",props:XR(),setup(e,t){let{slots:n}=t;const{isOpen:a,open:s,id:i}=vh(()=>e.value,!0),r=ee(()=>`v-list-group--id-${String(e.rawId??i.value)}`),o=lh(),{isBooted:m}=Dr();function u(v){["INPUT","TEXTAREA"].includes(v.target?.tagName)||s(!a.value,v)}const d=ee(()=>({onClick:u,class:"v-list-group__header",id:r.value})),l=ee(()=>a.value?e.collapseIcon:e.expandIcon),c=ee(()=>({VListItem:{active:a.value,activeColor:e.activeColor,baseColor:e.baseColor,color:e.color,prependIcon:e.prependIcon||e.subgroup&&l.value,appendIcon:e.appendIcon||!e.subgroup&&l.value,title:e.title,value:e.value}}));return ot(()=>Q(e.tag,{class:Me(["v-list-group",{"v-list-group--prepend":o?.hasPrepend.value,"v-list-group--fluid":e.fluid,"v-list-group--subgroup":e.subgroup,"v-list-group--open":a.value},e.class]),style:vt(e.style)},{default:()=>[n.activator&&Q(rn,{defaults:c.value},{default:()=>[Q(YR,null,{default:()=>[n.activator({props:d.value,isOpen:a.value})]})]}),Q(es,{transition:{component:B0},disabled:!m.value},{default:()=>[on(S("div",{class:"v-list-group__items",role:"group","aria-labelledby":r.value},[n.default?.()]),[[os,a.value]])]})]})),{isOpen:a}}}),GR=He({opacity:[Number,String],...bt(),...Gt()},"VListItemSubtitle"),KR=et()({name:"VListItemSubtitle",props:GR(),setup(e,t){let{slots:n}=t;return ot(()=>Q(e.tag,{class:Me(["v-list-item-subtitle",e.class]),style:vt([{"--v-list-item-subtitle-opacity":e.opacity},e.style])},n)),{}}}),hh=qm("v-list-item-title"),ZR=He({active:{type:Boolean,default:void 0},activeClass:String,activeColor:String,appendAvatar:String,appendIcon:Bt,baseColor:String,disabled:Boolean,lines:[Boolean,String],link:{type:Boolean,default:void 0},nav:Boolean,prependAvatar:String,prependIcon:Bt,ripple:{type:[Boolean,Object],default:!0},slim:Boolean,subtitle:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},value:null,onClick:$n(),onClickOnce:$n(),...Xa(),...bt(),...Ca(),...xa(),...vs(),...ta(),...Sl(),...Gt(),...un(),...Fs({variant:"text"})},"VListItem"),Ar=et()({name:"VListItem",directives:{vRipple:za},props:ZR(),emits:{click:e=>!0},setup(e,t){let{attrs:n,slots:a,emit:s}=t;const i=wl(e,n),r=ee(()=>e.value===void 0?i.href.value:e.value),{activate:o,isActivated:m,select:u,isOpen:d,isSelected:l,isIndeterminate:c,isGroupActivator:v,root:h,parent:A,openOnSelect:T,id:k}=vh(r,!1),p=lh(),L=ee(()=>e.active!==!1&&(e.active||i.isActive?.value||(h.activatable.value?m.value:l.value))),O=De(()=>e.link!==!1&&i.isLink.value),g=ee(()=>!!p&&(h.selectable.value||h.activatable.value||e.value!=null)),B=ee(()=>!e.disabled&&e.link!==!1&&(e.link||i.isClickable.value||g.value)),R=De(()=>e.rounded||e.nav),C=De(()=>e.color??e.activeColor),I=De(()=>({color:L.value?C.value??e.baseColor:e.baseColor,variant:e.variant}));rt(()=>i.isActive?.value,se=>{se&&b()}),Uo(()=>{i.isActive?.value&&b()});function b(){A.value!=null&&h.open(A.value,!0),T(!0)}const{themeClasses:y}=_n(e),{borderClasses:_}=Ga(e),{colorClasses:w,colorStyles:E,variantClasses:M}=Nr(I),{densityClasses:V}=Ka(e),{dimensionStyles:q}=Ta(e),{elevationClasses:$}=hs(e),{roundedClasses:U}=na(R),f=De(()=>e.lines?`v-list-item--${e.lines}-line`:void 0),x=ee(()=>({isActive:L.value,select:u,isOpen:d.value,isSelected:l.value,isIndeterminate:c.value}));function H(se){s("click",se),!["INPUT","TEXTAREA"].includes(se.target?.tagName)&&B.value&&(i.navigate?.(se),!v&&(h.activatable.value?o(!m.value,se):(h.selectable.value||e.value!=null)&&u(!l.value,se)))}function F(se){const me=se.target;["INPUT","TEXTAREA"].includes(me.tagName)||(se.key==="Enter"||se.key===" ")&&(se.preventDefault(),se.target.dispatchEvent(new MouseEvent("click",se)))}return ot(()=>{const se=O.value?"a":e.tag,me=a.title||e.title!=null,X=a.subtitle||e.subtitle!=null,G=!!(e.appendAvatar||e.appendIcon),ue=!!(G||a.append),be=!!(e.prependAvatar||e.prependIcon),ke=!!(be||a.prepend);return p?.updateHasPrepend(ke),e.activeColor&&Lg("active-color",["color","base-color"]),on(Q(se,at({class:["v-list-item",{"v-list-item--active":L.value,"v-list-item--disabled":e.disabled,"v-list-item--link":B.value,"v-list-item--nav":e.nav,"v-list-item--prepend":!ke&&p?.hasPrepend.value,"v-list-item--slim":e.slim,[`${e.activeClass}`]:e.activeClass&&L.value},y.value,_.value,w.value,V.value,$.value,f.value,U.value,M.value,e.class],style:[E.value,q.value,e.style],tabindex:B.value?p?-2:0:void 0,"aria-selected":g.value?h.activatable.value?m.value:h.selectable.value?l.value:L.value:void 0,onClick:H,onKeydown:B.value&&!O.value&&F},i.linkProps),{default:()=>[jr(B.value||L.value,"v-list-item"),ke&&S("div",{key:"prepend",class:"v-list-item__prepend"},[a.prepend?Q(rn,{key:"prepend-defaults",disabled:!be,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon},VListItemAction:{start:!0}}},{default:()=>[a.prepend?.(x.value)]}):S(lt,null,[e.prependAvatar&&Q(ri,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&Q(hn,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)]),S("div",{class:"v-list-item__spacer"},null)]),S("div",{class:"v-list-item__content","data-no-activator":""},[me&&Q(hh,{key:"title"},{default:()=>[a.title?.({title:e.title})??ie(e.title)]}),X&&Q(KR,{key:"subtitle"},{default:()=>[a.subtitle?.({subtitle:e.subtitle})??ie(e.subtitle)]}),a.default?.(x.value)]),ue&&S("div",{key:"append",class:"v-list-item__append"},[a.append?Q(rn,{key:"append-defaults",disabled:!G,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon},VListItemAction:{end:!0}}},{default:()=>[a.append?.(x.value)]}):S(lt,null,[e.appendIcon&&Q(hn,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&Q(ri,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)]),S("div",{class:"v-list-item__spacer"},null)])]}),[[za,B.value&&e.ripple]])}),{activate:o,isActivated:m,isGroupActivator:v,isSelected:l,list:p,select:u,root:h,id:k,link:i}}}),QR=He({color:String,inset:Boolean,sticky:Boolean,title:String,...bt(),...Gt()},"VListSubheader"),JR=et()({name:"VListSubheader",props:QR(),setup(e,t){let{slots:n}=t;const{textColorClasses:a,textColorStyles:s}=Ha(()=>e.color);return ot(()=>{const i=!!(n.default||e.title);return Q(e.tag,{class:Me(["v-list-subheader",{"v-list-subheader--inset":e.inset,"v-list-subheader--sticky":e.sticky},a.value,e.class]),style:vt([{textColorStyles:s},e.style])},{default:()=>[i&&S("div",{class:"v-list-subheader__text"},[n.default?.()??e.title])]})}),{}}}),eI=He({color:String,inset:Boolean,length:[Number,String],opacity:[Number,String],thickness:[Number,String],vertical:Boolean,...bt(),...un()},"VDivider"),gh=et()({name:"VDivider",props:eI(),setup(e,t){let{attrs:n,slots:a}=t;const{themeClasses:s}=_n(e),{textColorClasses:i,textColorStyles:r}=Ha(()=>e.color),o=ee(()=>{const m={};return e.length&&(m[e.vertical?"height":"width"]=gt(e.length)),e.thickness&&(m[e.vertical?"borderRightWidth":"borderTopWidth"]=gt(e.thickness)),m});return ot(()=>{const m=S("hr",{class:Me([{"v-divider":!0,"v-divider--inset":e.inset,"v-divider--vertical":e.vertical},s.value,i.value,e.class]),style:vt([o.value,r.value,{"--v-border-opacity":e.opacity},e.style]),"aria-orientation":!n.role||n.role==="separator"?e.vertical?"vertical":"horizontal":void 0,role:`${n.role||"separator"}`},null);return a.default?S("div",{class:Me(["v-divider__wrapper",{"v-divider__wrapper--vertical":e.vertical,"v-divider__wrapper--inset":e.inset}])},[m,S("div",{class:"v-divider__content"},[a.default()]),m]):m}),{}}}),tI=He({items:Array,returnObject:Boolean},"VListChildren"),ph=et()({name:"VListChildren",props:tI(),setup(e,t){let{slots:n}=t;return oh(),()=>n.default?.()??e.items?.map(a=>{let{children:s,props:i,type:r,raw:o}=a;if(r==="divider")return n.divider?.({props:i})??Q(gh,i,null);if(r==="subheader")return n.subheader?.({props:i})??Q(JR,i,null);const m={subtitle:n.subtitle?d=>n.subtitle?.({...d,item:o}):void 0,prepend:n.prepend?d=>n.prepend?.({...d,item:o}):void 0,append:n.append?d=>n.append?.({...d,item:o}):void 0,title:n.title?d=>n.title?.({...d,item:o}):void 0},u=Cm.filterProps(i);return s?Q(Cm,at(u,{value:e.returnObject?o:i?.value,rawId:i?.value}),{activator:d=>{let{props:l}=d;const c={...i,...l,value:e.returnObject?o:i.value};return n.header?n.header({props:c}):Q(Ar,c,m)},default:()=>Q(ph,{items:s,returnObject:e.returnObject},n)}):n.item?n.item({props:i}):Q(Ar,at(i,{value:e.returnObject?o:i.value}),m)})}}),_h=He({items:{type:Array,default:()=>[]},itemTitle:{type:[String,Array,Function],default:"title"},itemValue:{type:[String,Array,Function],default:"value"},itemChildren:{type:[Boolean,String,Array,Function],default:"children"},itemProps:{type:[Boolean,String,Array,Function],default:"props"},returnObject:Boolean,valueComparator:Function},"list-items");function Zc(e,t){const n=Fa(t,e.itemTitle,t),a=Fa(t,e.itemValue,n),s=Fa(t,e.itemChildren),i=e.itemProps===!0?typeof t=="object"&&t!=null&&!Array.isArray(t)?"children"in t?us(t,["children"]):t:void 0:Fa(t,e.itemProps),r={title:n,value:a,...i};return{title:String(r.title??""),value:r.value,props:r,children:Array.isArray(s)?bh(e,s):void 0,raw:t}}function bh(e,t){const n=du(e,["itemTitle","itemValue","itemChildren","itemProps","returnObject","valueComparator"]),a=[];for(const s of t)a.push(Zc(n,s));return a}function nI(e){const t=ee(()=>bh(e,e.items)),n=ee(()=>t.value.some(o=>o.value===null)),a=ct(new Map),s=ct([]);ja(()=>{const o=t.value,m=new Map,u=[];for(let d=0;d<o.length;d++){const l=o[d];if(pc(l.value)||l.value===null){let c=m.get(l.value);c||(c=[],m.set(l.value,c)),c.push(l)}else u.push(l)}a.value=m,s.value=u});function i(o){const m=a.value,u=t.value,d=s.value,l=n.value,c=e.returnObject,v=!!e.valueComparator,h=e.valueComparator||ts,A=du(e,["itemTitle","itemValue","itemChildren","itemProps","returnObject","valueComparator"]),T=[];e:for(const k of o){if(!l&&k===null)continue;if(c&&typeof k=="string"){T.push(Zc(A,k));continue}const p=m.get(k);if(v||!p){for(const L of v?u:d)if(h(k,L.value)){T.push(L);continue e}T.push(Zc(A,k));continue}T.push(...p)}return T}function r(o){return e.returnObject?o.map(m=>{let{raw:u}=m;return u}):o.map(m=>{let{value:u}=m;return u})}return{items:t,transformIn:i,transformOut:r}}function aI(e,t){const n=Fa(t,e.itemType,"item"),a=pc(t)?t:Fa(t,e.itemTitle),s=pc(t)?t:Fa(t,e.itemValue,void 0),i=Fa(t,e.itemChildren),r=e.itemProps===!0?us(t,["children"]):Fa(t,e.itemProps),o={title:a,value:s,...r};return{type:n,title:o.title,value:o.value,props:o,children:n==="item"&&i?yh(e,i):void 0,raw:t}}function yh(e,t){const n=[];for(const a of t)n.push(aI(e,a));return n}function sI(e){return{items:ee(()=>yh(e,e.items))}}const iI=He({baseColor:String,activeColor:String,activeClass:String,bgColor:String,disabled:Boolean,expandIcon:Bt,collapseIcon:Bt,lines:{type:[Boolean,String],default:"one"},slim:Boolean,nav:Boolean,"onClick:open":$n(),"onClick:select":$n(),"onUpdate:opened":$n(),...UR({selectStrategy:"single-leaf",openStrategy:"list"}),...Xa(),...bt(),...Ca(),...xa(),...vs(),itemType:{type:String,default:"type"},..._h(),...ta(),...Gt(),...un(),...Fs({variant:"text"})},"VList"),wh=et()({name:"VList",props:iI(),emits:{"update:selected":e=>!0,"update:activated":e=>!0,"update:opened":e=>!0,"click:open":e=>!0,"click:activate":e=>!0,"click:select":e=>!0},setup(e,t){let{slots:n}=t;const{items:a}=sI(e),{themeClasses:s}=_n(e),{backgroundColorClasses:i,backgroundColorStyles:r}=Gn(()=>e.bgColor),{borderClasses:o}=Ga(e),{densityClasses:m}=Ka(e),{dimensionStyles:u}=Ta(e),{elevationClasses:d}=hs(e),{roundedClasses:l}=na(e),{children:c,open:v,parents:h,select:A,getPath:T}=qR(e),k=De(()=>e.lines?`v-list--${e.lines}-line`:void 0),p=De(()=>e.activeColor),L=De(()=>e.baseColor),O=De(()=>e.color);oh(),ls({VListGroup:{activeColor:p,baseColor:L,color:O,expandIcon:De(()=>e.expandIcon),collapseIcon:De(()=>e.collapseIcon)},VListItem:{activeClass:De(()=>e.activeClass),activeColor:p,baseColor:L,color:O,density:De(()=>e.density),disabled:De(()=>e.disabled),lines:De(()=>e.lines),nav:De(()=>e.nav),slim:De(()=>e.slim),variant:De(()=>e.variant)}});const g=ct(!1),B=he();function R(w){g.value=!0}function C(w){g.value=!1}function I(w){!g.value&&!(w.relatedTarget&&B.value?.contains(w.relatedTarget))&&_()}function b(w){const E=w.target;if(!(!B.value||["INPUT","TEXTAREA"].includes(E.tagName))){if(w.key==="ArrowDown")_("next");else if(w.key==="ArrowUp")_("prev");else if(w.key==="Home")_("first");else if(w.key==="End")_("last");else return;w.preventDefault()}}function y(w){g.value=!0}function _(w){if(B.value)return ho(B.value,w)}return ot(()=>Q(e.tag,{ref:B,class:Me(["v-list",{"v-list--disabled":e.disabled,"v-list--nav":e.nav,"v-list--slim":e.slim},s.value,i.value,o.value,m.value,d.value,k.value,l.value,e.class]),style:vt([r.value,u.value,e.style]),tabindex:e.disabled?-1:0,role:"listbox","aria-activedescendant":void 0,onFocusin:R,onFocusout:C,onFocus:I,onKeydown:b,onMousedown:y},{default:()=>[Q(ph,{items:a.value,returnObject:e.returnObject},n)]})),{open:v,select:A,focus:_,children:c,parents:h,getPath:T}}});function cc(e,t){return{x:e.x+t.x,y:e.y+t.y}}function rI(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Am(e,t){if(e.side==="top"||e.side==="bottom"){const{side:n,align:a}=e,s=a==="left"?0:a==="center"?t.width/2:a==="right"?t.width:a,i=n==="top"?0:n==="bottom"?t.height:n;return cc({x:s,y:i},t)}else if(e.side==="left"||e.side==="right"){const{side:n,align:a}=e,s=n==="left"?0:n==="right"?t.width:n,i=a==="top"?0:a==="center"?t.height/2:a==="bottom"?t.height:a;return cc({x:s,y:i},t)}return cc({x:t.width/2,y:t.height/2},t)}const Sh={static:cI,connected:dI},oI=He({locationStrategy:{type:[String,Function],default:"static",validator:e=>typeof e=="function"||e in Sh},location:{type:String,default:"bottom"},origin:{type:String,default:"auto"},offset:[Number,String,Array]},"VOverlay-location-strategies");function lI(e,t){const n=he({}),a=he();Sn&&_a(()=>!!(t.isActive.value&&e.locationStrategy),o=>{rt(()=>e.locationStrategy,o),On(()=>{window.removeEventListener("resize",s),visualViewport?.removeEventListener("resize",i),visualViewport?.removeEventListener("scroll",r),a.value=void 0}),window.addEventListener("resize",s,{passive:!0}),visualViewport?.addEventListener("resize",i,{passive:!0}),visualViewport?.addEventListener("scroll",r,{passive:!0}),typeof e.locationStrategy=="function"?a.value=e.locationStrategy(t,e,n)?.updateLocation:a.value=Sh[e.locationStrategy](t,e,n)?.updateLocation});function s(o){a.value?.(o)}function i(o){a.value?.(o)}function r(o){a.value?.(o)}return{contentStyles:n,updateLocation:a}}function cI(){}function uI(e,t){const n=ou(e);return t?n.x+=parseFloat(e.style.right||0):n.x-=parseFloat(e.style.left||0),n.y-=parseFloat(e.style.top||0),n}function dI(e,t,n){(Array.isArray(e.target.value)||Og(e.target.value))&&Object.assign(n.value,{position:"fixed",top:0,[e.isRtl.value?"right":"left"]:0});const{preferredAnchor:s,preferredOrigin:i}=lu(()=>{const k=gc(t.location,e.isRtl.value),p=t.origin==="overlap"?k:t.origin==="auto"?Ll(k):gc(t.origin,e.isRtl.value);return k.side===p.side&&k.align===Ol(p).align?{preferredAnchor:Ad(k),preferredOrigin:Ad(p)}:{preferredAnchor:k,preferredOrigin:p}}),[r,o,m,u]=["minWidth","minHeight","maxWidth","maxHeight"].map(k=>ee(()=>{const p=parseFloat(t[k]);return isNaN(p)?1/0:p})),d=ee(()=>{if(Array.isArray(t.offset))return t.offset;if(typeof t.offset=="string"){const k=t.offset.split(" ").map(parseFloat);return k.length<2&&k.push(0),k}return typeof t.offset=="number"?[t.offset,0]:[0,0]});let l=!1,c=-1;const v=new Wm(4),h=new ResizeObserver(()=>{if(!l)return;if(requestAnimationFrame(p=>{p!==c&&v.clear(),requestAnimationFrame(L=>{c=L})}),v.isFull){const p=v.values();if(ts(p.at(-1),p.at(-3)))return}const k=T();k&&v.push(k.flipped)});rt([e.target,e.contentEl],(k,p)=>{let[L,O]=k,[g,B]=p;g&&!Array.isArray(g)&&h.unobserve(g),L&&!Array.isArray(L)&&h.observe(L),B&&h.unobserve(B),O&&h.observe(O)},{immediate:!0}),On(()=>{h.disconnect()});let A=new Fl({x:0,y:0,width:0,height:0});function T(){if(l=!1,requestAnimationFrame(()=>l=!0),!e.target.value||!e.contentEl.value)return;(Array.isArray(e.target.value)||e.target.value.offsetParent||e.target.value.getClientRects().length)&&(A=$m(e.target.value));const k=uI(e.contentEl.value,e.isRtl.value),p=Co(e.contentEl.value),L=12;p.length||(p.push(document.documentElement),e.contentEl.value.style.top&&e.contentEl.value.style.left||(k.x-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-x")||0),k.y-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-y")||0)));const O=p.reduce((w,E)=>{const M=Fg(E);return w?new Fl({x:Math.max(w.left,M.left),y:Math.max(w.top,M.top),width:Math.min(w.right,M.right)-Math.max(w.left,M.left),height:Math.min(w.bottom,M.bottom)-Math.max(w.top,M.top)}):M},void 0);O.x+=L,O.y+=L,O.width-=L*2,O.height-=L*2;let g={anchor:s.value,origin:i.value};function B(w){const E=new Fl(k),M=Am(w.anchor,A),V=Am(w.origin,E);let{x:q,y:$}=rI(M,V);switch(w.anchor.side){case"top":$-=d.value[0];break;case"bottom":$+=d.value[0];break;case"left":q-=d.value[0];break;case"right":q+=d.value[0];break}switch(w.anchor.align){case"top":$-=d.value[1];break;case"bottom":$+=d.value[1];break;case"left":q-=d.value[1];break;case"right":q+=d.value[1];break}return E.x+=q,E.y+=$,E.width=Math.min(E.width,m.value),E.height=Math.min(E.height,u.value),{overflows:Md(E,O),x:q,y:$}}let R=0,C=0;const I={x:0,y:0},b={x:!1,y:!1};let y=-1;for(;!(y++>10);){const{x:w,y:E,overflows:M}=B(g);R+=w,C+=E,k.x+=w,k.y+=E;{const V=Ed(g.anchor),q=M.x.before||M.x.after,$=M.y.before||M.y.after;let U=!1;if(["x","y"].forEach(f=>{if(f==="x"&&q&&!b.x||f==="y"&&$&&!b.y){const x={anchor:{...g.anchor},origin:{...g.origin}},H=f==="x"?V==="y"?Ol:Ll:V==="y"?Ll:Ol;x.anchor=H(x.anchor),x.origin=H(x.origin);const{overflows:F}=B(x);(F[f].before<=M[f].before&&F[f].after<=M[f].after||F[f].before+F[f].after<(M[f].before+M[f].after)/2)&&(g=x,U=b[f]=!0)}}),U)continue}M.x.before&&(R+=M.x.before,k.x+=M.x.before),M.x.after&&(R-=M.x.after,k.x-=M.x.after),M.y.before&&(C+=M.y.before,k.y+=M.y.before),M.y.after&&(C-=M.y.after,k.y-=M.y.after);{const V=Md(k,O);I.x=O.width-V.x.before-V.x.after,I.y=O.height-V.y.before-V.y.after,R+=V.x.before,k.x+=V.x.before,C+=V.y.before,k.y+=V.y.before}break}const _=Ed(g.anchor);return Object.assign(n.value,{"--v-overlay-anchor-origin":`${g.anchor.side} ${g.anchor.align}`,transformOrigin:`${g.origin.side} ${g.origin.align}`,top:gt(uc(C)),left:e.isRtl.value?void 0:gt(uc(R)),right:e.isRtl.value?gt(uc(-R)):void 0,minWidth:gt(_==="y"?Math.min(r.value,A.width):r.value),maxWidth:gt(Em(pa(I.x,r.value===1/0?0:r.value,m.value))),maxHeight:gt(Em(pa(I.y,o.value===1/0?0:o.value,u.value)))}),{available:I,contentBox:k,flipped:b}}return rt(()=>[s.value,i.value,t.offset,t.minWidth,t.minHeight,t.maxWidth,t.maxHeight],()=>T()),en(()=>{const k=T();if(!k)return;const{available:p,contentBox:L}=k;L.height>p.y&&requestAnimationFrame(()=>{T(),requestAnimationFrame(()=>{T()})})}),{updateLocation:T}}function uc(e){return Math.round(e*devicePixelRatio)/devicePixelRatio}function Em(e){return Math.ceil(e*devicePixelRatio)/devicePixelRatio}let Qc=!0;const $o=[];function mI(e){!Qc||$o.length?($o.push(e),Jc()):(Qc=!1,e(),Jc())}let Mm=-1;function Jc(){cancelAnimationFrame(Mm),Mm=requestAnimationFrame(()=>{const e=$o.shift();e&&e(),$o.length?Jc():Qc=!0})}const kh={none:null,close:hI,block:gI,reposition:pI},fI=He({scrollStrategy:{type:[String,Function],default:"block",validator:e=>typeof e=="function"||e in kh}},"VOverlay-scroll-strategies");function vI(e,t){if(!Sn)return;let n;ja(async()=>{n?.stop(),t.isActive.value&&e.scrollStrategy&&(n=Nm(),await new Promise(a=>setTimeout(a)),n.active&&n.run(()=>{typeof e.scrollStrategy=="function"?e.scrollStrategy(t,e,n):kh[e.scrollStrategy]?.(t,e,n)}))}),On(()=>{n?.stop()})}function hI(e){function t(n){e.isActive.value=!1}xh(e.targetEl.value??e.contentEl.value,t)}function gI(e,t){const n=e.root.value?.offsetParent,a=[...new Set([...Co(e.targetEl.value,t.contained?n:void 0),...Co(e.contentEl.value,t.contained?n:void 0)])].filter(r=>!r.classList.contains("v-overlay-scroll-blocked")),s=window.innerWidth-document.documentElement.offsetWidth,i=(r=>Vg(r)&&r)(n||document.documentElement);i&&e.root.value.classList.add("v-overlay--scroll-blocked"),a.forEach((r,o)=>{r.style.setProperty("--v-body-scroll-x",gt(-r.scrollLeft)),r.style.setProperty("--v-body-scroll-y",gt(-r.scrollTop)),r!==document.documentElement&&r.style.setProperty("--v-scrollbar-offset",gt(s)),r.classList.add("v-overlay-scroll-blocked")}),On(()=>{a.forEach((r,o)=>{const m=parseFloat(r.style.getPropertyValue("--v-body-scroll-x")),u=parseFloat(r.style.getPropertyValue("--v-body-scroll-y")),d=r.style.scrollBehavior;r.style.scrollBehavior="auto",r.style.removeProperty("--v-body-scroll-x"),r.style.removeProperty("--v-body-scroll-y"),r.style.removeProperty("--v-scrollbar-offset"),r.classList.remove("v-overlay-scroll-blocked"),r.scrollLeft=-m,r.scrollTop=-u,r.style.scrollBehavior=d}),i&&e.root.value.classList.remove("v-overlay--scroll-blocked")})}function pI(e,t,n){let a=!1,s=-1,i=-1;function r(o){mI(()=>{const m=performance.now();e.updateLocation.value?.(o),a=(performance.now()-m)/(1e3/60)>2})}i=(typeof requestIdleCallback>"u"?o=>o():requestIdleCallback)(()=>{n.run(()=>{xh(e.targetEl.value??e.contentEl.value,o=>{a?(cancelAnimationFrame(s),s=requestAnimationFrame(()=>{s=requestAnimationFrame(()=>{r(o)})})):r(o)})})}),On(()=>{typeof cancelIdleCallback<"u"&&cancelIdleCallback(i),cancelAnimationFrame(s)})}function xh(e,t){const n=[document,...Co(e)];n.forEach(a=>{a.addEventListener("scroll",t,{passive:!0})}),On(()=>{n.forEach(a=>{a.removeEventListener("scroll",t)})})}const eu=Symbol.for("vuetify:v-menu"),Th=He({closeDelay:[Number,String],openDelay:[Number,String]},"delay");function Ch(e,t){let n=()=>{};function a(r){n?.();const o=Number(r?e.openDelay:e.closeDelay);return new Promise(m=>{n=Pg(o,()=>{t?.(r),m(r)})})}function s(){return a(!0)}function i(){return a(!1)}return{clearDelay:n,runOpenDelay:s,runCloseDelay:i}}const _I=He({target:[String,Object],activator:[String,Object],activatorProps:{type:Object,default:()=>({})},openOnClick:{type:Boolean,default:void 0},openOnHover:Boolean,openOnFocus:{type:Boolean,default:void 0},closeOnContentClick:Boolean,...Th()},"VOverlay-activator");function bI(e,t){let{isActive:n,isTop:a,contentEl:s}=t;const i=ua("useActivator"),r=he();let o=!1,m=!1,u=!0;const d=ee(()=>e.openOnFocus||e.openOnFocus==null&&e.openOnHover),l=ee(()=>e.openOnClick||e.openOnClick==null&&!e.openOnHover&&!d.value),{runOpenDelay:c,runCloseDelay:v}=Ch(e,C=>{C===(e.openOnHover&&o||d.value&&m)&&!(e.openOnHover&&n.value&&!a.value)&&(n.value!==C&&(u=!0),n.value=C)}),h=he(),A={onClick:C=>{C.stopPropagation(),r.value=C.currentTarget||C.target,n.value||(h.value=[C.clientX,C.clientY]),n.value=!n.value},onMouseenter:C=>{C.sourceCapabilities?.firesTouchEvents||(o=!0,r.value=C.currentTarget||C.target,c())},onMouseleave:C=>{o=!1,v()},onFocus:C=>{xo(C.target,":focus-visible")!==!1&&(m=!0,C.stopPropagation(),r.value=C.currentTarget||C.target,c())},onBlur:C=>{m=!1,C.stopPropagation(),v()}},T=ee(()=>{const C={};return l.value&&(C.onClick=A.onClick),e.openOnHover&&(C.onMouseenter=A.onMouseenter,C.onMouseleave=A.onMouseleave),d.value&&(C.onFocus=A.onFocus,C.onBlur=A.onBlur),C}),k=ee(()=>{const C={};if(e.openOnHover&&(C.onMouseenter=()=>{o=!0,c()},C.onMouseleave=()=>{o=!1,v()}),d.value&&(C.onFocusin=()=>{m=!0,c()},C.onFocusout=()=>{m=!1,v()}),e.closeOnContentClick){const I=Jn(eu,null);C.onClick=()=>{n.value=!1,I?.closeParents()}}return C}),p=ee(()=>{const C={};return e.openOnHover&&(C.onMouseenter=()=>{u&&(o=!0,u=!1,c())},C.onMouseleave=()=>{o=!1,v()}),C});rt(a,C=>{C&&(e.openOnHover&&!o&&(!d.value||!m)||d.value&&!m&&(!e.openOnHover||!o))&&!s.value?.contains(document.activeElement)&&(n.value=!1)}),rt(n,C=>{C||setTimeout(()=>{h.value=void 0})},{flush:"post"});const L=Rd();ja(()=>{L.value&&en(()=>{r.value=L.el})});const O=Rd(),g=ee(()=>e.target==="cursor"&&h.value?h.value:O.value?O.el:Ah(e.target,i)||r.value),B=ee(()=>Array.isArray(g.value)?void 0:g.value);let R;return rt(()=>!!e.activator,C=>{C&&Sn?(R=Nm(),R.run(()=>{yI(e,i,{activatorEl:r,activatorEvents:T})})):R&&R.stop()},{flush:"post",immediate:!0}),On(()=>{R?.stop()}),{activatorEl:r,activatorRef:L,target:g,targetEl:B,targetRef:O,activatorEvents:T,contentEvents:k,scrimEvents:p}}function yI(e,t,n){let{activatorEl:a,activatorEvents:s}=n;rt(()=>e.activator,(m,u)=>{if(u&&m!==u){const d=o(u);d&&r(d)}m&&en(()=>i())},{immediate:!0}),rt(()=>e.activatorProps,()=>{i()}),On(()=>{r()});function i(){let m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:o(),u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.activatorProps;m&&Dg(m,at(s.value,u))}function r(){let m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:o(),u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.activatorProps;m&&jg(m,at(s.value,u))}function o(){let m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.activator;const u=Ah(m,t);return a.value=u?.nodeType===Node.ELEMENT_NODE?u:void 0,a.value}}function Ah(e,t){if(!e)return;let n;if(e==="parent"){let a=t?.proxy?.$el?.parentNode;for(;a?.hasAttribute("data-no-activator");)a=a.parentNode;n=a}else typeof e=="string"?n=document.querySelector(e):"$el"in e?n=e.$el:n=e;return n}function wI(){if(!Sn)return ct(!1);const{ssr:e}=Wo();if(e){const t=ct(!1);return gn(()=>{t.value=!0}),t}else return ct(!0)}const Eh=He({eager:Boolean},"lazy");function Mh(e,t){const n=ct(!1),a=De(()=>n.value||e.eager||t.value);rt(t,()=>n.value=!0);function s(){e.eager||(n.value=!1)}return{isBooted:n,hasContent:a,onAfterLeave:s}}function Ur(){const t=ua("useScopeId").vnode.scopeId;return{scopeId:t?{[t]:""}:void 0}}const Rm=Symbol.for("vuetify:stack"),Ki=cr([]);function SI(e,t,n){const a=ua("useStack"),s=!n,i=Jn(Rm,void 0),r=cr({activeChildren:new Set});Wa(Rm,r);const o=ct(Number(Is(t)));_a(e,()=>{const d=Ki.at(-1)?.[1];o.value=d?d+10:Number(Is(t)),s&&Ki.push([a.uid,o.value]),i?.activeChildren.add(a.uid),On(()=>{if(s){const l=pn(Ki).findIndex(c=>c[0]===a.uid);Ki.splice(l,1)}i?.activeChildren.delete(a.uid)})});const m=ct(!0);s&&ja(()=>{const d=Ki.at(-1)?.[0]===a.uid;setTimeout(()=>m.value=d)});const u=De(()=>!r.activeChildren.size);return{globalTop:iu(m),localTop:u,stackStyles:De(()=>({zIndex:o.value}))}}function kI(e){return{teleportTarget:ee(()=>{const n=e();if(n===!0||!Sn)return;const a=n===!1?document.body:typeof n=="string"?document.querySelector(n):n;if(a==null)return;let s=[...a.children].find(i=>i.matches(".v-overlay-container"));return s||(s=document.createElement("div"),s.className="v-overlay-container",a.appendChild(s)),s})}}function xI(){return!0}function Rh(e,t,n){if(!e||Ih(e,n)===!1)return!1;const a=Ym(t);if(typeof ShadowRoot<"u"&&a instanceof ShadowRoot&&a.host===e.target)return!1;const s=(typeof n.value=="object"&&n.value.include||(()=>[]))();return s.push(t),!s.some(i=>i?.contains(e.target))}function Ih(e,t){return(typeof t.value=="object"&&t.value.closeConditional||xI)(e)}function TI(e,t,n){const a=typeof n.value=="function"?n.value:n.value.handler;e.shadowTarget=e.target,t._clickOutside.lastMousedownWasOutside&&Rh(e,t,n)&&setTimeout(()=>{Ih(e,n)&&a&&a(e)},0)}function Im(e,t){const n=Ym(e);t(document),typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&t(n)}const Bm={mounted(e,t){const n=s=>TI(s,e,t),a=s=>{e._clickOutside.lastMousedownWasOutside=Rh(s,e,t)};Im(e,s=>{s.addEventListener("click",n,!0),s.addEventListener("mousedown",a,!0)}),e._clickOutside||(e._clickOutside={lastMousedownWasOutside:!1}),e._clickOutside[t.instance.$.uid]={onClick:n,onMousedown:a}},beforeUnmount(e,t){e._clickOutside&&(Im(e,n=>{if(!n||!e._clickOutside?.[t.instance.$.uid])return;const{onClick:a,onMousedown:s}=e._clickOutside[t.instance.$.uid];n.removeEventListener("click",a,!0),n.removeEventListener("mousedown",s,!0)}),delete e._clickOutside[t.instance.$.uid])}};function CI(e){const{modelValue:t,color:n,...a}=e;return Q(Rs,{name:"fade-transition",appear:!0},{default:()=>[e.modelValue&&S("div",at({class:["v-overlay__scrim",e.color.backgroundColorClasses.value],style:e.color.backgroundColorStyles.value},a),null)]})}const fd=He({absolute:Boolean,attach:[Boolean,String,Object],closeOnBack:{type:Boolean,default:!0},contained:Boolean,contentClass:null,contentProps:null,disabled:Boolean,opacity:[Number,String],noClickAnimation:Boolean,modelValue:Boolean,persistent:Boolean,scrim:{type:[Boolean,String],default:!0},zIndex:{type:[Number,String],default:2e3},..._I(),...bt(),...xa(),...Eh(),...oI(),...fI(),...un(),...Pr()},"VOverlay"),Ho=et()({name:"VOverlay",directives:{vClickOutside:Bm},inheritAttrs:!1,props:{_disableGlobalStack:Boolean,...fd()},emits:{"click:outside":e=>!0,"update:modelValue":e=>!0,keydown:e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,t){let{slots:n,attrs:a,emit:s}=t;const i=ua("VOverlay"),r=he(),o=he(),m=he(),u=Wt(e,"modelValue"),d=ee({get:()=>u.value,set:G=>{G&&e.disabled||(u.value=G)}}),{themeClasses:l}=_n(e),{rtlClasses:c,isRtl:v}=ca(),{hasContent:h,onAfterLeave:A}=Mh(e,d),T=Gn(()=>typeof e.scrim=="string"?e.scrim:null),{globalTop:k,localTop:p,stackStyles:L}=SI(d,()=>e.zIndex,e._disableGlobalStack),{activatorEl:O,activatorRef:g,target:B,targetEl:R,targetRef:C,activatorEvents:I,contentEvents:b,scrimEvents:y}=bI(e,{isActive:d,isTop:p,contentEl:m}),{teleportTarget:_}=kI(()=>{const G=e.attach||e.contained;if(G)return G;const ue=O?.value?.getRootNode()||i.proxy?.$el?.getRootNode();return ue instanceof ShadowRoot?ue:!1}),{dimensionStyles:w}=Ta(e),E=wI(),{scopeId:M}=Ur();rt(()=>e.disabled,G=>{G&&(d.value=!1)});const{contentStyles:V,updateLocation:q}=lI(e,{isRtl:v,contentEl:m,target:B,isActive:d});vI(e,{root:r,contentEl:m,targetEl:R,isActive:d,updateLocation:q});function $(G){s("click:outside",G),e.persistent?se():d.value=!1}function U(G){return d.value&&k.value&&(!e.scrim||G.target===o.value||G instanceof MouseEvent&&G.shadowTarget===o.value)}Sn&&rt(d,G=>{G?window.addEventListener("keydown",f):window.removeEventListener("keydown",f)},{immediate:!0}),Qn(()=>{Sn&&window.removeEventListener("keydown",f)});function f(G){G.key==="Escape"&&k.value&&(m.value?.contains(document.activeElement)||s("keydown",G),e.persistent?se():(d.value=!1,m.value?.contains(document.activeElement)&&O.value?.focus()))}function x(G){G.key==="Escape"&&!k.value||s("keydown",G)}const H=H0();_a(()=>e.closeOnBack,()=>{uR(H,G=>{k.value&&d.value?(G(!1),e.persistent?se():d.value=!1):G()})});const F=he();rt(()=>d.value&&(e.absolute||e.contained)&&_.value==null,G=>{if(G){const ue=Xm(r.value);ue&&ue!==document.scrollingElement&&(F.value=ue.scrollTop)}});function se(){e.noClickAnimation||m.value&&ei(m.value,[{transformOrigin:"center"},{transform:"scale(1.03)"},{transformOrigin:"center"}],{duration:150,easing:ur})}function me(){s("afterEnter")}function X(){A(),s("afterLeave")}return ot(()=>S(lt,null,[n.activator?.({isActive:d.value,targetRef:C,props:at({ref:g},I.value,e.activatorProps)}),E.value&&h.value&&Q(dg,{disabled:!_.value,to:_.value},{default:()=>[S("div",at({class:["v-overlay",{"v-overlay--absolute":e.absolute||e.contained,"v-overlay--active":d.value,"v-overlay--contained":e.contained},l.value,c.value,e.class],style:[L.value,{"--v-overlay-opacity":e.opacity,top:gt(F.value)},e.style],ref:r,onKeydown:x},M,a),[Q(CI,at({color:T,modelValue:d.value&&!!e.scrim,ref:o},y.value),null),Q(es,{appear:!0,persisted:!0,transition:e.transition,target:B.value,onAfterEnter:me,onAfterLeave:X},{default:()=>[on(S("div",at({ref:m,class:["v-overlay__content",e.contentClass],style:[w.value,V.value]},b.value,e.contentProps),[n.default?.({isActive:d})]),[[os,d.value],[Bm,{handler:$,closeConditional:U,include:()=>[O.value]}]])]})])]})])),{activatorEl:O,scrimEl:o,target:B,animateClick:se,contentEl:m,globalTop:k,localTop:p,updateLocation:q}}}),dc=Symbol("Forwarded refs");function mc(e,t){let n=e;for(;n;){const a=Reflect.getOwnPropertyDescriptor(n,t);if(a)return a;n=Object.getPrototypeOf(n)}}function Di(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return e[dc]=n,new Proxy(e,{get(s,i){if(Reflect.has(s,i))return Reflect.get(s,i);if(!(typeof i=="symbol"||i.startsWith("$")||i.startsWith("__"))){for(const r of n)if(r.value&&Reflect.has(r.value,i)){const o=Reflect.get(r.value,i);return typeof o=="function"?o.bind(r.value):o}}},has(s,i){if(Reflect.has(s,i))return!0;if(typeof i=="symbol"||i.startsWith("$")||i.startsWith("__"))return!1;for(const r of n)if(r.value&&Reflect.has(r.value,i))return!0;return!1},set(s,i,r){if(Reflect.has(s,i))return Reflect.set(s,i,r);if(typeof i=="symbol"||i.startsWith("$")||i.startsWith("__"))return!1;for(const o of n)if(o.value&&Reflect.has(o.value,i))return Reflect.set(o.value,i,r);return!1},getOwnPropertyDescriptor(s,i){const r=Reflect.getOwnPropertyDescriptor(s,i);if(r)return r;if(!(typeof i=="symbol"||i.startsWith("$")||i.startsWith("__"))){for(const o of n){if(!o.value)continue;const m=mc(o.value,i)??("_"in o.value?mc(o.value._?.setupState,i):void 0);if(m)return m}for(const o of n){const m=o.value&&o.value[dc];if(!m)continue;const u=m.slice();for(;u.length;){const d=u.shift(),l=mc(d.value,i);if(l)return l;const c=d.value&&d.value[dc];c&&u.push(...c)}}}}})}const AI=He({id:String,submenu:Boolean,...us(fd({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",location:void 0,openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:Qu}}),["absolute"])},"VMenu"),Bh=et()({name:"VMenu",props:AI(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=Wt(e,"modelValue"),{scopeId:s}=Ur(),{isRtl:i}=ca(),r=qa(),o=De(()=>e.id||`v-menu-${r}`),m=he(),u=Jn(eu,null),d=ct(new Set);Wa(eu,{register(){d.value.add(r)},unregister(){d.value.delete(r)},closeParents(T){setTimeout(()=>{!d.value.size&&!e.persistent&&(T==null||m.value?.contentEl&&!$g(T,m.value.contentEl))&&(a.value=!1,u?.closeParents())},40)}}),Qn(()=>{u?.unregister(),document.removeEventListener("focusin",l)}),mg(()=>a.value=!1);async function l(T){const k=T.relatedTarget,p=T.target;await en(),a.value&&k!==p&&m.value?.contentEl&&m.value?.globalTop&&![document,m.value.contentEl].includes(p)&&!m.value.contentEl.contains(p)&&To(m.value.contentEl)[0]?.focus()}rt(a,T=>{T?(u?.register(),Sn&&document.addEventListener("focusin",l,{once:!0})):(u?.unregister(),Sn&&document.removeEventListener("focusin",l))},{immediate:!0});function c(T){u?.closeParents(T)}function v(T){if(!e.disabled)if(T.key==="Tab"||T.key==="Enter"&&!e.closeOnContentClick){if(T.key==="Enter"&&(T.target instanceof HTMLTextAreaElement||T.target instanceof HTMLInputElement&&T.target.closest("form")))return;T.key==="Enter"&&T.preventDefault(),Ng(To(m.value?.contentEl,!1),T.shiftKey?"prev":"next",p=>p.tabIndex>=0)||(a.value=!1,m.value?.activatorEl?.focus())}else e.submenu&&T.key===(i.value?"ArrowRight":"ArrowLeft")&&(a.value=!1,m.value?.activatorEl?.focus())}function h(T){if(e.disabled)return;const k=m.value?.contentEl;k&&a.value?T.key==="ArrowDown"?(T.preventDefault(),T.stopImmediatePropagation(),ho(k,"next")):T.key==="ArrowUp"?(T.preventDefault(),T.stopImmediatePropagation(),ho(k,"prev")):e.submenu&&(T.key===(i.value?"ArrowRight":"ArrowLeft")?a.value=!1:T.key===(i.value?"ArrowLeft":"ArrowRight")&&(T.preventDefault(),ho(k,"first"))):(e.submenu?T.key===(i.value?"ArrowLeft":"ArrowRight"):["ArrowDown","ArrowUp"].includes(T.key))&&(a.value=!0,T.preventDefault(),setTimeout(()=>setTimeout(()=>h(T))))}const A=ee(()=>at({"aria-haspopup":"menu","aria-expanded":String(a.value),"aria-controls":o.value,onKeydown:h},e.activatorProps));return ot(()=>{const T=Ho.filterProps(e);return Q(Ho,at({ref:m,id:o.value,class:["v-menu",e.class],style:e.style},T,{modelValue:a.value,"onUpdate:modelValue":k=>a.value=k,absolute:!0,activatorProps:A.value,location:e.location??(e.submenu?"end":"bottom"),"onClick:outside":c,onKeydown:v},s),{activator:n.activator,default:function(){for(var k=arguments.length,p=new Array(k),L=0;L<k;L++)p[L]=arguments[L];return Q(rn,{root:"VMenu"},{default:()=>[n.default?.(...p)]})}})}),Di({id:o,ΨopenChildren:d},m)}}),EI=He({active:Boolean,disabled:Boolean,max:[Number,String],value:{type:[Number,String],default:0},...bt(),...Pr({transition:{component:I0}})},"VCounter"),Lh=et()({name:"VCounter",functional:!0,props:EI(),setup(e,t){let{slots:n}=t;const a=De(()=>e.max?`${e.value} / ${e.max}`:String(e.value));return ot(()=>Q(es,{transition:e.transition},{default:()=>[on(S("div",{class:Me(["v-counter",{"text-error":e.max&&!e.disabled&&parseFloat(e.value)>parseFloat(e.max)},e.class]),style:vt(e.style)},[n.default?n.default({counter:a.value,max:e.max,value:e.value}):a.value]),[[os,e.active]])]})),{}}}),MI=He({floating:Boolean,...bt()},"VFieldLabel"),vo=et()({name:"VFieldLabel",props:MI(),setup(e,t){let{slots:n}=t;return ot(()=>Q(ld,{class:Me(["v-field-label",{"v-field-label--floating":e.floating},e.class]),style:vt(e.style),"aria-hidden":e.floating||void 0},n)),{}}}),RI=["underlined","outlined","filled","solo","solo-inverted","solo-filled","plain"],vd=He({appendInnerIcon:Bt,bgColor:String,clearable:Boolean,clearIcon:{type:Bt,default:"$clear"},active:Boolean,centerAffix:{type:Boolean,default:void 0},color:String,baseColor:String,dirty:Boolean,disabled:{type:Boolean,default:null},glow:Boolean,error:Boolean,flat:Boolean,iconColor:[Boolean,String],label:String,persistentClear:Boolean,prependInnerIcon:Bt,reverse:Boolean,singleLine:Boolean,variant:{type:String,default:"filled",validator:e=>RI.includes(e)},"onClick:clear":$n(),"onClick:appendInner":$n(),"onClick:prependInner":$n(),...bt(),...sd(),...ta(),...un()},"VField"),zo=et()({name:"VField",inheritAttrs:!1,props:{id:String,...th(),...vd()},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:a,slots:s}=t;const{themeClasses:i}=_n(e),{loaderClasses:r}=yl(e),{focusClasses:o,isFocused:m,focus:u,blur:d}=zr(e),{InputIcon:l}=eh(e),{roundedClasses:c}=na(e),{rtlClasses:v}=ca(),h=De(()=>e.dirty||e.active),A=De(()=>!!(e.label||s.label)),T=De(()=>!e.singleLine&&A.value),k=qa(),p=ee(()=>e.id||`input-${k}`),L=De(()=>`${p.value}-messages`),O=he(),g=he(),B=he(),R=ee(()=>["plain","underlined"].includes(e.variant)),C=ee(()=>e.error||e.disabled?void 0:h.value&&m.value?e.color:e.baseColor),I=ee(()=>{if(!(!e.iconColor||e.glow&&!m.value))return e.iconColor===!0?C.value:e.iconColor}),{backgroundColorClasses:b,backgroundColorStyles:y}=Gn(()=>e.bgColor),{textColorClasses:_,textColorStyles:w}=Ha(C);rt(h,V=>{if(T.value){const q=O.value.$el,$=g.value.$el;requestAnimationFrame(()=>{const U=ou(q),f=$.getBoundingClientRect(),x=f.x-U.x,H=f.y-U.y-(U.height/2-f.height/2),F=f.width/.75,se=Math.abs(F-U.width)>1?{maxWidth:gt(F)}:void 0,me=getComputedStyle(q),X=getComputedStyle($),G=parseFloat(me.transitionDuration)*1e3||150,ue=parseFloat(X.getPropertyValue("--v-field-label-scale")),be=X.getPropertyValue("color");q.style.visibility="visible",$.style.visibility="hidden",ei(q,{transform:`translate(${x}px, ${H}px) scale(${ue})`,color:be,...se},{duration:G,easing:ur,direction:V?"normal":"reverse"}).finished.then(()=>{q.style.removeProperty("visibility"),$.style.removeProperty("visibility")})})}},{flush:"post"});const E=ee(()=>({isActive:h,isFocused:m,controlRef:B,blur:d,focus:u}));function M(V){V.target!==document.activeElement&&V.preventDefault()}return ot(()=>{const V=e.variant==="outlined",q=!!(s["prepend-inner"]||e.prependInnerIcon),$=!!(e.clearable||s.clear)&&!e.disabled,U=!!(s["append-inner"]||e.appendInnerIcon||$),f=()=>s.label?s.label({...E.value,label:e.label,props:{for:p.value}}):e.label;return S("div",at({class:["v-field",{"v-field--active":h.value,"v-field--appended":U,"v-field--center-affix":e.centerAffix??!R.value,"v-field--disabled":e.disabled,"v-field--dirty":e.dirty,"v-field--error":e.error,"v-field--glow":e.glow,"v-field--flat":e.flat,"v-field--has-background":!!e.bgColor,"v-field--persistent-clear":e.persistentClear,"v-field--prepended":q,"v-field--reverse":e.reverse,"v-field--single-line":e.singleLine,"v-field--no-label":!f(),[`v-field--variant-${e.variant}`]:!0},i.value,b.value,o.value,r.value,c.value,v.value,e.class],style:[y.value,e.style],onClick:M},n),[S("div",{class:"v-field__overlay"},null),Q(id,{name:"v-field",active:!!e.loading,color:e.error?"error":typeof e.loading=="string"?e.loading:e.color},{default:s.loader}),q&&S("div",{key:"prepend",class:"v-field__prepend-inner"},[e.prependInnerIcon&&Q(l,{key:"prepend-icon",name:"prependInner",color:I.value},null),s["prepend-inner"]?.(E.value)]),S("div",{class:"v-field__field","data-no-activator":""},[["filled","solo","solo-inverted","solo-filled"].includes(e.variant)&&T.value&&Q(vo,{key:"floating-label",ref:g,class:Me([_.value]),floating:!0,for:p.value,style:vt(w.value)},{default:()=>[f()]}),A.value&&Q(vo,{key:"label",ref:O,for:p.value},{default:()=>[f()]}),s.default?.({...E.value,props:{id:p.value,class:"v-field__input","aria-describedby":L.value},focus:u,blur:d})??S("div",{id:p.value,class:"v-field__input","aria-describedby":L.value},null)]),$&&Q(L0,{key:"clear"},{default:()=>[on(S("div",{class:"v-field__clearable",onMousedown:x=>{x.preventDefault(),x.stopPropagation()}},[Q(rn,{defaults:{VIcon:{icon:e.clearIcon}}},{default:()=>[s.clear?s.clear({...E.value,props:{onFocus:u,onBlur:d,onClick:e["onClick:clear"],tabindex:-1}}):Q(l,{name:"clear",onFocus:u,onBlur:d,tabindex:-1},null)]})]),[[os,e.dirty]])]}),U&&S("div",{key:"append",class:"v-field__append-inner"},[s["append-inner"]?.(E.value),e.appendInnerIcon&&Q(l,{key:"append-icon",name:"appendInner",color:I.value},null)]),S("div",{class:Me(["v-field__outline",_.value]),style:vt(w.value)},[V&&S(lt,null,[S("div",{class:"v-field__outline__start"},null),T.value&&S("div",{class:"v-field__outline__notch"},[Q(vo,{ref:g,floating:!0,for:p.value},{default:()=>[f()]})]),S("div",{class:"v-field__outline__end"},null)]),R.value&&T.value&&Q(vo,{ref:g,floating:!0,for:p.value},{default:()=>[f()]})])])}),{controlRef:B,fieldIconColor:I}}});function Oh(e){function t(n,a){!e.autofocus||!n||a[0].target?.focus?.()}return{onIntersect:t}}const II=["color","file","time","date","datetime-local","week","month"],Fh=He({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:[Number,Function],prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,role:String,type:{type:String,default:"text"},modelModifiers:Object,...Pi(),...vd()},"VTextField"),tu=et()({name:"VTextField",directives:{vIntersect:Ri},inheritAttrs:!1,props:Fh(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:a,slots:s}=t;const i=Wt(e,"modelValue"),{isFocused:r,focus:o,blur:m}=zr(e),{onIntersect:u}=Oh(e),d=ee(()=>typeof e.counterValue=="function"?e.counterValue(i.value):typeof e.counterValue=="number"?e.counterValue:(i.value??"").toString().length),l=ee(()=>{if(n.maxlength)return n.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter}),c=ee(()=>["plain","underlined"].includes(e.variant)),v=he(),h=he(),A=he(),T=ee(()=>II.includes(e.type)||e.persistentPlaceholder||r.value||e.active);function k(){r.value||o(),en(()=>{A.value!==document.activeElement&&A.value?.focus()})}function p(B){a("mousedown:control",B),B.target!==A.value&&(k(),B.preventDefault())}function L(B){a("click:control",B)}function O(B,R){B.stopPropagation(),k(),en(()=>{i.value=null,R(),uu(e["onClick:clear"],B)})}function g(B){const R=B.target;if(i.value=R.value,e.modelModifiers?.trim&&["text","search","password","tel","url"].includes(e.type)){const C=[R.selectionStart,R.selectionEnd];en(()=>{R.selectionStart=C[0],R.selectionEnd=C[1]})}}return ot(()=>{const B=!!(s.counter||e.counter!==!1&&e.counter!=null),R=!!(B||s.details),[C,I]=Bi(n),{modelValue:b,...y}=Ua.filterProps(e),_=zo.filterProps(e);return Q(Ua,at({ref:v,modelValue:i.value,"onUpdate:modelValue":w=>i.value=w,class:["v-text-field",{"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-input--plain-underlined":c.value},e.class],style:e.style},C,y,{centerAffix:!c.value,focused:r.value}),{...s,default:w=>{let{id:E,isDisabled:M,isDirty:V,isReadonly:q,isValid:$,reset:U}=w;return Q(zo,at({ref:h,onMousedown:p,onClick:L,"onClick:clear":f=>O(f,U),"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"],role:e.role},_,{id:E.value,active:T.value||V.value,dirty:V.value||e.dirty,disabled:M.value,focused:r.value,error:$.value===!1}),{...s,default:f=>{let{props:{class:x,...H}}=f;const F=on(S("input",at({ref:A,value:i.value,onInput:g,autofocus:e.autofocus,readonly:q.value,disabled:M.value,name:e.name,placeholder:e.placeholder,size:1,type:e.type,onFocus:k,onBlur:m},H,I),null),[[Ri,{handler:u},null,{once:!0}]]);return S(lt,null,[e.prefix&&S("span",{class:"v-text-field__prefix"},[S("span",{class:"v-text-field__prefix__text"},[e.prefix])]),s.default?S("div",{class:Me(x),"data-no-activator":""},[s.default(),F]):fg(F,{class:x}),e.suffix&&S("span",{class:"v-text-field__suffix"},[S("span",{class:"v-text-field__suffix__text"},[e.suffix])])])}})},details:R?w=>S(lt,null,[s.details?.(w),B&&S(lt,null,[S("span",null,null),Q(Lh,{active:e.persistentCounter||r.value,value:d.value,max:l.value,disabled:e.disabled},s.counter)])]):void 0})}),Di({},v,h,A)}}),BI=He({renderless:Boolean,...bt()},"VVirtualScrollItem"),LI=et()({name:"VVirtualScrollItem",inheritAttrs:!1,props:BI(),emits:{"update:height":e=>!0},setup(e,t){let{attrs:n,emit:a,slots:s}=t;const{resizeRef:i,contentRect:r}=dr(void 0,"border");rt(()=>r.value?.height,o=>{o!=null&&a("update:height",o)}),ot(()=>e.renderless?S(lt,null,[s.default?.({itemRef:i})]):S("div",at({ref:i,class:["v-virtual-scroll__item",e.class],style:e.style},n),[s.default?.()]))}}),OI=-1,FI=1,fc=100,VI=He({itemHeight:{type:[Number,String],default:null},itemKey:{type:[String,Array,Function],default:null},height:[Number,String]},"virtual");function PI(e,t){const n=Wo(),a=ct(0);ja(()=>{a.value=parseFloat(e.itemHeight||0)});const s=ct(0),i=ct(Math.ceil((parseInt(e.height)||n.height.value)/(a.value||16))||1),r=ct(0),o=ct(0),m=he(),u=he();let d=0;const{resizeRef:l,contentRect:c}=dr();ja(()=>{l.value=m.value});const v=ee(()=>m.value===document.documentElement?n.height.value:c.value?.height||parseInt(e.height)||0),h=ee(()=>!!(m.value&&u.value&&v.value&&a.value));let A=Array.from({length:t.value.length}),T=Array.from({length:t.value.length});const k=ct(0);let p=-1;function L(f){return A[f]||a.value}const O=Hg(()=>{const f=performance.now();T[0]=0;const x=t.value.length;for(let H=1;H<=x-1;H++)T[H]=(T[H-1]||0)+L(H-1);k.value=Math.max(k.value,performance.now()-f)},k),g=rt(h,f=>{f&&(g(),d=u.value.offsetTop,O.immediate(),V(),~p&&en(()=>{Sn&&window.requestAnimationFrame(()=>{$(p),p=-1})}))});On(()=>{O.clear()});function B(f,x){const H=A[f],F=a.value;a.value=F?Math.min(a.value,x):x,(H!==x||F!==a.value)&&(A[f]=x,O())}function R(f){return f=pa(f,0,t.value.length-1),T[f]||0}function C(f){return DI(T,f)}let I=0,b=0,y=0;rt(v,(f,x)=>{x&&(V(),f<x&&requestAnimationFrame(()=>{b=0,V()}))});let _=-1;function w(){if(!m.value||!u.value)return;const f=m.value.scrollTop,x=performance.now();x-y>500?(b=Math.sign(f-I),d=u.value.offsetTop):b=f-I,I=f,y=x,window.clearTimeout(_),_=window.setTimeout(E,500),V()}function E(){!m.value||!u.value||(b=0,y=0,window.clearTimeout(_),V())}let M=-1;function V(){cancelAnimationFrame(M),M=requestAnimationFrame(q)}function q(){if(!m.value||!v.value)return;const f=I-d,x=Math.sign(b),H=Math.max(0,f-fc),F=pa(C(H),0,t.value.length),se=f+v.value+fc,me=pa(C(se)+1,F+1,t.value.length);if((x!==OI||F<s.value)&&(x!==FI||me>i.value)){const X=R(s.value)-R(F),G=R(me)-R(i.value);Math.max(X,G)>fc?(s.value=F,i.value=me):(F<=0&&(s.value=F),me>=t.value.length&&(i.value=me))}r.value=R(s.value),o.value=R(t.value.length)-R(i.value)}function $(f){const x=R(f);!m.value||f&&!x?p=f:m.value.scrollTop=x}const U=ee(()=>t.value.slice(s.value,i.value).map((f,x)=>{const H=x+s.value;return{raw:f,index:H,key:Fa(f,e.itemKey,H)}}));return rt(t,()=>{A=Array.from({length:t.value.length}),T=Array.from({length:t.value.length}),O.immediate(),V()},{deep:1}),{calculateVisibleItems:V,containerRef:m,markerRef:u,computedItems:U,paddingTop:r,paddingBottom:o,scrollToIndex:$,handleScroll:w,handleScrollend:E,handleItemResize:B}}function DI(e,t){let n=e.length-1,a=0,s=0,i=null,r=-1;if(e[n]<t)return n;for(;a<=n;)if(s=a+n>>1,i=e[s],i>t)n=s-1;else if(i<t)r=s,a=s+1;else return i===t?s:a;return r}const jI=He({items:{type:Array,default:()=>[]},renderless:Boolean,...VI(),...bt(),...xa()},"VVirtualScroll"),NI=et()({name:"VVirtualScroll",props:jI(),setup(e,t){let{slots:n}=t;const a=ua("VVirtualScroll"),{dimensionStyles:s}=Ta(e),{calculateVisibleItems:i,containerRef:r,markerRef:o,handleScroll:m,handleScrollend:u,handleItemResize:d,scrollToIndex:l,paddingTop:c,paddingBottom:v,computedItems:h}=PI(e,De(()=>e.items));return _a(()=>e.renderless,()=>{function A(){const k=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";r.value===document.documentElement?(document[k]("scroll",m,{passive:!0}),document[k]("scrollend",u)):(r.value?.[k]("scroll",m,{passive:!0}),r.value?.[k]("scrollend",u))}gn(()=>{r.value=Xm(a.vnode.el,!0),A(!0)}),On(A)}),ot(()=>{const A=h.value.map(T=>Q(LI,{key:T.key,renderless:e.renderless,"onUpdate:height":k=>d(T.index,k)},{default:k=>n.default?.({item:T.raw,index:T.index,...k})}));return e.renderless?S(lt,null,[S("div",{ref:o,class:"v-virtual-scroll__spacer",style:{paddingTop:gt(c.value)}},null),A,S("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:gt(v.value)}},null)]):S("div",{ref:r,class:Me(["v-virtual-scroll",e.class]),onScrollPassive:m,onScrollend:u,style:vt([s.value,e.style])},[S("div",{ref:o,class:"v-virtual-scroll__container",style:{paddingTop:gt(c.value),paddingBottom:gt(v.value)}},[A])])}),{calculateVisibleItems:i,scrollToIndex:l}}});function $I(e,t){const n=ct(!1);let a;function s(o){cancelAnimationFrame(a),n.value=!0,a=requestAnimationFrame(()=>{a=requestAnimationFrame(()=>{n.value=!1})})}async function i(){await new Promise(o=>requestAnimationFrame(o)),await new Promise(o=>requestAnimationFrame(o)),await new Promise(o=>requestAnimationFrame(o)),await new Promise(o=>{if(n.value){const m=rt(n,()=>{m(),o()})}else o()})}async function r(o){if(o.key==="Tab"&&t.value?.focus(),!["PageDown","PageUp","Home","End"].includes(o.key))return;const m=e.value?.$el;if(!m)return;(o.key==="Home"||o.key==="End")&&m.scrollTo({top:o.key==="Home"?0:m.scrollHeight,behavior:"smooth"}),await i();const u=m.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(o.key==="PageDown"||o.key==="Home"){const d=m.getBoundingClientRect().top;for(const l of u)if(l.getBoundingClientRect().top>=d){l.focus();break}}else{const d=m.getBoundingClientRect().bottom;for(const l of[...u].reverse())if(l.getBoundingClientRect().bottom<=d){l.focus();break}}}return{onScrollPassive:s,onKeydown:r}}const HI=He({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:Bt,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,..._h({itemChildren:!1})},"Select"),zI=He({...HI(),...us(Fh({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Pr({transition:{component:Qu}})},"VSelect"),UI=et()({name:"VSelect",props:zI(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{slots:n}=t;const{t:a}=qo(),s=he(),i=he(),r=he(),{items:o,transformIn:m,transformOut:u}=nI(e),d=Wt(e,"modelValue",[],f=>m(f===null?[null]:ba(f)),f=>{const x=u(f);return e.multiple?x:x[0]??null}),l=ee(()=>typeof e.counterValue=="function"?e.counterValue(d.value):typeof e.counterValue=="number"?e.counterValue:d.value.length),c=nh(e),v=ee(()=>d.value.map(f=>f.value)),h=ct(!1);let A="",T=-1,k;const p=ee(()=>e.hideSelected?o.value.filter(f=>!d.value.some(x=>(e.valueComparator||ts)(x,f))):o.value),L=ee(()=>e.hideNoData&&!p.value.length||c.isReadonly.value||c.isDisabled.value),O=Wt(e,"menu"),g=ee({get:()=>O.value,set:f=>{O.value&&!f&&i.value?.ΨopenChildren.size||f&&L.value||(O.value=f)}}),B=De(()=>g.value?e.closeText:e.openText),R=ee(()=>({...e.menuProps,activatorProps:{...e.menuProps?.activatorProps||{},"aria-haspopup":"listbox"}})),C=he(),I=$I(C,s);function b(f){e.openOnClear&&(g.value=!0)}function y(){L.value||(g.value=!g.value)}function _(f){Id(f)&&w(f)}function w(f){if(!f.key||c.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(f.key)&&f.preventDefault(),["Enter","ArrowDown"," "].includes(f.key)&&(g.value=!0),["Escape","Tab"].includes(f.key)&&(g.value=!1),f.key==="Home"?C.value?.focus("first"):f.key==="End"&&C.value?.focus("last");const x=1e3;if(!Id(f))return;const H=performance.now();H-k>x&&(A="",T=-1),A+=f.key.toLowerCase(),k=H;const F=p.value;function se(){let be=me();return be||A.at(-1)===A.at(-2)&&(A=A.slice(0,-1),be=me(),be)||(T=-1,be=me(),be)?be:(A=f.key.toLowerCase(),me())}function me(){for(let be=T+1;be<F.length;be++){const ke=F[be];if(ke.title.toLowerCase().startsWith(A))return[ke,be]}}const X=se();if(!X)return;const[G,ue]=X;T=ue,C.value?.focus(ue),e.multiple||(d.value=[G])}function E(f){let x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!f.props.disabled)if(e.multiple){const H=d.value.findIndex(se=>(e.valueComparator||ts)(se.value,f.value)),F=x??!~H;if(~H){const se=F?[...d.value,f]:[...d.value];se.splice(H,1),d.value=se}else F&&(d.value=[...d.value,f])}else{const H=x!==!1;d.value=H?[f]:[],en(()=>{g.value=!1})}}function M(f){C.value?.$el.contains(f.relatedTarget)||(g.value=!1)}function V(){e.eager&&r.value?.calculateVisibleItems()}function q(){h.value&&s.value?.focus()}function $(f){h.value=!0}function U(f){if(f==null)d.value=[];else if(xo(s.value,":autofill")||xo(s.value,":-webkit-autofill")){const x=o.value.find(H=>H.title===f);x&&E(x)}else s.value&&(s.value.value="")}return rt(g,()=>{if(!e.hideSelected&&g.value&&d.value.length){const f=p.value.findIndex(x=>d.value.some(H=>(e.valueComparator||ts)(H.value,x.value)));Sn&&window.requestAnimationFrame(()=>{f>=0&&r.value?.scrollToIndex(f)})}}),rt(()=>e.items,(f,x)=>{g.value||h.value&&!x.length&&f.length&&(g.value=!0)}),ot(()=>{const f=!!(e.chips||n.chip),x=!!(!e.hideNoData||p.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),H=d.value.length>0,F=tu.filterProps(e),se=H||!h.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return Q(tu,at({ref:s},F,{modelValue:d.value.map(me=>me.props.value).join(", "),"onUpdate:modelValue":U,focused:h.value,"onUpdate:focused":me=>h.value=me,validationValue:d.externalValue,counterValue:l.value,dirty:H,class:["v-select",{"v-select--active-menu":g.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":d.value.length,"v-select--selection-slot":!!n.selection},e.class],style:e.style,inputmode:"none",placeholder:se,"onClick:clear":b,"onMousedown:control":y,onBlur:M,onKeydown:w,"aria-label":a(B.value),title:a(B.value)}),{...n,default:()=>S(lt,null,[Q(Bh,at({ref:i,modelValue:g.value,"onUpdate:modelValue":me=>g.value=me,activator:"parent",contentClass:"v-select__content",disabled:L.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:V,onAfterLeave:q},R.value),{default:()=>[x&&Q(wh,at({ref:C,selected:v.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:me=>me.preventDefault(),onKeydown:_,onFocusin:$,tabindex:"-1","aria-live":"polite","aria-label":`${e.label}-list`,color:e.itemColor??e.color},I,e.listProps),{default:()=>[n["prepend-item"]?.(),!p.value.length&&!e.hideNoData&&(n["no-data"]?.()??Q(Ar,{key:"no-data",title:a(e.noDataText)},null)),Q(NI,{ref:r,renderless:!0,items:p.value,itemKey:"value"},{default:me=>{let{item:X,index:G,itemRef:ue}=me;const be=zg(X.props),ke=at(X.props,{ref:ue,key:X.value,onClick:()=>E(X,null)});return n.item?.({item:X,index:G,props:ke})??Q(Ar,at(ke,{role:"option"}),{prepend:je=>{let{isSelected:Y}=je;return S(lt,null,[e.multiple&&!e.hideSelected?Q(Gc,{key:X.value,modelValue:Y,ripple:!1,tabindex:"-1"},null):void 0,be.prependAvatar&&Q(ri,{image:be.prependAvatar},null),be.prependIcon&&Q(hn,{icon:be.prependIcon},null)])}})}}),n["append-item"]?.()]})]}),d.value.map((me,X)=>{function G(je){je.stopPropagation(),je.preventDefault(),E(me,!1)}const ue={"onClick:close":G,onKeydown(je){je.key!=="Enter"&&je.key!==" "||(je.preventDefault(),je.stopPropagation(),G(je))},onMousedown(je){je.preventDefault(),je.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},be=f?!!n.chip:!!n.selection,ke=be?Ug(f?n.chip({item:me,index:X,props:ue}):n.selection({item:me,index:X})):void 0;if(!(be&&!ke))return S("div",{key:me.value,class:"v-select__selection"},[f?n.chip?Q(rn,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:me.title}}},{default:()=>[ke]}):Q(rh,at({key:"chip",closable:e.closableChips,size:"small",text:me.title,disabled:me.props.disabled},ue),null):ke??S("span",{class:"v-select__selection-text"},[me.title,e.multiple&&X<d.value.length-1&&S("span",{class:"v-select__selection-comma"},[Zt(",")])])])})]),"append-inner":function(){for(var me=arguments.length,X=new Array(me),G=0;G<me;G++)X[G]=arguments[G];return S(lt,null,[n["append-inner"]?.(...X),e.menuIcon?Q(hn,{class:"v-select__menu-icon",color:s.value?.fieldIconColor,icon:e.menuIcon},null):void 0])}})}),Di({isFocused:h,menu:g,select:E},s)}}),qI=He({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...fd({origin:"center center",scrollStrategy:"block",transition:{component:Qu},zIndex:2400})},"VDialog"),WI=et()({name:"VDialog",props:qI(),emits:{"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,t){let{emit:n,slots:a}=t;const s=Wt(e,"modelValue"),{scopeId:i}=Ur(),r=he();function o(d){const l=d.relatedTarget,c=d.target;if(l!==c&&r.value?.contentEl&&r.value?.globalTop&&![document,r.value.contentEl].includes(c)&&!r.value.contentEl.contains(c)){const v=To(r.value.contentEl);if(!v.length)return;const h=v[0],A=v[v.length-1];l===h?A.focus():h.focus()}}Qn(()=>{document.removeEventListener("focusin",o)}),Sn&&rt(()=>s.value&&e.retainFocus,d=>{d?document.addEventListener("focusin",o):document.removeEventListener("focusin",o)},{immediate:!0});function m(){n("afterEnter"),(e.scrim||e.retainFocus)&&r.value?.contentEl&&!r.value.contentEl.contains(document.activeElement)&&r.value.contentEl.focus({preventScroll:!0})}function u(){n("afterLeave")}return rt(s,async d=>{d||(await en(),r.value.activatorEl?.focus({preventScroll:!0}))}),ot(()=>{const d=Ho.filterProps(e),l=at({"aria-haspopup":"dialog"},e.activatorProps),c=at({tabindex:-1},e.contentProps);return Q(Ho,at({ref:r,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},d,{modelValue:s.value,"onUpdate:modelValue":v=>s.value=v,"aria-modal":"true",activatorProps:l,contentProps:c,height:e.fullscreen?void 0:e.height,width:e.fullscreen?void 0:e.width,maxHeight:e.fullscreen?void 0:e.maxHeight,maxWidth:e.fullscreen?void 0:e.maxWidth,role:"dialog",onAfterEnter:m,onAfterLeave:u},i),{activator:a.activator,default:function(){for(var v=arguments.length,h=new Array(v),A=0;A<v;A++)h[A]=arguments[A];return Q(rn,{root:"VDialog"},{default:()=>[a.default?.(...h)]})}})}),Di({},r)}}),YI=et()({name:"VCardActions",props:bt(),setup(e,t){let{slots:n}=t;return ls({VBtn:{slim:!0,variant:"text"}}),ot(()=>S("div",{class:Me(["v-card-actions",e.class]),style:vt(e.style)},[n.default?.()])),{}}}),XI=He({opacity:[Number,String],...bt(),...Gt()},"VCardSubtitle"),GI=et()({name:"VCardSubtitle",props:XI(),setup(e,t){let{slots:n}=t;return ot(()=>Q(e.tag,{class:Me(["v-card-subtitle",e.class]),style:vt([{"--v-card-subtitle-opacity":e.opacity},e.style])},n)),{}}}),Vh=qm("v-card-title"),KI=He({appendAvatar:String,appendIcon:Bt,prependAvatar:String,prependIcon:Bt,subtitle:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},...bt(),...Ca()},"VCardItem"),ZI=et()({name:"VCardItem",props:KI(),setup(e,t){let{slots:n}=t;return ot(()=>{const a=!!(e.prependAvatar||e.prependIcon),s=!!(a||n.prepend),i=!!(e.appendAvatar||e.appendIcon),r=!!(i||n.append),o=!!(e.title!=null||n.title),m=!!(e.subtitle!=null||n.subtitle);return S("div",{class:Me(["v-card-item",e.class]),style:vt(e.style)},[s&&S("div",{key:"prepend",class:"v-card-item__prepend"},[n.prepend?Q(rn,{key:"prepend-defaults",disabled:!a,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon}}},n.prepend):S(lt,null,[e.prependAvatar&&Q(ri,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&Q(hn,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)])]),S("div",{class:"v-card-item__content"},[o&&Q(Vh,{key:"title"},{default:()=>[n.title?.()??ie(e.title)]}),m&&Q(GI,{key:"subtitle"},{default:()=>[n.subtitle?.()??ie(e.subtitle)]}),n.default?.()]),r&&S("div",{key:"append",class:"v-card-item__append"},[n.append?Q(rn,{key:"append-defaults",disabled:!i,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon}}},n.append):S(lt,null,[e.appendIcon&&Q(hn,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&Q(ri,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)])])])}),{}}}),QI=He({opacity:[Number,String],...bt(),...Gt()},"VCardText"),Ph=et()({name:"VCardText",props:QI(),setup(e,t){let{slots:n}=t;return ot(()=>Q(e.tag,{class:Me(["v-card-text",e.class]),style:vt([{"--v-card-text-opacity":e.opacity},e.style])},n)),{}}}),JI=He({appendAvatar:String,appendIcon:Bt,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:Bt,ripple:{type:[Boolean,Object],default:!0},subtitle:{type:[String,Number,Boolean],default:void 0},text:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},...Xa(),...bt(),...Ca(),...xa(),...vs(),...sd(),..._l(),...rd(),...ta(),...Sl(),...Gt(),...un(),...Fs({variant:"elevated"})},"VCard"),eB=et()({name:"VCard",directives:{vRipple:za},props:JI(),setup(e,t){let{attrs:n,slots:a}=t;const{themeClasses:s}=_n(e),{borderClasses:i}=Ga(e),{colorClasses:r,colorStyles:o,variantClasses:m}=Nr(e),{densityClasses:u}=Ka(e),{dimensionStyles:d}=Ta(e),{elevationClasses:l}=hs(e),{loaderClasses:c}=yl(e),{locationStyles:v}=bl(e),{positionClasses:h}=od(e),{roundedClasses:A}=na(e),T=wl(e,n);return ot(()=>{const k=e.link!==!1&&T.isLink.value,p=!e.disabled&&e.link!==!1&&(e.link||T.isClickable.value),L=k?"a":e.tag,O=!!(a.title||e.title!=null),g=!!(a.subtitle||e.subtitle!=null),B=O||g,R=!!(a.append||e.appendAvatar||e.appendIcon),C=!!(a.prepend||e.prependAvatar||e.prependIcon),I=!!(a.image||e.image),b=B||C||R,y=!!(a.text||e.text!=null);return on(Q(L,at({class:["v-card",{"v-card--disabled":e.disabled,"v-card--flat":e.flat,"v-card--hover":e.hover&&!(e.disabled||e.flat),"v-card--link":p},s.value,i.value,r.value,u.value,l.value,c.value,h.value,A.value,m.value,e.class],style:[o.value,d.value,v.value,e.style],onClick:p&&T.navigate,tabindex:e.disabled?-1:void 0},T.linkProps),{default:()=>[I&&S("div",{key:"image",class:"v-card__image"},[a.image?Q(rn,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},a.image):Q(gl,{key:"image-img",cover:!0,src:e.image},null)]),Q(id,{name:"v-card",active:!!e.loading,color:typeof e.loading=="boolean"?void 0:e.loading},{default:a.loader}),b&&Q(ZI,{key:"item",prependAvatar:e.prependAvatar,prependIcon:e.prependIcon,title:e.title,subtitle:e.subtitle,appendAvatar:e.appendAvatar,appendIcon:e.appendIcon},{default:a.item,prepend:a.prepend,title:a.title,subtitle:a.subtitle,append:a.append}),y&&Q(Ph,{key:"text"},{default:()=>[a.text?.()??e.text]}),a.default?.(),a.actions&&Q(YI,null,{default:a.actions}),jr(p,"v-card")]}),[[za,p&&e.ripple]])}),{}}}),tB=e=>{const{touchstartX:t,touchendX:n,touchstartY:a,touchendY:s}=e,i=.5,r=16;e.offsetX=n-t,e.offsetY=s-a,Math.abs(e.offsetY)<i*Math.abs(e.offsetX)&&(e.left&&n<t-r&&e.left(e),e.right&&n>t+r&&e.right(e)),Math.abs(e.offsetX)<i*Math.abs(e.offsetY)&&(e.up&&s<a-r&&e.up(e),e.down&&s>a+r&&e.down(e))};function nB(e,t){const n=e.changedTouches[0];t.touchstartX=n.clientX,t.touchstartY=n.clientY,t.start?.({originalEvent:e,...t})}function aB(e,t){const n=e.changedTouches[0];t.touchendX=n.clientX,t.touchendY=n.clientY,t.end?.({originalEvent:e,...t}),tB(t)}function sB(e,t){const n=e.changedTouches[0];t.touchmoveX=n.clientX,t.touchmoveY=n.clientY,t.move?.({originalEvent:e,...t})}function iB(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:e.left,right:e.right,up:e.up,down:e.down,start:e.start,move:e.move,end:e.end};return{touchstart:n=>nB(n,t),touchend:n=>aB(n,t),touchmove:n=>sB(n,t)}}function rB(e,t){const n=t.value,a=n?.parent?e.parentElement:e,s=n?.options??{passive:!0},i=t.instance?.$.uid;if(!a||!i)return;const r=iB(t.value);a._touchHandlers=a._touchHandlers??Object.create(null),a._touchHandlers[i]=r,Gm(r).forEach(o=>{a.addEventListener(o,r[o],s)})}function oB(e,t){const n=t.value?.parent?e.parentElement:e,a=t.instance?.$.uid;if(!n?._touchHandlers||!a)return;const s=n._touchHandlers[a];Gm(s).forEach(i=>{n.removeEventListener(i,s[i])}),delete n._touchHandlers[a]}const nu={mounted:rB,unmounted:oB},Dh=Symbol.for("vuetify:v-window"),jh=Symbol.for("vuetify:v-window-group"),Nh=He({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||e==="hover"},touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},...bt(),...Gt(),...un()},"VWindow"),Lm=et()({name:"VWindow",directives:{vTouch:nu},props:Nh(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:a}=_n(e),{isRtl:s}=ca(),{t:i}=qo(),r=pl(e,jh),o=he(),m=ee(()=>s.value?!e.reverse:e.reverse),u=ct(!1),d=ee(()=>{const O=e.direction==="vertical"?"y":"x",B=(m.value?!u.value:u.value)?"-reverse":"";return`v-window-${O}${B}-transition`}),l=ct(0),c=he(void 0),v=ee(()=>r.items.value.findIndex(O=>r.selected.value.includes(O.id)));rt(v,(O,g)=>{const B=r.items.value.length,R=B-1;B<=2?u.value=O<g:O===R&&g===0?u.value=!0:O===0&&g===R?u.value=!1:u.value=O<g}),Wa(Dh,{transition:d,isReversed:u,transitionCount:l,transitionHeight:c,rootRef:o});const h=De(()=>e.continuous||v.value!==0),A=De(()=>e.continuous||v.value!==r.items.value.length-1);function T(){h.value&&r.prev()}function k(){A.value&&r.next()}const p=ee(()=>{const O=[],g={icon:s.value?e.nextIcon:e.prevIcon,class:`v-window__${m.value?"right":"left"}`,onClick:r.prev,"aria-label":i("$vuetify.carousel.prev")};O.push(h.value?n.prev?n.prev({props:g}):Q(xr,g,null):S("div",null,null));const B={icon:s.value?e.prevIcon:e.nextIcon,class:`v-window__${m.value?"left":"right"}`,onClick:r.next,"aria-label":i("$vuetify.carousel.next")};return O.push(A.value?n.next?n.next({props:B}):Q(xr,B,null):S("div",null,null)),O}),L=ee(()=>e.touch===!1?e.touch:{...{left:()=>{m.value?T():k()},right:()=>{m.value?k():T()},start:g=>{let{originalEvent:B}=g;B.stopPropagation()}},...e.touch===!0?{}:e.touch});return ot(()=>on(Q(e.tag,{ref:o,class:Me(["v-window",{"v-window--show-arrows-on-hover":e.showArrows==="hover"},a.value,e.class]),style:vt(e.style)},{default:()=>[S("div",{class:"v-window__container",style:{height:c.value}},[n.default?.({group:r}),e.showArrows!==!1&&S("div",{class:"v-window__controls"},[p.value])]),n.additional?.({group:r})]}),[[nu,L.value]])),{group:r}}}),$h=He({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...bt(),...td(),...Eh()},"VWindowItem"),Om=et()({name:"VWindowItem",directives:{vTouch:nu},props:$h(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const a=Jn(Dh),s=nd(e,jh),{isBooted:i}=Dr();if(!a||!s)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const r=ct(!1),o=ee(()=>i.value&&(a.isReversed.value?e.reverseTransition!==!1:e.transition!==!1));function m(){!r.value||!a||(r.value=!1,a.transitionCount.value>0&&(a.transitionCount.value-=1,a.transitionCount.value===0&&(a.transitionHeight.value=void 0)))}function u(){r.value||!a||(r.value=!0,a.transitionCount.value===0&&(a.transitionHeight.value=gt(a.rootRef.value?.clientHeight)),a.transitionCount.value+=1)}function d(){m()}function l(h){r.value&&en(()=>{!o.value||!r.value||!a||(a.transitionHeight.value=gt(h.clientHeight))})}const c=ee(()=>{const h=a.isReversed.value?e.reverseTransition:e.transition;return o.value?{name:typeof h!="string"?a.transition.value:h,onBeforeEnter:u,onAfterEnter:m,onEnterCancelled:d,onBeforeLeave:u,onAfterLeave:m,onLeaveCancelled:d,onEnter:l}:!1}),{hasContent:v}=Mh(e,s.isSelected);return ot(()=>Q(es,{transition:c.value,disabled:!i.value},{default:()=>[on(S("div",{class:Me(["v-window-item",s.selectedClass.value,e.class]),style:vt(e.style)},[v.value&&n.default?.()]),[[os,s.isSelected.value]])]})),{groupItem:s}}}),lB=He({color:String,...Xa(),...bt(),...xa(),...vs(),..._l(),...rd(),...ta(),...Gt(),...un()},"VSheet"),cB=et()({name:"VSheet",props:lB(),setup(e,t){let{slots:n}=t;const{themeClasses:a}=_n(e),{backgroundColorClasses:s,backgroundColorStyles:i}=Gn(()=>e.color),{borderClasses:r}=Ga(e),{dimensionStyles:o}=Ta(e),{elevationClasses:m}=hs(e),{locationStyles:u}=bl(e),{positionClasses:d}=od(e),{roundedClasses:l}=na(e);return ot(()=>Q(e.tag,{class:Me(["v-sheet",a.value,s.value,r.value,m.value,d.value,l.value,e.class]),style:vt([i.value,o.value,u.value,e.style])},n)),{}}}),uB=He({fluid:{type:Boolean,default:!1},...bt(),...xa(),...Gt()},"VContainer"),dB=et()({name:"VContainer",props:uB(),setup(e,t){let{slots:n}=t;const{rtlClasses:a}=ca(),{dimensionStyles:s}=Ta(e);return ot(()=>Q(e.tag,{class:Me(["v-container",{"v-container--fluid":e.fluid},a.value,e.class]),style:vt([s.value,e.style])},n)),{}}}),Hh=Yo.reduce((e,t)=>(e[t]={type:[Boolean,String,Number],default:!1},e),{}),zh=Yo.reduce((e,t)=>{const n="offset"+ru(t);return e[n]={type:[String,Number],default:null},e},{}),Uh=Yo.reduce((e,t)=>{const n="order"+ru(t);return e[n]={type:[String,Number],default:null},e},{}),Fm={col:Object.keys(Hh),offset:Object.keys(zh),order:Object.keys(Uh)};function mB(e,t,n){let a=e;if(!(n==null||n===!1)){if(t){const s=t.replace(e,"");a+=`-${s}`}return e==="col"&&(a="v-"+a),e==="col"&&(n===""||n===!0)||(a+=`-${n}`),a.toLowerCase()}}const fB=["auto","start","end","center","baseline","stretch"],vB=He({cols:{type:[Boolean,String,Number],default:!1},...Hh,offset:{type:[String,Number],default:null},...zh,order:{type:[String,Number],default:null},...Uh,alignSelf:{type:String,default:null,validator:e=>fB.includes(e)},...bt(),...Gt()},"VCol"),hB=et()({name:"VCol",props:vB(),setup(e,t){let{slots:n}=t;const a=ee(()=>{const s=[];let i;for(i in Fm)Fm[i].forEach(o=>{const m=e[o],u=mB(i,o,m);u&&s.push(u)});const r=s.some(o=>o.startsWith("v-col-"));return s.push({"v-col":!r||!e.cols,[`v-col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf}),s});return()=>Mr(e.tag,{class:[a.value,e.class],style:e.style},n.default?.())}}),hd=["start","end","center"],qh=["space-between","space-around","space-evenly"];function gd(e,t){return Yo.reduce((n,a)=>{const s=e+ru(a);return n[s]=t(),n},{})}const gB=[...hd,"baseline","stretch"],Wh=e=>gB.includes(e),Yh=gd("align",()=>({type:String,default:null,validator:Wh})),pB=[...hd,...qh],Xh=e=>pB.includes(e),Gh=gd("justify",()=>({type:String,default:null,validator:Xh})),_B=[...hd,...qh,"stretch"],Kh=e=>_B.includes(e),Zh=gd("alignContent",()=>({type:String,default:null,validator:Kh})),Vm={align:Object.keys(Yh),justify:Object.keys(Gh),alignContent:Object.keys(Zh)},bB={align:"align",justify:"justify",alignContent:"align-content"};function yB(e,t,n){let a=bB[e];if(n!=null){if(t){const s=t.replace(e,"");a+=`-${s}`}return a+=`-${n}`,a.toLowerCase()}}const wB=He({dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:Wh},...Yh,justify:{type:String,default:null,validator:Xh},...Gh,alignContent:{type:String,default:null,validator:Kh},...Zh,...bt(),...Gt()},"VRow"),SB=et()({name:"VRow",props:wB(),setup(e,t){let{slots:n}=t;const a=ee(()=>{const s=[];let i;for(i in Vm)Vm[i].forEach(r=>{const o=e[r],m=yB(i,r,o);m&&s.push(m)});return s.push({"v-row--no-gutters":e.noGutters,"v-row--dense":e.dense,[`align-${e.align}`]:e.align,[`justify-${e.justify}`]:e.justify,[`align-content-${e.alignContent}`]:e.alignContent}),s});return()=>Mr(e.tag,{class:["v-row",a.value,e.class],style:e.style},n.default?.())}}),kB=He({scrollable:Boolean,...bt(),...xa(),...Gt({tag:"main"})},"VMain"),xB=et()({name:"VMain",props:kB(),setup(e,t){let{slots:n}=t;const{dimensionStyles:a}=Ta(e),{mainStyles:s}=qg(),{ssrBootStyles:i}=Dr();return ot(()=>Q(e.tag,{class:Me(["v-main",{"v-main--scrollable":e.scrollable},e.class]),style:vt([s.value,i.value,a.value,e.style])},{default:()=>[e.scrollable?S("div",{class:"v-main__scroller"},[n.default?.()]):n.default?.()]})),{}}});function TB(e){let{rootEl:t,isSticky:n,layoutItemStyles:a}=e;const s=ct(!1),i=ct(0),r=ee(()=>{const u=typeof s.value=="boolean"?"top":s.value;return[n.value?{top:"auto",bottom:"auto",height:void 0}:void 0,s.value?{[u]:gt(i.value)}:{top:a.value.top}]});gn(()=>{rt(n,u=>{u?window.addEventListener("scroll",m,{passive:!0}):window.removeEventListener("scroll",m)},{immediate:!0})}),Qn(()=>{window.removeEventListener("scroll",m)});let o=0;function m(){const u=o>window.scrollY?"up":"down",d=t.value.getBoundingClientRect(),l=parseFloat(a.value.top??0),c=window.scrollY-Math.max(0,i.value-l),v=d.height+Math.max(i.value,l)-window.scrollY-window.innerHeight,h=parseFloat(getComputedStyle(t.value).getPropertyValue("--v-body-scroll-y"))||0;d.height<window.innerHeight-l?(s.value="top",i.value=l):u==="up"&&s.value==="bottom"||u==="down"&&s.value==="top"?(i.value=window.scrollY+d.top-h,s.value=!0):u==="down"&&v<=0?(i.value=0,s.value="bottom"):u==="up"&&c<=0&&(h?s.value!=="top"&&(i.value=-c+h+l,s.value="top"):(i.value=d.top+c,s.value="top")),o=window.scrollY}return{isStuck:s,stickyStyles:r}}const CB=100,AB=20;function Pm(e){return(e<0?-1:1)*Math.sqrt(Math.abs(e))*1.41421356237}function Dm(e){if(e.length<2)return 0;if(e.length===2)return e[1].t===e[0].t?0:(e[1].d-e[0].d)/(e[1].t-e[0].t);let t=0;for(let n=e.length-1;n>0;n--){if(e[n].t===e[n-1].t)continue;const a=Pm(t),s=(e[n].d-e[n-1].d)/(e[n].t-e[n-1].t);t+=(s-a)*Math.abs(s),n===e.length-1&&(t*=.5)}return Pm(t)*1e3}function EB(){const e={};function t(s){Array.from(s.changedTouches).forEach(i=>{(e[i.identifier]??(e[i.identifier]=new Wm(AB))).push([s.timeStamp,i])})}function n(s){Array.from(s.changedTouches).forEach(i=>{delete e[i.identifier]})}function a(s){const i=e[s]?.values().reverse();if(!i)throw new Error(`No samples for touch id ${s}`);const r=i[0],o=[],m=[];for(const u of i){if(r[0]-u[0]>CB)break;o.push({t:u[0],d:u[1].clientX}),m.push({t:u[0],d:u[1].clientY})}return{x:Dm(o),y:Dm(m),get direction(){const{x:u,y:d}=this,[l,c]=[Math.abs(u),Math.abs(d)];return l>c&&u>=0?"right":l>c&&u<=0?"left":c>l&&d>=0?"down":c>l&&d<=0?"up":MB()}}}return{addMovement:t,endTouch:n,getVelocity:a}}function MB(){throw new Error}function RB(e){let{el:t,isActive:n,isTemporary:a,width:s,touchless:i,position:r}=e;gn(()=>{window.addEventListener("touchstart",p,{passive:!0}),window.addEventListener("touchmove",L,{passive:!1}),window.addEventListener("touchend",O,{passive:!0})}),Qn(()=>{window.removeEventListener("touchstart",p),window.removeEventListener("touchmove",L),window.removeEventListener("touchend",O)});const o=ee(()=>["left","right"].includes(r.value)),{addMovement:m,endTouch:u,getVelocity:d}=EB();let l=!1;const c=ct(!1),v=ct(0),h=ct(0);let A;function T(B,R){return(r.value==="left"?B:r.value==="right"?document.documentElement.clientWidth-B:r.value==="top"?B:r.value==="bottom"?document.documentElement.clientHeight-B:gi())-(R?s.value:0)}function k(B){let R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const C=r.value==="left"?(B-h.value)/s.value:r.value==="right"?(document.documentElement.clientWidth-B-h.value)/s.value:r.value==="top"?(B-h.value)/s.value:r.value==="bottom"?(document.documentElement.clientHeight-B-h.value)/s.value:gi();return R?pa(C):C}function p(B){if(i.value)return;const R=B.changedTouches[0].clientX,C=B.changedTouches[0].clientY,I=25,b=r.value==="left"?R<I:r.value==="right"?R>document.documentElement.clientWidth-I:r.value==="top"?C<I:r.value==="bottom"?C>document.documentElement.clientHeight-I:gi(),y=n.value&&(r.value==="left"?R<s.value:r.value==="right"?R>document.documentElement.clientWidth-s.value:r.value==="top"?C<s.value:r.value==="bottom"?C>document.documentElement.clientHeight-s.value:gi());(b||y||n.value&&a.value)&&(A=[R,C],h.value=T(o.value?R:C,n.value),v.value=k(o.value?R:C),l=h.value>-20&&h.value<80,u(B),m(B))}function L(B){const R=B.changedTouches[0].clientX,C=B.changedTouches[0].clientY;if(l){if(!B.cancelable){l=!1;return}const b=Math.abs(R-A[0]),y=Math.abs(C-A[1]);(o.value?b>y&&b>3:y>b&&y>3)?(c.value=!0,l=!1):(o.value?y:b)>3&&(l=!1)}if(!c.value)return;B.preventDefault(),m(B);const I=k(o.value?R:C,!1);v.value=Math.max(0,Math.min(1,I)),I>1?h.value=T(o.value?R:C,!0):I<0&&(h.value=T(o.value?R:C,!1))}function O(B){if(l=!1,!c.value)return;m(B),c.value=!1;const R=d(B.changedTouches[0].identifier),C=Math.abs(R.x),I=Math.abs(R.y);(o.value?C>I&&C>400:I>C&&I>3)?n.value=R.direction===({left:"right",right:"left",top:"down",bottom:"up"}[r.value]||gi()):n.value=v.value>.5}const g=ee(()=>c.value?{transform:r.value==="left"?`translateX(calc(-100% + ${v.value*s.value}px))`:r.value==="right"?`translateX(calc(100% - ${v.value*s.value}px))`:r.value==="top"?`translateY(calc(-100% + ${v.value*s.value}px))`:r.value==="bottom"?`translateY(calc(100% - ${v.value*s.value}px))`:gi(),transition:"none"}:void 0);return _a(c,()=>{const B=t.value?.style.transform??null,R=t.value?.style.transition??null;ja(()=>{t.value?.style.setProperty("transform",g.value?.transform||"none"),t.value?.style.setProperty("transition",g.value?.transition||null)}),On(()=>{t.value?.style.setProperty("transform",B),t.value?.style.setProperty("transition",R)})}),{isDragging:c,dragProgress:v,dragStyles:g}}function gi(){throw new Error}const IB=["start","end","left","right","top","bottom"],BB=He({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,persistent:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:e=>IB.includes(e)},sticky:Boolean,...Xa(),...bt(),...Th(),...Um({mobile:null}),...vs(),...zm(),...ta(),...Gt({tag:"nav"}),...un()},"VNavigationDrawer"),LB=et()({name:"VNavigationDrawer",props:BB(),emits:{"update:modelValue":e=>!0,"update:rail":e=>!0},setup(e,t){let{attrs:n,emit:a,slots:s}=t;const{isRtl:i}=ca(),{themeClasses:r}=_n(e),{borderClasses:o}=Ga(e),{backgroundColorClasses:m,backgroundColorStyles:u}=Gn(()=>e.color),{elevationClasses:d}=hs(e),{displayClasses:l,mobile:c}=Wo(e),{roundedClasses:v}=na(e),h=H0(),A=Wt(e,"modelValue",null,f=>!!f),{ssrBootStyles:T}=Dr(),{scopeId:k}=Ur(),p=he(),L=ct(!1),{runOpenDelay:O,runCloseDelay:g}=Ch(e,f=>{L.value=f}),B=ee(()=>e.rail&&e.expandOnHover&&L.value?Number(e.width):Number(e.rail?e.railWidth:e.width)),R=ee(()=>Wg(e.location,i.value)),C=De(()=>e.persistent),I=ee(()=>!e.permanent&&(c.value||e.temporary)),b=ee(()=>e.sticky&&!I.value&&R.value!=="bottom");_a(()=>e.expandOnHover&&e.rail!=null,()=>{rt(L,f=>a("update:rail",!f))}),_a(()=>!e.disableResizeWatcher,()=>{rt(I,f=>!e.permanent&&en(()=>A.value=!f))}),_a(()=>!e.disableRouteWatcher&&!!h,()=>{rt(h.currentRoute,()=>I.value&&(A.value=!1))}),rt(()=>e.permanent,f=>{f&&(A.value=!0)}),e.modelValue==null&&!I.value&&(A.value=e.permanent||!c.value);const{isDragging:y,dragProgress:_}=RB({el:p,isActive:A,isTemporary:I,width:B,touchless:De(()=>e.touchless),position:R}),w=ee(()=>{const f=I.value?0:e.rail&&e.expandOnHover?Number(e.railWidth):B.value;return y.value?f*_.value:f}),{layoutItemStyles:E,layoutItemScrimStyles:M}=Hm({id:e.name,order:ee(()=>parseInt(e.order,10)),position:R,layoutSize:w,elementSize:B,active:iu(A),disableTransitions:De(()=>y.value),absolute:ee(()=>e.absolute||b.value&&typeof V.value!="string")}),{isStuck:V,stickyStyles:q}=TB({rootEl:p,isSticky:b,layoutItemStyles:E}),$=Gn(()=>typeof e.scrim=="string"?e.scrim:null),U=ee(()=>({...y.value?{opacity:_.value*.2,transition:"none"}:void 0,...M.value}));return ls({VList:{bgColor:"transparent"}}),ot(()=>{const f=s.image||e.image;return S(lt,null,[Q(e.tag,at({ref:p,onMouseenter:O,onMouseleave:g,class:["v-navigation-drawer",`v-navigation-drawer--${R.value}`,{"v-navigation-drawer--expand-on-hover":e.expandOnHover,"v-navigation-drawer--floating":e.floating,"v-navigation-drawer--is-hovering":L.value,"v-navigation-drawer--rail":e.rail,"v-navigation-drawer--temporary":I.value,"v-navigation-drawer--persistent":C.value,"v-navigation-drawer--active":A.value,"v-navigation-drawer--sticky":b.value},r.value,m.value,o.value,l.value,d.value,v.value,e.class],style:[u.value,E.value,T.value,q.value,e.style]},k,n),{default:()=>[f&&S("div",{key:"image",class:"v-navigation-drawer__img"},[s.image?Q(rn,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{alt:"",cover:!0,height:"inherit",src:e.image}}},s.image):Q(gl,{key:"image-img",alt:"",cover:!0,height:"inherit",src:e.image},null)]),s.prepend&&S("div",{class:"v-navigation-drawer__prepend"},[s.prepend?.()]),S("div",{class:"v-navigation-drawer__content"},[s.default?.()]),s.append&&S("div",{class:"v-navigation-drawer__append"},[s.append?.()])]}),Q(Rs,{name:"fade-transition"},{default:()=>[I.value&&(y.value||A.value)&&!!e.scrim&&S("div",at({class:["v-navigation-drawer__scrim",$.backgroundColorClasses.value],style:[U.value,$.backgroundColorStyles.value],onClick:()=>{C.value||(A.value=!1)}},k),null)]})])}),{isStuck:V}}}),OB=He({...kl({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),FB=et()({name:"VRadio",props:OB(),setup(e,t){let{slots:n}=t;return ot(()=>{const a=oi.filterProps(e);return Q(oi,at(a,{class:["v-radio",e.class],style:e.style,type:"radio"}),n)}),{}}}),VB=He({height:{type:[Number,String],default:"auto"},...Pi(),...us(cd(),["multiple"]),trueIcon:{type:Bt,default:"$radioOn"},falseIcon:{type:Bt,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),PB=et()({name:"VRadioGroup",inheritAttrs:!1,props:VB(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:a}=t;const s=qa(),i=ee(()=>e.id||`radio-group-${s}`),r=Wt(e,"modelValue");return ot(()=>{const[o,m]=Bi(n),u=Ua.filterProps(e),d=oi.filterProps(e),l=a.label?a.label({label:e.label,props:{for:i.value}}):e.label;return Q(Ua,at({class:["v-radio-group",e.class],style:e.style},o,u,{modelValue:r.value,"onUpdate:modelValue":c=>r.value=c,id:i.value}),{...a,default:c=>{let{id:v,messagesId:h,isDisabled:A,isReadonly:T}=c;return S(lt,null,[l&&Q(ld,{id:v.value},{default:()=>[l]}),Q(yR,at(d,{id:v.value,"aria-describedby":h.value,defaultsTarget:"VRadio",trueIcon:e.trueIcon,falseIcon:e.falseIcon,type:e.type,disabled:A.value,readonly:T.value,"aria-labelledby":l?v.value:void 0,multiple:!1},m,{modelValue:r.value,"onUpdate:modelValue":k=>r.value=k}),a)])}})}),{}}}),DB=He({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...Pi(),...kl()},"VSwitch"),jB=et()({name:"VSwitch",inheritAttrs:!1,props:DB(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,t){let{attrs:n,slots:a}=t;const s=Wt(e,"indeterminate"),i=Wt(e,"modelValue"),{loaderClasses:r}=yl(e),{isFocused:o,focus:m,blur:u}=zr(e),d=he(),l=Sn&&window.matchMedia("(forced-colors: active)").matches,c=De(()=>typeof e.loading=="string"&&e.loading!==""?e.loading:e.color),v=qa(),h=De(()=>e.id||`switch-${v}`);function A(){s.value&&(s.value=!1)}function T(k){k.stopPropagation(),k.preventDefault(),d.value?.input?.click()}return ot(()=>{const[k,p]=Bi(n),L=Ua.filterProps(e),O=oi.filterProps(e);return Q(Ua,at({class:["v-switch",{"v-switch--flat":e.flat},{"v-switch--inset":e.inset},{"v-switch--indeterminate":s.value},r.value,e.class]},k,L,{modelValue:i.value,"onUpdate:modelValue":g=>i.value=g,id:h.value,focused:o.value,style:e.style}),{...a,default:g=>{let{id:B,messagesId:R,isDisabled:C,isReadonly:I,isValid:b}=g;const y={model:i,isValid:b};return Q(oi,at({ref:d},O,{modelValue:i.value,"onUpdate:modelValue":[_=>i.value=_,A],id:B.value,"aria-describedby":R.value,type:"checkbox","aria-checked":s.value?"mixed":void 0,disabled:C.value,readonly:I.value,onFocus:m,onBlur:u},p),{...a,default:_=>{let{backgroundColorClasses:w,backgroundColorStyles:E}=_;return S("div",{class:Me(["v-switch__track",l?void 0:w.value]),style:vt(E.value),onClick:T},[a["track-true"]&&S("div",{key:"prepend",class:"v-switch__track-true"},[a["track-true"](y)]),a["track-false"]&&S("div",{key:"append",class:"v-switch__track-false"},[a["track-false"](y)])])},input:_=>{let{inputNode:w,icon:E,backgroundColorClasses:M,backgroundColorStyles:V}=_;return S(lt,null,[w,S("div",{class:Me(["v-switch__thumb",{"v-switch__thumb--filled":E||e.loading},e.inset||l?void 0:M.value]),style:vt(e.inset?void 0:V.value)},[a.thumb?Q(rn,{defaults:{VIcon:{icon:E,size:"x-small"}}},{default:()=>[a.thumb({...y,icon:E})]}):Q(zM,null,{default:()=>[e.loading?Q(id,{name:"v-switch",active:!0,color:b.value===!1?void 0:c.value},{default:q=>a.loader?a.loader(q):Q(ad,{active:q.isActive,color:q.color,indeterminate:!0,size:"16",width:"2"},null)}):E&&Q(hn,{key:String(E),icon:E,size:"x-small"},null)]})])])}})}})}),{}}}),pd=Symbol.for("vuetify:v-tabs"),NB=He({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...us(Z0({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),Qh=et()({name:"VTab",props:NB(),setup(e,t){let{slots:n,attrs:a}=t;const{textColorClasses:s,textColorStyles:i}=Ha(()=>e.sliderColor),r=he(),o=he(),m=ee(()=>e.direction==="horizontal"),u=ee(()=>r.value?.group?.isSelected.value??!1);function d(l){let{value:c}=l;if(c){const v=r.value?.$el.parentElement?.querySelector(".v-tab--selected .v-tab__slider"),h=o.value;if(!v||!h)return;const A=getComputedStyle(v).color,T=v.getBoundingClientRect(),k=h.getBoundingClientRect(),p=m.value?"x":"y",L=m.value?"X":"Y",O=m.value?"right":"bottom",g=m.value?"width":"height",B=T[p],R=k[p],C=B>R?T[O]-k[O]:T[p]-k[p],I=Math.sign(C)>0?m.value?"right":"bottom":Math.sign(C)<0?m.value?"left":"top":"center",y=(Math.abs(C)+(Math.sign(C)<0?T[g]:k[g]))/Math.max(T[g],k[g])||0,_=T[g]/k[g]||0,w=1.5;ei(h,{backgroundColor:[A,"currentcolor"],transform:[`translate${L}(${C}px) scale${L}(${_})`,`translate${L}(${C/w}px) scale${L}(${(y-1)/w+1})`,"none"],transformOrigin:Array(3).fill(I)},{duration:225,easing:ur})}}return ot(()=>{const l=xr.filterProps(e);return Q(xr,at({symbol:pd,ref:r,class:["v-tab",e.class],style:e.style,tabindex:u.value?0:-1,role:"tab","aria-selected":String(u.value),active:!1},l,a,{block:e.fixed,maxWidth:e.fixed?300:void 0,"onGroup:selected":d}),{...n,default:()=>S(lt,null,[n.default?.()??e.text,!e.hideSlider&&S("div",{ref:o,class:Me(["v-tab__slider",s.value]),style:vt(i.value)},null)])})}),Di({},r)}}),$B=He({...us(Nh(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),Jh=et()({name:"VTabsWindow",props:$B(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=Jn(pd,null),s=Wt(e,"modelValue"),i=ee({get(){return s.value!=null||!a?s.value:a.items.value.find(r=>a.selected.value.includes(r.id))?.value},set(r){s.value=r}});return ot(()=>{const r=Lm.filterProps(e);return Q(Lm,at({_as:"VTabsWindow"},r,{modelValue:i.value,"onUpdate:modelValue":o=>i.value=o,class:["v-tabs-window",e.class],style:e.style,mandatory:!1,touch:!1}),n)}),{}}}),HB=He({...$h()},"VTabsWindowItem"),eg=et()({name:"VTabsWindowItem",props:HB(),setup(e,t){let{slots:n}=t;return ot(()=>{const a=Om.filterProps(e);return Q(Om,at({_as:"VTabsWindowItem"},a,{class:["v-tabs-window-item",e.class],style:e.style}),n)}),{}}});function zB(e){return e?e.map(t=>ko(t)?t:{text:t,value:t}):[]}const UB=He({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...ud({mandatory:"force",selectedClass:"v-tab-item--selected"}),...Ca(),...Gt()},"VTabs"),qB=et()({name:"VTabs",props:UB(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:a}=t;const s=Wt(e,"modelValue"),i=ee(()=>zB(e.items)),{densityClasses:r}=Ka(e),{backgroundColorClasses:o,backgroundColorStyles:m}=Gn(()=>e.bgColor),{scopeId:u}=Ur();return ls({VTab:{color:De(()=>e.color),direction:De(()=>e.direction),stacked:De(()=>e.stacked),fixed:De(()=>e.fixedTabs),sliderColor:De(()=>e.sliderColor),hideSlider:De(()=>e.hideSlider)}}),ot(()=>{const d=No.filterProps(e),l=!!(a.window||e.items.length>0);return S(lt,null,[Q(No,at(d,{modelValue:s.value,"onUpdate:modelValue":c=>s.value=c,class:["v-tabs",`v-tabs--${e.direction}`,`v-tabs--align-tabs-${e.alignTabs}`,{"v-tabs--fixed-tabs":e.fixedTabs,"v-tabs--grow":e.grow,"v-tabs--stacked":e.stacked},r.value,o.value,e.class],style:[{"--v-tabs-height":gt(e.height)},m.value,e.style],role:"tablist",symbol:pd},u,n),{default:()=>[a.default?.()??i.value.map(c=>a.tab?.({item:c})??Q(Qh,at(c,{key:c.text,value:c.value}),{default:a[`tab.${c.value}`]?()=>a[`tab.${c.value}`]?.({item:c}):void 0}))]}),l&&Q(Jh,at({modelValue:s.value,"onUpdate:modelValue":c=>s.value=c,key:"tabs-window"},u),{default:()=>[i.value.map(c=>a.item?.({item:c})??Q(eg,{value:c.value},{default:()=>a[`item.${c.value}`]?.({item:c})})),a.window?.()]})])}),{}}}),WB=He({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...Pi(),...vd()},"VTextarea"),YB=et()({name:"VTextarea",directives:{vIntersect:Ri},inheritAttrs:!1,props:WB(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:a,slots:s}=t;const i=Wt(e,"modelValue"),{isFocused:r,focus:o,blur:m}=zr(e),{onIntersect:u}=Oh(e),d=ee(()=>typeof e.counterValue=="function"?e.counterValue(i.value):(i.value||"").toString().length),l=ee(()=>{if(n.maxlength)return n.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter}),c=he(),v=he(),h=ct(""),A=he(),T=ee(()=>e.persistentPlaceholder||r.value||e.active);function k(){A.value!==document.activeElement&&A.value?.focus(),r.value||o()}function p(y){k(),a("click:control",y)}function L(y){a("mousedown:control",y)}function O(y){y.stopPropagation(),k(),en(()=>{i.value="",uu(e["onClick:clear"],y)})}function g(y){const _=y.target;if(i.value=_.value,e.modelModifiers?.trim){const w=[_.selectionStart,_.selectionEnd];en(()=>{_.selectionStart=w[0],_.selectionEnd=w[1]})}}const B=he(),R=he(Number(e.rows)),C=ee(()=>["plain","underlined"].includes(e.variant));ja(()=>{e.autoGrow||(R.value=Number(e.rows))});function I(){e.autoGrow&&en(()=>{if(!B.value||!v.value)return;const y=getComputedStyle(B.value),_=getComputedStyle(v.value.$el),w=parseFloat(y.getPropertyValue("--v-field-padding-top"))+parseFloat(y.getPropertyValue("--v-input-padding-top"))+parseFloat(y.getPropertyValue("--v-field-padding-bottom")),E=B.value.scrollHeight,M=parseFloat(y.lineHeight),V=Math.max(parseFloat(e.rows)*M+w,parseFloat(_.getPropertyValue("--v-input-control-height"))),q=parseFloat(e.maxRows)*M+w||1/0,$=pa(E??0,V,q);R.value=Math.floor(($-w)/M),h.value=gt($)})}gn(I),rt(i,I),rt(()=>e.rows,I),rt(()=>e.maxRows,I),rt(()=>e.density,I);let b;return rt(B,y=>{y?(b=new ResizeObserver(I),b.observe(B.value)):b?.disconnect()}),Qn(()=>{b?.disconnect()}),ot(()=>{const y=!!(s.counter||e.counter||e.counterValue),_=!!(y||s.details),[w,E]=Bi(n),{modelValue:M,...V}=Ua.filterProps(e),q=zo.filterProps(e);return Q(Ua,at({ref:c,modelValue:i.value,"onUpdate:modelValue":$=>i.value=$,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-input--plain-underlined":C.value},e.class],style:e.style},w,V,{centerAffix:R.value===1&&!C.value,focused:r.value}),{...s,default:$=>{let{id:U,isDisabled:f,isDirty:x,isReadonly:H,isValid:F}=$;return Q(zo,at({ref:v,style:{"--v-textarea-control-height":h.value},onClick:p,onMousedown:L,"onClick:clear":O,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},q,{id:U.value,active:T.value||x.value,centerAffix:R.value===1&&!C.value,dirty:x.value||e.dirty,disabled:f.value,focused:r.value,error:F.value===!1}),{...s,default:se=>{let{props:{class:me,...X}}=se;return S(lt,null,[e.prefix&&S("span",{class:"v-text-field__prefix"},[e.prefix]),on(S("textarea",at({ref:A,class:me,value:i.value,onInput:g,autofocus:e.autofocus,readonly:H.value,disabled:f.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:k,onBlur:m},X,E),null),[[Ri,{handler:u},null,{once:!0}]]),e.autoGrow&&on(S("textarea",{class:Me([me,"v-textarea__sizer"]),id:`${X.id}-sizer`,"onUpdate:modelValue":G=>i.value=G,ref:B,readonly:!0,"aria-hidden":"true"},null),[[Er,i.value]]),e.suffix&&S("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:_?$=>S(lt,null,[s.details?.($),y&&S(lt,null,[S("span",null,null),Q(Lh,{active:e.persistentCounter||r.value,value:d.value,max:l.value,disabled:e.disabled},s.counter)])]):void 0})}),Di({},c,v,A)}}),XB=Yg({components:{VApp:jM,VMain:xB,VBtn:xr,VCard:eB,VCardText:Ph,VCardTitle:Vh,VSelect:UI,VTextField:tu,VTabs:qB,VTab:Qh,VTabsWindow:Jh,VTabsWindowItem:eg,VIcon:hn,VContainer:dB,VRow:SB,VCol:hB,VChip:rh,VProgressLinear:$0,VProgressCircular:ad,VDialog:WI,VDivider:gh,VList:wh,VListItem:Ar,VListItemTitle:hh,VMenu:Bh,VSheet:cB,VToolbar:Wc,VToolbarTitle:E0,VNavigationDrawer:LB,VAppBar:QM,VSwitch:jB,VCheckbox:RR,VRadio:FB,VRadioGroup:PB,VTextarea:YB},directives:{Ripple:za},theme:{defaultTheme:"dark",themes:{dark:{colors:{primary:"#6366f1",secondary:"#8b5cf6",accent:"#06b6d4",error:"#ef4444",warning:"#f59e0b",info:"#3b82f6",success:"#10b981"}}}}});class wi{socket=null;shellWs=null;ctlWs=null;static instance;constructor(){}static getInstance(){return wi.instance||(wi.instance=new wi),wi.instance}connect(){return this.socket||(this.socket=gg(EA||window.location.origin,{path:"/socket.io"}),this.socket.on("connect",()=>{console.log("AetherTerm Socket.IO connected"),this.setupVueTermWebSockets()}),this.socket.on("disconnect",()=>{console.log("AetherTerm Socket.IO disconnected"),this.closeVueTermWebSockets()})),this.socket}setupVueTermWebSockets(){console.log("VueTerm using Socket.IO")}closeVueTermWebSockets(){}getSocket(){return this.socket}disconnect(){this.socket&&(this.socket.disconnect(),this.socket=null),this.closeVueTermWebSockets()}onControlOutput(t){this.socket&&this.socket.on("ctl_output",t)}onConnect(t){this.socket&&this.socket.on("connect",t)}onDisconnect(t){this.socket&&this.socket.on("disconnect",t)}onError(t){this.socket&&this.socket.on("connect_error",t)}onChatMessage(t){this.socket&&this.socket.on("chat_message",t)}sendChatMessage(t){this.socket&&this.socket.emit("chat_message",t)}sendCommand(t,n){this.socket&&(console.log("Sending command:",t),this.socket.emit("terminal_command",{command:t,commandId:n||Date.now().toString()}))}onAdminPauseTerminal(t){this.socket&&this.socket.on("admin_pause_terminal",t)}onAdminResumeTerminal(t){this.socket&&this.socket.on("admin_resume_terminal",t)}onAdminSuppressOutput(t){this.socket&&this.socket.on("admin_suppress_output",t)}onCommandApproval(t){this.socket&&this.socket.on("command_approval",t)}emitCommandReviewRequired(t){this.socket&&this.socket.emit("command_review_required",t)}offShellOutput(t){this.socket&&this.socket.off("shell_output",t)}offControlOutput(t){this.socket&&this.socket.off("ctl_output",t)}offChatMessage(t){this.socket&&this.socket.off("chat_message",t)}offConnect(t){this.socket&&this.socket.off("connect",t)}offDisconnect(t){this.socket&&this.socket.off("disconnect",t)}offError(t){this.socket&&this.socket.off("connect_error",t)}async makeInventoryRequest(t,n={}){const a=`${A0}/api/inventory${t}`;try{const s=await fetch(a,{headers:{"Content-Type":"application/json",...n.headers},...n});if(!s.ok){const i=await s.json().catch(()=>({detail:"Unknown error"}));throw new Error(`HTTP ${s.status}: ${i.detail||i.message||"Request failed"}`)}return await s.json()}catch(s){throw console.error(`Inventory API request failed [${t}]:`,s),s}}async getInventorySummary(){return this.makeInventoryRequest("/summary")}async getInventoryResources(t={}){const n=new URLSearchParams;t.limit&&n.append("limit",t.limit.toString()),t.provider&&n.append("provider",t.provider),t.resource_type&&n.append("resource_type",t.resource_type);const a=`/resources${n.toString()?`?${n.toString()}`:""}`;return this.makeInventoryRequest(a)}async searchInventory(t,n){return this.makeInventoryRequest("/search",{method:"POST",body:JSON.stringify({search_term:t,provider_filter:n})})}async getInventoryServiceStatus(){return this.makeInventoryRequest("/status")}async syncInventory(){return this.makeInventoryRequest("/sync",{method:"POST"})}onInventoryUpdate(t){this.socket&&this.socket.on("inventory_update",t)}onInventorySyncStatus(t){this.socket&&this.socket.on("inventory_sync_status",t)}requestInventoryRefresh(){this.socket&&this.socket.emit("request_inventory_refresh")}subscribeToResourceUpdates(t){this.socket&&this.socket.emit("subscribe_resource_updates",{resource_id:t})}unsubscribeFromResourceUpdates(t){this.socket&&this.socket.emit("unsubscribe_resource_updates",{resource_id:t})}offInventoryUpdate(t){this.socket&&this.socket.off("inventory_update",t)}offInventorySyncStatus(t){this.socket&&this.socket.off("inventory_sync_status",t)}}zS();const xl=vg(VM),GB=hg();xl.use(GB);xl.use(PM);xl.use(XB);const KB=wi.getInstance(),ZB=KB.connect(),tg=ka();tg.setSocket(ZB);tg.initializeSession(`session_${Date.now()}`);xl.mount("#app");
