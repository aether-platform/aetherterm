<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AetherTerm Theme Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            padding: 20px;
        }
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 8px;
        }
        .terminal-preview {
            background-color: var(--terminal-background, #1e1e1e);
            color: var(--terminal-foreground, #d4d4d4);
            font-family: var(--terminal-font-family, monospace);
            font-size: var(--terminal-font-size, 14px);
            padding: 15px;
            border-radius: 4px;
            margin: 10px 0;
            min-height: 120px;
            transition: all 0.3s ease;
        }
        .theme-buttons {
            margin: 10px 0;
        }
        .theme-btn {
            margin: 5px;
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            background: #007acc;
            color: white;
        }
        .theme-btn:hover {
            background: #005a9e;
        }
    </style>
</head>
<body>
    <h1>AetherTerm Theme System Test</h1>
    
    <div class="test-section">
        <h2>Theme Integration Test</h2>
        <p>This test validates the CSS variable integration for the theme system.</p>
        
        <div class="theme-buttons">
            <button class="theme-btn" onclick="setTheme('default')">Default</button>
            <button class="theme-btn" onclick="setTheme('dracula')">Dracula</button>
            <button class="theme-btn" onclick="setTheme('solarized-dark')">Solarized Dark</button>
            <button class="theme-btn" onclick="setTheme('nord')">Nord</button>
            <button class="theme-btn" onclick="setTheme('gruvbox-dark')">Gruvbox Dark</button>
        </div>
        
        <div class="terminal-preview" id="terminal-preview">
            <div>user@aetherterm:~$ ls -la</div>
            <div>total 24</div>
            <div>drwxr-xr-x  3 user user 4096 Jan 01 12:00 .</div>
            <div>drwxr-xr-x 25 user user 4096 Jan 01 11:30 ..</div>
            <div>-rw-r--r--  1 user user  220 Jan 01 12:00 .bashrc</div>
            <div>-rw-r--r--  1 user user  807 Jan 01 12:00 .profile</div>
            <div>user@aetherterm:~$ â–ˆ</div>
        </div>
    </div>

    <div class="test-section">
        <h2>Current Theme Variables</h2>
        <div id="variables-display"></div>
    </div>

    <script>
        const themes = {
            'default': {
                background: '#1e1e1e',
                foreground: '#d4d4d4',
                cursor: '#ffffff',
                selection: '#264f78',
                fontFamily: "Monaco, 'Courier New', monospace",
                fontSize: '14px'
            },
            'dracula': {
                background: '#282a36',
                foreground: '#f8f8f2',
                cursor: '#f8f8f0',
                selection: '#44475a',
                fontFamily: "Monaco, 'Courier New', monospace",
                fontSize: '14px'
            },
            'solarized-dark': {
                background: '#002b36',
                foreground: '#839496',
                cursor: '#93a1a1',
                selection: '#073642',
                fontFamily: "Monaco, 'Courier New', monospace",
                fontSize: '14px'
            },
            'nord': {
                background: '#2e3440',
                foreground: '#d8dee9',
                cursor: '#d8dee9',
                selection: '#4c566a',
                fontFamily: "Monaco, 'Courier New', monospace",
                fontSize: '14px'
            },
            'gruvbox-dark': {
                background: '#282828',
                foreground: '#ebdbb2',
                cursor: '#ebdbb2',
                selection: '#3c3836',
                fontFamily: "Monaco, 'Courier New', monospace",
                fontSize: '14px'
            }
        };

        function setTheme(themeName) {
            const theme = themes[themeName];
            if (!theme) return;

            const root = document.documentElement;
            
            // Apply theme variables
            root.style.setProperty('--terminal-background', theme.background);
            root.style.setProperty('--terminal-foreground', theme.foreground);
            root.style.setProperty('--terminal-cursor', theme.cursor);
            root.style.setProperty('--terminal-selection', theme.selection);
            root.style.setProperty('--terminal-font-family', theme.fontFamily);
            root.style.setProperty('--terminal-font-size', theme.fontSize);

            // Store in localStorage to simulate persistence
            localStorage.setItem('aetherterm-current-theme', themeName);
            localStorage.setItem('aetherterm-theme-config', JSON.stringify({
                colorScheme: themeName,
                mode: 'dark',
                fontFamily: theme.fontFamily,
                fontSize: parseInt(theme.fontSize)
            }));

            updateVariablesDisplay();
            console.log(`ðŸŽ¨ Theme changed to: ${themeName}`);
        }

        function updateVariablesDisplay() {
            const root = document.documentElement;
            const style = getComputedStyle(root);
            
            const variables = [
                '--terminal-background',
                '--terminal-foreground', 
                '--terminal-cursor',
                '--terminal-selection',
                '--terminal-font-family',
                '--terminal-font-size'
            ];

            const display = document.getElementById('variables-display');
            display.innerHTML = variables.map(varName => {
                const value = style.getPropertyValue(varName).trim();
                return `<div><strong>${varName}:</strong> ${value || 'not set'}</div>`;
            }).join('');
        }

        // Load saved theme on page load
        window.addEventListener('load', () => {
            const savedTheme = localStorage.getItem('aetherterm-current-theme') || 'default';
            setTheme(savedTheme);
            
            console.log('ðŸš€ Theme test page loaded');
            console.log('âœ… Theme persistence check:', localStorage.getItem('aetherterm-theme-config'));
        });

        // Test theme switching every 3 seconds
        let themeIndex = 0;
        const themeNames = Object.keys(themes);
        
        function autoSwitchThemes() {
            const themeName = themeNames[themeIndex];
            setTheme(themeName);
            console.log(`ðŸ”„ Auto-switched to: ${themeName}`);
            
            themeIndex = (themeIndex + 1) % themeNames.length;
        }

        // Uncomment to enable auto theme switching for testing
        // setInterval(autoSwitchThemes, 3000);
    </script>
</body>
</html>